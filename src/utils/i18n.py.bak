"""国际化支持
Internationalization Support"""
import gettext
import os
from pathlib import Path

# 支持的语言
supported_languages = {)
    "zh": "zh_CN",
    "zh-CN": "zh_CN",
    "en": "en_US",
    "en-US": "en_US",


# 翻译文件目录
LOCALE_DIR = Path(__file__).parent / "locales"


def init_i18n():
    """初始化国际化"""
    # 确保翻译目录存在
    LOCALE_DIR.mkdir(exist_ok=True)

    # 设置默认语言
    os.getenv("LANGUAGE", "zh_CN")

    try:
        # 设置gettext
        gettext.bindtextdomain("football_prediction", str(LOCALE_DIR))
        gettext.textdomain("football_prediction")
        # 安装gettext
        gettext.install("football_prediction", localedir=str(LOCALE_DIR))
    except (ValueError, KeyError, RuntimeError):
        # 如果初始化失败, 使用默认语言
        pass


# 初始化
init_i18n()
