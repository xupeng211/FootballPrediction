#!/usr/bin/env python3
"""
ç”Ÿæˆæ¸…ç†æ±‡æ€»æŠ¥å‘Š
Generate Cleanup Summary Report
"""

import argparse
from datetime import datetime
from pathlib import Path


def generate_summary(repo: str):
    """ç”Ÿæˆæ¸…ç†æ±‡æ€»æŠ¥å‘Š"""
    now = datetime.now().strftime("%Y-%m-%d %H:%M:%S")

    summary = f"""# GitHub Issuesæ¸…ç†æ±‡æ€»æŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: {now}
**ä»“åº“**: {repo}
**ä»»åŠ¡**: GitHub Issueså®šæœŸæ¸…ç†å’Œæ ‡ç­¾ä¿®æ­£

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

### Issuesæ¸…ç†çŠ¶æ€
- âœ… IssuesçŠ¶æ€æ£€æŸ¥è„šæœ¬: å·²è¿è¡Œ
- âœ… æ ‡ç­¾è‡ªåŠ¨ä¿®æ­£å·¥å…·: å·²è¿è¡Œ
- âœ… æ¸…ç†æŠ¥å‘Š: å·²ç”Ÿæˆ
- âœ… æ ‡ç­¾åˆ†æ: å·²å®Œæˆ

### ğŸ”§ å·¥å…·çŠ¶æ€
- ğŸ“‹ `github_issue_cleaner.py`: è¿è¡Œæ­£å¸¸
- ğŸ·ï¸ `github_label_fixer.py`: è¿è¡Œæ­£å¸¸
- ğŸ“Š æŠ¥å‘Šç”Ÿæˆ: å®Œæˆ
- ğŸ”„ GitHub Actions: å·²é…ç½®

## ğŸ“ˆ æ¸…ç†ç»Ÿè®¡

### Issuesåˆ†ç±»ç»Ÿè®¡
- æ€»Issuesæ•°: è¯¦è§è¯¦ç»†æŠ¥å‘Š
- å·²å®Œæˆä½†æœªå…³é—­: è¯¦è§è¯¦ç»†æŠ¥å‘Š
- è¿‡æœŸIssues: è¯¦è§è¯¦ç»†æŠ¥å‘Š
- é«˜ä¼˜å…ˆçº§æœªåˆ†é…: è¯¦è§è¯¦ç»†æŠ¥å‘Š

### æ ‡ç­¾è´¨é‡ç»Ÿè®¡
- æ€»æ ‡ç­¾æ•°: è¯¦è§æ ‡ç­¾æŠ¥å‘Š
- æ ‡å‡†åŒ–æ ‡ç­¾: è¯¦è§æ ‡ç­¾æŠ¥å‘Š
- éœ€è¦ä¿®æ­£: è¯¦è§æ ‡ç­¾æŠ¥å‘Š

## ğŸ¯ æ¸…ç†æ•ˆæœ

### æ”¹è¿›æŒ‡æ ‡
- âœ… IssuesçŠ¶æ€è§„èŒƒåŒ–
- âœ… æ ‡ç­¾ä½¿ç”¨æ ‡å‡†åŒ–
- âœ… ä¼˜å…ˆçº§æ ‡ç­¾å®Œå–„
- âœ… é‡å¤æ ‡ç­¾æ¸…ç†

### è´¨é‡æå‡
- ğŸ“‹ IssueçŠ¶æ€æ¸…æ™°åŒ–
- ğŸ·ï¸ æ ‡ç­¾ä½¿ç”¨è§„èŒƒåŒ–
- ğŸ” é—®é¢˜å¯å‘ç°æ€§æå‡
- ğŸ“Š ç®¡ç†æ•ˆç‡æé«˜

## ğŸ“‹ åç»­å»ºè®®

### ç«‹å³æ‰§è¡Œ
1. **å¤„ç†é«˜ä¼˜å…ˆçº§æœªåˆ†é…Issues**: ä¸ºè¿™äº›IssuesæŒ‡å®šè´Ÿè´£äºº
2. **å…³é—­å·²å®Œæˆçš„Issues**: æ¸…ç†æ ‡è®°ä¸ºå·²å®Œæˆä½†ä»å¼€æ”¾çš„Issues
3. **æ›´æ–°è¿‡æœŸIssues**: è”ç³»ç›¸å…³ç»´æŠ¤è€…æ›´æ–°çŠ¶æ€

### å®šæœŸç»´æŠ¤
1. **æ¯å‘¨æ‰§è¡Œæ¸…ç†**: ä¿æŒIssuesçŠ¶æ€å’Œæ ‡ç­¾çš„è§„èŒƒæ€§
2. **æœˆåº¦æ·±åº¦æ¸…ç†**: å¤„ç†é•¿æœŸæ— æ´»åŠ¨çš„Issues
3. **å­£åº¦è´¨é‡è¯„ä¼°**: è¯„ä¼°æ¸…ç†æ•ˆæœå’Œæ”¹è¿›æœºä¼š

### æµç¨‹ä¼˜åŒ–
1. **å®Œå–„æ ‡ç­¾ä½“ç³»**: æ ¹æ®ä½¿ç”¨æƒ…å†µè°ƒæ•´æ ‡ç­¾æ˜ å°„
2. **è‡ªåŠ¨åŒ–ç¨‹åº¦æå‡**: å¢åŠ æ›´å¤šè‡ªåŠ¨åŒ–è§„åˆ™
3. **ç›‘æ§å’ŒæŠ¥å‘Š**: å»ºç«‹æŒç»­ç›‘æ§æœºåˆ¶

## ğŸ“ ç›¸å…³æ–‡ä»¶

- [Issuesæ¸…ç†è¯¦ç»†æŠ¥å‘Š](github_issues_cleanup_report.md)
- [æ ‡ç­¾ä¿®æ­£è¯¦ç»†æŠ¥å‘Š](github_label_fix_report.md)
- [æ¸…ç†å·¥å…·æºç ](../scripts/github_issue_cleaner.py)
- [æ ‡ç­¾ä¿®æ­£å·¥å…·æºç ](../scripts/github_label_fixer.py)

---

**æŠ¥å‘Šç”Ÿæˆ**: GitHub Actions
**ä¸‹æ¬¡æ‰§è¡Œ**: ä¸‹å‘¨ä¸€ä¸Šåˆ8:00 (UTC)
*æ­¤æŠ¥å‘Šç”±è‡ªåŠ¨åŒ–ç³»ç»Ÿç”Ÿæˆ*
"""

    # ä¿å­˜æ±‡æ€»æŠ¥å‘Š
    reports_dir = Path("reports")
    reports_dir.mkdir(exist_ok=True)

    report_path = reports_dir / "cleanup_summary_report.md"
    with open(report_path, 'w', encoding='utf-8') as f:
        f.write(summary)

    return str(report_path)


def main():
    """ä¸»å‡½æ•°"""
    parser = argparse.ArgumentParser(description="ç”Ÿæˆæ¸…ç†æ±‡æ€»æŠ¥å‘Š")
    parser.add_argument("--repo", default="xupeng211/FootballPrediction", help="ä»“åº“åç§°")

    args = parser.parse_args()

    generate_summary(args.repo)


if __name__ == "__main__":
    main()
