#!/usr/bin/env bash
# è¶³çƒé¢„æµ‹é¡¹ç›® - ä»…è¿è¡Œå•å…ƒæµ‹è¯•
# è¯¥è„šæœ¬åªè¿è¡Œæ ‡è®°ä¸º unit çš„æµ‹è¯•

set -e  # é‡åˆ°é”™è¯¯æ—¶ç«‹å³é€€å‡º

echo "ğŸ”¬ å¼€å§‹è¿è¡Œè¶³çƒé¢„æµ‹é¡¹ç›®å•å…ƒæµ‹è¯•..."
echo "========================================"

# ä»…è¿è¡Œå•å…ƒæµ‹è¯•
echo "ğŸ“Š è¿è¡Œå•å…ƒæµ‹è¯•ï¼ˆæ— å¤–éƒ¨ä¾èµ–ï¼‰..."
pytest tests/ \
    -m unit \
    --cov=src \
    --cov-report=term-missing:skip-covered \
    --cov-report=html:htmlcov_unit \
    -v

echo "========================================"
echo "âœ… å•å…ƒæµ‹è¯•å®Œæˆï¼"
echo "ğŸ“ˆ è¦†ç›–ç‡æŠ¥å‘Šå·²ç”Ÿæˆåœ¨ htmlcov_unit/ ç›®å½•ä¸­"
