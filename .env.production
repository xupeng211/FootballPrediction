# ==================================================
# 足球预测系统生产环境配置
# ==================================================

# 应用环境设置
ENVIRONMENT=production
DEBUG=false
SECRET_KEY=football_prediction_production_secret_key_32_chars_min
LOG_LEVEL=WARNING

# ==================================================
# 数据库配置
# ==================================================
# 主数据库配置
DB_HOST=localhost
DB_PORT=5432
DB_NAME=football_prediction_prod
DB_USER=football_user
DB_PASSWORD=football_prod_db_password_min_16_chars

# PostgreSQL根用户密码（用于初始化）
POSTGRES_ROOT_PASSWORD=postgres_prod_root_password_min_16_chars
POSTGRES_DB=football_prediction_prod
POSTGRES_USER=football_user
POSTGRES_PASSWORD=football_prod_password_min_16_chars

# 数据库只读用户
DB_READER_USER=football_reader
DB_READER_PASSWORD=football_reader_password_min_16_chars

# 数据库读写用户
DB_WRITER_USER=football_writer
DB_WRITER_PASSWORD=football_writer_password_min_16_chars

# 数据库管理员用户
DB_ADMIN_USER=football_admin
DB_ADMIN_PASSWORD=football_admin_password_min_16_chars

# 应用数据库用户
APP_DB_USER=football_user
APP_DB_PASSWORD=football_app_password_min_16_chars
APP_DB_NAME=football_prediction_prod

# ==================================================
# Redis 配置
# ==================================================
REDIS_PASSWORD=football_redis_password_min_16_chars
REDIS_URL=redis://:football_redis_password_min_16_chars@redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ==================================================
# MinIO 对象存储配置
# ==================================================
MINIO_ROOT_USER=football_minio_admin
MINIO_ROOT_PASSWORD=football_minio_password_min_16_chars
MINIO_ENDPOINT=http://localhost:9000
MINIO_REGION=us-east-1
MINIO_DOMAIN=minio
MINIO_DEFAULT_BUCKETS=football-models,football-data

# AWS配置（用于MinIO/S3集成）
AWS_ACCESS_KEY_ID=football_minio_admin
AWS_SECRET_ACCESS_KEY=football_minio_password_min_16_chars
AWS_DEFAULT_REGION=us-east-1
AWS_S3_ENDPOINT_URL=http://localhost:9000

# ==================================================
# MLflow 配置
# ==================================================
MLFLOW_TRACKING_URI=http://localhost:5002
MLFLOW_REGISTRY_URI=http://mlflow:5000
MLFLOW_EXPERIMENT_NAME=football_prediction
MLFLOW_S3_ENDPOINT_URL=http://localhost:9000
MLFLOW_DEFAULT_ARTIFACT_ROOT=s3://football-models/mlflow-artifacts
MLFLOW_BACKEND_STORE_URI=postgresql://mlflow_user:football_mlflow_password_min_16_chars@localhost:5434/mlflow
MLFLOW_HOST=0.0.0.0
MLFLOW_PORT=5000

# MLflow数据库配置
MLFLOW_DB_USER=mlflow_user
MLFLOW_DB_PASSWORD=football_mlflow_password_min_16_chars
MLFLOW_DB_NAME=mlflow

# ==================================================
# Marquez 数据血缘管理配置
# ==================================================
MARQUEZ_DB_HOST=localhost
MARQUEZ_DB_PORT=5433
MARQUEZ_DB_NAME=marquez
MARQUEZ_DB_USER=marquez_user
MARQUEZ_DB_PASSWORD=football_marquez_password_min_16_chars
MARQUEZ_CONFIG=/usr/src/app/marquez.yml

# ==================================================
# Kafka 流处理配置
# ==================================================
KAFKA_BROKER_ID=1
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT
KAFKA_INTER_BROKER_LISTENER_NAME=PLAINTEXT
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_AUTO_CREATE_TOPICS_ENABLE=true

# Zookeeper configuration
ZOOKEEPER_CLIENT_PORT=2181
ZOOKEEPER_TICK_TIME=2000

# ==================================================
# 监控系统配置
# ==================================================
GRAFANA_ADMIN_PASSWORD=football_grafana_password_min_16_chars
GF_SECURITY_ADMIN_PASSWORD=football_grafana_password_min_16_chars
PGADMIN_DEFAULT_PASSWORD=football_pgadmin_password_min_16_chars
PGADMIN_DEFAULT_EMAIL=admin@football-prediction.com
PGADMIN_LISTEN_PORT=80
GF_SERVER_DOMAIN=localhost
GF_USERS_ALLOW_SIGN_UP=false
GF_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource
GF_SMTP_ENABLED=false

# Alertmanager configuration
ALERTMANAGER_CONFIG_DIR=/etc/alertmanager
ALERTMANAGER_STORAGE_PATH=/alertmanager
ALERTMANAGER_WEB_EXTERNAL_URL=http://localhost:9093

# Node Exporter configuration
NODE_EXPORTER_PROCFS_PATH=/host/proc
NODE_EXPORTER_ROOTFS_PATH=/rootfs
NODE_EXPORTER_SYSFS_PATH=/host/sys

# ==================================================
# Celery 配置
# ==================================================
CELERY_BROKER_URL=redis://:football_redis_password_min_16_chars@redis:6379/0
CELERY_RESULT_BACKEND=redis://:football_redis_password_min_16_chars@redis:6379/0
CELERY_FLOWER_PORT=5555
CELERY_FLOWER_URL_PREFIX=flower

# ==================================================
# Web 服务配置
# ==================================================
API_HOST=0.0.0.0
API_PORT=8000
WORKERS=4
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=50

# ==================================================
# CORS 配置
# ==================================================
CORS_ORIGINS=https://football-prediction.com,https://www.football-prediction.com
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# ==================================================
# 缓存配置
# ==================================================
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# ==================================================
# 速率限制配置
# ==================================================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60

# ==================================================
# 安全配置
# ==================================================
SSL_CERT_FILE=/etc/ssl/certs/football-prediction.crt
SSL_KEY_FILE=/etc/ssl/private/football-prediction.key
FORCE_HTTPS=true

# JWT Configuration
JWT_SECRET_KEY=football_prediction_jwt_secret_key_32_chars_min
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440

# API密钥配置
API_FOOTBALL_KEY=your_production_api_football_key_here

# ==================================================
# 日志配置
# ==================================================
LOG_FORMAT=json
LOG_LEVEL=WARNING
LOG_FILE=/var/log/football_prediction/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# ==================================================
# 健康检查配置
# ==================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# ==================================================
# 性能监控配置
# ==================================================
ENABLE_METRICS=true
METRICS_PORT=8080

# ==================================================
# 备份配置
# ==================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨2点
BACKUP_RETENTION_DAYS=30
BACKUP_KEEP_DAYS=7
BACKUP_KEEP_WEEKS=4
BACKUP_KEEP_MONTHS=3

# ==================================================
# 数据质量监控配置
# ==================================================
DATA_QUALITY_ENABLED=true
DATA_QUALITY_CHECK_INTERVAL=3600

# ==================================================
# 告警配置
# ==================================================
ALERT_ENABLED=true
ALERT_WEBHOOK_URL=https://your-webhook-url.com/alerts
ALERT_EMAIL_RECIPIENTS=alerts@football-prediction.com

# ==================================================
# 生产环境特有配置
# ==================================================
PRODUCTION_MODE=true
MAINTENANCE_MODE=false
DEPLOYMENT_VERSION=1.0.0

# ==================================================
# Docker Compose 配置
# ==================================================
COMPOSE_PROJECT_NAME=football_prediction_prod
DOCKER_BUILDKIT=1
DATA_SOURCE_NAME=postgresql://postgres:football_prod_root_password_min_16_chars@db:5432/football_prediction_prod?sslmode=require

# ==================================================
# 其他配置
# ==================================================
# 特征仓库 - Feast支持
FEAST_FEATURE_STORE_URI=sqlite:///feast/feature_store.db

# 数据质量与治理
GREAT_EXPECTATIONS_DATA_CONTEXT_DIR=/app/great_expectations

# 流式数据处理
CONFLUENT_KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# 系统监控
PSUTIL_ENABLED=true

# 警告：此文件包含敏感信息，请勿提交到版本控制系统！
# 安全提示：
# 1. 所有密码必须至少16个字符
# 2. 使用不同的密码对于不同的服务
# 3. 定期更换密码
# 4. 使用密码管理器生成强密码
# 5. 启用两步验证（如适用）