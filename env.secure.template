# ==================================================
# 足球预测系统安全环境配置模板
# 此文件包含生产级强密码配置
# 部署时复制为 .env 文件
# ==================================================

# 应用环境设置
ENVIRONMENT=production  # development, staging, production

# ==================================================
# 数据库配置 - 使用强随机密码
# ==================================================

# 主数据库配置
DB_HOST=db
DB_PORT=5432
DB_NAME=football_prediction_dev
DB_USER=football_user
DB_PASSWORD=__PROD_DB_PASSWORD_FROM_SECRETS__

# PostgreSQL 超级用户密码
POSTGRES_DB=football_prediction_dev
POSTGRES_USER=football_user
POSTGRES_PASSWORD=__PROD_POSTGRES_PASSWORD_FROM_SECRETS__

# 多用户数据库配置（权限分离）
DB_READER_USER=football_reader
DB_READER_PASSWORD=__PROD_DB_READER_PASSWORD_FROM_SECRETS__

DB_WRITER_USER=football_writer
DB_WRITER_PASSWORD=__PROD_DB_WRITER_PASSWORD_FROM_SECRETS__

DB_ADMIN_USER=football_admin
DB_ADMIN_PASSWORD=__PROD_DB_ADMIN_PASSWORD_FROM_SECRETS__

# 数据库连接池配置
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_ECHO=false
DB_ECHO_POOL=false

# 测试环境数据库
TEST_DB_HOST=localhost
TEST_DB_PORT=5432
TEST_DB_NAME=football_prediction_test
TEST_DB_USER=football_user
TEST_DB_PASSWORD=__PROD_TEST_DB_PASSWORD_FROM_SECRETS__

# ==================================================
# Redis 配置 - 启用密码认证
# ==================================================
REDIS_PASSWORD=__PROD_REDIS_PASSWORD_FROM_SECRETS__
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0

# ==================================================
# MinIO 对象存储配置 - 安全凭据
# ==================================================
MINIO_ROOT_USER=football_minio_admin
MINIO_ROOT_PASSWORD=__PROD_MINIO_ROOT_PASSWORD_FROM_SECRETS__
MINIO_DOMAIN=minio
MINIO_REGION_NAME=us-east-1

# MinIO S3 兼容配置
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=football_minio_admin
MINIO_SECRET_KEY=__PROD_MINIO_SECRET_KEY_FROM_SECRETS__
MINIO_REGION=us-east-1
MINIO_USE_SSL=false

# MinIO 桶配置
MINIO_BUCKET_PREFIX=football-lake
MINIO_BRONZE_BUCKET=football-lake-bronze
MINIO_SILVER_BUCKET=football-lake-silver
MINIO_GOLD_BUCKET=football-lake-gold
MINIO_ARCHIVE_BUCKET=football-lake-archive

# ==================================================
# 监控系统密码配置
# ==================================================

# Grafana 管理员密码
GRAFANA_ADMIN_PASSWORD=__PROD_GRAFANA_PASSWORD_FROM_SECRETS__
GF_USERS_ALLOW_SIGN_UP=false
GF_SERVER_DOMAIN=localhost
GF_SMTP_ENABLED=false
GF_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource

# Marquez 数据血缘数据库
MARQUEZ_DB_HOST=marquez-db
MARQUEZ_DB_PORT=5432
MARQUEZ_DB_NAME=marquez
MARQUEZ_DB_USER=marquez_user
MARQUEZ_DB_PASSWORD=__PROD_MARQUEZ_DB_PASSWORD_FROM_SECRETS__

# MLflow 追踪数据库
MLFLOW_DB_NAME=mlflow
MLFLOW_DB_USER=mlflow_user
MLFLOW_DB_PASSWORD=__PROD_MLFLOW_DB_PASSWORD_FROM_SECRETS__

# MLflow 后端配置
MLFLOW_BACKEND_STORE_URI=postgresql://mlflow_user:${MLFLOW_DB_PASSWORD}@mlflow-db:5432/mlflow
MLFLOW_DEFAULT_ARTIFACT_ROOT=s3://football-models/mlflow-artifacts
MLFLOW_S3_ENDPOINT_URL=http://minio:9000

# AWS S3 配置（用于MinIO S3兼容）
AWS_ACCESS_KEY_ID=football_minio_admin
AWS_SECRET_ACCESS_KEY=${MINIO_SECRET_KEY}
AWS_DEFAULT_REGION=us-east-1

# PostgreSQL Exporter 配置
DATA_SOURCE_NAME=postgresql://football_user:${DB_PASSWORD}@db:5432/football_prediction_dev?sslmode=disable

# ==================================================
# 应用安全配置
# ==================================================

# FastAPI 配置
API_HOST=0.0.0.0
API_PORT=8000
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# JWT配置（用于用户认证）
JWT_SECRET_KEY=x&Oy1zb7I=-)@o8+E(#QITc4RRcI9(I*wS%s_cQz9QDHDqvdw(B_XZo5I55SHT7U
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440

# ==================================================
# API密钥配置（数据采集用）
# ==================================================

# API-Football 密钥（需要单独申请）
# 注册地址：https://www.api-football.com/
API_FOOTBALL_KEY=your_api_football_key_here

# ==================================================
# Celery 任务队列配置
# ==================================================
CELERY_BROKER_URL=redis://:jKzN)!7dD^Db6Hc(W3QWF=ymPmsD*7HU@redis:6379/0
CELERY_RESULT_BACKEND=redis://:jKzN)!7dD^Db6Hc(W3QWF=ymPmsD*7HU@redis:6379/0

# ==================================================
# 日志配置
# ==================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR

# ==================================================
# 数据湖存储配置
# ==================================================
DATA_LAKE_COMPRESSION=snappy
DATA_LAKE_MAX_FILE_SIZE_MB=100

# ==================================================
# 安全注意事项
# ==================================================
# 1. 此文件包含敏感信息，请勿提交到版本控制系统
# 2. 部署时确保文件权限设置为 600 (仅所有者可读写)
# 3. 定期轮换密码，建议每90天更换一次
# 4. 生产环境中使用密钥管理服务（如 HashiCorp Vault）
# 5. 启用审计日志记录所有敏感操作
