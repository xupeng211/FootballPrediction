[run]
source = src
# 排除难以测试的模块，专注于核心功能
omit =
    src/tasks/*
    src/streaming/*
    src/lineage/*
    src/data/collectors/*
    src/data/quality/*
    src/monitoring/*
    src/models/prediction_service.py
    src/models/model_training.py
    src/services/data_processing.py
    src/services/audit_service.py
    src/api/buggy_api.py
    src/api/cache.py
    src/api/data.py
    src/api/features.py
    src/api/models.py
    src/api/monitoring.py
    src/api/predictions.py
    src/cache/consistency_manager.py
    src/cache/redis_manager.py
    src/cache/ttl_cache.py
    src/config/fastapi_config.py
    src/config/hot_reload.py
    src/config/env_validator.py
    src/database/config.py
    src/database/migrations/*
    src/middleware/performance.py
    src/middleware/security.py
    src/utils/mlflow_security.py

[report]
# 显示更详细的报告
show_missing = True
precision = 2
# 设置60%的覆盖率门槛
fail_under = 60

[html]
directory = htmlcov_60_plus