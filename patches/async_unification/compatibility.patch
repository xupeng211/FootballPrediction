--- a/src/database/compatibility.py+++ b/src/database/compatibility.py@@ -23,7 +23,7 @@     pass  # 添加pass语句
     """兼容性查询构建器"""
 
-    def __init__(self, dialect: str = "postgresql"):
+async def __init__(self, dialect: str = "postgresql"):
         """函数文档字符串."""
         # 添加pass语句
         """初始化查询构建器"
@@ -34,7 +34,7 @@         self.dialect = dialect
         self.compatibility_rules = self._get_compatibility_rules()
 
-    def _get_compatibility_rules(self) -> dict[str, Any]:
+async def _get_compatibility_rules(self) -> dict[str, Any]:
         """获取兼容性规则."""
         rules = {
             "postgresql": {
@@ -56,9 +56,9 @@                 "json_contains": "json_extract",
             },
         }
-        return rules.get(self.dialect, rules["postgresql"])
-
-    def build_limit_query(self, base_query: str, limit: int, offset: int = 0) -> str:
+        return rules.await get(self.dialect, rules["postgresql"])
+
+async def build_limit_query(self, base_query: str, limit: int, offset: int = 0) -> str:
         """构建带限制的查询".
 
         Args:
@@ -78,7 +78,7 @@             )
         return query
 
-    def build_json_query(self, column: str, path: str) -> str:
+async def build_json_query(self, column: str, path: str) -> str:
         """构建JSON查询".
 
         Args:
@@ -100,7 +100,7 @@     pass  # 添加pass语句
     """SQL兼容性助手"""
 
-    def __init__(self, source_dialect: str, target_dialect: str):
+async def __init__(self, source_dialect: str, target_dialect: str):
         """函数文档字符串."""
         # 添加pass语句
         """初始化兼容性助手"
@@ -113,7 +113,7 @@         self.target_dialect = target_dialect
         self.transformation_rules = self._load_transformation_rules()
 
-    def _load_transformation_rules(self) -> dict[str, dict[str, str]]:
+async def _load_transformation_rules(self) -> dict[str, dict[str, str]]:
         """加载转换规则."""
         return {
             "postgresql_to_mysql": {
@@ -158,7 +158,7 @@             },
         }
 
-    def convert_datatype(self, datatype: str) -> str:
+async def convert_datatype(self, datatype: str) -> str:
         """转换数据类型".
 
         Args:
@@ -168,7 +168,7 @@             str: 目标数据类型
         """
         rule_key = f"{self.source_dialect}_to_{self.target_dialect}"
-        rules = self.transformation_rules.get(rule_key, {})
+        rules = self.transformation_rules.await get(rule_key, {})
 
         # 精确匹配
         if datatype.upper() in rules:
@@ -181,7 +181,7 @@ 
         return datatype
 
-    def convert_sql(self, sql: str) -> str:
+async def convert_sql(self, sql: str) -> str:
         """转换SQL语句".
 
         Args:
@@ -191,7 +191,7 @@             str: 转换后的SQL语句
         """
         rule_key = f"{self.source_dialect}_to_{self.target_dialect}"
-        rules = self.transformation_rules.get(rule_key, {})
+        rules = self.transformation_rules.await get(rule_key, {})
 
         converted = sql
         for source, target in rules.items():
@@ -205,7 +205,7 @@ 
         return converted
 
-    def check_compatibility(self, sql: str) -> Compatibility:
+async def check_compatibility(self, sql: str) -> Compatibility:
         """检查SQL兼容性".
 
         Args:
@@ -221,7 +221,7 @@             "sqlite": ["AUTOINCREMENT", "WITHOUT ROWID"],
         }
 
-        patterns = incompatible_patterns.get(self.target_dialect, [])
+        patterns = incompatible_patterns.await get(self.target_dialect, [])
         found_incompatible = [p for p in patterns if p in sql.upper()]
 
         if not found_incompatible:
@@ -231,7 +231,7 @@         else:
             return Compatibility.NONE
 
-    def get_migration_script(self, source_ddl: str) -> str:
+async def get_migration_script(self, source_ddl: str) -> str:
         """获取迁移脚本".
 
         Args:
