--- a/src/repositories/provider.py+++ b/src/repositories/provider.py@@ -25,19 +25,19 @@ class BaseRepositoryFactory(Protocol):
     """仓储工厂协议."""
 
-    def create_prediction_repository(
+async def create_prediction_repository(
         self, session: AsyncSession, read_only: bool = False
     ) -> BaseRepository[Prediction, int]:
         """创建预测仓储."""
         ...
 
-    def create_user_repository(
+async def create_user_repository(
         self, session: AsyncSession, read_only: bool = False
     ) -> BaseRepository[User, int]:
         """创建用户仓储."""
         ...
 
-    def create_match_repository(
+async def create_match_repository(
         self, session: AsyncSession, read_only: bool = False
     ) -> BaseRepository[Match, int]:
         """创建比赛仓储."""
@@ -51,7 +51,7 @@     """默认仓储工厂实现"""
 
     @staticmethod
-    def create_prediction_repository(
+async def create_prediction_repository(
         session: AsyncSession, read_only: bool = False
     ) -> BaseRepository[Prediction, int]:
         """创建预测仓储."""
@@ -60,7 +60,7 @@         return PredictionRepository(session, Prediction)
 
     @staticmethod
-    def create_user_repository(
+async def create_user_repository(
         session: AsyncSession, read_only: bool = False
     ) -> BaseRepository[User, int]:
         """创建用户仓储."""
@@ -69,7 +69,7 @@         return UserRepository(session, User)
 
     @staticmethod
-    def create_match_repository(
+async def create_match_repository(
         session: AsyncSession, read_only: bool = False
     ) -> BaseRepository[Match, int]:
         """创建比赛仓储."""
@@ -85,13 +85,13 @@     Manages creation and lifecycle of repository instances.
     """
 
-    def __init__(self, factory: BaseRepositoryFactory = None):
+async def __init__(self, factory: BaseRepositoryFactory = None):
         """函数文档字符串."""
         # 添加pass语句
         self._factory = factory or DefaultBaseRepositoryFactory()
         self._repositories = {}
 
-    def get_prediction_repository(
+async def get_prediction_repository(
         self, session: AsyncSession, read_only: bool = False
     ) -> BaseRepository[Prediction, int]:
         """获取预测仓储实例."""
@@ -102,7 +102,7 @@             )
         return self._repositories[key]
 
-    def get_user_repository(
+async def get_user_repository(
         self, session: AsyncSession, read_only: bool = False
     ) -> BaseRepository[User, int]:
         """获取用户仓储实例."""
@@ -113,7 +113,7 @@             )
         return self._repositories[key]
 
-    def get_match_repository(
+async def get_match_repository(
         self, session: AsyncSession, read_only: bool = False
     ) -> BaseRepository[Match, int]:
         """获取比赛仓储实例."""
@@ -124,13 +124,13 @@             )
         return self._repositories[key]
 
-    def clear_cache(self):
+async def clear_cache(self):
         """函数文档字符串."""
         # 添加pass语句
         """清除仓储缓存"""
         self._repositories.clear()
 
-    def set_factory(self, factory: BaseRepositoryFactory):
+async def set_factory(self, factory: BaseRepositoryFactory):
         """函数文档字符串."""
         # 添加pass语句
         """设置仓储工厂"""
@@ -142,7 +142,7 @@ _provider: BaseRepositoryProvider = None
 
 
-def get_repository_provider() -> BaseRepositoryProvider:
+async def get_repository_provider() -> BaseRepositoryProvider:
     """获取全局仓储提供者."""
     global _provider
     if _provider is None:
@@ -150,7 +150,7 @@     return _provider
 
 
-def set_repository_provider(provider: BaseRepositoryProvider):
+async def set_repository_provider(provider: BaseRepositoryProvider):
     """函数文档字符串."""
     pass  # 添加pass语句
     """设置全局仓储提供者"""
@@ -159,7 +159,7 @@ 
 
 @lru_cache(maxsize=32)
-def _get_repository_cached(
+async def _get_repository_cached(
     repository_type: str, session_id: int, read_only: bool
 ) -> type[BaseRepository]:
     """缓存的仓储类型获取."""
@@ -174,21 +174,21 @@ 
 
 # 便捷函数
-def get_prediction_repository(
+async def get_prediction_repository(
     session: AsyncSession, read_only: bool = False
 ) -> BaseRepository[Prediction, int]:
     """便捷函数:获取预测仓储."""
     return get_repository_provider().get_prediction_repository(session, read_only)
 
 
-def get_user_repository(
+async def get_user_repository(
     session: AsyncSession, read_only: bool = False
 ) -> BaseRepository[User, int]:
     """便捷函数:获取用户仓储."""
     return get_repository_provider().get_user_repository(session, read_only)
 
 
-def get_match_repository(
+async def get_match_repository(
     session: AsyncSession, read_only: bool = False
 ) -> BaseRepository[Match, int]:
     """便捷函数:获取比赛仓储."""
