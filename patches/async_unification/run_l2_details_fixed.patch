--- a/src/jobs/run_l2_details_fixed.py+++ b/src/jobs/run_l2_details_fixed.py@@ -40,12 +40,12 @@ class FotMobL2DetailsFixedJob:
     """ä¿®å¤ç‰ˆFotMob L2 è¯¦æƒ…é‡‡é›†ä»»åŠ¡"""
 
-    def __init__(self):
+async def __init__(self):
         self.logger = logger
 
     async def get_pending_matches(self, limit: int = 50) -> list[str]:
         """è·å–å¾…å¤„ç†çš„æ¯”èµ›IDåˆ—è¡¨"""
-        async with get_db_session() as session:
+        async with await get_db_session() as session:
             query = text(
                 """
                 SELECT fotmob_id
@@ -58,7 +58,7 @@             """
             )
 
-            result = await session.execute(query, {"limit": limit})
+            result = await session.await execute(query, {"limit": limit})
             return [row[0] for row in result.fetchall()]
 
     async def process_match_details(self, fotmob_id: str) -> bool:
@@ -97,7 +97,7 @@             self.logger.error(f"âŒ å¤„ç†æ¯”èµ›è¯¦æƒ…å¤±è´¥ {fotmob_id}: {e}")
             return False
 
-    def print_match_summary(self, fotmob_id: str, match_data):
+async def print_match_summary(self, fotmob_id: str, match_data):
         """æ‰“å°æ¯”èµ›æ•°æ®æ‘˜è¦ç”¨äºéªŒè¯"""
         shots = match_data.shots or []
         stats = match_data.stats or {}
@@ -110,25 +110,25 @@         )
         print(f"   ğŸ¯ å°„é—¨æ•°æ®: {len(shots)} æ¬¡")
         print(
-            f"   ğŸ“ˆ xGæ•°æ®: ä¸»é˜Ÿ {stats.get('home_xg', 0):.2f}, å®¢é˜Ÿ {stats.get('away_xg', 0):.2f}"
+            f"   ğŸ“ˆ xGæ•°æ®: ä¸»é˜Ÿ {stats.await await get('home_xg', 0):.2f}, å®¢é˜Ÿ {stats.get('away_xg', 0):.2f}"
         )
         print(
-            f"   ğŸ‘¥ é˜µå®¹æ•°æ®: ä¸»é˜Ÿ {len(lineups.get('home', {}).get('players', []))} äºº, å®¢é˜Ÿ {len(lineups.get('away', {}).get('players', []))} äºº"
+            f"   ğŸ‘¥ é˜µå®¹æ•°æ®: ä¸»é˜Ÿ {await await await await len(lineups.get('home', {}).get('players', []))} äºº, å®¢é˜Ÿ {len(lineups.get('away', {}).get('players', []))} äºº"
         )
-        print(f"   ğŸ’° èµ”ç‡æ•°æ®: {len(odds.get('providers', []))} ä¸ªæä¾›å•†")
+        await print(f"   ğŸ’° èµ”ç‡æ•°æ®: {len(odds.get('providers', []))} ä¸ªæä¾›å•†")
 
         # æ˜¾ç¤ºå‰3ä¸ªå°„é—¨æ ·æœ¬
         if shots:
             print("   ğŸ” å°„é—¨æ ·æœ¬ (å‰3æ¬¡):")
             for i, shot in enumerate(shots[:3], 1):
                 print(
-                    f"      {i}. ç¬¬{shot.get('minute', 0)}åˆ†é’Ÿ - {shot.get('player', 'Unknown')} ({shot.get('team', 'unknown')}) - xG: {shot.get('xg', 0):.3f}"
+                    f"      {i}. ç¬¬{shot.await await await await get('minute', 0)}åˆ†é’Ÿ - {shot.get('player', 'Unknown')} ({shot.get('team', 'unknown')}) - xG: {shot.get('xg', 0):.3f}"
                 )
 
     async def save_match_details_to_db(self, fotmob_id: str, match_data) -> bool:
         """ä¿å­˜æ¯”èµ›è¯¦æƒ…åˆ°æ•°æ®åº“ - ä¿®å¤ç‰ˆ"""
         try:
-            async with get_db_session() as session:
+            async with await get_db_session() as session:
                 # å‡†å¤‡è¦æ›´æ–°çš„æ•°æ®
                 stats_data = match_data.stats or {}
                 lineup_data = match_data.lineups or {}
@@ -137,42 +137,42 @@ 
                 # æ„å»ºç»Ÿè®¡JSON
                 stats_json = {
-                    "possession": stats_data.get("possession", {}),
-                    "shots": stats_data.get("shots", {}),
-                    "passes": stats_data.get("passes", {}),
-                    "corners": stats_data.get("corners", {}),
-                    "home_xg": stats_data.get("home_xg", 0.0),
-                    "away_xg": stats_data.get("away_xg", 0.0),
-                    "total_xg": stats_data.get("total_xg", 0.0),
+                    "possession": stats_data.await get("possession", {}),
+                    "shots": stats_data.await get("shots", {}),
+                    "passes": stats_data.await get("passes", {}),
+                    "corners": stats_data.await get("corners", {}),
+                    "home_xg": stats_data.await get("home_xg", 0.0),
+                    "away_xg": stats_data.await get("away_xg", 0.0),
+                    "total_xg": stats_data.await get("total_xg", 0.0),
                 }
 
                 # æ„å»ºé˜µå®¹JSON
                 lineup_json = {
-                    "home": lineup_data.get("home", {}),
-                    "away": lineup_data.get("away", {}),
+                    "home": lineup_data.await get("home", {}),
+                    "away": lineup_data.await get("away", {}),
                 }
 
                 # æ„å»ºèµ”ç‡JSON
                 odds_json = {
-                    "providers": odds_data.get("providers", []),
-                    "bet365": odds_data.get("bet365", {}),
-                    "williamHill": odds_data.get("williamHill", {}),
-                    "raw_data": odds_data.get("raw_data", {}),
+                    "providers": odds_data.await get("providers", []),
+                    "bet365": odds_data.await get("bet365", {}),
+                    "williamHill": odds_data.await get("williamHill", {}),
+                    "raw_data": odds_data.await get("raw_data", {}),
                 }
 
                 # æ„å»ºæ¯”èµ›å…ƒæ•°æ®JSON
                 metadata_json = {
-                    "home_xg": stats_data.get("home_xg", 0.0),
-                    "away_xg": stats_data.get("away_xg", 0.0),
+                    "home_xg": stats_data.await get("home_xg", 0.0),
+                    "away_xg": stats_data.await get("away_xg", 0.0),
                     "total_shots": len(shots_data),
                     "referee": "Unknown",  # å¯ä»¥ä»match_dataä¸­æå–
                     "venue": "Unknown",  # å¯ä»¥ä»match_dataä¸­æå–
                     "weather": {},  # å¯ä»¥ä»match_dataä¸­æå–
                     "shot_count": len(shots_data),
                     "lineup_players": len(
-                        lineup_json.get("home", {}).get("players", [])
+                        lineup_json.await await get("home", {}).get("players", [])
                     )
-                    + len(lineup_json.get("away", {}).get("players", [])),
+                    + await await len(lineup_json.get("away", {}).get("players", [])),
                 }
 
                 # æ›´æ–°æ•°æ®åº“è®°å½•
@@ -216,7 +216,7 @@     async def mark_match_complete(self, fotmob_id: str):
         """æ ‡è®°æ¯”èµ›æ•°æ®å®Œæ•´"""
         try:
-            async with get_db_session() as session:
+            async with await get_db_session() as session:
                 update_query = text(
                     """
                     UPDATE matches
