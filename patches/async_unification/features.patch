--- a/src/api/features.py+++ b/src/api/features.py@@ -25,7 +25,7 @@ feature_store: FootballFeatureStore | None = None
 
 
-def get_feature_store() -> FootballFeatureStore | None:
+async def get_feature_store() -> FootballFeatureStore | None:
     """获取（或初始化）特征存储实例."""
     global feature_store
     if feature_store is not None:
@@ -45,7 +45,7 @@     return feature_store
 
 
-def validate_match_id(match_id: int) -> None:
+async def validate_match_id(match_id: int) -> None:
     """验证比赛ID参数."""
     if match_id <= 0:
         logger.warning(f"无效的比赛ID: {match_id}")
@@ -55,7 +55,7 @@         )
 
 
-def check_feature_store_availability() -> None:
+async def check_feature_store_availability() -> None:
     """检查特征存储服务可用性."""
     if get_feature_store() is None:
         logger.error("特征存储服务不可用")
@@ -71,7 +71,7 @@ 
     try:
         match_query = select(Match).where(Match.id == match_id)
-        match_result = await session.execute(match_query)
+        match_result = await session.await execute(match_query)
         match = match_result.scalar_one_or_none()
 
         if not match:
@@ -138,7 +138,7 @@         return {}, str(feature_error)  # 优雅降级:返回空特征而不是完全失败
 
 
-def build_response_data(
+async def build_response_data(
     match: Match,
     features: dict[str, Any],
     features_error: str,
@@ -172,7 +172,7 @@     return response_data
 
 
-@router.get("/{match_id}")
+@router.await get("/{match_id}")
 async def get_match_features_improved(
     match_id: int, session: Session = Depends(get_db_session), include_raw: bool = False
 ) -> dict[str, Any]:
@@ -206,7 +206,7 @@     return response_data
 
 
-@router.get("/health", summary="特征服务健康检查")
+@router.await get("/health", summary="特征服务健康检查")
 async def health_check() -> dict[str, Any]:
     """特征服务健康检查."""
     return {
