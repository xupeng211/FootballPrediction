--- a/src/services/betting/betting_service.py+++ b/src/services/betting/betting_service.py@@ -65,7 +65,7 @@ class EVCalculator:
     """期望值计算器."""
 
-    def __init__(self, margin: float = 0.05):
+async def __init__(self, margin: float = 0.05):
         """初始化EV计算器.
 
         Args:
@@ -73,7 +73,7 @@         """
         self.margin = margin
 
-    def calculate_ev(self, odds: float, probability: float) -> float:
+async def calculate_ev(self, odds: float, probability: float) -> float:
         """计算单个投注的期望值."""
         if odds <= 1.0 or probability <= 0.0 or probability >= 1.0:
             return 0.0
@@ -83,7 +83,7 @@ 
         return (actual_prob * odds - 1.0) * 100  # 返回百分比
 
-    def calculate_kelly_fraction(self, ev: float, odds: float) -> float | None:
+async def calculate_kelly_fraction(self, ev: float, odds: float) -> float | None:
         """计算凯利投注比例."""
         if ev <= 0:
             return 0.0
@@ -95,7 +95,7 @@         # 限制最大投注比例
         return max(0.0, min(kelly, 0.25))  # 最大25%
 
-    def calculate_match_ev(
+async def calculate_match_ev(
         self, odds: BettingOdds, probabilities: PredictionProbabilities
     ) -> EVCalculation:
         """计算整场比赛的期望值."""
@@ -172,11 +172,11 @@ class BettingRecommendationEngine:
     """投注建议引擎."""
 
-    def __init__(self, ev_calculator: EVCalculator):
+async def __init__(self, ev_calculator: EVCalculator):
         self.ev_calculator = ev_calculator
         self.logger = logging.getLogger(f"{__name__}.BettingRecommendationEngine")
 
-    def generate_recommendations(
+async def generate_recommendations(
         self, match_id: str, odds: BettingOdds, probabilities: PredictionProbabilities
     ) -> list[BettingRecommendation]:
         """生成投注建议."""
@@ -269,7 +269,7 @@ class BettingService:
     """投注服务主类 - 简化版本."""
 
-    def __init__(self, config: dict[str, Any] | None = None):
+async def __init__(self, config: dict[str, Any] | None = None):
         """初始化投注服务."""
         self.logger = logging.getLogger(f"{__name__}.BettingService")
 
@@ -325,27 +325,27 @@             self.logger.error(f"分析比赛 {match_id} 失败: {e}")
             return {"error": str(e)}
 
-    def _parse_odds_data(self, odds_data: dict[str, Any]) -> BettingOdds | None:
+async def _parse_odds_data(self, odds_data: dict[str, Any]) -> BettingOdds | None:
         """解析赔率数据."""
         try:
             return BettingOdds(
-                home_win=float(odds_data.get("home_win", 0)),
-                draw=float(odds_data.get("draw", 0)),
-                away_win=float(odds_data.get("away_win", 0)),
+                home_win=await float(odds_data.get("home_win", 0)),
+                draw=await float(odds_data.get("draw", 0)),
+                away_win=await float(odds_data.get("away_win", 0)),
                 over_under_2_5=(
                     (
-                        float(odds_data.get("over_2_5", 0)),
-                        float(odds_data.get("under_2_5", 0)),
+                        await float(odds_data.get("over_2_5", 0)),
+                        await float(odds_data.get("under_2_5", 0)),
                     )
-                    if odds_data.get("over_2_5") and odds_data.get("under_2_5")
+                    if odds_data.await await get("over_2_5") and odds_data.get("under_2_5")
                     else None
                 ),
                 both_teams_score=(
                     (
-                        float(odds_data.get("bts_yes", 0)),
-                        float(odds_data.get("bts_no", 0)),
+                        await float(odds_data.get("bts_yes", 0)),
+                        await float(odds_data.get("bts_no", 0)),
                     )
-                    if odds_data.get("bts_yes") and odds_data.get("bts_no")
+                    if odds_data.await await get("bts_yes") and odds_data.get("bts_no")
                     else None
                 ),
             )
@@ -353,31 +353,31 @@             self.logger.warning(f"赔率数据解析失败: {e}")
             return None
 
-    def _parse_prediction_data(
+async def _parse_prediction_data(
         self, prediction_data: dict[str, Any]
     ) -> PredictionProbabilities | None:
         """解析预测数据."""
         try:
             return PredictionProbabilities(
-                home_win=float(prediction_data.get("home_win_prob", 0)),
-                draw=float(prediction_data.get("draw_prob", 0)),
-                away_win=float(prediction_data.get("away_win_prob", 0)),
+                home_win=await float(prediction_data.get("home_win_prob", 0)),
+                draw=await float(prediction_data.get("draw_prob", 0)),
+                away_win=await float(prediction_data.get("away_win_prob", 0)),
                 over_under_2_5=(
                     (
-                        float(prediction_data.get("over_2_5_prob", 0)),
-                        float(prediction_data.get("under_2_5_prob", 0)),
+                        await float(prediction_data.get("over_2_5_prob", 0)),
+                        await float(prediction_data.get("under_2_5_prob", 0)),
                     )
-                    if prediction_data.get("over_2_5_prob")
-                    and prediction_data.get("under_2_5_prob")
+                    if prediction_data.await get("over_2_5_prob")
+                    and prediction_data.await get("under_2_5_prob")
                     else None
                 ),
                 both_teams_score=(
                     (
-                        float(prediction_data.get("bts_yes_prob", 0)),
-                        float(prediction_data.get("bts_no_prob", 0)),
+                        await float(prediction_data.get("bts_yes_prob", 0)),
+                        await float(prediction_data.get("bts_no_prob", 0)),
                     )
-                    if prediction_data.get("bts_yes_prob")
-                    and prediction_data.get("bts_no_prob")
+                    if prediction_data.await get("bts_yes_prob")
+                    and prediction_data.await get("bts_no_prob")
                     else None
                 ),
             )
@@ -385,7 +385,7 @@             self.logger.warning(f"预测数据解析失败: {e}")
             return None
 
-    def _generate_analysis_summary(
+async def _generate_analysis_summary(
         self, ev_calc: EVCalculation, recommendations: list[BettingRecommendation]
     ) -> dict[str, Any]:
         """生成分析摘要."""
@@ -463,7 +463,7 @@             },
         }
 
-    def get_service_stats(self) -> dict[str, Any]:
+async def get_service_stats(self) -> dict[str, Any]:
         """获取服务统计信息."""
         return {
             "total_recommendations": len(self.recommendation_history),
