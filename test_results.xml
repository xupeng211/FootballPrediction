<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="6" skipped="0" tests="46" time="10.991" timestamp="2025-11-03T23:23:28.069183+08:00" hostname="DESKTOP-2TFJUEA"><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceState" name="test_service_state_values" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceState" name="test_service_state_comparison" time="0.000" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceInfo" name="test_service_info_creation" time="0.000" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceInfo" name="test_service_info_defaults" time="0.000" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_manager_initialization" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_register_service_success" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_register_service_duplicate_warning" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_register_service_with_dependencies" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_unregister_service_success" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_unregister_service_not_found" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_unregister_running_service" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_start_service_success" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_start_service_with_dependencies" time="0.003" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_start_service_not_found" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_start_service_already_running" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_start_service_invalid_state" time="0.001"><failure message="AssertionError: assert 'ERROR' in '服务状态不允许启动: test_service - error'&#10; +  where '服务状态不允许启动: test_service - error' = str(ServiceLifecycleError('服务状态不允许启动: test_service - error'))&#10; +    where ServiceLifecycleError('服务状态不允许启动: test_service - error') = &lt;ExceptionInfo ServiceLifecycleError('服务状态不允许启动: test_service - error') tblen=2&gt;.value">tests/unit/test_service_lifecycle_comprehensive.py:276: in test_start_service_invalid_state
    assert "ERROR" in str(exc_info.value)
E   AssertionError: assert 'ERROR' in '服务状态不允许启动: test_service - error'
E    +  where '服务状态不允许启动: test_service - error' = str(ServiceLifecycleError('服务状态不允许启动: test_service - error'))
E    +    where ServiceLifecycleError('服务状态不允许启动: test_service - error') = &lt;ExceptionInfo ServiceLifecycleError('服务状态不允许启动: test_service - error') tblen=2&gt;.value</failure></testcase><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_start_service_with_exception" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_stop_service_success" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_stop_service_not_running" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_stop_service_not_found" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_stop_service_with_dependents" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_get_service_status" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManager" name="test_get_all_services" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_health_check_all_healthy" time="0.003" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_health_check_async_healthy" time="0.003" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_health_check_unhealthy_service" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_health_check_no_health_check_function" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_health_check_error_service" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_health_check_exception_in_check" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_health_check_updates_timestamp" time="0.003"><failure message="TypeError: '&gt;' not supported between instances of 'datetime.datetime' and 'NoneType'">tests/unit/test_service_lifecycle_comprehensive.py:511: in test_health_check_updates_timestamp
    assert updated_service_info.last_health_check &gt; original_timestamp
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: '&gt;' not supported between instances of 'datetime.datetime' and 'NoneType'</failure></testcase><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_async_service_start" time="0.003" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_async_service_stop" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_start_service_async_timeout" time="0.002"><failure message="TypeError: 'coroutine' object is not an iterator">tests/unit/test_service_lifecycle_comprehensive.py:552: in test_start_service_async_timeout
    await self.manager._start_service_async("test_service")
src/core/service_lifecycle.py:215: in _start_service_async
    await asyncio.wait_for(
../../.pyenv/versions/3.11.9/lib/python3.11/asyncio/tasks.py:489: in wait_for
    return fut.result()
           ^^^^^^^^^^^^
../../.pyenv/versions/3.11.9/lib/python3.11/unittest/mock.py:2243: in _execute_mock_call
    result = next(effect)
             ^^^^^^^^^^^^
E   TypeError: 'coroutine' object is not an iterator</failure></testcase><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerAsync" name="test_stop_service_async_timeout" time="0.003"><failure message="TypeError: 'coroutine' object is not an iterator">tests/unit/test_service_lifecycle_comprehensive.py:565: in test_stop_service_async_timeout
    await self.manager._stop_service_async("test_service")
src/core/service_lifecycle.py:225: in _stop_service_async
    await asyncio.wait_for(
../../.pyenv/versions/3.11.9/lib/python3.11/asyncio/tasks.py:489: in wait_for
    return fut.result()
           ^^^^^^^^^^^^
../../.pyenv/versions/3.11.9/lib/python3.11/unittest/mock.py:2243: in _execute_mock_call
    result = next(effect)
             ^^^^^^^^^^^^
E   TypeError: 'coroutine' object is not an iterator</failure></testcase><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerMonitoring" name="test_start_monitoring_success" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerMonitoring" name="test_start_monitoring_already_running" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerMonitoring" name="test_stop_monitoring_success" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerMonitoring" name="test_stop_monitoring_not_running" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerMonitoring" name="test_monitoring_loop_basic" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerMonitoring" name="test_monitoring_loop_with_unhealthy_services" time="0.003"><failure message="AssertionError: expected call not found.&#10;Expected: warning(&quot;不健康的服务: ['test_service']&quot;)&#10;  Actual: not called.">tests/unit/test_service_lifecycle_comprehensive.py:667: in test_monitoring_loop_with_unhealthy_services
    mock_logger.warning.assert_called_with("不健康的服务: ['test_service']")
../../.pyenv/versions/3.11.9/lib/python3.11/unittest/mock.py:930: in assert_called_with
    raise AssertionError(error_message)
E   AssertionError: expected call not found.
E   Expected: warning("不健康的服务: ['test_service']")
E     Actual: not called.</failure></testcase><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerMonitoring" name="test_monitoring_loop_with_exception" time="0.003"><failure message="AssertionError: expected call not found.&#10;Expected: error('监控循环错误: 监控错误')&#10;  Actual: not called.">tests/unit/test_service_lifecycle_comprehensive.py:687: in test_monitoring_loop_with_exception
    mock_logger.error.assert_called_with("监控循环错误: 监控错误")
../../.pyenv/versions/3.11.9/lib/python3.11/unittest/mock.py:930: in assert_called_with
    raise AssertionError(error_message)
E   AssertionError: expected call not found.
E   Expected: error('监控循环错误: 监控错误')
E     Actual: not called.</failure></testcase><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleManagerShutdown" name="test_shutdown_all_success" time="0.002" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestGlobalLifecycleManager" name="test_get_lifecycle_manager_singleton" time="0.000" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestGlobalLifecycleManager" name="test_global_manager_persistence" time="0.001" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleError" name="test_service_lifecycle_error_creation" time="0.000" /><testcase classname="tests.unit.test_service_lifecycle_comprehensive.TestServiceLifecycleError" name="test_service_lifecycle_error_inheritance" time="0.000" /></testsuite></testsuites>