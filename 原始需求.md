
> 📘 标题：《足球赛果预测系统 — 系统需求说明书（SRS）》
> 📂 审查来源：本地项目目录（例如 `/mnt/data/football_project/`）

下面我将为你生成两份核心内容：

---

## **📘 一、《足球赛果预测系统 — 系统需求说明书（SRS）》**

### **1. 项目概述**

**项目名称**：足球赛果预测系统
**目标**：构建一个高效、可扩展的足球比赛赛果预测平台，覆盖全球主要赛事（英超、欧冠、世界杯等），为中国大陆用户提供稳定、低延迟的预测与展示服务。
**开发模式**：模块化 + 容器化 + AI增强开发
**版本**：v1.0（SRS）
**主要参与工具**：Cursor、VS Code、Notion、GitHub、CI/CD、Docker、FastAPI

---

### **2. 系统总体设计**

系统整体分为六大功能模块，围绕数据流转和模型预测展开：

1. **数据采集模块**
2. **数据存储与清洗模块**
3. **特征工程与模型训练模块**
4. **预测服务模块**
5. **前端展示模块**
6. **容器化与部署模块**

系统采用 **FastAPI + XGBoost + PostgreSQL + Docker** 技术栈，支持云端与本地双部署。

---

### **3. 功能性需求**

#### **3.1 数据采集模块**

* **目标**：从公开或授权数据源自动获取赛事信息、赛果、赔率、阵容等。
* **功能需求**：

  1. 从多个数据源（API-Football、OddsPortal 等）周期性采集数据。
  2. 提取比赛基础信息：赛事ID、时间、主客队、比分、赔率。
  3. 支持断点续采与异常重试。
  4. 爬虫日志记录与错误处理。
* **验收标准**：

  * 数据源采集成功率 ≥ 98%。
  * 每天自动更新不少于 500 场比赛数据。

---

#### **3.2 数据存储与清洗模块**

* **目标**：统一存储结构，清洗异常数据，为模型训练准备高质量样本。
* **功能需求**：

  1. 数据库使用 PostgreSQL / MySQL。
  2. 表结构包括：`matches`, `odds`, `teams`, `players`, `results`。
  3. 处理缺失值与异常值。
  4. 保证数据唯一性（如主键冲突检测）。
* **验收标准**：

  * 数据完整性 ≥ 99%。
  * 清洗脚本能在 10 秒内处理 10 万条记录。

---

#### **3.3 特征工程与模型训练模块**

* **目标**：基于历史数据提取多维特征并训练机器学习模型。
* **功能需求**：

  1. 构建基础特征（进球数、主客场状态、赔率变化、伤病因素）。
  2. 模型训练使用 XGBoost / LightGBM。
  3. 输出模型评估指标（AUC、F1、准确率）。
  4. 自动保存最佳模型与参数日志。
* **验收标准**：

  * 模型准确率 ≥ 65%。
  * 模型训练日志可复现。

---

#### **3.4 预测服务模块**

* **目标**：将模型部署为 API 接口，提供实时预测功能。
* **功能需求**：

  1. 提供 `/predict` API，输入赛事信息返回胜/平/负概率。
  2. 支持批量预测。
  3. 输出包含推荐投注和期望收益（EV）。
* **验收标准**：

  * API 响应时间 ≤ 200ms。
  * 返回结果包含置信度区间。

---

#### **3.5 前端展示模块**

* **目标**：以直观界面展示预测结果和赔率分析。
* **功能需求**：

  1. 使用 Vue.js / React + ECharts 展示比赛预测。
  2. 展示内容：胜平负概率、推荐投注、历史趋势。
  3. 支持筛选与搜索。
* **验收标准**：

  * 页面加载时间 ≤ 2 秒。
  * 图表交互响应时间 ≤ 300ms。

---

#### **3.6 容器化与部署模块**

* **目标**：实现系统的容器化与持续集成部署。
* **功能需求**：

  1. 使用 Docker 封装各服务（API、DB、Scheduler）。
  2. CI/CD 自动构建与测试。
  3. 支持本地部署与云端部署（优先香港服务器）。
* **验收标准**：

  * 一键部署成功率 ≥ 95%。
  * CI 流程包含测试、构建、镜像推送步骤。

---

### **4. 非功能性需求**

| 需求类型 | 内容                                       |
| ---- | ---------------------------------------- |
| 性能   | 系统支持同时预测 1000 场比赛并发请求；API 平均响应时间 < 200ms |
| 安全   | 接口需具备 Token 校验与请求频率限制                    |
| 可用性  | 系统应具备容错机制，采集与预测失败自动重试                    |
| 可维护性 | 所有模块均须配套单元测试与文档                          |
| 部署   | 支持 Docker Compose 本地运行与云端部署方案            |

---

### **5. 系统架构与数据流**

数据流路径：
`数据源 → 数据采集模块 → 数据清洗模块 → 特征工程 → 模型训练 → 预测服务 → 前端展示`

架构组成：

* **后端服务**：FastAPI + PostgreSQL + Redis
* **AI 模型层**：XGBoost / LightGBM
* **前端展示层**：React/Vue + ECharts
* **部署层**：Docker + CI/CD + GitHub Actions

---

### **6. 接口与数据结构（示例）**

**预测接口示例**：

```
POST /predict
{
  "home_team": "Manchester United",
  "away_team": "Chelsea",
  "match_date": "2025-10-30"
}
```

**返回：**

```
{
  "home_win": 0.58,
  "draw": 0.23,
  "away_win": 0.19,
  "suggestion": "投注主胜",
  "expected_value": 0.12
}
```

---

### **7. 测试与验收标准**

| 模块   | 验收方式     | 成功标准           |
| ---- | -------- | -------------- |
| 数据采集 | 自动化测试    | 爬虫错误率 ≤ 2%     |
| 清洗模块 | 单元测试     | 数据完整性 ≥ 99%    |
| 模型模块 | 模型验证     | AUC ≥ 0.70     |
| API  | 集成测试     | 响应 ≤ 200ms     |
| 前端   | 手动验收     | 展示无错误          |
| 部署   | CI/CD 测试 | 构建与推送成功率 ≥ 95% |

---

### **8. 文档与CI规范**

* 代码变更需附带测试用例；
* 所有模块需生成 Markdown 文档（位于 `docs/`）；
* CI 流程包含：

  * 安装依赖 → 运行测试 → 生成覆盖率报告；
  * 构建 Docker 镜像；
  * 推送到指定仓库。

---

## **🤖 二、《Claude Code 审查提示词模板》**

````
🧠 Claude Code 审查任务：

请读取本地目录 `/mnt/data/football_project/` 的源代码与测试文件，
并对照《足球赛果预测系统 — 系统需求说明书（SRS）》执行以下步骤：

1. **模块匹配**
   - 检查 SRS 中六大模块是否在代码中均有对应实现。
   - 输出 “模块 → 代码目录路径 → 状态（✅/⚠️/❌）”。

2. **功能一致性验证**
   - 逐条对比功能需求是否实现（例如 `/predict` 接口、数据清洗逻辑、模型训练脚本）。
   - 对缺失项输出 “功能缺失/未检测到实现”。

3. **非功能需求验证**
   - 检查代码中是否体现性能、安全、容错机制（如限流、Token验证、重试逻辑）。

4. **CI/CD与测试验证**
   - 确认是否存在 GitHub Actions / pytest / Dockerfile 等文件；
   - 检查测试覆盖率与日志记录。

5. **生成报告**
   - 输出文件：`docs/_reports/REQUIREMENT_COMPLIANCE_REPORT.md`
   - 格式如下：
     ```
     # 系统需求符合性报告
     | 模块 | 状态 | 说明 |
     |-------|------|------|
     | 数据采集模块 | ✅ | 已实现爬虫与调度任务 |
     | 模型训练模块 | ⚠️ | 存在初步实现，未见调优逻辑 |
     | 前端展示模块 | ❌ | 未检测到 React/Vue 目录 |
     ```

6. **改进建议**
   - 对缺失或未达标模块生成修复建议；
   - 将建议同步至 `BUGFIX_TODO.md` 或任务看板（若存在）。

请在分析完成后生成完整报告，并标记各模块的完成状态。
````

---

是否希望我现在将上面的 SRS + 审查提示词保存为两个 Markdown 文件（方便直接导入 Claude Code）：

* `docs/specs/SYSTEM_REQUIREMENT_SPEC.md`
* `docs/_reports/CLAUDE_TASK_REQUIREMENT_AUDIT.md`
