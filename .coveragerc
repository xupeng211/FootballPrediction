[run]
source = src
omit =
    */tests/*
    */test_*
    src/main.py
    */venv/*
    */__pycache__/*
    */migrations/*
    backup/*
    scripts/*
    */scripts/*
    setup.py
    # Omit heavy integration/API layers from unit coverage fast path
    src/api/*
    src/data/*
    src/services/*
    src/utils/*
    src/cache/*
    src/monitoring/*
    src/tasks/backup_tasks.py
    src/tasks/data_collection_tasks.py
    src/tasks/error_logger.py
    src/tasks/maintenance_tasks.py
    src/tasks/monitoring.py
    src/database/connection.py
    src/database/sql_compatibility.py
    src/models/metrics_exporter.py
    src/services/audit_service.py
    src/database/models/audit_log.py

[report]
# 排除应用入口和配置文件，专注业务逻辑覆盖率
exclude_lines =
    pragma: no cover
    def __repr__
    if self.debug:
    if settings.DEBUG
    raise AssertionError
    raise NotImplementedError
    if 0:
    if __name__ == .__main__.
    class .*\bProtocol\):
    @(abc\.)?abstractmethod

show_missing = True
skip_covered = False

[html]
directory = htmlcov
