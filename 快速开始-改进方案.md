# ğŸš€ å¿«é€Ÿå¼€å§‹ - æŠ€æœ¯å€ºåŠ¡æ”¹è¿›æ–¹æ¡ˆ

> ğŸ“– **å®Œæ•´æ–¹æ¡ˆ**: è§ `æŠ€æœ¯å€ºåŠ¡æ”¹è¿›æ‰§è¡Œæ–¹æ¡ˆ.md`
> ğŸ“Š **åˆ†ææŠ¥å‘Š**: è§ `æŠ€æœ¯å€ºåŠ¡ä¸å¤§å‚å¼€å‘åŸåˆ™æ·±åº¦åˆ†ææŠ¥å‘Š.md`

---

## âš¡ 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### 1ï¸âƒ£ æŸ¥çœ‹å½“å‰çŠ¶æ€

```bash
python scripts/improvement_tracker.py status
```

**è¾“å‡ºç¤ºä¾‹**:

```
ğŸ“Š æŠ€æœ¯å€ºåŠ¡æ”¹è¿›è¿›åº¦

å½“å‰æŒ‡æ ‡:
  âŒ legacy_dirs: 17 (ç›®æ ‡: 0)
  âŒ type_ignores: 1851 (ç›®æ ‡: <100)
  âŒ print_statements: 300 (ç›®æ ‡: 0)

ä¸‹ä¸€æ­¥å»ºè®®:
  å¼€å§‹ä»»åŠ¡ 1.1: ä¿®å¤CORSå®‰å…¨é…ç½®
  é¢„è®¡æ—¶é—´: 2å°æ—¶
```

---

### 2ï¸âƒ£ å¼€å§‹ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼ˆæ¨èï¼‰

```bash
# å¼€å§‹ä»»åŠ¡1.1: ä¿®å¤CORSå®‰å…¨é…ç½®ï¼ˆ2å°æ—¶ï¼Œé«˜ä¼˜å…ˆçº§ï¼‰
python scripts/improvement_tracker.py start 1.1
```

**æ‰§è¡Œæ­¥éª¤**:

1. **åˆ›å»ºé…ç½®æ–‡ä»¶**:

```bash
# åˆ›å»ºç›®å½•
mkdir -p src/config

# åˆ›å»ºCORSé…ç½®
cat > src/config/cors_config.py << 'EOF'
"""CORSé…ç½®ç®¡ç†"""
import os
from typing import List

def get_cors_origins() -> List[str]:
    """è·å–CORSå…è®¸çš„æº"""
    env = os.getenv("ENVIRONMENT", "development")

    if env == "production":
        return os.getenv("CORS_ORIGINS", "https://yourdomain.com").split(",")
    elif env == "staging":
        return ["https://staging.yourdomain.com", "http://localhost:3000"]
    else:
        return ["http://localhost:3000", "http://localhost:8080"]

def get_cors_config() -> dict:
    """è·å–å®Œæ•´çš„CORSé…ç½®"""
    return {
        "allow_origins": get_cors_origins(),
        "allow_credentials": True,
        "allow_methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
        "allow_headers": ["*"],
        "max_age": 600,
    }
EOF
```

2. **ä¿®æ”¹main.py**:

```bash
# å¤‡ä»½åŸæ–‡ä»¶
cp src/main.py src/main.py.backup

# ç¼–è¾‘src/main.py
# æ‰¾åˆ°ç¬¬174-193è¡Œçš„CORSé…ç½®
# åˆ é™¤æ‰€æœ‰CORSé…ç½®ï¼Œæ›¿æ¢ä¸ºï¼š

# from src.config.cors_config import get_cors_config
# app.add_middleware(I18nMiddleware)
# app.add_middleware(CORSMiddleware, **get_cors_config())
```

3. **éªŒè¯**:

```bash
# æµ‹è¯•å¯¼å…¥
python -c "from src.config.cors_config import get_cors_config; print(get_cors_config())"

# è¿è¡Œæµ‹è¯•
make test

# å¯åŠ¨æœåŠ¡
make up
```

4. **å®Œæˆä»»åŠ¡**:

```bash
python scripts/improvement_tracker.py done 1.1 "CORSé…ç½®å·²ä¿®å¤å¹¶ç»Ÿä¸€ç®¡ç†"
```

---

### 3ï¸âƒ£ ç¬¬äºŒä¸ªä»»åŠ¡ï¼ˆé«˜æ”¶ç›Šï¼‰

```bash
# å¼€å§‹ä»»åŠ¡1.2: æ¸…ç†é—ç•™ä»£ç ï¼ˆ4å°æ—¶ï¼Œé«˜ä¼˜å…ˆçº§ï¼‰
python scripts/improvement_tracker.py start 1.2
```

**ä¸€é”®æ‰§è¡Œ**:

```bash
# åˆ›å»ºæ¸…ç†è„šæœ¬
mkdir -p scripts/cleanup

cat > scripts/cleanup/remove_legacy_code.sh << 'SCRIPT'
#!/bin/bash
set -e

echo "ğŸ§¹ å¼€å§‹æ¸…ç†é—ç•™ä»£ç ..."

# 1. åˆ›å»ºå¤‡ä»½åˆ†æ”¯
git checkout -b backup/legacy-code-$(date +%Y%m%d)
git checkout main

# 2. åˆ é™¤é—ç•™ç›®å½•
directories=(
  "src/api/predictions_mod"
  "src/monitoring/alert_manager_mod"
  "src/monitoring/metrics_exporter_mod"
  "src/monitoring/system_monitor_mod"
  "src/monitoring/metrics_collector_enhanced_mod"
  "src/streaming/kafka_producer_legacy"
  "src/database/models/feature_mod"
  "src/database/connection_mod"
  "src/services/data_processing/pipeline_mod"
  "src/services/audit_service_mod"
  "src/services/data_processing_mod"
  "src/features/feature_calculator_mod"
  "src/data/storage/lake/utils_mod"
  "src/data/processing/football_data_cleaner_mod"
  "src/data/quality/exception_handler_mod"
  "src/monitoring/alerts/models/alert_mod"
  "src/monitoring/alerts/models/escalation_mod"
)

for dir in "${directories[@]}"; do
  if [ -d "$dir" ]; then
    echo "  âŒ åˆ é™¤: $dir"
    git rm -rf "$dir"
  fi
done

# 3. åˆ é™¤å¤‡ä»½æ–‡ä»¶
find src -name "*.bak" | while read file; do
  echo "  âŒ åˆ é™¤: $file"
  git rm "$file"
done

# 4. æäº¤
git add .
git commit -m "chore: æ¸…ç†é—ç•™ä»£ç ç›®å½•å’Œå¤‡ä»½æ–‡ä»¶"

echo "âœ… æ¸…ç†å®Œæˆï¼"
SCRIPT

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x scripts/cleanup/remove_legacy_code.sh

# æ‰§è¡Œæ¸…ç†
./scripts/cleanup/remove_legacy_code.sh

# éªŒè¯
make test
make lint
```

**å®Œæˆ**:

```bash
python scripts/improvement_tracker.py done 1.2 "æ¸…ç†17ä¸ªé—ç•™ç›®å½•å’Œ12ä¸ªå¤‡ä»½æ–‡ä»¶"
```

---

## ğŸ“… ç¬¬ä¸€å‘¨è®¡åˆ’ï¼ˆæ¨èé¡ºåºï¼‰

### Day 1-2: å®‰å…¨ä¸æ¸…ç†ï¼ˆå¿…åšâœ…ï¼‰

| ä»»åŠ¡ | æ—¶é—´ | å‘½ä»¤ | æ”¶ç›Š |
|------|------|------|------|
| 1.1 ä¿®å¤CORS | 2h | `start 1.1` | ğŸ”’ å®‰å…¨æ€§æå‡ |
| 1.2 æ¸…ç†é—ç•™ä»£ç  | 4h | `start 1.2` | ğŸ“‰ ä»£ç åº“-15% |

### Day 3-5: ä»£ç è´¨é‡ï¼ˆæ¨èï¼‰

| ä»»åŠ¡ | æ—¶é—´ | å‘½ä»¤ | æ”¶ç›Š |
|------|------|------|------|
| 1.3 åˆ é™¤print | 8h | `start 1.3` | ğŸ“Š æ—¥å¿—è§„èŒƒåŒ– |

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```bash
# æŸ¥çœ‹çŠ¶æ€
python scripts/improvement_tracker.py status

# å¼€å§‹ä»»åŠ¡
python scripts/improvement_tracker.py start <ä»»åŠ¡ID>

# å®Œæˆä»»åŠ¡
python scripts/improvement_tracker.py done <ä»»åŠ¡ID> "å¤‡æ³¨ä¿¡æ¯"

# ç”Ÿæˆå‘¨æŠ¥
python scripts/improvement_tracker.py report

# æŸ¥çœ‹å½“å‰æŒ‡æ ‡
./scripts/daily_checklist.sh  # éœ€è¦å…ˆåˆ›å»º
```

---

## ğŸ“Š æ¯æ—¥æ£€æŸ¥æ¸…å•

**æ¯å¤©èŠ±5åˆ†é’Ÿæ£€æŸ¥è¿›åº¦**:

```bash
#!/bin/bash
# åˆ›å»ºå¹¶è¿è¡Œæ¯æ—¥æ£€æŸ¥
cat > scripts/daily_checklist.sh << 'SCRIPT'
#!/bin/bash
echo "ğŸ“‹ æ¯æ—¥æŠ€æœ¯å€ºåŠ¡æ£€æŸ¥ - $(date +%Y-%m-%d)"
echo ""

echo "1ï¸âƒ£ é—ç•™ä»£ç ç›®å½•: $(find src -name '*_mod' -o -name '*_legacy' | wc -l) (ç›®æ ‡: 0)"
echo "2ï¸âƒ£ å¤‡ä»½æ–‡ä»¶: $(find src -name '*.bak' | wc -l) (ç›®æ ‡: 0)"
echo "3ï¸âƒ£ Type ignore: $(grep -r '# type: ignore' src --include="*.py" 2>/dev/null | wc -l) (ç›®æ ‡: <100)"
echo "4ï¸âƒ£ Printè¯­å¥: $(grep -r 'print(' src --include="*.py" 2>/dev/null | grep -v "pprint\|logger" | wc -l) (ç›®æ ‡: 0)"

echo ""
echo "âœ… æ£€æŸ¥å®Œæˆï¼"
SCRIPT

chmod +x scripts/daily_checklist.sh
./scripts/daily_checklist.sh
```

---

## ğŸ¯ ç¬¬ä¸€å‘¨ç›®æ ‡

å®Œæˆä»¥ä¸‹ä»»åŠ¡åï¼Œæ‚¨å°†è·å¾—ï¼š

- âœ… **CORSé…ç½®å®‰å…¨** - æ— å®‰å…¨éšæ‚£
- âœ… **ä»£ç åº“ç²¾ç®€15%** - åˆ é™¤æ‰€æœ‰é—ç•™ä»£ç 
- âœ… **æ—¥å¿—è§„èŒƒåŒ–** - æ— printè¯­å¥
- âœ… **æµ‹è¯•é€šè¿‡** - CIç»¿ç¯
- âœ… **å›¢é˜Ÿä¿¡å¿ƒæå‡** - çœ‹åˆ°æ˜æ˜¾æ”¹å–„

---

## ğŸ’¡ å®ç”¨æŠ€å·§

### æŠ€å·§1: å°æ­¥å¿«è·‘

```bash
# æ¯å®Œæˆä¸€ä¸ªå°æ”¹åŠ¨ç«‹å³æµ‹è¯•
make test && git commit -m "xxx"
```

### æŠ€å·§2: åˆ›å»ºå¤‡ä»½

```bash
# é‡å¤§ä¿®æ”¹å‰åˆ›å»ºå¤‡ä»½åˆ†æ”¯
git checkout -b backup/$(date +%Y%m%d)
git checkout main
```

### æŠ€å·§3: ä½¿ç”¨ä»£ç å®¡æŸ¥

```bash
# åˆ›å»ºPRè€Œéç›´æ¥æäº¤main
git checkout -b feature/fix-cors
# ä¿®æ”¹ä»£ç 
git push origin feature/fix-cors
# åœ¨GitHubåˆ›å»ºPR
```

### æŠ€å·§4: åˆ©ç”¨AIè¾…åŠ©

```bash
# åœ¨Cursorä¸­ä½¿ç”¨AIå¸®åŠ©é‡æ„
# é€‰ä¸­ä»£ç  â†’ Ctrl+K â†’ "é‡æ„è¿™æ®µä»£ç ï¼Œæå‡å¯ç»´æŠ¤æ€§"
```

---

## ğŸš¨ é‡åˆ°é—®é¢˜ï¼Ÿ

### é—®é¢˜1: æµ‹è¯•å¤±è´¥

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
make test -v

# åªè¿è¡Œå¤±è´¥çš„æµ‹è¯•
pytest tests/path/to/test_file.py::test_name -v

# æ£€æŸ¥å¯¼å…¥é”™è¯¯
python -c "from src.main import app"
```

### é—®é¢˜2: Gitå†²çª

```bash
# æŸ¥çœ‹å†²çªæ–‡ä»¶
git status

# å›æ»šåˆ°ä¸Šä¸€ä¸ªæäº¤
git reset --hard HEAD~1

# ä»å¤‡ä»½åˆ†æ”¯æ¢å¤
git checkout backup/legacy-code-20251012
```

### é—®é¢˜3: ä¸ç¡®å®šå¦‚ä½•ä¿®æ”¹

```bash
# æŸ¥çœ‹å®Œæ•´æ–¹æ¡ˆ
cat æŠ€æœ¯å€ºåŠ¡æ”¹è¿›æ‰§è¡Œæ–¹æ¡ˆ.md | less

# æŸ¥çœ‹å…·ä½“ä»»åŠ¡
grep -A 20 "ä»»åŠ¡1.1" æŠ€æœ¯å€ºåŠ¡æ”¹è¿›æ‰§è¡Œæ–¹æ¡ˆ.md
```

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| `æŠ€æœ¯å€ºåŠ¡æ”¹è¿›æ‰§è¡Œæ–¹æ¡ˆ.md` | å®Œæ•´æ‰§è¡Œæ–¹æ¡ˆï¼ˆ12å‘¨è®¡åˆ’ï¼‰ |
| `æŠ€æœ¯å€ºåŠ¡ä¸å¤§å‚å¼€å‘åŸåˆ™æ·±åº¦åˆ†ææŠ¥å‘Š.md` | é—®é¢˜åˆ†ææŠ¥å‘Š |
| `scripts/improvement_tracker.py` | è¿›åº¦è¿½è¸ªå·¥å…· |
| `AGENTS.md` | é¡¹ç›®å¼€å‘è§„èŒƒ |

---

## ğŸ‰ å¼€å§‹æ”¹è¿›ä¹‹æ—…

```bash
# ç¬¬ä¸€æ­¥ï¼šæŸ¥çœ‹å½“å‰çŠ¶æ€
python scripts/improvement_tracker.py status

# ç¬¬äºŒæ­¥ï¼šå¼€å§‹ç¬¬ä¸€ä¸ªä»»åŠ¡
python scripts/improvement_tracker.py start 1.1

# ç¬¬ä¸‰æ­¥ï¼šæŒ‰ç…§æ–¹æ¡ˆæ‰§è¡Œ

# ç¬¬å››æ­¥ï¼šå®Œæˆä»»åŠ¡
python scripts/improvement_tracker.py done 1.1

# é‡å¤ä»¥ä¸Šæ­¥éª¤...
```

**ç¥æ”¹è¿›é¡ºåˆ©ï¼æœ‰é—®é¢˜éšæ—¶æŸ¥é˜…å®Œæ•´æ–¹æ¡ˆæ–‡æ¡£ã€‚ğŸš€**

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

- ğŸ“– æŸ¥çœ‹å®Œæ•´æ–¹æ¡ˆ: `æŠ€æœ¯å€ºåŠ¡æ”¹è¿›æ‰§è¡Œæ–¹æ¡ˆ.md`
- ğŸ” æŸ¥çœ‹é—®é¢˜åˆ†æ: `æŠ€æœ¯å€ºåŠ¡ä¸å¤§å‚å¼€å‘åŸåˆ™æ·±åº¦åˆ†ææŠ¥å‘Š.md`
- ğŸ’¬ å›¢é˜Ÿè®¨è®º: æ¯æ—¥ç«™ä¼šã€å‘¨ä¼š
- ğŸ¤– AIè¾…åŠ©: ä½¿ç”¨Cursor AIå¸®åŠ©é‡æ„

**è®°ä½**: æ”¹è¿›æ˜¯ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹ï¼Œä¸è¦æ€¥äºæ±‚æˆã€‚æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ï¼âœ¨
