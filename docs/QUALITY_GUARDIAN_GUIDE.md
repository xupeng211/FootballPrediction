# 质量守护指南
# Quality Guardian Guide

## 📋 概述

本文档介绍FootballPrediction项目的质量守护体系，确保代码质量和覆盖率持续达标。

## 🛡️ 质量守护体系

### 核心组件

1. **质量基线配置** (`config/quality_baseline.json`)
2. **质量守护检查器** (`scripts/quality_guardian_check.py`)
3. **CI质量门禁** (`scripts/ci_quality_gate.sh`)

### 质量标准

- **最低总覆盖率**: 6.0%
- **最低测试通过率**: 100%
- **最大覆盖率回退**: 0.5%
- **当前基线覆盖率**: 6.55%

## 🚀 使用指南

### 本地开发

```bash
# 日常质量检查
python scripts/quality_guardian_check.py

# 预提交验证
make prepush

# 快速检查
make test-quick && make lint
```

### CI/CD集成

```bash
# CI质量门禁
./scripts/ci_quality_gate.sh

# 完整CI验证
make ci
```

## 📊 质量指标

### 当前状态
- ✅ **测试通过率**: 100% (264/264)
- ✅ **总覆盖率**: 6.55%
- ✅ **质量门禁**: 全部通过
- ✅ **类型检查**: MyPy清洁

### 模块覆盖率
- **utils模块**: 73.33% (优秀)
- **domain模块**: 0.0% (待改进)
- **其他模块**: 覆盖率持续监控

## 🔧 配置说明

### 质量基线调整

如需调整质量基线，请编辑 `config/quality_baseline.json`：

```json
{
  \"quality_gates\": {
    \"minimum_total_coverage\": 6.0,
    \"minimum_pass_rate\": 100.0,
    \"maximum_regression\": 0.5
  }
}
```

### 新增测试

添加新功能时，请确保：
1. 编写相应测试用例
2. 运行质量检查
3. 确保覆盖率不下降

## 📈 持续改进

### 每周检查清单
- [ ] 质量守护检查通过
- [ ] 无覆盖率回退
- [ ] 无新增技术债务
- [ ] 文档更新及时

### 月度目标
- 覆盖率逐步提升
- 测试质量优化
- 质量流程改进

## 🚨 问题处理

### 质量检查失败
1. 查看失败原因
2. 修复相关问题
3. 重新运行检查
4. 确认通过后提交

### 覆盖率下降
1. 检查新增代码测试
2. 补充缺失测试
3. 删除无用代码
4. 优化测试覆盖

## 📞 支持

如有质量问题，请：
1. 查看本文档
2. 检查质量基线
3. 运行诊断命令
4. 联系维护团队

---
*最后更新: 2025-10-28*
*版本: v1.0*
*维护者: 质量守护团队*