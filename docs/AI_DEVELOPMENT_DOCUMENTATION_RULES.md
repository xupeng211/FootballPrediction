# AI 开发文档维护规则

本文档定义了 AI 编程工具在开发过程中必须遵守的文档维护规则。

## 🤖 AI 开发原则

### 1. 文档优先原则
- **创建新功能前**：先检查是否需要更新文档
- **代码变更时**：同步更新相关文档
- **完成开发后**：验证文档的准确性和完整性

### 2. 文档自动化规则

#### 📁 目录维护规则
```
docs/
├── _reports/        # 临时报告，按月归档
├── architecture/    # 架构设计文档
├── how-to/         # 操作指南（保持简洁）
├── reference/      # 参考资料（API、数据库等）
├── testing/        # 测试策略和报告
├── ops/           # 运维手册
├── ml/            # 机器学习相关
├── release/       # 发布管理
└── legacy/        # 已废弃文档（仅保留3个月）
```

#### 📝 文档命名规范
- 使用英文大写字母和下划线：`FEATURE_NAME.md`
- 报告类文档包含日期：`REPORT_TYPE_YYYY-MM-DD.md`
- 避免中文文件名，使用英文并在内容中标注中文标题

#### 📊 _reports 目录管理
- **自动归档**：每月1号将上个月报告移至 `archive/YYYY-MM/`
- **保留策略**：
  - 临时修复报告：保留1个月
  - 阶段总结报告：保留6个月
  - 项目回顾报告：永久保留
- **文件限制**：活跃报告不超过20个

### 3. 文档创建模板

#### 新功能文档模板
```markdown
# 功能名称

## 概述
简要描述功能目的和范围

## 实现细节
- 技术方案
- 关键代码位置
- 依赖关系

## 使用指南
步骤说明和示例

## 维护说明
- 更新频率
- 注意事项
- 相关文档链接
```

#### 报告文档模板
```markdown
# [报告类型] - YYYY-MM-DD

## 目标
描述本次修复/改进的目标

## 执行内容
- 完成的任务列表
- 关键变更

## 结果
- 达成的效果
- 数据指标

## 后续计划
- 待处理事项
- 下一步行动
```

### 4. 自动化检查清单

#### 开发过程中必须执行：
- [ ] 检查是否需要创建新文档
- [ ] 更新相关现有文档
- [ ] 更新 `docs/INDEX.md` 中的链接
- [ ] 清理过时的临时报告
- [ ] 验证文档内部链接有效性

#### 每周维护任务：
- [ ] 检查 `_reports` 目录，归档上月报告
- [ ] 更新文档索引
- [ ] 清理 legacy 目录中超过3个月的文档
- [ ] 检查空目录并补充必要文档

### 5. AI 工具集成规则

#### Claude Code 集成
1. **初始化任务时**：
   - 自动加载 `CLAUDE.md` 中的文档规则
   - 检查当前文档状态

2. **开发过程中**：
   - 创建新功能时提示更新文档
   - 重大变更时自动生成报告模板

3. **任务完成后**：
   - 自动检查文档完整性
   - 更新相关索引和链接

#### 自动化脚本触发条件
- 创建新的 API 端点 → 更新 API_REFERENCE.md
- 修改数据库 schema → 更新 DATABASE_SCHEMA.md
- 完成重要功能 → 生成完成报告
- 修复重大 bug → 创建 BUGFIX_REPORT

### 6. 文档质量标准

#### 内容要求
- **准确性**：与实际代码保持一致
- **完整性**：包含必要的使用说明
- **可读性**：结构清晰，易于理解
- **时效性**：及时更新，避免过时信息

#### 格式要求
- 使用标准 Markdown 格式
- 包含目录结构（TOC）
- 代码块标注语言类型
- 重要信息使用表格或列表呈现

### 7. 违规处理

#### 自动检测机制
- 发现过时文档 → 创建更新任务
- 检测孤立文档 → 标记待审查
- 文档缺失 → 阻止相关功能开发

#### 修复流程
1. 自动创建修复任务
2. 生成必要的文档模板
3. 分配给后续开发处理
4. 验证修复效果

## 🔄 持续改进

### 定期审查
- 每月审查文档结构合理性
- 每季度评估维护规则有效性
- 根据项目发展调整文档分类

### 版本控制
- 文档结构变更记录在 CHANGELOG.md
- 重要规则更新需要项目评审
- 保持向后兼容性

---

## 实施说明

1. **立即生效**：本规则创建后立即生效
2. **强制执行**：AI 开发工具必须严格遵守
3. **持续优化**：根据实际使用情况调整规则

最后更新：2025-10-02
版本：v1.0