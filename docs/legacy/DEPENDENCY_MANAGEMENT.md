# Dependency Management

## Overview

This document describes the dependency management strategy for the Football Prediction System.

## Dependency Files

The project uses several dependency files:

1. **requirements.txt** - Production dependencies with flexible version ranges
2. **requirements-dev.txt** - Development dependencies with flexible version ranges
3. **requirements.pinned.txt** - Production dependencies with specific pinned versions
4. **requirements-dev.pinned.txt** - Development dependencies with specific pinned versions
5. **requirements.lock** - Automatically generated locked dependencies

## Version Management Strategy

### Flexible Versions (requirements.txt and requirements-dev.txt)

These files use flexible version ranges to allow for automatic updates of compatible versions:

```txt
# Example of flexible versioning
fastapi>=0.100.0
numpy>=1.24.0,<2.0.0
```

### Pinned Versions (requirements.pinned.txt and requirements-dev.pinned.txt)

These files specify exact versions for production deployments to ensure consistency:

```txt
# Example of pinned versioning
fastapi==0.115.0
numpy==1.26.4
```

### Lock File (requirements.lock)

This file is automatically generated by `pip-compile` and contains all dependencies with their exact versions and hashes.

## Updating Dependencies

### For Development

1. Update `requirements.txt` or `requirements-dev.txt` with new dependencies or version ranges
2. Run `pip-compile` to update the lock file:
   ```bash
   pip-compile --output-file=requirements.lock requirements.txt
   pip-compile --output-file=requirements-dev.lock requirements-dev.txt
   ```

### For Production

1. Update `requirements.pinned.txt` with specific versions
2. Test the changes in a staging environment
3. Deploy to production

## Dependency Categories

### Core Dependencies

- **FastAPI**: Web framework for API development
- **SQLAlchemy**: Database ORM
- **PostgreSQL**: Primary database
- **Redis**: Caching and task queue

### Machine Learning Dependencies

- **scikit-learn**: Traditional ML algorithms
- **XGBoost**: Gradient boosting framework
- **pandas**: Data manipulation
- **numpy**: Numerical computing

### MLOps Dependencies

- **MLflow**: Model tracking and management
- **Feast**: Feature store
- **Great Expectations**: Data validation

### Monitoring Dependencies

- **Prometheus**: Metrics collection
- **OpenLineage**: Data lineage tracking

## Security Considerations

- Regularly run `safety check` to identify security vulnerabilities
- Use `pip-audit` for additional security scanning
- Pin versions in production to prevent unexpected updates
- Review dependency updates before applying

## Best Practices

1. **Pin versions in production**: Use `requirements.pinned.txt` for production deployments
2. **Regular updates**: Update dependencies regularly in development
3. **Security scanning**: Run security checks as part of CI pipeline
4. **Dependency review**: Review new dependencies for security and maintenance
5. **Minimal dependencies**: Only include necessary dependencies
