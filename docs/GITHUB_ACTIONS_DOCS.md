# ğŸ”„ GitHub Actions æ–‡æ¡£CI/CDæŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬é¡¹ç›®é…ç½®äº†å®Œæ•´çš„GitHub Actionsæ–‡æ¡£CI/CDæµæ°´çº¿ï¼Œå®ç°æ–‡æ¡£çš„è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚

## ğŸ“‹ å·¥ä½œæµæ¦‚è§ˆ

### ä¸»è¦å·¥ä½œæµ

1. **ğŸ“š Documentation CI/CD** - ä¸»è¦æ–‡æ¡£CI/CDæµæ°´çº¿
2. **ğŸ“š Documentation Preview** - PRé¢„è§ˆå’Œè¯„è®º

### è§¦å‘æ¡ä»¶

#### è‡ªåŠ¨è§¦å‘
- **æ¨é€åˆ°åˆ†æ”¯**: `main`, `develop`, `docs/**`
- **Pull Request**: é’ˆå¯¹ `main`, `develop` åˆ†æ”¯
- **æ–‡æ¡£å˜æ›´**: `docs/**`, `mkdocs.yml`

#### æ‰‹åŠ¨è§¦å‘
- **å·¥ä½œæµè§¦å‘**: å¯é€‰æ‹©éƒ¨ç½²ç¯å¢ƒå’Œå‚æ•°

## ğŸ”„ å·¥ä½œæµè¯¦è§£

### ğŸ“š Documentation CI/CD æµæ°´çº¿

#### é˜¶æ®µ 1: æ–‡æ¡£æ£€æŸ¥ (docs-check)
```yaml
ç›®çš„: éªŒè¯æ–‡æ¡£å¥åº·çŠ¶æ€
- æ£€æŸ¥æ–‡æ¡£ç›®å½•ç»“æ„
- éªŒè¯MkDocsé…ç½®
- æ£€æŸ¥æ–‡æ¡£é“¾æ¥
- ç”Ÿæˆæ–‡æ¡£ç»Ÿè®¡
```

**æ£€æŸ¥é¡¹ç›®**:
- docs/ ç›®å½•å­˜åœ¨æ€§
- mkdocs.yml é…ç½®æ­£ç¡®æ€§
- Markdownæ–‡ä»¶ç»Ÿè®¡
- é“¾æ¥æœ‰æ•ˆæ€§

#### é˜¶æ®µ 2: æ„å»ºæ–‡æ¡£ (docs-build)
```yaml
ç›®çš„: æ„å»ºé™æ€æ–‡æ¡£ç«™ç‚¹
- æ¸…ç†ä¹‹å‰çš„æ„å»º
- æ‰§è¡ŒMkDocsæ„å»º
- éªŒè¯æ„å»ºç»“æœ
- ä¸Šä¼ æ„å»ºäº§ç‰©
```

**è¾“å‡º**:
- HTMLé¡µé¢æ•°é‡ç»Ÿè®¡
- ç«™ç‚¹å¤§å°ä¿¡æ¯
- æ„å»ºæŠ¥å‘ŠJSON

#### é˜¶æ®µ 3: éƒ¨ç½²åˆ°GitHub Pages (docs-deploy)
```yaml
ç›®çš„: è‡ªåŠ¨éƒ¨ç½²åˆ°GitHub Pages
- é…ç½®GitHub Pages
- éƒ¨ç½²é™æ€æ–‡ä»¶
- æä¾›è®¿é—®URL
```

**éƒ¨ç½²æ¡ä»¶**:
- mainåˆ†æ”¯ï¼ˆè‡ªåŠ¨éƒ¨ç½²ï¼‰
- developåˆ†æ”¯ï¼ˆè‡ªåŠ¨éƒ¨ç½²ï¼‰
- æ‰‹åŠ¨è§¦å‘ï¼ˆå¯é€‰éƒ¨ç½²ï¼‰

#### é˜¶æ®µ 4: è´¨é‡æ£€æŸ¥ (docs-quality)
```yaml
ç›®çš„: æ–‡æ¡£è´¨é‡åˆ†æ
- é¡µé¢å¤§å°æ£€æŸ¥
- èµ„æºæ–‡ä»¶ç»Ÿè®¡
- ç”Ÿæˆè´¨é‡æŠ¥å‘Š
```

#### é˜¶æ®µ 5: é€šçŸ¥ (docs-notify)
```yaml
ç›®çš„: éƒ¨ç½²çŠ¶æ€é€šçŸ¥
- æˆåŠŸéƒ¨ç½²é€šçŸ¥
- å¤±è´¥çŠ¶æ€è­¦æŠ¥
```

### ğŸ“š Documentation Preview æµæ°´çº¿

#### æ„å»ºé¢„è§ˆ (preview)
```yaml
ç›®çš„: ä¸ºPRæ„å»ºé¢„è§ˆç«™ç‚¹
- æ„å»ºæ–‡æ¡£
- æ·»åŠ é¢„è§ˆæ ‡è¯†
- ä¸Šä¼ é¢„è§ˆæ–‡ä»¶
```

#### PRè¯„è®º (pr-comment)
```yaml
ç›®çš„: åœ¨PRä¸­æ·»åŠ é¢„è§ˆé“¾æ¥
- æŸ¥æ‰¾ç°æœ‰è¯„è®º
- åˆ›å»ºæˆ–æ›´æ–°é¢„è§ˆé“¾æ¥
```

#### è´¨é‡æ£€æŸ¥ (quality-check)
```yaml
ç›®çš„: é¢„è§ˆè´¨é‡éªŒè¯
- HTMLæœ‰æ•ˆæ€§æ£€æŸ¥
- å…³é”®é¡µé¢éªŒè¯
- èµ„æºæ–‡ä»¶ç»Ÿè®¡
```

#### çŠ¶æ€æ£€æŸ¥ (status)
```yaml
ç›®çš„: ç»¼åˆçŠ¶æ€æŠ¥å‘Š
- æ£€æŸ¥å„é˜¶æ®µçŠ¶æ€
- ç”ŸæˆçŠ¶æ€æŠ¥å‘Š
```

## ğŸ› ï¸ æœ¬åœ°å¼€å‘å·¥å…·

### Makefileå‘½ä»¤

#### åŸºç¡€å‘½ä»¤
```bash
# æœ¬åœ°CIæ£€æŸ¥ï¼ˆæ¨¡æ‹ŸGitHub Actionsï¼‰
make docs-ci-local

# æµ‹è¯•æ–‡æ¡£é“¾æ¥
make docs-test-links

# éƒ¨ç½²å‰æµ‹è¯•
make docs-deploy-dry

# æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
make docs-status
```

#### ç®¡ç†å‘½ä»¤
```bash
# æ¸…ç†æ‰€æœ‰æ–‡æ¡£äº§ç‰©
make docs-clean-all

# æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
make docs-version

# MkDocsåŸºç¡€å‘½ä»¤
make docs-install
make docs-serve
make docs-build
make docs-deploy
```

### æœ¬åœ°æµ‹è¯•æµç¨‹

#### 1. æœ¬åœ°CIæ¨¡æ‹Ÿ
```bash
# è¿è¡Œå®Œæ•´çš„æœ¬åœ°CIæ£€æŸ¥
make docs-ci-local
```

**é¢„æœŸè¾“å‡º**:
```
ğŸ“‹ 1. Checking documentation structure...
âœ… Structure check passed
ğŸ”§ 2. Validating MkDocs configuration...
âœ… Configuration valid
ğŸ”¨ 3. Building documentation...
âœ… Build successful
ğŸ“Š 4. Generating report...
ğŸ“„ Generated 25 HTML pages
ğŸ“¦ Site size: 2.5M
âœ… Local CI checks completed successfully
```

#### 2. é“¾æ¥æµ‹è¯•
```bash
# æµ‹è¯•æ‰€æœ‰æ–‡æ¡£é“¾æ¥
make docs-test-links
```

#### 3. éƒ¨ç½²æµ‹è¯•
```bash
# éƒ¨ç½²å‰æµ‹è¯•
make docs-deploy-dry

# æ£€æŸ¥çŠ¶æ€
make docs-status
```

## ğŸ”§ é…ç½®æ–‡ä»¶

### GitHub Actionsé…ç½®

#### ä¸»è¦é…ç½®æ–‡ä»¶
- `.github/workflows/docs.yml` - ä¸»CI/CDæµæ°´çº¿
- `.github/workflows/docs-preview.yml` - PRé¢„è§ˆæµæ°´çº¿
- `.mlc_config.json` - é“¾æ¥æ£€æŸ¥é…ç½®

#### é…ç½®ç‰¹ç‚¹
- **å¹¶å‘æ§åˆ¶**: é¿å…é‡å¤è¿è¡Œ
- **è¶…æ—¶è®¾ç½®**: é˜²æ­¢æ— é™ç­‰å¾…
- **æƒé™æ§åˆ¶**: æœ€å°æƒé™åŸåˆ™
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¤±è´¥å¤„ç†

### MkDocsé…ç½®

#### æ„å»ºé…ç½®
```yaml
# mkdocs.yml
site_name: è¶³çƒé¢„æµ‹ç³»ç»Ÿæ–‡æ¡£
theme:
  name: material
  language: zh
plugins:
  - search:
      lang:
        - zh
        - en
```

## ğŸ“Š ç›‘æ§å’ŒæŠ¥å‘Š

### æ„å»ºæŠ¥å‘Š

#### è‡ªåŠ¨ç”ŸæˆæŠ¥å‘Š
- `docs-stats.json` - æ–‡æ¡£ç»Ÿè®¡ä¿¡æ¯
- `build-report.json` - æ„å»ºæŠ¥å‘Š
- `quality-report.json` - è´¨é‡åˆ†ææŠ¥å‘Š

#### æŠ¥å‘Šå†…å®¹
```json
{
  "timestamp": "2025-10-23T15:00:00Z",
  "total_files": 25,
  "total_lines": 5000,
  "directories": 10,
  "git_commit": "abc123",
  "git_branch": "main"
}
```

### è´¨é‡æŒ‡æ ‡

#### æ„å»ºæŒ‡æ ‡
- **HTMLé¡µé¢æ•°é‡**: ç”Ÿæˆçš„HTMLæ–‡ä»¶æ€»æ•°
- **ç«™ç‚¹å¤§å°**: ç«™ç‚¹å ç”¨çš„ç£ç›˜ç©ºé—´
- **æ„å»ºæ—¶é—´**: å®Œæ•´æ„å»ºçš„è€—æ—¶
- **æˆåŠŸç‡**: æ„å»ºæˆåŠŸçš„ç™¾åˆ†æ¯”

#### è´¨é‡æŒ‡æ ‡
- **å¤§å‹é¡µé¢**: è¶…è¿‡50KBçš„HTMLé¡µé¢æ•°é‡
- **å›¾ç‰‡ä¼˜åŒ–**: å›¾ç‰‡æ–‡ä»¶æ•°é‡å’Œå¤§å°
- **é“¾æ¥æœ‰æ•ˆæ€§**: æ— æ•ˆé“¾æ¥çš„ç»Ÿè®¡

## ğŸš€ éƒ¨ç½²æµç¨‹

### è‡ªåŠ¨éƒ¨ç½²

#### è§¦å‘æ¡ä»¶
- **mainåˆ†æ”¯æ¨é€**: è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- **developåˆ†æ”¯æ¨é€**: è‡ªåŠ¨éƒ¨ç½²åˆ°é¢„å‘å¸ƒç¯å¢ƒ
- **æ‰‹åŠ¨è§¦å‘**: å¯é€‰æ‹©ç¯å¢ƒå’Œå‚æ•°

#### éƒ¨ç½²æ­¥éª¤
1. **ä»£ç æ£€å‡º**: è·å–æœ€æ–°ä»£ç 
2. **ç¯å¢ƒå‡†å¤‡**: è®¾ç½®Pythonå’Œä¾èµ–
3. **æ–‡æ¡£æ„å»º**: ç”Ÿæˆé™æ€ç«™ç‚¹
4. **GitHub Pagesé…ç½®**: è®¾ç½®éƒ¨ç½²ç¯å¢ƒ
5. **æ–‡ä»¶éƒ¨ç½²**: æ¨é€åˆ°GitHub Pages
6. **è®¿é—®éªŒè¯**: ç¡®è®¤éƒ¨ç½²æˆåŠŸ

### æ‰‹åŠ¨éƒ¨ç½²

#### æœ¬åœ°éƒ¨ç½²
```bash
# 1. æ„å»ºæ–‡æ¡£
make docs-build

# 2. æœ¬åœ°é¢„è§ˆ
make docs-serve

# 3. æ‰‹åŠ¨éƒ¨ç½²
mkdocs gh-deploy --force
```

#### éƒ¨ç½²éªŒè¯
```bash
# æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
make docs-status

# è®¿é—®ç«™ç‚¹
open https://username.github.io/repository/
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ„å»ºå¤±è´¥
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
python -c "import yaml; yaml.safe_load(open('mkdocs.yml'))"

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
mkdocs build --verbose
```

#### 2. éƒ¨ç½²å¤±è´¥
```bash
# æ£€æŸ¥æƒé™
gh auth status

# æ£€æŸ¥ä»“åº“è®¾ç½®
gh repo view --json | jq '.pages'

# æ‰‹åŠ¨éƒ¨ç½²æµ‹è¯•
mkdocs gh-deploy --dry-run --force
```

#### 3. é“¾æ¥æ£€æŸ¥å¤±è´¥
```bash
# è·³è¿‡ç‰¹å®šé“¾æ¥
echo "skip_patterns:" >> .mlc_config.json
echo "- 'http://localhost'" >> .mlc_config.json

# é‡æ–°æ£€æŸ¥
make docs-test-links
```

### è°ƒè¯•æŠ€å·§

#### æœ¬åœ°è°ƒè¯•
```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
mkdocs build --verbose

# ä¸¥æ ¼æ¨¡å¼æ„å»º
mkdocs build --strict

# æ£€æŸ¥ç‰¹å®šæ–‡ä»¶
mkdocs build --clean --quiet
```

#### GitHub Actionsè°ƒè¯•
```yaml
# æ·»åŠ è°ƒè¯•æ­¥éª¤
- name: Debug
  run: |
    echo "Current directory: $(pwd)"
    echo "Files in docs:"
    ls -la docs/
    echo "MkDocs version:"
    mkdocs --version
```

## ğŸ“ˆ æœ€ä½³å®è·µ

### æ–‡æ¡£ç®¡ç†

#### ç‰ˆæœ¬æ§åˆ¶
- æ–‡æ¡£å˜æ›´è‡ªåŠ¨è§¦å‘æ„å»º
- PRè‡ªåŠ¨ç”Ÿæˆé¢„è§ˆ
- ç‰ˆæœ¬æ ‡ç­¾è‡ªåŠ¨éƒ¨ç½²

#### è´¨é‡ä¿è¯
- è‡ªåŠ¨åŒ–é“¾æ¥æ£€æŸ¥
- æ„å»ºå‰éªŒè¯
- è´¨é‡æŠ¥å‘Šç”Ÿæˆ

### æ€§èƒ½ä¼˜åŒ–

#### æ„å»ºä¼˜åŒ–
- ç¼“å­˜ä¾èµ–å®‰è£…
- å¹¶è¡ŒåŒ–æ„å»ºæ­¥éª¤
- ä¼˜åŒ–æ„å»ºæ—¶é—´

#### ç«™ç‚¹ä¼˜åŒ–
- å‹ç¼©é™æ€èµ„æº
- å¯ç”¨CDNåŠ é€Ÿ
- ä¼˜åŒ–åŠ è½½æ€§èƒ½

## ğŸ”— ç›¸å…³èµ„æº

### æ–‡æ¡£é“¾æ¥
- **MkDocså®˜æ–¹æ–‡æ¡£**: https://www.mkdocs.org/
- **Materialä¸»é¢˜æ–‡æ¡£**: https://squidfunk.github.io/mkdocs-material/
- **GitHub Actionsæ–‡æ¡£**: https://docs.github.com/en/actions

### é…ç½®å‚è€ƒ
- **å·¥ä½œæµé…ç½®**: `.github/workflows/docs.yml`
- **MkDocsé…ç½®**: `mkdocs.yml`
- **é“¾æ¥æ£€æŸ¥é…ç½®**: `.mlc_config.json`

### å·¥å…·æ–‡æ¡£
- **Makefileå·¥å…·**: å‚è€ƒ `docs/MKDOCS_README.md`
- **GitHub Actions**: å‚è€ƒ GitHubå®˜æ–¹æ–‡æ¡£

---

**æœ€åæ›´æ–°**: 2025-10-23
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ