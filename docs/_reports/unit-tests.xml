<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="10" skipped="11" tests="35" time="7.068" timestamp="2025-10-02T21:08:27.425328+08:00" hostname="DESKTOP-2TFJUEA"><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_get_cache_stats_success" time="0.034" /><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_get_cache_stats_no_manager" time="0.006" /><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_clear_cache_success" time="0.007" /><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_clear_cache_no_manager" time="0.005" /><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_prewarm_cache_success" time="0.006" /><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_prewarm_cache_invalid_tasks" time="0.006" /><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_optimize_cache_success" time="0.007" /><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_cache_health_check_healthy" time="0.007" /><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_cache_health_check_degraded" time="0.008" /><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_get_cache_config" time="0.005" /><testcase classname="tests.unit.api.test_cache.TestCacheAPI" name="test_get_cache_config_error" time="0.005" /><testcase classname="tests.unit.api.test_cache.TestCacheBackgroundTasks" name="test_clear_cache_by_pattern" time="0.002" /><testcase classname="tests.unit.api.test_cache.TestCacheBackgroundTasks" name="test_execute_prewarm_tasks" time="0.004" /><testcase classname="tests.unit.api.test_cache.TestCacheBackgroundTasks" name="test_execute_cache_optimization" time="0.003" /><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_matches_success" time="0.004"><failure message="assert 0 &gt; 0&#10; +  where 0 = len([])">tests/unit/api/test_data_comprehensive.py:173: in test_get_matches_success
    assert len(response["data"]["matches"]) &gt; 0
E   assert 0 &gt; 0
E    +  where 0 = len([])</failure></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_matches_with_filters" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:175: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_match_by_id_success" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:204: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_match_by_id_not_found" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:227: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_teams_success" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:251: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_teams_with_search" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:284: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_team_by_id_success" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:307: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_team_by_id_not_found" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:329: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_leagues_success" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:352: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_league_by_id_success" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:384: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_matches_by_date_range" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:406: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_live_matches" time="0.000"><skipped type="pytest.skip" message="Function not implemented in src.api.data">/home/user/projects/FootballPrediction/tests/unit/api/test_data_comprehensive.py:433: Function not implemented in src.api.data</skipped></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_team_matches" time="0.004"><failure message="ImportError: cannot import name 'get_team_matches' from 'src.api.data' (/home/user/projects/FootballPrediction/tests/../src/api/data.py)">tests/unit/api/test_data_comprehensive.py:472: in test_get_team_matches
    from src.api.data import get_team_matches
E   ImportError: cannot import name 'get_team_matches' from 'src.api.data' (/home/user/projects/FootballPrediction/tests/../src/api/data.py)</failure></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_get_league_standings" time="0.003"><failure message="ImportError: cannot import name 'get_league_standings' from 'src.api.data' (/home/user/projects/FootballPrediction/tests/../src/api/data.py)">tests/unit/api/test_data_comprehensive.py:514: in test_get_league_standings
    from src.api.data import get_league_standings
E   ImportError: cannot import name 'get_league_standings' from 'src.api.data' (/home/user/projects/FootballPrediction/tests/../src/api/data.py)</failure></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_pagination_handling" time="0.015"><failure message="assert 0 == 100">tests/unit/api/test_data_comprehensive.py:561: in test_pagination_handling
    assert pagination["total"] == 100
E   assert 0 == 100</failure></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_invalid_parameters" time="0.001"><failure message="ImportError: cannot import name 'validate_date_format' from 'src.api.data' (/home/user/projects/FootballPrediction/tests/../src/api/data.py)">tests/unit/api/test_data_comprehensive.py:567: in test_invalid_parameters
    from src.api.data import validate_date_format
E   ImportError: cannot import name 'validate_date_format' from 'src.api.data' (/home/user/projects/FootballPrediction/tests/../src/api/data.py)</failure></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_database_error_handling" time="0.003"><failure message="Failed: DID NOT RAISE &lt;class 'fastapi.exceptions.HTTPException'&gt;">tests/unit/api/test_data_comprehensive.py:591: in test_database_error_handling
    with pytest.raises(HTTPException) as exc_info:
E   Failed: DID NOT RAISE &lt;class 'fastapi.exceptions.HTTPException'&gt;</failure></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_response_format_validation" time="0.001"><failure message="NameError: name 'format_match_response' is not defined">tests/unit/api/test_data_comprehensive.py:609: in test_response_format_validation
    response = format_match_response(match_data)
               ^^^^^^^^^^^^^^^^^^^^^
E   NameError: name 'format_match_response' is not defined</failure></testcase><testcase classname="tests.unit.api.test_data_comprehensive.TestDataAPI" name="test_route_configuration" time="0.001"><failure message="AssertionError: assert '/data' == ''&#10;  &#10;  + /data">tests/unit/api/test_data_comprehensive.py:627: in test_route_configuration
    assert router.prefix == ""
E   AssertionError: assert '/data' == ''
E     
E     + /data</failure></testcase><testcase classname="tests.unit.api.test_health_comprehensive.TestHealthAPI" name="test_health_check_basic" time="0.003"><failure message="fastapi.exceptions.HTTPException: 503: {'status': 'unhealthy', 'timestamp': '2025-10-02T13:08:34.277562', 'service': 'football-prediction-api', 'version': '1.0.0', 'uptime': 0.85, 'checks': {}, 'mode': 'full', 'error': '数据库连接未初始化，请先调用 initialize()'}">src/api/health.py:106: in health_check
    health_status["checks"]["database"] = await _collect_database_health()
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/api/health.py:70: in _collect_database_health
    with get_database_manager().get_session() as session:
../../.pyenv/versions/3.11.9/lib/python3.11/contextlib.py:137: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
src/database/connection.py:347: in get_session
    session = self.create_session()
              ^^^^^^^^^^^^^^^^^^^^^
src/database/connection.py:303: in create_session
    raise RuntimeError("数据库连接未初始化，请先调用 initialize()")
E   RuntimeError: 数据库连接未初始化，请先调用 initialize()

During handling of the above exception, another exception occurred:
tests/unit/api/test_health_comprehensive.py:25: in test_health_check_basic
    response = self.client.get("/health")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.11/site-packages/starlette/testclient.py:479: in get
    return super().get(
.venv/lib/python3.11/site-packages/httpx/_client.py:1053: in get
    return self.request(
.venv/lib/python3.11/site-packages/starlette/testclient.py:451: in request
    return super().request(
.venv/lib/python3.11/site-packages/httpx/_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.11/site-packages/httpx/_client.py:914: in send
    response = self._send_handling_auth(
.venv/lib/python3.11/site-packages/httpx/_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
.venv/lib/python3.11/site-packages/httpx/_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.11/site-packages/httpx/_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.11/site-packages/starlette/testclient.py:354: in handle_request
    raise exc
.venv/lib/python3.11/site-packages/starlette/testclient.py:351: in handle_request
    portal.call(self.app, scope, receive, send)
.venv/lib/python3.11/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
../../.pyenv/versions/3.11.9/lib/python3.11/concurrent/futures/_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
../../.pyenv/versions/3.11.9/lib/python3.11/concurrent/futures/_base.py:401: in __get_result
    raise self._exception
.venv/lib/python3.11/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.11/site-packages/starlette/routing.py:716: in __call__
    await self.middleware_stack(scope, receive, send)
.venv/lib/python3.11/site-packages/starlette/routing.py:736: in app
    await route.handle(scope, receive, send)
.venv/lib/python3.11/site-packages/starlette/routing.py:290: in handle
    await self.app(scope, receive, send)
.venv/lib/python3.11/site-packages/starlette/routing.py:78: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
.venv/lib/python3.11/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    raise exc
.venv/lib/python3.11/site-packages/starlette/_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
.venv/lib/python3.11/site-packages/starlette/routing.py:75: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
.venv/lib/python3.11/site-packages/fastapi/routing.py:308: in app
    raw_response = await run_endpoint_function(
.venv/lib/python3.11/site-packages/fastapi/routing.py:219: in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/api/health.py:152: in health_check
    raise HTTPException(
E   fastapi.exceptions.HTTPException: 503: {'status': 'unhealthy', 'timestamp': '2025-10-02T13:08:34.277562', 'service': 'football-prediction-api', 'version': '1.0.0', 'uptime': 0.85, 'checks': {}, 'mode': 'full', 'error': '数据库连接未初始化，请先调用 initialize()'}</failure></testcase><testcase classname="tests.unit.api.test_health_comprehensive.TestHealthAPI" name="test_health_check_detailed" time="0.003"><failure message="assert 404 == 200&#10; +  where 404 = &lt;Response [404 Not Found]&gt;.status_code">tests/unit/api/test_health_comprehensive.py:38: in test_health_check_detailed
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = &lt;Response [404 Not Found]&gt;.status_code</failure></testcase></testsuite></testsuites>