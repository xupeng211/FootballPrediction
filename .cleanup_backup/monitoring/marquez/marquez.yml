server:
  applicationConnectors:
    - type: http
      port: 5000
  adminConnectors:
    - type: http
      port: 5001

database:
  driverClass: org.postgresql.Driver
  url: jdbc:postgresql://marquez-db:5432/marquez
  user: marquez_user
  password: marquez_password
  maxWaitForConnection: 1s
  validationQuery: SELECT 1
  minSize: 10
  maxSize: 32
  checkConnectionWhileIdle: false
  evictionInterval: 10s
  minIdleTime: 1 minute

logging:
  level: INFO
  loggers:
    marquez: INFO
    org.apache.http: WARN
    org.postgresql: WARN
  appenders:
    - type: console
      threshold: INFO
      timeZone: UTC
      target: stdout
      logFormat: "%d{ISO8601} [%thread] %-5level %logger{36} - %msg%n"

# Marquez 特定配置
marquez:
  # 数据血缘保留期（天）
  lineage:
    retention:
      days: 90

  # Namespace 配置
  namespaces:
    - name: football_prediction
      description: "足球预测平台数据血缘"
    - name: external_apis
      description: "外部API数据源"
    - name: football_db
      description: "足球预测数据库"

  # 预配置数据集
  datasets:
    - namespace: football_db.bronze
      name: raw_match_data
      description: "原始比赛数据（Bronze层）"
      schema:
        fields:
          - name: id
            type: INTEGER
            description: "主键ID"
          - name: data_source
            type: VARCHAR
            description: "数据源标识"
          - name: raw_data
            type: JSONB
            description: "原始JSON数据"
          - name: collected_at
            type: TIMESTAMP
            description: "采集时间"

    - namespace: football_db.silver
      name: matches
      description: "清洗后的比赛数据（Silver层）"
      schema:
        fields:
          - name: id
            type: INTEGER
            description: "比赛ID"
          - name: home_team_id
            type: INTEGER
            description: "主队ID"
          - name: away_team_id
            type: INTEGER
            description: "客队ID"
          - name: league_id
            type: INTEGER
            description: "联赛ID"
          - name: match_time
            type: TIMESTAMP
            description: "比赛时间"

    - namespace: football_db.gold
      name: features
      description: "机器学习特征（Gold层）"
      schema:
        fields:
          - name: id
            type: INTEGER
            description: "特征ID"
          - name: match_id
            type: INTEGER
            description: "比赛ID"
          - name: team_id
            type: INTEGER
            description: "球队ID"
          - name: recent_5_wins
            type: INTEGER
            description: "近5场胜利数"

# 健康检查
health:
  healthChecks:
    - name: postgres
      type: PostgreSQL
      validationQuery: SELECT 1
