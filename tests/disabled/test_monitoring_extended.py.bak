# 可选依赖导入
try:
    from src.dependencies.optional import *
except ImportError:
    pass

# from src.monitoring.metrics_collector import MetricsCollector
from src.monitoring.system_monitor_mod import SystemMonitor
from src.monitoring.alert_manager import AlertManager


def test_metrics_collector_extended():
    collector = MetricsCollector()

    # 测试指标记录
    collector.record_metric("test_counter", 1)
    collector.record_metric("test_gauge", 100)
    collector.record_metric("test_histogram", 50)

    # 测试指标获取
    metrics = collector.get_metrics()
    assert metrics is not None


def test_system_monitor():
    monitor = SystemMonitor()
    assert monitor is not None

    # 测试方法存在
    assert hasattr(monitor, "get_cpu_usage")
    assert hasattr(monitor, "get_memory_usage")
    assert hasattr(monitor, "get_disk_usage")


def test_alert_manager():
    manager = AlertManager()
    assert manager is not None
    assert hasattr(manager, "send_alert")
