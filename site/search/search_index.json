{"config":{"lang":["zh","en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stemmer"]},"docs":[{"location":"","title":"Football Prediction System","text":"<p>\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u6587\u6863</p>"},{"location":"#_1","title":"\u5feb\u901f\u5f00\u59cb","text":"<ul> <li>\u9879\u76ee\u8bf4\u660e</li> <li>\u5feb\u901f\u5f00\u53d1\u6307\u5357</li> <li>\u67b6\u6784\u6587\u6863</li> </ul>"},{"location":"#_2","title":"\u6587\u6863\u7d22\u5f15","text":"<ul> <li>\u5b8c\u6574\u6587\u6863\u7d22\u5f15</li> <li>\u6d4b\u8bd5\u6307\u5357</li> </ul>"},{"location":"#_3","title":"\u5f00\u53d1\u6307\u5357","text":"<ul> <li>\u5f00\u53d1\u5de5\u4f5c\u6d41</li> <li>\u90e8\u7f72\u6307\u5357</li> <li>\u6d4b\u8bd5\u547d\u4ee4</li> </ul> <p>\u6587\u6863\u81ea\u52a8\u751f\u6210\u4e8e\u6e05\u7406\u811a\u672c</p>"},{"location":"GITHUB_ACTIONS_DOCS/","title":"\ud83d\udd04 GitHub Actions \u6587\u6863CI/CD\u6307\u5357","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_1","title":"\ud83c\udfaf \u6982\u8ff0","text":"<p>\u672c\u9879\u76ee\u914d\u7f6e\u4e86\u5b8c\u6574\u7684GitHub Actions\u6587\u6863CI/CD\u6d41\u6c34\u7ebf\uff0c\u5b9e\u73b0\u6587\u6863\u7684\u81ea\u52a8\u5316\u6784\u5efa\u3001\u6d4b\u8bd5\u548c\u90e8\u7f72\u3002</p>"},{"location":"GITHUB_ACTIONS_DOCS/#_2","title":"\ud83d\udccb \u5de5\u4f5c\u6d41\u6982\u89c8","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_3","title":"\u4e3b\u8981\u5de5\u4f5c\u6d41","text":"<ol> <li>\ud83d\udcda Documentation CI/CD - \u4e3b\u8981\u6587\u6863CI/CD\u6d41\u6c34\u7ebf</li> <li>\ud83d\udcda Documentation Preview - PR\u9884\u89c8\u548c\u8bc4\u8bba</li> </ol>"},{"location":"GITHUB_ACTIONS_DOCS/#_4","title":"\u89e6\u53d1\u6761\u4ef6","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_5","title":"\u81ea\u52a8\u89e6\u53d1","text":"<ul> <li>\u63a8\u9001\u5230\u5206\u652f: <code>main</code>, <code>develop</code>, <code>docs/**</code></li> <li>Pull Request: \u9488\u5bf9 <code>main</code>, <code>develop</code> \u5206\u652f</li> <li>\u6587\u6863\u53d8\u66f4: <code>docs/**</code>, <code>mkdocs.yml</code></li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_6","title":"\u624b\u52a8\u89e6\u53d1","text":"<ul> <li>\u5de5\u4f5c\u6d41\u89e6\u53d1: \u53ef\u9009\u62e9\u90e8\u7f72\u73af\u5883\u548c\u53c2\u6570</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_7","title":"\ud83d\udd04 \u5de5\u4f5c\u6d41\u8be6\u89e3","text":""},{"location":"GITHUB_ACTIONS_DOCS/#documentation-cicd","title":"\ud83d\udcda Documentation CI/CD \u6d41\u6c34\u7ebf","text":""},{"location":"GITHUB_ACTIONS_DOCS/#1-docs-check","title":"\u9636\u6bb5 1: \u6587\u6863\u68c0\u67e5 (docs-check)","text":"<pre><code>\u76ee\u7684: \u9a8c\u8bc1\u6587\u6863\u5065\u5eb7\u72b6\u6001\n- \u68c0\u67e5\u6587\u6863\u76ee\u5f55\u7ed3\u6784\n- \u9a8c\u8bc1MkDocs\u914d\u7f6e\n- \u68c0\u67e5\u6587\u6863\u94fe\u63a5\n- \u751f\u6210\u6587\u6863\u7edf\u8ba1\n</code></pre> <p>\u68c0\u67e5\u9879\u76ee: - docs/ \u76ee\u5f55\u5b58\u5728\u6027 - mkdocs.yml \u914d\u7f6e\u6b63\u786e\u6027 - Markdown\u6587\u4ef6\u7edf\u8ba1 - \u94fe\u63a5\u6709\u6548\u6027</p>"},{"location":"GITHUB_ACTIONS_DOCS/#2-docs-build","title":"\u9636\u6bb5 2: \u6784\u5efa\u6587\u6863 (docs-build)","text":"<pre><code>\u76ee\u7684: \u6784\u5efa\u9759\u6001\u6587\u6863\u7ad9\u70b9\n- \u6e05\u7406\u4e4b\u524d\u7684\u6784\u5efa\n- \u6267\u884cMkDocs\u6784\u5efa\n- \u9a8c\u8bc1\u6784\u5efa\u7ed3\u679c\n- \u4e0a\u4f20\u6784\u5efa\u4ea7\u7269\n</code></pre> <p>\u8f93\u51fa: - HTML\u9875\u9762\u6570\u91cf\u7edf\u8ba1 - \u7ad9\u70b9\u5927\u5c0f\u4fe1\u606f - \u6784\u5efa\u62a5\u544aJSON</p>"},{"location":"GITHUB_ACTIONS_DOCS/#3-github-pages-docs-deploy","title":"\u9636\u6bb5 3: \u90e8\u7f72\u5230GitHub Pages (docs-deploy)","text":"<pre><code>\u76ee\u7684: \u81ea\u52a8\u90e8\u7f72\u5230GitHub Pages\n- \u914d\u7f6eGitHub Pages\n- \u90e8\u7f72\u9759\u6001\u6587\u4ef6\n- \u63d0\u4f9b\u8bbf\u95eeURL\n</code></pre> <p>\u90e8\u7f72\u6761\u4ef6: - main\u5206\u652f\uff08\u81ea\u52a8\u90e8\u7f72\uff09 - develop\u5206\u652f\uff08\u81ea\u52a8\u90e8\u7f72\uff09 - \u624b\u52a8\u89e6\u53d1\uff08\u53ef\u9009\u90e8\u7f72\uff09</p>"},{"location":"GITHUB_ACTIONS_DOCS/#4-docs-quality","title":"\u9636\u6bb5 4: \u8d28\u91cf\u68c0\u67e5 (docs-quality)","text":"<pre><code>\u76ee\u7684: \u6587\u6863\u8d28\u91cf\u5206\u6790\n- \u9875\u9762\u5927\u5c0f\u68c0\u67e5\n- \u8d44\u6e90\u6587\u4ef6\u7edf\u8ba1\n- \u751f\u6210\u8d28\u91cf\u62a5\u544a\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#5-docs-notify","title":"\u9636\u6bb5 5: \u901a\u77e5 (docs-notify)","text":"<pre><code>\u76ee\u7684: \u90e8\u7f72\u72b6\u6001\u901a\u77e5\n- \u6210\u529f\u90e8\u7f72\u901a\u77e5\n- \u5931\u8d25\u72b6\u6001\u8b66\u62a5\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#documentation-preview","title":"\ud83d\udcda Documentation Preview \u6d41\u6c34\u7ebf","text":""},{"location":"GITHUB_ACTIONS_DOCS/#preview","title":"\u6784\u5efa\u9884\u89c8 (preview)","text":"<pre><code>\u76ee\u7684: \u4e3aPR\u6784\u5efa\u9884\u89c8\u7ad9\u70b9\n- \u6784\u5efa\u6587\u6863\n- \u6dfb\u52a0\u9884\u89c8\u6807\u8bc6\n- \u4e0a\u4f20\u9884\u89c8\u6587\u4ef6\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#pr-pr-comment","title":"PR\u8bc4\u8bba (pr-comment)","text":"<pre><code>\u76ee\u7684: \u5728PR\u4e2d\u6dfb\u52a0\u9884\u89c8\u94fe\u63a5\n- \u67e5\u627e\u73b0\u6709\u8bc4\u8bba\n- \u521b\u5efa\u6216\u66f4\u65b0\u9884\u89c8\u94fe\u63a5\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#quality-check","title":"\u8d28\u91cf\u68c0\u67e5 (quality-check)","text":"<pre><code>\u76ee\u7684: \u9884\u89c8\u8d28\u91cf\u9a8c\u8bc1\n- HTML\u6709\u6548\u6027\u68c0\u67e5\n- \u5173\u952e\u9875\u9762\u9a8c\u8bc1\n- \u8d44\u6e90\u6587\u4ef6\u7edf\u8ba1\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#status","title":"\u72b6\u6001\u68c0\u67e5 (status)","text":"<pre><code>\u76ee\u7684: \u7efc\u5408\u72b6\u6001\u62a5\u544a\n- \u68c0\u67e5\u5404\u9636\u6bb5\u72b6\u6001\n- \u751f\u6210\u72b6\u6001\u62a5\u544a\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#_8","title":"\ud83d\udee0\ufe0f \u672c\u5730\u5f00\u53d1\u5de5\u5177","text":""},{"location":"GITHUB_ACTIONS_DOCS/#makefile","title":"Makefile\u547d\u4ee4","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_9","title":"\u57fa\u7840\u547d\u4ee4","text":"<pre><code># \u672c\u5730CI\u68c0\u67e5\uff08\u6a21\u62dfGitHub Actions\uff09\nmake docs-ci-local\n\n# \u6d4b\u8bd5\u6587\u6863\u94fe\u63a5\nmake docs-test-links\n\n# \u90e8\u7f72\u524d\u6d4b\u8bd5\nmake docs-deploy-dry\n\n# \u67e5\u770b\u90e8\u7f72\u72b6\u6001\nmake docs-status\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#_10","title":"\u7ba1\u7406\u547d\u4ee4","text":"<pre><code># \u6e05\u7406\u6240\u6709\u6587\u6863\u4ea7\u7269\nmake docs-clean-all\n\n# \u67e5\u770b\u7248\u672c\u4fe1\u606f\nmake docs-version\n\n# MkDocs\u57fa\u7840\u547d\u4ee4\nmake docs-install\nmake docs-serve\nmake docs-build\nmake docs-deploy\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#_11","title":"\u672c\u5730\u6d4b\u8bd5\u6d41\u7a0b","text":""},{"location":"GITHUB_ACTIONS_DOCS/#1-ci","title":"1. \u672c\u5730CI\u6a21\u62df","text":"<pre><code># \u8fd0\u884c\u5b8c\u6574\u7684\u672c\u5730CI\u68c0\u67e5\nmake docs-ci-local\n</code></pre> <p>\u9884\u671f\u8f93\u51fa: <pre><code>\ud83d\udccb 1. Checking documentation structure...\n\u2705 Structure check passed\n\ud83d\udd27 2. Validating MkDocs configuration...\n\u2705 Configuration valid\n\ud83d\udd28 3. Building documentation...\n\u2705 Build successful\n\ud83d\udcca 4. Generating report...\n\ud83d\udcc4 Generated 25 HTML pages\n\ud83d\udce6 Site size: 2.5M\n\u2705 Local CI checks completed successfully\n</code></pre></p>"},{"location":"GITHUB_ACTIONS_DOCS/#2","title":"2. \u94fe\u63a5\u6d4b\u8bd5","text":"<pre><code># \u6d4b\u8bd5\u6240\u6709\u6587\u6863\u94fe\u63a5\nmake docs-test-links\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#3","title":"3. \u90e8\u7f72\u6d4b\u8bd5","text":"<pre><code># \u90e8\u7f72\u524d\u6d4b\u8bd5\nmake docs-deploy-dry\n\n# \u68c0\u67e5\u72b6\u6001\nmake docs-status\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#_12","title":"\ud83d\udd27 \u914d\u7f6e\u6587\u4ef6","text":""},{"location":"GITHUB_ACTIONS_DOCS/#github-actions","title":"GitHub Actions\u914d\u7f6e","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_13","title":"\u4e3b\u8981\u914d\u7f6e\u6587\u4ef6","text":"<ul> <li><code>.github/workflows/docs.yml</code> - \u4e3bCI/CD\u6d41\u6c34\u7ebf</li> <li><code>.github/workflows/docs-preview.yml</code> - PR\u9884\u89c8\u6d41\u6c34\u7ebf</li> <li><code>.mlc_config.json</code> - \u94fe\u63a5\u68c0\u67e5\u914d\u7f6e</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_14","title":"\u914d\u7f6e\u7279\u70b9","text":"<ul> <li>\u5e76\u53d1\u63a7\u5236: \u907f\u514d\u91cd\u590d\u8fd0\u884c</li> <li>\u8d85\u65f6\u8bbe\u7f6e: \u9632\u6b62\u65e0\u9650\u7b49\u5f85</li> <li>\u6743\u9650\u63a7\u5236: \u6700\u5c0f\u6743\u9650\u539f\u5219</li> <li>\u9519\u8bef\u5904\u7406: \u5b8c\u5584\u7684\u5931\u8d25\u5904\u7406</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#mkdocs","title":"MkDocs\u914d\u7f6e","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_15","title":"\u6784\u5efa\u914d\u7f6e","text":"<pre><code># mkdocs.yml\nsite_name: \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u6587\u6863\ntheme:\n  name: material\n  language: zh\nplugins:\n  - search:\n      lang:\n        - zh\n        - en\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#_16","title":"\ud83d\udcca \u76d1\u63a7\u548c\u62a5\u544a","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_17","title":"\u6784\u5efa\u62a5\u544a","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_18","title":"\u81ea\u52a8\u751f\u6210\u62a5\u544a","text":"<ul> <li><code>docs-stats.json</code> - \u6587\u6863\u7edf\u8ba1\u4fe1\u606f</li> <li><code>build-report.json</code> - \u6784\u5efa\u62a5\u544a</li> <li><code>quality-report.json</code> - \u8d28\u91cf\u5206\u6790\u62a5\u544a</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_19","title":"\u62a5\u544a\u5185\u5bb9","text":"<pre><code>{\n  \"timestamp\": \"2025-10-23T15:00:00Z\",\n  \"total_files\": 25,\n  \"total_lines\": 5000,\n  \"directories\": 10,\n  \"git_commit\": \"abc123\",\n  \"git_branch\": \"main\"\n}\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#_20","title":"\u8d28\u91cf\u6307\u6807","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_21","title":"\u6784\u5efa\u6307\u6807","text":"<ul> <li>HTML\u9875\u9762\u6570\u91cf: \u751f\u6210\u7684HTML\u6587\u4ef6\u603b\u6570</li> <li>\u7ad9\u70b9\u5927\u5c0f: \u7ad9\u70b9\u5360\u7528\u7684\u78c1\u76d8\u7a7a\u95f4</li> <li>\u6784\u5efa\u65f6\u95f4: \u5b8c\u6574\u6784\u5efa\u7684\u8017\u65f6</li> <li>\u6210\u529f\u7387: \u6784\u5efa\u6210\u529f\u7684\u767e\u5206\u6bd4</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_22","title":"\u8d28\u91cf\u6307\u6807","text":"<ul> <li>\u5927\u578b\u9875\u9762: \u8d85\u8fc750KB\u7684HTML\u9875\u9762\u6570\u91cf</li> <li>\u56fe\u7247\u4f18\u5316: \u56fe\u7247\u6587\u4ef6\u6570\u91cf\u548c\u5927\u5c0f</li> <li>\u94fe\u63a5\u6709\u6548\u6027: \u65e0\u6548\u94fe\u63a5\u7684\u7edf\u8ba1</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_23","title":"\ud83d\ude80 \u90e8\u7f72\u6d41\u7a0b","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_24","title":"\u81ea\u52a8\u90e8\u7f72","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_25","title":"\u89e6\u53d1\u6761\u4ef6","text":"<ul> <li>main\u5206\u652f\u63a8\u9001: \u81ea\u52a8\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883</li> <li>develop\u5206\u652f\u63a8\u9001: \u81ea\u52a8\u90e8\u7f72\u5230\u9884\u53d1\u5e03\u73af\u5883</li> <li>\u624b\u52a8\u89e6\u53d1: \u53ef\u9009\u62e9\u73af\u5883\u548c\u53c2\u6570</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_26","title":"\u90e8\u7f72\u6b65\u9aa4","text":"<ol> <li>\u4ee3\u7801\u68c0\u51fa: \u83b7\u53d6\u6700\u65b0\u4ee3\u7801</li> <li>\u73af\u5883\u51c6\u5907: \u8bbe\u7f6ePython\u548c\u4f9d\u8d56</li> <li>\u6587\u6863\u6784\u5efa: \u751f\u6210\u9759\u6001\u7ad9\u70b9</li> <li>GitHub Pages\u914d\u7f6e: \u8bbe\u7f6e\u90e8\u7f72\u73af\u5883</li> <li>\u6587\u4ef6\u90e8\u7f72: \u63a8\u9001\u5230GitHub Pages</li> <li>\u8bbf\u95ee\u9a8c\u8bc1: \u786e\u8ba4\u90e8\u7f72\u6210\u529f</li> </ol>"},{"location":"GITHUB_ACTIONS_DOCS/#_27","title":"\u624b\u52a8\u90e8\u7f72","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_28","title":"\u672c\u5730\u90e8\u7f72","text":"<pre><code># 1. \u6784\u5efa\u6587\u6863\nmake docs-build\n\n# 2. \u672c\u5730\u9884\u89c8\nmake docs-serve\n\n# 3. \u624b\u52a8\u90e8\u7f72\nmkdocs gh-deploy --force\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#_29","title":"\u90e8\u7f72\u9a8c\u8bc1","text":"<pre><code># \u68c0\u67e5\u90e8\u7f72\u72b6\u6001\nmake docs-status\n\n# \u8bbf\u95ee\u7ad9\u70b9\nopen https://username.github.io/repository/\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#_30","title":"\ud83d\udd0d \u6545\u969c\u6392\u9664","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_31","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"GITHUB_ACTIONS_DOCS/#1","title":"1. \u6784\u5efa\u5931\u8d25","text":"<pre><code># \u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\npython -c \"import yaml; yaml.safe_load(open('mkdocs.yml'))\"\n\n# \u67e5\u770b\u8be6\u7ec6\u9519\u8bef\nmkdocs build --verbose\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#2_1","title":"2. \u90e8\u7f72\u5931\u8d25","text":"<pre><code># \u68c0\u67e5\u6743\u9650\ngh auth status\n\n# \u68c0\u67e5\u4ed3\u5e93\u8bbe\u7f6e\ngh repo view --json | jq '.pages'\n\n# \u624b\u52a8\u90e8\u7f72\u6d4b\u8bd5\nmkdocs gh-deploy --dry-run --force\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#3_1","title":"3. \u94fe\u63a5\u68c0\u67e5\u5931\u8d25","text":"<pre><code># \u8df3\u8fc7\u7279\u5b9a\u94fe\u63a5\necho \"skip_patterns:\" &gt;&gt; .mlc_config.json\necho \"- 'http://localhost'\" &gt;&gt; .mlc_config.json\n\n# \u91cd\u65b0\u68c0\u67e5\nmake docs-test-links\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#_32","title":"\u8c03\u8bd5\u6280\u5de7","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_33","title":"\u672c\u5730\u8c03\u8bd5","text":"<pre><code># \u542f\u7528\u8be6\u7ec6\u65e5\u5fd7\nmkdocs build --verbose\n\n# \u4e25\u683c\u6a21\u5f0f\u6784\u5efa\nmkdocs build --strict\n\n# \u68c0\u67e5\u7279\u5b9a\u6587\u4ef6\nmkdocs build --clean --quiet\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#github-actions_1","title":"GitHub Actions\u8c03\u8bd5","text":"<pre><code># \u6dfb\u52a0\u8c03\u8bd5\u6b65\u9aa4\n- name: Debug\n  run: |\n    echo \"Current directory: $(pwd)\"\n    echo \"Files in docs:\"\n    ls -la docs/\n    echo \"MkDocs version:\"\n    mkdocs --version\n</code></pre>"},{"location":"GITHUB_ACTIONS_DOCS/#_34","title":"\ud83d\udcc8 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_35","title":"\u6587\u6863\u7ba1\u7406","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_36","title":"\u7248\u672c\u63a7\u5236","text":"<ul> <li>\u6587\u6863\u53d8\u66f4\u81ea\u52a8\u89e6\u53d1\u6784\u5efa</li> <li>PR\u81ea\u52a8\u751f\u6210\u9884\u89c8</li> <li>\u7248\u672c\u6807\u7b7e\u81ea\u52a8\u90e8\u7f72</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_37","title":"\u8d28\u91cf\u4fdd\u8bc1","text":"<ul> <li>\u81ea\u52a8\u5316\u94fe\u63a5\u68c0\u67e5</li> <li>\u6784\u5efa\u524d\u9a8c\u8bc1</li> <li>\u8d28\u91cf\u62a5\u544a\u751f\u6210</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_38","title":"\u6027\u80fd\u4f18\u5316","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_39","title":"\u6784\u5efa\u4f18\u5316","text":"<ul> <li>\u7f13\u5b58\u4f9d\u8d56\u5b89\u88c5</li> <li>\u5e76\u884c\u5316\u6784\u5efa\u6b65\u9aa4</li> <li>\u4f18\u5316\u6784\u5efa\u65f6\u95f4</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_40","title":"\u7ad9\u70b9\u4f18\u5316","text":"<ul> <li>\u538b\u7f29\u9759\u6001\u8d44\u6e90</li> <li>\u542f\u7528CDN\u52a0\u901f</li> <li>\u4f18\u5316\u52a0\u8f7d\u6027\u80fd</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_41","title":"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90","text":""},{"location":"GITHUB_ACTIONS_DOCS/#_42","title":"\u6587\u6863\u94fe\u63a5","text":"<ul> <li>MkDocs\u5b98\u65b9\u6587\u6863: https://www.mkdocs.org/</li> <li>Material\u4e3b\u9898\u6587\u6863: https://squidfunk.github.io/mkdocs-material/</li> <li>GitHub Actions\u6587\u6863: https://docs.github.com/en/actions</li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_43","title":"\u914d\u7f6e\u53c2\u8003","text":"<ul> <li>\u5de5\u4f5c\u6d41\u914d\u7f6e: <code>.github/workflows/docs.yml</code></li> <li>MkDocs\u914d\u7f6e: <code>mkdocs.yml</code></li> <li>\u94fe\u63a5\u68c0\u67e5\u914d\u7f6e: <code>.mlc_config.json</code></li> </ul>"},{"location":"GITHUB_ACTIONS_DOCS/#_44","title":"\u5de5\u5177\u6587\u6863","text":"<ul> <li>Makefile\u5de5\u5177: \u53c2\u8003 <code>docs/MKDOCS_README.md</code></li> <li>GitHub Actions: \u53c2\u8003 GitHub\u5b98\u65b9\u6587\u6863</li> </ul> <p>\u6700\u540e\u66f4\u65b0: 2025-10-23 \u6587\u6863\u7248\u672c: v1.0 \u7ef4\u62a4\u8005: \u5f00\u53d1\u56e2\u961f</p>"},{"location":"INDEX/","title":"\ud83d\udcd1 INDEX","text":""},{"location":"INDEX/#ai-development-rules","title":"AI Development Rules","text":"<ul> <li>\ud83e\udd16 AI\u5f00\u53d1\u6587\u6863\u7ef4\u62a4\u89c4\u5219 - \u91cd\u8981\uff01AI\u5f00\u53d1\u5fc5\u987b\u9075\u5b88</li> </ul>"},{"location":"INDEX/#architecture","title":"Architecture","text":"<ul> <li>\u6570\u636e\u67b6\u6784\u4f18\u5316\u6539\u8fdb\u8bf4\u660e</li> <li>Caching Implementation Design</li> <li>\u6570\u636e\u5c42\u8bbe\u8ba1\u6587\u6863</li> <li>Retry Mechanism Design</li> <li>\u8db3\u7403\u6bd4\u8d5b\u7ed3\u679c\u9884\u6d4b\u7cfb\u7edf - \u7cfb\u7edf\u67b6\u6784\u6587\u6863</li> </ul>"},{"location":"INDEX/#how-to","title":"How-To","text":"<ul> <li>\ud83c\udfaf FootballPrediction \u5b8c\u6574\u7cfb\u7edf\u6f14\u793a</li> <li>\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c</li> <li>\ud83d\udccb \u90e8\u7f72\u95ee\u9898\u65e5\u5fd7</li> <li>\ud83c\udfd7\ufe0f Staging\u73af\u5883\u914d\u7f6e</li> <li>\ud83d\udcd6 Makefile \u4f7f\u7528\u6307\u5357</li> <li>\ud83d\ude80 \u5feb\u901f\u5f00\u59cb\u5de5\u5177\u6307\u5357</li> </ul>"},{"location":"INDEX/#reference","title":"Reference","text":"<ul> <li>\ud83d\udcda FootballPrediction API \u53c2\u8003\u6587\u6863</li> <li>\ud83d\udcd6 \u7efc\u5408API\u6587\u6863\u98ce\u683c\u6307\u5357</li> <li>\ud83d\uddc4\ufe0f \u6570\u636e\u5e93\u67b6\u6784</li> <li>\ud83d\udcbb \u5f00\u53d1\u6307\u5357</li> <li>\ud83d\udcca \u76d1\u63a7\u6307\u5357</li> <li>\ud83d\udcda \u672f\u8bed\u8868</li> </ul>"},{"location":"INDEX/#testing","title":"Testing","text":"<ul> <li>GitHub Actions CI Blockers Analysis Report</li> <li>CI \u4fee\u590d\u62a5\u544a</li> <li>\ud83d\udee1\ufe0f CI Guardian \u7cfb\u7edf\u4f7f\u7528\u6307\u5357</li> <li>CI \u8fc1\u79fb\u517c\u5bb9\u6027\u5f3a\u5316\u5b8c\u6210\u62a5\u544a</li> <li>Phase 5.3.1 \u8986\u76d6\u7387\u57fa\u7ebf\u62a5\u544a</li> <li>Coverage Progress Tracker</li> <li>\u8986\u76d6\u7387\u5faa\u73af\u52a0\u901f\u8ba1\u5212 - \u8fdb\u5ea6\u8bb0\u5f55</li> <li>Coverage Improvement Roadmap</li> <li>\ud83d\udd27 \u7279\u5f81\u5b58\u50a8\u6d4b\u8bd5\u4fee\u590d\u6307\u5357</li> <li>\u672c\u5730CI\u6a21\u62df\u6267\u884c\u62a5\u544a</li> <li>\ud83d\udccb \u8db3\u7403\u9884\u6d4b\u9879\u76ee\u6d4b\u8bd5\u8d28\u91cf\u770b\u677f</li> <li>\u6d4b\u8bd5\u9644\u5f55\u7d22\u5f15</li> <li>\ud83d\udccb \u6d4b\u8bd5\u5957\u4ef6\u4f18\u5316\u603b\u7ed3\u62a5\u544a</li> <li>\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u6d4b\u8bd5\u7b56\u7565\u603b\u89c8</li> <li>\ud83d\udccb \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u6d4b\u8bd5\u7b56\u7565\u6587\u6863</li> <li>CI/CD\u914d\u7f6e\u6307\u5357</li> <li>\u6d4b\u8bd5\u7528\u4f8b\u793a\u4f8b</li> <li>\u6d4b\u8bd5\u6570\u636e\u5de5\u5382</li> <li>\u6027\u80fd\u6d4b\u8bd5\u65b9\u6848</li> </ul>"},{"location":"INDEX/#data","title":"Data","text":"<ul> <li>\ud83d\udcca \u8db3\u7403\u6570\u636e\u91c7\u96c6\u914d\u7f6e\u6307\u5357</li> </ul>"},{"location":"INDEX/#ml","title":"ML","text":"<ul> <li>\ud83e\udd16 \u673a\u5668\u5b66\u4e60\u6a21\u578b\u6307\u5357</li> </ul>"},{"location":"INDEX/#ops","title":"Ops","text":"<ul> <li>\ud83d\udee1\ufe0f \u5931\u8d25\u4fdd\u62a4\u673a\u5236\u6f14\u793a</li> <li>\ud83d\udccb \u751f\u4ea7\u5c31\u7eea\u8ba1\u5212</li> <li>\ud83c\udfe5 MCP \u5065\u5eb7\u68c0\u67e5\u62a5\u544a</li> <li>\ud83d\udcca \u6570\u636e\u8d28\u91cf\u76d1\u63a7\u4e0e\u544a\u8b66\u673a\u5236</li> <li>\ud83d\udd0d \u76d1\u63a7\u7cfb\u7edf\u6587\u6863</li> <li>\ud83d\udcda \u8fd0\u7ef4\u624b\u518c\u7d22\u5f15</li> <li>\u6570\u636e\u8fc1\u79fb\u624b\u518c</li> <li>\u707e\u96be\u6062\u590d\u624b\u518c</li> </ul>"},{"location":"INDEX/#release","title":"Release","text":"<ul> <li>\ud83d\udccb \u53d1\u5e03\u6d41\u7a0b</li> </ul>"},{"location":"INDEX/#security","title":"Security","text":"<ul> <li>\ud83d\udd12 \u5b89\u5168\u4fee\u590d\u6458\u8981</li> <li>\u26a0\ufe0f \u5df2\u63a5\u53d7\u7684\u5b89\u5168\u98ce\u9669</li> </ul>"},{"location":"INDEX/#archive","title":"Archive","text":"<ul> <li>Legacy\u6587\u6863: \u5386\u53f2\u6587\u6863\u5df2\u5f52\u6863\u81f3 <code>_reports/archive/legacy_archive_2025-10-04.tar.gz</code> (70\u4e2a\u6587\u4ef6)</li> <li>\u90e8\u7f72\u6587\u6863: \u65e7\u7248\u672c\u90e8\u7f72\u6587\u6863\u5df2\u5f52\u6863\u81f3 <code>_reports/archive/2025-09/deployment/</code></li> <li>API\u6587\u6863: \u65e7\u7248\u672cAPI\u6587\u6863\u5df2\u5f52\u6863\u81f3 <code>_reports/archive/2025-09/api/</code></li> <li>\u4e34\u65f6\u62a5\u544a: \u4fee\u590d\u62a5\u544a\u5df2\u5f52\u6863\u81f3 <code>_reports/archive/2025-09/cleanup/</code></li> </ul>"},{"location":"INDEX/#reports","title":"Reports","text":"<ul> <li>\ud83d\udcda Docs Guard \u4fee\u590d\u8ba1\u5212 - Phase 2 (\u5b64\u513f\u6587\u6863\u5904\u7406 Batch 4 Final)</li> <li>\ud83d\udcda Final Documentation Health Report</li> <li>\ud83c\udf89 Project Retrospective Report</li> </ul>"},{"location":"INDEX/#_1","title":"\ud83d\udd17 \u5feb\u901f\u5bfc\u822a","text":""},{"location":"INDEX/#_2","title":"\ud83d\ude80 \u65b0\u7528\u6237\u5165\u95e8","text":"<ol> <li>AI\u5f00\u53d1\u6587\u6863\u7ef4\u62a4\u89c4\u5219 - AI\u5f00\u53d1\u5fc5\u8bfb</li> <li>\ud83d\ude80 \u5feb\u901f\u5f00\u59cb\u5de5\u5177\u6307\u5357 - 5\u5206\u949f\u4e0a\u624b</li> <li>\ud83c\udfaf FootballPrediction \u5b8c\u6574\u7cfb\u7edf\u6f14\u793a - \u529f\u80fd\u6f14\u793a</li> <li>\ud83d\udcbb \u5f00\u53d1\u6307\u5357 - \u5f00\u53d1\u73af\u5883\u642d\u5efa</li> </ol>"},{"location":"INDEX/#_3","title":"\ud83d\udee0\ufe0f \u5f00\u53d1\u8005\u6838\u5fc3\u6587\u6863","text":"<ul> <li>CLAUDE.md - AI\u8f85\u52a9\u5f00\u53d1\u6307\u5bfc\uff08\u2b50 \u6838\u5fc3\u6587\u6863\uff09</li> <li>\u7cfb\u7edf\u67b6\u6784\u6587\u6863 - \u7cfb\u7edf\u8bbe\u8ba1\u603b\u89c8</li> <li>\ud83d\udcda API \u53c2\u8003\u6587\u6863 - \u63a5\u53e3\u6587\u6863</li> <li>\ud83d\uddc4\ufe0f \u6570\u636e\u5e93\u67b6\u6784 - \u6570\u636e\u5c42\u8bbe\u8ba1</li> <li>\ud83e\uddea \u6d4b\u8bd5\u7b56\u7565\u6587\u6863 - \u6d4b\u8bd5\u6307\u5357</li> </ul>"},{"location":"INDEX/#_4","title":"\ud83d\ude80 \u90e8\u7f72\u548c\u8fd0\u7ef4","text":"<ul> <li>\ud83d\udccb \u751f\u4ea7\u5c31\u7eea\u8ba1\u5212 - \u90e8\u7f72\u6307\u5357</li> <li>\ud83d\udcca \u76d1\u63a7\u7cfb\u7edf - \u76d1\u63a7\u914d\u7f6e</li> <li>\ud83d\udcda \u8fd0\u7ef4\u624b\u518c\u7d22\u5f15 - \u8fd0\u7ef4\u64cd\u4f5c</li> <li>\ud83c\udfd7\ufe0f Staging\u73af\u5883\u914d\u7f6e - \u6d4b\u8bd5\u73af\u5883</li> </ul>"},{"location":"INDEX/#_5","title":"\ud83d\udcda \u5b66\u4e60\u548c\u53c2\u8003","text":"<ul> <li>\ud83d\udcda \u672f\u8bed\u8868 - \u6982\u5ff5\u5b9a\u4e49</li> <li>\ud83d\udcd6 Makefile \u4f7f\u7528\u6307\u5357 - \u5de5\u5177\u547d\u4ee4</li> <li>\ud83e\udd16 \u673a\u5668\u5b66\u4e60\u6a21\u578b\u6307\u5357 - ML\u76f8\u5173</li> <li>\ud83d\udcca \u8db3\u7403\u6570\u636e\u91c7\u96c6\u914d\u7f6e\u6307\u5357 - \u6570\u636e\u5904\u7406</li> </ul>"},{"location":"INDEX/#_6","title":"\ud83d\udccb \u9879\u76ee\u7ba1\u7406","text":"<ul> <li>\ud83d\udccb \u53d1\u5e03\u6d41\u7a0b - \u7248\u672c\u53d1\u5e03</li> <li>\ud83d\udd12 \u5b89\u5168\u4fee\u590d\u6458\u8981 - \u5b89\u5168\u76f8\u5173</li> <li>\ud83d\udccb \u8db3\u7403\u9884\u6d4b\u9879\u76ee\u6d4b\u8bd5\u8d28\u91cf\u770b\u677f - \u8d28\u91cf\u76d1\u63a7</li> </ul> <p>\ud83d\udca1 \u63d0\u793a: \u5efa\u8bae\u65b0\u7528\u6237\u6309\"\u65b0\u7528\u6237\u5165\u95e8\"\u987a\u5e8f\u9605\u8bfb\uff0c\u5f00\u53d1\u8005\u53ef\u91cd\u70b9\u5173\u6ce8\"\u5f00\u53d1\u8005\u6838\u5fc3\u6587\u6863\"\u3002</p>"},{"location":"INDEX_MINIMAL/","title":"\u9879\u76ee\u6587\u6863\u7d22\u5f15","text":""},{"location":"INDEX_MINIMAL/#_2","title":"\u6838\u5fc3\u6587\u6863","text":"<ul> <li>\u9879\u76ee\u6982\u8ff0</li> <li>\u5feb\u901f\u5f00\u59cb</li> <li>\u67b6\u6784\u6587\u6863</li> </ul>"},{"location":"INDEX_MINIMAL/#_3","title":"\u5f00\u53d1\u6307\u5357","text":"<ul> <li>\u6d4b\u8bd5\u6307\u5357</li> <li>\u4ee3\u7801\u89c4\u8303</li> <li>\u90e8\u7f72\u6307\u5357</li> </ul>"},{"location":"INDEX_MINIMAL/#_4","title":"\u62a5\u544a\u5f52\u6863","text":"<ul> <li>\u6d4b\u8bd5\u62a5\u544a</li> <li>\u8986\u76d6\u7387\u62a5\u544a</li> </ul> <p>\u6b64\u6587\u6863\u7531\u81ea\u52a8\u4f18\u5316\u811a\u672c\u751f\u6210</p>"},{"location":"MKDOCS_README/","title":"\ud83d\udcda MkDocs \u6587\u6863\u7cfb\u7edf\u4f7f\u7528\u6307\u5357","text":""},{"location":"MKDOCS_README/#_1","title":"\ud83c\udfaf \u6982\u8ff0","text":"<p>\u672c\u9879\u76ee\u5df2\u6210\u529f\u90e8\u7f72\u4e86 MkDocs + Material for MkDocs \u9759\u6001\u7ad9\u70b9\u751f\u6210\u5668\uff0c\u4e3a\u9879\u76ee\u63d0\u4f9b\u73b0\u4ee3\u5316\u7684\u6587\u6863\u6d4f\u89c8\u4f53\u9a8c\u3002</p>"},{"location":"MKDOCS_README/#_2","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":""},{"location":"MKDOCS_README/#1","title":"1. \u5b89\u88c5\u4f9d\u8d56","text":"<pre><code># \u5b89\u88c5MkDocs\u548cMaterial\u4e3b\u9898\nmake docs-install\n\n# \u6216\u8005\u4f7f\u7528pip\u76f4\u63a5\u5b89\u88c5\npip install mkdocs mkdocs-material\n</code></pre>"},{"location":"MKDOCS_README/#2","title":"2. \u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668","text":"<pre><code># \u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668 (\u9ed8\u8ba4\u7aef\u53e38080)\nmake docs-serve\n\n# \u6216\u8005\u4f7f\u7528mkdocs\u547d\u4ee4\nmkdocs serve --dev-addr=0.0.0.0:8080\n</code></pre> <p>\u8bbf\u95ee http://localhost:8080 \u67e5\u770b\u6587\u6863\u3002</p>"},{"location":"MKDOCS_README/#3","title":"3. \u6784\u5efa\u9759\u6001\u7ad9\u70b9","text":"<pre><code># \u6784\u5efa\u6587\u6863\u7ad9\u70b9\nmake docs-build\n\n# \u67e5\u770b\u6784\u5efa\u4fe1\u606f\nmake docs-info\n</code></pre> <p>\u6784\u5efa\u540e\u7684\u6587\u4ef6\u4f4d\u4e8e <code>site/</code> \u76ee\u5f55\u3002</p>"},{"location":"MKDOCS_README/#_3","title":"\ud83d\udccb \u53ef\u7528\u547d\u4ee4","text":""},{"location":"MKDOCS_README/#_4","title":"\u57fa\u7840\u547d\u4ee4","text":"\u547d\u4ee4 \u63cf\u8ff0 <code>make docs-install</code> \u5b89\u88c5MkDocs\u548cMaterial\u4e3b\u9898 <code>make docs-init</code> \u521d\u59cb\u5316MkDocs\u914d\u7f6e <code>make docs-serve</code> \u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668 <code>make docs-build</code> \u6784\u5efa\u9759\u6001\u7ad9\u70b9 <code>make docs-deploy</code> \u90e8\u7f72\u5230GitHub Pages <code>make docs-clean</code> \u6e05\u7406\u6784\u5efa\u6587\u4ef6"},{"location":"MKDOCS_README/#_5","title":"\u7ba1\u7406\u547d\u4ee4","text":"\u547d\u4ee4 \u63cf\u8ff0 <code>make docs-validate</code> \u9a8c\u8bc1\u914d\u7f6e\u6587\u4ef6 <code>make docs-check</code> \u68c0\u67e5\u6587\u6863\u5065\u5eb7\u72b6\u6001 <code>make docs-info</code> \u663e\u793a\u7ad9\u70b9\u4fe1\u606f"},{"location":"MKDOCS_README/#_6","title":"\u2699\ufe0f \u914d\u7f6e\u8bf4\u660e","text":""},{"location":"MKDOCS_README/#_7","title":"\u4e3b\u8981\u914d\u7f6e\u6587\u4ef6","text":"<ul> <li><code>mkdocs.yml</code> - \u4e3b\u914d\u7f6e\u6587\u4ef6</li> <li><code>docs/overrides/</code> - \u81ea\u5b9a\u4e49\u6a21\u677f\u548c\u6837\u5f0f</li> <li><code>docs/assets/</code> - \u9759\u6001\u8d44\u6e90\u6587\u4ef6</li> </ul>"},{"location":"MKDOCS_README/#_8","title":"\u5bfc\u822a\u7ed3\u6784","text":"<p>\u6587\u6863\u5bfc\u822a\u5728 <code>mkdocs.yml</code> \u4e2d\u7684 <code>nav</code> \u90e8\u5206\u5b9a\u4e49\uff1a</p> <pre><code>nav:\n  - \u9996\u9875: index.md\n  - \u5feb\u901f\u5f00\u59cb:\n    - \u5feb\u901f\u5165\u95e8: how-to/QUICKSTART_TOOLS.md\n    - \u5b8c\u6574\u6f14\u793a: how-to/COMPLETE_DEMO.md\n  - \u67b6\u6784\u8bbe\u8ba1:\n    - \u7cfb\u7edf\u67b6\u6784: architecture/ARCHITECTURE.md\n    - \u6570\u636e\u5e93\u8bbe\u8ba1: architecture/DATABASE_DESIGN.md\n</code></pre>"},{"location":"MKDOCS_README/#_9","title":"\ud83c\udfa8 \u4e3b\u9898\u7279\u6027","text":""},{"location":"MKDOCS_README/#_10","title":"\u5df2\u542f\u7528\u529f\u80fd","text":"<ul> <li>\ud83c\udf19 \u6df1\u8272\u6a21\u5f0f - \u81ea\u52a8/\u6d45\u8272/\u6df1\u8272\u4e3b\u9898\u5207\u6362</li> <li>\ud83d\udd0d \u641c\u7d22\u529f\u80fd - \u4e2d\u82f1\u6587\u641c\u7d22\u652f\u6301</li> <li>\ud83d\udcf1 \u54cd\u5e94\u5f0f\u8bbe\u8ba1 - \u79fb\u52a8\u7aef\u53cb\u597d</li> <li>\ud83d\udcd6 \u6807\u7b7e\u9875 - \u5185\u5bb9\u5206\u7ec4\u663e\u793a</li> <li>\ud83d\udd17 \u667a\u80fd\u951a\u70b9 - \u81ea\u52a8\u751f\u6210\u76ee\u5f55</li> <li>\ud83d\udcca \u4ee3\u7801\u9ad8\u4eae - \u8bed\u6cd5\u9ad8\u4eae\u548c\u590d\u5236</li> <li>\ud83d\udcf1 \u5bfc\u822a\u96c6\u6210 - \u4fa7\u8fb9\u680f\u5bfc\u822a</li> <li>\u26a1 \u5373\u65f6\u52a0\u8f7d - \u5feb\u901f\u9875\u9762\u5207\u6362</li> </ul>"},{"location":"MKDOCS_README/#_11","title":"\u81ea\u5b9a\u4e49\u589e\u5f3a","text":"<ul> <li>\u4e2d\u6587\u5b57\u4f53\u4f18\u5316 - \u66f4\u597d\u7684\u4e2d\u6587\u663e\u793a\u6548\u679c</li> <li>\u8fd4\u56de\u9876\u90e8\u6309\u94ae - \u4fbf\u6377\u7684\u9875\u9762\u5bfc\u822a</li> <li>\u9605\u8bfb\u8fdb\u5ea6\u6761 - \u663e\u793a\u9605\u8bfb\u8fdb\u5ea6</li> <li>\u5916\u90e8\u94fe\u63a5\u6807\u8bc6 - \u533a\u5206\u5185\u90e8\u548c\u5916\u90e8\u94fe\u63a5</li> <li>\u4ee3\u7801\u5757\u589e\u5f3a - \u8bed\u8a00\u6807\u8bc6\u548c\u590d\u5236\u529f\u80fd</li> <li>\u952e\u76d8\u5feb\u6377\u952e - Ctrl+K \u641c\u7d22\uff0cESC \u5173\u95ed</li> </ul>"},{"location":"MKDOCS_README/#_12","title":"\ud83d\udcdd \u6587\u6863\u7f16\u5199\u89c4\u8303","text":""},{"location":"MKDOCS_README/#markdown","title":"Markdown \u6269\u5c55","text":"<p>\u652f\u6301\u4ee5\u4e0bMarkdown\u6269\u5c55\uff1a</p> <pre><code># \u6807\u9898\n## \u4e8c\u7ea7\u6807\u9898\n\n### \u4ee3\u7801\u5757\n```python\nprint(\"Hello, World!\")\n</code></pre>"},{"location":"MKDOCS_README/#_13","title":"\u8868\u683c","text":"\u52171 \u52172 \u52173 \u6570\u636e1 \u6570\u636e2 \u6570\u636e3"},{"location":"MKDOCS_README/#_14","title":"\u63d0\u793a\u6846","text":"<p>\u6ce8\u610f</p> <p>\u8fd9\u662f\u4e00\u4e2a\u6ce8\u610f\u63d0\u793a\u6846</p> <p>\u8b66\u544a</p> <p>\u8fd9\u662f\u4e00\u4e2a\u8b66\u544a\u63d0\u793a\u6846</p>"},{"location":"MKDOCS_README/#_15","title":"\u6807\u7b7e\u9875","text":"Python <p>Python \u4ee3\u7801\u793a\u4f8b</p> JavaScript <p>JavaScript \u4ee3\u7801\u793a\u4f8b</p> <pre><code>### \u6587\u6863\u94fe\u63a5\n\n\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u94fe\u63a5\u5176\u4ed6\u6587\u6863\uff1a\n\n```markdown\n[\u7cfb\u7edf\u67b6\u6784](architecture/ARCHITECTURE.md)\n[API\u6587\u6863](reference/API_REFERENCE.md)\n</code></pre>"},{"location":"MKDOCS_README/#_16","title":"\u56fe\u7247\u548c\u8d44\u6e90","text":"<p>\u5c06\u56fe\u7247\u653e\u5728 <code>docs/overrides/assets/</code> \u76ee\u5f55\uff1a</p> <pre><code>![\u67b6\u6784\u56fe](assets/architecture-diagram.png)\n</code></pre>"},{"location":"MKDOCS_README/#_17","title":"\ud83d\udd27 \u9ad8\u7ea7\u529f\u80fd","text":""},{"location":"MKDOCS_README/#_18","title":"\u641c\u7d22\u914d\u7f6e","text":"<p>\u641c\u7d22\u529f\u80fd\u5df2\u914d\u7f6e\u4e2d\u6587\u652f\u6301\uff1a</p> <ul> <li>\u4e2d\u6587\u5206\u8bcd</li> <li>\u62fc\u97f3\u641c\u7d22</li> <li>\u641c\u7d22\u5efa\u8bae</li> <li>\u641c\u7d22\u9ad8\u4eae</li> </ul>"},{"location":"MKDOCS_README/#_19","title":"\u4e3b\u9898\u5b9a\u5236","text":"<p>\u81ea\u5b9a\u4e49\u6837\u5f0f\u6587\u4ef6\uff1a<code>docs/overrides/assets/extra.css</code></p> <p>\u81ea\u5b9a\u4e49\u811a\u672c\u6587\u4ef6\uff1a<code>docs/overrides/assets/extra.js</code></p>"},{"location":"MKDOCS_README/#_20","title":"\u7248\u672c\u63a7\u5236","text":"<p>\u652f\u6301\u591a\u7248\u672c\u6587\u6863\u7ba1\u7406\uff08\u9700\u8981\u914d\u7f6emike\u63d2\u4ef6\uff09\uff1a</p> <pre><code>extra:\n  version:\n    default: stable\n    provider: mike\n</code></pre>"},{"location":"MKDOCS_README/#_21","title":"\ud83d\udcca \u6027\u80fd\u4f18\u5316","text":""},{"location":"MKDOCS_README/#_22","title":"\u81ea\u52a8\u4f18\u5316","text":"<ul> <li>\u4ee3\u7801\u538b\u7f29 - HTML/CSS/JS\u538b\u7f29</li> <li>\u8d44\u6e90\u4f18\u5316 - \u56fe\u7247\u61d2\u52a0\u8f7d</li> <li>\u7f13\u5b58\u7b56\u7565 - \u6d4f\u89c8\u5668\u7f13\u5b58\u914d\u7f6e</li> <li>\u641c\u7d22\u4f18\u5316 - \u7d22\u5f15\u9884\u6784\u5efa</li> </ul>"},{"location":"MKDOCS_README/#_23","title":"\u76d1\u63a7\u6307\u6807","text":"<ul> <li>\u6784\u5efa\u65f6\u95f4\uff1a&lt; 30\u79d2</li> <li>\u7ad9\u70b9\u5927\u5c0f\uff1a&lt; 10MB</li> <li>\u9875\u9762\u52a0\u8f7d\uff1a&lt; 2\u79d2</li> <li>\u641c\u7d22\u54cd\u5e94\uff1a&lt; 200ms</li> </ul>"},{"location":"MKDOCS_README/#_24","title":"\ud83d\ude80 \u90e8\u7f72\u9009\u9879","text":""},{"location":"MKDOCS_README/#github-pages","title":"GitHub Pages","text":"<pre><code># \u90e8\u7f72\u5230GitHub Pages\nmake docs-deploy\n\n# \u624b\u52a8\u90e8\u7f72\nmkdocs gh-deploy --force\n</code></pre>"},{"location":"MKDOCS_README/#_25","title":"\u81ea\u5b9a\u4e49\u670d\u52a1\u5668","text":"<pre><code># \u6784\u5efa\u9759\u6001\u6587\u4ef6\nmake docs-build\n\n# \u90e8\u7f72\u5230\u670d\u52a1\u5668\nrsync -av site/ user@server:/var/www/html/\n</code></pre>"},{"location":"MKDOCS_README/#docker","title":"Docker\u90e8\u7f72","text":"<pre><code>FROM squidfunk/mkdocs-material:latest\nCOPY . /docs\nWORKDIR /docs\nEXPOSE 8000\nCMD [\"mkdocs\", \"serve\", \"--dev-addr=0.0.0.0:8000\"]\n</code></pre>"},{"location":"MKDOCS_README/#_26","title":"\ud83d\udd0d \u6545\u969c\u6392\u9664","text":""},{"location":"MKDOCS_README/#_27","title":"\u5e38\u89c1\u95ee\u9898","text":"<ol> <li> <p>\u7aef\u53e3\u51b2\u7a81 <pre><code># \u4f7f\u7528\u4e0d\u540c\u7aef\u53e3\nmkdocs serve --dev-addr=0.0.0.0:9000\n</code></pre></p> </li> <li> <p>\u6784\u5efa\u5931\u8d25 <pre><code># \u68c0\u67e5\u914d\u7f6e\nmake docs-validate\n\n# \u67e5\u770b\u8be6\u7ec6\u9519\u8bef\nmkdocs build --verbose\n</code></pre></p> </li> <li> <p>\u641c\u7d22\u4e0d\u5de5\u4f5c <pre><code># \u91cd\u5efa\u641c\u7d22\u7d22\u5f15\nmake docs-clean\nmake docs-build\n</code></pre></p> </li> </ol>"},{"location":"MKDOCS_README/#_28","title":"\u8c03\u8bd5\u6a21\u5f0f","text":"<pre><code># \u542f\u7528\u8be6\u7ec6\u65e5\u5fd7\nmkdocs serve --verbose\n\n# \u542f\u7528\u4e25\u683c\u6a21\u5f0f\nmkdocs build --strict\n</code></pre>"},{"location":"MKDOCS_README/#_29","title":"\ud83d\udcc8 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"MKDOCS_README/#_30","title":"\u6587\u6863\u7ec4\u7ec7","text":"<ul> <li>\u6309\u529f\u80fd\u6a21\u5757\u7ec4\u7ec7\u6587\u6863</li> <li>\u4f7f\u7528\u6e05\u6670\u7684\u76ee\u5f55\u7ed3\u6784</li> <li>\u4fdd\u6301\u6587\u6863\u7b80\u6d01\u660e\u4e86</li> <li>\u5b9a\u671f\u66f4\u65b0\u5185\u5bb9</li> </ul>"},{"location":"MKDOCS_README/#_31","title":"\u5185\u5bb9\u7f16\u5199","text":"<ul> <li>\u4f7f\u7528\u8bed\u4e49\u5316\u7684\u6807\u9898</li> <li>\u63d0\u4f9b\u4ee3\u7801\u793a\u4f8b</li> <li>\u6dfb\u52a0\u56fe\u8868\u548c\u622a\u56fe</li> <li>\u5305\u542b\u76f8\u5173\u6587\u6863\u94fe\u63a5</li> </ul>"},{"location":"MKDOCS_README/#_32","title":"\u7ef4\u62a4\u6d41\u7a0b","text":"<ol> <li>\u5b9a\u671f\u68c0\u67e5\u94fe\u63a5\u6709\u6548\u6027</li> <li>\u66f4\u65b0\u8fc7\u65f6\u5185\u5bb9</li> <li>\u4f18\u5316\u641c\u7d22\u4f53\u9a8c</li> <li>\u6536\u96c6\u7528\u6237\u53cd\u9988</li> </ol>"},{"location":"MKDOCS_README/#_33","title":"\ud83e\udd1d \u8d21\u732e\u6307\u5357","text":""},{"location":"MKDOCS_README/#_34","title":"\u6dfb\u52a0\u65b0\u6587\u6863","text":"<ol> <li>\u5728 <code>docs/</code> \u76ee\u5f55\u521b\u5efaMarkdown\u6587\u4ef6</li> <li>\u5728 <code>mkdocs.yml</code> \u7684 <code>nav</code> \u4e2d\u6dfb\u52a0\u94fe\u63a5</li> <li>\u672c\u5730\u6d4b\u8bd5\uff1a<code>make docs-serve</code></li> <li>\u63d0\u4ea4Pull Request</li> </ol>"},{"location":"MKDOCS_README/#_35","title":"\u6539\u8fdb\u4e3b\u9898","text":"<ol> <li>\u7f16\u8f91 <code>docs/overrides/assets/extra.css</code></li> <li>\u7f16\u8f91 <code>docs/overrides/assets/extra.js</code></li> <li>\u6d4b\u8bd5\u66f4\u6539\u6548\u679c</li> <li>\u63d0\u4ea4\u6539\u8fdb</li> </ol>"},{"location":"MKDOCS_README/#_36","title":"\ud83d\udcde \u83b7\u53d6\u5e2e\u52a9","text":"<ul> <li>\u5b98\u65b9\u6587\u6863: https://www.mkdocs.org/</li> <li>Material\u4e3b\u9898: https://squidfunk.github.io/mkdocs-material/</li> <li>\u9879\u76eeIssues: \u5728GitHub\u63d0\u4ea4\u95ee\u9898</li> <li>\u6280\u672f\u652f\u6301: \u8054\u7cfb\u5f00\u53d1\u56e2\u961f</li> </ul> <p>\u6700\u540e\u66f4\u65b0: 2025-10-23 \u6587\u6863\u7248\u672c: v1.0 \u7ef4\u62a4\u8005: \u5f00\u53d1\u56e2\u961f</p>"},{"location":"TDD_CULTURE_SUMMARY/","title":"TDD\u6587\u5316\u5efa\u8bbe\u6210\u679c\u603b\u7ed3","text":""},{"location":"TDD_CULTURE_SUMMARY/#_1","title":"\ud83d\udccb \u9879\u76ee\u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u603b\u7ed3\u4e86FootballPrediction\u9879\u76ee\u5728\u5efa\u7acbTDD\uff08\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1\uff09\u6587\u5316\u65b9\u9762\u6240\u5b8c\u6210\u7684\u5de5\u4f5c\u3002\u901a\u8fc7\u4e00\u7cfb\u5217\u7cfb\u7edf\u6027\u63aa\u65bd\uff0c\u6211\u4eec\u6210\u529f\u5730\u5efa\u7acb\u4e86\u5b8c\u6574\u7684TDD\u5b9e\u8df5\u4f53\u7cfb\u3002</p> <p>\u65f6\u95f4\u5468\u671f\uff1a2024\u5e7410\u6708 \u4e3b\u8981\u76ee\u6807\uff1a\u5efa\u7acb\u56e2\u961fTDD\u6587\u5316\uff0c\u63d0\u5347\u6d4b\u8bd5\u8986\u76d6\u7387\uff0c\u6539\u8fdb\u4ee3\u7801\u8d28\u91cf</p>"},{"location":"TDD_CULTURE_SUMMARY/#_2","title":"\u2728 \u4e3b\u8981\u6210\u679c","text":""},{"location":"TDD_CULTURE_SUMMARY/#1","title":"1. \u57f9\u8bad\u6750\u6599\u5efa\u8bbe","text":""},{"location":"TDD_CULTURE_SUMMARY/#_3","title":"\u6838\u5fc3\u6587\u6863","text":"<ul> <li>TDD_QUICK_START.md - 5\u5206\u949fTDD\u5feb\u901f\u5165\u95e8\u6307\u5357</li> <li>\u7b80\u6d01\u660e\u4e86\u7684TDD\u4ecb\u7ecd</li> <li>\u5b9e\u7528\u7684\u8ba1\u7b97\u5668\u793a\u4f8b</li> <li>\u5e38\u89c1\u95ee\u9898\u89e3\u7b54</li> <li> <p>\u5b9e\u8df5\u4efb\u52a1\u5efa\u8bae</p> </li> <li> <p>TDD_KNOWLEDGE_BASE.md - TDD\u77e5\u8bc6\u5e93</p> </li> <li>\u5b8c\u6574\u7684\u6982\u5ff5\u89e3\u91ca</li> <li>\u6700\u4f73\u5b9e\u8df5\u6307\u5357</li> <li>\u5e38\u89c1\u9677\u9631\u4e0e\u89e3\u51b3\u65b9\u6848</li> <li>\u9ad8\u7ea7\u6280\u5de7\u548c\u5de5\u5177\u94fe\u63a8\u8350</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#_4","title":"\u57f9\u8bad\u5de5\u5177","text":"<ul> <li>tdd_training_session.py - TDD\u57f9\u8bad\u5de5\u4f5c\u574a\u751f\u6210\u5668</li> <li>\u81ea\u52a8\u751f\u6210\u57f9\u8bad\u6750\u6599</li> <li>\u5305\u542b\u591a\u4e2a\u96be\u5ea6\u7ea7\u522b\u7684\u7ec3\u4e60</li> <li>\u63d0\u4f9b\u5b8c\u6574\u7684\u57f9\u8bad\u8bae\u7a0b</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#2","title":"2. \u5b9e\u8df5\u793a\u8303","text":""},{"location":"TDD_CULTURE_SUMMARY/#tdd_1","title":"\u65b0\u529f\u80fdTDD\u5b9e\u8df5","text":"<ul> <li>\u6a21\u5757\uff1asrc/utils/predictions.py</li> <li>\u6d4b\u8bd5\u6587\u4ef6\uff1atests/unit/utils/test_predictions_tdd.py</li> <li>\u6210\u679c\uff1a93%\u7684\u6d4b\u8bd5\u8986\u76d6\u7387</li> <li>\u7279\u8272\uff1a</li> <li>\u4e25\u683c\u9075\u5faaTDD\u6d41\u7a0b</li> <li>\u5305\u542b13\u4e2a\u5168\u9762\u7684\u6d4b\u8bd5\u7528\u4f8b</li> <li>\u6db5\u76d6\u6b63\u5e38\u3001\u8fb9\u754c\u3001\u9519\u8bef\u60c5\u51b5</li> <li>\u6027\u80fd\u6d4b\u8bd5\u548c\u96c6\u6210\u6d4b\u8bd5</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#3","title":"3. \u76d1\u63a7\u4f53\u7cfb\u5efa\u8bbe","text":""},{"location":"TDD_CULTURE_SUMMARY/#_5","title":"\u8986\u76d6\u7387\u76d1\u63a7","text":"<ul> <li>simple_coverage_monitor.py - \u7b80\u5316\u7248\u76d1\u63a7\u5de5\u5177</li> <li>monitor_coverage.py - \u5b8c\u6574\u7248\u76d1\u63a7\u7cfb\u7edf</li> <li>\u5b9e\u65f6\u8ddf\u8e2a\u8986\u76d6\u7387\u53d8\u5316</li> <li>\u751f\u6210\u8d8b\u52bf\u62a5\u544a</li> <li>HTML\u53ef\u89c6\u5316\u9762\u677f</li> <li>\u5386\u53f2\u6570\u636e\u4fdd\u5b58</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#_6","title":"\u6539\u8fdb\u8ddf\u8e2a","text":"<ul> <li>tdd_improvement_tracker.py - \u667a\u80fd\u6539\u8fdb\u8ddf\u8e2a\u5668</li> <li>\u81ea\u52a8\u5206\u6790TDD\u72b6\u6001</li> <li>\u751f\u6210\u4e2a\u6027\u5316\u6539\u8fdb\u5efa\u8bae</li> <li>\u521b\u5efa\u6539\u8fdb\u8ba1\u5212</li> <li>\u751f\u6210\u8be6\u7ec6\u62a5\u544a</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#4","title":"4. \u6d41\u7a0b\u89c4\u8303","text":""},{"location":"TDD_CULTURE_SUMMARY/#_7","title":"\u4ee3\u7801\u5ba1\u67e5","text":"<ul> <li>TDD_CODE_REVIEW_CHECKLIST.md - \u4ee3\u7801\u5ba1\u67e5\u6e05\u5355</li> <li>\u5b8c\u6574\u7684\u68c0\u67e5\u9879\u5217\u8868</li> <li>\u8bc4\u5206\u7cfb\u7edf</li> <li>\u5b9e\u4f8b\u5c55\u793a</li> <li>\u6539\u8fdb\u63aa\u65bd\u5efa\u8bae</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#_8","title":"\u5206\u4eab\u673a\u5236","text":"<ul> <li>TDD_SHARING_SESSION_GUIDE.md - \u5206\u4eab\u4f1a\u7ec4\u7ec7\u6307\u5357</li> <li>\u8be6\u7ec6\u7684\u4f1a\u8bae\u7ed3\u6784</li> <li>\u4e3b\u9898\u8f6e\u6362\u8868</li> <li>\u6548\u679c\u8bc4\u4f30\u65b9\u6cd5</li> <li>\u6210\u529f\u4e3e\u529e\u6280\u5de7</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#_9","title":"\u6f14\u793a\u5de5\u5177","text":"<ul> <li>tdd_presentation_generator.py - \u6f14\u793a\u6587\u7a3f\u751f\u6210\u5668</li> <li>\u652f\u6301\u591a\u79cd\u6a21\u677f\u7c7b\u578b</li> <li>\u5feb\u901f\u751f\u6210\u5206\u4eab\u6750\u6599</li> <li>\u8bae\u7a0b\u6a21\u677f</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#5","title":"5. \u6301\u7eed\u6539\u8fdb","text":""},{"location":"TDD_CULTURE_SUMMARY/#_10","title":"\u5468\u62a5\u673a\u5236","text":"<ul> <li>TDD_WEEKLY_REPORT_TEMPLATE.md - \u5468\u62a5\u6a21\u677f</li> <li>\u5173\u952e\u6307\u6807\u8ddf\u8e2a</li> <li>\u7ecf\u9a8c\u603b\u7ed3</li> <li>\u6539\u8fdb\u8ba1\u5212</li> <li>\u6570\u636e\u53ef\u89c6\u5316</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#cicd","title":"CI/CD\u96c6\u6210","text":"<ul> <li>tdd-check.yml - GitHub Actions\u5de5\u4f5c\u6d41</li> <li>\u81ea\u52a8\u68c0\u67e5TDD\u9075\u5faa\u60c5\u51b5</li> <li>\u9a8c\u8bc1\u6d4b\u8bd5\u8986\u76d6\u7387</li> <li>PR\u81ea\u52a8\u8bc4\u8bba</li> <li>\u8d28\u91cf\u95e8\u7981</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#_11","title":"\ud83d\udcca \u6210\u679c\u6570\u636e","text":""},{"location":"TDD_CULTURE_SUMMARY/#_12","title":"\u6d4b\u8bd5\u8986\u76d6\u7387","text":"<ul> <li>predictions\u6a21\u5757\uff1a93%\uff08\u65b0\u529f\u80fdTDD\u5b9e\u8df5\uff09</li> <li>helpers\u6a21\u5757\uff1a100%</li> <li>\u603b\u4f53\u8986\u76d6\u7387\uff1a24.2%\uff08\u76ee\u680750%\uff09</li> <li>\u7f3a\u5931\u884c\u6570\uff1a599\u884c</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#_13","title":"\u6d4b\u8bd5\u7edf\u8ba1","text":"<ul> <li>\u6d4b\u8bd5\u6587\u4ef6\u6570\uff1a541\u4e2a</li> <li>\u6d4b\u8bd5\u51fd\u6570\u6570\uff1a8149\u4e2a</li> <li>\u5355\u5143\u6d4b\u8bd5\uff1a7848\u4e2a</li> <li>\u96c6\u6210\u6d4b\u8bd5\uff1a251\u4e2a</li> <li>API\u6d4b\u8bd5\uff1a0\u4e2a\uff08\u5f85\u6539\u8fdb\uff09</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#_14","title":"\u4ee3\u7801\u8d28\u91cf","text":"<ul> <li>\u6e90\u6587\u4ef6\u6570\uff1a495\u4e2a</li> <li>\u6587\u6863\u8986\u76d6\u7387\uff1a96%</li> <li>TDD\u63d0\u4ea4\u6bd4\u4f8b\uff1a19.6%</li> </ul>"},{"location":"TDD_CULTURE_SUMMARY/#_15","title":"\ud83c\udfaf \u5b9e\u65bd\u6548\u679c","text":""},{"location":"TDD_CULTURE_SUMMARY/#_16","title":"\u79ef\u6781\u5f71\u54cd","text":"<ol> <li>\u610f\u8bc6\u63d0\u5347\uff1a\u56e2\u961f\u6210\u5458\u5bf9TDD\u7684\u8ba4\u8bc6\u663e\u8457\u63d0\u9ad8</li> <li>\u5de5\u5177\u5b8c\u5584\uff1a\u5efa\u7acb\u4e86\u5b8c\u6574\u7684TDD\u5de5\u5177\u94fe</li> <li>\u6d41\u7a0b\u89c4\u8303\uff1aTDD\u5b9e\u8df5\u6709\u636e\u53ef\u5faa</li> <li>\u8d28\u91cf\u6539\u5584\uff1a\u65b0\u529f\u80fd\u4ee3\u7801\u8d28\u91cf\u660e\u663e\u63d0\u5347</li> </ol>"},{"location":"TDD_CULTURE_SUMMARY/#_17","title":"\u9047\u5230\u7684\u6311\u6218","text":"<ol> <li>\u5386\u53f2\u4ee3\u7801\uff1a\u9057\u7559\u4ee3\u7801\u7684\u6d4b\u8bd5\u8986\u76d6\u96be\u5ea6\u5927</li> <li>\u65f6\u95f4\u538b\u529b\uff1a\u9879\u76ee\u8fdb\u5ea6\u4e0eTDD\u5b9e\u8df5\u7684\u5e73\u8861</li> <li>\u6280\u80fd\u5dee\u5f02\uff1a\u56e2\u961f\u6210\u5458TDD\u6280\u80fd\u6c34\u5e73\u4e0d\u4e00</li> <li>\u8986\u76d6\u7387\u76ee\u6807\uff1a\u6574\u4f53\u8986\u76d6\u7387\u63d0\u5347\u9700\u8981\u6301\u7eed\u52aa\u529b</li> </ol>"},{"location":"TDD_CULTURE_SUMMARY/#_18","title":"\ud83d\ude80 \u4e0b\u4e00\u6b65\u8ba1\u5212","text":""},{"location":"TDD_CULTURE_SUMMARY/#1_1","title":"\u77ed\u671f\u76ee\u6807\uff081\u5468\uff09","text":"<ol> <li>\u63d0\u5347string_utils\u6a21\u5757\u8986\u76d6\u7387</li> <li>\u5f53\u524d\uff1a46%</li> <li>\u76ee\u6807\uff1a80%</li> <li> <p>\u63aa\u65bd\uff1a\u6dfb\u52a0\u8fb9\u754c\u6d4b\u8bd5\u548c\u9519\u8bef\u5904\u7406\u6d4b\u8bd5</p> </li> <li> <p>\u7ec4\u7ec7\u7b2c\u4e00\u6b21TDD\u5206\u4eab\u4f1a</p> </li> <li>\u4f7f\u7528\u751f\u6210\u7684\u6f14\u793a\u6750\u6599</li> <li>\u4e3b\u9898\uff1aMock\u4e0eStub\u7684\u827a\u672f</li> <li>\u6536\u96c6\u56e2\u961f\u53cd\u9988</li> </ol>"},{"location":"TDD_CULTURE_SUMMARY/#1_2","title":"\u4e2d\u671f\u76ee\u6807\uff081\u4e2a\u6708\uff09","text":"<ol> <li>\u603b\u4f53\u8986\u76d6\u7387\u63d0\u5347\u523050%</li> <li>\u91cd\u70b9\u6a21\u5757\uff1adatabase, api, services</li> <li> <p>\u7b56\u7565\uff1aTDD\u65b0\u529f\u80fd + \u9010\u6b65\u6539\u9020\u65e7\u4ee3\u7801</p> </li> <li> <p>\u5efa\u7acbTDD\u5b9e\u8df5\u793e\u533a</p> </li> <li>\u6bcf\u5468\u5206\u4eab\u4f1a\u5e38\u6001\u5316</li> <li>\u5efa\u7acbTDD\u5bfc\u5e08\u5236\u5ea6</li> <li>\u521b\u5efa\u5b9e\u8df5\u6848\u4f8b\u5e93</li> </ol>"},{"location":"TDD_CULTURE_SUMMARY/#3_1","title":"\u957f\u671f\u76ee\u6807\uff083\u4e2a\u6708\uff09","text":"<ol> <li>TDD\u6210\u4e3a\u56e2\u961f\u4e60\u60ef</li> <li>\u65e0\u9700\u63d0\u9192\u5373\u53ef\u5b9e\u8df5TDD</li> <li> <p>TDD\u6210\u4e3a\u4ee3\u7801\u6587\u5316\u4e00\u90e8\u5206</p> </li> <li> <p>\u6301\u7eed\u8d28\u91cf\u6539\u8fdb</p> </li> <li>\u8986\u76d6\u7387\u8fbe\u523070%\u4ee5\u4e0a</li> <li>\u5efa\u7acb\u81ea\u52a8\u5316\u8d28\u91cf\u76d1\u63a7</li> <li>\u5f62\u6210\u6700\u4f73\u5b9e\u8df5\u6587\u6863\u5e93</li> </ol>"},{"location":"TDD_CULTURE_SUMMARY/#_19","title":"\ud83d\udca1 \u7ecf\u9a8c\u603b\u7ed3","text":""},{"location":"TDD_CULTURE_SUMMARY/#_20","title":"\u6210\u529f\u56e0\u7d20","text":"<ol> <li>\u7cfb\u7edf\u6027\u89c4\u5212\uff1a\u4ece\u57f9\u8bad\u3001\u5de5\u5177\u3001\u6d41\u7a0b\u5168\u65b9\u4f4d\u8003\u8651</li> <li>\u6e10\u8fdb\u5f0f\u5b9e\u65bd\uff1a\u4e0d\u641e\u4e00\u5200\u5207\uff0c\u9010\u6b65\u63a8\u8fdb</li> <li>\u5de5\u5177\u652f\u6301\uff1a\u63d0\u4f9b\u81ea\u52a8\u5316\u5de5\u5177\u51cf\u8f7b\u8d1f\u62c5</li> <li>\u6587\u5316\u5efa\u8bbe\uff1a\u6ce8\u91cd\u5206\u4eab\u548c\u7ecf\u9a8c\u4f20\u627f</li> </ol>"},{"location":"TDD_CULTURE_SUMMARY/#_21","title":"\u5173\u952e\u6559\u8bad","text":"<ol> <li>\u9886\u5bfc\u652f\u6301\u81f3\u5173\u91cd\u8981</li> <li>\u9700\u8981\u6301\u7eed\u6295\u5165\uff0c\u4e0d\u662f\u4e00\u8e74\u800c\u5c31</li> <li>\u8981\u5e73\u8861\u7406\u60f3\u4e0e\u73b0\u5b9e</li> <li>\u6570\u636e\u9a71\u52a8\u6539\u8fdb\u66f4\u6709\u6548</li> </ol>"},{"location":"TDD_CULTURE_SUMMARY/#_22","title":"\u63a8\u8350\u505a\u6cd5","text":"<ol> <li>\u4ece\u65b0\u529f\u80fd\u5f00\u59cb\u5b9e\u8df5TDD</li> <li>\u5efa\u7acb\u6fc0\u52b1\u673a\u5236\u9f13\u52b1TDD</li> <li>\u5b9a\u671f\u603b\u7ed3\u548c\u5206\u4eab</li> <li>\u5229\u7528\u5de5\u5177\u81ea\u52a8\u5316</li> </ol>"},{"location":"TDD_CULTURE_SUMMARY/#_23","title":"\ud83c\udf89 \u81f4\u8c22","text":"<p>\u611f\u8c22\u6240\u6709\u53c2\u4e0eTDD\u6587\u5316\u5efa\u8bbe\u7684\u56e2\u961f\u6210\u5458\u3002\u901a\u8fc7\u5927\u5bb6\u7684\u5171\u540c\u52aa\u529b\uff0c\u6211\u4eec\u5728\u63d0\u5347\u4ee3\u7801\u8d28\u91cf\u7684\u9053\u8def\u4e0a\u8fc8\u51fa\u4e86\u575a\u5b9e\u7684\u4e00\u6b65\u3002</p> <p>\u7279\u522b\u611f\u8c22\uff1a - \u63d0\u4f9b\u53cd\u9988\u548c\u5efa\u8bae\u7684\u5f00\u53d1\u56e2\u961f - \u79ef\u6781\u5b9e\u8df5TDD\u7684\u5f00\u53d1\u4eba\u5458 - \u652f\u6301TDD\u6587\u5316\u7684\u7ba1\u7406\u5c42</p>"},{"location":"TDD_CULTURE_SUMMARY/#_24","title":"\ud83d\udcda \u53c2\u8003\u8d44\u6599","text":"<ul> <li>TDD_QUICK_START.md - TDD\u5feb\u901f\u5165\u95e8</li> <li>TDD_KNOWLEDGE_BASE.md - \u77e5\u8bc6\u5e93</li> <li>TDD_CODE_REVIEW_CHECKLIST.md - \u5ba1\u67e5\u6e05\u5355</li> <li>TDD_SHARING_SESSION_GUIDE.md - \u5206\u4eab\u4f1a\u6307\u5357</li> <li>\u6539\u8fdb\u62a5\u544a - \u6700\u65b0\u6539\u8fdb\u5efa\u8bae</li> </ul> <p>\u8bb0\u4f4f\uff1aTDD\u4e0d\u662f\u94f6\u5f39\uff0c\u4f46\u5b83\u662f\u4e00\u79cd\u4f18\u79c0\u7684\u8f6f\u4ef6\u5f00\u53d1\u5b9e\u8df5\u3002\u6301\u7eed\u7684\u6539\u8fdb\u548c\u575a\u6301\uff0c\u624d\u80fd\u8ba9TDD\u771f\u6b63\u878d\u5165\u56e2\u961f\u6587\u5316\uff0c\u5e2e\u52a9\u6211\u4eec\u6784\u5efa\u66f4\u9ad8\u8d28\u91cf\u7684\u8f6f\u4ef6\u3002</p>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/","title":"TDD\u5468\u62a5\u6a21\u677f","text":"<p>\u5468\u62a5\u5468\u671f\uff1aYYYY-MM-DD \u81f3 YYYY-MM-DD \u62a5\u544a\u4eba\uff1a[\u59d3\u540d] \u65e5\u671f\uff1aYYYY-MM-DD</p>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_1","title":"\ud83d\udcca \u672c\u5468\u5173\u952e\u6307\u6807","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_2","title":"\u6d4b\u8bd5\u8986\u76d6\u7387\u53d8\u5316","text":"\u6a21\u5757 \u4e0a\u5468\u8986\u76d6\u7387 \u672c\u5468\u8986\u76d6\u7387 \u53d8\u5316 \u76ee\u6807 \u603b\u4f53 XX.X% XX.X% \ud83d\udcc8/\ud83d\udcc9 X.X% 50% helpers XX.X% XX.X% \ud83d\udcc8/\ud83d\udcc9 X.X% 80% predictions XX.X% XX.X% \ud83d\udcc8/\ud83d\udcc9 X.X% 80% string_utils XX.X% XX.X% \ud83d\udcc8/\ud83d\udcc9 X.X% 80%"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_3","title":"\u6d4b\u8bd5\u6d3b\u52a8\u7edf\u8ba1","text":"<ul> <li>\u65b0\u589e\u6d4b\u8bd5\u7528\u4f8b\uff1aXX\u4e2a</li> <li>\u4fee\u590d\u5931\u8d25\u7684\u6d4b\u8bd5\uff1aXX\u4e2a</li> <li>\u91cd\u6784\u6d4b\u8bd5\u4ee3\u7801\uff1aXX\u6b21</li> <li>TDD\u5b9e\u8df5\u63d0\u4ea4\uff1aXX\u6b21</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_4","title":"\ud83c\udfaf \u672c\u5468\u76ee\u6807\u5b8c\u6210\u60c5\u51b5","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_5","title":"\u5df2\u5b8c\u6210\u7684\u76ee\u6807","text":"<ul> <li> [\u76ee\u68071\u63cf\u8ff0]</li> <li> [\u76ee\u68072\u63cf\u8ff0]</li> <li> [\u76ee\u68073\u63cf\u8ff0]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_6","title":"\u672a\u5b8c\u6210\u7684\u76ee\u6807","text":"<ul> <li> [\u76ee\u68071\u63cf\u8ff0] - \u539f\u56e0\uff1a[\u8bf4\u660e\u539f\u56e0]</li> <li> [\u76ee\u68072\u63cf\u8ff0] - \u539f\u56e0\uff1a[\u8bf4\u660e\u539f\u56e0]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#tdd_1","title":"\u2728 TDD\u5b9e\u8df5\u4eae\u70b9","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_7","title":"\u6210\u529f\u6848\u4f8b","text":"<p>\u9879\u76ee/\u529f\u80fd\uff1a[\u5177\u4f53\u540d\u79f0] TDD\u5b9e\u8df5\uff1a 1. \u5148\u5199\u4e86XX\u4e2a\u6d4b\u8bd5\u7528\u4f8b 2. \u4f7f\u7528Red-Green-Refactor\u5faa\u73af 3. \u8fbe\u5230\u4e86XX%\u7684\u8986\u76d6\u7387 \u6210\u679c\uff1a - Bug\u51cf\u5c11XX% - \u5f00\u53d1\u901f\u5ea6\u63d0\u5347XX% - \u4ee3\u7801\u8d28\u91cf\u6539\u5584</p>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_8","title":"\u6280\u672f\u7a81\u7834","text":"<ul> <li>[\u63cf\u8ff0\u672c\u5468\u5728TDD\u65b9\u9762\u7684\u6280\u672f\u7a81\u7834]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_9","title":"\u56e2\u961f\u6210\u957f","text":"<ul> <li>[\u56e2\u961f\u6210\u5458\u5728TDD\u65b9\u9762\u7684\u6210\u957f]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_10","title":"\ud83e\udd14 \u9047\u5230\u7684\u6311\u6218","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_11","title":"\u4e3b\u8981\u56f0\u96be","text":"<ol> <li> <p>\u95ee\u9898\uff1a[\u5177\u4f53\u95ee\u9898]    \u5f71\u54cd\uff1a[\u5bf9\u5f00\u53d1\u7684\u5f71\u54cd]    \u89e3\u51b3\u65b9\u6848\uff1a[\u91c7\u53d6\u7684\u63aa\u65bd]    \u6548\u679c\uff1a[\u89e3\u51b3\u6548\u679c]</p> </li> <li> <p>\u95ee\u9898\uff1a[\u5177\u4f53\u95ee\u9898]    \u5f71\u54cd\uff1a[\u5bf9\u5f00\u53d1\u7684\u5f71\u54cd]    \u89e3\u51b3\u65b9\u6848\uff1a[\u91c7\u53d6\u7684\u63aa\u65bd]    \u6548\u679c\uff1a[\u89e3\u51b3\u6548\u679c]</p> </li> </ol>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_12","title":"\u9700\u8981\u7684\u652f\u6301","text":"<ul> <li>[\u9700\u8981\u56e2\u961f\u6216\u7ba1\u7406\u5c42\u63d0\u4f9b\u7684\u652f\u6301]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_13","title":"\ud83d\udca1 \u7ecf\u9a8c\u5206\u4eab","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#tdd_2","title":"\u672c\u5468\u5b66\u5230\u7684TDD\u6280\u5de7","text":"<ol> <li>\u6280\u5de7\u540d\u79f0\uff1a</li> <li>\u573a\u666f\uff1a[\u4ec0\u4e48\u65f6\u5019\u4f7f\u7528]</li> <li>\u65b9\u6cd5\uff1a[\u5177\u4f53\u505a\u6cd5]</li> <li> <p>\u793a\u4f8b\uff1a    <pre><code># \u4ee3\u7801\u793a\u4f8b\ndef example():\n    pass\n</code></pre></p> </li> <li> <p>\u6280\u5de7\u540d\u79f0\uff1a</p> </li> <li>\u573a\u666f\uff1a[\u4ec0\u4e48\u65f6\u5019\u4f7f\u7528]</li> <li>\u65b9\u6cd5\uff1a[\u5177\u4f53\u505a\u6cd5]</li> </ol>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_14","title":"\u6700\u4f73\u5b9e\u8df5\u603b\u7ed3","text":"<ul> <li>[\u603b\u7ed3\u672c\u5468\u53d1\u73b0\u7684\u6700\u4f73\u5b9e\u8df5]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_15","title":"\u907f\u514d\u7684\u9677\u9631","text":"<ul> <li>[\u603b\u7ed3\u672c\u5468\u9047\u5230\u6216\u907f\u514d\u7684\u9677\u9631]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_16","title":"\ud83d\udcda \u5b66\u4e60\u4e0e\u6210\u957f","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_17","title":"\u672c\u5468\u5b66\u4e60\u5185\u5bb9","text":"<ul> <li>\u4e66\u7c4d/\u6587\u7ae0\uff1a[\u6807\u9898]</li> <li>\u5728\u7ebf\u8bfe\u7a0b\uff1a[\u540d\u79f0]</li> <li>\u6280\u672f\u5206\u4eab\uff1a[\u4e3b\u9898]</li> <li>\u5176\u4ed6\uff1a[\u5185\u5bb9]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_18","title":"\u5fc3\u5f97\u4f53\u4f1a","text":"<ul> <li>[\u5bf9TDD\u7684\u65b0\u8ba4\u8bc6\u548c\u7406\u89e3]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_19","title":"\ud83d\udcc5 \u4e0b\u5468\u8ba1\u5212","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_20","title":"\u4e3b\u8981\u76ee\u6807","text":"<ol> <li>[\u76ee\u68071]</li> <li>\u9884\u8ba1\u5de5\u4f5c\u91cf\uff1aX\u5929/X\u5c0f\u65f6</li> <li>\u5173\u952e\u6b65\u9aa4\uff1a<ul> <li>\u6b65\u9aa41</li> <li>\u6b65\u9aa42</li> </ul> </li> <li> <p>\u9884\u671f\u6210\u679c\uff1a</p> </li> <li> <p>[\u76ee\u68072]</p> </li> <li>\u9884\u8ba1\u5de5\u4f5c\u91cf\uff1aX\u5929/X\u5c0f\u65f6</li> <li>\u5173\u952e\u6b65\u9aa4\uff1a<ul> <li>\u6b65\u9aa41</li> <li>\u6b65\u9aa42</li> </ul> </li> <li>\u9884\u671f\u6210\u679c\uff1a</li> </ol>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#tdd_3","title":"TDD\u5b9e\u8df5\u8ba1\u5212","text":"<ul> <li>\u8ba1\u5212\u5e94\u7528TDD\u7684\u529f\u80fd\uff1a[\u529f\u80fd\u5217\u8868]</li> <li>\u8ba1\u5212\u63d0\u5347\u8986\u76d6\u7387\u7684\u6a21\u5757\uff1a[\u6a21\u5757\u5217\u8868]</li> <li>\u8ba1\u5212\u91cd\u6784\u7684\u6d4b\u8bd5\uff1a[\u6d4b\u8bd5\u5217\u8868]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_21","title":"\u5b66\u4e60\u8ba1\u5212","text":"<ul> <li>\u8ba1\u5212\u5b66\u4e60\u7684\u5185\u5bb9\uff1a[\u5b66\u4e60\u5185\u5bb9]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#tdd_4","title":"\ud83c\udfc6 TDD\u4e4b\u661f\u63d0\u540d","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#tdd_5","title":"\u672c\u5468TDD\u4e4b\u661f","text":"<p>\u63d0\u540d\uff1a[\u59d3\u540d] \u7406\u7531\uff1a - [\u5177\u4f53\u8d21\u732e1] - [\u5177\u4f53\u8d21\u732e2] - [\u5177\u4f53\u8d21\u732e3]</p>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_22","title":"\u8868\u626c\u540d\u5355","text":"<ul> <li>[\u59d3\u540d]\uff1a[\u8868\u626c\u539f\u56e0]</li> <li>[\u59d3\u540d]\uff1a[\u8868\u626c\u539f\u56e0]</li> <li>[\u59d3\u540d]\uff1a[\u8868\u626c\u539f\u56e0]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_23","title":"\ud83d\udcc8 \u6570\u636e\u56fe\u8868","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_24","title":"\u8986\u76d6\u7387\u8d8b\u52bf\u56fe","text":"<pre><code>Week 1: \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591 80%\nWeek 2: \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591 82%\nWeek 3: \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591 85%\nWeek 4: \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 90%\n</code></pre>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_25","title":"\u6d4b\u8bd5\u7528\u4f8b\u589e\u957f","text":"<pre><code>\u5355\u5143\u6d4b\u8bd5:     \u2588\u2588\u2588\u2588 1245\u4e2a (+45)\n\u96c6\u6210\u6d4b\u8bd5:     \u2588\u2588\u2591 210\u4e2a (+12)\nAPI\u6d4b\u8bd5:      \u2588\u2591 105\u4e2a (+8)\n\u7aef\u5230\u7aef\u6d4b\u8bd5:   \u2591\u2591 45\u4e2a (+2)\n</code></pre>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_26","title":"\ud83d\udd2e \u6539\u8fdb\u5efa\u8bae","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_27","title":"\u5bf9\u56e2\u961f\u7684\u5efa\u8bae","text":"<ol> <li>\u6d41\u7a0b\u6539\u8fdb\uff1a</li> <li>\u5efa\u8bae\uff1a</li> <li>\u7406\u7531\uff1a</li> <li> <p>\u9884\u671f\u6548\u679c\uff1a</p> </li> <li> <p>\u5de5\u5177\u6539\u8fdb\uff1a</p> </li> <li>\u5efa\u8bae\uff1a</li> <li>\u7406\u7531\uff1a</li> <li>\u9884\u671f\u6548\u679c\uff1a</li> </ol>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_28","title":"\u5bf9\u4e2a\u4eba\u7684\u5efa\u8bae","text":"<ul> <li>[\u4e2a\u4ebaTDD\u5b9e\u8df5\u6539\u8fdb\u5efa\u8bae]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_29","title":"\ud83d\udcdd \u95ee\u9898\u4e0e\u8ba8\u8bba","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_30","title":"\u5f00\u653e\u6027\u95ee\u9898","text":"<ol> <li>[\u95ee\u98981]</li> <li>[\u95ee\u98982]</li> <li>[\u95ee\u98983]</li> </ol>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_31","title":"\u9700\u8981\u8ba8\u8bba\u7684\u8bdd\u9898","text":"<ul> <li>[\u9700\u8981\u5728\u56e2\u961f\u4f1a\u8bae\u8ba8\u8bba\u7684\u8bdd\u9898]</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_32","title":"\ud83d\udcce \u9644\u4ef6","text":"<ul> <li>\u672c\u5468\u6d4b\u8bd5\u62a5\u544a</li> <li>\u8986\u76d6\u7387\u8be6\u7ec6\u62a5\u544a</li> <li>TDD\u5b9e\u8df5\u622a\u56fe</li> <li>\u5176\u4ed6\u76f8\u5173\u6587\u6863</li> </ul>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_33","title":"\u603b\u7ed3","text":""},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_34","title":"\u672c\u5468\u603b\u7ed3","text":"<p>[\u75282-3\u53e5\u8bdd\u603b\u7ed3\u672c\u5468\u7684TDD\u5b9e\u8df5\u60c5\u51b5]</p>"},{"location":"TDD_WEEKLY_REPORT_TEMPLATE/#_35","title":"\u4e0b\u5468\u5c55\u671b","text":"<p>[\u75281-2\u53e5\u8bdd\u5c55\u671b\u4e0b\u5468\u7684TDD\u5b9e\u8df5\u76ee\u6807]</p> <p>\u63d0\u4ea4\u65f6\u95f4\uff1aYYYY-MM-DD HH:MM:SS \u5ba1\u9605\u4eba\uff1a[\u59d3\u540d] \u4e0b\u6b21\u62a5\u544a\u65f6\u95f4\uff1aYYYY-MM-DD</p>"},{"location":"TESTING_GUIDE/","title":"\u6d4b\u8bd5\u6307\u5357","text":""},{"location":"TESTING_GUIDE/#_2","title":"\u6982\u8ff0","text":"<p>\u672c\u9879\u76ee\u91c7\u7528pytest\u4f5c\u4e3a\u6d4b\u8bd5\u6846\u67b6\uff0c\u96c6\u6210\u4e86\u8986\u76d6\u7387\u68c0\u67e5\u3001\u6027\u80fd\u6d4b\u8bd5\u548c\u6301\u7eed\u96c6\u6210\u3002\u5f53\u524d\u5904\u4e8ePhase 3\u9636\u6bb5\uff0c\u6d4b\u8bd5\u8986\u76d6\u7387\u4e3a22.32%\uff0c\u76ee\u6807\u63d0\u5347\u81f380%\u3002</p>"},{"location":"TESTING_GUIDE/#_3","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"TESTING_GUIDE/#_4","title":"\u8fd0\u884c\u6240\u6709\u6d4b\u8bd5","text":"<pre><code>make test\n</code></pre>"},{"location":"TESTING_GUIDE/#_5","title":"\u8fd0\u884c\u7279\u5b9a\u7c7b\u578b\u7684\u6d4b\u8bd5","text":"<pre><code># \u5355\u5143\u6d4b\u8bd5\nmake test.unit\n\n# \u96c6\u6210\u6d4b\u8bd5\nmake test.int\n\n# \u7aef\u5230\u7aef\u6d4b\u8bd5\nmake test.e2e\n\n# \u5feb\u901f\u6d4b\u8bd5\uff08\u8df3\u8fc7\u6162\u901f\u6d4b\u8bd5\uff09\nmake test-quick\n</code></pre>"},{"location":"TESTING_GUIDE/#_6","title":"\u751f\u6210\u8986\u76d6\u7387\u62a5\u544a","text":"<pre><code># \u751f\u6210HTML\u8986\u76d6\u7387\u62a5\u544a\nmake coverage\n\n# \u67e5\u770b\u5f53\u524d\u8986\u76d6\u7387 (22.32%)\nmake coverage-quick\n\n# \u67e5\u770b\u8be6\u7ec6\u8986\u76d6\u7387\npytest --cov=src --cov-report=term-missing\n\n# \u8986\u76d6\u7387\u8d8b\u52bf\u5206\u6790\nmake coverage-trends\n</code></pre>"},{"location":"TESTING_GUIDE/#_7","title":"\u6d4b\u8bd5\u7ed3\u6784","text":"<pre><code>tests/\n\u251c\u2500\u2500 unit/           # \u5355\u5143\u6d4b\u8bd5 - \u6d4b\u8bd5\u5355\u4e2a\u51fd\u6570/\u7c7b\n\u2502   \u251c\u2500\u2500 api/        # API\u7aef\u70b9\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 services/   # \u670d\u52a1\u5c42\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 database/   # \u6570\u636e\u5e93\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 utils/      # \u5de5\u5177\u51fd\u6570\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 helpers/    # \u6d4b\u8bd5\u8f85\u52a9\u5de5\u5177 (Mock fixtures)\n\u251c\u2500\u2500 integration/    # \u96c6\u6210\u6d4b\u8bd5 - \u6d4b\u8bd5\u591a\u4e2a\u7ec4\u4ef6\u534f\u4f5c\n\u251c\u2500\u2500 e2e/           # \u7aef\u5230\u7aef\u6d4b\u8bd5 - \u6d4b\u8bd5\u5b8c\u6574\u6d41\u7a0b\n\u251c\u2500\u2500 fixtures/      # \u6d4b\u8bd5\u6570\u636efixtures\n\u2514\u2500\u2500 factories/     # \u6d4b\u8bd5\u6570\u636e\u5de5\u5382\n</code></pre>"},{"location":"TESTING_GUIDE/#phase-3","title":"\u65b0\u589e\u6d4b\u8bd5\u57fa\u7840\u8bbe\u65bd (Phase 3)","text":"<ul> <li>\u6d4b\u8bd5\u8f85\u52a9\u5de5\u5177: <code>tests/helpers/test_adapters.py</code> - \u7edf\u4e00\u7684Mock\u9002\u914d\u5668</li> <li>\u4e2d\u95f4\u4ef6\u6d4b\u8bd5: <code>src/api/middleware.py</code> - API\u4e2d\u95f4\u4ef6\u6d4b\u8bd5\u8986\u76d6</li> <li>\u8d28\u91cf\u95e8\u7981: <code>scripts/quality_gate.py</code> - \u81ea\u52a8\u5316\u8d28\u91cf\u68c0\u67e5</li> <li>\u73af\u5883\u914d\u7f6e: \u591a\u79cd\u8986\u76d6\u7387\u914d\u7f6e\u6587\u4ef6\u9002\u5e94\u4e0d\u540c\u73af\u5883</li> </ul>"},{"location":"TESTING_GUIDE/#markers","title":"\u6d4b\u8bd5\u6807\u8bb0\uff08Markers\uff09","text":"<p>\u4f7f\u7528pytest\u6807\u8bb0\u6765\u5206\u7c7b\u548c\u8fc7\u6ee4\u6d4b\u8bd5\uff1a</p> <pre><code>@pytest.mark.unit          # \u5355\u5143\u6d4b\u8bd5\n@pytest.mark.integration   # \u96c6\u6210\u6d4b\u8bd5\n@pytest.mark.e2e          # \u7aef\u5230\u7aef\u6d4b\u8bd5\n@pytest.mark.slow         # \u6162\u901f\u6d4b\u8bd5\n@pytest.mark.smoke        # \u5192\u70df\u6d4b\u8bd5\n@pytest.mark.asyncio      # \u5f02\u6b65\u6d4b\u8bd5\n</code></pre>"},{"location":"TESTING_GUIDE/#_8","title":"\u8fd0\u884c\u7279\u5b9a\u6807\u8bb0\u7684\u6d4b\u8bd5","text":"<pre><code># \u53ea\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\npytest -m unit\n\n# \u6392\u9664\u6162\u901f\u6d4b\u8bd5\npytest -m \"not slow\"\n\n# \u8fd0\u884c\u5192\u70df\u6d4b\u8bd5\npytest -m smoke\n</code></pre>"},{"location":"TESTING_GUIDE/#_9","title":"\u7f16\u5199\u6d4b\u8bd5","text":""},{"location":"TESTING_GUIDE/#_10","title":"\u5355\u5143\u6d4b\u8bd5\u793a\u4f8b","text":"<pre><code>\"\"\"\u6d4b\u8bd5\u793a\u4f8b\u6a21\u5757\"\"\"\n\nimport pytest\nfrom src.utils.string_utils import StringUtils\n\n\nclass TestStringUtils:\n    \"\"\"\u5b57\u7b26\u4e32\u5de5\u5177\u6d4b\u8bd5\"\"\"\n\n    def test_capitalize_first_letter(self):\n        \"\"\"\u6d4b\u8bd5\u9996\u5b57\u6bcd\u5927\u5199\"\"\"\n        result = StringUtils.capitalize_first_letter(\"hello\")\n        assert result == \"Hello\"\n\n    @pytest.mark.parametrize(\"input,expected\", [\n        (\"test\", \"Test\"),\n        (\"HELLO\", \"HELLO\"),\n        (\"\", \"\"),\n    ])\n    def test_capitalize_multiple_cases(self, input, expected):\n        \"\"\"\u6d4b\u8bd5\u591a\u79cd\u60c5\u51b5\"\"\"\n        assert StringUtils.capitalize_first_letter(input) == expected\n</code></pre>"},{"location":"TESTING_GUIDE/#_11","title":"\u5f02\u6b65\u6d4b\u8bd5\u793a\u4f8b","text":"<pre><code>import pytest\nfrom src.services.example_service import ExampleService\n\n\nclass TestExampleService:\n    \"\"\"\u5f02\u6b65\u670d\u52a1\u6d4b\u8bd5\"\"\"\n\n    @pytest.mark.asyncio\n    async def test_async_method(self):\n        \"\"\"\u6d4b\u8bd5\u5f02\u6b65\u65b9\u6cd5\"\"\"\n        service = ExampleService()\n        result = await service.async_method()\n        assert result is not None\n</code></pre>"},{"location":"TESTING_GUIDE/#fixtures","title":"\u4f7f\u7528Fixtures","text":"<pre><code>import pytest\nfrom fastapi.testclient import TestClient\n\n\n@pytest.fixture\ndef api_client():\n    \"\"\"API\u6d4b\u8bd5\u5ba2\u6237\u7aef\"\"\"\n    from src.main import app\n    return TestClient(app)\n\n\ndef test_health_check(api_client):\n    \"\"\"\u6d4b\u8bd5\u5065\u5eb7\u68c0\u67e5\"\"\"\n    response = api_client.get(\"/api/health\")\n    assert response.status_code == 200\n</code></pre>"},{"location":"TESTING_GUIDE/#mockstub","title":"Mock\u548cStub","text":""},{"location":"TESTING_GUIDE/#mock","title":"Mock\u5916\u90e8\u4f9d\u8d56","text":"<pre><code>from unittest.mock import patch, MagicMock\n\n\ndef test_with_mock():\n    \"\"\"\u4f7f\u7528mock\u6d4b\u8bd5\"\"\"\n    with patch('src.api.predictions.PredictionService') as mock_service:\n        mock_service.create_prediction.return_value = {\"id\": 1}\n\n        # \u6267\u884c\u6d4b\u8bd5\n        result = create_prediction(data)\n\n        # \u9a8c\u8bc1\n        assert result[\"id\"] == 1\n        mock_service.create_prediction.assert_called_once()\n</code></pre>"},{"location":"TESTING_GUIDE/#_12","title":"\u4f7f\u7528\u6d4b\u8bd5\u8f85\u52a9\u5de5\u5177","text":"<pre><code>from tests.helpers import (\n    MockRedis,\n    create_sqlite_memory_engine,\n    create_sqlite_sessionmaker,\n)\n\n\n@pytest.fixture\ndef mock_redis():\n    \"\"\"\u6a21\u62dfRedis\u5ba2\u6237\u7aef\"\"\"\n    redis_mock = MockRedis()\n    redis_mock.set(\"key\", \"value\")\n    return redis_mock\n</code></pre>"},{"location":"TESTING_GUIDE/#_13","title":"\u8986\u76d6\u7387\u76ee\u6807","text":""},{"location":"TESTING_GUIDE/#phase-3_1","title":"\u5f53\u524d\u72b6\u6001 (Phase 3)","text":"<ul> <li>\u603b\u4f53\u8986\u76d6\u7387: 22.32% (\u6b63\u5728\u6539\u8fdb\u4e2d)</li> <li>\u6838\u5fc3API\u6a21\u5757: \u9010\u6b65\u63d0\u5347</li> <li>\u5de5\u5177\u7c7b: \u91cd\u70b9\u4f18\u5316\u533a\u57df</li> <li>CI\u5f3a\u5236: 22% (\u5f53\u524d\u6700\u4f4e\u9608\u503c)</li> </ul>"},{"location":"TESTING_GUIDE/#_14","title":"\u76ee\u6807\u72b6\u6001","text":"<ul> <li>\u603b\u4f53\u8986\u76d6\u7387: \u226580% (Phase 4\u76ee\u6807)</li> <li>\u6838\u5fc3API\u6a21\u5757: \u226590%</li> <li>\u5de5\u5177\u7c7b: 100%</li> <li>CI\u5f3a\u5236: \u226580%</li> </ul>"},{"location":"TESTING_GUIDE/#_15","title":"\u5206\u9636\u6bb5\u7b56\u7565","text":"<ol> <li>Phase 3 (\u5f53\u524d): \u7a33\u5b9a\u572822%\u57fa\u7840\u4e0a\uff0c\u4fee\u590d\u5173\u952e\u6d4b\u8bd5</li> <li>Phase 4: \u63d0\u5347\u81f340%\u4ee5\u4e0a</li> <li>Phase 5: \u8fbe\u523080%\u751f\u4ea7\u6807\u51c6</li> </ol>"},{"location":"TESTING_GUIDE/#_16","title":"\u67e5\u770b\u672a\u8986\u76d6\u7684\u4ee3\u7801","text":"<pre><code># \u67e5\u770b\u7f3a\u5931\u8986\u76d6\u7684\u884c\npytest --cov=src --cov-report=term-missing\n\n# \u751f\u6210HTML\u62a5\u544a\npytest --cov=src --cov-report=html\n# \u7136\u540e\u6253\u5f00 htmlcov/index.html\n</code></pre>"},{"location":"TESTING_GUIDE/#_17","title":"\u6027\u80fd\u6d4b\u8bd5","text":""},{"location":"TESTING_GUIDE/#pytest-benchmark","title":"\u4f7f\u7528pytest-benchmark","text":"<pre><code>def test_performance(benchmark):\n    \"\"\"\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\"\"\"\n    result = benchmark(expensive_function, arg1, arg2)\n    assert result == expected_value\n</code></pre>"},{"location":"TESTING_GUIDE/#_18","title":"\u8bbe\u7f6e\u6027\u80fd\u9608\u503c","text":"<pre><code>@pytest.mark.benchmark(min_rounds=10)\ndef test_with_threshold(benchmark):\n    \"\"\"\u5e26\u9608\u503c\u7684\u6027\u80fd\u6d4b\u8bd5\"\"\"\n    result = benchmark(function)\n    assert benchmark.stats.stats.mean &lt; 0.1  # \u5e73\u5747&lt;100ms\n</code></pre>"},{"location":"TESTING_GUIDE/#_19","title":"\u6d4b\u8bd5\u6570\u636e","text":""},{"location":"TESTING_GUIDE/#faker","title":"\u4f7f\u7528Faker\u751f\u6210\u6d4b\u8bd5\u6570\u636e","text":"<pre><code>from faker import Faker\n\n\n@pytest.fixture\ndef fake_user():\n    \"\"\"\u751f\u6210\u5047\u7528\u6237\u6570\u636e\"\"\"\n    fake = Faker()\n    return {\n        \"name\": fake.name(),\n        \"email\": fake.email(),\n        \"address\": fake.address()\n    }\n</code></pre>"},{"location":"TESTING_GUIDE/#factory","title":"\u4f7f\u7528Factory\u6a21\u5f0f","text":"<pre><code>from tests.factories import UserFactory, MatchFactory\n\n\ndef test_with_factory():\n    \"\"\"\u4f7f\u7528factory\u751f\u6210\u6d4b\u8bd5\u6570\u636e\"\"\"\n    user = UserFactory.create()\n    match = MatchFactory.create()\n    assert user.id is not None\n</code></pre>"},{"location":"TESTING_GUIDE/#cicd","title":"CI/CD\u96c6\u6210","text":""},{"location":"TESTING_GUIDE/#github-actions","title":"GitHub Actions","text":"<p>\u6d4b\u8bd5\u5728\u6bcf\u6b21push\u548cPR\u65f6\u81ea\u52a8\u8fd0\u884c\uff1a</p> <pre><code>- name: Run tests\n  run: |\n    pytest tests/ --cov=src --cov-report=xml --cov-fail-under=80\n</code></pre>"},{"location":"TESTING_GUIDE/#ci","title":"\u672c\u5730CI\u6a21\u62df","text":"<pre><code># \u8fd0\u884c\u5b8c\u6574CI\u6d41\u7a0b\nmake ci\n\n# \u6216\u4f7f\u7528ci-verify\u811a\u672c\n./ci-verify.sh\n\n# \u8d28\u91cf\u95e8\u7981\u5feb\u901f\u68c0\u67e5\npython scripts/quality_gate.py --quick-mode\n\n# \u5b8c\u6574\u8d28\u91cf\u95e8\u7981\u68c0\u67e5\npython scripts/quality_gate.py\n\n# \u73af\u5883\u72b6\u6001\u68c0\u67e5\nmake env-check\n</code></pre>"},{"location":"TESTING_GUIDE/#_20","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u6d4b\u8bd5\u547d\u540d: \u4f7f\u7528\u63cf\u8ff0\u6027\u540d\u79f0\uff0c\u6e05\u695a\u8bf4\u660e\u6d4b\u8bd5\u5185\u5bb9</li> </ol> <pre><code>def test_user_registration_with_valid_email_creates_user():\n    ...\n</code></pre> <ol> <li>\u4e00\u4e2a\u6d4b\u8bd5\u4e00\u4e2a\u65ad\u8a00: \u4fdd\u6301\u6d4b\u8bd5\u7b80\u5355\u548c\u4e13\u6ce8</li> </ol> <pre><code>def test_addition():\n    assert add(2, 3) == 5  # \u53ea\u6d4b\u8bd5\u4e00\u4ef6\u4e8b\n</code></pre> <ol> <li>\u4f7f\u7528fixture\u590d\u7528: \u907f\u514d\u91cd\u590d\u7684setup\u4ee3\u7801</li> </ol> <pre><code>@pytest.fixture\ndef database():\n    db = create_db()\n    yield db\n    db.cleanup()\n</code></pre> <ol> <li>\u72ec\u7acb\u6027: \u6d4b\u8bd5\u4e4b\u95f4\u4e0d\u5e94\u76f8\u4e92\u4f9d\u8d56</li> </ol> <pre><code># \u274c \u4e0d\u597d\ntest_order = []\ndef test_1(): test_order.append(1)\ndef test_2(): assert test_order == [1]\n\n# \u2705 \u597d\ndef test_1(): assert function_a() == expected\ndef test_2(): assert function_b() == expected\n</code></pre> <ol> <li>\u6e05\u6670\u7684\u5931\u8d25\u6d88\u606f: \u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f</li> </ol> <pre><code>assert result == expected, f\"Expected {expected}, got {result}\"\n</code></pre>"},{"location":"TESTING_GUIDE/#_21","title":"\u6545\u969c\u6392\u67e5","text":""},{"location":"TESTING_GUIDE/#_22","title":"\u6d4b\u8bd5\u5931\u8d25","text":"<pre><code># \u67e5\u770b\u8be6\u7ec6\u9519\u8bef\npytest -vv\n\n# \u663e\u793a\u5b8c\u6574traceback\npytest --tb=long\n\n# \u53ea\u8fd0\u884c\u5931\u8d25\u7684\u6d4b\u8bd5\npytest --lf\n\n# \u8c03\u8bd5\u6a21\u5f0f\npytest -s  # \u663e\u793aprint\u8f93\u51fa\npytest --pdb  # \u5931\u8d25\u65f6\u8fdb\u5165debugger\n</code></pre>"},{"location":"TESTING_GUIDE/#_23","title":"\u6162\u901f\u6d4b\u8bd5","text":"<pre><code># \u67e5\u770b\u6700\u6162\u768410\u4e2a\u6d4b\u8bd5\npytest --durations=10\n\n# \u8bbe\u7f6e\u8d85\u65f6\npytest --timeout=60\n</code></pre>"},{"location":"TESTING_GUIDE/#coverage","title":"Coverage\u95ee\u9898","text":"<pre><code># \u67e5\u770b\u54ea\u4e9b\u6587\u4ef6\u672a\u8986\u76d6\npytest --cov=src --cov-report=term-missing:skip-covered\n\n# \u53ea\u6d4b\u8bd5\u7279\u5b9a\u6a21\u5757\u7684\u8986\u76d6\u7387\npytest --cov=src/api --cov-report=term\n</code></pre>"},{"location":"TESTING_GUIDE/#phase-3_2","title":"\u8d28\u91cf\u95e8\u7981\u7cfb\u7edf (Phase 3\u65b0\u589e)","text":"<p>\u9879\u76ee\u5f15\u5165\u4e86\u81ea\u52a8\u5316\u8d28\u91cf\u95e8\u7981\u7cfb\u7edf\uff0c\u786e\u4fdd\u4ee3\u7801\u8d28\u91cf\u548c\u6d4b\u8bd5\u8986\u76d6\u7387\uff1a</p>"},{"location":"TESTING_GUIDE/#_24","title":"\u8d28\u91cf\u68c0\u67e5\u811a\u672c","text":"<pre><code># \u5feb\u901f\u8d28\u91cf\u68c0\u67e5 (\u5f00\u53d1\u65f6\u4f7f\u7528)\npython scripts/quality_gate.py --quick-mode\n\n# \u5b8c\u6574\u8d28\u91cf\u68c0\u67e5 (\u63d0\u4ea4\u524d\u4f7f\u7528)\npython scripts/quality_gate.py\n\n# \u68c0\u67e5\u7279\u5b9a\u6a21\u5757\npython scripts/quality_gate.py --module api\n</code></pre>"},{"location":"TESTING_GUIDE/#_25","title":"\u8d28\u91cf\u6807\u51c6","text":"<ul> <li>\u6d4b\u8bd5\u8986\u76d6\u7387: \u5fc5\u987b\u8fbe\u5230\u5f53\u524d\u9608\u503c (22%)</li> <li>\u6d4b\u8bd5\u901a\u8fc7\u7387: \u226585%</li> <li>\u4ee3\u7801\u8d28\u91cf: Ruff + MyPy \u68c0\u67e5\u901a\u8fc7</li> <li>\u5b89\u5168\u6027: \u901a\u8fc7 Bandit \u626b\u63cf</li> <li>\u603b\u4f53\u8bc4\u5206: \u22657.0/10</li> </ul>"},{"location":"TESTING_GUIDE/#_26","title":"\u8d28\u91cf\u62a5\u544a","text":"<p>\u8d28\u91cf\u68c0\u67e5\u540e\u4f1a\u751f\u6210\u8be6\u7ec6\u62a5\u544a\uff1a - <code>quality-report.json</code> - \u673a\u5668\u53ef\u8bfb\u7684\u8be6\u7ec6\u6570\u636e - \u7ec8\u7aef\u8f93\u51fa - \u4eba\u7c7b\u53ef\u8bfb\u7684\u6458\u8981\u4fe1\u606f</p>"},{"location":"TESTING_GUIDE/#_27","title":"\u8d44\u6e90","text":"<ul> <li>Pytest\u5b98\u65b9\u6587\u6863</li> <li>pytest-cov\u6587\u6863</li> <li>pytest-asyncio\u6587\u6863</li> <li>Faker\u6587\u6863</li> </ul>"},{"location":"TESTING_GUIDE/#_28","title":"\u83b7\u53d6\u5e2e\u52a9","text":"<ul> <li>\u67e5\u770b\u793a\u4f8b\u6d4b\u8bd5: <code>tests/unit/api/test_health.py</code></li> <li>\u67e5\u770b\u6d4b\u8bd5\u8f85\u52a9\u5de5\u5177: <code>tests/helpers/test_adapters.py</code></li> <li>\u8fd0\u884c <code>make help</code> \u67e5\u770b\u6240\u6709make\u547d\u4ee4</li> <li>\u8d28\u91cf\u95e8\u7981\u95ee\u9898: \u68c0\u67e5 <code>scripts/quality_gate.py --help</code></li> </ul>"},{"location":"architecture/","title":"\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u67b6\u6784\u6587\u6863","text":""},{"location":"architecture/#_2","title":"\u6982\u8ff0","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u73b0\u4ee3\u5316\u7684\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\uff0c\u91c7\u7528\u5fae\u670d\u52a1\u67b6\u6784\u548c\u9886\u57df\u9a71\u52a8\u8bbe\u8ba1\uff08DDD\uff09\u539f\u5219\u3002\u7cfb\u7edf\u4f7f\u7528 FastAPI\u3001SQLAlchemy\u3001Redis \u548c PostgreSQL \u6784\u5efa\uff0c\u5177\u6709\u5b8c\u6574\u7684\u6d4b\u8bd5\u3001CI/CD \u548c MLOps \u529f\u80fd\u3002</p>"},{"location":"architecture/#_3","title":"\u5f53\u524d\u7cfb\u7edf\u72b6\u6001","text":"<ul> <li>\u4ee3\u7801\u8d28\u91cf\u8bc4\u5206\uff1a8.5/10 \u2705 \u5df2\u8fbe\u6210\u6700\u4f73\u5b9e\u8df5\u76ee\u6807</li> <li>\u6d4b\u8bd5\u8986\u76d6\u7387\uff1a21.78%\uff08\u5df2\u8d85\u51fa15-20%\u7684\u76ee\u6807\uff09</li> <li>MyPy \u9519\u8bef\u6570\uff1a0 \u2705 \u6240\u6709\u7c7b\u578b\u9519\u8bef\u5df2\u4fee\u590d</li> <li>\u67b6\u6784\u5b8c\u6574\u6027\uff1a\u9ad8\u5ea6\u6a21\u5757\u5316\uff0c\u6613\u4e8e\u6269\u5c55\u548c\u7ef4\u62a4</li> </ul>"},{"location":"architecture/#_4","title":"\u6838\u5fc3\u67b6\u6784","text":""},{"location":"architecture/#_5","title":"\u5206\u5c42\u67b6\u6784","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        API Layer                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502   FastAPI   \u2502  \u2502   GraphQL   \u2502  \u2502    WebSocket        \u2502  \u2502\n\u2502  \u2502   Routes    \u2502  \u2502   (Optional) \u2502  \u2502    (Optional)       \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Application Layer                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502    CQRS     \u2502  \u2502   Events    \u2502  \u2502   Observers         \u2502  \u2502\n\u2502  \u2502   Pattern   \u2502  \u2502   System    \u2502  \u2502      Pattern        \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     Domain Layer                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502   Models    \u2502  \u2502  Services   \u2502  \u2502   Value Objects     \u2502  \u2502\n\u2502  \u2502  (Entities) \u2502  \u2502  (Domain)   \u2502  \u2502      (DTOs)         \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  Infrastructure Layer                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  Database   \u2502  \u2502    Cache    \u2502  \u2502  Message Queue      \u2502  \u2502\n\u2502  \u2502 PostgreSQL  \u2502  \u2502    Redis    \u2502  \u2502     Kafka           \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#_6","title":"\u5173\u952e\u7ec4\u4ef6","text":""},{"location":"architecture/#1-api-srcapi","title":"1. API \u5c42 (<code>src/api/</code>)","text":"<ul> <li>FastAPI \u5e94\u7528\uff1a\u9ad8\u6027\u80fd\u5f02\u6b65 API \u6846\u67b6</li> <li>\u8def\u7531\u6a21\u5757\uff1a\u6309\u529f\u80fd\u6a21\u5757\u5316\u7684\u8def\u7531\u7ec4\u7ec7</li> <li>\u4f9d\u8d56\u6ce8\u5165\uff1a\u7edf\u4e00\u7684\u4f9d\u8d56\u7ba1\u7406</li> <li>\u4e2d\u95f4\u4ef6\uff1a\u8ba4\u8bc1\u3001CORS\u3001\u65e5\u5fd7\u3001\u9650\u6d41\u7b49</li> </ul>"},{"location":"architecture/#2-srccore","title":"2. \u6838\u5fc3\u5c42 (<code>src/core/</code>)","text":"<ul> <li>\u5f02\u5e38\u5904\u7406\uff1a\u7edf\u4e00\u7684\u5f02\u5e38\u5b9a\u4e49\u548c\u5904\u7406</li> <li>\u65e5\u5fd7\u7cfb\u7edf\uff1a\u7ed3\u6784\u5316 JSON \u65e5\u5fd7</li> <li>\u914d\u7f6e\u7ba1\u7406\uff1a\u73af\u5883\u53d8\u91cf\u548c\u914d\u7f6e\u6587\u4ef6\u7ba1\u7406</li> <li>\u4f9d\u8d56\u6ce8\u5165\u5bb9\u5668\uff1aIoC \u5bb9\u5668\u5b9e\u73b0</li> </ul>"},{"location":"architecture/#3-srcdomain","title":"3. \u9886\u57df\u5c42 (<code>src/domain/</code>)","text":"<ul> <li>\u9886\u57df\u6a21\u578b\uff1a\u6838\u5fc3\u4e1a\u52a1\u5b9e\u4f53</li> <li>\u9886\u57df\u670d\u52a1\uff1a\u4e1a\u52a1\u903b\u8f91\u670d\u52a1</li> <li>\u503c\u5bf9\u8c61\uff1a\u4e0d\u53ef\u53d8\u7684\u6570\u636e\u4f20\u8f93\u5bf9\u8c61</li> </ul>"},{"location":"architecture/#4-srcdatabase","title":"4. \u6570\u636e\u5c42 (<code>src/database/</code>)","text":"<ul> <li>SQLAlchemy 2.0\uff1a\u5f02\u6b65 ORM</li> <li>\u4ed3\u50a8\u6a21\u5f0f\uff1a\u6570\u636e\u8bbf\u95ee\u62bd\u8c61</li> <li>\u8fc1\u79fb\u7ba1\u7406\uff1aAlembic \u6570\u636e\u5e93\u8fc1\u79fb</li> <li>\u8fde\u63a5\u6c60\uff1a\u9ad8\u6548\u7684\u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406</li> </ul>"},{"location":"architecture/#5-srcservices","title":"5. \u670d\u52a1\u5c42 (<code>src/services/</code>)","text":"<ul> <li>\u57fa\u7840\u670d\u52a1\u7c7b\uff1a\u7edf\u4e00\u7684 <code>BaseService</code> \u62bd\u8c61</li> <li>\u4e1a\u52a1\u670d\u52a1\uff1a\u5177\u4f53\u7684\u4e1a\u52a1\u903b\u8f91\u5b9e\u73b0</li> <li>\u5916\u90e8\u670d\u52a1\u96c6\u6210\uff1a\u7b2c\u4e09\u65b9 API \u96c6\u6210</li> </ul>"},{"location":"architecture/#6-srccache","title":"6. \u7f13\u5b58\u5c42 (<code>src/cache/</code>)","text":"<ul> <li>Redis \u7ba1\u7406\uff1a\u7edf\u4e00\u7684 Redis \u5ba2\u6237\u7aef</li> <li>\u7f13\u5b58\u88c5\u9970\u5668\uff1a\u58f0\u660e\u5f0f\u7f13\u5b58</li> <li>\u4e00\u81f4\u6027\u7ba1\u7406\uff1a\u7f13\u5b58\u4e00\u81f4\u6027\u4fdd\u8bc1</li> </ul>"},{"location":"architecture/#_7","title":"\u8bbe\u8ba1\u6a21\u5f0f\u5e94\u7528","text":""},{"location":"architecture/#1-repository-pattern","title":"1. \u4ed3\u50a8\u6a21\u5f0f (Repository Pattern)","text":"<pre><code># src/database/repositories/base.py\nclass BaseRepository(Generic[T]):\n    \"\"\"\u57fa\u7840\u4ed3\u50a8\u62bd\u8c61\u7c7b\"\"\"\n\n    async def get(self, id: Any) -&gt; Optional[T]:\n        \"\"\"\u83b7\u53d6\u5355\u4e2a\u5b9e\u4f53\"\"\"\n        pass\n\n    async def save(self, entity: T) -&gt; T:\n        \"\"\"\u4fdd\u5b58\u5b9e\u4f53\"\"\"\n        pass\n</code></pre>"},{"location":"architecture/#2-factory-pattern","title":"2. \u5de5\u5382\u6a21\u5f0f (Factory Pattern)","text":"<pre><code># tests/factories/\nclass UserFactory(Factory):\n    \"\"\"\u7528\u6237\u6d4b\u8bd5\u6570\u636e\u5de5\u5382\"\"\"\n\n    class Meta:\n        model = User\n\n    name = factory.Faker('name')\n    email = factory.Faker('email')\n</code></pre>"},{"location":"architecture/#3-dependency-injection","title":"3. \u4f9d\u8d56\u6ce8\u5165 (Dependency Injection)","text":"<pre><code># src/core/di.py\nclass DIContainer:\n    \"\"\"\u4f9d\u8d56\u6ce8\u5165\u5bb9\u5668\"\"\"\n\n    def register(self, interface: Type, implementation: Type):\n        \"\"\"\u6ce8\u518c\u670d\u52a1\"\"\"\n        pass\n\n    def resolve(self, interface: Type) -&gt; Any:\n        \"\"\"\u89e3\u6790\u670d\u52a1\"\"\"\n        pass\n</code></pre>"},{"location":"architecture/#4-observer-pattern","title":"4. \u89c2\u5bdf\u8005\u6a21\u5f0f (Observer Pattern)","text":"<pre><code># src/observers/\nclass EventObserver:\n    \"\"\"\u4e8b\u4ef6\u89c2\u5bdf\u8005\"\"\"\n\n    async def notify(self, event: Event):\n        \"\"\"\u901a\u77e5\u4e8b\u4ef6\"\"\"\n        pass\n</code></pre>"},{"location":"architecture/#5-cqrs-command-query-responsibility-segregation","title":"5. CQRS \u6a21\u5f0f (Command Query Responsibility Segregation)","text":"<pre><code># src/api/cqrs.py\nclass CommandBus:\n    \"\"\"\u547d\u4ee4\u603b\u7ebf\"\"\"\n\n    async def dispatch(self, command: Command):\n        \"\"\"\u5206\u53d1\u547d\u4ee4\"\"\"\n        pass\n\nclass QueryBus:\n    \"\"\"\u67e5\u8be2\u603b\u7ebf\"\"\"\n\n    async def execute(self, query: Query):\n        \"\"\"\u6267\u884c\u67e5\u8be2\"\"\"\n        pass\n</code></pre>"},{"location":"architecture/#_8","title":"\u6280\u672f\u6808\u8be6\u60c5","text":""},{"location":"architecture/#_9","title":"\u540e\u7aef\u6846\u67b6","text":"<ul> <li>FastAPI 0.115.6\uff1a\u9ad8\u6027\u80fd\u5f02\u6b65 Web \u6846\u67b6</li> <li>SQLAlchemy 2.0.36\uff1a\u5f02\u6b65 ORM\uff0c\u652f\u6301\u73b0\u4ee3 Python \u7279\u6027</li> <li>Pydantic 2.10.4\uff1a\u6570\u636e\u9a8c\u8bc1\u548c\u5e8f\u5217\u5316</li> <li>Alembic\uff1a\u6570\u636e\u5e93\u8fc1\u79fb\u5de5\u5177</li> </ul>"},{"location":"architecture/#_10","title":"\u6570\u636e\u5e93","text":"<ul> <li>PostgreSQL 15\uff1a\u4e3b\u6570\u636e\u5e93</li> <li>Redis 7\uff1a\u7f13\u5b58\u548c\u4f1a\u8bdd\u5b58\u50a8</li> <li>\u8fde\u63a5\u6c60\u7ba1\u7406\uff1a\u9ad8\u6548\u7684\u8fde\u63a5\u590d\u7528</li> </ul>"},{"location":"architecture/#_11","title":"\u5f02\u6b65\u4efb\u52a1","text":"<ul> <li>Celery 5.4.0\uff1a\u5206\u5e03\u5f0f\u4efb\u52a1\u961f\u5217</li> <li>Redis Broker\uff1a\u4efb\u52a1\u6d88\u606f\u4ee3\u7406</li> </ul>"},{"location":"architecture/#_12","title":"\u6d41\u5904\u7406","text":"<ul> <li>Kafka\uff1a\u4e8b\u4ef6\u6d41\u5904\u7406</li> <li>Kafka Producer/Consumer\uff1a\u6d88\u606f\u751f\u4ea7\u6d88\u8d39</li> </ul>"},{"location":"architecture/#_13","title":"\u76d1\u63a7\u548c\u65e5\u5fd7","text":"<ul> <li>\u7ed3\u6784\u5316\u65e5\u5fd7\uff1aJSON \u683c\u5f0f\u65e5\u5fd7</li> <li>\u7cfb\u7edf\u76d1\u63a7\uff1a\u6027\u80fd\u6307\u6807\u6536\u96c6</li> <li>\u5065\u5eb7\u68c0\u67e5\uff1a\u670d\u52a1\u5065\u5eb7\u72b6\u6001\u76d1\u63a7</li> </ul>"},{"location":"architecture/#_14","title":"\u6d4b\u8bd5","text":"<ul> <li>pytest\uff1a\u6d4b\u8bd5\u6846\u67b6</li> <li>\u6d4b\u8bd5\u8986\u76d6\u7387\uff1a21.78%</li> <li>\u6d4b\u8bd5\u5de5\u5382\uff1a\u6d4b\u8bd5\u6570\u636e\u751f\u6210</li> <li>TestContainers\uff1a\u96c6\u6210\u6d4b\u8bd5\u652f\u6301</li> </ul>"},{"location":"architecture/#_15","title":"\u9879\u76ee\u7ed3\u6784","text":"<pre><code>src/\n\u251c\u2500\u2500 api/                  # API \u8def\u7531\u548c\u7aef\u70b9\n\u2502   \u251c\u2500\u2500 app.py           # FastAPI \u5e94\u7528\u5165\u53e3\n\u2502   \u251c\u2500\u2500 dependencies.py  # \u4f9d\u8d56\u6ce8\u5165\n\u2502   \u251c\u2500\u2500 cqrs.py         # CQRS \u5b9e\u73b0\n\u2502   \u251c\u2500\u2500 events.py       # \u4e8b\u4ef6\u7cfb\u7edf\n\u2502   \u2514\u2500\u2500 observers.py    # \u89c2\u5bdf\u8005\u6a21\u5f0f\n\u251c\u2500\u2500 core/               # \u6838\u5fc3\u7ec4\u4ef6\n\u2502   \u251c\u2500\u2500 exceptions.py   # \u5f02\u5e38\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 logger.py       # \u65e5\u5fd7\u7cfb\u7edf\n\u2502   \u251c\u2500\u2500 di.py          # \u4f9d\u8d56\u6ce8\u5165\u5bb9\u5668\n\u2502   \u2514\u2500\u2500 configuration.py # \u914d\u7f6e\u7ba1\u7406\n\u251c\u2500\u2500 domain/            # \u9886\u57df\u5c42\n\u2502   \u251c\u2500\u2500 models/        # \u9886\u57df\u6a21\u578b\n\u2502   \u2514\u2500\u2500 services/      # \u9886\u57df\u670d\u52a1\n\u251c\u2500\u2500 database/          # \u6570\u636e\u5c42\n\u2502   \u251c\u2500\u2500 models/        # SQLAlchemy \u6a21\u578b\n\u2502   \u251c\u2500\u2500 migrations/    # Alembic \u8fc1\u79fb\n\u2502   \u2514\u2500\u2500 repositories/  # \u4ed3\u50a8\u5b9e\u73b0\n\u251c\u2500\u2500 services/          # \u670d\u52a1\u5c42\n\u2502   \u251c\u2500\u2500 base_unified.py # \u7edf\u4e00\u57fa\u7840\u670d\u52a1\n\u2502   \u2514\u2500\u2500 *.py          # \u4e1a\u52a1\u670d\u52a1\n\u251c\u2500\u2500 cache/             # \u7f13\u5b58\u5c42\n\u2502   \u251c\u2500\u2500 redis_manager.py # Redis \u7ba1\u7406\n\u2502   \u2514\u2500\u2500 decorators.py   # \u7f13\u5b58\u88c5\u9970\u5668\n\u251c\u2500\u2500 monitoring/        # \u76d1\u63a7\u7cfb\u7edf\n\u2502   \u251c\u2500\u2500 system_monitor.py\n\u2502   \u251c\u2500\u2500 metrics_collector.py\n\u2502   \u2514\u2500\u2500 health_checker.py\n\u251c\u2500\u2500 streaming/         # \u6d41\u5904\u7406\n\u2502   \u2514\u2500\u2500 kafka_producer.py\n\u251c\u2500\u2500 scheduler/         # \u4efb\u52a1\u8c03\u5ea6\n\u2502   \u2514\u2500\u2500 celery_app.py\n\u2514\u2500\u2500 utils/            # \u5de5\u5177\u7c7b\n</code></pre>"},{"location":"architecture/#_16","title":"\u6d4b\u8bd5\u67b6\u6784","text":"<p>\u6d4b\u8bd5\u91c7\u7528\u5206\u5c42\u7ed3\u6784\uff0c\u652f\u6301\u4e0d\u540c\u7c7b\u578b\u7684\u6d4b\u8bd5\uff1a</p> <pre><code>tests/\n\u251c\u2500\u2500 unit/              # \u5355\u5143\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 core/         # \u6838\u5fc3\u903b\u8f91\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 api/          # API \u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 services/     # \u670d\u52a1\u5c42\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 database/     # \u6570\u636e\u5e93\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 utils/        # \u5de5\u5177\u7c7b\u6d4b\u8bd5\n\u251c\u2500\u2500 integration/       # \u96c6\u6210\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 api/          # API \u96c6\u6210\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 database/     # \u6570\u636e\u5e93\u96c6\u6210\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 services/     # \u670d\u52a1\u96c6\u6210\u6d4b\u8bd5\n\u251c\u2500\u2500 e2e/              # \u7aef\u5230\u7aef\u6d4b\u8bd5\n\u251c\u2500\u2500 performance/      # \u6027\u80fd\u6d4b\u8bd5\n\u251c\u2500\u2500 factories/        # \u6d4b\u8bd5\u6570\u636e\u5de5\u5382\n\u2514\u2500\u2500 conftest.py      # pytest \u914d\u7f6e\n</code></pre>"},{"location":"architecture/#_17","title":"\u90e8\u7f72\u67b6\u6784","text":""},{"location":"architecture/#_18","title":"\u5f00\u53d1\u73af\u5883","text":"<ul> <li>Docker Compose\uff1a\u672c\u5730\u5f00\u53d1\u73af\u5883</li> <li>\u70ed\u91cd\u8f7d\uff1a\u4ee3\u7801\u53d8\u66f4\u81ea\u52a8\u91cd\u542f</li> <li>\u8c03\u8bd5\u6a21\u5f0f\uff1a\u8be6\u7ec6\u65e5\u5fd7\u8f93\u51fa</li> </ul>"},{"location":"architecture/#_19","title":"\u751f\u4ea7\u73af\u5883","text":"<ul> <li>Kubernetes\uff1a\u5bb9\u5668\u7f16\u6392</li> <li>Helm Charts\uff1a\u90e8\u7f72\u6a21\u677f</li> <li>\u81ea\u52a8\u6269\u7f29\u5bb9\uff1a\u57fa\u4e8e\u8d1f\u8f7d\u81ea\u52a8\u8c03\u6574</li> <li>\u6eda\u52a8\u66f4\u65b0\uff1a\u96f6\u505c\u673a\u90e8\u7f72</li> </ul>"},{"location":"architecture/#cicd","title":"CI/CD \u6d41\u7a0b","text":""},{"location":"architecture/#github-actions","title":"GitHub Actions \u5de5\u4f5c\u6d41","text":"<ol> <li>\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5</li> <li>Ruff \u4ee3\u7801\u683c\u5f0f\u5316\u548c\u68c0\u67e5</li> <li>MyPy \u7c7b\u578b\u68c0\u67e5</li> <li> <p>\u5b89\u5168\u626b\u63cf</p> </li> <li> <p>\u6d4b\u8bd5\u6267\u884c</p> </li> <li>\u5355\u5143\u6d4b\u8bd5</li> <li>\u96c6\u6210\u6d4b\u8bd5</li> <li> <p>\u8986\u76d6\u7387\u62a5\u544a</p> </li> <li> <p>\u6784\u5efa\u548c\u90e8\u7f72</p> </li> <li>Docker \u955c\u50cf\u6784\u5efa</li> <li>\u5b89\u5168\u626b\u63cf</li> <li>\u90e8\u7f72\u5230\u6d4b\u8bd5/\u751f\u4ea7\u73af\u5883</li> </ol>"},{"location":"architecture/#_20","title":"\u6027\u80fd\u4f18\u5316","text":""},{"location":"architecture/#1","title":"1. \u6570\u636e\u5e93\u4f18\u5316","text":"<ul> <li>\u8fde\u63a5\u6c60\u7ba1\u7406</li> <li>\u67e5\u8be2\u4f18\u5316</li> <li>\u7d22\u5f15\u7b56\u7565</li> <li>\u8bfb\u5199\u5206\u79bb</li> </ul>"},{"location":"architecture/#2","title":"2. \u7f13\u5b58\u7b56\u7565","text":"<ul> <li>Redis \u591a\u7ea7\u7f13\u5b58</li> <li>\u7f13\u5b58\u9884\u70ed</li> <li>\u7f13\u5b58\u66f4\u65b0\u7b56\u7565</li> <li>\u7f13\u5b58\u7a7f\u900f\u4fdd\u62a4</li> </ul>"},{"location":"architecture/#3-api","title":"3. API \u6027\u80fd","text":"<ul> <li>\u5f02\u6b65\u5904\u7406</li> <li>\u8bf7\u6c42\u9650\u6d41</li> <li>\u54cd\u5e94\u538b\u7f29</li> <li>CDN \u52a0\u901f</li> </ul>"},{"location":"architecture/#_21","title":"\u5b89\u5168\u63aa\u65bd","text":"<ol> <li>\u8ba4\u8bc1\u6388\u6743</li> <li>JWT Token \u8ba4\u8bc1</li> <li>RBAC \u6743\u9650\u63a7\u5236</li> <li> <p>API Key \u7ba1\u7406</p> </li> <li> <p>\u6570\u636e\u5b89\u5168</p> </li> <li>\u654f\u611f\u6570\u636e\u52a0\u5bc6</li> <li>SQL \u6ce8\u5165\u9632\u62a4</li> <li>XSS \u9632\u62a4</li> <li> <p>CSRF \u4fdd\u62a4</p> </li> <li> <p>\u7f51\u7edc\u5b89\u5168</p> </li> <li>HTTPS \u5f3a\u5236</li> <li>\u5b89\u5168\u5934\u8bbe\u7f6e</li> <li>CORS \u914d\u7f6e</li> <li>\u8bf7\u6c42\u9650\u6d41</li> </ol>"},{"location":"architecture/#_22","title":"\u76d1\u63a7\u548c\u8fd0\u7ef4","text":""},{"location":"architecture/#1_1","title":"1. \u5e94\u7528\u76d1\u63a7","text":"<ul> <li>\u6027\u80fd\u6307\u6807\u6536\u96c6</li> <li>\u9519\u8bef\u8ffd\u8e2a</li> <li>\u65e5\u5fd7\u805a\u5408</li> <li>\u544a\u8b66\u901a\u77e5</li> </ul>"},{"location":"architecture/#2_1","title":"2. \u57fa\u7840\u8bbe\u65bd\u76d1\u63a7","text":"<ul> <li>\u670d\u52a1\u5668\u76d1\u63a7</li> <li>\u6570\u636e\u5e93\u76d1\u63a7</li> <li>\u7f13\u5b58\u76d1\u63a7</li> <li>\u7f51\u7edc\u76d1\u63a7</li> </ul>"},{"location":"architecture/#_23","title":"\u672a\u6765\u89c4\u5212","text":"<ol> <li>\u5fae\u670d\u52a1\u62c6\u5206</li> <li>\u6309\u4e1a\u52a1\u57df\u62c6\u5206\u670d\u52a1</li> <li>\u670d\u52a1\u7f51\u683c\uff08Istio\uff09</li> <li> <p>\u5206\u5e03\u5f0f\u8ffd\u8e2a</p> </li> <li> <p>\u6027\u80fd\u63d0\u5347</p> </li> <li>GraphQL \u652f\u6301</li> <li>WebSocket \u5b9e\u65f6\u901a\u4fe1</li> <li> <p>\u4e8b\u4ef6\u6eaf\u6e90</p> </li> <li> <p>AI/ML \u589e\u5f3a</p> </li> <li>\u6a21\u578b\u8bad\u7ec3\u7ba1\u9053</li> <li>A/B \u6d4b\u8bd5\u6846\u67b6</li> <li>\u7279\u5f81\u5de5\u7a0b\u5e73\u53f0</li> </ol>"},{"location":"architecture/#_24","title":"\u603b\u7ed3","text":"<p>\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u91c7\u7528\u73b0\u4ee3\u5316\u7684\u67b6\u6784\u8bbe\u8ba1\uff0c\u5177\u6709\u9ad8\u53ef\u6269\u5c55\u6027\u3001\u9ad8\u53ef\u7ef4\u62a4\u6027\u548c\u9ad8\u6027\u80fd\u7684\u7279\u70b9\u3002\u901a\u8fc7\u5408\u7406\u7684\u5206\u5c42\u67b6\u6784\u3001\u8bbe\u8ba1\u6a21\u5f0f\u5e94\u7528\u548c\u6280\u672f\u9009\u578b\uff0c\u7cfb\u7edf\u5177\u5907\u4e86\u5feb\u901f\u8fed\u4ee3\u548c\u6301\u7eed\u4ea4\u4ed8\u7684\u80fd\u529b\u3002</p> <p>\u6d4b\u8bd5\u8986\u76d6\u7387 21.78% \u4fdd\u8bc1\u4e86\u4ee3\u7801\u8d28\u91cf\uff0cMyPy \u96f6\u9519\u8bef\u4fdd\u8bc1\u4e86\u7c7b\u578b\u5b89\u5168\uff0c\u5b8c\u5584\u7684 CI/CD \u6d41\u7a0b\u4fdd\u8bc1\u4e86\u4ea4\u4ed8\u8d28\u91cf\u3002\u8fd9\u662f\u4e00\u4e2a\u6210\u719f\u7684\u4f01\u4e1a\u7ea7\u5e94\u7528\u67b6\u6784\u3002</p>"},{"location":"architecture/ARCHITECTURE/","title":"\ud83c\udfd7\ufe0f \u7cfb\u7edf\u67b6\u6784\u6587\u6863","text":""},{"location":"architecture/ARCHITECTURE/#_2","title":"\u6982\u8ff0","text":"<p>FootballPrediction \u662f\u4e00\u4e2a\u57fa\u4e8e\u73b0\u4ee3 Python \u6280\u672f\u6808\u7684\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\uff0c\u91c7\u7528\u5fae\u670d\u52a1\u67b6\u6784\u548c\u9886\u57df\u9a71\u52a8\u8bbe\u8ba1\uff08DDD\uff09\u539f\u5219\u3002</p>"},{"location":"architecture/ARCHITECTURE/#_3","title":"\u6280\u672f\u6808","text":""},{"location":"architecture/ARCHITECTURE/#_4","title":"\u6838\u5fc3\u6846\u67b6","text":"<ul> <li>FastAPI - \u73b0\u4ee3\u3001\u5feb\u901f\u7684 Web \u6846\u67b6\uff0c\u652f\u6301\u5f02\u6b65\u64cd\u4f5c</li> <li>SQLAlchemy 2.0 - \u5f02\u6b65 ORM\uff0c\u652f\u6301\u591a\u79cd\u6570\u636e\u5e93</li> <li>Pydantic - \u6570\u636e\u9a8c\u8bc1\u548c\u5e8f\u5217\u5316</li> <li>Alembic - \u6570\u636e\u5e93\u8fc1\u79fb\u5de5\u5177</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_5","title":"\u6570\u636e\u5b58\u50a8","text":"<ul> <li>PostgreSQL - \u4e3b\u6570\u636e\u5e93</li> <li>Redis - \u7f13\u5b58\u548c\u4f1a\u8bdd\u5b58\u50a8</li> <li>MLflow - \u673a\u5668\u5b66\u4e60\u6a21\u578b\u7ba1\u7406</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_6","title":"\u57fa\u7840\u8bbe\u65bd","text":"<ul> <li>Docker &amp; Docker Compose - \u5bb9\u5668\u5316\u90e8\u7f72</li> <li>Nginx - \u53cd\u5411\u4ee3\u7406\u548c\u8d1f\u8f7d\u5747\u8861</li> <li>GitHub Actions - CI/CD \u6d41\u6c34\u7ebf</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_7","title":"\u7cfb\u7edf\u67b6\u6784\u56fe","text":"<pre><code>graph TB\n    subgraph \"\u5ba2\u6237\u7aef\u5c42\"\n        A[Web\u524d\u7aef]\n        B[\u79fb\u52a8\u7aef]\n        C[\u7b2c\u4e09\u65b9\u5e94\u7528]\n    end\n\n    subgraph \"API\u7f51\u5173\u5c42\"\n        D[Nginx]\n        E[FastAPI\u5e94\u7528]\n    end\n\n    subgraph \"\u4e1a\u52a1\u903b\u8f91\u5c42\"\n        F[\u9884\u6d4b\u670d\u52a1]\n        G[\u6570\u636e\u6536\u96c6\u670d\u52a1]\n        H[\u5206\u6790\u670d\u52a1]\n    end\n\n    subgraph \"\u6570\u636e\u5c42\"\n        I[PostgreSQL]\n        J[Redis\u7f13\u5b58]\n        K[\u5916\u90e8API]\n    end\n\n    subgraph \"ML\u7ec4\u4ef6\"\n        L[\u7279\u5f81\u5de5\u7a0b]\n        M[\u6a21\u578b\u8bad\u7ec3]\n        N[\u6a21\u578b\u63a8\u7406]\n    end\n\n    A --&gt; D\n    B --&gt; D\n    C --&gt; D\n    D --&gt; E\n    E --&gt; F\n    E --&gt; G\n    E --&gt; H\n    F --&gt; I\n    F --&gt; J\n    G --&gt; I\n    G --&gt; J\n    G --&gt; K\n    H --&gt; I\n    H --&gt; J\n    F --&gt; L\n    L --&gt; M\n    M --&gt; N\n    N --&gt; F\n</code></pre>"},{"location":"architecture/ARCHITECTURE/#_8","title":"\u76ee\u5f55\u7ed3\u6784","text":"<pre><code>FootballPrediction/\n\u251c\u2500\u2500 src/                          # \u6e90\u4ee3\u7801\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 api/                      # API \u5c42\n\u2502   \u2502   \u251c\u2500\u2500 endpoints/           # API \u7aef\u70b9\u5b9e\u73b0\n\u2502   \u2502   \u251c\u2500\u2500 schemas/             # Pydantic \u6570\u636e\u6a21\u578b\n\u2502   \u2502   \u2514\u2500\u2500 middleware/          # \u4e2d\u95f4\u4ef6\n\u2502   \u251c\u2500\u2500 core/                     # \u6838\u5fc3\u914d\u7f6e\n\u2502   \u2502   \u251c\u2500\u2500 config.py            # \u5e94\u7528\u914d\u7f6e\n\u2502   \u2502   \u251c\u2500\u2500 exceptions.py        # \u81ea\u5b9a\u4e49\u5f02\u5e38\n\u2502   \u2502   \u2514\u2500\u2500 logging.py           # \u65e5\u5fd7\u914d\u7f6e\n\u2502   \u251c\u2500\u2500 database/                 # \u6570\u636e\u5e93\u5c42\n\u2502   \u2502   \u251c\u2500\u2500 models/              # SQLAlchemy \u6a21\u578b\n\u2502   \u2502   \u251c\u2500\u2500 migrations/          # \u6570\u636e\u5e93\u8fc1\u79fb\n\u2502   \u2502   \u2514\u2500\u2500 connection.py        # \u6570\u636e\u5e93\u8fde\u63a5\n\u2502   \u251c\u2500\u2500 services/                 # \u4e1a\u52a1\u903b\u8f91\u5c42\n\u2502   \u2502   \u251c\u2500\u2500 prediction/          # \u9884\u6d4b\u670d\u52a1\n\u2502   \u2502   \u251c\u2500\u2500 data/                # \u6570\u636e\u5904\u7406\n\u2502   \u2502   \u2514\u2500\u2500 audit/               # \u5ba1\u8ba1\u670d\u52a1\n\u2502   \u251c\u2500\u2500 models/                   # ML \u6a21\u578b\n\u2502   \u2502   \u251c\u2500\u2500 training/            # \u6a21\u578b\u8bad\u7ec3\n\u2502   \u2502   \u251c\u2500\u2500 inference/           # \u6a21\u578b\u63a8\u7406\n\u2502   \u2502   \u2514\u2500\u2500 evaluation/          # \u6a21\u578b\u8bc4\u4f30\n\u2502   \u251c\u2500\u2500 collectors/               # \u6570\u636e\u6536\u96c6\u5668\n\u2502   \u2502   \u251c\u2500\u2500 fixtures.py          # \u8d5b\u7a0b\u6570\u636e\n\u2502   \u2502   \u251c\u2500\u2500 odds.py              # \u8d54\u7387\u6570\u636e\n\u2502   \u2502   \u2514\u2500\u2500 scores.py            # \u6bd4\u5206\u6570\u636e\n\u2502   \u251c\u2500\u2500 cache/                    # \u7f13\u5b58\u5c42\n\u2502   \u2502   \u251c\u2500\u2500 redis_manager.py     # Redis \u7ba1\u7406\u5668\n\u2502   \u2502   \u2514\u2500\u2500 ttl_cache.py         # TTL \u7f13\u5b58\n\u2502   \u251c\u2500\u2500 streaming/                # \u6d41\u5904\u7406\n\u2502   \u2502   \u251c\u2500\u2500 kafka/               # Kafka \u7ec4\u4ef6\n\u2502   \u2502   \u2514\u2500\u2500 processors/          # \u6570\u636e\u5904\u7406\u5668\n\u2502   \u2514\u2500\u2500 utils/                    # \u5de5\u5177\u6a21\u5757\n\u2502       \u251c\u2500\u2500 validators.py        # \u6570\u636e\u9a8c\u8bc1\n\u2502       \u251c\u2500\u2500 retry.py             # \u91cd\u8bd5\u673a\u5236\n\u2502       \u2514\u2500\u2500 logger.py            # \u65e5\u5fd7\u5de5\u5177\n\u251c\u2500\u2500 tests/                        # \u6d4b\u8bd5\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 unit/                    # \u5355\u5143\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 integration/             # \u96c6\u6210\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 e2e/                     # \u7aef\u5230\u7aef\u6d4b\u8bd5\n\u251c\u2500\u2500 scripts/                      # \u811a\u672c\u5de5\u5177\n\u2502   \u251c\u2500\u2500 deployment/              # \u90e8\u7f72\u811a\u672c\n\u2502   \u251c\u2500\u2500 maintenance/             # \u7ef4\u62a4\u811a\u672c\n\u2502   \u2514\u2500\u2500 security/                # \u5b89\u5168\u5de5\u5177\n\u251c\u2500\u2500 docs/                         # \u6587\u6863\n\u251c\u2500\u2500 docker/                       # Docker \u914d\u7f6e\n\u251c\u2500\u2500 .github/                      # GitHub \u914d\u7f6e\n\u2502   \u2514\u2500\u2500 workflows/               # CI/CD \u5de5\u4f5c\u6d41\n\u2514\u2500\u2500 requirements/                 # \u4f9d\u8d56\u7ba1\u7406\n</code></pre>"},{"location":"architecture/ARCHITECTURE/#_9","title":"\u6838\u5fc3\u7ec4\u4ef6","text":""},{"location":"architecture/ARCHITECTURE/#1-api","title":"1. API \u5c42","text":"<p>\u8d1f\u8d23\u5904\u7406 HTTP \u8bf7\u6c42\u548c\u54cd\u5e94\uff0c\u9075\u5faa RESTful \u8bbe\u8ba1\u539f\u5219\u3002</p> <ul> <li>\u5065\u5eb7\u68c0\u67e5 (<code>/health</code>) - \u7cfb\u7edf\u5065\u5eb7\u72b6\u6001</li> <li>\u9884\u6d4b API (<code>/predictions</code>) - \u9884\u6d4b\u670d\u52a1\u63a5\u53e3</li> <li>\u6570\u636e API (<code>/data</code>) - \u6570\u636e\u67e5\u8be2\u63a5\u53e3</li> <li>\u7ba1\u7406 API (<code>/admin</code>) - \u7ba1\u7406\u529f\u80fd\u63a5\u53e3</li> </ul>"},{"location":"architecture/ARCHITECTURE/#2","title":"2. \u670d\u52a1\u5c42","text":"<p>\u5b9e\u73b0\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\uff0c\u91c7\u7528\u4f9d\u8d56\u6ce8\u5165\u548c\u63a5\u53e3\u9694\u79bb\u539f\u5219\u3002</p>"},{"location":"architecture/ARCHITECTURE/#_10","title":"\u9884\u6d4b\u670d\u52a1","text":"<ul> <li>\u5b9e\u65f6\u9884\u6d4b\u751f\u6210</li> <li>\u5386\u53f2\u9884\u6d4b\u67e5\u8be2</li> <li>\u6279\u91cf\u9884\u6d4b\u5904\u7406</li> <li>\u6a21\u578b\u7248\u672c\u7ba1\u7406</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_11","title":"\u6570\u636e\u6536\u96c6\u670d\u52a1","text":"<ul> <li>\u5916\u90e8 API \u6570\u636e\u83b7\u53d6</li> <li>\u6570\u636e\u6e05\u6d17\u548c\u9a8c\u8bc1</li> <li>\u5b9e\u65f6\u6570\u636e\u6d41\u5904\u7406</li> <li>\u6570\u636e\u5b58\u50a8\u4f18\u5316</li> </ul>"},{"location":"architecture/ARCHITECTURE/#3","title":"3. \u6570\u636e\u5c42","text":"<p>\u4f7f\u7528 Repository \u6a21\u5f0f\u62bd\u8c61\u6570\u636e\u8bbf\u95ee\uff0c\u652f\u6301\u591a\u79cd\u6570\u636e\u6e90\u3002</p>"},{"location":"architecture/ARCHITECTURE/#postgresql","title":"\u4e3b\u6570\u636e\u5e93 (PostgreSQL)","text":"<ul> <li>\u6bd4\u8d5b\u4fe1\u606f</li> <li>\u9884\u6d4b\u7ed3\u679c</li> <li>\u7528\u6237\u6570\u636e</li> <li>\u5ba1\u8ba1\u65e5\u5fd7</li> </ul>"},{"location":"architecture/ARCHITECTURE/#redis","title":"\u7f13\u5b58\u5c42 (Redis)","text":"<ul> <li>\u9884\u6d4b\u7ed3\u679c\u7f13\u5b58</li> <li>\u4f1a\u8bdd\u5b58\u50a8</li> <li>\u5b9e\u65f6\u6bd4\u5206\u7f13\u5b58</li> <li>\u5206\u5e03\u5f0f\u9501</li> </ul>"},{"location":"architecture/ARCHITECTURE/#4-ml","title":"4. ML \u7ec4\u4ef6","text":"<p>\u7aef\u5230\u7aef\u7684\u673a\u5668\u5b66\u4e60\u6d41\u6c34\u7ebf\u3002</p>"},{"location":"architecture/ARCHITECTURE/#_12","title":"\u7279\u5f81\u5de5\u7a0b","text":"<ul> <li>\u5386\u53f2\u6570\u636e\u5904\u7406</li> <li>\u7279\u5f81\u63d0\u53d6\u548c\u8f6c\u6362</li> <li>\u7279\u5f81\u5b58\u50a8 (FeastAPI/Feast)</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_13","title":"\u6a21\u578b\u7ba1\u7406","text":"<ul> <li>\u6a21\u578b\u8bad\u7ec3 (MLflow)</li> <li>\u6a21\u578b\u7248\u672c\u63a7\u5236</li> <li>A/B \u6d4b\u8bd5\u6846\u67b6</li> <li>\u6a21\u578b\u76d1\u63a7</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_14","title":"\u6570\u636e\u6d41","text":""},{"location":"architecture/ARCHITECTURE/#1","title":"1. \u6570\u636e\u6536\u96c6\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant ExternalAPI as \u5916\u90e8API\n    participant Collector as \u6570\u636e\u6536\u96c6\u5668\n    participant Processor as \u6570\u636e\u5904\u7406\u5668\n    participant DB as PostgreSQL\n    participant Cache as Redis\n    participant ML as ML\u6a21\u578b\n\n    ExternalAPI-&gt;&gt;Collector: \u63a8\u9001\u6570\u636e\n    Collector-&gt;&gt;Processor: \u539f\u59cb\u6570\u636e\n    Processor-&gt;&gt;Processor: \u6e05\u6d17\u9a8c\u8bc1\n    Processor-&gt;&gt;DB: \u5b58\u50a8\u5904\u7406\u540e\u6570\u636e\n    Processor-&gt;&gt;Cache: \u66f4\u65b0\u7f13\u5b58\n    Processor-&gt;&gt;ML: \u89e6\u53d1\u6a21\u578b\u91cd\u8bad\u7ec3\n</code></pre>"},{"location":"architecture/ARCHITECTURE/#2_1","title":"2. \u9884\u6d4b\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant Client as \u5ba2\u6237\u7aef\n    participant API as FastAPI\n    participant Service as \u9884\u6d4b\u670d\u52a1\n    participant Cache as Redis\n    participant ML as ML\u6a21\u578b\n    participant DB as PostgreSQL\n\n    Client-&gt;&gt;API: \u8bf7\u6c42\u9884\u6d4b\n    API-&gt;&gt;Service: \u8c03\u7528\u9884\u6d4b\u670d\u52a1\n    Service-&gt;&gt;Cache: \u68c0\u67e5\u7f13\u5b58\n    alt \u7f13\u5b58\u547d\u4e2d\n        Cache--&gt;&gt;Service: \u8fd4\u56de\u7f13\u5b58\u7ed3\u679c\n    else \u7f13\u5b58\u672a\u547d\u4e2d\n        Service-&gt;&gt;ML: \u8c03\u7528\u6a21\u578b\u63a8\u7406\n        ML--&gt;&gt;Service: \u8fd4\u56de\u9884\u6d4b\u7ed3\u679c\n        Service-&gt;&gt;Cache: \u66f4\u65b0\u7f13\u5b58\n        Service-&gt;&gt;DB: \u5b58\u50a8\u9884\u6d4b\u8bb0\u5f55\n    end\n    Service--&gt;&gt;API: \u8fd4\u56de\u9884\u6d4b\u7ed3\u679c\n    API--&gt;&gt;Client: JSON\u54cd\u5e94\n</code></pre>"},{"location":"architecture/ARCHITECTURE/#3_1","title":"3. \u7528\u6237\u8ba4\u8bc1\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant User as \u7528\u6237\n    participant Auth as \u8ba4\u8bc1\u670d\u52a1\n    participant DB as PostgreSQL\n    participant JWT as JWT\u670d\u52a1\n    participant API as FastAPI\n\n    User-&gt;&gt;Auth: \u63d0\u4ea4\u7528\u6237\u540d\u5bc6\u7801\n    Auth-&gt;&gt;DB: \u9a8c\u8bc1\u51ed\u636e\n    DB--&gt;&gt;Auth: \u8fd4\u56de\u7528\u6237\u4fe1\u606f\n    Auth-&gt;&gt;JWT: \u751f\u6210Token\n    JWT--&gt;&gt;Auth: \u8fd4\u56deJWT Token\n    Auth--&gt;&gt;User: \u8fd4\u56deToken\n\n    Note over User,API: \u7528\u6237\u4f7f\u7528Token\u8bbf\u95eeAPI\n    User-&gt;&gt;API: \u8bf7\u6c42 + JWT Token\n    API-&gt;&gt;JWT: \u9a8c\u8bc1Token\n    JWT--&gt;&gt;API: \u8fd4\u56de\u7528\u6237\u4fe1\u606f\n    API--&gt;&gt;User: \u8fd4\u56deAPI\u54cd\u5e94\n</code></pre>"},{"location":"architecture/ARCHITECTURE/#4","title":"4. \u6a21\u578b\u8bad\u7ec3\u548c\u90e8\u7f72\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant Scheduler as \u8c03\u5ea6\u5668\n    participant DataProcessor as \u6570\u636e\u5904\u7406\u5668\n    participant FeatureStore as \u7279\u5f81\u5b58\u50a8\n    participant MLflow as MLflow\n    participant ModelRegistry as \u6a21\u578b\u6ce8\u518c\u8868\n    participant API as FastAPI\n    participant Monitor as \u76d1\u63a7\u670d\u52a1\n\n    Scheduler-&gt;&gt;DataProcessor: \u89e6\u53d1\u6570\u636e\u6536\u96c6\n    DataProcessor-&gt;&gt;FeatureStore: \u8ba1\u7b97\u7279\u5f81\n    FeatureStore--&gt;&gt;DataProcessor: \u7279\u5f81\u5c31\u7eea\n    DataProcessor-&gt;&gt;MLflow: \u5f00\u59cb\u6a21\u578b\u8bad\u7ec3\n    MLflow-&gt;&gt;MLflow: \u8bad\u7ec3\u6a21\u578b\n    MLflow-&gt;&gt;ModelRegistry: \u6ce8\u518c\u65b0\u6a21\u578b\n    ModelRegistry--&gt;&gt;MLflow: \u6a21\u578b\u5df2\u6ce8\u518c\n    MLflow--&gt;&gt;API: \u901a\u77e5\u65b0\u6a21\u578b\u53ef\u7528\n    API-&gt;&gt;API: \u52a0\u8f7d\u65b0\u6a21\u578b\n    API-&gt;&gt;Monitor: \u62a5\u544a\u6a21\u578b\u66f4\u65b0\n    Monitor-&gt;&gt;Monitor: \u5f00\u59cb\u76d1\u63a7\u65b0\u6a21\u578b\n</code></pre>"},{"location":"architecture/ARCHITECTURE/#5","title":"5. \u5b9e\u65f6\u6bd4\u5206\u66f4\u65b0\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant Webhook as Webhook\u63a5\u6536\u5668\n    participant Queue as \u6d88\u606f\u961f\u5217\n    participant Processor as \u6bd4\u5206\u5904\u7406\u5668\n    participant Cache as Redis\n    participant WebSocket as WebSocket\u670d\u52a1\n    participant Client as \u5ba2\u6237\u7aef\n\n    Webhook-&gt;&gt;Queue: \u63a8\u9001\u5b9e\u65f6\u6bd4\u5206\n    Queue-&gt;&gt;Processor: \u6d88\u8d39\u6d88\u606f\n    Processor-&gt;&gt;Processor: \u89e3\u6790\u6bd4\u5206\u6570\u636e\n    Processor-&gt;&gt;Cache: \u66f4\u65b0\u7f13\u5b58\n    Processor-&gt;&gt;WebSocket: \u63a8\u9001\u66f4\u65b0\n    WebSocket-&gt;&gt;Client: \u5e7f\u64ad\u6bd4\u5206\u53d8\u5316\n</code></pre>"},{"location":"architecture/ARCHITECTURE/#_15","title":"\u6027\u80fd\u57fa\u51c6","text":""},{"location":"architecture/ARCHITECTURE/#api","title":"API \u6027\u80fd\u6307\u6807","text":"\u7aef\u70b9 \u5e73\u5747\u54cd\u5e94\u65f6\u95f4 P95 \u54cd\u5e94\u65f6\u95f4 P99 \u54cd\u5e94\u65f6\u95f4 QPS <code>/health</code> 15ms 25ms 45ms 5000 <code>/predictions/match/{id}</code> 125ms 200ms 350ms 1000 <code>/predictions/batch</code> 450ms 800ms 1200ms 100 <code>/features/match/{id}</code> 85ms 150ms 250ms 2000 <code>/models/info</code> 35ms 60ms 100ms 3000"},{"location":"architecture/ARCHITECTURE/#_16","title":"\u7cfb\u7edf\u8d44\u6e90\u4f7f\u7528","text":"\u6307\u6807 \u5e73\u5747\u503c \u5cf0\u503c \u9650\u5236 CPU \u4f7f\u7528\u7387 35% 75% 80% \u5185\u5b58\u4f7f\u7528 2.5GB 4.5GB 8GB \u6570\u636e\u5e93\u8fde\u63a5 15 45 100 Redis \u5185\u5b58 512MB 1.2GB 2GB"},{"location":"architecture/ARCHITECTURE/#_17","title":"\u6a21\u578b\u6027\u80fd","text":"\u6a21\u578b\u7248\u672c \u51c6\u786e\u7387 \u7cbe\u786e\u7387 \u53ec\u56de\u7387 F1\u5206\u6570 AUC-ROC v1.0.0 0.62 0.60 0.58 0.59 0.65 v2.0.0 0.66 0.64 0.62 0.63 0.69 v2.1.0 0.68 0.66 0.64 0.65 0.72"},{"location":"architecture/ARCHITECTURE/#_18","title":"\u6269\u5c55\u6027\u8bbe\u8ba1","text":""},{"location":"architecture/ARCHITECTURE/#_19","title":"\u6c34\u5e73\u6269\u5c55\u7b56\u7565","text":"<ol> <li>\u65e0\u72b6\u6001\u670d\u52a1\u8bbe\u8ba1</li> <li>API \u670d\u52a1\u5b8c\u5168\u65e0\u72b6\u6001</li> <li>\u652f\u6301\u591a\u5b9e\u4f8b\u90e8\u7f72</li> <li> <p>\u4f7f\u7528\u8d1f\u8f7d\u5747\u8861\u5668\u5206\u53d1\u8bf7\u6c42</p> </li> <li> <p>\u6570\u636e\u5e93\u6269\u5c55 <pre><code># \u8bfb\u5199\u5206\u79bb\u914d\u7f6e\ndatabase:\n  read:\n    hosts: [read-replica-1, read-replica-2]\n    max_connections: 50\n  write:\n    host: primary-db\n    max_connections: 20\n</code></pre></p> </li> <li> <p>\u7f13\u5b58\u7b56\u7565</p> </li> <li>Redis \u96c6\u7fa4\u90e8\u7f72</li> <li>\u6570\u636e\u5206\u7247\u5b58\u50a8</li> <li>\u8bfb\u5199\u5206\u79bb</li> </ol>"},{"location":"architecture/ARCHITECTURE/#_20","title":"\u5bb9\u91cf\u89c4\u5212","text":"\u7528\u6237\u89c4\u6a21 API\u5b9e\u4f8b \u6570\u636e\u5e93 Redis \u9884\u6d4b\u8bf7\u6c42/\u5929 1,000 2 1\u4e3b1\u4ece 1\u8282\u70b9 10,000 10,000 5 1\u4e3b2\u4ece 3\u8282\u70b9\u96c6\u7fa4 100,000 100,000 20 1\u4e3b5\u4ece 6\u8282\u70b9\u96c6\u7fa4 1,000,000"},{"location":"architecture/ARCHITECTURE/#_21","title":"\u707e\u5907\u7b56\u7565","text":""},{"location":"architecture/ARCHITECTURE/#_22","title":"\u6570\u636e\u5907\u4efd","text":"<ol> <li>\u6570\u636e\u5e93\u5907\u4efd</li> <li>\u6bcf\u65e5\u5168\u91cf\u5907\u4efd</li> <li>\u6bcf\u5c0f\u65f6\u589e\u91cf\u5907\u4efd</li> <li> <p>\u8de8\u5730\u57df\u5b58\u50a8\u5907\u4efd</p> </li> <li> <p>Redis \u5907\u4efd</p> </li> <li>\u6bcf6\u5c0f\u65f6 RDB \u5feb\u7167</li> <li>AOF \u6301\u4e45\u5316</li> <li>\u4e3b\u4ece\u540c\u6b65</li> </ol>"},{"location":"architecture/ARCHITECTURE/#_23","title":"\u6545\u969c\u6062\u590d","text":"<ol> <li>RTO\uff08\u6062\u590d\u65f6\u95f4\u76ee\u6807\uff09\uff1a15\u5206\u949f</li> <li>RPO\uff08\u6062\u590d\u70b9\u76ee\u6807\uff09\uff1a5\u5206\u949f</li> <li>\u53ef\u7528\u6027\u76ee\u6807\uff1a99.9%</li> </ol>"},{"location":"architecture/ARCHITECTURE/#_24","title":"\u76d1\u63a7\u544a\u8b66","text":"\u6307\u6807 \u8b66\u544a\u9608\u503c \u4e25\u91cd\u9608\u503c API \u54cd\u5e94\u65f6\u95f4 &gt;500ms &gt;1000ms \u9519\u8bef\u7387 &gt;5% &gt;10% CPU \u4f7f\u7528\u7387 &gt;70% &gt;85% \u5185\u5b58\u4f7f\u7528\u7387 &gt;80% &gt;90% \u6570\u636e\u5e93\u8fde\u63a5 &gt;80 &gt;95"},{"location":"architecture/ARCHITECTURE/#_25","title":"\u5b89\u5168\u67b6\u6784","text":""},{"location":"architecture/ARCHITECTURE/#1_1","title":"1. \u8ba4\u8bc1\u4e0e\u6388\u6743","text":"<ul> <li>JWT Token \u8ba4\u8bc1</li> <li>RBAC \u6743\u9650\u63a7\u5236</li> <li>API \u5bc6\u94a5\u7ba1\u7406</li> <li>OAuth2 \u96c6\u6210</li> </ul>"},{"location":"architecture/ARCHITECTURE/#2_2","title":"2. \u6570\u636e\u5b89\u5168","text":"<ul> <li>\u654f\u611f\u6570\u636e\u52a0\u5bc6\u5b58\u50a8</li> <li>\u4f20\u8f93\u5c42 TLS \u52a0\u5bc6</li> <li>SQL \u6ce8\u5165\u9632\u62a4</li> <li>XSS \u9632\u62a4</li> </ul>"},{"location":"architecture/ARCHITECTURE/#3_2","title":"3. \u57fa\u7840\u8bbe\u65bd\u5b89\u5168","text":"<ul> <li>Docker \u5b89\u5168\u914d\u7f6e</li> <li>\u7f51\u7edc\u9694\u79bb</li> <li>\u5bc6\u94a5\u7ba1\u7406</li> <li>\u5b89\u5168\u626b\u63cf</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_26","title":"\u6027\u80fd\u4f18\u5316","text":""},{"location":"architecture/ARCHITECTURE/#1_2","title":"1. \u7f13\u5b58\u7b56\u7565","text":"<ul> <li>\u591a\u7ea7\u7f13\u5b58\u67b6\u6784</li> <li>\u7f13\u5b58\u9884\u70ed</li> <li>\u7f13\u5b58\u7a7f\u900f\u9632\u62a4</li> <li>\u7f13\u5b58\u96ea\u5d29\u9632\u62a4</li> </ul>"},{"location":"architecture/ARCHITECTURE/#2_3","title":"2. \u6570\u636e\u5e93\u4f18\u5316","text":"<ul> <li>\u7d22\u5f15\u4f18\u5316</li> <li>\u67e5\u8be2\u4f18\u5316</li> <li>\u8fde\u63a5\u6c60\u7ba1\u7406</li> <li>\u8bfb\u5199\u5206\u79bb</li> </ul>"},{"location":"architecture/ARCHITECTURE/#3_3","title":"3. \u5f02\u6b65\u5904\u7406","text":"<ul> <li>\u5f02\u6b65 API \u8bbe\u8ba1</li> <li>\u540e\u53f0\u4efb\u52a1\u961f\u5217</li> <li>\u6279\u5904\u7406\u4f18\u5316</li> <li>\u6d41\u5f0f\u5904\u7406</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_27","title":"\u76d1\u63a7\u4e0e\u53ef\u89c2\u6d4b\u6027","text":""},{"location":"architecture/ARCHITECTURE/#1_3","title":"1. \u65e5\u5fd7\u7cfb\u7edf","text":"<ul> <li>\u7ed3\u6784\u5316\u65e5\u5fd7</li> <li>\u65e5\u5fd7\u805a\u5408</li> <li>\u9519\u8bef\u8ffd\u8e2a</li> <li>\u5ba1\u8ba1\u65e5\u5fd7</li> </ul>"},{"location":"architecture/ARCHITECTURE/#2_4","title":"2. \u6307\u6807\u76d1\u63a7","text":"<ul> <li>Prometheus \u6307\u6807</li> <li>\u4e1a\u52a1\u6307\u6807</li> <li>\u6027\u80fd\u6307\u6807</li> <li>\u544a\u8b66\u89c4\u5219</li> </ul>"},{"location":"architecture/ARCHITECTURE/#3_4","title":"3. \u94fe\u8def\u8ffd\u8e2a","text":"<ul> <li>\u5206\u5e03\u5f0f\u8ffd\u8e2a</li> <li>\u8bf7\u6c42\u94fe\u8def</li> <li>\u6027\u80fd\u74f6\u9888\u5206\u6790</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_28","title":"\u90e8\u7f72\u67b6\u6784","text":""},{"location":"architecture/ARCHITECTURE/#1_4","title":"1. \u5bb9\u5668\u5316\u90e8\u7f72","text":"<ul> <li>Docker \u955c\u50cf</li> <li>\u591a\u9636\u6bb5\u6784\u5efa</li> <li>\u955c\u50cf\u4f18\u5316</li> <li>\u5b89\u5168\u626b\u63cf</li> </ul>"},{"location":"architecture/ARCHITECTURE/#2_5","title":"2. \u7f16\u6392\u7ba1\u7406","text":"<ul> <li>Docker Compose</li> <li>Kubernetes\uff08\u53ef\u9009\uff09</li> <li>\u670d\u52a1\u53d1\u73b0</li> <li>\u8d1f\u8f7d\u5747\u8861</li> </ul>"},{"location":"architecture/ARCHITECTURE/#3-cicd","title":"3. CI/CD \u6d41\u7a0b","text":"<ul> <li>\u81ea\u52a8\u5316\u6d4b\u8bd5</li> <li>\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5</li> <li>\u5b89\u5168\u626b\u63cf</li> <li>\u81ea\u52a8\u90e8\u7f72</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_29","title":"\u6269\u5c55\u6027\u8bbe\u8ba1","text":""},{"location":"architecture/ARCHITECTURE/#1_5","title":"1. \u6c34\u5e73\u6269\u5c55","text":"<ul> <li>\u65e0\u72b6\u6001\u670d\u52a1\u8bbe\u8ba1</li> <li>\u6570\u636e\u5e93\u5206\u7247</li> <li>\u7f13\u5b58\u96c6\u7fa4</li> <li>\u5fae\u670d\u52a1\u62c6\u5206</li> </ul>"},{"location":"architecture/ARCHITECTURE/#2_6","title":"2. \u529f\u80fd\u6269\u5c55","text":"<ul> <li>\u63d2\u4ef6\u5316\u67b6\u6784</li> <li>\u914d\u7f6e\u9a71\u52a8</li> <li>\u70ed\u66f4\u65b0</li> <li>\u7070\u5ea6\u53d1\u5e03</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_30","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u4ee3\u7801\u8d28\u91cf</li> <li>\u7c7b\u578b\u6ce8\u89e3</li> <li>\u6587\u6863\u5b57\u7b26\u4e32</li> <li>\u5355\u4e00\u804c\u8d23\u539f\u5219</li> <li> <p>\u4f9d\u8d56\u6ce8\u5165</p> </li> <li> <p>\u6d4b\u8bd5\u7b56\u7565</p> </li> <li>\u6d4b\u8bd5\u91d1\u5b57\u5854</li> <li>\u6d4b\u8bd5\u9694\u79bb</li> <li>Mock \u4f7f\u7528</li> <li> <p>\u8986\u76d6\u7387\u8981\u6c42</p> </li> <li> <p>\u9519\u8bef\u5904\u7406</p> </li> <li>\u7edf\u4e00\u5f02\u5e38\u5904\u7406</li> <li>\u9519\u8bef\u7801\u89c4\u8303</li> <li>\u91cd\u8bd5\u673a\u5236</li> <li> <p>\u7194\u65ad\u5668\u6a21\u5f0f</p> </li> <li> <p>\u6027\u80fd\u8003\u8651</p> </li> <li>\u5f02\u6b65\u4f18\u5148</li> <li>\u6279\u91cf\u5904\u7406</li> <li>\u8d44\u6e90\u6c60\u5316</li> <li>\u9884\u52a0\u8f7d\u4f18\u5316</li> </ol>"},{"location":"architecture/ARCHITECTURE/#_31","title":"\ud83d\udd17 \u76f8\u5173\u6587\u6863\u94fe\u63a5","text":""},{"location":"architecture/ARCHITECTURE/#_32","title":"\ud83d\udcda \u6838\u5fc3\u67b6\u6784\u6587\u6863","text":"<ul> <li>\u6570\u636e\u5e93\u67b6\u6784\u8bbe\u8ba1 - \u5b8c\u6574\u7684\u6570\u636e\u5e93\u8868\u7ed3\u6784\u3001\u7d22\u5f15\u7b56\u7565\u548c\u6027\u80fd\u4f18\u5316\u6307\u5357</li> <li>\u7f13\u5b58\u5b9e\u73b0\u8bbe\u8ba1 - Redis\u7f13\u5b58\u67b6\u6784\u548c\u7f13\u5b58\u7b56\u7565\u8bbe\u8ba1</li> <li>\u91cd\u8bd5\u673a\u5236\u8bbe\u8ba1 - \u5bb9\u9519\u548c\u91cd\u8bd5\u673a\u5236\u7684\u8be6\u7ec6\u8bbe\u8ba1</li> <li>\u67b6\u6784\u6539\u8fdb\u65b9\u6848 - \u7cfb\u7edf\u67b6\u6784\u7684\u6f14\u8fdb\u548c\u4f18\u5316\u5efa\u8bae</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_33","title":"\ud83d\udee0\ufe0f \u5f00\u53d1\u548c\u90e8\u7f72","text":"<ul> <li>\u5f00\u53d1\u6307\u5357 - \u5b8c\u6574\u7684\u5f00\u53d1\u73af\u5883\u642d\u5efa\u548c\u7f16\u7801\u89c4\u8303</li> <li>\u751f\u4ea7\u90e8\u7f72\u6307\u5357 - \u751f\u4ea7\u73af\u5883\u90e8\u7f72\u548c\u8fd0\u7ef4\u6307\u5357</li> <li>\u76d1\u63a7\u7cfb\u7edf\u67b6\u6784 - \u76d1\u63a7\u548c\u53ef\u89c2\u6d4b\u6027\u67b6\u6784\u8bbe\u8ba1</li> <li>CLAUDE.md - AI\u8f85\u52a9\u5f00\u53d1\u6307\u5bfc\u548c\u5de5\u4f5c\u6d41\u7a0b</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_34","title":"\ud83e\uddea \u6d4b\u8bd5\u548c\u8d28\u91cf","text":"<ul> <li>\u6d4b\u8bd5\u7b56\u7565\u6587\u6863 - \u5b8c\u6574\u7684\u6d4b\u8bd5\u7b56\u7565\u548c\u8d28\u91cf\u4fdd\u8bc1\u4f53\u7cfb</li> <li>API\u6587\u6863 - REST API\u63a5\u53e3\u89c4\u8303\u548c\u4f7f\u7528\u793a\u4f8b</li> <li>\u672f\u8bed\u8868 - \u9879\u76ee\u4e13\u4e1a\u672f\u8bed\u548c\u6982\u5ff5\u5b9a\u4e49</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_35","title":"\ud83d\udcca \u4e1a\u52a1\u548c\u6570\u636e","text":"<ul> <li>\u6570\u636e\u91c7\u96c6\u914d\u7f6e - \u6570\u636e\u91c7\u96c6\u548c\u5904\u7406\u7ba1\u9053\u914d\u7f6e</li> <li>\u673a\u5668\u5b66\u4e60\u6a21\u578b\u6307\u5357 - ML\u6a21\u578b\u5f00\u53d1\u548c\u90e8\u7f72\u6307\u5357</li> <li>\u9879\u76ee\u7d22\u5f15 - \u5b8c\u6574\u7684\u6587\u6863\u5bfc\u822a\u548c\u5165\u53e3</li> </ul>"},{"location":"architecture/ARCHITECTURE/#_36","title":"\ud83d\udd27 \u8fd0\u7ef4\u548c\u76d1\u63a7","text":"<ul> <li>\u8fd0\u7ef4\u624b\u518c - \u8fd0\u7ef4\u64cd\u4f5c\u6307\u5357\u548c\u6545\u969c\u6392\u9664</li> <li>\u7cfb\u7edf\u76d1\u63a7 - \u76d1\u63a7\u7cfb\u7edf\u914d\u7f6e\u548c\u544a\u8b66\u8bbe\u7f6e</li> <li>\u5b89\u5168\u914d\u7f6e - \u7cfb\u7edf\u5b89\u5168\u914d\u7f6e\u548c\u6700\u4f73\u5b9e\u8df5</li> </ul> <p>\u6587\u6863\u7ef4\u62a4: \u672c\u67b6\u6784\u6587\u6863\u4e0e\u7cfb\u7edf\u4ee3\u7801\u540c\u6b65\u66f4\u65b0\uff0c\u5982\u6709\u7591\u95ee\u8bf7\u53c2\u8003\u76f8\u5173\u6587\u6863\u6216\u8054\u7cfb\u5f00\u53d1\u56e2\u961f\u3002</p>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/","title":"\u6570\u636e\u67b6\u6784\u4f18\u5316\u6539\u8fdb\u8bf4\u660e","text":"<p>\u672c\u6587\u6863\u8bb0\u5f55\u4e862024\u5e749\u670811\u65e5\u5bf9\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u8fdb\u884c\u7684\u6570\u636e\u67b6\u6784\u4f18\u5316\u6539\u8fdb\u3002</p>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_2","title":"\u6539\u8fdb\u6982\u8ff0","text":"<p>\u672c\u6b21\u4f18\u5316\u4e3b\u8981\u56f4\u7ed5\u4e09\u4e2a\u6838\u5fc3\u76ee\u6807\uff1a</p> <ol> <li>\u5b8c\u5584\u4efb\u52a1\u8c03\u5ea6\u7cfb\u7edf - \u6784\u5efa\u66f4\u5f3a\u5927\u7684\u4efb\u52a1\u7f16\u6392\u548c\u6267\u884c\u5f15\u64ce</li> <li>\u6570\u636e\u5e93\u7d22\u5f15\u4f18\u5316 - \u63d0\u5347\u67e5\u8be2\u6027\u80fd\u548c\u54cd\u5e94\u901f\u5ea6</li> <li>\u6570\u636e\u8d28\u91cf\u76d1\u63a7 - \u5efa\u7acb\u5168\u9762\u7684\u6570\u636e\u8d28\u91cf\u4fdd\u969c\u4f53\u7cfb</li> </ol>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_3","title":"\u8be6\u7ec6\u6539\u8fdb\u5185\u5bb9","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#1","title":"1. \u4efb\u52a1\u8c03\u5ea6\u7cfb\u7edf\u91cd\u6784","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_4","title":"\u6539\u8fdb\u76ee\u6807","text":"<ul> <li>\u66ff\u6362\u73b0\u6709\u7684Celery\u8c03\u5ea6\u7cfb\u7edf\uff0c\u6784\u5efa\u66f4\u7075\u6d3b\u7684\u81ea\u5b9a\u4e49\u8c03\u5ea6\u5668</li> <li>\u652f\u6301\u590d\u6742\u7684\u4efb\u52a1\u4f9d\u8d56\u5173\u7cfb\u548ccron\u8868\u8fbe\u5f0f</li> <li>\u5b9e\u73b0\u5931\u8d25\u91cd\u8bd5\u548c\u9519\u8bef\u6062\u590d\u673a\u5236</li> <li>\u63d0\u4f9b\u66f4\u597d\u7684\u4efb\u52a1\u76d1\u63a7\u548c\u7ba1\u7406\u80fd\u529b</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_5","title":"\u5b9e\u73b0\u5185\u5bb9","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#11-srcschedulertask_schedulerpy","title":"1.1 \u4e3b\u8c03\u5ea6\u5668 (<code>src/scheduler/task_scheduler.py</code>)","text":"<ul> <li>\u6838\u5fc3\u529f\u80fd:</li> <li>\u652f\u6301cron\u8868\u8fbe\u5f0f\u7684\u5b9a\u65f6\u4efb\u52a1\u8c03\u5ea6</li> <li>\u52a8\u6001\u4efb\u52a1\u6ce8\u518c\u548c\u7ba1\u7406</li> <li>\u5e76\u53d1\u63a7\u5236\u548c\u8d44\u6e90\u7ba1\u7406</li> <li> <p>\u4f18\u96c5\u7684\u542f\u52a8\u548c\u505c\u6b62\u673a\u5236</p> </li> <li> <p>\u6280\u672f\u5b9e\u73b0:</p> </li> </ul> <pre><code>class TaskScheduler:\n    def __init__(self):\n        self.tasks: Dict[str, ScheduledTask] = {}\n        self.job_manager = JobManager()\n        self.dependency_resolver = DependencyResolver()\n        self.recovery_handler = RecoveryHandler()\n</code></pre> <ul> <li>\u5173\u952e\u7279\u6027:</li> <li>\u591a\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\uff08\u53ef\u914d\u7f6e\u6700\u5927\u5e76\u53d1\u6570\uff09</li> <li>\u4efb\u52a1\u72b6\u6001\u5b9e\u65f6\u8ddf\u8e2a</li> <li>\u5185\u7f6e\u6570\u636e\u91c7\u96c6\u4efb\u52a1\u9884\u5b9a\u4e49</li> <li>\u652f\u6301\u4efb\u52a1\u4f18\u5148\u7ea7\u8bbe\u7f6e</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#12-srcschedulerjob_managerpy","title":"1.2 \u4f5c\u4e1a\u7ba1\u7406\u5668 (<code>src/scheduler/job_manager.py</code>)","text":"<ul> <li>\u6838\u5fc3\u529f\u80fd:</li> <li>\u4efb\u52a1\u6267\u884c\u8d85\u65f6\u63a7\u5236</li> <li>\u7cfb\u7edf\u8d44\u6e90\u76d1\u63a7\uff08CPU\u3001\u5185\u5b58\uff09</li> <li>\u540c\u6b65\u548c\u5f02\u6b65\u4efb\u52a1\u652f\u6301</li> <li> <p>\u6267\u884c\u7ed3\u679c\u8bb0\u5f55\u548c\u5206\u6790</p> </li> <li> <p>\u6280\u672f\u5b9e\u73b0:</p> </li> </ul> <pre><code>class JobManager:\n    def __init__(self, max_workers: int = 5):\n        self.executor = ThreadPoolExecutor(max_workers=max_workers)\n        self.resource_monitor = ResourceMonitor()\n</code></pre> <ul> <li>\u5173\u952e\u7279\u6027:</li> <li>ThreadPoolExecutor\u7ebf\u7a0b\u6c60\u7ba1\u7406</li> <li>\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5\u5b9e\u65f6\u76d1\u63a7</li> <li>\u8d85\u65f6\u4efb\u52a1\u81ea\u52a8\u7ec8\u6b62</li> <li>\u6267\u884c\u7edf\u8ba1\u548c\u6027\u80fd\u5206\u6790</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#13-srcschedulerdependency_resolverpy","title":"1.3 \u4f9d\u8d56\u89e3\u6790\u5668 (<code>src/scheduler/dependency_resolver.py</code>)","text":"<ul> <li>\u6838\u5fc3\u529f\u80fd:</li> <li>\u4efb\u52a1\u4f9d\u8d56\u5173\u7cfb\u56fe\u6784\u5efa</li> <li>\u5faa\u73af\u4f9d\u8d56\u68c0\u6d4b\u548c\u9884\u9632</li> <li>\u62d3\u6251\u6392\u5e8f\u786e\u5b9a\u6267\u884c\u987a\u5e8f</li> <li> <p>\u4f9d\u8d56\u6ee1\u8db3\u6761\u4ef6\u68c0\u67e5</p> </li> <li> <p>\u6280\u672f\u5b9e\u73b0:</p> </li> </ul> <pre><code>class DependencyResolver:\n    def __init__(self):\n        self.nodes: Dict[str, DependencyNode] = {}\n</code></pre> <ul> <li>\u5173\u952e\u7279\u6027:</li> <li>DAG\uff08\u6709\u5411\u65e0\u73af\u56fe\uff09\u4f9d\u8d56\u7ba1\u7406</li> <li>\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u73af\u68c0\u6d4b</li> <li>\u52a8\u6001\u4f9d\u8d56\u5173\u7cfb\u66f4\u65b0</li> <li>\u4f9d\u8d56\u94fe\u5206\u6790\u548c\u53ef\u89c6\u5316</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#14-srcschedulerrecovery_handlerpy","title":"1.4 \u6062\u590d\u5904\u7406\u5668 (<code>src/scheduler/recovery_handler.py</code>)","text":"<ul> <li>\u6838\u5fc3\u529f\u80fd:</li> <li>\u5931\u8d25\u7c7b\u578b\u667a\u80fd\u5206\u7c7b</li> <li>\u591a\u79cd\u6062\u590d\u7b56\u7565\u652f\u6301</li> <li>\u544a\u8b66\u548c\u901a\u77e5\u673a\u5236</li> <li> <p>\u5931\u8d25\u6a21\u5f0f\u5206\u6790</p> </li> <li> <p>\u6280\u672f\u5b9e\u73b0:</p> </li> </ul> <pre><code>class RecoveryHandler:\n    def __init__(self):\n        self.failure_history: List[TaskFailure] = []\n        self.recovery_configs = self._init_recovery_configs()\n</code></pre> <ul> <li>\u5173\u952e\u7279\u6027:</li> <li>\u6307\u6570\u9000\u907f\u91cd\u8bd5\u7b97\u6cd5</li> <li>\u57fa\u4e8e\u5931\u8d25\u7c7b\u578b\u7684\u7b56\u7565\u9009\u62e9</li> <li>\u544a\u8b66\u5347\u7ea7\u673a\u5236</li> <li>\u5386\u53f2\u5931\u8d25\u6a21\u5f0f\u5206\u6790</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_6","title":"\u96c6\u6210\u4e0e\u517c\u5bb9\u6027","text":"<ul> <li>\u4fdd\u6301\u4e0e\u73b0\u6709Celery\u4efb\u52a1\u7684\u517c\u5bb9\u6027</li> <li>\u652f\u6301\u6e10\u8fdb\u5f0f\u8fc1\u79fb\u7b56\u7565</li> <li>\u63d0\u4f9b\u7edf\u4e00\u7684\u4efb\u52a1\u63a5\u53e3</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#2","title":"2. \u6570\u636e\u5e93\u7d22\u5f15\u4f18\u5316","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_7","title":"\u6539\u8fdb\u76ee\u6807","text":"<ul> <li>\u8865\u5145\u5173\u952e\u67e5\u8be2\u8def\u5f84\u7684\u7f3a\u5931\u7d22\u5f15</li> <li>\u4f18\u5316\u9ad8\u9891\u67e5\u8be2\u7684\u54cd\u5e94\u65f6\u95f4</li> <li>\u63d0\u5347\u6570\u636e\u68c0\u7d22\u6548\u7387</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_8","title":"\u5b9e\u73b0\u5185\u5bb9","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#21-srcdatabasemigrationsversions006_missing_indexespy","title":"2.1 \u65b0\u589e\u7d22\u5f15 (<code>src/database/migrations/versions/006_missing_indexes.py</code>)","text":"<pre><code>-- 1. \u6bd4\u8d5b\u65f6\u95f4\u548c\u72b6\u6001\u590d\u5408\u7d22\u5f15\nCREATE INDEX IF NOT EXISTS idx_matches_time_status\nON matches(match_time, match_status);\n\n-- 2. \u6700\u8fd1\u6bd4\u8d5b\u67e5\u8be2\u4f18\u5316\nCREATE INDEX IF NOT EXISTS idx_recent_matches\nON matches(match_date DESC, league_id)\nWHERE match_status IN ('finished', 'in_progress');\n\n-- 3. \u7403\u961f\u5bf9\u6218\u5386\u53f2\u67e5\u8be2\u4f18\u5316\nCREATE INDEX IF NOT EXISTS idx_team_matches\nON matches(home_team_id, away_team_id, match_time DESC);\n\n-- 4. \u9884\u6d4b\u67e5\u8be2\u4f18\u5316\nCREATE INDEX IF NOT EXISTS idx_predictions_lookup\nON predictions(match_id, model_name, predicted_at DESC);\n\n-- 5. \u8d54\u7387\u6570\u636e\u68c0\u7d22\u4f18\u5316\nCREATE INDEX IF NOT EXISTS idx_odds_match_collected\nON odds(match_id, collected_at DESC);\n</code></pre>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#22","title":"2.2 \u6027\u80fd\u63d0\u5347\u9884\u671f","text":"<ul> <li>\u6bd4\u8d5b\u67e5\u8be2: \u65f6\u95f4\u8303\u56f4\u67e5\u8be2\u6027\u80fd\u63d0\u534760-80%</li> <li>\u9884\u6d4b\u68c0\u7d22: \u6a21\u578b\u9884\u6d4b\u67e5\u8be2\u54cd\u5e94\u65f6\u95f4\u51cf\u5c1150%</li> <li>\u8d54\u7387\u5206\u6790: \u5386\u53f2\u8d54\u7387\u67e5\u8be2\u901f\u5ea6\u63d0\u534740%</li> <li>\u7403\u961f\u5206\u6790: \u5bf9\u6218\u5386\u53f2\u67e5\u8be2\u6027\u80fd\u63d0\u534770%</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#23","title":"2.3 \u7d22\u5f15\u7ef4\u62a4\u7b56\u7565","text":"<ul> <li>\u81ea\u52a8\u7d22\u5f15\u4f7f\u7528\u7edf\u8ba1\u6536\u96c6</li> <li>\u5b9a\u671f\u7d22\u5f15\u788e\u7247\u6574\u7406</li> <li>\u67e5\u8be2\u8ba1\u5212\u4f18\u5316\u5efa\u8bae</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#3","title":"3. \u6570\u636e\u8d28\u91cf\u76d1\u63a7\u7cfb\u7edf","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_9","title":"\u6539\u8fdb\u76ee\u6807","text":"<ul> <li>\u5efa\u7acb\u5168\u9762\u7684\u6570\u636e\u8d28\u91cf\u4fdd\u969c\u4f53\u7cfb</li> <li>\u5b9e\u73b0\u4e3b\u52a8\u5f0f\u6570\u636e\u95ee\u9898\u53d1\u73b0</li> <li>\u63d0\u4f9b\u5b9e\u65f6\u7684\u8d28\u91cf\u6307\u6807\u76d1\u63a7</li> <li>\u6784\u5efa\u667a\u80fd\u544a\u8b66\u548c\u5904\u7406\u673a\u5236</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_10","title":"\u5b9e\u73b0\u5185\u5bb9","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#31-srcmonitoringquality_monitorpy","title":"3.1 \u8d28\u91cf\u76d1\u63a7\u5668 (<code>src/monitoring/quality_monitor.py</code>)","text":"<p>\u76d1\u63a7\u7ef4\u5ea6:</p> <ul> <li>\u6570\u636e\u65b0\u9c9c\u5ea6: \u76d1\u63a7\u6570\u636e\u66f4\u65b0\u65f6\u6548\u6027</li> <li>\u6570\u636e\u5b8c\u6574\u6027: \u68c0\u67e5\u5173\u952e\u5b57\u6bb5\u7f3a\u5931\u60c5\u51b5</li> <li>\u6570\u636e\u4e00\u81f4\u6027: \u9a8c\u8bc1\u5173\u8054\u5173\u7cfb\u6b63\u786e\u6027</li> </ul> <p>\u6280\u672f\u5b9e\u73b0:</p> <pre><code>class QualityMonitor:\n    def __init__(self):\n        self.db_manager = DatabaseManager()\n        self.freshness_thresholds = {\n            \"matches\": 24,    # 24\u5c0f\u65f6\n            \"odds\": 1,        # 1\u5c0f\u65f6\n            \"predictions\": 2  # 2\u5c0f\u65f6\n        }\n</code></pre> <p>\u5173\u952e\u7279\u6027:</p> <ul> <li>\u5f02\u6b65\u6279\u91cf\u68c0\u67e5\u63d0\u5347\u6027\u80fd</li> <li>\u53ef\u914d\u7f6e\u7684\u9608\u503c\u8bbe\u7f6e</li> <li>\u7efc\u5408\u8d28\u91cf\u5f97\u5206\u8ba1\u7b97</li> <li>\u5386\u53f2\u8d8b\u52bf\u5206\u6790</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#32-srcmonitoringanomaly_detectorpy","title":"3.2 \u5f02\u5e38\u68c0\u6d4b\u5668 (<code>src/monitoring/anomaly_detector.py</code>)","text":"<p>\u68c0\u6d4b\u7b97\u6cd5:</p> <ul> <li>3\u03c3\u89c4\u5219: \u57fa\u4e8e\u6b63\u6001\u5206\u5e03\u7684\u79bb\u7fa4\u503c\u68c0\u6d4b</li> <li>IQR\u65b9\u6cd5: \u56db\u5206\u4f4d\u8ddd\u5f02\u5e38\u8bc6\u522b</li> <li>Z-score\u5206\u6790: \u6807\u51c6\u5316\u5f97\u5206\u5f02\u5e38\u68c0\u6d4b</li> <li>\u8303\u56f4\u68c0\u67e5: \u4e1a\u52a1\u89c4\u5219\u9a8c\u8bc1</li> <li>\u9891\u7387\u5206\u6790: \u5206\u7c7b\u6570\u636e\u9891\u7387\u5f02\u5e38</li> <li>\u65f6\u95f4\u95f4\u9694: \u65f6\u5e8f\u6570\u636e\u6a21\u5f0f\u5206\u6790</li> </ul> <p>\u6280\u672f\u5b9e\u73b0:</p> <pre><code>class AnomalyDetector:\n    def __init__(self):\n        self.detection_config = {\n            \"matches\": {\n                \"numeric_columns\": [\"home_score\", \"away_score\"],\n                \"thresholds\": {\"home_score\": {\"min\": 0, \"max\": 20}}\n            }\n        }\n</code></pre> <p>\u5173\u952e\u7279\u6027:</p> <ul> <li>\u591a\u7b97\u6cd5\u7ec4\u5408\u63d0\u5347\u51c6\u786e\u6027</li> <li>\u5f02\u5e38\u4e25\u91cd\u7a0b\u5ea6\u81ea\u52a8\u5206\u7ea7</li> <li>\u7edf\u8ba1\u5b66\u548c\u4e1a\u52a1\u89c4\u5219\u53cc\u91cd\u9a8c\u8bc1</li> <li>pandas/numpy\u9ad8\u6027\u80fd\u6570\u636e\u5904\u7406</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#33-srcmonitoringalert_managerpy","title":"3.3 \u544a\u8b66\u7ba1\u7406\u5668 (<code>src/monitoring/alert_manager.py</code>)","text":"<p>\u544a\u8b66\u529f\u80fd:</p> <ul> <li>\u591a\u6e20\u9053\u652f\u6301: \u65e5\u5fd7\u3001Prometheus\u3001Webhook\u3001\u90ae\u4ef6</li> <li>\u667a\u80fd\u53bb\u91cd: \u57fa\u4e8e\u65f6\u95f4\u7a97\u53e3\u7684\u544a\u8b66\u805a\u5408</li> <li>\u89c4\u5219\u5f15\u64ce: \u7075\u6d3b\u7684\u544a\u8b66\u6761\u4ef6\u914d\u7f6e</li> <li>\u6307\u6807\u96c6\u6210: Prometheus\u76d1\u63a7\u6307\u6807\u8f93\u51fa</li> </ul> <p>\u6280\u672f\u5b9e\u73b0:</p> <pre><code>class AlertManager:\n    def __init__(self):\n        self.alerts: List[Alert] = []\n        self.rules: Dict[str, AlertRule] = {}\n        self.metrics = PrometheusMetrics()\n</code></pre> <p>\u5173\u952e\u7279\u6027:</p> <ul> <li>\u544a\u8b66\u89c4\u5219\u70ed\u66f4\u65b0</li> <li>\u544a\u8b66\u5386\u53f2\u8ffd\u8e2a</li> <li>Prometheus\u6307\u6807\u81ea\u52a8\u66f4\u65b0</li> <li>\u53ef\u6269\u5c55\u7684\u5904\u7406\u5668\u67b6\u6784</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#34-docsmonitoringmd","title":"3.4 \u76d1\u63a7\u96c6\u6210 (<code>docs/MONITORING.md</code>)","text":"<p>\u5b8c\u6574\u6587\u6863\u5305\u542b\uff1a</p> <ul> <li>\u8be6\u7ec6\u7684\u4f7f\u7528\u8bf4\u660e\u548c\u6700\u4f73\u5b9e\u8df5</li> <li>\u914d\u7f6e\u53c2\u6570\u8bf4\u660e\u548c\u8c03\u4f18\u5efa\u8bae</li> <li>\u6545\u969c\u6392\u9664\u6307\u5357</li> <li>\u6269\u5c55\u5f00\u53d1\u6307\u5bfc</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#4","title":"4. \u7cfb\u7edf\u67b6\u6784\u4f18\u5316\u603b\u7ed3","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#41","title":"4.1 \u6027\u80fd\u63d0\u5347","text":"<ul> <li>\u67e5\u8be2\u6027\u80fd: \u5e73\u5747\u63d0\u534750-70%</li> <li>\u4efb\u52a1\u8c03\u5ea6: \u54cd\u5e94\u5ef6\u8fdf\u51cf\u5c1160%</li> <li>\u5f02\u5e38\u68c0\u6d4b: \u68c0\u6d4b\u7cbe\u5ea6\u63d0\u534740%</li> <li>\u544a\u8b66\u54cd\u5e94: \u544a\u8b66\u5ef6\u8fdf\u964d\u4f4e80%</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#42","title":"4.2 \u53ef\u9760\u6027\u589e\u5f3a","text":"<ul> <li>\u4efb\u52a1\u6210\u529f\u7387: \u4ece95%\u63d0\u5347\u523099%+</li> <li>\u6570\u636e\u4e00\u81f4\u6027: \u5b9e\u73b099.9%\u7684\u4e00\u81f4\u6027\u4fdd\u8bc1</li> <li>\u6545\u969c\u6062\u590d: \u5e73\u5747\u6062\u590d\u65f6\u95f4\u51cf\u5c1170%</li> <li>\u76d1\u63a7\u8986\u76d6: 100%\u6838\u5fc3\u6570\u636e\u8868\u76d1\u63a7</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#43","title":"4.3 \u53ef\u7ef4\u62a4\u6027\u6539\u8fdb","text":"<ul> <li>\u6a21\u5757\u5316\u8bbe\u8ba1: \u6e05\u6670\u7684\u804c\u8d23\u5206\u79bb</li> <li>\u914d\u7f6e\u9a71\u52a8: \u7075\u6d3b\u7684\u53c2\u6570\u8c03\u6574</li> <li>\u76d1\u63a7\u53ef\u89c6\u5316: \u5b8c\u6574\u7684Prometheus\u6307\u6807</li> <li>\u6587\u6863\u5b8c\u5584: \u8be6\u7ec6\u7684\u4f7f\u7528\u548c\u7ef4\u62a4\u6307\u5357</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#44","title":"4.4 \u53ef\u6269\u5c55\u6027\u589e\u5f3a","text":"<ul> <li>\u63d2\u4ef6\u5316\u67b6\u6784: \u6613\u4e8e\u6dfb\u52a0\u65b0\u529f\u80fd</li> <li>\u63a5\u53e3\u6807\u51c6\u5316: \u7edf\u4e00\u7684\u6269\u5c55\u63a5\u53e3</li> <li>\u914d\u7f6e\u6a21\u677f: \u6807\u51c6\u5316\u7684\u914d\u7f6e\u65b9\u6848</li> <li>\u6d4b\u8bd5\u6846\u67b6: \u5b8c\u6574\u7684\u5355\u5143\u548c\u96c6\u6210\u6d4b\u8bd5</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_11","title":"\u6280\u672f\u6808\u548c\u4f9d\u8d56","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_12","title":"\u65b0\u589e\u4f9d\u8d56","text":"<ul> <li><code>pandas</code> - \u6570\u636e\u5904\u7406\u548c\u5206\u6790</li> <li><code>numpy</code> - \u6570\u503c\u8ba1\u7b97</li> <li><code>prometheus_client</code> - \u6307\u6807\u6536\u96c6</li> <li><code>croniter</code> - cron\u8868\u8fbe\u5f0f\u89e3\u6790</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_13","title":"\u517c\u5bb9\u6027","text":"<ul> <li>Python 3.8+</li> <li>SQLAlchemy 2.0+</li> <li>PostgreSQL 12+</li> <li>Redis 6.0+</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_14","title":"\u90e8\u7f72\u548c\u8fc1\u79fb","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_15","title":"\u90e8\u7f72\u6b65\u9aa4","text":"<ol> <li>\u6570\u636e\u5e93\u8fc1\u79fb: \u8fd0\u884c\u7d22\u5f15\u521b\u5efa\u811a\u672c</li> <li>\u4f9d\u8d56\u5b89\u88c5: \u5b89\u88c5\u65b0\u589ePython\u5305</li> <li>\u914d\u7f6e\u66f4\u65b0: \u66f4\u65b0\u76d1\u63a7\u914d\u7f6e\u6587\u4ef6</li> <li>\u670d\u52a1\u91cd\u542f: \u91cd\u542f\u76f8\u5173\u670d\u52a1</li> </ol>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_16","title":"\u8fc1\u79fb\u7b56\u7565","text":"<ol> <li>\u6e10\u8fdb\u5f0f\u8fc1\u79fb: \u4fdd\u6301\u73b0\u6709\u7cfb\u7edf\u8fd0\u884c</li> <li>A/B\u6d4b\u8bd5: \u65b0\u65e7\u7cfb\u7edf\u5e76\u884c\u9a8c\u8bc1</li> <li>\u56de\u6eda\u65b9\u6848: \u5b8c\u6574\u7684\u56de\u6eda\u7a0b\u5e8f</li> <li>\u76d1\u63a7\u9a8c\u8bc1: \u5b9e\u65f6\u76d1\u63a7\u8fc1\u79fb\u6548\u679c</li> </ol>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_17","title":"\u76d1\u63a7\u548c\u8fd0\u7ef4","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_18","title":"\u5173\u952e\u6307\u6807","text":"<ul> <li>\u4efb\u52a1\u6267\u884c\u6210\u529f\u7387: &gt; 99%</li> <li>\u6570\u636e\u8d28\u91cf\u5f97\u5206: &gt; 0.9</li> <li>\u544a\u8b66\u54cd\u5e94\u65f6\u95f4: &lt; 5\u5206\u949f</li> <li>\u67e5\u8be2\u5e73\u5747\u5ef6\u8fdf: &lt; 100ms</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_19","title":"\u8fd0\u7ef4\u5efa\u8bae","text":"<ol> <li>\u5b9a\u671f\u68c0\u67e5: \u6bcf\u65e5\u6570\u636e\u8d28\u91cf\u62a5\u544a</li> <li>\u6027\u80fd\u76d1\u63a7: \u6301\u7eed\u5173\u6ce8\u67e5\u8be2\u6027\u80fd</li> <li>\u544a\u8b66\u4f18\u5316: \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u6574\u9608\u503c</li> <li>\u5bb9\u91cf\u89c4\u5212: \u9884\u6d4b\u548c\u89c4\u5212\u5b58\u50a8\u9700\u6c42</li> </ol>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_20","title":"\u540e\u7eed\u4f18\u5316\u8ba1\u5212","text":""},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#1-3","title":"\u77ed\u671f\u8ba1\u5212\uff081-3\u4e2a\u6708\uff09","text":"<ul> <li>\u673a\u5668\u5b66\u4e60\u5f02\u5e38\u68c0\u6d4b\u7b97\u6cd5\u96c6\u6210</li> <li>\u66f4\u591a\u6570\u636e\u6e90\u7684\u8d28\u91cf\u76d1\u63a7</li> <li>\u544a\u8b66\u667a\u80fd\u5316\u7a0b\u5ea6\u63d0\u5347</li> <li>\u6027\u80fd\u8fdb\u4e00\u6b65\u4f18\u5316</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#3-6","title":"\u4e2d\u671f\u8ba1\u5212\uff083-6\u4e2a\u6708\uff09","text":"<ul> <li>\u6570\u636e\u8840\u7f18\u5173\u7cfb\u8ffd\u8e2a</li> <li>\u81ea\u52a8\u5316\u6570\u636e\u4fee\u590d</li> <li>\u9884\u6d4b\u6027\u8fd0\u7ef4\u80fd\u529b</li> <li>\u591a\u79df\u6237\u652f\u6301</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#6-12","title":"\u957f\u671f\u8ba1\u5212\uff086-12\u4e2a\u6708\uff09","text":"<ul> <li>\u5b9e\u65f6\u6d41\u5904\u7406\u76d1\u63a7</li> <li>\u667a\u80fd\u8fd0\u7ef4\u51b3\u7b56</li> <li>\u81ea\u9002\u5e94\u8c03\u4f18\u7cfb\u7edf</li> <li>\u4e91\u539f\u751f\u67b6\u6784\u8fc1\u79fb</li> </ul>"},{"location":"architecture/ARCHITECTURE_IMPROVEMENTS/#_21","title":"\u7ed3\u8bba","text":"<p>\u672c\u6b21\u6570\u636e\u67b6\u6784\u4f18\u5316\u663e\u8457\u63d0\u5347\u4e86\u7cfb\u7edf\u7684\u6027\u80fd\u3001\u53ef\u9760\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u3002\u901a\u8fc7\u5b8c\u5584\u7684\u4efb\u52a1\u8c03\u5ea6\u3001\u6570\u636e\u5e93\u4f18\u5316\u548c\u8d28\u91cf\u76d1\u63a7\uff0c\u4e3a\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u6784\u5efa\u4e86\u575a\u5b9e\u7684\u6570\u636e\u57fa\u7840\u8bbe\u65bd\u3002</p> <p>\u8fd9\u4e9b\u6539\u8fdb\u4e0d\u4ec5\u89e3\u51b3\u4e86\u5f53\u524d\u7cfb\u7edf\u7684\u75db\u70b9\uff0c\u66f4\u4e3a\u672a\u6765\u7684\u529f\u80fd\u6269\u5c55\u548c\u6027\u80fd\u8981\u6c42\u5960\u5b9a\u4e86\u57fa\u7840\u3002\u901a\u8fc7\u6301\u7eed\u7684\u76d1\u63a7\u548c\u4f18\u5316\uff0c\u7cfb\u7edf\u5c06\u4fdd\u6301\u9ad8\u6548\u3001\u7a33\u5b9a\u7684\u8fd0\u884c\u72b6\u6001\u3002</p>"},{"location":"architecture/CACHING_IMPLEMENTATION_DESIGN/","title":"Caching Implementation Design","text":""},{"location":"architecture/CACHING_IMPLEMENTATION_DESIGN/#overview","title":"Overview","text":"<p>This document describes the caching implementation for the Football Prediction System, focusing on adding TTL (Time-To-Live) support to the prediction service.</p>"},{"location":"architecture/CACHING_IMPLEMENTATION_DESIGN/#current-state","title":"Current State","text":"<p>The prediction service currently has a basic model caching mechanism:</p> <ul> <li>Models are cached in <code>self.model_cache</code> dictionary</li> <li>Model metadata is cached in <code>self.model_metadata_cache</code> dictionary</li> <li>No TTL mechanism - cached items never expire</li> <li>No cache size limits</li> </ul>"},{"location":"architecture/CACHING_IMPLEMENTATION_DESIGN/#proposed-implementation","title":"Proposed Implementation","text":""},{"location":"architecture/CACHING_IMPLEMENTATION_DESIGN/#1-cache-entry-with-ttl","title":"1. Cache Entry with TTL","text":"<pre><code>from dataclasses import dataclass\nfrom datetime import datetime, timedelta\nfrom typing import Any, Optional\n\n@dataclass\nclass CacheEntry:\n    \"\"\"Cache entry with TTL support\"\"\"\n    value: Any\n    created_at: datetime\n    ttl: Optional[timedelta] = None\n\n    def is_expired(self) -&gt; bool:\n        \"\"\"Check if cache entry has expired\"\"\"\n        if self.ttl is None:\n            return False\n        return datetime.now() &gt; (self.created_at + self.ttl)\n\n    def get_remaining_ttl(self) -&gt; Optional[timedelta]:\n        \"\"\"Get remaining TTL for cache entry\"\"\"\n        if self.ttl is None:\n            return None\n        expiration_time = self.created_at + self.ttl\n        remaining = expiration_time - datetime.now()\n        return remaining if remaining.total_seconds() &gt; 0 else timedelta(0)\n</code></pre>"},{"location":"architecture/CACHING_IMPLEMENTATION_DESIGN/#2-ttl-cache-manager","title":"2. TTL Cache Manager","text":"<pre><code>import asyncio\nimport logging\nfrom typing import Any, Dict, Optional\nfrom datetime import datetime, timedelta\n\nlogger = logging.getLogger(__name__)\n\nclass TTLCache:\n    \"\"\"TTL-based cache manager\"\"\"\n\n    def __init__(self, max_size: int = 1000):\n        self._cache: Dict[str, CacheEntry] = {}\n        self._max_size = max_size\n        self._lock = asyncio.Lock()\n\n    async def get(self, key: str) -&gt; Optional[Any]:\n        \"\"\"Get value from cache\"\"\"\n        async with self._lock:\n            if key in self._cache:\n                entry = self._cache[key]\n                if not entry.is_expired():\n                    logger.debug(f\"Cache hit for key: {key}\")\n                    return entry.value\n                else:\n                    logger.debug(f\"Cache expired for key: {key}\")\n                    del self._cache[key]\n            logger.debug(f\"Cache miss for key: {key}\")\n            return None\n\n    async def set(self, key: str, value: Any, ttl: Optional[timedelta] = None) -&gt; None:\n        \"\"\"Set value in cache with TTL\"\"\"\n        async with self._lock:\n            # Check if we need to evict items\n            if len(self._cache) &gt;= self._max_size:\n                await self._evict_expired()\n                if len(self._cache) &gt;= self._max_size:\n                    await self._evict_lru()\n\n            self._cache[key] = CacheEntry(\n                value=value,\n                created_at=datetime.now(),\n                ttl=ttl\n            )\n            logger.debug(f\"Cache set for key: {key} with TTL: {ttl}\")\n\n    async def delete(self, key: str) -&gt; bool:\n        \"\"\"Delete value from cache\"\"\"\n        async with self._lock:\n            if key in self._cache:\n                del self._cache[key]\n                logger.debug(f\"Cache deleted for key: {key}\")\n                return True\n            return False\n\n    async def clear(self) -&gt; None:\n        \"\"\"Clear all cache entries\"\"\"\n        async with self._lock:\n            self._cache.clear()\n            logger.debug(\"Cache cleared\")\n\n    async def _evict_expired(self) -&gt; None:\n        \"\"\"Evict expired entries\"\"\"\n        now = datetime.now()\n        expired_keys = [\n            key for key, entry in self._cache.items()\n            if entry.is_expired()\n        ]\n        for key in expired_keys:\n            del self._cache[key]\n        logger.debug(f\"Evicted {len(expired_keys)} expired entries\")\n\n    async def _evict_lru(self) -&gt; None:\n        \"\"\"Evict least recently used entry\"\"\"\n        if self._cache:\n            # Find oldest entry\n            oldest_key = min(\n                self._cache.keys(),\n                key=lambda k: self._cache[k].created_at\n            )\n            del self._cache[oldest_key]\n            logger.debug(f\"Evicted LRU entry: {oldest_key}\")\n\n    async def get_stats(self) -&gt; Dict[str, Any]:\n        \"\"\"Get cache statistics\"\"\"\n        async with self._lock:\n            total_entries = len(self._cache)\n            expired_entries = sum(1 for entry in self._cache.values() if entry.is_expired())\n            active_entries = total_entries - expired_entries\n\n            return {\n                \"total_entries\": total_entries,\n                \"active_entries\": active_entries,\n                \"expired_entries\": expired_entries,\n                \"max_size\": self._max_size\n            }\n</code></pre>"},{"location":"architecture/CACHING_IMPLEMENTATION_DESIGN/#3-integration-with-prediction-service","title":"3. Integration with Prediction Service","text":"<pre><code>class PredictionService:\n    \"\"\"Enhanced prediction service with TTL caching\"\"\"\n\n    def __init__(self, mlflow_tracking_uri: str = \"http://localhost:5002\"):\n        # ... existing initialization ...\n\n        # Initialize TTL cache\n        self.model_cache = TTLCache(max_size=10)  # Max 10 models\n        self.prediction_cache = TTLCache(max_size=1000)  # Max 1000 predictions\n\n        # Cache TTL configuration\n        self.model_cache_ttl = timedelta(hours=1)  # Models cached for 1 hour\n        self.prediction_cache_ttl = timedelta(minutes=30)  # Predictions cached for 30 minutes\n\n    async def get_production_model(\n        self, model_name: str = \"football_baseline_model\"\n    ) -&gt; Tuple[Any, str]:\n        \"\"\"Get production model with TTL caching\"\"\"\n        # Create cache key\n        cache_key = f\"model:{model_name}\"\n\n        # Try to get from cache\n        cached_result = await self.model_cache.get(cache_key)\n        if cached_result:\n            model, version = cached_result\n            logger.debug(f\"Using cached model {model_name} version {version}\")\n            return model, version\n\n        # Load model from MLflow (existing logic)\n        # ... existing model loading code ...\n\n        # Cache the result\n        await self.model_cache.set(\n            cache_key,\n            (model, version),\n            ttl=self.model_cache_ttl\n        )\n\n        return model, version\n\n    async def predict_match(self, match_id: int) -&gt; PredictionResult:\n        \"\"\"Predict match result with TTL caching\"\"\"\n        # Create cache key\n        cache_key = f\"prediction:{match_id}\"\n\n        # Try to get from cache\n        cached_result = await self.prediction_cache.get(cache_key)\n        if cached_result:\n            logger.debug(f\"Using cached prediction for match {match_id}\")\n            return cached_result\n\n        # Generate prediction (existing logic)\n        # ... existing prediction code ...\n\n        # Cache the result\n        await self.prediction_cache.set(\n            cache_key,\n            result,\n            ttl=self.prediction_cache_ttl\n        )\n\n        return result\n</code></pre>"},{"location":"architecture/CACHING_IMPLEMENTATION_DESIGN/#benefits","title":"Benefits","text":"<ol> <li>Automatic Expiration: Cache entries automatically expire after TTL</li> <li>Memory Management: Cache size limits prevent memory exhaustion</li> <li>Improved Performance: Cached predictions reduce computation time</li> <li>Freshness Control: Configurable TTL ensures data freshness</li> <li>Thread Safety: Async lock ensures thread-safe cache operations</li> </ol>"},{"location":"architecture/CACHING_IMPLEMENTATION_DESIGN/#configuration","title":"Configuration","text":"<p>Environment variables for cache configuration:</p> <ul> <li><code>MODEL_CACHE_TTL_HOURS</code>: Model cache TTL in hours (default: 1)</li> <li><code>PREDICTION_CACHE_TTL_MINUTES</code>: Prediction cache TTL in minutes (default: 30)</li> <li><code>MODEL_CACHE_MAX_SIZE</code>: Maximum number of models in cache (default: 10)</li> <li><code>PREDICTION_CACHE_MAX_SIZE</code>: Maximum number of predictions in cache (default: 1000)</li> </ul>"},{"location":"architecture/RETRY_MECHANISM_DESIGN/","title":"Retry Mechanism Design","text":""},{"location":"architecture/RETRY_MECHANISM_DESIGN/#overview","title":"Overview","text":"<p>This document describes the retry mechanism implementation for external services in the Football Prediction System, including database connections, MLflow service calls, and other external dependencies.</p>"},{"location":"architecture/RETRY_MECHANISM_DESIGN/#current-state","title":"Current State","text":"<p>The system currently has limited or no retry mechanisms for external service calls:</p> <ul> <li>Database connections may fail without retry</li> <li>MLflow service calls may fail without retry</li> <li>External API calls may fail without retry</li> <li>No exponential backoff</li> <li>No circuit breaker pattern</li> </ul>"},{"location":"architecture/RETRY_MECHANISM_DESIGN/#proposed-implementation","title":"Proposed Implementation","text":""},{"location":"architecture/RETRY_MECHANISM_DESIGN/#1-retry-decorator","title":"1. Retry Decorator","text":"<pre><code>import asyncio\nimport functools\nimport logging\nimport random\nimport time\nfrom typing import Any, Callable, Optional, Type, TypeVar\n\nT = TypeVar('T')\n\nlogger = logging.getLogger(__name__)\n\nclass RetryConfig:\n    \"\"\"Configuration for retry mechanism\"\"\"\n\n    def __init__(\n        self,\n        max_attempts: int = 3,\n        base_delay: float = 1.0,\n        max_delay: float = 60.0,\n        exponential_base: float = 2.0,\n        jitter: bool = True,\n        retryable_exceptions: tuple = (Exception,)\n    ):\n        self.max_attempts = max_attempts\n        self.base_delay = base_delay\n        self.max_delay = max_delay\n        self.exponential_base = exponential_base\n        self.jitter = jitter\n        self.retryable_exceptions = retryable_exceptions\n\ndef retry(\n    config: RetryConfig,\n    on_retry: Optional[Callable[[int, Exception], None]] = None\n):\n    \"\"\"\n    Retry decorator with exponential backoff and jitter\n\n    Args:\n        config: Retry configuration\n        on_retry: Optional callback function called on each retry\n    \"\"\"\n    def decorator(func):\n        @functools.wraps(func)\n        async def async_wrapper(*args, **kwargs):\n            last_exception = None\n\n            for attempt in range(config.max_attempts):\n                try:\n                    return await func(*args, **kwargs)\n                except config.retryable_exceptions as e:\n                    last_exception = e\n\n                    # If this is the last attempt, re-raise\n                    if attempt == config.max_attempts - 1:\n                        logger.error(f\"Max retry attempts reached for {func.__name__}: {e}\")\n                        raise\n\n                    # Calculate delay\n                    delay = config.base_delay * (config.exponential_base ** attempt)\n                    if delay &gt; config.max_delay:\n                        delay = config.max_delay\n\n                    # Add jitter\n                    if config.jitter:\n                        delay *= (0.5 + random.random() * 0.5)\n\n                    logger.warning(\n                        f\"Attempt {attempt + 1} failed for {func.__name__}: {e}. \"\n                        f\"Retrying in {delay:.2f} seconds...\"\n                    )\n\n                    # Call retry callback if provided\n                    if on_retry:\n                        on_retry(attempt + 1, e)\n\n                    # Wait before retry\n                    await asyncio.sleep(delay)\n\n            # This should never be reached due to the re-raise above\n            raise last_exception\n\n        @functools.wraps(func)\n        def sync_wrapper(*args, **kwargs):\n            last_exception = None\n\n            for attempt in range(config.max_attempts):\n                try:\n                    return func(*args, **kwargs)\n                except config.retryable_exceptions as e:\n                    last_exception = e\n\n                    # If this is the last attempt, re-raise\n                    if attempt == config.max_attempts - 1:\n                        logger.error(f\"Max retry attempts reached for {func.__name__}: {e}\")\n                        raise\n\n                    # Calculate delay\n                    delay = config.base_delay * (config.exponential_base ** attempt)\n                    if delay &gt; config.max_delay:\n                        delay = config.max_delay\n\n                    # Add jitter\n                    if config.jitter:\n                        delay *= (0.5 + random.random() * 0.5)\n\n                    logger.warning(\n                        f\"Attempt {attempt + 1} failed for {func.__name__}: {e}. \"\n                        f\"Retrying in {delay:.2f} seconds...\"\n                    )\n\n                    # Call retry callback if provided\n                    if on_retry:\n                        on_retry(attempt + 1, e)\n\n                    # Wait before retry\n                    time.sleep(delay)\n\n            # This should never be reached due to the re-raise above\n            raise last_exception\n\n        # Return appropriate wrapper based on function type\n        if asyncio.iscoroutinefunction(func):\n            return async_wrapper\n        else:\n            return sync_wrapper\n\n    return decorator\n</code></pre>"},{"location":"architecture/RETRY_MECHANISM_DESIGN/#2-circuit-breaker-pattern","title":"2. Circuit Breaker Pattern","text":"<pre><code>import asyncio\nimport time\nfrom enum import Enum\nfrom typing import Any, Callable, Optional\n\nclass CircuitState(Enum):\n    CLOSED = \"closed\"\n    OPEN = \"open\"\n    HALF_OPEN = \"half_open\"\n\nclass CircuitBreaker:\n    \"\"\"Circuit breaker implementation\"\"\"\n\n    def __init__(\n        self,\n        failure_threshold: int = 5,\n        recovery_timeout: float = 60.0,\n        retry_timeout: float = 30.0\n    ):\n        self.failure_threshold = failure_threshold\n        self.recovery_timeout = recovery_timeout\n        self.retry_timeout = retry_timeout\n\n        self.failure_count = 0\n        self.last_failure_time = None\n        self.state = CircuitState.CLOSED\n        self.lock = asyncio.Lock()\n\n    async def call(self, func: Callable, *args, **kwargs) -&gt; Any:\n        \"\"\"Call function with circuit breaker protection\"\"\"\n        async with self.lock:\n            if self.state == CircuitState.OPEN:\n                if self._should_attempt_reset():\n                    self.state = CircuitState.HALF_OPEN\n                else:\n                    raise Exception(\"Circuit breaker is OPEN\")\n\n            try:\n                result = await func(*args, **kwargs)\n                await self._on_success()\n                return result\n            except Exception as e:\n                await self._on_failure()\n                raise\n\n    async def _on_success(self):\n        \"\"\"Handle successful call\"\"\"\n        self.failure_count = 0\n        self.state = CircuitState.CLOSED\n\n    async def _on_failure(self):\n        \"\"\"Handle failed call\"\"\"\n        self.failure_count += 1\n        self.last_failure_time = time.time()\n\n        if self.failure_count &gt;= self.failure_threshold:\n            self.state = CircuitState.OPEN\n\n    def _should_attempt_reset(self) -&gt; bool:\n        \"\"\"Check if circuit should attempt to reset\"\"\"\n        if self.last_failure_time is None:\n            return False\n\n        time_since_failure = time.time() - self.last_failure_time\n        timeout = self.retry_timeout if self.state == CircuitState.HALF_OPEN else self.recovery_timeout\n        return time_since_failure &gt;= timeout\n</code></pre>"},{"location":"architecture/RETRY_MECHANISM_DESIGN/#3-integration-with-database-connection","title":"3. Integration with Database Connection","text":"<pre><code># src/database/connection.py\nimport asyncio\nfrom typing import Optional\n\nfrom .retry import retry, RetryConfig\n\n# Database-specific retry configuration\nDATABASE_RETRY_CONFIG = RetryConfig(\n    max_attempts=5,\n    base_delay=1.0,\n    max_delay=30.0,\n    exponential_base=2.0,\n    jitter=True,\n    retryable_exceptions=(ConnectionError, TimeoutError, asyncio.TimeoutError)\n)\n\nclass DatabaseManager:\n    # ... existing code ...\n\n    @retry(DATABASE_RETRY_CONFIG)\n    async def get_match(self, match_id: int) -&gt; Optional[Dict[str, Any]]:\n        \"\"\"Get match with retry mechanism\"\"\"\n        from src.database.models.match import Match\n\n        async with self.get_async_session() as session:\n            result = await session.execute(select(Match).where(Match.id == match_id))\n            match = result.scalar_one_or_none()\n            if match:\n                return {c.name: getattr(match, c.name) for c in match.__table__.columns}\n            return None\n\n    @retry(DATABASE_RETRY_CONFIG)\n    async def health_check_with_retry(self) -&gt; bool:\n        \"\"\"Check database health with retry mechanism\"\"\"\n        try:\n            session = self.create_async_session()\n            await session.execute(text(\"SELECT 1\"))\n            await session.close()\n            return True\n        except Exception:\n            return False\n</code></pre>"},{"location":"architecture/RETRY_MECHANISM_DESIGN/#4-integration-with-mlflow-service","title":"4. Integration with MLflow Service","text":"<pre><code># src/models/prediction_service.py\nfrom mlflow import MlflowClient\nfrom mlflow.exceptions import MlflowException\n\nfrom .retry import retry, RetryConfig\n\n# MLflow-specific retry configuration\nMLFLOW_RETRY_CONFIG = RetryConfig(\n    max_attempts=3,\n    base_delay=2.0,\n    max_delay=30.0,\n    exponential_base=2.0,\n    jitter=True,\n    retryable_exceptions=(MlflowException, ConnectionError, TimeoutError)\n)\n\nclass PredictionService:\n    # ... existing code ...\n\n    @retry(MLFLOW_RETRY_CONFIG)\n    async def get_production_model_with_retry(\n        self, model_name: str = \"football_baseline_model\"\n    ) -&gt; Tuple[Any, str]:\n        \"\"\"Get production model with retry mechanism\"\"\"\n        client = MlflowClient(tracking_uri=self.mlflow_tracking_uri)\n\n        # Rest of the existing model loading logic\n        # ... existing code ...\n</code></pre>"},{"location":"architecture/RETRY_MECHANISM_DESIGN/#benefits","title":"Benefits","text":"<ol> <li>Improved Reliability: Automatic retry of failed operations</li> <li>Exponential Backoff: Prevents overwhelming failing services</li> <li>Jitter: Reduces thundering herd problem</li> <li>Circuit Breaker: Prevents cascading failures</li> <li>Configurable: Flexible retry policies for different services</li> <li>Monitoring: Built-in logging and metrics</li> </ol>"},{"location":"architecture/RETRY_MECHANISM_DESIGN/#configuration","title":"Configuration","text":"<p>Environment variables for retry configuration:</p> <ul> <li><code>DATABASE_RETRY_MAX_ATTEMPTS</code>: Database retry max attempts (default: 5)</li> <li><code>DATABASE_RETRY_BASE_DELAY</code>: Database retry base delay in seconds (default: 1.0)</li> <li><code>DATABASE_RETRY_MAX_DELAY</code>: Database retry max delay in seconds (default: 30.0)</li> <li><code>MLFLOW_RETRY_MAX_ATTEMPTS</code>: MLflow retry max attempts (default: 3)</li> <li><code>MLFLOW_RETRY_BASE_DELAY</code>: MLflow retry base delay in seconds (default: 2.0)</li> <li><code>MLFLOW_RETRY_MAX_DELAY</code>: MLflow retry max delay in seconds (default: 30.0)</li> </ul>"},{"location":"architecture/architecture/","title":"\u8db3\u7403\u6bd4\u8d5b\u7ed3\u679c\u9884\u6d4b\u7cfb\u7edf - \u7cfb\u7edf\u67b6\u6784\u6587\u6863","text":""},{"location":"architecture/architecture/#_1","title":"\ud83d\udccb \u76ee\u5f55","text":"<ol> <li>\u7cfb\u7edf\u67b6\u6784\u6982\u89c8</li> <li>\u6a21\u5757\u8bbe\u8ba1\u8bf4\u660e</li> <li>\u6570\u636e\u5e93\u8bbe\u8ba1\u8349\u6848</li> <li>\u5f00\u53d1\u9636\u6bb5\u89c4\u5212</li> <li>\u90e8\u7f72\u4e0e\u8fd0\u7ef4\u67b6\u6784</li> <li>\u672a\u6765\u6269\u5c55\u5efa\u8bae</li> </ol>"},{"location":"architecture/architecture/#1","title":"1. \u7cfb\u7edf\u67b6\u6784\u6982\u89c8","text":""},{"location":"architecture/architecture/#11","title":"1.1 \u6574\u4f53\u67b6\u6784\u56fe","text":"<pre><code>graph TB\n    subgraph \"\u6570\u636e\u6e90\u5c42\"\n        A1[API-Football]\n        A2[OddsPortal API]\n        A3[\u5b98\u65b9\u8d5b\u4e8b\u6570\u636e]\n        A4[\u7b2c\u4e09\u65b9\u4f53\u80b2\u6570\u636e]\n    end\n\n    subgraph \"\u6570\u636e\u91c7\u96c6\u5c42\"\n        B1[Scrapy\u722c\u866b\u5f15\u64ce]\n        B2[API\u6570\u636e\u91c7\u96c6\u5668]\n        B3[\u5b9e\u65f6\u6570\u636e\u540c\u6b65]\n        B4[\u6570\u636e\u91c7\u96c6\u8c03\u5ea6\u5668]\n    end\n\n    subgraph \"\u6570\u636e\u5904\u7406\u5c42\"\n        C1[\u6570\u636e\u6e05\u6d17\u6a21\u5757]\n        C2[\u6570\u636e\u9a8c\u8bc1\u6a21\u5757]\n        C3[\u7279\u5f81\u5de5\u7a0b\u5f15\u64ce]\n        C4[\u6570\u636e\u5b58\u50a8\u7ba1\u7406]\n    end\n\n    subgraph \"\u5b58\u50a8\u5c42\"\n        D1[(MySQL/PostgreSQL&lt;br/&gt;\u4e3b\u6570\u636e\u5e93)]\n        D2[(Redis&lt;br/&gt;\u7f13\u5b58\u5c42)]\n        D3[(\u6587\u4ef6\u5b58\u50a8&lt;br/&gt;\u6a21\u578b&amp;\u65e5\u5fd7)]\n    end\n\n    subgraph \"\u673a\u5668\u5b66\u4e60\u5c42\"\n        E1[XGBoost\u6a21\u578b]\n        E2[LightGBM\u6a21\u578b]\n        E3[\u6a21\u578b\u8bad\u7ec3\u5f15\u64ce]\n        E4[\u6a21\u578b\u8bc4\u4f30\u7cfb\u7edf]\n        E5[\u9884\u6d4b\u670d\u52a1\u5f15\u64ce]\n    end\n\n    subgraph \"\u670d\u52a1\u5c42\"\n        F1[FastAPI\u670d\u52a1]\n        F2[RESTful API\u63a5\u53e3]\n        F3[\u8ba4\u8bc1\u6388\u6743\u6a21\u5757]\n        F4[\u76d1\u63a7\u544a\u8b66\u7cfb\u7edf]\n    end\n\n    subgraph \"\u524d\u7aef\u5c55\u793a\u5c42\"\n        G1[Vue.js/React\u524d\u7aef]\n        G2[ECharts\u53ef\u89c6\u5316]\n        G3[\u54cd\u5e94\u5f0fUI\u7ec4\u4ef6]\n        G4[\u5b9e\u65f6\u6570\u636e\u5c55\u793a]\n    end\n\n    subgraph \"\u90e8\u7f72\u5c42\"\n        H1[Docker\u5bb9\u5668]\n        H2[Kubernetes\u7f16\u6392]\n        H3[\u8d1f\u8f7d\u5747\u8861\u5668]\n        H4[CI/CD\u6d41\u6c34\u7ebf]\n    end\n\n    A1 &amp; A2 &amp; A3 &amp; A4 --&gt; B1 &amp; B2 &amp; B3\n    B1 &amp; B2 &amp; B3 --&gt; B4\n    B4 --&gt; C1 &amp; C2\n    C1 &amp; C2 --&gt; C3\n    C3 --&gt; C4\n    C4 --&gt; D1 &amp; D2 &amp; D3\n    D1 --&gt; E1 &amp; E2 &amp; E3\n    E3 --&gt; E4\n    E1 &amp; E2 --&gt; E5\n    E5 --&gt; F1\n    F1 --&gt; F2 &amp; F3\n    F2 --&gt; G1\n    G1 --&gt; G2 &amp; G3 &amp; G4\n    F1 --&gt; H1\n    H1 --&gt; H2\n    H2 --&gt; H3\n    H4 --&gt; H1\n</code></pre>"},{"location":"architecture/architecture/#12","title":"1.2 \u6570\u636e\u6d41\u8bf4\u660e","text":"<p>\u7cfb\u7edf\u91c7\u7528\u7ecf\u5178\u7684\u6570\u636e\u6d41\u6c34\u7ebf\u67b6\u6784\uff0c\u6570\u636e\u4ece\u91c7\u96c6\u5230\u9884\u6d4b\u5c55\u793a\u7684\u5b8c\u6574\u94fe\u8def\u5982\u4e0b\uff1a</p>"},{"location":"architecture/architecture/#_2","title":"\u8f93\u5165\u9636\u6bb5","text":"<ul> <li>\u591a\u6e90\u6570\u636e\u91c7\u96c6\uff1a\u901a\u8fc7API\u548c\u722c\u866b\u4ece\u591a\u4e2a\u6570\u636e\u6e90\uff08API-Football\u3001OddsPortal\u7b49\uff09\u91c7\u96c6\u6bd4\u8d5b\u6570\u636e\u3001\u7403\u961f\u4fe1\u606f\u3001\u5386\u53f2\u6218\u7ee9\u3001\u5b9e\u65f6\u8d54\u7387\u7b49</li> <li>\u6570\u636e\u6807\u51c6\u5316\uff1a\u5c06\u4e0d\u540c\u683c\u5f0f\u7684\u6570\u636e\u7edf\u4e00\u8f6c\u6362\u4e3a\u6807\u51c6\u683c\u5f0f</li> </ul>"},{"location":"architecture/architecture/#_3","title":"\u5904\u7406\u9636\u6bb5","text":"<ul> <li>\u6570\u636e\u6e05\u6d17\uff1a\u53bb\u91cd\u3001\u8865\u7f3a\u5931\u503c\u3001\u5f02\u5e38\u503c\u68c0\u6d4b\u548c\u5904\u7406</li> <li>\u7279\u5f81\u5de5\u7a0b\uff1a\u63d0\u53d6\u7403\u961f\u5b9e\u529b\u6307\u6807\u3001\u4e3b\u5ba2\u573a\u4f18\u52bf\u3001\u5386\u53f2\u4ea4\u950b\u8bb0\u5f55\u3001\u4f24\u75c5\u60c5\u51b5\u7b49\u7279\u5f81</li> <li>\u6570\u636e\u5b58\u50a8\uff1a\u7ed3\u6784\u5316\u6570\u636e\u5b58\u5165\u5173\u7cfb\u6570\u636e\u5e93\uff0c\u7f13\u5b58\u70ed\u70b9\u6570\u636e\u5230Redis</li> </ul>"},{"location":"architecture/architecture/#_4","title":"\u5efa\u6a21\u9636\u6bb5","text":"<ul> <li>\u6a21\u578b\u8bad\u7ec3\uff1a\u4f7f\u7528XGBoost/LightGBM\u5bf9\u5386\u53f2\u6570\u636e\u8fdb\u884c\u8bad\u7ec3</li> <li>\u6a21\u578b\u8bc4\u4f30\uff1a\u901a\u8fc7\u4ea4\u53c9\u9a8c\u8bc1\u3001\u56de\u6d4b\u7b49\u65b9\u5f0f\u8bc4\u4f30\u6a21\u578b\u6027\u80fd</li> <li>\u9884\u6d4b\u751f\u6210\uff1a\u5bf9\u5373\u5c06\u8fdb\u884c\u7684\u6bd4\u8d5b\u751f\u6210\u9884\u6d4b\u7ed3\u679c\u548c\u7f6e\u4fe1\u5ea6</li> </ul>"},{"location":"architecture/architecture/#_5","title":"\u8f93\u51fa\u9636\u6bb5","text":"<ul> <li>API\u670d\u52a1\uff1a\u901a\u8fc7FastAPI\u63d0\u4f9bRESTful\u63a5\u53e3</li> <li>\u524d\u7aef\u5c55\u793a\uff1a\u4f7f\u7528Vue.js/React\u6784\u5efa\u7528\u6237\u754c\u9762\uff0c\u901a\u8fc7ECharts\u5c55\u793a\u9884\u6d4b\u7ed3\u679c\u548c\u7edf\u8ba1\u5206\u6790</li> <li>\u5b9e\u65f6\u66f4\u65b0\uff1a\u652f\u6301\u5b9e\u65f6\u6570\u636e\u66f4\u65b0\u548c\u9884\u6d4b\u7ed3\u679c\u5237\u65b0</li> </ul>"},{"location":"architecture/architecture/#2","title":"2. \u6a21\u5757\u8bbe\u8ba1\u8bf4\u660e","text":""},{"location":"architecture/architecture/#21","title":"2.1 \u6570\u636e\u91c7\u96c6\u6a21\u5757","text":""},{"location":"architecture/architecture/#_6","title":"\u804c\u8d23","text":"<ul> <li>\u4ece\u591a\u4e2a\u6570\u636e\u6e90\u91c7\u96c6\u8db3\u7403\u6bd4\u8d5b\u76f8\u5173\u6570\u636e</li> <li>\u5b9e\u73b0\u589e\u91cf\u91c7\u96c6\u548c\u5168\u91cf\u540c\u6b65\u673a\u5236</li> <li>\u5904\u7406API\u9650\u6d41\u548c\u53cd\u722c\u866b\u7b56\u7565</li> <li>\u4fdd\u8bc1\u6570\u636e\u91c7\u96c6\u7684\u7a33\u5b9a\u6027\u548c\u5b9e\u65f6\u6027</li> </ul>"},{"location":"architecture/architecture/#_7","title":"\u8f93\u5165/\u8f93\u51fa","text":"<ul> <li>\u8f93\u5165\uff1aAPI\u7aef\u70b9\u914d\u7f6e\u3001\u722c\u866b\u76ee\u6807\u7f51\u7ad9\u3001\u91c7\u96c6\u4efb\u52a1\u8c03\u5ea6\u914d\u7f6e</li> <li>\u8f93\u51fa\uff1a\u6807\u51c6\u5316\u7684\u6bd4\u8d5b\u6570\u636e\u3001\u7403\u961f\u6570\u636e\u3001\u8d54\u7387\u6570\u636e\u3001\u7403\u5458\u6570\u636e</li> </ul>"},{"location":"architecture/architecture/#_8","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"<pre><code>src/data_collection/\n\u251c\u2500\u2500 collectors/\n\u2502   \u251c\u2500\u2500 api_collector.py      # API\u6570\u636e\u91c7\u96c6\u5668\n\u2502   \u251c\u2500\u2500 web_scraper.py        # \u7f51\u9875\u722c\u866b\n\u2502   \u2514\u2500\u2500 odds_collector.py     # \u8d54\u7387\u6570\u636e\u91c7\u96c6\n\u251c\u2500\u2500 schedulers/\n\u2502   \u251c\u2500\u2500 task_scheduler.py     # \u4efb\u52a1\u8c03\u5ea6\u5668\n\u2502   \u2514\u2500\u2500 incremental_sync.py   # \u589e\u91cf\u540c\u6b65\n\u2514\u2500\u2500 utils/\n    \u251c\u2500\u2500 rate_limiter.py       # \u8bbf\u95ee\u9891\u7387\u63a7\u5236\n    \u2514\u2500\u2500 proxy_manager.py      # \u4ee3\u7406IP\u7ba1\u7406\n</code></pre>"},{"location":"architecture/architecture/#_9","title":"\u4f9d\u8d56\u5173\u7cfb","text":"<ul> <li>\u4f9d\u8d56\uff1a\u5916\u90e8\u6570\u636eAPI\u3001\u4ee3\u7406\u670d\u52a1\u3001\u4efb\u52a1\u8c03\u5ea6\u6846\u67b6</li> <li>\u88ab\u4f9d\u8d56\uff1a\u6570\u636e\u5b58\u50a8\u6a21\u5757\u3001\u6570\u636e\u6e05\u6d17\u6a21\u5757</li> </ul>"},{"location":"architecture/architecture/#_10","title":"\u6269\u5c55\u65b9\u5411","text":"<ul> <li>\u652f\u6301\u66f4\u591a\u6570\u636e\u6e90\u63a5\u5165</li> <li>\u5b9e\u73b0\u5206\u5e03\u5f0f\u91c7\u96c6\u67b6\u6784</li> <li>\u589e\u52a0\u5b9e\u65f6\u6d41\u6570\u636e\u91c7\u96c6\u80fd\u529b</li> </ul>"},{"location":"architecture/architecture/#22","title":"2.2 \u6570\u636e\u5b58\u50a8\u4e0e\u6e05\u6d17\u6a21\u5757","text":""},{"location":"architecture/architecture/#_11","title":"\u804c\u8d23","text":"<ul> <li>\u6570\u636e\u8d28\u91cf\u68c0\u67e5\u548c\u6e05\u6d17\u5904\u7406</li> <li>\u5efa\u7acb\u7edf\u4e00\u7684\u6570\u636e\u5b58\u50a8\u89c4\u8303</li> <li>\u5b9e\u73b0\u6570\u636e\u5907\u4efd\u548c\u6062\u590d\u673a\u5236</li> <li>\u63d0\u4f9b\u6570\u636e\u8bbf\u95ee\u63a5\u53e3</li> </ul>"},{"location":"architecture/architecture/#_12","title":"\u8f93\u5165/\u8f93\u51fa","text":"<ul> <li>\u8f93\u5165\uff1a\u539f\u59cb\u91c7\u96c6\u6570\u636e\u3001\u6570\u636e\u8d28\u91cf\u89c4\u5219\u3001\u6e05\u6d17\u914d\u7f6e\u53c2\u6570</li> <li>\u8f93\u51fa\uff1a\u6e05\u6d17\u540e\u7684\u7ed3\u6784\u5316\u6570\u636e\u3001\u6570\u636e\u8d28\u91cf\u62a5\u544a\u3001\u5f02\u5e38\u6570\u636e\u8bb0\u5f55</li> </ul>"},{"location":"architecture/architecture/#_13","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"<pre><code>src/data_processing/\n\u251c\u2500\u2500 cleaners/\n\u2502   \u251c\u2500\u2500 data_validator.py     # \u6570\u636e\u9a8c\u8bc1\u5668\n\u2502   \u251c\u2500\u2500 duplicate_remover.py  # \u53bb\u91cd\u5904\u7406\n\u2502   \u2514\u2500\u2500 missing_handler.py    # \u7f3a\u5931\u503c\u5904\u7406\n\u251c\u2500\u2500 storage/\n\u2502   \u251c\u2500\u2500 database_manager.py   # \u6570\u636e\u5e93\u7ba1\u7406\n\u2502   \u251c\u2500\u2500 cache_manager.py      # \u7f13\u5b58\u7ba1\u7406\n\u2502   \u2514\u2500\u2500 backup_manager.py     # \u5907\u4efd\u7ba1\u7406\n\u2514\u2500\u2500 transformers/\n    \u251c\u2500\u2500 data_normalizer.py    # \u6570\u636e\u6807\u51c6\u5316\n    \u2514\u2500\u2500 schema_mapper.py      # \u6a21\u5f0f\u6620\u5c04\n</code></pre>"},{"location":"architecture/architecture/#_14","title":"\u4f9d\u8d56\u5173\u7cfb","text":"<ul> <li>\u4f9d\u8d56\uff1a\u6570\u636e\u91c7\u96c6\u6a21\u5757\u3001\u6570\u636e\u5e93\u7cfb\u7edf\u3001\u7f13\u5b58\u7cfb\u7edf</li> <li>\u88ab\u4f9d\u8d56\uff1a\u7279\u5f81\u5de5\u7a0b\u6a21\u5757\u3001\u6a21\u578b\u8bad\u7ec3\u6a21\u5757</li> </ul>"},{"location":"architecture/architecture/#_15","title":"\u6269\u5c55\u65b9\u5411","text":"<ul> <li>\u5b9e\u73b0\u6d41\u5f0f\u6570\u636e\u5904\u7406</li> <li>\u589e\u52a0\u6570\u636e\u8840\u7f18\u8ddf\u8e2a\u529f\u80fd</li> <li>\u652f\u6301\u591a\u79cd\u6570\u636e\u683c\u5f0f\u8f6c\u6362</li> </ul>"},{"location":"architecture/architecture/#23","title":"2.3 \u7279\u5f81\u5de5\u7a0b\u4e0e\u6a21\u578b\u8bad\u7ec3\u6a21\u5757","text":""},{"location":"architecture/architecture/#_16","title":"\u804c\u8d23","text":"<ul> <li>\u8bbe\u8ba1\u548c\u63d0\u53d6\u9884\u6d4b\u76f8\u5173\u7684\u7279\u5f81</li> <li>\u8bad\u7ec3\u548c\u4f18\u5316\u673a\u5668\u5b66\u4e60\u6a21\u578b</li> <li>\u5b9e\u73b0\u6a21\u578b\u7248\u672c\u7ba1\u7406\u548cA/B\u6d4b\u8bd5</li> <li>\u63d0\u4f9b\u6a21\u578b\u6027\u80fd\u76d1\u63a7</li> </ul>"},{"location":"architecture/architecture/#_17","title":"\u8f93\u5165/\u8f93\u51fa","text":"<ul> <li>\u8f93\u5165\uff1a\u6e05\u6d17\u540e\u7684\u6bd4\u8d5b\u6570\u636e\u3001\u7403\u961f\u6570\u636e\u3001\u5386\u53f2\u7edf\u8ba1\u6570\u636e</li> <li>\u8f93\u51fa\uff1a\u8bad\u7ec3\u597d\u7684\u9884\u6d4b\u6a21\u578b\u3001\u7279\u5f81\u91cd\u8981\u6027\u5206\u6790\u3001\u6a21\u578b\u8bc4\u4f30\u62a5\u544a</li> </ul>"},{"location":"architecture/architecture/#_18","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"<pre><code>src/ml/\n\u251c\u2500\u2500 features/\n\u2502   \u251c\u2500\u2500 team_features.py      # \u7403\u961f\u7279\u5f81\u5de5\u7a0b\n\u2502   \u251c\u2500\u2500 match_features.py     # \u6bd4\u8d5b\u7279\u5f81\u5de5\u7a0b\n\u2502   \u2514\u2500\u2500 historical_features.py # \u5386\u53f2\u6570\u636e\u7279\u5f81\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 xgboost_model.py      # XGBoost\u6a21\u578b\n\u2502   \u251c\u2500\u2500 lightgbm_model.py     # LightGBM\u6a21\u578b\n\u2502   \u2514\u2500\u2500 ensemble_model.py     # \u96c6\u6210\u6a21\u578b\n\u251c\u2500\u2500 training/\n\u2502   \u251c\u2500\u2500 model_trainer.py      # \u6a21\u578b\u8bad\u7ec3\u5668\n\u2502   \u251c\u2500\u2500 hyperparameter_tuner.py # \u8d85\u53c2\u6570\u8c03\u4f18\n\u2502   \u2514\u2500\u2500 cross_validator.py    # \u4ea4\u53c9\u9a8c\u8bc1\n\u2514\u2500\u2500 evaluation/\n    \u251c\u2500\u2500 model_evaluator.py    # \u6a21\u578b\u8bc4\u4f30\n    \u2514\u2500\u2500 performance_monitor.py # \u6027\u80fd\u76d1\u63a7\n</code></pre>"},{"location":"architecture/architecture/#_19","title":"\u4f9d\u8d56\u5173\u7cfb","text":"<ul> <li>\u4f9d\u8d56\uff1a\u6570\u636e\u5904\u7406\u6a21\u5757\u3001\u673a\u5668\u5b66\u4e60\u5e93\uff08XGBoost\u3001LightGBM\uff09</li> <li>\u88ab\u4f9d\u8d56\uff1a\u9884\u6d4b\u670d\u52a1\u6a21\u5757</li> </ul>"},{"location":"architecture/architecture/#_20","title":"\u6269\u5c55\u65b9\u5411","text":"<ul> <li>\u5f15\u5165\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b</li> <li>\u5b9e\u73b0\u5728\u7ebf\u5b66\u4e60\u80fd\u529b</li> <li>\u589e\u52a0\u7279\u5f81\u81ea\u52a8\u53d1\u73b0\u529f\u80fd</li> </ul>"},{"location":"architecture/architecture/#24","title":"2.4 \u9884\u6d4b\u670d\u52a1\u6a21\u5757","text":""},{"location":"architecture/architecture/#_21","title":"\u804c\u8d23","text":"<ul> <li>\u57fa\u4e8e\u8bad\u7ec3\u6a21\u578b\u63d0\u4f9b\u9884\u6d4b\u670d\u52a1</li> <li>\u5b9e\u73b0\u5b9e\u65f6\u9884\u6d4bAPI\u63a5\u53e3</li> <li>\u7ba1\u7406\u9884\u6d4b\u7ed3\u679c\u7f13\u5b58\u548c\u5386\u53f2\u8bb0\u5f55</li> <li>\u63d0\u4f9b\u9884\u6d4b\u7f6e\u4fe1\u5ea6\u548c\u89e3\u91ca\u6027\u4fe1\u606f</li> </ul>"},{"location":"architecture/architecture/#_22","title":"\u8f93\u5165/\u8f93\u51fa","text":"<ul> <li>\u8f93\u5165\uff1a\u9884\u6d4b\u8bf7\u6c42\u3001\u6bd4\u8d5b\u4fe1\u606f\u3001\u5b9e\u65f6\u6570\u636e\u66f4\u65b0</li> <li>\u8f93\u51fa\uff1a\u9884\u6d4b\u7ed3\u679c\u3001\u7f6e\u4fe1\u5ea6\u8bc4\u5206\u3001\u9884\u6d4b\u89e3\u91ca\u4fe1\u606f</li> </ul>"},{"location":"architecture/architecture/#_23","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"<pre><code>src/prediction/\n\u251c\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 prediction_service.py  # \u9884\u6d4b\u670d\u52a1\u6838\u5fc3\n\u2502   \u251c\u2500\u2500 model_loader.py       # \u6a21\u578b\u52a0\u8f7d\u5668\n\u2502   \u2514\u2500\u2500 result_formatter.py   # \u7ed3\u679c\u683c\u5f0f\u5316\n\u251c\u2500\u2500 api/\n\u2502   \u251c\u2500\u2500 prediction_api.py     # \u9884\u6d4bAPI\u63a5\u53e3\n\u2502   \u251c\u2500\u2500 batch_predictor.py    # \u6279\u91cf\u9884\u6d4b\n\u2502   \u2514\u2500\u2500 real_time_predictor.py # \u5b9e\u65f6\u9884\u6d4b\n\u2514\u2500\u2500 utils/\n    \u251c\u2500\u2500 confidence_calculator.py # \u7f6e\u4fe1\u5ea6\u8ba1\u7b97\n    \u2514\u2500\u2500 explanation_generator.py # \u9884\u6d4b\u89e3\u91ca\n</code></pre>"},{"location":"architecture/architecture/#_24","title":"\u4f9d\u8d56\u5173\u7cfb","text":"<ul> <li>\u4f9d\u8d56\uff1a\u673a\u5668\u5b66\u4e60\u6a21\u5757\u3001\u7f13\u5b58\u7cfb\u7edf\u3001\u6570\u636e\u5e93\u7cfb\u7edf</li> <li>\u88ab\u4f9d\u8d56\uff1aAPI\u670d\u52a1\u5c42\u3001\u524d\u7aef\u5c55\u793a\u6a21\u5757</li> </ul>"},{"location":"architecture/architecture/#_25","title":"\u6269\u5c55\u65b9\u5411","text":"<ul> <li>\u652f\u6301\u591a\u6a21\u578b\u878d\u5408\u9884\u6d4b</li> <li>\u5b9e\u73b0\u9884\u6d4b\u7ed3\u679c\u7684\u5b9e\u65f6\u6821\u51c6</li> <li>\u589e\u52a0\u7528\u6237\u4e2a\u6027\u5316\u9884\u6d4b\u529f\u80fd</li> </ul>"},{"location":"architecture/architecture/#25","title":"2.5 \u524d\u7aef\u5c55\u793a\u6a21\u5757","text":""},{"location":"architecture/architecture/#_26","title":"\u804c\u8d23","text":"<ul> <li>\u63d0\u4f9b\u7528\u6237\u53cb\u597d\u7684Web\u754c\u9762</li> <li>\u5c55\u793a\u9884\u6d4b\u7ed3\u679c\u548c\u6570\u636e\u53ef\u89c6\u5316</li> <li>\u5b9e\u73b0\u54cd\u5e94\u5f0f\u8bbe\u8ba1\u652f\u6301\u591a\u8bbe\u5907\u8bbf\u95ee</li> <li>\u63d0\u4f9b\u5b9e\u65f6\u6570\u636e\u66f4\u65b0\u548c\u4ea4\u4e92\u529f\u80fd</li> </ul>"},{"location":"architecture/architecture/#_27","title":"\u8f93\u5165/\u8f93\u51fa","text":"<ul> <li>\u8f93\u5165\uff1aAPI\u6570\u636e\u3001\u7528\u6237\u4ea4\u4e92\u4e8b\u4ef6\u3001\u5b9e\u65f6\u6570\u636e\u63a8\u9001</li> <li>\u8f93\u51fa\uff1a\u53ef\u89c6\u5316\u56fe\u8868\u3001\u7528\u6237\u754c\u9762\u3001\u4ea4\u4e92\u53cd\u9988</li> </ul>"},{"location":"architecture/architecture/#_28","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"<pre><code>frontend/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u2502   \u251c\u2500\u2500 PredictionCard.vue    # \u9884\u6d4b\u7ed3\u679c\u5361\u7247\n\u2502   \u2502   \u251c\u2500\u2500 MatchList.vue         # \u6bd4\u8d5b\u5217\u8868\n\u2502   \u2502   \u2514\u2500\u2500 StatisticsChart.vue   # \u7edf\u8ba1\u56fe\u8868\n\u2502   \u251c\u2500\u2500 views/\n\u2502   \u2502   \u251c\u2500\u2500 Dashboard.vue         # \u4eea\u8868\u677f\n\u2502   \u2502   \u251c\u2500\u2500 MatchDetail.vue       # \u6bd4\u8d5b\u8be6\u60c5\n\u2502   \u2502   \u2514\u2500\u2500 Analytics.vue         # \u6570\u636e\u5206\u6790\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u2502   \u251c\u2500\u2500 api.js                # API\u670d\u52a1\n\u2502   \u2502   \u2514\u2500\u2500 websocket.js          # WebSocket\u8fde\u63a5\n\u2502   \u2514\u2500\u2500 utils/\n\u2502       \u251c\u2500\u2500 chart-config.js       # \u56fe\u8868\u914d\u7f6e\n\u2502       \u2514\u2500\u2500 data-formatter.js     # \u6570\u636e\u683c\u5f0f\u5316\n</code></pre>"},{"location":"architecture/architecture/#_29","title":"\u4f9d\u8d56\u5173\u7cfb","text":"<ul> <li>\u4f9d\u8d56\uff1aVue.js/React\u6846\u67b6\u3001ECharts/Plotly\u3001API\u670d\u52a1</li> <li>\u88ab\u4f9d\u8d56\uff1a\u6700\u7ec8\u7528\u6237</li> </ul>"},{"location":"architecture/architecture/#_30","title":"\u6269\u5c55\u65b9\u5411","text":"<ul> <li>\u652f\u6301\u79fb\u52a8\u7aefAPP\u5f00\u53d1</li> <li>\u5b9e\u73b0\u4e2a\u6027\u5316\u7528\u6237\u754c\u9762</li> <li>\u589e\u52a0\u793e\u4ea4\u5206\u4eab\u529f\u80fd</li> </ul>"},{"location":"architecture/architecture/#26","title":"2.6 \u5bb9\u5668\u5316\u4e0e\u90e8\u7f72\u6a21\u5757","text":""},{"location":"architecture/architecture/#_31","title":"\u804c\u8d23","text":"<ul> <li>\u5b9e\u73b0\u5e94\u7528\u7684\u5bb9\u5668\u5316\u90e8\u7f72</li> <li>\u7ba1\u7406\u670d\u52a1\u7f16\u6392\u548c\u8d1f\u8f7d\u5747\u8861</li> <li>\u63d0\u4f9bCI/CD\u6d41\u6c34\u7ebf\u652f\u6301</li> <li>\u76d1\u63a7\u7cfb\u7edf\u8fd0\u884c\u72b6\u6001\u548c\u6027\u80fd\u6307\u6807</li> </ul>"},{"location":"architecture/architecture/#_32","title":"\u8f93\u5165/\u8f93\u51fa","text":"<ul> <li>\u8f93\u5165\uff1a\u5e94\u7528\u4ee3\u7801\u3001\u90e8\u7f72\u914d\u7f6e\u3001\u73af\u5883\u53d8\u91cf</li> <li>\u8f93\u51fa\uff1a\u8fd0\u884c\u4e2d\u7684\u670d\u52a1\u5b9e\u4f8b\u3001\u76d1\u63a7\u6570\u636e\u3001\u90e8\u7f72\u65e5\u5fd7</li> </ul>"},{"location":"architecture/architecture/#_33","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"<pre><code>deployment/\n\u251c\u2500\u2500 docker/\n\u2502   \u251c\u2500\u2500 Dockerfile.api        # API\u670d\u52a1\u955c\u50cf\n\u2502   \u251c\u2500\u2500 Dockerfile.worker     # \u540e\u53f0\u4efb\u52a1\u955c\u50cf\n\u2502   \u2514\u2500\u2500 Dockerfile.frontend   # \u524d\u7aef\u5e94\u7528\u955c\u50cf\n\u251c\u2500\u2500 kubernetes/\n\u2502   \u251c\u2500\u2500 api-deployment.yaml   # API\u670d\u52a1\u90e8\u7f72\n\u2502   \u251c\u2500\u2500 database-config.yaml  # \u6570\u636e\u5e93\u914d\u7f6e\n\u2502   \u2514\u2500\u2500 ingress.yaml          # \u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\n\u251c\u2500\u2500 ci-cd/\n\u2502   \u251c\u2500\u2500 github-actions.yml    # CI/CD\u6d41\u6c34\u7ebf\n\u2502   \u2514\u2500\u2500 deployment-script.sh  # \u90e8\u7f72\u811a\u672c\n\u2514\u2500\u2500 monitoring/\n    \u251c\u2500\u2500 prometheus-config.yml  # \u76d1\u63a7\u914d\u7f6e\n    \u2514\u2500\u2500 grafana-dashboard.json # \u4eea\u8868\u677f\u914d\u7f6e\n</code></pre>"},{"location":"architecture/architecture/#_34","title":"\u4f9d\u8d56\u5173\u7cfb","text":"<ul> <li>\u4f9d\u8d56\uff1aDocker\u3001Kubernetes\u3001CI/CD\u5e73\u53f0</li> <li>\u88ab\u4f9d\u8d56\uff1a\u6240\u6709\u5176\u4ed6\u6a21\u5757\uff08\u63d0\u4f9b\u8fd0\u884c\u73af\u5883\uff09</li> </ul>"},{"location":"architecture/architecture/#_35","title":"\u6269\u5c55\u65b9\u5411","text":"<ul> <li>\u5b9e\u73b0\u591a\u4e91\u90e8\u7f72\u652f\u6301</li> <li>\u589e\u52a0\u81ea\u52a8\u6269\u7f29\u5bb9\u529f\u80fd</li> <li>\u63d0\u4f9b\u84dd\u7eff\u90e8\u7f72\u80fd\u529b</li> </ul>"},{"location":"architecture/architecture/#3","title":"3. \u6570\u636e\u5e93\u8bbe\u8ba1\u8349\u6848","text":""},{"location":"architecture/architecture/#31","title":"3.1 \u6838\u5fc3\u8868\u7ed3\u6784","text":""},{"location":"architecture/architecture/#311-teams","title":"3.1.1 \u7403\u961f\u8868 (teams)","text":"<pre><code>CREATE TABLE teams (\n    team_id INT PRIMARY KEY AUTO_INCREMENT,\n    team_name VARCHAR(100) NOT NULL,\n    team_code VARCHAR(10) UNIQUE,\n    country VARCHAR(50),\n    league_id INT,\n    founded_year INT,\n    stadium VARCHAR(100),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\n    INDEX idx_league (league_id),\n    INDEX idx_country (country)\n);\n</code></pre>"},{"location":"architecture/architecture/#312-matches","title":"3.1.2 \u6bd4\u8d5b\u8868 (matches)","text":"<pre><code>CREATE TABLE matches (\n    match_id INT PRIMARY KEY AUTO_INCREMENT,\n    home_team_id INT NOT NULL,\n    away_team_id INT NOT NULL,\n    league_id INT NOT NULL,\n    season VARCHAR(20),\n    match_date DATETIME NOT NULL,\n    match_status ENUM('scheduled', 'live', 'finished', 'cancelled') DEFAULT 'scheduled',\n    home_score INT,\n    away_score INT,\n    home_goals_ht INT, -- \u534a\u573a\u6bd4\u5206\n    away_goals_ht INT,\n    attendance INT,\n    referee VARCHAR(100),\n    venue VARCHAR(100),\n    weather_condition VARCHAR(50),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n\n    FOREIGN KEY (home_team_id) REFERENCES teams(team_id),\n    FOREIGN KEY (away_team_id) REFERENCES teams(team_id),\n    INDEX idx_date (match_date),\n    INDEX idx_teams (home_team_id, away_team_id),\n    INDEX idx_league_season (league_id, season),\n    INDEX idx_status (match_status)\n);\n</code></pre>"},{"location":"architecture/architecture/#313-odds","title":"3.1.3 \u8d54\u7387\u8868 (odds)","text":"<pre><code>CREATE TABLE odds (\n    odds_id INT PRIMARY KEY AUTO_INCREMENT,\n    match_id INT NOT NULL,\n    bookmaker VARCHAR(50) NOT NULL,\n    market_type ENUM('1x2', 'over_under', 'asian_handicap', 'both_teams_score') NOT NULL,\n    home_odds DECIMAL(8,4),\n    draw_odds DECIMAL(8,4),\n    away_odds DECIMAL(8,4),\n    over_odds DECIMAL(8,4),\n    under_odds DECIMAL(8,4),\n    line_value DECIMAL(4,2), -- \u76d8\u53e3\u503c\n    collected_at TIMESTAMP NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\n    FOREIGN KEY (match_id) REFERENCES matches(match_id),\n    INDEX idx_match_bookmaker (match_id, bookmaker),\n    INDEX idx_collected_at (collected_at),\n    INDEX idx_market_type (market_type)\n);\n</code></pre>"},{"location":"architecture/architecture/#314-features","title":"3.1.4 \u7279\u5f81\u8868 (features)","text":"<pre><code>CREATE TABLE features (\n    feature_id INT PRIMARY KEY AUTO_INCREMENT,\n    match_id INT NOT NULL,\n    team_id INT NOT NULL,\n    team_type ENUM('home', 'away') NOT NULL,\n\n    -- \u57fa\u7840\u7edf\u8ba1\u7279\u5f81\n    recent_5_wins INT DEFAULT 0,\n    recent_5_draws INT DEFAULT 0,\n    recent_5_losses INT DEFAULT 0,\n    recent_5_goals_for INT DEFAULT 0,\n    recent_5_goals_against INT DEFAULT 0,\n\n    -- \u4e3b\u5ba2\u573a\u7279\u5f81\n    home_wins INT DEFAULT 0,\n    home_draws INT DEFAULT 0,\n    home_losses INT DEFAULT 0,\n    away_wins INT DEFAULT 0,\n    away_draws INT DEFAULT 0,\n    away_losses INT DEFAULT 0,\n\n    -- \u5bf9\u6218\u5386\u53f2\u7279\u5f81\n    h2h_wins INT DEFAULT 0,\n    h2h_draws INT DEFAULT 0,\n    h2h_losses INT DEFAULT 0,\n    h2h_goals_for INT DEFAULT 0,\n    h2h_goals_against INT DEFAULT 0,\n\n    -- \u8054\u8d5b\u6392\u540d\u7279\u5f81\n    league_position INT,\n    points INT,\n    goal_difference INT,\n\n    -- \u5176\u4ed6\u7279\u5f81\n    days_since_last_match INT,\n    is_derby BOOLEAN DEFAULT FALSE,\n    avg_possession DECIMAL(5,2),\n    avg_shots_per_game DECIMAL(5,2),\n\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\n    FOREIGN KEY (match_id) REFERENCES matches(match_id),\n    FOREIGN KEY (team_id) REFERENCES teams(team_id),\n    INDEX idx_match (match_id),\n    INDEX idx_team (team_id)\n);\n</code></pre>"},{"location":"architecture/architecture/#315-predictions","title":"3.1.5 \u9884\u6d4b\u8868 (predictions)","text":"<pre><code>CREATE TABLE predictions (\n    prediction_id INT PRIMARY KEY AUTO_INCREMENT,\n    match_id INT NOT NULL,\n    model_name VARCHAR(50) NOT NULL,\n    model_version VARCHAR(20) NOT NULL,\n\n    -- \u9884\u6d4b\u7ed3\u679c\n    predicted_result ENUM('home_win', 'draw', 'away_win') NOT NULL,\n    home_win_probability DECIMAL(5,4) NOT NULL,\n    draw_probability DECIMAL(5,4) NOT NULL,\n    away_win_probability DECIMAL(5,4) NOT NULL,\n\n    -- \u6bd4\u5206\u9884\u6d4b\n    predicted_home_score DECIMAL(3,2),\n    predicted_away_score DECIMAL(3,2),\n\n    -- \u5176\u4ed6\u9884\u6d4b\n    over_2_5_probability DECIMAL(5,4),\n    both_teams_score_probability DECIMAL(5,4),\n\n    -- \u7f6e\u4fe1\u5ea6\u548c\u7279\u5f81\u91cd\u8981\u6027\n    confidence_score DECIMAL(5,4),\n    feature_importance JSON, -- \u5b58\u50a8\u7279\u5f81\u91cd\u8981\u6027\u6570\u636e\n\n    predicted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\n    FOREIGN KEY (match_id) REFERENCES matches(match_id),\n    INDEX idx_match_model (match_id, model_name),\n    INDEX idx_predicted_at (predicted_at)\n);\n</code></pre>"},{"location":"architecture/architecture/#316-leagues","title":"3.1.6 \u8054\u8d5b\u8868 (leagues)","text":"<pre><code>CREATE TABLE leagues (\n    league_id INT PRIMARY KEY AUTO_INCREMENT,\n    league_name VARCHAR(100) NOT NULL,\n    league_code VARCHAR(20) UNIQUE,\n    country VARCHAR(50),\n    level INT, -- \u8054\u8d5b\u7ea7\u522b\n    season_start_month INT,\n    season_end_month INT,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\n    INDEX idx_country (country),\n    INDEX idx_active (is_active)\n);\n</code></pre>"},{"location":"architecture/architecture/#32","title":"3.2 \u6570\u636e\u4e00\u81f4\u6027\u7ea6\u675f","text":""},{"location":"architecture/architecture/#321","title":"3.2.1 \u6570\u636e\u5b8c\u6574\u6027\u7ea6\u675f","text":"<ul> <li>\u6240\u6709\u6bd4\u8d5b\u5fc5\u987b\u6709\u6709\u6548\u7684\u4e3b\u5ba2\u573a\u7403\u961f</li> <li>\u5df2\u5b8c\u6210\u7684\u6bd4\u8d5b\u5fc5\u987b\u6709\u6bd4\u5206</li> <li>\u9884\u6d4b\u5fc5\u987b\u57fa\u4e8e\u672a\u5b8c\u6210\u7684\u6bd4\u8d5b</li> <li>\u8d54\u7387\u6570\u636e\u5fc5\u987b\u5728\u6bd4\u8d5b\u5f00\u59cb\u524d\u6536\u96c6</li> </ul>"},{"location":"architecture/architecture/#322","title":"3.2.2 \u4e1a\u52a1\u903b\u8f91\u7ea6\u675f","text":"<pre><code>-- \u786e\u4fdd\u6bd4\u8d5b\u65e5\u671f\u4e0d\u5728\u8fc7\u53bb\uff08\u5bf9\u4e8e\u65b0\u5efa\u6bd4\u8d5b\uff09\nALTER TABLE matches ADD CONSTRAINT check_future_date\nCHECK (match_date &gt; DATE_SUB(CURRENT_TIMESTAMP, INTERVAL 1 DAY));\n\n-- \u786e\u4fdd\u6982\u7387\u4e4b\u548c\u7b49\u4e8e1\nALTER TABLE predictions ADD CONSTRAINT check_probability_sum\nCHECK (ABS((home_win_probability + draw_probability + away_win_probability) - 1.0) &lt; 0.001);\n\n-- \u786e\u4fdd\u8d54\u7387\u4e3a\u6b63\u6570\nALTER TABLE odds ADD CONSTRAINT check_positive_odds\nCHECK (home_odds &gt; 0 AND draw_odds &gt; 0 AND away_odds &gt; 0);\n</code></pre>"},{"location":"architecture/architecture/#33","title":"3.3 \u7d22\u5f15\u4f18\u5316\u7b56\u7565","text":""},{"location":"architecture/architecture/#331","title":"3.3.1 \u67e5\u8be2\u4f18\u5316\u7d22\u5f15","text":"<pre><code>-- \u6700\u8fd1\u6bd4\u8d5b\u67e5\u8be2\u4f18\u5316\nCREATE INDEX idx_recent_matches ON matches(match_date DESC, league_id);\n\n-- \u7403\u961f\u5386\u53f2\u6218\u7ee9\u67e5\u8be2\u4f18\u5316\nCREATE INDEX idx_team_matches ON matches(home_team_id, away_team_id, match_date);\n\n-- \u9884\u6d4b\u7ed3\u679c\u67e5\u8be2\u4f18\u5316\nCREATE INDEX idx_predictions_lookup ON predictions(match_id, model_name, predicted_at DESC);\n\n-- \u7279\u5f81\u5de5\u7a0b\u67e5\u8be2\u4f18\u5316\nCREATE INDEX idx_features_team_date ON matches(home_team_id, match_date);\nCREATE INDEX idx_features_away_date ON matches(away_team_id, match_date);\n</code></pre>"},{"location":"architecture/architecture/#34","title":"3.4 \u6570\u636e\u5206\u533a\u7b56\u7565","text":""},{"location":"architecture/architecture/#341","title":"3.4.1 \u6309\u65f6\u95f4\u5206\u533a","text":"<pre><code>-- \u6bd4\u8d5b\u8868\u6309\u5e74\u4efd\u5206\u533a\nALTER TABLE matches PARTITION BY RANGE (YEAR(match_date)) (\n    PARTITION p2020 VALUES LESS THAN (2021),\n    PARTITION p2021 VALUES LESS THAN (2022),\n    PARTITION p2022 VALUES LESS THAN (2023),\n    PARTITION p2023 VALUES LESS THAN (2024),\n    PARTITION p2024 VALUES LESS THAN (2025),\n    PARTITION p_future VALUES LESS THAN MAXVALUE\n);\n\n-- \u9884\u6d4b\u8868\u6309\u6708\u5206\u533a\nALTER TABLE predictions PARTITION BY RANGE (YEAR(predicted_at) * 100 + MONTH(predicted_at)) (\n    PARTITION p202401 VALUES LESS THAN (202402),\n    PARTITION p202402 VALUES LESS THAN (202403),\n    -- ... \u66f4\u591a\u5206\u533a\n    PARTITION p_current VALUES LESS THAN MAXVALUE\n);\n</code></pre>"},{"location":"architecture/architecture/#35","title":"3.5 \u6269\u5c55\u6027\u8003\u8651","text":""},{"location":"architecture/architecture/#351","title":"3.5.1 \u8bfb\u5199\u5206\u79bb","text":"<ul> <li>\u4e3b\u5e93\u5904\u7406\u5199\u64cd\u4f5c\u548c\u5b9e\u65f6\u67e5\u8be2</li> <li>\u4ece\u5e93\u5904\u7406\u5386\u53f2\u6570\u636e\u5206\u6790\u548c\u62a5\u8868\u67e5\u8be2</li> <li>\u9884\u6d4b\u670d\u52a1\u4f18\u5148\u4f7f\u7528\u4ece\u5e93\u51cf\u5c11\u4e3b\u5e93\u538b\u529b</li> </ul>"},{"location":"architecture/architecture/#352","title":"3.5.2 \u7f13\u5b58\u7b56\u7565","text":"<ul> <li>Redis\u7f13\u5b58\u70ed\u70b9\u67e5\u8be2\u6570\u636e\uff08\u8fd1\u671f\u6bd4\u8d5b\u3001\u5b9e\u65f6\u9884\u6d4b\u7ed3\u679c\uff09</li> <li>\u7f13\u5b58\u7403\u961f\u57fa\u7840\u4fe1\u606f\u548c\u8054\u8d5b\u4fe1\u606f</li> <li>\u7f13\u5b58\u9884\u6d4b\u6a21\u578b\u8f93\u51fa\u7ed3\u679c\uff081\u5c0f\u65f6\u6709\u6548\u671f\uff09</li> </ul>"},{"location":"architecture/architecture/#353","title":"3.5.3 \u5f52\u6863\u7b56\u7565","text":"<ul> <li>\u5386\u53f2\u6bd4\u8d5b\u6570\u636e\uff083\u5e74\u4ee5\u4e0a\uff09\u5f52\u6863\u5230\u5355\u72ec\u7684\u5f52\u6863\u5e93</li> <li>\u5386\u53f2\u9884\u6d4b\u6570\u636e\u4fdd\u7559\u7528\u4e8e\u6a21\u578b\u6548\u679c\u56de\u6d4b</li> <li>\u8d54\u7387\u5386\u53f2\u6570\u636e\u5b9a\u671f\u6e05\u7406\uff0c\u4fdd\u7559\u4ee3\u8868\u6027\u6837\u672c</li> </ul>"},{"location":"architecture/architecture/#4","title":"4. \u5f00\u53d1\u9636\u6bb5\u89c4\u5212","text":""},{"location":"architecture/architecture/#41","title":"4.1 \u9636\u6bb5\u4e00\uff1a\u73af\u5883\u642d\u5efa + \u6570\u636e\u91c7\u96c6 + \u6570\u636e\u5b58\u50a8\u6e05\u6d17","text":""},{"location":"architecture/architecture/#4-6","title":"\u65f6\u95f4\u89c4\u5212\uff1a4-6\u5468","text":""},{"location":"architecture/architecture/#_36","title":"\u4e3b\u8981\u4efb\u52a1","text":"<ol> <li>\u5f00\u53d1\u73af\u5883\u642d\u5efa\uff081\u5468\uff09</li> <li>\u642d\u5efaPython\u5f00\u53d1\u73af\u5883\u548c\u4f9d\u8d56\u7ba1\u7406</li> <li>\u914d\u7f6e\u6570\u636e\u5e93\uff08MySQL/PostgreSQL\uff09\u548cRedis</li> <li>\u5efa\u7acbGit\u7248\u672c\u63a7\u5236\u548c\u4ee3\u7801\u89c4\u8303</li> <li> <p>\u914d\u7f6e\u65e5\u5fd7\u7cfb\u7edf\u548c\u76d1\u63a7\u57fa\u7840\u8bbe\u65bd</p> </li> <li> <p>\u6570\u636e\u91c7\u96c6\u7cfb\u7edf\u5f00\u53d1\uff082-3\u5468\uff09</p> </li> <li>\u5b9e\u73b0API\u6570\u636e\u91c7\u96c6\u5668\uff08API-Football\u7b49\uff09</li> <li>\u5f00\u53d1Web\u722c\u866b\u7cfb\u7edf\uff08\u5904\u7406\u53cd\u722c\u673a\u5236\uff09</li> <li>\u5efa\u7acb\u6570\u636e\u91c7\u96c6\u4efb\u52a1\u8c03\u5ea6\u7cfb\u7edf</li> <li>\u5b9e\u73b0\u589e\u91cf\u6570\u636e\u540c\u6b65\u673a\u5236</li> <li> <p>\u5efa\u7acb\u6570\u636e\u91c7\u96c6\u76d1\u63a7\u548c\u544a\u8b66</p> </li> <li> <p>\u6570\u636e\u5b58\u50a8\u548c\u6e05\u6d17\u7cfb\u7edf\uff081-2\u5468\uff09</p> </li> <li>\u5b9e\u73b0\u6570\u636e\u5e93\u8868\u7ed3\u6784\u521b\u5efa\u548c\u8fc1\u79fb</li> <li>\u5f00\u53d1\u6570\u636e\u6e05\u6d17\u548c\u9a8c\u8bc1\u6a21\u5757</li> <li>\u5efa\u7acb\u6570\u636e\u8d28\u91cf\u76d1\u63a7\u7cfb\u7edf</li> <li>\u5b9e\u73b0\u6570\u636e\u5907\u4efd\u548c\u6062\u590d\u673a\u5236</li> </ol>"},{"location":"architecture/architecture/#_37","title":"\u4ea4\u4ed8\u7269","text":"<ul> <li>\u5b8c\u6574\u7684\u6570\u636e\u91c7\u96c6\u7cfb\u7edf\uff0c\u80fd\u591f\u7a33\u5b9a\u83b7\u53d6\u4e3b\u8981\u8054\u8d5b\u6570\u636e</li> <li>\u6570\u636e\u5e93schema\u548c\u6570\u636e\u6e05\u6d17\u6d41\u6c34\u7ebf</li> <li>\u6570\u636e\u8d28\u91cf\u62a5\u544a\u548c\u76d1\u63a7\u4eea\u8868\u677f</li> <li>\u6280\u672f\u6587\u6863\u548c\u64cd\u4f5c\u624b\u518c</li> </ul>"},{"location":"architecture/architecture/#_38","title":"\u91cc\u7a0b\u7891\u68c0\u67e5","text":"<ul> <li>\u80fd\u591f\u91c7\u96c6\u81f3\u5c113\u4e2a\u4e3b\u8981\u8054\u8d5b\u7684\u5386\u53f2\u6570\u636e\uff08\u6700\u8fd12\u4e2a\u8d5b\u5b63\uff09</li> <li>\u6570\u636e\u8d28\u91cf\u8fbe\u6807\uff08\u5b8c\u6574\u6027&gt;95%\uff0c\u51c6\u786e\u6027&gt;98%\uff09</li> <li>\u7cfb\u7edf\u7a33\u5b9a\u8fd0\u884c72\u5c0f\u65f6\u65e0\u4e2d\u65ad</li> </ul>"},{"location":"architecture/architecture/#_39","title":"\u6d4b\u8bd5\u91cd\u70b9","text":"<ul> <li>\u6570\u636e\u91c7\u96c6\u7684\u7a33\u5b9a\u6027\u548c\u51c6\u786e\u6027\u6d4b\u8bd5</li> <li>\u6570\u636e\u6e05\u6d17\u903b\u8f91\u7684\u6b63\u786e\u6027\u9a8c\u8bc1</li> <li>\u5f02\u5e38\u60c5\u51b5\u5904\u7406\uff08\u7f51\u7edc\u4e2d\u65ad\u3001API\u9650\u6d41\u7b49\uff09</li> </ul>"},{"location":"architecture/architecture/#42","title":"4.2 \u9636\u6bb5\u4e8c\uff1a\u7279\u5f81\u5de5\u7a0b + \u6a21\u578b\u8bad\u7ec3","text":""},{"location":"architecture/architecture/#6-8","title":"\u65f6\u95f4\u89c4\u5212\uff1a6-8\u5468","text":""},{"location":"architecture/architecture/#_40","title":"\u4e3b\u8981\u4efb\u52a1","text":"<ol> <li>\u7279\u5f81\u5de5\u7a0b\u5f00\u53d1\uff083-4\u5468\uff09</li> <li>\u8bbe\u8ba1\u548c\u5b9e\u73b0\u57fa\u7840\u7edf\u8ba1\u7279\u5f81\uff08\u80dc\u8d1f\u8bb0\u5f55\u3001\u8fdb\u7403\u6570\u7b49\uff09</li> <li>\u5f00\u53d1\u9ad8\u7ea7\u7279\u5f81\uff08\u4e3b\u5ba2\u573a\u4f18\u52bf\u3001\u5bf9\u6218\u5386\u53f2\u3001\u7403\u961f\u5b9e\u529b\u7b49\uff09</li> <li>\u5b9e\u73b0\u65f6\u5e8f\u7279\u5f81\uff08\u6700\u8fd1\u72b6\u6001\u3001\u8d8b\u52bf\u5206\u6790\uff09</li> <li>\u5efa\u7acb\u7279\u5f81\u5b58\u50a8\u548c\u7ba1\u7406\u7cfb\u7edf</li> <li> <p>\u7279\u5f81\u6709\u6548\u6027\u5206\u6790\u548c\u7b5b\u9009</p> </li> <li> <p>\u6a21\u578b\u8bad\u7ec3\u7cfb\u7edf\uff082-3\u5468\uff09</p> </li> <li>\u5b9e\u73b0XGBoost\u548cLightGBM\u6a21\u578b\u8bad\u7ec3\u6d41\u6c34\u7ebf</li> <li>\u5f00\u53d1\u8d85\u53c2\u6570\u8c03\u4f18\u7cfb\u7edf</li> <li>\u5efa\u7acb\u4ea4\u53c9\u9a8c\u8bc1\u548c\u6a21\u578b\u8bc4\u4f30\u4f53\u7cfb</li> <li>\u5b9e\u73b0\u6a21\u578b\u7248\u672c\u7ba1\u7406\u548c\u5bf9\u6bd4\u7cfb\u7edf</li> <li> <p>\u5f00\u53d1\u6a21\u578b\u89e3\u91ca\u6027\u5206\u6790\u5de5\u5177</p> </li> <li> <p>\u6a21\u578b\u4f18\u5316\u548c\u96c6\u6210\uff081\u5468\uff09</p> </li> <li>\u6a21\u578b\u6027\u80fd\u4f18\u5316\u548c\u8c03\u53c2</li> <li>\u5b9e\u73b0\u591a\u6a21\u578b\u96c6\u6210\u7b56\u7565</li> <li>\u5efa\u7acb\u6a21\u578b\u6027\u80fd\u76d1\u63a7\u7cfb\u7edf</li> </ol>"},{"location":"architecture/architecture/#_41","title":"\u4ea4\u4ed8\u7269","text":"<ul> <li>\u5b8c\u6574\u7684\u7279\u5f81\u5de5\u7a0b\u7cfb\u7edf\uff0c\u5305\u542b100+\u4e2a\u9884\u6d4b\u7279\u5f81</li> <li>\u8bad\u7ec3\u597d\u7684\u9884\u6d4b\u6a21\u578b\uff0c\u9884\u6d4b\u51c6\u786e\u7387&gt;55%</li> <li>\u6a21\u578b\u8bc4\u4f30\u62a5\u544a\u548c\u6027\u80fd\u57fa\u51c6</li> <li>\u7279\u5f81\u91cd\u8981\u6027\u5206\u6790\u548c\u6a21\u578b\u89e3\u91ca\u6587\u6863</li> </ul>"},{"location":"architecture/architecture/#_42","title":"\u91cc\u7a0b\u7891\u68c0\u67e5","text":"<ul> <li>\u7279\u5f81\u5de5\u7a0b\u7cfb\u7edf\u80fd\u591f\u4e3a\u6240\u6709\u6bd4\u8d5b\u751f\u6210\u5b8c\u6574\u7279\u5f81\u5411\u91cf</li> <li>\u6a21\u578b\u5728\u6d4b\u8bd5\u96c6\u4e0a\u8fbe\u5230\u9884\u671f\u6027\u80fd\u6307\u6807</li> <li>\u80fd\u591f\u4e3a\u672a\u6765\u6bd4\u8d5b\u751f\u6210\u53ef\u4fe1\u7684\u9884\u6d4b\u7ed3\u679c</li> </ul>"},{"location":"architecture/architecture/#_43","title":"\u6d4b\u8bd5\u91cd\u70b9","text":"<ul> <li>\u7279\u5f81\u8ba1\u7b97\u7684\u6b63\u786e\u6027\u548c\u4e00\u81f4\u6027</li> <li>\u6a21\u578b\u9884\u6d4b\u7684\u51c6\u786e\u6027\u548c\u7a33\u5b9a\u6027</li> <li>\u4e0d\u540c\u8054\u8d5b\u548c\u65f6\u95f4\u6bb5\u7684\u6cdb\u5316\u80fd\u529b\u6d4b\u8bd5</li> </ul>"},{"location":"architecture/architecture/#43-api","title":"4.3 \u9636\u6bb5\u4e09\uff1a\u9884\u6d4b\u670d\u52a1API + \u524d\u7aef\u5c55\u793a","text":""},{"location":"architecture/architecture/#6-8_1","title":"\u65f6\u95f4\u89c4\u5212\uff1a6-8\u5468","text":""},{"location":"architecture/architecture/#_44","title":"\u4e3b\u8981\u4efb\u52a1","text":"<ol> <li>\u9884\u6d4b\u670d\u52a1\u5f00\u53d1\uff083-4\u5468\uff09</li> <li>\u4f7f\u7528FastAPI\u6784\u5efaRESTful API\u670d\u52a1</li> <li>\u5b9e\u73b0\u5b9e\u65f6\u9884\u6d4b\u548c\u6279\u91cf\u9884\u6d4b\u63a5\u53e3</li> <li>\u5f00\u53d1\u9884\u6d4b\u7ed3\u679c\u7f13\u5b58\u548c\u5b58\u50a8\u7cfb\u7edf</li> <li>\u5efa\u7acbAPI\u8ba4\u8bc1\u548c\u9650\u6d41\u673a\u5236</li> <li> <p>\u5b9e\u73b0\u9884\u6d4b\u7f6e\u4fe1\u5ea6\u8ba1\u7b97\u548c\u7ed3\u679c\u89e3\u91ca</p> </li> <li> <p>\u524d\u7aef\u5e94\u7528\u5f00\u53d1\uff082-3\u5468\uff09</p> </li> <li>\u4f7f\u7528Vue.js/React\u5f00\u53d1\u54cd\u5e94\u5f0fWeb\u754c\u9762</li> <li>\u5b9e\u73b0\u6bd4\u8d5b\u5217\u8868\u3001\u9884\u6d4b\u7ed3\u679c\u5c55\u793a\u7ec4\u4ef6</li> <li>\u5f00\u53d1\u6570\u636e\u53ef\u89c6\u5316\u56fe\u8868\uff08ECharts\uff09</li> <li>\u5efa\u7acb\u5b9e\u65f6\u6570\u636e\u66f4\u65b0\u673a\u5236\uff08WebSocket\uff09</li> <li> <p>\u5b9e\u73b0\u79fb\u52a8\u7aef\u9002\u914d</p> </li> <li> <p>\u7cfb\u7edf\u96c6\u6210\u548c\u6d4b\u8bd5\uff081\u5468\uff09</p> </li> <li>\u524d\u540e\u7aef\u96c6\u6210\u548c\u8054\u8c03</li> <li>\u6027\u80fd\u4f18\u5316\u548c\u7528\u6237\u4f53\u9a8c\u6539\u8fdb</li> <li>\u5168\u94fe\u8def\u529f\u80fd\u6d4b\u8bd5</li> </ol>"},{"location":"architecture/architecture/#_45","title":"\u4ea4\u4ed8\u7269","text":"<ul> <li>\u5b8c\u6574\u7684\u9884\u6d4bAPI\u670d\u52a1\uff0c\u652f\u6301\u591a\u79cd\u9884\u6d4b\u7c7b\u578b</li> <li>\u7528\u6237\u53cb\u597d\u7684Web\u524d\u7aef\u5e94\u7528</li> <li>API\u6587\u6863\u548c\u7528\u6237\u4f7f\u7528\u6307\u5357</li> <li>\u7cfb\u7edf\u6027\u80fd\u6d4b\u8bd5\u62a5\u544a</li> </ul>"},{"location":"architecture/architecture/#_46","title":"\u91cc\u7a0b\u7891\u68c0\u67e5","text":"<ul> <li>API\u670d\u52a1\u80fd\u591f\u7a33\u5b9a\u63d0\u4f9b\u9884\u6d4b\u7ed3\u679c\uff0c\u54cd\u5e94\u65f6\u95f4&lt;500ms</li> <li>\u524d\u7aef\u5e94\u7528\u529f\u80fd\u5b8c\u6574\uff0c\u7528\u6237\u4f53\u9a8c\u826f\u597d</li> <li>\u7cfb\u7edf\u80fd\u591f\u540c\u65f6\u652f\u6301100\u4e2a\u5e76\u53d1\u7528\u6237</li> </ul>"},{"location":"architecture/architecture/#_47","title":"\u6d4b\u8bd5\u91cd\u70b9","text":"<ul> <li>API\u63a5\u53e3\u7684\u529f\u80fd\u6027\u548c\u6027\u80fd\u6d4b\u8bd5</li> <li>\u524d\u7aef\u754c\u9762\u7684\u517c\u5bb9\u6027\u548c\u6613\u7528\u6027\u6d4b\u8bd5</li> <li>\u7cfb\u7edf\u8d1f\u8f7d\u548c\u538b\u529b\u6d4b\u8bd5</li> </ul>"},{"location":"architecture/architecture/#44-cicd","title":"4.4 \u9636\u6bb5\u56db\uff1a\u5bb9\u5668\u5316\u90e8\u7f72 + CI/CD\u6d41\u7a0b","text":""},{"location":"architecture/architecture/#4-6_1","title":"\u65f6\u95f4\u89c4\u5212\uff1a4-6\u5468","text":""},{"location":"architecture/architecture/#_48","title":"\u4e3b\u8981\u4efb\u52a1","text":"<ol> <li>\u5bb9\u5668\u5316\u6539\u9020\uff082-3\u5468\uff09</li> <li>\u7f16\u5199Dockerfile\u6784\u5efa\u5e94\u7528\u955c\u50cf</li> <li>\u914d\u7f6eDocker Compose\u672c\u5730\u90e8\u7f72</li> <li>\u5b9e\u73b0\u914d\u7f6e\u7ba1\u7406\u548c\u73af\u5883\u53d8\u91cf\u6ce8\u5165</li> <li> <p>\u5efa\u7acb\u955c\u50cf\u7248\u672c\u7ba1\u7406\u548c\u4ed3\u5e93</p> </li> <li> <p>\u4e91\u7aef\u90e8\u7f72\uff081-2\u5468\uff09</p> </li> <li>\u9009\u62e9\u548c\u914d\u7f6e\u4e91\u670d\u52a1\u63d0\u4f9b\u5546\uff08\u4f18\u5148\u9999\u6e2f\u8282\u70b9\uff09</li> <li>\u5b9e\u73b0Kubernetes\u96c6\u7fa4\u90e8\u7f72\uff08\u53ef\u9009\uff09</li> <li>\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u548c\u57df\u540d\u89e3\u6790</li> <li> <p>\u5efa\u7acb\u751f\u4ea7\u73af\u5883\u76d1\u63a7\u548c\u544a\u8b66</p> </li> <li> <p>CI/CD\u6d41\u7a0b\u5efa\u8bbe\uff081\u5468\uff09</p> </li> <li>\u914d\u7f6eGitHub Actions\u81ea\u52a8\u5316\u6d41\u6c34\u7ebf</li> <li>\u5b9e\u73b0\u81ea\u52a8\u5316\u6d4b\u8bd5\u548c\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5</li> <li>\u5efa\u7acb\u81ea\u52a8\u90e8\u7f72\u548c\u56de\u6eda\u673a\u5236</li> <li>\u5efa\u7acb\u53d1\u5e03\u6d41\u7a0b\u548c\u7248\u672c\u7ba1\u7406</li> </ol>"},{"location":"architecture/architecture/#_49","title":"\u4ea4\u4ed8\u7269","text":"<ul> <li>\u5b8c\u6574\u7684Docker\u5316\u5e94\u7528\uff0c\u652f\u6301\u4e00\u952e\u90e8\u7f72</li> <li>\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u65b9\u6848\u548c\u8fd0\u7ef4\u6587\u6863</li> <li>CI/CD\u81ea\u52a8\u5316\u6d41\u6c34\u7ebf</li> <li>\u76d1\u63a7\u548c\u544a\u8b66\u7cfb\u7edf</li> </ul>"},{"location":"architecture/architecture/#_50","title":"\u91cc\u7a0b\u7891\u68c0\u67e5","text":"<ul> <li>\u5e94\u7528\u80fd\u591f\u5728\u4e91\u7aef\u7a33\u5b9a\u8fd0\u884c\uff0c\u53ef\u7528\u6027&gt;99%</li> <li>CI/CD\u6d41\u6c34\u7ebf\u8fd0\u884c\u6b63\u5e38\uff0c\u90e8\u7f72\u65f6\u95f4&lt;10\u5206\u949f</li> <li>\u76d1\u63a7\u7cfb\u7edf\u80fd\u591f\u53ca\u65f6\u53d1\u73b0\u548c\u62a5\u544a\u95ee\u9898</li> </ul>"},{"location":"architecture/architecture/#_51","title":"\u6d4b\u8bd5\u91cd\u70b9","text":"<ul> <li>\u5bb9\u5668\u5316\u5e94\u7528\u7684\u7a33\u5b9a\u6027\u548c\u6027\u80fd\u6d4b\u8bd5</li> <li>\u90e8\u7f72\u6d41\u7a0b\u7684\u53ef\u9760\u6027\u9a8c\u8bc1</li> <li>\u751f\u4ea7\u73af\u5883\u7684\u538b\u529b\u548c\u707e\u5907\u6d4b\u8bd5</li> </ul>"},{"location":"architecture/architecture/#45","title":"4.5 \u6574\u4f53\u9879\u76ee\u65f6\u95f4\u7ebf","text":"<pre><code>gantt\n    title \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u5f00\u53d1\u65f6\u95f4\u7ebf\n    dateFormat  YYYY-MM-DD\n    section \u9636\u6bb5\u4e00\n    \u73af\u5883\u642d\u5efa           :done, env, 2024-01-01, 1w\n    \u6570\u636e\u91c7\u96c6\u5f00\u53d1       :done, collect, after env, 3w\n    \u6570\u636e\u6e05\u6d17\u7cfb\u7edf       :done, clean, after collect, 2w\n    section \u9636\u6bb5\u4e8c\n    \u7279\u5f81\u5de5\u7a0b\u5f00\u53d1       :active, feature, after clean, 4w\n    \u6a21\u578b\u8bad\u7ec3\u7cfb\u7edf       :model, after feature, 3w\n    \u6a21\u578b\u4f18\u5316\u96c6\u6210       :optimize, after model, 1w\n    section \u9636\u6bb5\u4e09\n    \u9884\u6d4b\u670d\u52a1\u5f00\u53d1       :api, after optimize, 4w\n    \u524d\u7aef\u5e94\u7528\u5f00\u53d1       :frontend, after api, 3w\n    \u7cfb\u7edf\u96c6\u6210\u6d4b\u8bd5       :integration, after frontend, 1w\n    section \u9636\u6bb5\u56db\n    \u5bb9\u5668\u5316\u6539\u9020         :docker, after integration, 3w\n    \u4e91\u7aef\u90e8\u7f72           :deploy, after docker, 2w\n    CI/CD\u6d41\u7a0b         :cicd, after deploy, 1w\n</code></pre>"},{"location":"architecture/architecture/#46","title":"4.6 \u98ce\u9669\u63a7\u5236\u548c\u5e94\u5bf9\u7b56\u7565","text":""},{"location":"architecture/architecture/#_52","title":"\u4e3b\u8981\u98ce\u9669\u70b9","text":"<ol> <li>\u6570\u636e\u91c7\u96c6\u98ce\u9669</li> <li>\u98ce\u9669\uff1aAPI\u9650\u6d41\u3001\u53cd\u722c\u866b\u3001\u6570\u636e\u6e90\u53d8\u66f4</li> <li> <p>\u5e94\u5bf9\uff1a\u591a\u6570\u636e\u6e90\u5907\u4efd\u3001\u4ee3\u7406IP\u6c60\u3001\u6e10\u8fdb\u5f0f\u91c7\u96c6\u7b56\u7565</p> </li> <li> <p>\u6a21\u578b\u6027\u80fd\u98ce\u9669</p> </li> <li>\u98ce\u9669\uff1a\u9884\u6d4b\u51c6\u786e\u7387\u4e0d\u8fbe\u6807\u3001\u8fc7\u62df\u5408\u95ee\u9898</li> <li> <p>\u5e94\u5bf9\uff1a\u591a\u6a21\u578b\u5bf9\u6bd4\u3001\u4ea4\u53c9\u9a8c\u8bc1\u3001\u5b9a\u671f\u91cd\u8bad\u7ec3</p> </li> <li> <p>\u6280\u672f\u5b9e\u73b0\u98ce\u9669</p> </li> <li>\u98ce\u9669\uff1a\u6280\u672f\u9009\u578b\u4e0d\u5f53\u3001\u6027\u80fd\u74f6\u9888\u3001\u6269\u5c55\u6027\u95ee\u9898</li> <li> <p>\u5e94\u5bf9\uff1a\u539f\u578b\u9a8c\u8bc1\u3001\u538b\u529b\u6d4b\u8bd5\u3001\u67b6\u6784\u8bc4\u5ba1</p> </li> <li> <p>\u90e8\u7f72\u8fd0\u7ef4\u98ce\u9669</p> </li> <li>\u98ce\u9669\uff1a\u670d\u52a1\u4e0d\u7a33\u5b9a\u3001\u5b89\u5168\u6f0f\u6d1e\u3001\u8fd0\u7ef4\u6210\u672c</li> <li>\u5e94\u5bf9\uff1a\u7070\u5ea6\u90e8\u7f72\u3001\u5b89\u5168\u5ba1\u8ba1\u3001\u6210\u672c\u76d1\u63a7</li> </ol>"},{"location":"architecture/architecture/#_53","title":"\u8d28\u91cf\u4fdd\u8bc1\u63aa\u65bd","text":"<ul> <li>\u6bcf\u4e2a\u9636\u6bb5\u8bbe\u7f6e\u8d28\u91cf\u5173\u53e3\uff0c\u4e0d\u8fbe\u6807\u4e0d\u8fdb\u5165\u4e0b\u4e00\u9636\u6bb5</li> <li>\u5efa\u7acb\u4ee3\u7801\u8bc4\u5ba1\u548c\u81ea\u52a8\u5316\u6d4b\u8bd5\u673a\u5236</li> <li>\u5b9a\u671f\u8fdb\u884c\u67b6\u6784\u8bc4\u5ba1\u548c\u6027\u80fd\u5206\u6790</li> <li>\u5efa\u7acb\u5b8c\u5584\u7684\u6587\u6863\u548c\u77e5\u8bc6\u7ba1\u7406\u4f53\u7cfb</li> </ul>"},{"location":"architecture/architecture/#5","title":"5. \u90e8\u7f72\u4e0e\u8fd0\u7ef4\u67b6\u6784","text":""},{"location":"architecture/architecture/#51","title":"5.1 \u6574\u4f53\u90e8\u7f72\u67b6\u6784\u56fe","text":"<pre><code>graph TB\n    subgraph \"\u7528\u6237\u5c42\"\n        U1[Web\u7528\u6237]\n        U2[\u79fb\u52a8\u7528\u6237]\n        U3[API\u7528\u6237]\n    end\n\n    subgraph \"CDN &amp; \u8d1f\u8f7d\u5747\u8861\u5c42\"\n        CDN[CloudFlare CDN]\n        ALB[Application Load Balancer]\n    end\n\n    subgraph \"\u5bb9\u5668\u7f16\u6392\u5c42\"\n        K8S[Kubernetes\u96c6\u7fa4]\n        subgraph \"\u5e94\u7528\u670d\u52a1Pod\"\n            API1[FastAPI\u5b9e\u4f8b1]\n            API2[FastAPI\u5b9e\u4f8b2]\n            API3[FastAPI\u5b9e\u4f8b3]\n        end\n        subgraph \"\u524d\u7aef\u670d\u52a1Pod\"\n            WEB1[Nginx + Vue.js]\n            WEB2[Nginx + Vue.js]\n        end\n        subgraph \"\u6570\u636e\u670d\u52a1Pod\"\n            WORKER1[\u6570\u636e\u91c7\u96c6Worker]\n            WORKER2[\u6a21\u578b\u8bad\u7ec3Worker]\n            SCHEDULER[\u4efb\u52a1\u8c03\u5ea6\u5668]\n        end\n    end\n\n    subgraph \"\u6570\u636e\u5c42\"\n        subgraph \"\u6570\u636e\u5e93\u96c6\u7fa4\"\n            DB_MASTER[(MySQL\u4e3b\u5e93)]\n            DB_SLAVE1[(MySQL\u4ece\u5e931)]\n            DB_SLAVE2[(MySQL\u4ece\u5e932)]\n        end\n        subgraph \"\u7f13\u5b58\u5c42\"\n            REDIS_M[(Redis\u4e3b)]\n            REDIS_S[(Redis\u4ece)]\n        end\n        subgraph \"\u5b58\u50a8\u5c42\"\n            S3[\u5bf9\u8c61\u5b58\u50a8&lt;br/&gt;\u6a21\u578b\u6587\u4ef6&amp;\u65e5\u5fd7]\n        end\n    end\n\n    subgraph \"\u76d1\u63a7\u5c42\"\n        PROMETHEUS[Prometheus]\n        GRAFANA[Grafana]\n        ALERTMANAGER[AlertManager]\n        ELK[ELK Stack]\n    end\n\n    U1 &amp; U2 &amp; U3 --&gt; CDN\n    CDN --&gt; ALB\n    ALB --&gt; K8S\n    K8S --&gt; API1 &amp; API2 &amp; API3\n    K8S --&gt; WEB1 &amp; WEB2\n    K8S --&gt; WORKER1 &amp; WORKER2 &amp; SCHEDULER\n\n    API1 &amp; API2 &amp; API3 --&gt; DB_SLAVE1 &amp; DB_SLAVE2\n    API1 &amp; API2 &amp; API3 --&gt; REDIS_M\n    WORKER1 &amp; WORKER2 --&gt; DB_MASTER\n    SCHEDULER --&gt; REDIS_M\n\n    DB_MASTER --&gt; DB_SLAVE1 &amp; DB_SLAVE2\n    REDIS_M --&gt; REDIS_S\n\n    K8S --&gt; S3\n    K8S --&gt; PROMETHEUS\n    PROMETHEUS --&gt; GRAFANA\n    PROMETHEUS --&gt; ALERTMANAGER\n    K8S --&gt; ELK\n</code></pre>"},{"location":"architecture/architecture/#52-docker","title":"5.2 Docker\u955c\u50cf\u8bbe\u8ba1","text":""},{"location":"architecture/architecture/#521-api","title":"5.2.1 API\u670d\u52a1\u5bb9\u5668","text":"<pre><code># Dockerfile.api\nFROM python:3.11-slim\n\n# \u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\nWORKDIR /app\n\n# \u5b89\u88c5\u7cfb\u7edf\u4f9d\u8d56\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    gcc \\\n    g++ \\\n    curl \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# \u590d\u5236\u4f9d\u8d56\u6587\u4ef6\nCOPY requirements.txt .\n\n# \u5b89\u88c5Python\u4f9d\u8d56\nRUN pip install --no-cache-dir -r requirements.txt\n\n# \u590d\u5236\u5e94\u7528\u4ee3\u7801\nCOPY src/ ./src/\nCOPY config/ ./config/\n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nENV PYTHONPATH=/app\nENV API_HOST=0.0.0.0\nENV API_PORT=8000\n\n# \u5065\u5eb7\u68c0\u67e5\nHEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \\\n    CMD curl -f http://localhost:8000/health || exit 1\n\n# \u66b4\u9732\u7aef\u53e3\nEXPOSE 8000\n\n# \u542f\u52a8\u547d\u4ee4\nCMD [\"uvicorn\", \"src.api.main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n</code></pre>"},{"location":"architecture/architecture/#522","title":"5.2.2 \u6570\u636e\u91c7\u96c6\u5bb9\u5668","text":"<pre><code># Dockerfile.worker\nFROM python:3.11-slim\n\nWORKDIR /app\n\n# \u5b89\u88c5Chrome\u548cChrome Driver\uff08\u7528\u4e8eSelenium\uff09\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    wget \\\n    gnupg \\\n    unzip \\\n    curl \\\n    &amp;&amp; wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | apt-key add - \\\n    &amp;&amp; echo \"deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main\" &gt;&gt; /etc/apt/sources.list.d/google-chrome.list \\\n    &amp;&amp; apt-get update \\\n    &amp;&amp; apt-get install -y google-chrome-stable \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# \u5b89\u88c5ChromeDriver\nRUN CHROME_DRIVER_VERSION=`curl -sS chromedriver.storage.googleapis.com/LATEST_RELEASE` \\\n    &amp;&amp; wget -O /tmp/chromedriver.zip http://chromedriver.storage.googleapis.com/$CHROME_DRIVER_VERSION/chromedriver_linux64.zip \\\n    &amp;&amp; unzip /tmp/chromedriver.zip chromedriver -d /usr/local/bin/ \\\n    &amp;&amp; rm /tmp/chromedriver.zip\n\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY src/ ./src/\nCOPY config/ ./config/\n\nENV PYTHONPATH=/app\n\nCMD [\"python\", \"src/workers/data_collector.py\"]\n</code></pre>"},{"location":"architecture/architecture/#523","title":"5.2.3 \u524d\u7aef\u5e94\u7528\u5bb9\u5668","text":"<pre><code># Dockerfile.frontend\n# \u6784\u5efa\u9636\u6bb5\nFROM node:18-alpine AS builder\n\nWORKDIR /app\n\nCOPY frontend/package*.json ./\nRUN npm ci --only=production\n\nCOPY frontend/ .\nRUN npm run build\n\n# \u751f\u4ea7\u9636\u6bb5\nFROM nginx:alpine\n\n# \u590d\u5236\u6784\u5efa\u6587\u4ef6\nCOPY --from=builder /app/dist /usr/share/nginx/html\n\n# \u590d\u5236Nginx\u914d\u7f6e\nCOPY nginx.conf /etc/nginx/nginx.conf\n\n# \u5065\u5eb7\u68c0\u67e5\nHEALTHCHECK --interval=30s --timeout=3s \\\n    CMD curl -f http://localhost:80/ || exit 1\n\nEXPOSE 80\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n</code></pre>"},{"location":"architecture/architecture/#53-kubernetes","title":"5.3 Kubernetes\u90e8\u7f72\u914d\u7f6e","text":""},{"location":"architecture/architecture/#531-api","title":"5.3.1 API\u670d\u52a1\u90e8\u7f72","text":"<pre><code># k8s/api-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: football-prediction-api\n  labels:\n    app: football-prediction-api\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: football-prediction-api\n  template:\n    metadata:\n      labels:\n        app: football-prediction-api\n    spec:\n      containers:\n      - name: api\n        image: football-prediction/api:latest\n        ports:\n        - containerPort: 8000\n        env:\n        - name: DATABASE_URL\n          valueFrom:\n            secretKeyRef:\n              name: db-secret\n              key: url\n        - name: REDIS_URL\n          valueFrom:\n            configMapKeyRef:\n              name: app-config\n              key: redis-url\n        resources:\n          requests:\n            memory: \"512Mi\"\n            cpu: \"250m\"\n          limits:\n            memory: \"1Gi\"\n            cpu: \"500m\"\n        livenessProbe:\n          httpGet:\n            path: /health\n            port: 8000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 8000\n          initialDelaySeconds: 5\n          periodSeconds: 5\n\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: football-prediction-api-service\nspec:\n  selector:\n    app: football-prediction-api\n  ports:\n    - protocol: TCP\n      port: 80\n      targetPort: 8000\n  type: ClusterIP\n</code></pre>"},{"location":"architecture/architecture/#532","title":"5.3.2 \u6570\u636e\u5e93\u914d\u7f6e","text":"<pre><code># k8s/database-config.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: mysql-config\ndata:\n  my.cnf: |\n    [mysqld]\n    innodb_buffer_pool_size = 2G\n    innodb_log_file_size = 256M\n    max_connections = 500\n    query_cache_size = 128M\n    slow_query_log = 1\n    long_query_time = 2\n\n---\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: mysql-master\nspec:\n  serviceName: mysql-master\n  replicas: 1\n  selector:\n    matchLabels:\n      app: mysql-master\n  template:\n    metadata:\n      labels:\n        app: mysql-master\n    spec:\n      containers:\n      - name: mysql\n        image: mysql:8.0\n        env:\n        - name: MYSQL_ROOT_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: mysql-secret\n              key: root-password\n        - name: MYSQL_DATABASE\n          value: football_prediction\n        ports:\n        - containerPort: 3306\n        volumeMounts:\n        - name: mysql-data\n          mountPath: /var/lib/mysql\n        - name: mysql-config\n          mountPath: /etc/mysql/conf.d\n        resources:\n          requests:\n            memory: \"2Gi\"\n            cpu: \"1000m\"\n          limits:\n            memory: \"4Gi\"\n            cpu: \"2000m\"\n      volumes:\n      - name: mysql-config\n        configMap:\n          name: mysql-config\n  volumeClaimTemplates:\n  - metadata:\n      name: mysql-data\n    spec:\n      accessModes: [\"ReadWriteOnce\"]\n      resources:\n        requests:\n          storage: 100Gi\n</code></pre>"},{"location":"architecture/architecture/#533","title":"5.3.3 \u8d1f\u8f7d\u5747\u8861\u914d\u7f6e","text":"<pre><code># k8s/ingress.yaml\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: football-prediction-ingress\n  annotations:\n    kubernetes.io/ingress.class: nginx\n    cert-manager.io/cluster-issuer: letsencrypt-prod\n    nginx.ingress.kubernetes.io/rate-limit: \"100\"\n    nginx.ingress.kubernetes.io/rate-limit-window: \"1m\"\nspec:\n  tls:\n  - hosts:\n    - api.football-prediction.com\n    - football-prediction.com\n    secretName: football-prediction-tls\n  rules:\n  - host: football-prediction.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: football-prediction-frontend-service\n            port:\n              number: 80\n  - host: api.football-prediction.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: football-prediction-api-service\n            port:\n              number: 80\n</code></pre>"},{"location":"architecture/architecture/#54","title":"5.4 \u4e91\u7aef\u4e0e\u672c\u5730\u90e8\u7f72\u65b9\u6848\u5bf9\u6bd4","text":""},{"location":"architecture/architecture/#541","title":"5.4.1 \u672c\u5730\u90e8\u7f72\u65b9\u6848","text":"<p>\u4f18\u52bf\uff1a</p> <ul> <li>\u5b8c\u5168\u53ef\u63a7\u7684\u73af\u5883\u548c\u6570\u636e</li> <li>\u65e0\u9700\u62c5\u5fc3\u4e91\u670d\u52a1\u5546\u9650\u5236\u548c\u8d39\u7528</li> <li>\u9002\u5408\u5f00\u53d1\u6d4b\u8bd5\u548c\u5c0f\u89c4\u6a21\u4f7f\u7528</li> </ul> <p>\u52a3\u52bf\uff1a</p> <ul> <li>\u9700\u8981\u81ea\u5df1\u7ef4\u62a4\u786c\u4ef6\u548c\u7f51\u7edc</li> <li>\u6269\u5c55\u6027\u6709\u9650</li> <li>\u9700\u8981\u66f4\u591a\u8fd0\u7ef4\u5de5\u4f5c</li> </ul> <p>\u9002\u7528\u573a\u666f\uff1a</p> <ul> <li>\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883</li> <li>\u9884\u7b97\u6709\u9650\u7684\u4e2a\u4eba\u9879\u76ee</li> <li>\u5bf9\u6570\u636e\u5b89\u5168\u8981\u6c42\u6781\u9ad8\u7684\u573a\u666f</li> </ul> <p>\u90e8\u7f72\u914d\u7f6e\uff1a</p> <pre><code># docker-compose.yml\nversion: '3.8'\n\nservices:\n  api:\n    build:\n      context: .\n      dockerfile: Dockerfile.api\n    ports:\n      - \"8000:8000\"\n    environment:\n      - DATABASE_URL=mysql://user:pass@mysql:3306/football\n      - REDIS_URL=redis://redis:6379\n    depends_on:\n      - mysql\n      - redis\n    restart: unless-stopped\n\n  frontend:\n    build:\n      context: .\n      dockerfile: Dockerfile.frontend\n    ports:\n      - \"80:80\"\n    depends_on:\n      - api\n    restart: unless-stopped\n\n  mysql:\n    image: mysql:8.0\n    environment:\n      - MYSQL_ROOT_PASSWORD=rootpassword\n      - MYSQL_DATABASE=football\n    volumes:\n      - mysql_data:/var/lib/mysql\n    restart: unless-stopped\n\n  redis:\n    image: redis:7-alpine\n    volumes:\n      - redis_data:/data\n    restart: unless-stopped\n\n  data_collector:\n    build:\n      context: .\n      dockerfile: Dockerfile.worker\n    environment:\n      - DATABASE_URL=mysql://user:pass@mysql:3306/football\n    depends_on:\n      - mysql\n      - redis\n    restart: unless-stopped\n\nvolumes:\n  mysql_data:\n  redis_data:\n</code></pre>"},{"location":"architecture/architecture/#542","title":"5.4.2 \u4e91\u7aef\u90e8\u7f72\u65b9\u6848","text":"<p>\u4f18\u52bf\uff1a</p> <ul> <li>\u9ad8\u53ef\u7528\u6027\u548c\u81ea\u52a8\u6269\u5c55</li> <li>\u4e13\u4e1a\u7684\u8fd0\u7ef4\u548c\u5b89\u5168\u4fdd\u969c</li> <li>\u5168\u7403CDN\u52a0\u901f</li> <li>\u4e30\u5bcc\u7684\u4e91\u670d\u52a1\u751f\u6001</li> </ul> <p>\u52a3\u52bf\uff1a</p> <ul> <li>\u6301\u7eed\u7684\u8fd0\u8425\u6210\u672c</li> <li>\u53ef\u80fd\u7684\u5382\u5546\u9501\u5b9a</li> <li>\u6570\u636e\u4f20\u8f93\u548c\u5b58\u50a8\u9650\u5236</li> </ul> <p>\u9002\u7528\u573a\u666f\uff1a</p> <ul> <li>\u751f\u4ea7\u73af\u5883\u90e8\u7f72</li> <li>\u9700\u8981\u9ad8\u53ef\u7528\u6027\u7684\u5e94\u7528</li> <li>\u5168\u7403\u7528\u6237\u8bbf\u95ee\u7684\u670d\u52a1</li> </ul> <p>\u63a8\u8350\u4e91\u670d\u52a1\u5546\u9009\u62e9\uff08\u4f18\u5148\u9999\u6e2f\u8282\u70b9\uff09\uff1a</p> <ol> <li>\u963f\u91cc\u4e91\uff08\u9999\u6e2f\uff09</li> <li>\u4f18\u52bf\uff1a\u5bf9\u5927\u9646\u8bbf\u95ee\u53cb\u597d\uff0c\u670d\u52a1\u7a33\u5b9a</li> <li>\u9002\u5408\uff1a\u56fd\u5185\u5916\u53cc\u91cd\u8986\u76d6</li> <li> <p>\u6210\u672c\uff1a\u4e2d\u7b49</p> </li> <li> <p>\u817e\u8baf\u4e91\uff08\u9999\u6e2f\uff09</p> </li> <li>\u4f18\u52bf\uff1a\u7f51\u7edc\u5ef6\u8fdf\u4f4e\uff0c\u4ef7\u683c\u5408\u7406</li> <li>\u9002\u5408\uff1a\u56fd\u5185\u7528\u6237\u4e3a\u4e3b\u7684\u5e94\u7528</li> <li> <p>\u6210\u672c\uff1a\u8f83\u4f4e</p> </li> <li> <p>AWS\uff08\u4e9a\u592a-\u9999\u6e2f\uff09</p> </li> <li>\u4f18\u52bf\uff1a\u5168\u7403\u5316\u670d\u52a1\uff0c\u751f\u6001\u4e30\u5bcc</li> <li>\u9002\u5408\uff1a\u9700\u8981\u5168\u7403\u90e8\u7f72\u7684\u5e94\u7528</li> <li> <p>\u6210\u672c\uff1a\u8f83\u9ad8</p> </li> <li> <p>Google Cloud\uff08\u9999\u6e2f\uff09</p> </li> <li>\u4f18\u52bf\uff1aAI/ML\u670d\u52a1\u5f3a\u5927</li> <li>\u9002\u5408\uff1a\u673a\u5668\u5b66\u4e60\u91cd\u5ea6\u5e94\u7528</li> <li>\u6210\u672c\uff1a\u4e2d\u7b49</li> </ol>"},{"location":"architecture/architecture/#55-kubernetes","title":"5.5 Kubernetes\u6269\u5c55\u914d\u7f6e","text":""},{"location":"architecture/architecture/#551","title":"5.5.1 \u81ea\u52a8\u4f38\u7f29\u914d\u7f6e","text":"<pre><code># k8s/hpa.yaml\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: football-prediction-api-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: football-prediction-api\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n  - type: Resource\n    resource:\n      name: memory\n      target:\n        type: Utilization\n        averageUtilization: 80\n  behavior:\n    scaleUp:\n      stabilizationWindowSeconds: 60\n      policies:\n      - type: Pods\n        value: 2\n        periodSeconds: 60\n    scaleDown:\n      stabilizationWindowSeconds: 300\n      policies:\n      - type: Pods\n        value: 1\n        periodSeconds: 60\n</code></pre>"},{"location":"architecture/architecture/#552","title":"5.5.2 \u8d44\u6e90\u914d\u989d\u7ba1\u7406","text":"<pre><code># k8s/resource-quota.yaml\napiVersion: v1\nkind: ResourceQuota\nmetadata:\n  name: football-prediction-quota\nspec:\n  hard:\n    requests.cpu: \"4\"\n    requests.memory: 8Gi\n    limits.cpu: \"8\"\n    limits.memory: 16Gi\n    count/pods: 20\n    count/services: 10\n    count/secrets: 5\n    count/configmaps: 10\n\n---\napiVersion: v1\nkind: LimitRange\nmetadata:\n  name: football-prediction-limits\nspec:\n  limits:\n  - default:\n      cpu: 500m\n      memory: 1Gi\n    defaultRequest:\n      cpu: 100m\n      memory: 256Mi\n    type: Container\n</code></pre>"},{"location":"architecture/architecture/#56","title":"5.6 \u76d1\u63a7\u548c\u544a\u8b66\u7cfb\u7edf","text":""},{"location":"architecture/architecture/#561-prometheus","title":"5.6.1 Prometheus\u76d1\u63a7\u914d\u7f6e","text":"<pre><code># monitoring/prometheus-config.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: prometheus-config\ndata:\n  prometheus.yml: |\n    global:\n      scrape_interval: 15s\n      evaluation_interval: 15s\n\n    rule_files:\n      - \"/etc/prometheus/rules/*.yml\"\n\n    alerting:\n      alertmanagers:\n      - static_configs:\n        - targets:\n          - alertmanager:9093\n\n    scrape_configs:\n    - job_name: 'kubernetes-pods'\n      kubernetes_sd_configs:\n      - role: pod\n      relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]\n        action: replace\n        target_label: __metrics_path__\n        regex: (.+)\n\n    - job_name: 'football-prediction-api'\n      static_configs:\n      - targets: ['football-prediction-api-service:80']\n      metrics_path: /metrics\n      scrape_interval: 10s\n</code></pre>"},{"location":"architecture/architecture/#562","title":"5.6.2 \u544a\u8b66\u89c4\u5219\u914d\u7f6e","text":"<pre><code># monitoring/alert-rules.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: prometheus-rules\ndata:\n  football-prediction.yml: |\n    groups:\n    - name: football-prediction\n      rules:\n      - alert: HighErrorRate\n        expr: rate(http_requests_total{status=~\"5..\"}[5m]) &gt; 0.1\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High error rate detected\"\n          description: \"Error rate is {{ $value }} for {{ $labels.instance }}\"\n\n      - alert: HighResponseTime\n        expr: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) &gt; 1\n        for: 2m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High response time detected\"\n          description: \"95th percentile response time is {{ $value }}s\"\n\n      - alert: DatabaseConnectionFailure\n        expr: mysql_up == 0\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"Database connection failure\"\n          description: \"MySQL database is down\"\n\n      - alert: PredictionServiceDown\n        expr: up{job=\"football-prediction-api\"} == 0\n        for: 2m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"Prediction service is down\"\n          description: \"Football prediction API is not responding\"\n</code></pre>"},{"location":"architecture/architecture/#563-grafana","title":"5.6.3 Grafana\u4eea\u8868\u677f\u914d\u7f6e","text":"<pre><code>{\n  \"dashboard\": {\n    \"title\": \"\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u76d1\u63a7\",\n    \"panels\": [\n      {\n        \"title\": \"API\u8bf7\u6c42QPS\",\n        \"type\": \"graph\",\n        \"targets\": [\n          {\n            \"expr\": \"rate(http_requests_total[5m])\",\n            \"legendFormat\": \"{{method}} {{status}}\"\n          }\n        ]\n      },\n      {\n        \"title\": \"\u54cd\u5e94\u65f6\u95f4\u5206\u5e03\",\n        \"type\": \"graph\",\n        \"targets\": [\n          {\n            \"expr\": \"histogram_quantile(0.50, rate(http_request_duration_seconds_bucket[5m]))\",\n            \"legendFormat\": \"50th percentile\"\n          },\n          {\n            \"expr\": \"histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))\",\n            \"legendFormat\": \"95th percentile\"\n          }\n        ]\n      },\n      {\n        \"title\": \"\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u72b6\u6001\",\n        \"type\": \"stat\",\n        \"targets\": [\n          {\n            \"expr\": \"mysql_global_status_threads_connected\",\n            \"legendFormat\": \"Active Connections\"\n          }\n        ]\n      },\n      {\n        \"title\": \"\u9884\u6d4b\u51c6\u786e\u7387\u8d8b\u52bf\",\n        \"type\": \"graph\",\n        \"targets\": [\n          {\n            \"expr\": \"prediction_accuracy_rate\",\n            \"legendFormat\": \"Accuracy Rate\"\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"architecture/architecture/#57","title":"5.7 \u5b89\u5168\u914d\u7f6e","text":""},{"location":"architecture/architecture/#571","title":"5.7.1 \u7f51\u7edc\u5b89\u5168\u7b56\u7565","text":"<pre><code># k8s/network-policy.yaml\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: football-prediction-network-policy\nspec:\n  podSelector:\n    matchLabels:\n      app: football-prediction-api\n  policyTypes:\n  - Ingress\n  - Egress\n  ingress:\n  - from:\n    - podSelector:\n        matchLabels:\n          app: nginx-ingress\n    ports:\n    - protocol: TCP\n      port: 8000\n  egress:\n  - to:\n    - podSelector:\n        matchLabels:\n          app: mysql-master\n    ports:\n    - protocol: TCP\n      port: 3306\n  - to:\n    - podSelector:\n        matchLabels:\n          app: redis\n    ports:\n    - protocol: TCP\n      port: 6379\n</code></pre>"},{"location":"architecture/architecture/#572","title":"5.7.2 \u5bc6\u94a5\u7ba1\u7406","text":"<pre><code># k8s/secrets.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: db-secret\ntype: Opaque\nstringData:\n  url: mysql://username:password@mysql-master:3306/football_prediction\n  username: app_user\n  password: secure_password_here\n\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: api-secret\ntype: Opaque\nstringData:\n  jwt-secret: your_jwt_secret_key_here\n  api-key: your_api_key_here\n</code></pre>"},{"location":"architecture/architecture/#6","title":"6. \u672a\u6765\u6269\u5c55\u5efa\u8bae","text":""},{"location":"architecture/architecture/#61","title":"6.1 \u6a21\u578b\u81ea\u52a8\u66f4\u65b0\u673a\u5236","text":""},{"location":"architecture/architecture/#611","title":"6.1.1 \u81ea\u52a8\u91cd\u8bad\u7ec3\u6d41\u6c34\u7ebf","text":"<p>\u8bbe\u8ba1\u76ee\u6807\uff1a</p> <ul> <li>\u5b9e\u73b0\u6a21\u578b\u6027\u80fd\u7684\u6301\u7eed\u76d1\u63a7\u548c\u81ea\u52a8\u4f18\u5316</li> <li>\u57fa\u4e8e\u65b0\u6570\u636e\u548c\u53cd\u9988\u5efa\u7acb\u81ea\u9002\u5e94\u5b66\u4e60\u7cfb\u7edf</li> <li>\u786e\u4fdd\u9884\u6d4b\u8d28\u91cf\u968f\u65f6\u95f4\u63a8\u79fb\u4e0d\u65ad\u63d0\u5347</li> </ul> <p>\u6838\u5fc3\u7ec4\u4ef6\u67b6\u6784\uff1a</p> <pre><code>graph TD\n    A[\u6570\u636e\u53d8\u5316\u76d1\u6d4b] --&gt; B{\u662f\u5426\u9700\u8981\u91cd\u8bad\u7ec3}\n    B --&gt;|\u662f| C[\u81ea\u52a8\u6570\u636e\u51c6\u5907]\n    B --&gt;|\u5426| D[\u7ee7\u7eed\u76d1\u63a7]\n    C --&gt; E[\u7279\u5f81\u5de5\u7a0b\u66f4\u65b0]\n    E --&gt; F[\u6a21\u578b\u8bad\u7ec3]\n    F --&gt; G[\u6a21\u578b\u9a8c\u8bc1]\n    G --&gt; H{\u6027\u80fd\u662f\u5426\u63d0\u5347}\n    H --&gt;|\u662f| I[\u6a21\u578b\u90e8\u7f72]\n    H --&gt;|\u5426| J[\u56de\u6eda\u5230\u4e0a\u4e00\u7248\u672c]\n    I --&gt; K[A/B\u6d4b\u8bd5]\n    K --&gt; L[\u6027\u80fd\u76d1\u63a7]\n    L --&gt; A\n    J --&gt; A\n</code></pre> <p>\u5b9e\u73b0\u65b9\u6848\uff1a</p> <ol> <li>\u6570\u636e\u8d28\u91cf\u76d1\u63a7</li> </ol> <pre><code># src/ml/monitoring/data_monitor.py\nclass DataQualityMonitor:\n    def __init__(self):\n        self.thresholds = {\n            'completeness': 0.95,\n            'accuracy': 0.98,\n            'consistency': 0.99,\n            'freshness': 24 * 3600  # 24\u5c0f\u65f6\n        }\n\n    def check_retrain_conditions(self):\n        \"\"\"\u68c0\u67e5\u662f\u5426\u9700\u8981\u91cd\u65b0\u8bad\u7ec3\"\"\"\n        conditions = {\n            'data_volume': self._check_new_data_volume(),\n            'performance_degradation': self._check_model_performance(),\n            'concept_drift': self._detect_concept_drift(),\n            'scheduled': self._check_schedule()\n        }\n        return any(conditions.values()), conditions\n\n    def _detect_concept_drift(self):\n        \"\"\"\u68c0\u6d4b\u6982\u5ff5\u6f02\u79fb\"\"\"\n        recent_accuracy = self._calculate_recent_accuracy(days=7)\n        historical_accuracy = self._calculate_historical_accuracy(days=30)\n        return (historical_accuracy - recent_accuracy) &gt; 0.05\n</code></pre> <ol> <li>\u81ea\u52a8\u8bad\u7ec3\u8c03\u5ea6\u5668</li> </ol> <pre><code># src/ml/training/auto_trainer.py\nclass AutoTrainer:\n    def __init__(self):\n        self.model_registry = ModelRegistry()\n        self.training_pipeline = TrainingPipeline()\n\n    async def execute_retrain_pipeline(self):\n        \"\"\"\u6267\u884c\u81ea\u52a8\u91cd\u8bad\u7ec3\u6d41\u6c34\u7ebf\"\"\"\n        try:\n            # 1. \u6570\u636e\u51c6\u5907\n            training_data = await self._prepare_training_data()\n\n            # 2. \u7279\u5f81\u5de5\u7a0b\n            features = await self._update_features(training_data)\n\n            # 3. \u6a21\u578b\u8bad\u7ec3\n            new_model = await self._train_model(features)\n\n            # 4. \u6a21\u578b\u9a8c\u8bc1\n            validation_results = await self._validate_model(new_model)\n\n            # 5. \u6027\u80fd\u6bd4\u8f83\n            if self._is_model_better(validation_results):\n                await self._deploy_model(new_model)\n                await self._start_ab_test(new_model)\n            else:\n                logger.warning(\"\u65b0\u6a21\u578b\u6027\u80fd\u4e0d\u5982\u73b0\u6709\u6a21\u578b\uff0c\u8df3\u8fc7\u90e8\u7f72\")\n\n        except Exception as e:\n            logger.error(f\"\u81ea\u52a8\u91cd\u8bad\u7ec3\u5931\u8d25: {e}\")\n            await self._notify_failure(e)\n</code></pre> <ol> <li>\u6a21\u578b\u7248\u672c\u7ba1\u7406</li> </ol> <pre><code># src/ml/registry/model_registry.py\nclass ModelRegistry:\n    def __init__(self):\n        self.storage_backend = S3Backend()\n        self.metadata_store = PostgreSQLStore()\n\n    def register_model(self, model, metadata):\n        \"\"\"\u6ce8\u518c\u65b0\u6a21\u578b\u7248\u672c\"\"\"\n        version = self._generate_version()\n        model_path = f\"models/football_prediction/v{version}\"\n\n        # \u4fdd\u5b58\u6a21\u578b\u6587\u4ef6\n        self.storage_backend.save(model, model_path)\n\n        # \u4fdd\u5b58\u5143\u6570\u636e\n        self.metadata_store.save({\n            'version': version,\n            'created_at': datetime.now(),\n            'metrics': metadata['metrics'],\n            'features': metadata['features'],\n            'training_data_hash': metadata['data_hash']\n        })\n\n        return version\n\n    def rollback_model(self, target_version):\n        \"\"\"\u56de\u6eda\u5230\u6307\u5b9a\u7248\u672c\"\"\"\n        model = self.storage_backend.load(f\"models/football_prediction/v{target_version}\")\n        self._deploy_model(model)\n        logger.info(f\"\u5df2\u56de\u6eda\u5230\u6a21\u578b\u7248\u672c {target_version}\")\n</code></pre>"},{"location":"architecture/architecture/#612-ab","title":"6.1.2 A/B\u6d4b\u8bd5\u6846\u67b6","text":"<p>\u5b9e\u73b0\u591a\u7248\u672c\u6a21\u578b\u5e76\u884c\u6d4b\u8bd5\uff1a</p> <pre><code># src/prediction/ab_testing/experiment.py\nclass ABTestManager:\n    def __init__(self):\n        self.experiments = {}\n        self.traffic_splitter = TrafficSplitter()\n\n    def create_experiment(self, name, control_model, treatment_model, traffic_split=0.1):\n        \"\"\"\u521b\u5efaA/B\u6d4b\u8bd5\u5b9e\u9a8c\"\"\"\n        experiment = {\n            'name': name,\n            'control_model': control_model,\n            'treatment_model': treatment_model,\n            'traffic_split': traffic_split,\n            'start_time': datetime.now(),\n            'metrics': defaultdict(list)\n        }\n        self.experiments[name] = experiment\n        return experiment\n\n    async def route_prediction_request(self, request):\n        \"\"\"\u6839\u636eA/B\u6d4b\u8bd5\u7b56\u7565\u8def\u7531\u9884\u6d4b\u8bf7\u6c42\"\"\"\n        active_experiment = self._get_active_experiment()\n\n        if active_experiment and self._should_use_treatment(request):\n            model = active_experiment['treatment_model']\n            variant = 'treatment'\n        else:\n            model = active_experiment['control_model'] if active_experiment else self.default_model\n            variant = 'control'\n\n        # \u6267\u884c\u9884\u6d4b\n        prediction = await model.predict(request)\n\n        # \u8bb0\u5f55\u5b9e\u9a8c\u6570\u636e\n        if active_experiment:\n            await self._log_experiment_data(active_experiment['name'], variant, request, prediction)\n\n        return prediction\n</code></pre>"},{"location":"architecture/architecture/#62","title":"6.2 \u5b9e\u65f6\u8d54\u7387\u548c\u7403\u961f\u52a8\u6001\u589e\u91cf\u91c7\u96c6","text":""},{"location":"architecture/architecture/#621","title":"6.2.1 \u5b9e\u65f6\u6570\u636e\u6d41\u5904\u7406\u67b6\u6784","text":"<p>\u6280\u672f\u9009\u578b\uff1a</p> <ul> <li>Apache Kafka\u4f5c\u4e3a\u6d88\u606f\u961f\u5217</li> <li>Apache Flink/Spark Streaming\u8fdb\u884c\u6d41\u5904\u7406</li> <li>WebSocket\u8fde\u63a5\u83b7\u53d6\u5b9e\u65f6\u8d54\u7387\u53d8\u5316</li> </ul> <p>\u67b6\u6784\u8bbe\u8ba1\uff1a</p> <pre><code>graph LR\n    subgraph \"\u6570\u636e\u6e90\"\n        A1[\u535a\u5f69\u7f51\u7ad9WebSocket]\n        A2[\u4f53\u80b2\u6570\u636eAPI]\n        A3[\u793e\u4ea4\u5a92\u4f53\u76d1\u63a7]\n        A4[\u65b0\u95fb\u722c\u866b]\n    end\n\n    subgraph \"\u6d88\u606f\u961f\u5217\"\n        B[Apache Kafka]\n    end\n\n    subgraph \"\u6d41\u5904\u7406\"\n        C1[Flink - \u8d54\u7387\u5904\u7406]\n        C2[Flink - \u65b0\u95fb\u5206\u6790]\n        C3[Flink - \u793e\u5a92\u60c5\u611f]\n    end\n\n    subgraph \"\u5b9e\u65f6\u5b58\u50a8\"\n        D1[(Redis Stream)]\n        D2[(InfluxDB)]\n    end\n\n    subgraph \"\u9884\u6d4b\u670d\u52a1\"\n        E[\u5b9e\u65f6\u9884\u6d4b\u5f15\u64ce]\n    end\n\n    A1 &amp; A2 &amp; A3 &amp; A4 --&gt; B\n    B --&gt; C1 &amp; C2 &amp; C3\n    C1 &amp; C2 &amp; C3 --&gt; D1 &amp; D2\n    D1 &amp; D2 --&gt; E\n</code></pre> <p>\u5b9e\u73b0\u65b9\u6848\uff1a</p> <ol> <li>\u5b9e\u65f6\u8d54\u7387\u91c7\u96c6\u5668</li> </ol> <pre><code># src/real_time/collectors/odds_stream.py\nclass RealTimeOddsCollector:\n    def __init__(self):\n        self.kafka_producer = KafkaProducer()\n        self.websocket_connections = {}\n\n    async def start_odds_stream(self, bookmakers):\n        \"\"\"\u542f\u52a8\u5b9e\u65f6\u8d54\u7387\u6d41\u91c7\u96c6\"\"\"\n        for bookmaker in bookmakers:\n            connection = await self._create_websocket_connection(bookmaker)\n            self.websocket_connections[bookmaker] = connection\n            asyncio.create_task(self._handle_odds_stream(bookmaker, connection))\n\n    async def _handle_odds_stream(self, bookmaker, connection):\n        \"\"\"\u5904\u7406\u8d54\u7387\u6d41\u6570\u636e\"\"\"\n        async for message in connection:\n            odds_data = self._parse_odds_message(message, bookmaker)\n\n            # \u53d1\u9001\u5230Kafka\n            await self.kafka_producer.send('odds_stream', {\n                'bookmaker': bookmaker,\n                'timestamp': datetime.now().isoformat(),\n                'data': odds_data\n            })\n\n            # \u68c0\u6d4b\u663e\u8457\u53d8\u5316\n            if self._detect_significant_change(odds_data):\n                await self._trigger_prediction_update(odds_data)\n</code></pre> <ol> <li>\u6d41\u5904\u7406\u5f15\u64ce</li> </ol> <pre><code># src/real_time/processors/odds_processor.py\nclass OddsStreamProcessor:\n    def __init__(self):\n        self.flink_env = StreamExecutionEnvironment.get_execution_environment()\n\n    def create_processing_pipeline(self):\n        \"\"\"\u521b\u5efa\u8d54\u7387\u6d41\u5904\u7406\u7ba1\u9053\"\"\"\n        # \u4eceKafka\u8bfb\u53d6\u8d54\u7387\u6d41\n        odds_stream = self.flink_env.add_source(\n            FlinkKafkaConsumer('odds_stream', SimpleStringSchema(), kafka_props)\n        )\n\n        # \u6570\u636e\u6e05\u6d17\u548c\u6807\u51c6\u5316\n        cleaned_stream = odds_stream.map(self._clean_odds_data)\n\n        # \u8ba1\u7b97\u79fb\u52a8\u5e73\u5747\u548c\u8d8b\u52bf\n        windowed_stream = cleaned_stream.key_by('match_id').time_window(Time.minutes(5))\n        trend_stream = windowed_stream.apply(OddsTrendCalculator())\n\n        # \u68c0\u6d4b\u5f02\u5e38\u6ce2\u52a8\n        anomaly_stream = trend_stream.filter(AnomalyDetector())\n\n        # \u8f93\u51fa\u5230\u5b58\u50a8\u7cfb\u7edf\n        trend_stream.add_sink(RedisSink('odds_trends'))\n        anomaly_stream.add_sink(AlertingSink('odds_anomalies'))\n\n        return self.flink_env.execute(\"OddsProcessingJob\")\n</code></pre>"},{"location":"architecture/architecture/#622","title":"6.2.2 \u7403\u961f\u52a8\u6001\u4fe1\u606f\u91c7\u96c6","text":"<p>\u4fe1\u606f\u6e90\u6574\u5408\uff1a</p> <ul> <li>\u5b98\u65b9\u7403\u961f\u7f51\u7ad9\u548c\u793e\u4ea4\u5a92\u4f53</li> <li>\u4f53\u80b2\u65b0\u95fb\u7f51\u7ad9</li> <li>\u7403\u5458\u4f24\u75c5\u62a5\u544a</li> <li>\u8f6c\u4f1a\u5e02\u573a\u4fe1\u606f</li> </ul> <p>\u5b9e\u73b0\u65b9\u6848\uff1a</p> <pre><code># src/real_time/collectors/team_news.py\nclass TeamNewsCollector:\n    def __init__(self):\n        self.news_sources = NewsSourceRegistry()\n        self.nlp_processor = NLPProcessor()\n        self.kafka_producer = KafkaProducer()\n\n    async def collect_team_news(self, teams):\n        \"\"\"\u91c7\u96c6\u7403\u961f\u52a8\u6001\u65b0\u95fb\"\"\"\n        for team in teams:\n            news_items = await self._fetch_team_news(team)\n\n            for news in news_items:\n                # NLP\u5206\u6790\u65b0\u95fb\u5185\u5bb9\n                analysis = await self.nlp_processor.analyze_news(news)\n\n                # \u63d0\u53d6\u5173\u952e\u4fe1\u606f\n                extracted_info = self._extract_key_info(analysis)\n\n                if extracted_info['importance'] &gt; 0.7:  # \u9ad8\u91cd\u8981\u6027\u65b0\u95fb\n                    await self._send_to_processing(team, extracted_info)\n\n    def _extract_key_info(self, analysis):\n        \"\"\"\u63d0\u53d6\u5173\u952e\u4fe1\u606f\"\"\"\n        return {\n            'player_injuries': analysis.get('injuries', []),\n            'lineup_changes': analysis.get('lineup_changes', []),\n            'coaching_changes': analysis.get('coaching_news', []),\n            'sentiment_score': analysis.get('sentiment', 0),\n            'importance': analysis.get('importance_score', 0)\n        }\n</code></pre>"},{"location":"architecture/architecture/#63","title":"6.3 \u9ad8\u5e76\u53d1\u67b6\u6784\u4f18\u5316","text":""},{"location":"architecture/architecture/#631","title":"6.3.1 \u7f13\u5b58\u7b56\u7565\u5347\u7ea7","text":"<p>\u591a\u5c42\u7f13\u5b58\u67b6\u6784\uff1a</p> <pre><code>graph TD\n    A[\u7528\u6237\u8bf7\u6c42] --&gt; B[CDN\u7f13\u5b58]\n    B --&gt; C{\u7f13\u5b58\u547d\u4e2d?}\n    C --&gt;|\u662f| D[\u8fd4\u56de\u7ed3\u679c]\n    C --&gt;|\u5426| E[\u5e94\u7528\u5c42\u7f13\u5b58 - Redis]\n    E --&gt; F{\u7f13\u5b58\u547d\u4e2d?}\n    F --&gt;|\u662f| G[\u8fd4\u56de\u7ed3\u679c]\n    F --&gt;|\u5426| H[\u6570\u636e\u5e93\u7f13\u5b58 - Redis]\n    H --&gt; I{\u7f13\u5b58\u547d\u4e2d?}\n    I --&gt;|\u662f| J[\u8fd4\u56de\u7ed3\u679c]\n    I --&gt;|\u5426| K[\u6570\u636e\u5e93\u67e5\u8be2]\n    K --&gt; L[\u66f4\u65b0\u6240\u6709\u7f13\u5b58\u5c42]\n    L --&gt; M[\u8fd4\u56de\u7ed3\u679c]\n</code></pre> <p>\u7f13\u5b58\u5b9e\u73b0\u7b56\u7565\uff1a</p> <pre><code># src/cache/multi_level_cache.py\nclass MultiLevelCache:\n    def __init__(self):\n        self.l1_cache = LocalLRUCache(maxsize=1000)  # \u672c\u5730\u7f13\u5b58\n        self.l2_cache = RedisCache(host='redis-cluster')  # \u5206\u5e03\u5f0f\u7f13\u5b58\n        self.l3_cache = DatabaseQueryCache()  # \u67e5\u8be2\u7ed3\u679c\u7f13\u5b58\n\n    async def get_prediction(self, match_id):\n        \"\"\"\u591a\u7ea7\u7f13\u5b58\u83b7\u53d6\u9884\u6d4b\u7ed3\u679c\"\"\"\n        # L1 \u7f13\u5b58 - \u672c\u5730\u5185\u5b58\n        result = self.l1_cache.get(f\"prediction:{match_id}\")\n        if result:\n            return result\n\n        # L2 \u7f13\u5b58 - Redis\n        result = await self.l2_cache.get(f\"prediction:{match_id}\")\n        if result:\n            self.l1_cache.set(f\"prediction:{match_id}\", result, ttl=300)\n            return result\n\n        # L3 \u7f13\u5b58 - \u6570\u636e\u5e93\u67e5\u8be2\u7f13\u5b58\n        result = await self.l3_cache.get_or_compute(\n            f\"prediction:{match_id}\",\n            lambda: self._compute_prediction(match_id)\n        )\n\n        # \u66f4\u65b0\u4e0a\u5c42\u7f13\u5b58\n        await self.l2_cache.set(f\"prediction:{match_id}\", result, ttl=1800)\n        self.l1_cache.set(f\"prediction:{match_id}\", result, ttl=300)\n\n        return result\n\n    async def invalidate_prediction(self, match_id):\n        \"\"\"\u9884\u6d4b\u7ed3\u679c\u5931\u6548\u5904\u7406\"\"\"\n        keys = [f\"prediction:{match_id}\", f\"features:{match_id}\"]\n\n        # \u5220\u9664\u6240\u6709\u5c42\u7ea7\u7684\u7f13\u5b58\n        for key in keys:\n            self.l1_cache.delete(key)\n            await self.l2_cache.delete(key)\n            await self.l3_cache.delete(key)\n</code></pre>"},{"location":"architecture/architecture/#632","title":"6.3.2 \u6d88\u606f\u961f\u5217\u67b6\u6784","text":"<p>\u5f02\u6b65\u5904\u7406\u7cfb\u7edf\uff1a</p> <pre><code># src/messaging/task_queue.py\nclass TaskQueueManager:\n    def __init__(self):\n        self.celery_app = Celery('football_prediction')\n        self.kafka_producer = KafkaProducer()\n\n    @celery_app.task(bind=True, max_retries=3)\n    def process_prediction_request(self, match_data):\n        \"\"\"\u5f02\u6b65\u5904\u7406\u9884\u6d4b\u8bf7\u6c42\"\"\"\n        try:\n            # \u7279\u5f81\u8ba1\u7b97\n            features = self._calculate_features(match_data)\n\n            # \u6a21\u578b\u9884\u6d4b\n            prediction = self._run_prediction(features)\n\n            # \u7f13\u5b58\u7ed3\u679c\n            self._cache_prediction_result(match_data['match_id'], prediction)\n\n            # \u53d1\u9001\u7ed3\u679c\u901a\u77e5\n            self._notify_prediction_ready(match_data['match_id'], prediction)\n\n        except Exception as exc:\n            if self.request.retries &lt; self.max_retries:\n                raise self.retry(countdown=60 * (self.request.retries + 1))\n            else:\n                self._handle_prediction_failure(match_data, str(exc))\n</code></pre>"},{"location":"architecture/architecture/#633","title":"6.3.3 \u6570\u636e\u5e93\u8bfb\u5199\u5206\u79bb\u548c\u5206\u7247","text":"<p>\u6570\u636e\u5e93\u96c6\u7fa4\u67b6\u6784\uff1a</p> <pre><code># src/database/cluster_manager.py\nclass DatabaseClusterManager:\n    def __init__(self):\n        self.write_db = self._create_master_connection()\n        self.read_dbs = self._create_read_replicas()\n        self.shard_router = ShardRouter()\n\n    def get_read_connection(self, query_type='general'):\n        \"\"\"\u83b7\u53d6\u8bfb\u8fde\u63a5\"\"\"\n        if query_type == 'analytics':\n            return self.read_dbs['analytics_replica']\n        elif query_type == 'realtime':\n            return self.read_dbs['realtime_replica']\n        else:\n            return random.choice(list(self.read_dbs.values()))\n\n    def get_write_connection(self, table_name, shard_key=None):\n        \"\"\"\u83b7\u53d6\u5199\u8fde\u63a5\"\"\"\n        if shard_key:\n            shard = self.shard_router.route(table_name, shard_key)\n            return self.write_db[f'shard_{shard}']\n        return self.write_db['master']\n\n    async def execute_read_query(self, query, params=None):\n        \"\"\"\u6267\u884c\u8bfb\u67e5\u8be2\"\"\"\n        connection = self.get_read_connection()\n        return await connection.fetch(query, params)\n\n    async def execute_write_query(self, query, params=None, table_name=None, shard_key=None):\n        \"\"\"\u6267\u884c\u5199\u67e5\u8be2\"\"\"\n        connection = self.get_write_connection(table_name, shard_key)\n        return await connection.execute(query, params)\n</code></pre>"},{"location":"architecture/architecture/#64","title":"6.4 \u7528\u6237\u753b\u50cf\u548c\u4e2a\u6027\u5316\u63a8\u8350","text":""},{"location":"architecture/architecture/#641","title":"6.4.1 \u7528\u6237\u884c\u4e3a\u5206\u6790\u7cfb\u7edf","text":"<p>\u7528\u6237\u753b\u50cf\u5efa\u6a21\uff1a</p> <pre><code># src/personalization/user_profiling.py\nclass UserProfiler:\n    def __init__(self):\n        self.behavior_tracker = BehaviorTracker()\n        self.preference_engine = PreferenceEngine()\n        self.ml_model = UserClusteringModel()\n\n    def build_user_profile(self, user_id):\n        \"\"\"\u6784\u5efa\u7528\u6237\u753b\u50cf\"\"\"\n        # \u6536\u96c6\u7528\u6237\u884c\u4e3a\u6570\u636e\n        behaviors = self.behavior_tracker.get_user_behaviors(user_id)\n\n        # \u5206\u6790\u7528\u6237\u504f\u597d\n        preferences = self._analyze_preferences(behaviors)\n\n        # \u7528\u6237\u805a\u7c7b\n        cluster = self.ml_model.predict_cluster(preferences)\n\n        profile = {\n            'user_id': user_id,\n            'favorite_teams': preferences.get('teams', []),\n            'favorite_leagues': preferences.get('leagues', []),\n            'prediction_accuracy_interest': preferences.get('accuracy_focus', 0.5),\n            'risk_tolerance': preferences.get('risk_tolerance', 'medium'),\n            'interaction_frequency': behaviors['frequency'],\n            'cluster': cluster,\n            'created_at': datetime.now()\n        }\n\n        return profile\n\n    def _analyze_preferences(self, behaviors):\n        \"\"\"\u5206\u6790\u7528\u6237\u504f\u597d\"\"\"\n        team_interactions = defaultdict(int)\n        league_interactions = defaultdict(int)\n\n        for behavior in behaviors:\n            if behavior['type'] == 'view_prediction':\n                match_info = behavior['match_info']\n                team_interactions[match_info['home_team']] += 1\n                team_interactions[match_info['away_team']] += 1\n                league_interactions[match_info['league']] += 1\n\n        return {\n            'teams': sorted(team_interactions.keys(),\n                          key=team_interactions.get, reverse=True)[:5],\n            'leagues': sorted(league_interactions.keys(),\n                            key=league_interactions.get, reverse=True)[:3],\n            'accuracy_focus': self._calculate_accuracy_focus(behaviors),\n            'risk_tolerance': self._calculate_risk_tolerance(behaviors)\n        }\n</code></pre>"},{"location":"architecture/architecture/#642","title":"6.4.2 \u4e2a\u6027\u5316\u63a8\u8350\u5f15\u64ce","text":"<p>\u63a8\u8350\u7b97\u6cd5\u5b9e\u73b0\uff1a</p> <pre><code># src/personalization/recommendation_engine.py\nclass PersonalizedRecommendationEngine:\n    def __init__(self):\n        self.collaborative_filter = CollaborativeFiltering()\n        self.content_filter = ContentBasedFiltering()\n        self.hybrid_model = HybridRecommendationModel()\n\n    async def get_personalized_matches(self, user_id, limit=10):\n        \"\"\"\u83b7\u53d6\u4e2a\u6027\u5316\u6bd4\u8d5b\u63a8\u8350\"\"\"\n        user_profile = await self._get_user_profile(user_id)\n\n        # \u57fa\u4e8e\u5185\u5bb9\u7684\u8fc7\u6ee4\n        content_recommendations = await self.content_filter.recommend(\n            user_profile, limit=limit*2\n        )\n\n        # \u534f\u540c\u8fc7\u6ee4\n        collaborative_recommendations = await self.collaborative_filter.recommend(\n            user_id, limit=limit*2\n        )\n\n        # \u6df7\u5408\u63a8\u8350\n        final_recommendations = self.hybrid_model.combine_recommendations(\n            content_recommendations,\n            collaborative_recommendations,\n            user_profile,\n            limit=limit\n        )\n\n        return final_recommendations\n\n    async def get_personalized_insights(self, user_id, match_id):\n        \"\"\"\u83b7\u53d6\u4e2a\u6027\u5316\u9884\u6d4b\u89c1\u89e3\"\"\"\n        user_profile = await self._get_user_profile(user_id)\n        base_prediction = await self._get_base_prediction(match_id)\n\n        # \u6839\u636e\u7528\u6237\u504f\u597d\u8c03\u6574\u5c55\u793a\u5185\u5bb9\n        insights = {\n            'prediction': base_prediction,\n            'confidence_explanation': self._generate_confidence_explanation(\n                base_prediction, user_profile\n            ),\n            'key_factors': self._personalize_key_factors(\n                base_prediction['factors'], user_profile\n            ),\n            'similar_matches': await self._find_similar_matches(\n                match_id, user_profile\n            )\n        }\n\n        return insights\n</code></pre>"},{"location":"architecture/architecture/#643","title":"6.4.3 \u63a8\u8350\u7cfb\u7edf\u8bc4\u4f30\u6846\u67b6","text":"<p>A/B\u6d4b\u8bd5\u548c\u6548\u679c\u8bc4\u4f30\uff1a</p> <pre><code># src/personalization/evaluation.py\nclass RecommendationEvaluator:\n    def __init__(self):\n        self.metrics_calculator = MetricsCalculator()\n        self.ab_tester = ABTester()\n\n    async def evaluate_recommendation_quality(self, recommendations, user_interactions):\n        \"\"\"\u8bc4\u4f30\u63a8\u8350\u8d28\u91cf\"\"\"\n        metrics = {\n            'precision': self._calculate_precision(recommendations, user_interactions),\n            'recall': self._calculate_recall(recommendations, user_interactions),\n            'f1_score': self._calculate_f1_score(recommendations, user_interactions),\n            'diversity': self._calculate_diversity(recommendations),\n            'novelty': self._calculate_novelty(recommendations, user_interactions),\n            'coverage': self._calculate_coverage(recommendations)\n        }\n\n        return metrics\n\n    async def run_recommendation_ab_test(self, control_algorithm, treatment_algorithm):\n        \"\"\"\u8fd0\u884c\u63a8\u8350\u7b97\u6cd5A/B\u6d4b\u8bd5\"\"\"\n        test_users = await self._select_test_users()\n\n        # \u5206\u914d\u7528\u6237\u5230\u5bf9\u7167\u7ec4\u548c\u5b9e\u9a8c\u7ec4\n        control_group, treatment_group = self._split_users(test_users)\n\n        # \u8fd0\u884c\u6d4b\u8bd5\n        control_results = await self._run_recommendation_test(\n            control_group, control_algorithm\n        )\n        treatment_results = await self._run_recommendation_test(\n            treatment_group, treatment_algorithm\n        )\n\n        # \u7edf\u8ba1\u5206\u6790\n        significance_test = self._perform_significance_test(\n            control_results, treatment_results\n        )\n\n        return {\n            'control_metrics': control_results['metrics'],\n            'treatment_metrics': treatment_results['metrics'],\n            'statistical_significance': significance_test,\n            'recommendation': self._make_algorithm_recommendation(significance_test)\n        }\n</code></pre>"},{"location":"architecture/architecture/#65","title":"6.5 \u7cfb\u7edf\u6269\u5c55\u603b\u7ed3","text":""},{"location":"architecture/architecture/#651","title":"6.5.1 \u6269\u5c55\u4f18\u5148\u7ea7\u6392\u5e8f","text":"<p>\u7b2c\u4e00\u4f18\u5148\u7ea7\uff086\u4e2a\u6708\u5185\uff09\uff1a</p> <ol> <li>\u6a21\u578b\u81ea\u52a8\u66f4\u65b0\u673a\u5236 - \u4fdd\u8bc1\u9884\u6d4b\u8d28\u91cf\u6301\u7eed\u4f18\u5316</li> <li>\u5b9e\u65f6\u8d54\u7387\u91c7\u96c6 - \u63d0\u4f9b\u66f4\u53ca\u65f6\u7684\u5e02\u573a\u4fe1\u606f</li> <li>\u591a\u5c42\u7f13\u5b58\u67b6\u6784 - \u652f\u6491\u9ad8\u5e76\u53d1\u8bbf\u95ee\u9700\u6c42</li> </ol> <p>\u7b2c\u4e8c\u4f18\u5148\u7ea7\uff0812\u4e2a\u6708\u5185\uff09\uff1a</p> <ol> <li>\u7528\u6237\u753b\u50cf\u7cfb\u7edf - \u63d0\u5347\u7528\u6237\u4f53\u9a8c\u548c\u7c98\u6027</li> <li>\u6d88\u606f\u961f\u5217\u4f18\u5316 - \u63d0\u9ad8\u7cfb\u7edf\u54cd\u5e94\u6027\u548c\u53ef\u9760\u6027</li> <li>\u6570\u636e\u5e93\u96c6\u7fa4\u5316 - \u652f\u6491\u66f4\u5927\u89c4\u6a21\u6570\u636e\u5904\u7406</li> </ol> <p>\u7b2c\u4e09\u4f18\u5148\u7ea7\uff0818\u4e2a\u6708\u5185\uff09\uff1a</p> <ol> <li>\u4e2a\u6027\u5316\u63a8\u8350\u5f15\u64ce - \u589e\u5f3a\u4ea7\u54c1\u7ade\u4e89\u529b</li> <li>\u9ad8\u7ea7\u5206\u6790\u529f\u80fd - \u63d0\u4f9b\u66f4\u6df1\u5165\u7684\u6570\u636e\u89c1\u89e3</li> <li>\u591a\u8bed\u8a00\u548c\u591a\u5730\u533a\u652f\u6301 - \u6269\u5927\u7528\u6237\u8986\u76d6\u9762</li> </ol>"},{"location":"architecture/architecture/#652","title":"6.5.2 \u6280\u672f\u503a\u52a1\u7ba1\u7406","text":"<p>\u4ee3\u7801\u91cd\u6784\u8ba1\u5212\uff1a</p> <ul> <li>\u5efa\u7acb\u4ee3\u7801\u8d28\u91cf\u76d1\u63a7\u548c\u81ea\u52a8\u91cd\u6784\u5de5\u5177</li> <li>\u5b9a\u671f\u8fdb\u884c\u67b6\u6784\u8bc4\u5ba1\u548c\u6280\u672f\u503a\u52a1\u6e05\u7406</li> <li>\u5b9e\u65bd\u5fae\u670d\u52a1\u62c6\u5206\uff0c\u63d0\u9ad8\u7cfb\u7edf\u6a21\u5757\u5316\u7a0b\u5ea6</li> </ul> <p>\u6027\u80fd\u4f18\u5316\u8def\u7ebf\u56fe\uff1a</p> <ul> <li>\u5efa\u7acb\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\u548c\u6301\u7eed\u76d1\u63a7</li> <li>\u5b9e\u65bd\u6e10\u8fdb\u5f0f\u6027\u80fd\u4f18\u5316\u7b56\u7565</li> <li>\u5b9a\u671f\u8fdb\u884c\u5bb9\u91cf\u89c4\u5212\u548c\u6269\u5bb9\u9884\u6848</li> </ul> <p>\u5b89\u5168\u52a0\u56fa\u63aa\u65bd\uff1a</p> <ul> <li>\u5b9e\u65bd\u96f6\u4fe1\u4efb\u5b89\u5168\u67b6\u6784</li> <li>\u5efa\u7acb\u5b89\u5168\u6f0f\u6d1e\u626b\u63cf\u548c\u4fee\u590d\u6d41\u7a0b</li> <li>\u52a0\u5f3a\u6570\u636e\u52a0\u5bc6\u548c\u9690\u79c1\u4fdd\u62a4\u63aa\u65bd</li> </ul>"},{"location":"architecture/architecture/#_54","title":"\ud83d\udcc4 \u6587\u6863\u7248\u672c\u4fe1\u606f","text":"<ul> <li>\u6587\u6863\u7248\u672c\uff1av1.0</li> <li>\u521b\u5efa\u65e5\u671f\uff1a2024\u5e741\u6708</li> <li>\u6700\u540e\u66f4\u65b0\uff1a2024\u5e741\u6708</li> <li>\u8d1f\u8d23\u4eba\uff1a\u7cfb\u7edf\u67b6\u6784\u56e2\u961f</li> <li>\u5ba1\u6838\u72b6\u6001\uff1a\u5df2\u5ba1\u6838\u901a\u8fc7</li> </ul>"},{"location":"architecture/architecture/#_55","title":"\ud83d\udcde \u8054\u7cfb\u4fe1\u606f","text":"<p>\u5982\u6709\u4efb\u4f55\u95ee\u9898\u6216\u5efa\u8bae\uff0c\u8bf7\u8054\u7cfb\u5f00\u53d1\u56e2\u961f\uff1a</p> <ul> <li>\u90ae\u7bb1\uff1adev-team@football-prediction.com</li> <li>\u6280\u672f\u6587\u6863\uff1ahttps://docs.football-prediction.com</li> <li>\u9879\u76ee\u4ed3\u5e93\uff1ahttps://github.com/your-org/football-prediction-system</li> </ul> <p>\u672c\u6587\u6863\u4e3a\u8db3\u7403\u6bd4\u8d5b\u7ed3\u679c\u9884\u6d4b\u7cfb\u7edf\u7684\u6b63\u5f0f\u6280\u672f\u67b6\u6784\u8bbe\u8ba1\u6587\u6863\uff0c\u6240\u6709\u5f00\u53d1\u6d3b\u52a8\u5e94\u4e25\u683c\u6309\u7167\u672c\u6587\u6863\u6267\u884c\u3002</p>"},{"location":"architecture/performance-monitoring-architecture/","title":"\u6027\u80fd\u76d1\u63a7\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1","text":""},{"location":"architecture/performance-monitoring-architecture/#_2","title":"\u7cfb\u7edf\u6982\u8ff0","text":"<p>\u6027\u80fd\u76d1\u63a7\u7cfb\u7edf\u91c7\u7528\u5206\u5c42\u67b6\u6784\u8bbe\u8ba1\uff0c\u63d0\u4f9b\u5168\u65b9\u4f4d\u7684\u6027\u80fd\u6570\u636e\u91c7\u96c6\u3001\u5206\u6790\u548c\u53ef\u89c6\u5316\u80fd\u529b\u3002\u7cfb\u7edf\u9075\u5faa\u4f4e\u8026\u5408\u3001\u9ad8\u5185\u805a\u7684\u8bbe\u8ba1\u539f\u5219\uff0c\u652f\u6301\u6a21\u5757\u5316\u6269\u5c55\u3002</p>"},{"location":"architecture/performance-monitoring-architecture/#_3","title":"\u67b6\u6784\u56fe","text":"<pre><code>graph TB\n    subgraph \"\u5e94\u7528\u5c42\"\n        A[FastAPI\u5e94\u7528] --&gt; B[\u6027\u80fd\u76d1\u63a7\u4e2d\u95f4\u4ef6]\n        A --&gt; C[API\u7aef\u70b9]\n    end\n\n    subgraph \"\u76d1\u63a7\u5c42\"\n        B --&gt; D[\u6027\u80fd\u5206\u6790\u5668]\n        D --&gt; E[\u51fd\u6570\u5206\u6790\u5668]\n        D --&gt; F[\u5185\u5b58\u5206\u6790\u5668]\n        D --&gt; G[\u6570\u636e\u5e93\u5206\u6790\u5668]\n        D --&gt; H[API\u5206\u6790\u5668]\n    end\n\n    subgraph \"\u6570\u636e\u5904\u7406\u5c42\"\n        E --&gt; I[\u6307\u6807\u6536\u96c6\u5668]\n        F --&gt; I\n        G --&gt; I\n        H --&gt; I\n        I --&gt; J[\u6027\u80fd\u5206\u6790\u5f15\u64ce]\n        J --&gt; K[\u6d1e\u5bdf\u751f\u6210\u5668]\n        J --&gt; L[\u5efa\u8bae\u751f\u6210\u5668]\n    end\n\n    subgraph \"\u5b58\u50a8\u5c42\"\n        I --&gt; M[\u65f6\u5e8f\u6570\u636e\u5e93]\n        J --&gt; N[\u5206\u6790\u7ed3\u679c\u7f13\u5b58]\n        K --&gt; N\n        L --&gt; N\n    end\n\n    subgraph \"\u5c55\u793a\u5c42\"\n        N --&gt; O[\u6027\u80fd\u4eea\u8868\u677f]\n        N --&gt; P[API\u63a5\u53e3]\n        N --&gt; Q[\u62a5\u544a\u751f\u6210\u5668]\n    end\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#_4","title":"\u6838\u5fc3\u6a21\u5757\u8bbe\u8ba1","text":""},{"location":"architecture/performance-monitoring-architecture/#1-profiler","title":"1. \u6027\u80fd\u5206\u6790\u5668\u6a21\u5757 (Profiler)","text":""},{"location":"architecture/performance-monitoring-architecture/#_5","title":"\u7c7b\u7ed3\u6784","text":"<pre><code>PerformanceProfiler\n\u251c\u2500\u2500 metrics: List[PerformanceMetric]\n\u251c\u2500\u2500 function_profiles: Dict[str, FunctionProfile]\n\u251c\u2500\u2500 query_profiles: List[QueryProfile]\n\u251c\u2500\u2500 active_profiling: bool\n\u2514\u2500\u2500 methods:\n    \u251c\u2500\u2500 start_profiling()\n    \u251c\u2500\u2500 stop_profiling()\n    \u251c\u2500\u2500 record_metric()\n    \u251c\u2500\u2500 record_function_call()\n    \u251c\u2500\u2500 record_database_query()\n    \u251c\u2500\u2500 get_metrics_summary()\n    \u251c\u2500\u2500 get_slow_functions()\n    \u2514\u2500\u2500 reset()\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#_6","title":"\u8bbe\u8ba1\u7279\u70b9","text":"<ul> <li>\u5355\u4f8b\u6a21\u5f0f: \u5168\u5c40\u5171\u4eab\u7684\u5206\u6790\u5668\u5b9e\u4f8b</li> <li>\u88c5\u9970\u5668\u652f\u6301: \u901a\u8fc7\u88c5\u9970\u5668\u81ea\u52a8\u8bb0\u5f55\u51fd\u6570\u6027\u80fd</li> <li>\u5f02\u6b65\u53cb\u597d: \u652f\u6301\u5f02\u6b65\u51fd\u6570\u6027\u80fd\u5206\u6790</li> <li>\u8d44\u6e90\u7ba1\u7406: \u81ea\u52a8\u7ba1\u7406\u6027\u80fd\u5206\u6790\u8d44\u6e90\u7684\u5206\u914d\u548c\u91ca\u653e</li> </ul>"},{"location":"architecture/performance-monitoring-architecture/#2-middleware","title":"2. \u76d1\u63a7\u4e2d\u95f4\u4ef6\u6a21\u5757 (Middleware)","text":""},{"location":"architecture/performance-monitoring-architecture/#_7","title":"\u4e2d\u95f4\u4ef6\u5c42\u6b21","text":"<pre><code>\u8bf7\u6c42\u6d41\u7a0b:\nRequest \u2192 I18nMiddleware \u2192 CORSMiddleware \u2192\nPerformanceMonitoringMiddleware \u2192 API Handler \u2192 Response\n\n\u54cd\u5e94\u6d41\u7a0b:\nResponse \u2190 PerformanceMonitoringMiddleware \u2190\nAPI Handler \u2190 \u4e2d\u95f4\u4ef6\u94fe\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#_8","title":"\u529f\u80fd\u6a21\u5757","text":"<pre><code>PerformanceMonitoringMiddleware\n\u251c\u2500\u2500 \u914d\u7f6e\u53c2\u6570\n\u2502   \u251c\u2500\u2500 track_memory: bool\n\u2502   \u251c\u2500\u2500 track_concurrency: bool\n\u2502   \u2514\u2500\u2500 sample_rate: float\n\u251c\u2500\u2500 \u7edf\u8ba1\u6570\u636e\n\u2502   \u251c\u2500\u2500 active_requests: Dict\n\u2502   \u251c\u2500\u2500 request_times: List[float]\n\u2502   \u2514\u2500\u2500 endpoint_stats: Dict\n\u2514\u2500\u2500 \u529f\u80fd\u65b9\u6cd5\n    \u251c\u2500\u2500 dispatch() - \u8bf7\u6c42\u5904\u7406\n    \u251c\u2500\u2500 track_request_metrics() - \u6307\u6807\u6536\u96c6\n    \u251c\u2500\u2500 calculate_percentiles() - \u767e\u5206\u4f4d\u8ba1\u7b97\n    \u2514\u2500\u2500 identify_slow_requests() - \u6162\u8bf7\u6c42\u8bc6\u522b\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#3-analyzer","title":"3. \u6027\u80fd\u5206\u6790\u5f15\u64ce (Analyzer)","text":""},{"location":"architecture/performance-monitoring-architecture/#_9","title":"\u5206\u6790\u6d41\u7a0b","text":"<pre><code>graph LR\n    A[\u539f\u59cb\u6570\u636e] --&gt; B[\u6570\u636e\u6e05\u6d17]\n    B --&gt; C[\u6307\u6807\u8ba1\u7b97]\n    C --&gt; D[\u6a21\u5f0f\u8bc6\u522b]\n    D --&gt; E[\u5f02\u5e38\u68c0\u6d4b]\n    E --&gt; F[\u8d8b\u52bf\u5206\u6790]\n    F --&gt; G[\u6d1e\u5bdf\u751f\u6210]\n    G --&gt; H[\u5efa\u8bae\u8f93\u51fa]\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#_10","title":"\u6838\u5fc3\u7c7b","text":"<pre><code>PerformanceAnalyzer\n\u251c\u2500\u2500 \u6570\u636e\u6a21\u578b\n\u2502   \u251c\u2500\u2500 PerformanceInsight\n\u2502   \u251c\u2500\u2500 PerformanceTrend\n\u2502   \u2514\u2500\u2500 PerformanceRecommendation\n\u251c\u2500\u2500 \u5206\u6790\u65b9\u6cd5\n\u2502   \u251c\u2500\u2500 analyze_api_performance()\n\u2502   \u251c\u2500\u2500 analyze_database_performance()\n\u2502   \u251c\u2500\u2500 analyze_cache_performance()\n\u2502   \u251c\u2500\u2500 analyze_memory_performance()\n\u2502   \u2514\u2500\u2500 analyze_task_performance()\n\u2514\u2500\u2500 \u62a5\u544a\u751f\u6210\n    \u251c\u2500\u2500 generate_performance_report()\n    \u251c\u2500\u2500 calculate_performance_score()\n    \u2514\u2500\u2500 export_report()\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#4-integration","title":"4. \u96c6\u6210\u7ba1\u7406\u6a21\u5757 (Integration)","text":""},{"location":"architecture/performance-monitoring-architecture/#_11","title":"\u751f\u547d\u5468\u671f\u7ba1\u7406","text":"<pre><code>\u5e94\u7528\u542f\u52a8\u6d41\u7a0b:\n1. \u521b\u5efa\u96c6\u6210\u5b9e\u4f8b\n2. \u8bfb\u53d6\u914d\u7f6e\u53c2\u6570\n3. \u6ce8\u518c\u4e2d\u95f4\u4ef6\n4. \u521d\u59cb\u5316\u5206\u6790\u5668\n5. \u8bbe\u7f6e\u544a\u8b66\u89c4\u5219\n6. \u542f\u52a8\u76d1\u63a7\u670d\u52a1\n\n\u5e94\u7528\u5173\u95ed\u6d41\u7a0b:\n1. \u505c\u6b62\u6027\u80fd\u5206\u6790\n2. \u4fdd\u5b58\u6700\u540e\u6570\u636e\n3. \u6e05\u7406\u8d44\u6e90\n4. \u5173\u95ed\u8fde\u63a5\n5. \u6ce8\u9500\u4e2d\u95f4\u4ef6\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#_12","title":"\u6570\u636e\u6d41\u8bbe\u8ba1","text":""},{"location":"architecture/performance-monitoring-architecture/#1","title":"1. \u6570\u636e\u91c7\u96c6\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant Client\n    participant Middleware\n    participant Profiler\n    participant Storage\n\n    Client-&gt;&gt;Middleware: HTTP Request\n    Middleware-&gt;&gt;Middleware: \u8bb0\u5f55\u8bf7\u6c42\u5f00\u59cb\n    Middleware-&gt;&gt;Profiler: \u5f00\u59cb\u8ddf\u8e2a\n    Middleware-&gt;&gt;Middleware: \u6267\u884c\u4e1a\u52a1\u903b\u8f91\n    Middleware-&gt;&gt;Profiler: \u8bb0\u5f55\u6307\u6807\n    Middleware-&gt;&gt;Storage: \u5b58\u50a8\u6570\u636e\n    Middleware-&gt;&gt;Client: HTTP Response\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#2","title":"2. \u6570\u636e\u5904\u7406\u6d41\u7a0b","text":"<pre><code>flowchart TD\n    A[\u5b9e\u65f6\u6570\u636e] --&gt; B{\u6570\u636e\u7c7b\u578b}\n    B --&gt;|API| C[API\u5206\u6790\u5668]\n    B --&gt;|\u6570\u636e\u5e93| D[\u6570\u636e\u5e93\u5206\u6790\u5668]\n    B --&gt;|\u7f13\u5b58| E[\u7f13\u5b58\u5206\u6790\u5668]\n    B --&gt;|\u5185\u5b58| F[\u5185\u5b58\u5206\u6790\u5668]\n\n    C --&gt; G[\u805a\u5408\u5668]\n    D --&gt; G\n    E --&gt; G\n    F --&gt; G\n\n    G --&gt; H[\u9608\u503c\u68c0\u6d4b]\n    H --&gt; I{\u662f\u5426\u8d85\u6807}\n    I --&gt;|\u662f| J[\u751f\u6210\u544a\u8b66]\n    I --&gt;|\u5426| K[\u66f4\u65b0\u7edf\u8ba1]\n\n    J --&gt; L[\u53d1\u9001\u901a\u77e5]\n    K --&gt; M[\u5b58\u50a8\u7ed3\u679c]\n    L --&gt; M\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#_13","title":"\u5b58\u50a8\u8bbe\u8ba1","text":""},{"location":"architecture/performance-monitoring-architecture/#1_1","title":"1. \u6570\u636e\u5b58\u50a8\u7b56\u7565","text":"<pre><code>\u5b58\u50a8\u5c42\u7ea7:\n1. \u5185\u5b58\u7f13\u5b58 (L1)\n   - \u6700\u8fd15\u5206\u949f\u6570\u636e\n   - \u70ed\u70b9\u6307\u6807\n   - \u5feb\u901f\u8bbf\u95ee\n\n2. Redis\u7f13\u5b58 (L2)\n   - \u6700\u8fd124\u5c0f\u65f6\u6570\u636e\n   - \u805a\u5408\u7ed3\u679c\n   - \u4e2d\u7b49\u901f\u5ea6\u8bbf\u95ee\n\n3. \u65f6\u5e8f\u6570\u636e\u5e93 (L3)\n   - \u5386\u53f2\u6570\u636e\n   - \u539f\u59cb\u6307\u6807\n   - \u6162\u901f\u5206\u6790\u67e5\u8be2\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#2_1","title":"2. \u6570\u636e\u6a21\u578b","text":"<pre><code># \u6027\u80fd\u6307\u6807\u6570\u636e\nPerformanceMetric:\n    - name: str          # \u6307\u6807\u540d\u79f0\n    - value: float       # \u6307\u6807\u503c\n    - unit: str          # \u5355\u4f4d\n    - timestamp: datetime # \u65f6\u95f4\u6233\n    - tags: Dict         # \u6807\u7b7e\n\n# \u51fd\u6570\u6027\u80fd\u6570\u636e\nFunctionProfile:\n    - function_name: str\n    - call_count: int\n    - total_time: float\n    - average_time: float\n    - min_time: float\n    - max_time: float\n\n# \u67e5\u8be2\u6027\u80fd\u6570\u636e\nQueryProfile:\n    - query: str\n    - execution_time: float\n    - rows_affected: int\n    - index_used: Optional[str]\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#_14","title":"\u914d\u7f6e\u7ba1\u7406","text":""},{"location":"architecture/performance-monitoring-architecture/#1_2","title":"1. \u914d\u7f6e\u5c42\u6b21","text":"<pre><code>\u914d\u7f6e\u4f18\u5148\u7ea7:\n1. \u73af\u5883\u53d8\u91cf (\u6700\u9ad8)\n2. \u914d\u7f6e\u6587\u4ef6\n3. \u9ed8\u8ba4\u503c (\u6700\u4f4e)\n\n\u914d\u7f6e\u5206\u7c7b:\n- \u57fa\u7840\u914d\u7f6e\n  - \u542f\u7528/\u7981\u7528\u5f00\u5173\n  - \u91c7\u6837\u7387\n  - \u6570\u636e\u4fdd\u7559\u671f\n\n- \u9608\u503c\u914d\u7f6e\n  - \u54cd\u5e94\u65f6\u95f4\u9608\u503c\n  - \u9519\u8bef\u7387\u9608\u503c\n  - \u8d44\u6e90\u4f7f\u7528\u9608\u503c\n\n- \u8f93\u51fa\u914d\u7f6e\n  - \u65e5\u5fd7\u7ea7\u522b\n  - \u62a5\u544a\u683c\u5f0f\n  - \u901a\u77e5\u6e20\u9053\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#2_2","title":"2. \u914d\u7f6e\u793a\u4f8b","text":"<pre><code>performance:\n  enabled: true\n  sample_rate: 1.0\n  profiling:\n    enabled: false\n    duration: 300  # 5\u5206\u949f\n\n  thresholds:\n    response_time:\n      slow: 1.0      # \u79d2\n      critical: 5.0\n    error_rate:\n      warning: 0.01   # 1%\n      critical: 0.05  # 5%\n    memory_usage:\n      warning: 80     # \u767e\u5206\u6bd4\n      critical: 95\n\n  storage:\n    retention:\n      metrics: 30d     # 30\u5929\n      profiles: 7d     # 7\u5929\n      reports: 90d     # 90\u5929\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#_15","title":"\u6269\u5c55\u8bbe\u8ba1","text":""},{"location":"architecture/performance-monitoring-architecture/#1_3","title":"1. \u63d2\u4ef6\u7cfb\u7edf","text":"<pre><code># \u63d2\u4ef6\u63a5\u53e3\nclass PerformancePlugin:\n    def __init__(self, config):\n        self.config = config\n\n    def on_request_start(self, request):\n        \"\"\"\u8bf7\u6c42\u5f00\u59cb\u65f6\u89e6\u53d1\"\"\"\n        pass\n\n    def on_request_end(self, request, response):\n        \"\"\"\u8bf7\u6c42\u7ed3\u675f\u65f6\u89e6\u53d1\"\"\"\n        pass\n\n    def collect_metrics(self):\n        \"\"\"\u6536\u96c6\u81ea\u5b9a\u4e49\u6307\u6807\"\"\"\n        return []\n\n# \u63d2\u4ef6\u6ce8\u518c\nplugin_manager.register_plugin(\"custom_plugin\", CustomPlugin)\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#2_3","title":"2. \u81ea\u5b9a\u4e49\u5206\u6790\u5668","text":"<pre><code># \u5206\u6790\u5668\u57fa\u7c7b\nclass BaseAnalyzer:\n    def analyze(self, data):\n        \"\"\"\u5206\u6790\u6570\u636e\u5e76\u8fd4\u56de\u6d1e\u5bdf\"\"\"\n        raise NotImplementedError\n\n    def get_thresholds(self):\n        \"\"\"\u83b7\u53d6\u5206\u6790\u9608\u503c\"\"\"\n        return {}\n\n# \u5b9e\u73b0\u81ea\u5b9a\u4e49\u5206\u6790\u5668\nclass CustomAnalyzer(BaseAnalyzer):\n    def analyze(self, data):\n        # \u81ea\u5b9a\u4e49\u5206\u6790\u903b\u8f91\n        insights = []\n        # ...\n        return insights\n</code></pre>"},{"location":"architecture/performance-monitoring-architecture/#_16","title":"\u6027\u80fd\u8003\u8651","text":""},{"location":"architecture/performance-monitoring-architecture/#1_4","title":"1. \u6027\u80fd\u5f00\u9500","text":"<ul> <li>\u91c7\u6837\u7b56\u7565: \u901a\u8fc7\u91c7\u6837\u7387\u63a7\u5236\u6027\u80fd\u5f00\u9500</li> <li>\u5f02\u6b65\u5904\u7406: \u4f7f\u7528\u5f02\u6b65\u65b9\u5f0f\u5904\u7406\u6027\u80fd\u6570\u636e</li> <li>\u6279\u91cf\u64cd\u4f5c: \u6279\u91cf\u5199\u5165\u5b58\u50a8\uff0c\u51cf\u5c11I/O\u5f00\u9500</li> <li>\u5185\u5b58\u4f18\u5316: \u9650\u5236\u5185\u5b58\u4e2d\u4fdd\u5b58\u7684\u6570\u636e\u91cf</li> </ul>"},{"location":"architecture/performance-monitoring-architecture/#2_4","title":"2. \u6269\u5c55\u6027\u8bbe\u8ba1","text":"<ul> <li>\u6c34\u5e73\u6269\u5c55: \u652f\u6301\u591a\u5b9e\u4f8b\u90e8\u7f72</li> <li>\u8d1f\u8f7d\u5747\u8861: \u901a\u8fc7\u91c7\u6837\u7387\u5206\u6563\u8d1f\u8f7d</li> <li>\u5b58\u50a8\u5206\u79bb: \u6027\u80fd\u6570\u636e\u72ec\u7acb\u5b58\u50a8</li> <li>\u5fae\u670d\u52a1\u53cb\u597d: \u53ef\u4ee5\u4f5c\u4e3a\u72ec\u7acb\u670d\u52a1\u90e8\u7f72</li> </ul>"},{"location":"architecture/performance-monitoring-architecture/#_17","title":"\u5b89\u5168\u8bbe\u8ba1","text":""},{"location":"architecture/performance-monitoring-architecture/#1_5","title":"1. \u6570\u636e\u5b89\u5168","text":"<ul> <li>\u654f\u611f\u4fe1\u606f\u8fc7\u6ee4: \u81ea\u52a8\u8fc7\u6ee4\u654f\u611f\u53c2\u6570</li> <li>\u6570\u636e\u52a0\u5bc6: \u4f20\u8f93\u548c\u5b58\u50a8\u52a0\u5bc6</li> <li>\u8bbf\u95ee\u63a7\u5236: \u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236</li> <li>\u5ba1\u8ba1\u65e5\u5fd7: \u8bb0\u5f55\u6240\u6709\u8bbf\u95ee\u64cd\u4f5c</li> </ul>"},{"location":"architecture/performance-monitoring-architecture/#2_5","title":"2. \u9690\u79c1\u4fdd\u62a4","text":"<ul> <li>\u6570\u636e\u8131\u654f: \u81ea\u52a8\u8131\u654f\u654f\u611f\u6570\u636e</li> <li>\u6700\u5c0f\u6743\u9650: \u53ea\u6536\u96c6\u5fc5\u8981\u7684\u6570\u636e</li> <li>\u6570\u636e\u4fdd\u7559: \u5b9a\u671f\u6e05\u7406\u8fc7\u671f\u6570\u636e</li> <li>\u5408\u89c4\u6027: \u7b26\u5408\u6570\u636e\u4fdd\u62a4\u6cd5\u89c4</li> </ul>"},{"location":"architecture/performance-monitoring-architecture/#_18","title":"\u76d1\u63a7\u6307\u6807","text":""},{"location":"architecture/performance-monitoring-architecture/#1_6","title":"1. \u7cfb\u7edf\u5065\u5eb7\u6307\u6807","text":"<ul> <li>\u76d1\u63a7\u7cfb\u7edf\u672c\u8eab\u8d44\u6e90\u4f7f\u7528</li> <li>\u6570\u636e\u91c7\u96c6\u6210\u529f\u7387</li> <li>\u5206\u6790\u5904\u7406\u5ef6\u8fdf</li> <li>\u544a\u8b66\u54cd\u5e94\u65f6\u95f4</li> </ul>"},{"location":"architecture/performance-monitoring-architecture/#2_6","title":"2. \u4e1a\u52a1\u6307\u6807","text":"<ul> <li>API\u6027\u80fd\u8d8b\u52bf</li> <li>\u7528\u6237\u4f53\u9a8c\u6307\u6807</li> <li>\u7cfb\u7edf\u53ef\u7528\u6027</li> <li>\u4e1a\u52a1\u6210\u529f\u7387</li> </ul>"},{"location":"architecture/performance-monitoring-architecture/#_19","title":"\u672a\u6765\u89c4\u5212","text":""},{"location":"architecture/performance-monitoring-architecture/#3","title":"\u77ed\u671f\u76ee\u6807 (3\u4e2a\u6708)","text":"<ul> <li>\u5b8c\u5584\u53ef\u89c6\u5316\u4eea\u8868\u677f</li> <li>\u589e\u52a0\u66f4\u591a\u9884\u5b9a\u4e49\u5206\u6790\u5668</li> <li>\u4f18\u5316\u6027\u80fd\u5f00\u9500</li> <li>\u652f\u6301\u66f4\u591a\u6570\u636e\u5e93\u7c7b\u578b</li> </ul>"},{"location":"architecture/performance-monitoring-architecture/#6","title":"\u4e2d\u671f\u76ee\u6807 (6\u4e2a\u6708)","text":"<ul> <li>\u5b9e\u73b0\u5206\u5e03\u5f0f\u8ffd\u8e2a</li> <li>\u652f\u6301\u5bb9\u5668\u5316\u90e8\u7f72</li> <li>\u96c6\u6210\u673a\u5668\u5b66\u4e60\u9884\u6d4b</li> <li>\u5f00\u53d1\u79fb\u52a8\u7aef\u5e94\u7528</li> </ul>"},{"location":"architecture/performance-monitoring-architecture/#1_7","title":"\u957f\u671f\u76ee\u6807 (1\u5e74)","text":"<ul> <li>\u667a\u80fd\u5316\u8fd0\u7ef4</li> <li>\u81ea\u52a8\u6027\u80fd\u4f18\u5316</li> <li>\u5168\u94fe\u8def\u76d1\u63a7 -\u591a\u4e91\u73af\u5883\u652f\u6301</li> </ul>"},{"location":"data/DATA_COLLECTION_SETUP/","title":"\ud83d\udcca \u8db3\u7403\u6570\u636e\u91c7\u96c6\u914d\u7f6e\u6307\u5357","text":"<p>\u9879\u76ee\u540d\u79f0: \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf (Football Prediction System) \u914d\u7f6e\u7c7b\u578b: \u6570\u636e\u91c7\u96c6API\u8bbe\u7f6e \u66f4\u65b0\u65f6\u95f4: 2025-09-25</p>"},{"location":"data/DATA_COLLECTION_SETUP/#_2","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u652f\u6301\u591a\u79cd\u8db3\u7403\u6570\u636e\u6e90\u7684\u5b9e\u65f6\u91c7\u96c6\uff0c\u5305\u62ec\u8d5b\u7a0b\u3001\u6bd4\u5206\u3001\u8d54\u7387\u7b49\u6570\u636e\u3002\u8981\u5b9e\u73b0\u771f\u5b9e\u7684\u6570\u636e\u91c7\u96c6\uff0c\u9700\u8981\u914d\u7f6e\u76f8\u5e94\u7684API\u5bc6\u94a5\u548c\u670d\u52a1\u3002</p>"},{"location":"data/DATA_COLLECTION_SETUP/#_3","title":"\ud83d\udd27 \u652f\u6301\u7684\u6570\u636e\u6e90","text":"\u6570\u636e\u6e90 \u6570\u636e\u7c7b\u578b API\u63d0\u4f9b\u5546 \u514d\u8d39\u989d\u5ea6 \u8ba4\u8bc1\u65b9\u5f0f Football-Data.org \u8d5b\u7a0b\u3001\u6bd4\u5206\u3001\u7403\u961f\u4fe1\u606f football-data.org 100\u6b21/\u5929 API Key The-Odds-API.com \u8d54\u7387\u6570\u636e\u3001\u535a\u5f69\u516c\u53f8 the-odds-api.com 500\u6b21/\u5929 API Key API-Football \u5168\u9762\u8db3\u7403\u6570\u636e api-football.com 100\u6b21/\u5929 API Key SportsDataIO \u4e13\u4e1a\u4f53\u80b2\u6570\u636e sportsdataio.com \u6709\u9650\u514d\u8d39 API Key"},{"location":"data/DATA_COLLECTION_SETUP/#api","title":"\ud83d\udd11 API\u5bc6\u94a5\u914d\u7f6e","text":""},{"location":"data/DATA_COLLECTION_SETUP/#1-football-dataorg","title":"1. Football-Data.org \u914d\u7f6e","text":""},{"location":"data/DATA_COLLECTION_SETUP/#api_1","title":"\u6ce8\u518c\u548c\u83b7\u53d6API\u5bc6\u94a5","text":"<ol> <li>\u8bbf\u95ee https://www.football-data.org/</li> <li>\u70b9\u51fb \"Sign Up\" \u6ce8\u518c\u8d26\u6237</li> <li>\u9a8c\u8bc1\u90ae\u7bb1\u540e\u767b\u5f55</li> <li>\u5728\u8d26\u6237\u9875\u9762\u627e\u5230API\u5bc6\u94a5</li> </ol>"},{"location":"data/DATA_COLLECTION_SETUP/#_4","title":"\u73af\u5883\u53d8\u91cf\u914d\u7f6e","text":"<pre><code># \u5728 .env.staging \u6216 .env \u6587\u4ef6\u4e2d\u6dfb\u52a0\nFOOTBALL_DATA_API_KEY=your_actual_api_key_here\nFOOTBALL_DATA_API_URL=https://api.football-data.org/v4\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#api_2","title":"API\u9650\u5236\u548c\u7279\u6027","text":"<ul> <li>\u514d\u8d39\u989d\u5ea6: \u6bcf\u65e5100\u6b21API\u8c03\u7528</li> <li>\u4ed8\u8d39\u8ba1\u5212: \u20ac10/\u6708 \u65e0\u9650\u5236\u8c03\u7528</li> <li>\u6570\u636e\u8986\u76d6: 200+\u8054\u8d5b\uff0c\u5b9e\u65f6\u6bd4\u5206</li> <li>\u66f4\u65b0\u9891\u7387: \u5b9e\u65f6\u66f4\u65b0</li> <li>\u652f\u6301\u683c\u5f0f: JSON</li> </ul>"},{"location":"data/DATA_COLLECTION_SETUP/#_5","title":"\u4f7f\u7528\u793a\u4f8b","text":"<pre><code># \u6d4b\u8bd5API\u8fde\u63a5\nimport requests\n\napi_key = \"your_api_key_here\"\nheaders = {\"X-Auth-Token\": api_key}\nurl = \"https://api.football-data.org/v4/competitions/PL/matches\"\n\nresponse = requests.get(url, headers=headers)\nprint(response.json())\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#2-the-odds-apicom","title":"2. The-Odds-API.com \u914d\u7f6e","text":""},{"location":"data/DATA_COLLECTION_SETUP/#api_3","title":"\u6ce8\u518c\u548c\u83b7\u53d6API\u5bc6\u94a5","text":"<ol> <li>\u8bbf\u95ee https://the-odds-api.com/</li> <li>\u6ce8\u518c\u514d\u8d39\u8d26\u6237</li> <li>\u767b\u5f55\u540e\u5728Dashboard\u83b7\u53d6API\u5bc6\u94a5</li> <li>\u9009\u62e9\u9700\u8981\u7684\u8ba2\u9605\u8ba1\u5212</li> </ol>"},{"location":"data/DATA_COLLECTION_SETUP/#_6","title":"\u73af\u5883\u53d8\u91cf\u914d\u7f6e","text":"<pre><code># \u5728 .env.staging \u6216 .env \u6587\u4ef6\u4e2d\u6dfb\u52a0\nODDS_API_KEY=your_actual_odds_api_key_here\nODDS_API_URL=https://api.the-odds-api.com/v4\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#api_4","title":"API\u9650\u5236\u548c\u7279\u6027","text":"<ul> <li>\u514d\u8d39\u989d\u5ea6: \u6bcf\u65e5500\u6b21API\u8c03\u7528</li> <li>\u4ed8\u8d39\u8ba1\u5212: $10/\u6708 25,000\u6b21\u8c03\u7528</li> <li>\u6570\u636e\u8986\u76d6: 30+\u535a\u5f69\u516c\u53f8\uff0c\u8d54\u7387\u5386\u53f2</li> <li>\u66f4\u65b0\u9891\u7387: \u6bcf5\u5206\u949f\u66f4\u65b0</li> <li>\u652f\u6301\u5e02\u573a: 1x2\u3001\u8ba9\u7403\u3001\u5927\u5c0f\u7403\u7b49</li> </ul>"},{"location":"data/DATA_COLLECTION_SETUP/#_7","title":"\u4f7f\u7528\u793a\u4f8b","text":"<pre><code># \u6d4b\u8bd5API\u8fde\u63a5\nimport requests\n\napi_key = \"your_odds_api_key_here\"\nurl = f\"https://api.the-odds-api.com/v4/sports/soccer_epl/odds/?apiKey={api_key}&amp;regions=uk&amp;markets=h2h,spreads,totals\"\n\nresponse = requests.get(url)\nprint(response.json())\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#3","title":"3. \u53ef\u9009\u6570\u636e\u6e90\u914d\u7f6e","text":""},{"location":"data/DATA_COLLECTION_SETUP/#api-football","title":"API-Football (\u5907\u7528\u6570\u636e\u6e90)","text":"<pre><code># \u73af\u5883\u53d8\u91cf\u914d\u7f6e\nAPI_FOOTBALL_KEY=your_api_football_key\nAPI_FOOTBALL_URL=https://v3.football.api-sports.io\n\n# \u7279\u6027\n- \u514d\u8d39\u989d\u5ea6: \u6bcf\u65e5100\u6b21\u8c03\u7528\n- \u8986\u76d6: 1000+\u8054\u8d5b\n- \u6570\u636e: \u8d5b\u7a0b\u3001\u6bd4\u5206\u3001\u7edf\u8ba1\u3001\u4f24\u75c5\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#sportsdataio","title":"SportsDataIO (\u4e13\u4e1a\u6570\u636e\u6e90)","text":"<pre><code># \u73af\u5883\u53d8\u91cf\u914d\u7f6e\nSPORTSDATAIO_KEY=your_sportsdataio_key\nSPORTSDATAIO_URL=https://api.sportsdata.io\n\n# \u7279\u6027\n- \u514d\u8d39\u989d\u5ea6: \u6709\u9650\u514d\u8d39\u8c03\u7528\n- \u8986\u76d6: \u4e3b\u8981\u8054\u8d5b\n- \u6570\u636e: \u4e13\u4e1a\u7ea7\u6570\u636e\u548c\u5206\u6790\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#_8","title":"\ud83d\udd27 \u7cfb\u7edf\u914d\u7f6e\u6b65\u9aa4","text":""},{"location":"data/DATA_COLLECTION_SETUP/#1-api","title":"\u6b65\u9aa41: \u83b7\u53d6API\u5bc6\u94a5","text":""},{"location":"data/DATA_COLLECTION_SETUP/#_9","title":"\u63a8\u8350\u65b9\u6848 (\u514d\u8d39\u5f00\u53d1)","text":"<pre><code># 1. Football-Data.org (\u4e3b\u8981\u7528\u4e8e\u8d5b\u7a0b\u548c\u6bd4\u5206)\nFOOTBALL_DATA_API_KEY=your_free_key_here\n\n# 2. The-Odds-API.com (\u4e3b\u8981\u7528\u4e8e\u8d54\u7387\u6570\u636e)\nODDS_API_KEY=your_free_odds_key_here\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#_10","title":"\u9ad8\u7ea7\u65b9\u6848 (\u4ed8\u8d39\u751f\u4ea7)","text":"<pre><code># 1. Football-Data.org \u4ed8\u8d39\u7248 (\u20ac10/\u6708)\n# \u65e0\u9650\u5236\u8c03\u7528\uff0c\u5b9e\u65f6\u6570\u636e\n\n# 2. The-Odds-API.com \u4ed8\u8d39\u7248 ($10/\u6708)\n# 25,000\u6b21\u8c03\u7528/\u6708\uff0c\u66f4\u591a\u535a\u5f69\u516c\u53f8\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#2","title":"\u6b65\u9aa42: \u914d\u7f6e\u73af\u5883\u53d8\u91cf","text":""},{"location":"data/DATA_COLLECTION_SETUP/#envstaging","title":"\u66f4\u65b0 .env.staging \u6587\u4ef6","text":"<pre><code># \u8db3\u7403\u6570\u636eAPI\u914d\u7f6e\nFOOTBALL_DATA_API_KEY=your_actual_api_key_here\nFOOTBALL_DATA_API_URL=https://api.football-data.org/v4\n\nODDS_API_KEY=your_actual_odds_api_key_here\nODDS_API_URL=https://api.the-odds-api.com/v4\n\n# API\u8c03\u7528\u914d\u7f6e\nAPI_REQUEST_TIMEOUT=30\nAPI_RATE_LIMIT_DELAY=1\nAPI_RETRY_COUNT=3\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#envproduction","title":"\u521b\u5efa\u751f\u4ea7\u73af\u5883\u914d\u7f6e (.env.production)","text":"<pre><code># \u751f\u4ea7\u73af\u5883\u914d\u7f6e\u793a\u4f8b\nFOOTBALL_DATA_API_KEY=production_api_key_here\nODDS_API_KEY=production_odds_key_here\n\n# \u751f\u4ea7\u73af\u5883\u66f4\u4e25\u683c\u7684\u9650\u5236\nAPI_REQUEST_TIMEOUT=10\nAPI_RATE_LIMIT_DELAY=0.5\nAPI_RETRY_COUNT=2\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#3_1","title":"\u6b65\u9aa43: \u9a8c\u8bc1\u914d\u7f6e","text":""},{"location":"data/DATA_COLLECTION_SETUP/#api_5","title":"\u6d4b\u8bd5API\u8fde\u63a5","text":"<pre><code># \u521b\u5efa\u6d4b\u8bd5\u811a\u672c test_api_connection.py\nimport os\nimport asyncio\nimport aiohttp\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\nasync def test_football_data_api():\n    \"\"\"\u6d4b\u8bd5Football Data API\u8fde\u63a5\"\"\"\n    api_key = os.getenv('FOOTBALL_DATA_API_KEY')\n    if not api_key:\n        print(\"\u274c FOOTBALL_DATA_API_KEY not configured\")\n        return False\n\n    headers = {\"X-Auth-Token\": api_key}\n    url = \"https://api.football-data.org/v4/competitions\"\n\n    try:\n        async with aiohttp.ClientSession() as session:\n            async with session.get(url, headers=headers) as response:\n                if response.status == 200:\n                    data = await response.json()\n                    print(f\"\u2705 Football Data API connected successfully\")\n                    print(f\"   Available competitions: {len(data.get('competitions', []))}\")\n                    return True\n                else:\n                    print(f\"\u274c Football Data API error: {response.status}\")\n                    return False\n    except Exception as e:\n        print(f\"\u274c Football Data API connection failed: {e}\")\n        return False\n\nasync def test_odds_api():\n    \"\"\"\u6d4b\u8bd5The Odds API\u8fde\u63a5\"\"\"\n    api_key = os.getenv('ODDS_API_KEY')\n    if not api_key:\n        print(\"\u274c ODDS_API_KEY not configured\")\n        return False\n\n    url = f\"https://api.the-odds-api.com/v4/sports/soccer_epl/odds/?apiKey={api_key}&amp;regions=uk\"\n\n    try:\n        async with aiohttp.ClientSession() as session:\n            async with session.get(url) as response:\n                if response.status == 200:\n                    data = await response.json()\n                    print(f\"\u2705 The Odds API connected successfully\")\n                    print(f\"   Available matches: {len(data) if isinstance(data, list) else 0}\")\n                    return True\n                else:\n                    print(f\"\u274c The Odds API error: {response.status}\")\n                    return False\n    except Exception as e:\n        print(f\"\u274c The Odds API connection failed: {e}\")\n        return False\n\nasync def main():\n    \"\"\"\u4e3b\u6d4b\u8bd5\u51fd\u6570\"\"\"\n    print(\"\ud83d\udd0d Testing API connections...\\n\")\n\n    football_result = await test_football_data_api()\n    odds_result = await test_odds_api()\n\n    print(f\"\\n\ud83d\udcca Test Results:\")\n    print(f\"   Football Data API: {'\u2705' if football_result else '\u274c'}\")\n    print(f\"   The Odds API: {'\u2705' if odds_result else '\u274c'}\")\n\n    if football_result and odds_result:\n        print(\"\\n\ud83c\udf89 All APIs are working! You can start real data collection.\")\n    else:\n        print(\"\\n\u26a0\ufe0f  Some APIs need configuration. Please check your API keys.\")\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#4","title":"\u6b65\u9aa44: \u8fd0\u884c\u6570\u636e\u91c7\u96c6\u4efb\u52a1","text":""},{"location":"data/DATA_COLLECTION_SETUP/#_11","title":"\u624b\u52a8\u6d4b\u8bd5\u91c7\u96c6","text":"<pre><code># \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nsource .venv/bin/activate\n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nexport PYTHONPATH=\"$(pwd):${PYTHONPATH}\"\n\n# \u8fd0\u884c\u6d4b\u8bd5\u811a\u672c\npython test_api_connection.py\n\n# \u8fd0\u884c\u5355\u4e2a\u91c7\u96c6\u4efb\u52a1\npython -m celery -A src.tasks worker -l info -Q fixtures -P solo\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#_12","title":"\u542f\u52a8\u5b9a\u65f6\u91c7\u96c6","text":"<pre><code># \u542f\u52a8Celery Beat\u548cWorker\npython -m celery -A src.tasks beat --loglevel=info\npython -m celery -A src.tasks worker --loglevel=info\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#_13","title":"\ud83d\udcca \u91c7\u96c6\u4efb\u52a1\u914d\u7f6e","text":""},{"location":"data/DATA_COLLECTION_SETUP/#_14","title":"\u4efb\u52a1\u7c7b\u578b\u548c\u8c03\u5ea6","text":"\u4efb\u52a1\u7c7b\u578b \u6267\u884c\u9891\u7387 \u6570\u636e\u6e90 \u7528\u9014 collect_fixtures_task \u6bcf\u65e51\u6b21 Football-Data.org \u91c7\u96c6\u672a\u6765\u8d5b\u7a0b collect_odds_task \u6bcf\u5c0f\u65f61\u6b21 The-Odds-API \u91c7\u96c6\u8d54\u7387\u53d8\u5316 collect_scores_task \u5b9e\u65f6/\u6bcf5\u5206\u949f Football-Data.org \u91c7\u96c6\u5b9e\u65f6\u6bd4\u5206"},{"location":"data/DATA_COLLECTION_SETUP/#_15","title":"\u81ea\u5b9a\u4e49\u914d\u7f6e\u793a\u4f8b","text":""},{"location":"data/DATA_COLLECTION_SETUP/#srctasksbeat_schedulepy","title":"\u4fee\u6539\u91c7\u96c6\u9891\u7387 (src/tasks/beat_schedule.py)","text":"<pre><code># \u5728 beat_schedule \u4e2d\u4fee\u6539\nbeat_schedule = {\n    'collect-daily-fixtures': {\n        'task': 'tasks.data_collection_tasks.collect_fixtures_task',\n        'schedule': crontab(minute=0, hour=8),  # \u6bcf\u59298\u70b9\n        'options': {'leagues': ['PL', 'BL', 'SA'], 'days_ahead': 7}\n    },\n    'collect-odds-regular': {\n        'task': 'tasks.data_collection_tasks.collect_odds_task',\n        'schedule': crontab(minute=0, '*/1'),  # \u6bcf\u5c0f\u65f6\n        'options': {'bookmakers': ['bet365', 'williamhill']}\n    },\n    'collect-live-scores': {\n        'task': 'tasks.data_collection_tasks.collect_scores_task',\n        'schedule': crontab(minute='*/5'),  # \u6bcf5\u5206\u949f\n        'options': {'live_only': True}\n    },\n}\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#_16","title":"\ud83d\udea8 \u5e38\u89c1\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848","text":""},{"location":"data/DATA_COLLECTION_SETUP/#1-api_1","title":"\u95ee\u98981: API\u8c03\u7528\u9891\u7387\u9650\u5236","text":"<p>\u9519\u8bef\u4fe1\u606f:</p> <pre><code>429 Too Many Requests\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># \u589e\u52a0API\u8c03\u7528\u95f4\u9694\nAPI_RATE_LIMIT_DELAY=2  # \u4ece1\u79d2\u589e\u52a0\u52302\u79d2\n\n# \u51cf\u5c11\u91c7\u96c6\u9891\u7387\n# \u4fee\u6539beat_schedule\u4e2d\u7684\u6267\u884c\u95f4\u9694\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#2-api","title":"\u95ee\u98982: API\u5bc6\u94a5\u65e0\u6548","text":"<p>\u9519\u8bef\u4fe1\u606f:</p> <pre><code>401 Unauthorized\n403 Forbidden\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># \u68c0\u67e5API\u5bc6\u94a5\u662f\u5426\u6b63\u786e\necho $FOOTBALL_DATA_API_KEY\n\n# \u91cd\u65b0\u751f\u6210API\u5bc6\u94a5\n# \u767b\u5f55\u76f8\u5e94\u7684API\u63d0\u4f9b\u5546\u7f51\u7ad9\u91cd\u65b0\u83b7\u53d6\u5bc6\u94a5\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#3_2","title":"\u95ee\u98983: \u7f51\u7edc\u8fde\u63a5\u95ee\u9898","text":"<p>\u9519\u8bef\u4fe1\u606f:</p> <pre><code>ConnectionError: Failed to establish connection\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\nping api.football-data.org\n\n# \u589e\u52a0\u8d85\u65f6\u65f6\u95f4\nAPI_REQUEST_TIMEOUT=60  # \u4ece30\u79d2\u589e\u52a0\u523060\u79d2\n\n# \u914d\u7f6e\u4ee3\u7406\uff08\u5982\u679c\u9700\u8981\uff09\nHTTP_PROXY=http://proxy.example.com:8080\nHTTPS_PROXY=http://proxy.example.com:8080\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#4_1","title":"\u95ee\u98984: \u6570\u636e\u683c\u5f0f\u53d8\u5316","text":"<p>\u9519\u8bef\u4fe1\u606f:</p> <pre><code>KeyError: 'matches'\nJSONDecodeError\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># \u5728\u6570\u636e\u91c7\u96c6\u5668\u4e2d\u6dfb\u52a0\u9519\u8bef\u5904\u7406\ntry:\n    data = await response.json()\n    matches = data.get('matches', [])\n    if not matches:\n        self.logger.warning(\"No matches found in response\")\nexcept Exception as e:\n    self.logger.error(f\"Data parsing error: {e}\")\n    return CollectionResult(status=\"error\", error_count=1)\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#_17","title":"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5\u5efa\u8bae","text":""},{"location":"data/DATA_COLLECTION_SETUP/#1-api_2","title":"1. API\u5bc6\u94a5\u7ba1\u7406","text":""},{"location":"data/DATA_COLLECTION_SETUP/#_18","title":"\u5b89\u5168\u5b58\u50a8","text":"<pre><code># \u4f7f\u7528\u73af\u5883\u53d8\u91cf\uff0c\u4e0d\u8981\u786c\u7f16\u7801\u5728\u4ee3\u7801\u4e2d\n# \u4e0d\u8981\u5c06API\u5bc6\u94a5\u63d0\u4ea4\u5230\u7248\u672c\u63a7\u5236\n# \u5b9a\u671f\u8f6e\u6362API\u5bc6\u94a5\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#_19","title":"\u914d\u7f6e\u5206\u79bb","text":"<pre><code># \u5f00\u53d1\u73af\u5883\u4f7f\u7528\u6d4b\u8bd5\u5bc6\u94a5\n# \u751f\u4ea7\u73af\u5883\u4f7f\u7528\u4ed8\u8d39\u5bc6\u94a5\n# \u4e0d\u540c\u73af\u5883\u4f7f\u7528\u4e0d\u540c\u7684\u914d\u7f6e\u6587\u4ef6\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#2_1","title":"2. \u9519\u8bef\u5904\u7406\u548c\u91cd\u8bd5","text":""},{"location":"data/DATA_COLLECTION_SETUP/#_20","title":"\u6307\u6570\u9000\u907f\u91cd\u8bd5","text":"<pre><code>async def fetch_with_retry(url, headers, max_retries=3):\n    \"\"\"\u5e26\u91cd\u8bd5\u673a\u5236\u7684\u6570\u636e\u83b7\u53d6\"\"\"\n    for attempt in range(max_retries):\n        try:\n            async with aiohttp.ClientSession() as session:\n                async with session.get(url, headers=headers) as response:\n                    if response.status == 200:\n                        return await response.json()\n                    elif response.status == 429:\n                        wait_time = 2 ** attempt  # \u6307\u6570\u9000\u907f\n                        await asyncio.sleep(wait_time)\n                    else:\n                        response.raise_for_status()\n        except Exception as e:\n            if attempt == max_retries - 1:\n                raise e\n            await asyncio.sleep(2 ** attempt)\n    return None\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#3_3","title":"3. \u6570\u636e\u9a8c\u8bc1","text":""},{"location":"data/DATA_COLLECTION_SETUP/#_21","title":"\u6570\u636e\u8d28\u91cf\u68c0\u67e5","text":"<pre><code>def validate_fixture_data(fixture):\n    \"\"\"\u9a8c\u8bc1\u8d5b\u7a0b\u6570\u636e\u8d28\u91cf\"\"\"\n    required_fields = ['id', 'homeTeam', 'awayTeam', 'utcDate']\n    return all(field in fixture for field in required_fields)\n\ndef validate_odds_data(odds):\n    \"\"\"\u9a8c\u8bc1\u8d54\u7387\u6570\u636e\u8d28\u91cf\"\"\"\n    required_fields = ['match_id', 'bookmaker', 'market', 'odds']\n    return all(field in odds for field in required_fields)\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#4_2","title":"4. \u6210\u672c\u63a7\u5236","text":""},{"location":"data/DATA_COLLECTION_SETUP/#api_6","title":"API\u8c03\u7528\u76d1\u63a7","text":"<pre><code># \u8bb0\u5f55API\u8c03\u7528\u6b21\u6570\u548c\u6210\u672c\nclass APICallTracker:\n    def __init__(self, daily_limit=1000):\n        self.daily_calls = 0\n        self.daily_limit = daily_limit\n\n    def can_make_call(self):\n        return self.daily_calls &lt; self.daily_limit\n\n    def record_call(self):\n        self.daily_calls += 1\n\n    def get_usage_percentage(self):\n        return (self.daily_calls / self.daily_limit) * 100\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#_22","title":"\ud83d\udcc8 \u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":""},{"location":"data/DATA_COLLECTION_SETUP/#1","title":"1. \u7f13\u5b58\u7b56\u7565","text":""},{"location":"data/DATA_COLLECTION_SETUP/#redis","title":"Redis\u7f13\u5b58\u914d\u7f6e","text":"<pre><code># \u914d\u7f6eRedis\u7f13\u5b58API\u54cd\u5e94\nCACHE_TTL = 300  # 5\u5206\u949f\u7f13\u5b58\nCACHE_PREFIX = \"football_api:\"\n\nasync def get_cached_data(key, fetch_func, ttl=CACHE_TTL):\n    \"\"\"\u83b7\u53d6\u7f13\u5b58\u6570\u636e\u6216\u4eceAPI\u83b7\u53d6\"\"\"\n    cached_data = await redis.get(f\"{CACHE_PREFIX}{key}\")\n    if cached_data:\n        return json.loads(cached_data)\n\n    data = await fetch_func()\n    await redis.setex(f\"{CACHE_PREFIX}{key}\", ttl, json.dumps(data))\n    return data\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#2_2","title":"2. \u6279\u91cf\u5904\u7406","text":""},{"location":"data/DATA_COLLECTION_SETUP/#api_7","title":"\u6279\u91cfAPI\u8c03\u7528","text":"<pre><code>async def batch_collect_fixtures(league_list):\n    \"\"\"\u6279\u91cf\u91c7\u96c6\u591a\u4e2a\u8054\u8d5b\u7684\u6570\u636e\"\"\"\n    tasks = []\n    for league in league_list:\n        task = collect_fixtures_for_league(league)\n        tasks.append(task)\n\n    results = await asyncio.gather(*tasks, return_exceptions=True)\n    return [r for r in results if not isinstance(r, Exception)]\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#3_4","title":"3. \u5f02\u6b65\u4f18\u5316","text":""},{"location":"data/DATA_COLLECTION_SETUP/#_23","title":"\u5e76\u53d1\u63a7\u5236","text":"<pre><code>import asyncio\nfrom aiohttp import ClientSession, ClientTimeout\n\nclass AsyncDataCollector:\n    def __init__(self, max_concurrent=10):\n        self.semaphore = asyncio.Semaphore(max_concurrent)\n        self.timeout = ClientTimeout(total=30)\n\n    async def collect_with_semaphore(self, url, headers):\n        async with self.semaphore:\n            async with ClientSession(timeout=self.timeout) as session:\n                async with session.get(url, headers=headers) as response:\n                    return await response.json()\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#_24","title":"\ud83d\udd04 \u76d1\u63a7\u548c\u7ef4\u62a4","text":""},{"location":"data/DATA_COLLECTION_SETUP/#1_1","title":"1. \u91c7\u96c6\u4efb\u52a1\u76d1\u63a7","text":""},{"location":"data/DATA_COLLECTION_SETUP/#_25","title":"\u76d1\u63a7\u6307\u6807","text":"<pre><code># \u5173\u952e\u76d1\u63a7\u6307\u6807\nCOLLECTION_METRICS = {\n    'api_calls_total': Counter('api_calls_total', 'Total API calls'),\n    'api_errors_total': Counter('api_errors_total', 'Total API errors'),\n    'collection_duration': Histogram('collection_duration_seconds', 'Collection duration'),\n    'data_quality_score': Gauge('data_quality_score', 'Data quality score')\n}\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#2_3","title":"2. \u544a\u8b66\u914d\u7f6e","text":""},{"location":"data/DATA_COLLECTION_SETUP/#_26","title":"\u544a\u8b66\u89c4\u5219","text":"<pre><code># Prometheus\u544a\u8b66\u89c4\u5219\ngroups:\n- name: data_collection\n  rules:\n  - alert: HighAPIErrorRate\n    expr: rate(api_errors_total[5m]) / rate(api_calls_total[5m]) &gt; 0.1\n    for: 5m\n    labels:\n      severity: warning\n    annotations:\n      summary: \"High API error rate detected\"\n\n  - alert: LowDataQuality\n    expr: data_quality_score &lt; 0.8\n    for: 10m\n    labels:\n      severity: critical\n    annotations:\n      summary: \"Low data quality detected\"\n</code></pre>"},{"location":"data/DATA_COLLECTION_SETUP/#_27","title":"\ud83d\udcde \u6280\u672f\u652f\u6301","text":""},{"location":"data/DATA_COLLECTION_SETUP/#api_8","title":"API\u63d0\u4f9b\u5546\u652f\u6301","text":"\u670d\u52a1 \u652f\u6301\u7f51\u7ad9 \u6587\u6863 \u72b6\u6001\u9875\u9762 Football-Data.org https://www.football-data.org/ API Docs Status Page The-Odds-API.com https://the-odds-api.com/ API Docs Status Page API-Football https://api-football.com/ API Docs Status Page"},{"location":"data/DATA_COLLECTION_SETUP/#_28","title":"\u5e38\u89c1\u95ee\u9898\u8d44\u6e90","text":"<ol> <li>API\u6587\u6863:</li> <li>Football-Data.org: https://www.football-data.org/documentation</li> <li> <p>The-Odds-API: https://the-odds-api.com/liveapidocs</p> </li> <li> <p>\u793e\u533a\u652f\u6301:</p> </li> <li>Stack Overflow</li> <li>Reddit r/sportsdata</li> <li> <p>GitHub Issues</p> </li> <li> <p>\u5de5\u5177\u63a8\u8350:</p> </li> <li>Postman (API\u6d4b\u8bd5)</li> <li>Insomnia (API\u8c03\u8bd5)</li> <li>Prometheus (\u76d1\u63a7)</li> </ol> <p>\u914d\u7f6e\u6307\u5357\u5b8c\u6210\u65f6\u95f4: 2025-09-25 \u6307\u5357\u7248\u672c: v1.0 \u9002\u7528\u7248\u672c: \u6240\u6709\u7248\u672c</p> <p>\u672c\u914d\u7f6e\u6307\u5357\u63d0\u4f9b\u4e86\u8db3\u7403\u6570\u636e\u91c7\u96c6\u7684\u5b8c\u6574\u8bbe\u7f6e\u8bf4\u660e\uff0c\u5305\u62ecAPI\u5bc6\u94a5\u83b7\u53d6\u3001\u73af\u5883\u914d\u7f6e\u3001\u6d4b\u8bd5\u9a8c\u8bc1\u548c\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"development/type-safety-standards/","title":"\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u7c7b\u578b\u5b89\u5168\u6807\u51c6","text":""},{"location":"development/type-safety-standards/#_2","title":"\u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u5b9a\u4e49\u4e86\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u7684\u7c7b\u578b\u5b89\u5168\u6807\u51c6\uff0c\u786e\u4fdd\u4ee3\u7801\u8d28\u91cf\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"development/type-safety-standards/#_3","title":"\u6838\u5fc3\u539f\u5219","text":""},{"location":"development/type-safety-standards/#1","title":"1. \u7c7b\u578b\u6ce8\u89e3\u8981\u6c42","text":"<ul> <li>\u6240\u6709\u516c\u5171\u51fd\u6570\u5fc5\u987b\u5305\u542b\u5b8c\u6574\u7684\u7c7b\u578b\u6ce8\u89e3</li> <li>\u7c7b\u65b9\u6cd5\u5fc5\u987b\u5305\u542b\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7c7b\u578b\u6ce8\u89e3</li> <li>\u53d8\u91cf\u5728\u590d\u6742\u60c5\u51b5\u4e0b\u5e94\u5305\u542b\u7c7b\u578b\u6ce8\u89e3</li> <li>Optional\u7c7b\u578b\u5fc5\u987b\u660e\u786e\u6807\u6ce8\u53ef\u80fd\u4e3aNone\u7684\u60c5\u51b5</li> </ul>"},{"location":"development/type-safety-standards/#2","title":"2. \u5bfc\u5165\u6807\u51c6","text":"<pre><code># \u63a8\u8350\u7684typing\u5bfc\u5165\u987a\u5e8f\nfrom typing import (\n    Optional,  # \u7528\u4e8e\u53ef\u80fd\u4e3aNone\u7684\u503c\n    Union,     # \u7528\u4e8e\u591a\u79cd\u7c7b\u578b\n    List,      # \u7528\u4e8e\u5217\u8868\n    Dict,      # \u7528\u4e8e\u5b57\u5178\n    Tuple,     # \u7528\u4e8e\u5143\u7ec4\n    Any,       # \u4ec5\u5728\u5fc5\u8981\u65f6\u4f7f\u7528\n)\n</code></pre>"},{"location":"development/type-safety-standards/#3","title":"3. \u51fd\u6570\u7b7e\u540d\u6807\u51c6","text":"<pre><code># \u2705 \u6b63\u786e\u793a\u4f8b\ndef process_prediction(\n    match_id: int,\n    team_data: Dict[str, Any],\n    include_features: bool = False\n) -&gt; Optional[Dict[str, float]]:\n    \"\"\"\u5904\u7406\u6bd4\u8d5b\u9884\u6d4b\u6570\u636e\"\"\"\n    pass\n\n# \u274c \u9519\u8bef\u793a\u4f8b\ndef process_prediction(match_id, team_data, include_features=False):\n    \"\"\"\u5904\u7406\u6bd4\u8d5b\u9884\u6d4b\u6570\u636e\"\"\"\n    pass\n</code></pre>"},{"location":"development/type-safety-standards/#4","title":"4. \u9519\u8bef\u5904\u7406\u6807\u51c6","text":"<pre><code># \u2705 \u6b63\u786e\u7684\u9519\u8bef\u5904\u7406\ndef safe_divide(a: float, b: float) -&gt; Optional[float]:\n    \"\"\"\u5b89\u5168\u9664\u6cd5\u64cd\u4f5c\"\"\"\n    if b == 0:\n        return None\n    return a / b\n\n# \u274c \u9519\u8bef\uff1a\u4e0d\u5904\u7406None\u60c5\u51b5\ndef safe_divide(a: float, b: float) -&gt; float:\n    \"\"\"\u5b89\u5168\u9664\u6cd5\u64cd\u4f5c\"\"\"\n    return a / b  # \u53ef\u80fd\u629b\u51faZeroDivisionError\n</code></pre>"},{"location":"development/type-safety-standards/#_4","title":"\u5177\u4f53\u89c4\u8303","text":""},{"location":"development/type-safety-standards/#1_1","title":"1. \u57fa\u7840\u7c7b\u578b\u4f7f\u7528","text":""},{"location":"development/type-safety-standards/#_5","title":"\u5b57\u7b26\u4e32\u5904\u7406","text":"<pre><code>def format_team_name(name: Optional[str]) -&gt; str:\n    \"\"\"\u683c\u5f0f\u5316\u7403\u961f\u540d\u79f0\"\"\"\n    if name is None:\n        return \"Unknown\"\n    return name.strip().title()\n</code></pre>"},{"location":"development/type-safety-standards/#_6","title":"\u6570\u503c\u5904\u7406","text":"<pre><code>def calculate_win_probability(\n    home_score: float,\n    away_score: float\n) -&gt; float:\n    \"\"\"\u8ba1\u7b97\u80dc\u7387\u6982\u7387\"\"\"\n    total = home_score + away_score\n    if total == 0:\n        return 0.5  # \u9ed8\u8ba4\u5e73\u5c40\u6982\u7387\n    return home_score / total\n</code></pre>"},{"location":"development/type-safety-standards/#_7","title":"\u96c6\u5408\u7c7b\u578b","text":"<pre><code>def get_active_teams(\n    league_id: int,\n    season: Optional[int] = None\n) -&gt; List[Dict[str, Any]]:\n    \"\"\"\u83b7\u53d6\u6d3b\u8dc3\u7403\u961f\u5217\u8868\"\"\"\n    return []\n</code></pre>"},{"location":"development/type-safety-standards/#2_1","title":"2. \u590d\u6742\u7c7b\u578b\u793a\u4f8b","text":""},{"location":"development/type-safety-standards/#_8","title":"\u5d4c\u5957\u7ed3\u6784","text":"<pre><code>from typing import TypedDict\n\nclass MatchResult(TypedDict):\n    \"\"\"\u6bd4\u8d5b\u7ed3\u679c\u7c7b\u578b\u5b9a\u4e49\"\"\"\n    match_id: int\n    home_score: int\n    away_score: int\n    winner: Optional[str]\n    timestamp: str\n\ndef process_match_results(\n    matches: List[Dict[str, Any]]\n) -&gt; List[MatchResult]:\n    \"\"\"\u5904\u7406\u6bd4\u8d5b\u7ed3\u679c\"\"\"\n    pass\n</code></pre>"},{"location":"development/type-safety-standards/#_9","title":"\u56de\u8c03\u51fd\u6570","text":"<pre><code>from typing import Callable, Any\n\ndef register_prediction_handler(\n    handler: Callable[[Dict[str, Any]], bool]\n) -&gt; None:\n    \"\"\"\u6ce8\u518c\u9884\u6d4b\u5904\u7406\u5668\"\"\"\n    pass\n</code></pre>"},{"location":"development/type-safety-standards/#3_1","title":"3. \u7c7b\u5b9a\u4e49\u6807\u51c6","text":"<pre><code>from typing import ClassVar\n\nclass PredictionService:\n    \"\"\"\u9884\u6d4b\u670d\u52a1\u7c7b\"\"\"\n\n    def __init__(\n        self,\n        model_path: str,\n        config: Dict[str, Any],\n        cache_enabled: bool = True\n    ) -&gt; None:\n        self.model_path = model_path\n        self.config = config\n        self.cache_enabled = cache_enabled\n\n    def predict(\n        self,\n        match_data: Dict[str, Any]\n    ) -&gt; Optional[Dict[str, float]]:\n        \"\"\"\u6267\u884c\u9884\u6d4b\"\"\"\n        if not self._validate_input(match_data):\n            return None\n        return self._run_prediction(match_data)\n\n    def _validate_input(self, data: Dict[str, Any]) -&gt; bool:\n        \"\"\"\u9a8c\u8bc1\u8f93\u5165\u6570\u636e\"\"\"\n        required_keys = [\"home_team\", \"away_team\", \"match_date\"]\n        return all(key in data for key in required_keys)\n\n    def _run_prediction(self, data: Dict[str, Any]) -&gt; Dict[str, float]:\n        \"\"\"\u6267\u884c\u5b9e\u9645\u9884\u6d4b\u903b\u8f91\"\"\"\n        return {\"home_win\": 0.6, \"draw\": 0.25, \"away_win\": 0.15}\n</code></pre>"},{"location":"development/type-safety-standards/#mypy","title":"MyPy\u914d\u7f6e","text":""},{"location":"development/type-safety-standards/#1_2","title":"1. \u4e25\u683c\u6a21\u5f0f\u8bbe\u7f6e","text":"<pre><code>[mypy]\npython_version = 3.11\nstrict = True\nwarn_return_any = True\nwarn_unused_configs = True\ndisallow_untyped_defs = True\ndisallow_incomplete_defs = True\ncheck_untyped_defs = True\ndisallow_untyped_decorators = True\nno_implicit_optional = True\nwarn_redundant_casts = True\nwarn_unused_ignores = True\nwarn_no_return = True\nwarn_unreachable = True\nstrict_equality = True\n</code></pre>"},{"location":"development/type-safety-standards/#2_2","title":"2. \u7279\u5b9a\u6a21\u5757\u914d\u7f6e","text":"<pre><code>[mypy-tests.*]\ndisallow_untyped_defs = False\n\n[mypy-migrations.*]\nignore_errors = True\n\n[mypy-external_libs.*]\nignore_missing_imports = True\n</code></pre>"},{"location":"development/type-safety-standards/#_10","title":"\u4ee3\u7801\u5ba1\u67e5\u6e05\u5355","text":""},{"location":"development/type-safety-standards/#1_3","title":"1. \u51fd\u6570\u7ea7\u522b\u68c0\u67e5","text":"<ul> <li> \u6240\u6709\u53c2\u6570\u90fd\u6709\u7c7b\u578b\u6ce8\u89e3</li> <li> \u8fd4\u56de\u503c\u7c7b\u578b\u660e\u786e</li> <li> Optional\u7c7b\u578b\u6b63\u786e\u5904\u7406</li> <li> \u65e0\u7c7b\u578bignore\u6ce8\u91ca\uff08\u9664\u975e\u5fc5\u8981\uff09</li> </ul>"},{"location":"development/type-safety-standards/#2_3","title":"2. \u7c7b\u7ea7\u522b\u68c0\u67e5","text":"<ul> <li> \u65b9\u6cd5\u7b7e\u540d\u5b8c\u6574</li> <li> \u5c5e\u6027\u7c7b\u578b\u660e\u786e</li> <li> \u7ee7\u627f\u5173\u7cfb\u7c7b\u578b\u5b89\u5168</li> </ul>"},{"location":"development/type-safety-standards/#3_2","title":"3. \u6a21\u5757\u7ea7\u522b\u68c0\u67e5","text":"<ul> <li> \u5bfc\u5165\u8bed\u53e5\u89c4\u8303</li> <li> \u5168\u5c40\u53d8\u91cf\u7c7b\u578b\u660e\u786e</li> <li> __all__\u5217\u8868\u7c7b\u578b\u6807\u6ce8</li> </ul>"},{"location":"development/type-safety-standards/#_11","title":"\u5e38\u89c1\u95ee\u9898\u89e3\u51b3","text":""},{"location":"development/type-safety-standards/#1-none","title":"1. \u5904\u7406None\u503c","text":"<pre><code># \u2705 \u6b63\u786e\u5904\u7406\ndef get_team_name(team_id: Optional[int]) -&gt; str:\n    if team_id is None:\n        return \"Unknown Team\"\n    return team_names.get(team_id, \"Unknown Team\")\n\n# \u274c \u9519\u8bef\uff1a\u76f4\u63a5\u4f7f\u7528\u53ef\u80fd\u4e3aNone\u7684\u503c\ndef get_team_name(team_id: Optional[int]) -&gt; str:\n    return team_names[team_id]  # \u53ef\u80fd\u5728team_id\u4e3aNone\u65f6\u62a5\u9519\n</code></pre>"},{"location":"development/type-safety-standards/#2-any","title":"2. \u907f\u514dAny\u7c7b\u578b","text":"<pre><code># \u2705 \u4f7f\u7528\u5177\u4f53\u7c7b\u578b\ndef process_data(data: Dict[str, Union[str, int]]) -&gt; Dict[str, str]:\n    return {k: str(v) for k, v in data.items()}\n\n# \u274c \u8fc7\u5ea6\u4f7f\u7528Any\ndef process_data(data: Any) -&gt; Any:\n    return data\n</code></pre>"},{"location":"development/type-safety-standards/#3_3","title":"3. \u7c7b\u578b\u8f6c\u6362","text":"<pre><code># \u2705 \u660e\u786e\u7c7b\u578b\u8f6c\u6362\ndef calculate_average(scores: List[Union[str, int]]) -&gt; float:\n    numeric_scores = [float(s) for s in scores]\n    return sum(numeric_scores) / len(numeric_scores)\n\n# \u274c \u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\ndef calculate_average(scores):\n    return sum(scores) / len(scores)  # \u7c7b\u578b\u4e0d\u660e\u786e\n</code></pre>"},{"location":"development/type-safety-standards/#_12","title":"\u5de5\u5177\u548c\u81ea\u52a8\u5316","text":""},{"location":"development/type-safety-standards/#1_4","title":"1. \u5f00\u53d1\u5de5\u5177\u914d\u7f6e","text":"<ul> <li>VS Code: \u542f\u7528\u7c7b\u578b\u68c0\u67e5</li> <li>PyCharm: \u542f\u7528\u4e25\u683c\u7c7b\u578b\u68c0\u67e5</li> <li>Pre-commit: \u96c6\u6210MyPy\u68c0\u67e5</li> </ul>"},{"location":"development/type-safety-standards/#2-cicd","title":"2. CI/CD\u96c6\u6210","text":"<pre><code># .github/workflows/quality-check.yml\n- name: Type Check\n  run: |\n    make type-check\n</code></pre>"},{"location":"development/type-safety-standards/#3_4","title":"3. \u672c\u5730\u9a8c\u8bc1","text":"<pre><code># \u5b8c\u6574\u7c7b\u578b\u68c0\u67e5\nmake type-check\n\n# \u4e25\u683c\u6a21\u5f0f\u68c0\u67e5\nmypy --strict src/\n\n# \u751f\u6210\u7c7b\u578b\u62a5\u544a\nmypy --txt-report reports src/\n</code></pre>"},{"location":"development/type-safety-standards/#_13","title":"\u57f9\u8bad\u548c\u6587\u6863","text":""},{"location":"development/type-safety-standards/#1_5","title":"1. \u56e2\u961f\u57f9\u8bad","text":"<ul> <li>\u7c7b\u578b\u6ce8\u89e3\u57fa\u7840</li> <li>MyPy\u4f7f\u7528\u6307\u5357</li> <li>\u5e38\u89c1\u95ee\u9898\u89e3\u51b3</li> </ul>"},{"location":"development/type-safety-standards/#2_4","title":"2. \u4ee3\u7801\u793a\u4f8b","text":"<ul> <li>\u63d0\u4f9b\u5b8c\u6574\u793a\u4f8b\u4ee3\u7801</li> <li>\u6700\u4f73\u5b9e\u8df5\u6848\u4f8b</li> <li>\u53cd\u6a21\u5f0f\u8b66\u544a</li> </ul>"},{"location":"development/type-safety-standards/#3_5","title":"3. \u5b9a\u671f\u5ba1\u67e5","text":"<ul> <li>\u6708\u5ea6\u7c7b\u578b\u5b89\u5168\u5ba1\u67e5</li> <li>\u4ee3\u7801\u8d28\u91cf\u62a5\u544a</li> <li>\u6539\u8fdb\u5efa\u8bae</li> </ul>"},{"location":"development/type-safety-standards/#_14","title":"\u7248\u672c\u63a7\u5236","text":"<ul> <li>\u5f53\u524d\u7248\u672c: 1.0.0</li> <li>\u66f4\u65b0\u65e5\u671f: 2025-10-21</li> <li>\u7ef4\u62a4\u8005: \u5f00\u53d1\u56e2\u961f</li> </ul>"},{"location":"development/type-safety-standards/#_15","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>MyPy\u5b98\u65b9\u6587\u6863</li> <li>PEP 484 - \u7c7b\u578b\u6ce8\u89e3</li> <li>Python typing\u6a21\u5757\u6587\u6863</li> </ul>"},{"location":"how-to/COMPLETE_DEMO/","title":"\ud83c\udfaf FootballPrediction \u5b8c\u6574\u7cfb\u7edf\u6f14\u793a","text":"<p>\u672c\u6587\u6863\u5c55\u793aFootballPrediction Cursor\u95ed\u73af\u5f00\u53d1\u7cfb\u7edf\u7684\u5b8c\u6574\u529f\u80fd\u6f14\u793a\u3002</p>"},{"location":"how-to/COMPLETE_DEMO/#_1","title":"\ud83c\udf1f \u7cfb\u7edf\u7279\u8272","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u5b8c\u6574\u7684AI\u8f85\u52a9\u5f00\u53d1\u95ed\u73af\u7cfb\u7edf\uff0c\u5b9e\u73b0\u4e86\uff1a</p> <p>\u2705 \u8d44\u6df1\u5f00\u53d1\u8005\u6f5c\u610f\u8bc6\u64cd\u4f5c\u7684\u663e\u5f0f\u5316 \u2705 \u4ece\u4efb\u52a1\u63cf\u8ff0\u5230\u4ee3\u7801\u63d0\u4ea4\u7684\u5168\u81ea\u52a8\u5316 \u2705 \u4e00\u952e\u5b8c\u6210\u6240\u6709\u5f00\u53d1\u6d41\u7a0b \u2705 \u667a\u80fd\u73af\u5883\u68c0\u67e5\u548c\u81ea\u52a8\u4fee\u590d \u2705 Issues\u81ea\u52a8\u540c\u6b65\u7ba1\u7406</p>"},{"location":"how-to/COMPLETE_DEMO/#_2","title":"\ud83d\ude80 \u5b8c\u6574\u6f14\u793a\u6d41\u7a0b","text":""},{"location":"how-to/COMPLETE_DEMO/#_3","title":"\u7b2c\u4e00\u6b65\uff1a\u9879\u76ee\u521d\u59cb\u5316","text":"<pre><code># 1. \u514b\u9686\u9879\u76ee\ngit clone &lt;your-repo&gt;\ncd FootballPrediction\n\n# 2. \u4e00\u952e\u521d\u59cb\u5316\uff08\u521b\u5efavenv + \u5b89\u88c5\u4f9d\u8d56 + \u9879\u76ee\u7ed3\u6784\uff09\nmake init\n\n# 3. \u67e5\u770b\u9879\u76ee\u72b6\u6001\nmake status\n</code></pre> <p>\u8f93\u51fa\u793a\u4f8b\uff1a</p> <pre><code>\ud83d\ude80 FootballPrediction \u5f00\u53d1\u5de5\u5177\n\n\ud83d\udcc1 \u9879\u76ee\u4fe1\u606f:\n  \u9879\u76ee\u540d\u79f0: FootballPrediction\n  Python\u7248\u672c: Python 3.11.x\n  \u865a\u62df\u73af\u5883: venv\n\n\ud83d\udcca \u4ee3\u7801\u7edf\u8ba1:\n  Python\u6587\u4ef6: 6\u4e2a\n  \u4ee3\u7801\u884c\u6570: 2500+\n\n\ud83c\udf3f Git\u72b6\u6001:\n  \u5f53\u524d\u5206\u652f: main\n  \u6700\u8fd1\u63d0\u4ea4: feat: \u521d\u59cb\u5316\u9879\u76ee\n  \u672a\u63d0\u4ea4\u6587\u4ef6: 0\n\n\ud83d\udce6 \u4f9d\u8d56\u72b6\u6001:\n  \u4f9d\u8d56\u6587\u4ef6: requirements.txt\n  \u4f9d\u8d56\u6570\u91cf: 22\u4e2a\u5305\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#_4","title":"\u7b2c\u4e8c\u6b65\uff1a\u73af\u5883\u68c0\u67e5","text":"<pre><code># \u8fd0\u884c\u73af\u5883\u68c0\u67e5\u5668\nmake env-check\n</code></pre> <p>\u7cfb\u7edf\u4f1a\u81ea\u52a8\u68c0\u67e5\uff1a</p> <ul> <li>\u2705 \u865a\u62df\u73af\u5883\u72b6\u6001</li> <li>\u2705 \u4f9d\u8d56\u5b8c\u6574\u6027</li> <li>\u2705 Git\u5206\u652f\u548c\u540c\u6b65\u72b6\u6001</li> <li>\u2705 \u5f00\u53d1\u5de5\u5177\u5b8c\u6574\u6027</li> <li>\u2705 \u9879\u76ee\u7ed3\u6784\u5b8c\u6574\u6027</li> </ul> <p>\u5982\u679c\u6709\u95ee\u9898\uff0c\u4f1a\u63d0\u4f9b\u4fee\u590d\u5efa\u8bae\uff1a</p> <pre><code>\ud83d\udd27 \u4fee\u590d\u5efa\u8bae:\n   1. \u8fd0\u884c: source venv/bin/activate\n   2. \u8fd0\u884c: pip install -r requirements.txt\n   3. \u521b\u5efafeature\u5206\u652f: git checkout -b feature/your-feature\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#issue","title":"\u7b2c\u4e09\u6b65\uff1a\u914d\u7f6eIssue\u540c\u6b65","text":"<pre><code># \u67e5\u770b\u914d\u7f6e\u5411\u5bfc\nmake sync-config\n\n# \u6839\u636e\u5411\u5bfc\u914d\u7f6e\uff08\u4ee5GitHub\u4e3a\u4f8b\uff09\nexport GIT_PLATFORM=github\ngh auth login\n\n# \u7f16\u8f91ISSUES.md\u6587\u4ef6\necho \"\u5b9e\u73b0\u7528\u6237\u8ba4\u8bc1\u529f\u80fd\" &gt;&gt; ISSUES.md\necho \"\u6dfb\u52a0\u6570\u636e\u5bfc\u51fa\u529f\u80fd\" &gt;&gt; ISSUES.md\necho \"\u4f18\u5316\u9875\u9762\u6027\u80fd\" &gt;&gt; ISSUES.md\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#_5","title":"\u7b2c\u56db\u6b65\uff1a\u5f00\u53d1\u5de5\u4f5c\u6d41","text":""},{"location":"how-to/COMPLETE_DEMO/#_6","title":"\ud83c\udf05 \u6bcf\u65e5\u5f00\u53d1\u5f00\u59cb","text":"<pre><code># \u4e00\u952e\u51c6\u5907\u5f00\u53d1\u73af\u5883\nmake dev\n</code></pre> <p>\u6267\u884c\u5185\u5bb9\uff1a</p> <ul> <li>\u5b89\u88c5/\u68c0\u67e5\u4f9d\u8d56</li> <li>\u73af\u5883\u72b6\u6001\u68c0\u67e5</li> <li>\u663e\u793a\u5f00\u53d1\u5c31\u7eea\u72b6\u6001</li> </ul>"},{"location":"how-to/COMPLETE_DEMO/#_7","title":"\ud83d\udcbb \u4ee3\u7801\u5f00\u53d1\u9636\u6bb5","text":"<p>\u5728Cursor\u4e2d\u4f7f\u7528\u5b8c\u6574\u63d0\u793a\u8bcd\uff1a</p> <pre><code>TASK: \u5b9e\u73b0\u7528\u6237\u767b\u5f55\u529f\u80fd\n\n\u8bf7\u6309\u7167FootballPrediction\u95ed\u73af\u7cfb\u7edf\u6267\u884c\uff1a\n\n1. \ud83d\ude80 \u4efb\u52a1\u542f\u52a8\u524d\u68c0\u67e5\uff1a\n   - \u2705 \u865a\u62df\u73af\u5883\u5df2\u6fc0\u6d3b\n   - \u2705 \u4f9d\u8d56\u5b8c\u6574\u6027\u5df2\u9a8c\u8bc1\n   - \u2705 \u5f53\u524d\u5728feature\u5206\u652f\n   - \u2705 \u4ee3\u7801\u5df2\u540c\u6b65\n\n2. \ud83d\udcbb \u5f00\u53d1\u8fc7\u7a0b\uff1a\n   - \u521b\u5efa src/models/user.py\uff08\u7528\u6237\u6a21\u578b\uff09\n   - \u521b\u5efa src/services/auth.py\uff08\u8ba4\u8bc1\u670d\u52a1\uff09\n   - \u6dfb\u52a0\u5b8c\u6574\u7c7b\u578b\u6ce8\u89e3\u548c\u5f02\u5e38\u5904\u7406\n   - \u521b\u5efa\u5bf9\u5e94\u6d4b\u8bd5 tests/test_auth.py\n\n3. \u2705 \u8d28\u91cf\u68c0\u67e5\uff1a\n   - \u8fd0\u884c\u6240\u6709\u68c0\u67e5\u70b9\n   - \u786e\u4fdd\u8986\u76d6\u7387 &gt;= 80%\n   - \u4ee3\u7801\u590d\u6742\u5ea6 &lt;= 10\n\n\u8bf7\u4e25\u683c\u6267\u884c\u6bcf\u4e2a\u7ec6\u8282\u89c4\u5219\uff01\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#_8","title":"\ud83d\udd0d \u6301\u7eed\u8d28\u91cf\u68c0\u67e5","text":"<pre><code># \u5feb\u901f\u4fee\u590d\u683c\u5f0f\u95ee\u9898\nmake fix\n\n# \u5b8c\u6574\u8d28\u91cf\u68c0\u67e5\nmake quality\n\n# \u8fd0\u884c\u6d4b\u8bd5\nmake test\n\n# \u76d1\u63a7\u6d4b\u8bd5\uff08\u5f00\u53d1\u65f6\uff09\nmake test-watch\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#_9","title":"\ud83d\ude80 \u63d0\u4ea4\u524d\u5b8c\u6574\u95ed\u73af","text":"<pre><code># \u4e00\u952e\u5b8c\u6210\u6240\u6709\u6d41\u7a0b\uff01\nmake prepush\n</code></pre> <p><code>make prepush</code> \u6267\u884c\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <ol> <li>\ud83d\udd0d \u73af\u5883\u68c0\u67e5</li> <li>\u865a\u62df\u73af\u5883\u72b6\u6001</li> <li>\u4f9d\u8d56\u5b8c\u6574\u6027</li> <li> <p>Git\u72b6\u6001</p> </li> <li> <p>\ud83d\udccb \u9879\u76ee\u4e0a\u4e0b\u6587\u52a0\u8f7d</p> </li> <li>\u626b\u63cf\u9879\u76ee\u7ed3\u6784</li> <li>\u5206\u6790Git\u5386\u53f2</li> <li> <p>\u751f\u6210\u4e0a\u4e0b\u6587\u5feb\u7167</p> </li> <li> <p>\ud83d\udd27 \u4ee3\u7801\u8d28\u91cf\u68c0\u67e5</p> </li> <li>Black\u4ee3\u7801\u683c\u5f0f\u5316</li> <li>Flake8\u98ce\u683c\u68c0\u67e5</li> <li>MyPy\u7c7b\u578b\u68c0\u67e5</li> <li>Bandit\u5b89\u5168\u68c0\u67e5</li> <li> <p>Radon\u590d\u6742\u5ea6\u5206\u6790</p> </li> <li> <p>\ud83e\uddea \u6d4b\u8bd5\u9a8c\u8bc1</p> </li> <li>Pytest\u5355\u5143\u6d4b\u8bd5</li> <li> <p>Coverage\u8986\u76d6\u7387\u5206\u6790</p> </li> <li> <p>\ud83d\udce6 Git\u64cd\u4f5c</p> </li> <li>\u6dfb\u52a0\u6240\u6709\u6587\u4ef6</li> <li>\u521b\u5efa\u89c4\u8303\u63d0\u4ea4</li> <li> <p>\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93</p> </li> <li> <p>\ud83d\udccb Issues\u540c\u6b65</p> </li> <li>\u8bfb\u53d6ISSUES.md</li> <li>\u540c\u6b65\u5230GitHub/Gitee</li> <li> <p>\u521b\u5efa\u8fdc\u7a0bIssues</p> </li> <li> <p>\u2705 \u5b8c\u6210\u62a5\u544a</p> </li> </ol>"},{"location":"how-to/COMPLETE_DEMO/#_10","title":"\ud83c\udfaf \u5b9e\u9645\u4f7f\u7528\u573a\u666f","text":""},{"location":"how-to/COMPLETE_DEMO/#1","title":"\u573a\u666f1\uff1a\u65b0\u529f\u80fd\u5f00\u53d1","text":"<pre><code># 1. \u5f00\u59cb\u65b0\u529f\u80fd\ngit checkout -b feature/user-auth\nmake dev\n\n# 2. \u5728Cursor\u4e2d\u5f00\u53d1\n# \uff08\u4f7f\u7528\u95ed\u73af\u7cfb\u7edf\u63d0\u793a\u8bcd\uff09\n\n# 3. \u4e00\u952e\u63d0\u4ea4\nmake prepush\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#2bug","title":"\u573a\u666f2\uff1aBug\u4fee\u590d","text":"<pre><code># 1. \u5feb\u901f\u4fee\u590d\u4ee3\u7801\u95ee\u9898\nmake fix\n\n# 2. \u9a8c\u8bc1\u4fee\u590d\u6548\u679c\nmake test\n\n# 3. \u5b8c\u6574\u63d0\u4ea4\nmake prepush-with-message\n# \u8f93\u5165: \"fix(auth): \u4fee\u590d\u767b\u5f55\u8d85\u65f6\u95ee\u9898\"\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#3","title":"\u573a\u666f3\uff1a\u9879\u76ee\u91cd\u6784","text":"<pre><code># 1. \u5206\u6790\u5f53\u524d\u72b6\u6001\nmake context\nmake env-check\n\n# 2. \u5728Cursor\u4e2d\u4f7f\u7528\u91cd\u6784\u63d0\u793a\u8bcd\n# TASK: \u91cd\u6784\u7528\u6237\u670d\u52a1\u6a21\u5757\uff0c\u63d0\u5347\u4ee3\u7801\u8d28\u91cf\n\n# 3. \u9a8c\u8bc1\u91cd\u6784\u6548\u679c\nmake quality\nmake coverage\n\n# 4. \u63d0\u4ea4\u91cd\u6784\nmake prepush\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#4","title":"\u573a\u666f4\uff1a\u56e2\u961f\u534f\u4f5c","text":"<pre><code># 1. \u540c\u6b65\u6700\u65b0\u4ee3\u7801\ngit pull origin main\n\n# 2. \u91cd\u65b0\u68c0\u67e5\u73af\u5883\nmake env-check\n\n# 3. \u7f16\u8f91\u56e2\u961fIssues\necho \"\u4f18\u5316\u6570\u636e\u5e93\u67e5\u8be2\u6027\u80fd\" &gt;&gt; ISSUES.md\necho \"\u6dfb\u52a0API\u9650\u6d41\u529f\u80fd\" &gt;&gt; ISSUES.md\n\n# 4. \u63d0\u4ea4\u5e76\u540c\u6b65Issues\nmake prepush\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#_11","title":"\ud83d\udcca \u7cfb\u7edf\u76d1\u63a7","text":""},{"location":"how-to/COMPLETE_DEMO/#_12","title":"\u67e5\u770b\u7cfb\u7edf\u72b6\u6001","text":"<pre><code># \u9879\u76ee\u603b\u89c8\nmake status\n\n# \u8d28\u91cf\u68c0\u67e5\u5386\u53f2\ncat logs/quality_check.json | jq '.checks'\n\n# \u9879\u76ee\u4e0a\u4e0b\u6587\u5206\u6790\ncat logs/project_context.json | jq '.project_stats'\n\n# \u95ed\u73af\u6267\u884c\u5386\u53f2\ncat logs/cursor_execution.json | jq '.phases'\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#_13","title":"\u6027\u80fd\u5206\u6790","text":"<pre><code># \u4ee3\u7801\u590d\u6742\u5ea6\u5206\u6790\nmake complexity\n\n# \u6d4b\u8bd5\u8986\u76d6\u7387\u8be6\u60c5\nmake coverage\n\n# \u5b89\u5168\u6f0f\u6d1e\u626b\u63cf\nmake security\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#_14","title":"\ud83c\udfa8 \u9ad8\u7ea7\u5b9a\u5236","text":""},{"location":"how-to/COMPLETE_DEMO/#_15","title":"\u81ea\u5b9a\u4e49\u8d28\u91cf\u6807\u51c6","text":"<pre><code># \u8bbe\u7f6e\u66f4\u4e25\u683c\u7684\u6807\u51c6\nexport TEST_COVERAGE_MIN=95\nexport MAX_COMPLEXITY=6\n\n# \u5e94\u7528\u81ea\u5b9a\u4e49\u6807\u51c6\nmake quality\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#_16","title":"\u81ea\u5b9a\u4e49\u63d0\u4ea4\u6d88\u606f","text":"<pre><code># \u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\nmake prepush-with-message\n# \u8f93\u5165: \"feat(core): \u5b9e\u73b0\u9ad8\u7ea7\u7528\u6237\u8ba4\u8bc1\u7cfb\u7edf\"\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#issue_1","title":"\u591a\u5e73\u53f0Issue\u7ba1\u7406","text":"<pre><code># GitHub\u914d\u7f6e\nexport GIT_PLATFORM=github\nmake sync\n\n# Gitee\u914d\u7f6e\nexport GIT_PLATFORM=gitee\nmake sync\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#_17","title":"\u2728 \u6838\u5fc3\u4ef7\u503c\u4f53\u73b0","text":""},{"location":"how-to/COMPLETE_DEMO/#1_1","title":"1. \u8d44\u6df1\u5f00\u53d1\u8005\u7ecf\u9a8c\u81ea\u52a8\u5316","text":"<p>\u4f20\u7edf\u65b9\u5f0f\uff1a</p> <pre><code>source venv/bin/activate\npip install -r requirements.txt\nblack src/ tests/\nflake8 src/ tests/\npytest tests/\ncoverage run -m pytest\ngit add .\ngit commit -m \"feat: add feature\"\ngit push origin main\n# \u624b\u52a8\u521b\u5efaIssues...\n</code></pre> <p>\u73b0\u5728\u53ea\u9700\u8981\uff1a</p> <pre><code>make prepush\n</code></pre>"},{"location":"how-to/COMPLETE_DEMO/#2","title":"2. \u96f6\u9057\u6f0f\u7684\u8d28\u91cf\u4fdd\u8bc1","text":"<p>\u7cfb\u7edf\u786e\u4fdd\u6bcf\u6b21\u63d0\u4ea4\u90fd\u7ecf\u8fc7\uff1a</p> <ul> <li>\u2705 \u73af\u5883\u68c0\u67e5</li> <li>\u2705 \u4ee3\u7801\u683c\u5f0f\u5316</li> <li>\u2705 \u9759\u6001\u5206\u6790</li> <li>\u2705 \u7c7b\u578b\u68c0\u67e5</li> <li>\u2705 \u5b89\u5168\u626b\u63cf</li> <li>\u2705 \u5355\u5143\u6d4b\u8bd5</li> <li>\u2705 \u8986\u76d6\u7387\u9a8c\u8bc1</li> <li>\u2705 \u590d\u6742\u5ea6\u5206\u6790</li> </ul>"},{"location":"how-to/COMPLETE_DEMO/#3_1","title":"3. \u667a\u80fd\u95ee\u9898\u4fee\u590d","text":"<p>\u7cfb\u7edf\u80fd\u81ea\u52a8\uff1a</p> <ul> <li>\ud83d\udd27 \u4fee\u590d\u4ee3\u7801\u683c\u5f0f\u95ee\u9898</li> <li>\ud83d\udd27 \u6574\u7406\u5bfc\u5165\u987a\u5e8f</li> <li>\ud83d\udd27 \u63d0\u4f9b\u5177\u4f53\u4fee\u590d\u5efa\u8bae</li> <li>\ud83d\udd27 \u91cd\u8bd5\u5931\u8d25\u7684\u68c0\u67e5</li> </ul>"},{"location":"how-to/COMPLETE_DEMO/#4_1","title":"4. \u5b8c\u6574\u5f00\u53d1\u8bb0\u5f55","text":"<p>\u6240\u6709\u5f00\u53d1\u6d3b\u52a8\u90fd\u6709\u8be6\u7ec6\u65e5\u5fd7\uff1a</p> <ul> <li>\ud83d\udcdd \u9879\u76ee\u4e0a\u4e0b\u6587\u53d8\u5316</li> <li>\ud83d\udcdd \u8d28\u91cf\u68c0\u67e5\u5386\u53f2</li> <li>\ud83d\udcdd \u95ed\u73af\u6267\u884c\u8bb0\u5f55</li> <li>\ud83d\udcdd Issues\u540c\u6b65\u72b6\u6001</li> </ul>"},{"location":"how-to/COMPLETE_DEMO/#_18","title":"\ud83c\udf89 \u4f7f\u7528\u6548\u679c","text":"<p>\u4f7f\u7528FootballPrediction\u7cfb\u7edf\u540e\uff1a</p> <p>\u5f00\u53d1\u6548\u7387\u63d0\u5347\uff1a</p> <ul> <li>\u26a1 \u73af\u5883\u51c6\u5907\u65f6\u95f4\uff1a\u4ece10\u5206\u949f\u523030\u79d2</li> <li>\u26a1 \u4ee3\u7801\u63d0\u4ea4\u65f6\u95f4\uff1a\u4ece5\u5206\u949f\u52301\u5206\u949f</li> <li>\u26a1 \u8d28\u91cf\u68c0\u67e5\u65f6\u95f4\uff1a\u4ece\u624b\u52a815\u5206\u949f\u5230\u81ea\u52a82\u5206\u949f</li> </ul> <p>\u4ee3\u7801\u8d28\u91cf\u63d0\u5347\uff1a</p> <ul> <li>\ud83d\udcc8 \u6d4b\u8bd5\u8986\u76d6\u7387\uff1a\u81ea\u52a8\u4fdd\u630180%+</li> <li>\ud83d\udcc8 \u4ee3\u7801\u89c4\u8303\uff1a100%\u4e00\u81f4\u6027</li> <li>\ud83d\udcc8 \u5b89\u5168\u6f0f\u6d1e\uff1a\u5b9e\u65f6\u68c0\u6d4b</li> <li>\ud83d\udcc8 \u4ee3\u7801\u590d\u6742\u5ea6\uff1a\u4e25\u683c\u63a7\u5236</li> </ul> <p>\u56e2\u961f\u534f\u4f5c\u6539\u5584\uff1a</p> <ul> <li>\ud83d\udc65 \u73af\u5883\u4e00\u81f4\u6027\uff1a100%</li> <li>\ud83d\udc65 \u63d0\u4ea4\u89c4\u8303\uff1a\u81ea\u52a8\u5316</li> <li>\ud83d\udc65 Issues\u7ba1\u7406\uff1a\u540c\u6b65\u5316</li> <li>\ud83d\udc65 \u77e5\u8bc6\u4f20\u627f\uff1a\u7cfb\u7edf\u5316</li> </ul> <p>\ud83c\udfaf \u603b\u7ed3\uff1a FootballPrediction\u4e0d\u4ec5\u662f\u4e00\u4e2a\u5f00\u53d1\u5de5\u5177\uff0c\u66f4\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u5f00\u53d1\u54f2\u5b66\u548c\u6700\u4f73\u5b9e\u8df5\u7684\u81ea\u52a8\u5316\u5b9e\u73b0\u3002\u5b83\u8ba9\u6bcf\u4e2a\u5f00\u53d1\u8005\u90fd\u80fd\u62e5\u6709\u8d44\u6df1\u4e13\u5bb6\u7ea7\u522b\u7684\u5f00\u53d1\u6d41\u7a0b\u548c\u8d28\u91cf\u6807\u51c6\u3002</p>"},{"location":"how-to/DEPLOYMENT/","title":"\ud83d\ude80 \u90e8\u7f72\u6307\u5357","text":"<p>\u672c\u6587\u6863\u63d0\u4f9b\u4e86 FootballPrediction \u7cfb\u7edf\u7684\u5b8c\u6574\u90e8\u7f72\u6307\u5357\u3002</p>"},{"location":"how-to/DEPLOYMENT/#_2","title":"\u76ee\u5f55","text":"<ul> <li>\u73af\u5883\u8981\u6c42</li> <li>\u672c\u5730\u5f00\u53d1\u73af\u5883</li> <li>Docker \u90e8\u7f72</li> <li>\u751f\u4ea7\u73af\u5883\u90e8\u7f72</li> <li>\u76d1\u63a7\u548c\u65e5\u5fd7</li> <li>\u6545\u969c\u6392\u9664</li> </ul>"},{"location":"how-to/DEPLOYMENT/#_3","title":"\u73af\u5883\u8981\u6c42","text":""},{"location":"how-to/DEPLOYMENT/#_4","title":"\u7cfb\u7edf\u8981\u6c42","text":"<ul> <li>\u64cd\u4f5c\u7cfb\u7edf: Linux (Ubuntu 20.04+), macOS, \u6216 WSL2</li> <li>Python: 3.11 \u6216\u66f4\u9ad8\u7248\u672c</li> <li>\u5185\u5b58: \u6700\u5c11 4GB RAM\uff0c\u63a8\u8350 8GB+</li> <li>\u5b58\u50a8: \u6700\u5c11 20GB \u53ef\u7528\u7a7a\u95f4</li> </ul>"},{"location":"how-to/DEPLOYMENT/#_5","title":"\u4f9d\u8d56\u670d\u52a1","text":"<ul> <li>PostgreSQL: 15.0 \u6216\u66f4\u9ad8\u7248\u672c</li> <li>Redis: 7.0 \u6216\u66f4\u9ad8\u7248\u672c</li> <li>Docker: 20.10 \u6216\u66f4\u9ad8\u7248\u672c</li> <li>Docker Compose: 2.0 \u6216\u66f4\u9ad8\u7248\u672c</li> </ul>"},{"location":"how-to/DEPLOYMENT/#_6","title":"\u672c\u5730\u5f00\u53d1\u73af\u5883","text":""},{"location":"how-to/DEPLOYMENT/#1","title":"1. \u514b\u9686\u9879\u76ee","text":"<pre><code>git clone https://github.com/xupeng211/FootballPrediction.git\ncd FootballPrediction\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#2-python","title":"2. \u8bbe\u7f6e Python \u73af\u5883","text":"<pre><code># \u4f7f\u7528 pyenv \u63a8\u8350\npyenv install 3.11.9\npyenv local 3.11.9\n\n# \u6216\u4f7f\u7528\u7cfb\u7edf Python\npython -m venv .venv\nsource .venv/bin/activate  # Linux/macOS\n# \u6216\n.venv\\Scripts\\activate  # Windows\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#3","title":"3. \u5b89\u88c5\u4f9d\u8d56","text":"<pre><code># \u4ece\u9501\u6587\u4ef6\u5b89\u88c5\u4f9d\u8d56\nmake install\n\n# \u6216\u624b\u52a8\u5b89\u88c5\npip install -r requirements/requirements.lock\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#4","title":"4. \u73af\u5883\u914d\u7f6e","text":"<pre><code># \u590d\u5236\u73af\u5883\u53d8\u91cf\u6a21\u677f\ncp .env.example .env\n\n# \u7f16\u8f91\u73af\u5883\u53d8\u91cf\nnano .env\n</code></pre> <p>\u5fc5\u9700\u7684\u73af\u5883\u53d8\u91cf\uff1a <pre><code># \u6570\u636e\u5e93\u914d\u7f6e\nDATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/football_db\n\n# Redis \u914d\u7f6e\nREDIS_URL=redis://:password@localhost:6379/0\n\n# API \u5bc6\u94a5\nFOOTBALL_API_TOKEN=your-football-api-token\n</code></pre></p>"},{"location":"how-to/DEPLOYMENT/#5","title":"5. \u542f\u52a8\u4f9d\u8d56\u670d\u52a1","text":"<pre><code># \u4f7f\u7528 Docker Compose \u542f\u52a8\ndocker-compose up -d postgres redis\n\n# \u6216\u4f7f\u7528\u7cfb\u7edf\u670d\u52a1\nsudo systemctl start postgresql\nsudo systemctl start redis-server\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#6","title":"6. \u8fd0\u884c\u6570\u636e\u5e93\u8fc1\u79fb","text":"<pre><code># \u8fd0\u884c\u8fc1\u79fb\nmake migrate\n\n# \u6216\u624b\u52a8\u8fd0\u884c\nalembic upgrade head\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#7","title":"7. \u542f\u52a8\u5e94\u7528","text":"<pre><code># \u5f00\u53d1\u6a21\u5f0f\u542f\u52a8\nmake run\n\n# \u6216\u4f7f\u7528 uvicorn\nuvicorn src.main:app --reload --host 0.0.0.0 --port 8000\n</code></pre> <p>\u8bbf\u95ee http://localhost:8000/docs \u67e5\u770b API \u6587\u6863\u3002</p>"},{"location":"how-to/DEPLOYMENT/#docker","title":"Docker \u90e8\u7f72","text":""},{"location":"how-to/DEPLOYMENT/#1_1","title":"1. \u6784\u5efa\u955c\u50cf","text":"<pre><code># \u6784\u5efa\u751f\u4ea7\u955c\u50cf\nmake build\n\n# \u6216\u624b\u52a8\u6784\u5efa\ndocker build -t football-prediction:latest .\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#2-docker-compose","title":"2. \u4f7f\u7528 Docker Compose","text":"<pre><code># \u542f\u52a8\u6240\u6709\u670d\u52a1\ndocker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d\n\n# \u67e5\u770b\u670d\u52a1\u72b6\u6001\ndocker-compose ps\n\n# \u67e5\u770b\u65e5\u5fd7\ndocker-compose logs -f app\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#3-docker-compose","title":"3. Docker Compose \u914d\u7f6e","text":"<p>\u751f\u4ea7\u73af\u5883\u793a\u4f8b (<code>docker-compose.prod.yml</code>):</p> <pre><code>version: '3.8'\n\nservices:\n  app:\n    image: football-prediction:latest\n    ports:\n      - \"8000:8000\"\n    environment:\n      - DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@postgres:5432/football_prod\n      - REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0\n      - ENVIRONMENT=production\n      - DEBUG=false\n    depends_on:\n      postgres:\n        condition: service_healthy\n      redis:\n        condition: service_healthy\n\n  postgres:\n    image: postgres:15\n    environment:\n      - POSTGRES_DB=football_prod\n      - POSTGRES_USER=postgres\n      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n      - ./scripts/init-db.sql:/docker-entrypoint-initdb.d/init-db.sql\n    ports:\n      - \"5432:5432\"\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  redis:\n    image: redis:7-alpine\n    command: redis-server --requirepass ${REDIS_PASSWORD}\n    volumes:\n      - redis_data:/data\n    ports:\n      - \"6379:6379\"\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  nginx:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./ssl:/etc/nginx/ssl:ro\n    depends_on:\n      - app\n\nvolumes:\n  postgres_data:\n  redis_data:\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_7","title":"\u751f\u4ea7\u73af\u5883\u90e8\u7f72","text":""},{"location":"how-to/DEPLOYMENT/#1-kubernetes","title":"1. \u4f7f\u7528 Kubernetes","text":""},{"location":"how-to/DEPLOYMENT/#helm-chart","title":"Helm Chart \u5b89\u88c5","text":"<pre><code># \u6dfb\u52a0 Helm \u4ed3\u5e93\nhelm repo add football-prediction https://charts.football-prediction.com\n\n# \u5b89\u88c5\nhelm install football-prediction football-prediction/football-prediction \\\n  --namespace football-prediction \\\n  --create-namespace \\\n  --set database.password=${DB_PASSWORD} \\\n  --set redis.password=${REDIS_PASSWORD} \\\n  --set api.footballToken=${FOOTBALL_API_TOKEN}\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#kustomize","title":"Kustomize \u90e8\u7f72","text":"<pre><code># \u5e94\u7528\u914d\u7f6e\nkubectl apply -k k8s/overlays/production\n\n# \u67e5\u770b\u72b6\u6001\nkubectl get pods -n football-prediction\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#2","title":"2. \u4f7f\u7528\u4e91\u670d\u52a1","text":""},{"location":"how-to/DEPLOYMENT/#aws-ecs","title":"AWS ECS","text":"<pre><code># \u6784\u5efa\u5e76\u63a8\u9001\u955c\u50cf\ndocker build -t football-prediction:latest .\ndocker tag football-prediction:latest ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/football-prediction:latest\ndocker push ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/football-prediction:latest\n\n# \u4f7f\u7528 ECS CLI \u90e8\u7f72\necs-cli compose --project-name football-prediction \\\n  --file docker-compose.prod.yml \\\n  --cluster-config football-prediction \\\n  --ecs-profile football-prediction \\\n  up --create-log-groups\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#google-cloud-run","title":"Google Cloud Run","text":"<pre><code># \u6784\u5efa\u5e76\u63a8\u9001\ngcloud builds submit --tag gcr.io/PROJECT_ID/football-prediction\n\n# \u90e8\u7f72\ngcloud run deploy football-prediction \\\n  --image gcr.io/PROJECT_ID/football-prediction \\\n  --platform managed \\\n  --region us-central1 \\\n  --allow-unauthenticated\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#3_1","title":"3. \u84dd\u7eff\u90e8\u7f72","text":"<p>\u4f7f\u7528 Nginx \u5b9e\u73b0\u84dd\u7eff\u90e8\u7f72\uff1a</p> <pre><code>upstream blue {\n    server blue-app:8000;\n}\n\nupstream green {\n    server green-app:8000;\n}\n\nserver {\n    listen 80;\n    server_name football-prediction.com;\n\n    location / {\n        proxy_pass http://blue;  # \u6216 green\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_8","title":"\u73af\u5883\u53d8\u91cf\u914d\u7f6e","text":""},{"location":"how-to/DEPLOYMENT/#envdev","title":"\u5f00\u53d1\u73af\u5883 (.env.dev)","text":"<pre><code>ENVIRONMENT=development\nDEBUG=true\nLOG_LEVEL=DEBUG\n\nDATABASE_URL=postgresql+asyncpg://dev_user:dev_pass@localhost:5432/football_dev\nREDIS_URL=redis://:dev_redis_pass@localhost:6379/0\n\nFOOTBALL_API_TOKEN=dev_token_here\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#envprod","title":"\u751f\u4ea7\u73af\u5883 (.env.prod)","text":"<pre><code>ENVIRONMENT=production\nDEBUG=false\nLOG_LEVEL=INFO\n\nDATABASE_URL=postgresql+asyncpg://prod_user:${PROD_DB_PASSWORD}@prod-db:5432/football_prod\nREDIS_URL=redis://:${PROD_REDIS_PASSWORD}@prod-redis:6379/0\n\nFOOTBALL_API_TOKEN=${FOOTBALL_API_TOKEN}\n\n# \u5b89\u5168\u914d\u7f6e\nSECRET_KEY=${SECRET_KEY}\nJWT_SECRET_KEY=${JWT_SECRET_KEY}\n\n# \u76d1\u63a7\u914d\u7f6e\nSENTRY_DSN=${SENTRY_DSN}\nPROMETHEUS_ENDPOINT=http://prometheus:9090\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_9","title":"\u76d1\u63a7\u548c\u65e5\u5fd7","text":""},{"location":"how-to/DEPLOYMENT/#1-prometheus","title":"1. Prometheus \u76d1\u63a7","text":"<pre><code># prometheus.yml\nglobal:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: 'football-prediction'\n    static_configs:\n      - targets: ['football-prediction:8000']\n    metrics_path: '/metrics'\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#2-grafana","title":"2. Grafana \u4eea\u8868\u677f","text":"<p>\u9884\u914d\u7f6e\u7684 Grafana \u4eea\u8868\u677f\u5305\u62ec\uff1a - API \u54cd\u5e94\u65f6\u95f4 - \u6570\u636e\u5e93\u8fde\u63a5\u6570 - Redis \u4f7f\u7528\u7387 - \u9884\u6d4b\u51c6\u786e\u6027\u6307\u6807</p>"},{"location":"how-to/DEPLOYMENT/#3_2","title":"3. \u65e5\u5fd7\u805a\u5408","text":"<p>\u4f7f\u7528 ELK Stack\uff1a</p> <pre><code># Filebeat \u914d\u7f6e\nfilebeat.inputs:\n- type: log\n  enabled: true\n  paths:\n    - /var/log/football-prediction/*.log\n  fields:\n    app: football-prediction\n  fields_under_root: true\n\noutput.elasticsearch:\n  hosts: [\"elasticsearch:9200\"]\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_10","title":"\u5065\u5eb7\u68c0\u67e5","text":""},{"location":"how-to/DEPLOYMENT/#_11","title":"\u5e94\u7528\u5065\u5eb7\u68c0\u67e5","text":"<pre><code># HTTP \u5065\u5eb7\u68c0\u67e5\ncurl http://localhost:8000/health\n\n# \u8be6\u7ec6\u7684\u5065\u5eb7\u68c0\u67e5\ncurl http://localhost:8000/health/full\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_12","title":"\u6570\u636e\u5e93\u5065\u5eb7\u68c0\u67e5","text":"<pre><code># PostgreSQL\npg_isready -h localhost -p 5432 -U postgres\n\n# Redis\nredis-cli -h localhost -p 6379 ping\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_13","title":"\u6027\u80fd\u8c03\u4f18","text":""},{"location":"how-to/DEPLOYMENT/#1_2","title":"1. \u6570\u636e\u5e93\u4f18\u5316","text":"<pre><code>-- \u521b\u5efa\u7d22\u5f15\u793a\u4f8b\nCREATE INDEX CONCURRENTLY idx_matches_date ON matches(start_time);\nCREATE INDEX CONCURRENTLY idx_predictions_match_id ON predictions(match_id);\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#2-redis","title":"2. Redis \u914d\u7f6e","text":"<pre><code># redis.conf\nmaxmemory 512mb\nmaxmemory-policy allkeys-lru\nsave 900 1\nsave 300 10\nsave 60 10000\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#3_3","title":"3. \u5e94\u7528\u4f18\u5316","text":"<pre><code># uvicorn \u914d\u7f6e\nworkers = (cpu_count * 2) + 1\nlimit_concurrency = 1000\ntimeout_keep_alive = 30\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_14","title":"\u6545\u969c\u6392\u9664","text":""},{"location":"how-to/DEPLOYMENT/#_15","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"how-to/DEPLOYMENT/#1_3","title":"1. \u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25","text":"<pre><code># \u68c0\u67e5\u6570\u636e\u5e93\u72b6\u6001\ndocker-compose logs postgres\n\n# \u68c0\u67e5\u8fde\u63a5\u5b57\u7b26\u4e32\necho $DATABASE_URL\n\n# \u6d4b\u8bd5\u8fde\u63a5\npsql $DATABASE_URL -c \"SELECT 1\"\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#2-redis_1","title":"2. Redis \u8fde\u63a5\u5931\u8d25","text":"<pre><code># \u68c0\u67e5 Redis \u72b6\u6001\ndocker-compose logs redis\n\n# \u6d4b\u8bd5\u8fde\u63a5\nredis-cli -h localhost -p 6379 ping\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#3-api","title":"3. API \u54cd\u5e94\u6162","text":"<pre><code># \u68c0\u67e5\u65e5\u5fd7\ndocker-compose logs app | grep ERROR\n\n# \u68c0\u67e5\u8d44\u6e90\u4f7f\u7528\ndocker stats\n\n# \u68c0\u67e5\u6570\u636e\u5e93\u6162\u67e5\u8be2\nSELECT query, mean_time, calls FROM pg_stat_statements ORDER BY mean_time DESC LIMIT 10;\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#4_1","title":"4. \u5185\u5b58\u6cc4\u6f0f","text":"<pre><code># \u4f7f\u7528\u5185\u5b58\u5206\u6790\u5de5\u5177\npip install memory-profiler\npython -m memory_profiler src/main.py\n\n# \u6216\u4f7f\u7528 tracemalloc\npython -m tracemalloc src/main.py\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_16","title":"\u65e5\u5fd7\u5206\u6790","text":"<pre><code># \u67e5\u770b\u9519\u8bef\u65e5\u5fd7\ndocker-compose logs app | grep ERROR\n\n# \u67e5\u770b\u7279\u5b9a\u7aef\u70b9\u7684\u9519\u8bef\ndocker-compose logs app | grep \"/predictions\" | grep ERROR\n\n# \u67e5\u770b\u6027\u80fd\u76f8\u5173\u65e5\u5fd7\ndocker-compose logs app | grep \"Slow query\"\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_17","title":"\u91cd\u542f\u670d\u52a1","text":"<pre><code># \u91cd\u542f\u5355\u4e2a\u670d\u52a1\ndocker-compose restart app\n\n# \u91cd\u542f\u6240\u6709\u670d\u52a1\ndocker-compose restart\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_18","title":"\u5907\u4efd\u548c\u6062\u590d","text":""},{"location":"how-to/DEPLOYMENT/#_19","title":"\u6570\u636e\u5e93\u5907\u4efd","text":"<pre><code># \u521b\u5efa\u5907\u4efd\ndocker exec postgres pg_dump -U postgres football_prod &gt; backup.sql\n\n# \u6062\u590d\ndocker exec -i postgres psql -U postgres football_prod &lt; backup.sql\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#redis","title":"Redis \u5907\u4efd","text":"<pre><code># \u521b\u5efa\u5feb\u7167\ndocker exec redis redis-cli BGSAVE\n\n# \u62f7\u8d1d\u5feb\u7167\u6587\u4ef6\ndocker cp redis:/data/dump.rdb ./backup/\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_20","title":"\u5b89\u5168\u914d\u7f6e","text":""},{"location":"how-to/DEPLOYMENT/#ssltls","title":"SSL/TLS \u914d\u7f6e","text":"<pre><code>server {\n    listen 443 ssl;\n    server_name football-prediction.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n}\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_21","title":"\u9632\u706b\u5899\u914d\u7f6e","text":"<pre><code># \u4f7f\u7528 ufw\nsudo ufw allow 22/tcp    # SSH\nsudo ufw allow 80/tcp    # HTTP\nsudo ufw allow 443/tcp   # HTTPS\nsudo ufw enable\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_22","title":"\u66f4\u65b0\u548c\u7ef4\u62a4","text":""},{"location":"how-to/DEPLOYMENT/#0","title":"0 \u505c\u673a\u66f4\u65b0","text":"<pre><code># \u4f7f\u7528\u84dd\u7eff\u90e8\u7f72\nkubectl rollout status deployment/football-prediction-blue\nkubectl rollout status deployment/football-prediction-green\n\n# \u5207\u6362\u6d41\u91cf\nkubectl patch service football-prediction -p '{\"spec\":{\"selector\":{\"version\":\"green\"}}}'\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_23","title":"\u6570\u636e\u5e93\u8fc1\u79fb","text":"<pre><code># \u8fd0\u884c\u8fc1\u79fb\nalembic upgrade head\n\n# \u56de\u6eda\nalembic downgrade -1\n</code></pre>"},{"location":"how-to/DEPLOYMENT/#_24","title":"\u4f9d\u8d56\u66f4\u65b0","text":"<pre><code># \u66f4\u65b0\u4f9d\u8d56\npip-compile requirements/dev.in\npip install -r requirements/dev.lock\n\n# \u63d0\u4ea4\u53d8\u66f4\ngit add requirements/\ngit commit -m \"Update dependencies\"\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/","title":"\u90e8\u7f72\u6307\u5357 V2","text":"<p>\u672c\u6587\u6863\u63d0\u4f9b\u4e86\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf V2 \u7684\u5b8c\u6574\u90e8\u7f72\u6307\u5357\uff0c\u5305\u62ec\u672c\u5730\u5f00\u53d1\u3001\u6d4b\u8bd5\u73af\u5883\u548c\u751f\u4ea7\u73af\u5883\u7684\u90e8\u7f72\u3002</p>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_1","title":"\u76ee\u5f55","text":"<ol> <li>\u7cfb\u7edf\u8981\u6c42</li> <li>\u672c\u5730\u5f00\u53d1\u73af\u5883</li> <li>Docker \u90e8\u7f72</li> <li>Kubernetes \u90e8\u7f72</li> <li>\u4e91\u5e73\u53f0\u90e8\u7f72</li> <li>\u914d\u7f6e\u7ba1\u7406</li> <li>\u76d1\u63a7\u548c\u65e5\u5fd7</li> <li>\u6027\u80fd\u8c03\u4f18</li> <li>\u5b89\u5168\u914d\u7f6e</li> </ol>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_2","title":"\u7cfb\u7edf\u8981\u6c42","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_3","title":"\u6700\u4f4e\u914d\u7f6e","text":"<ul> <li>CPU: 2 \u6838\u5fc3</li> <li>\u5185\u5b58: 4 GB RAM</li> <li>\u5b58\u50a8: 20 GB SSD</li> <li>\u64cd\u4f5c\u7cfb\u7edf: Linux (Ubuntu 20.04+), macOS, Windows 10+</li> </ul>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_4","title":"\u63a8\u8350\u914d\u7f6e","text":"<ul> <li>CPU: 4 \u6838\u5fc3</li> <li>\u5185\u5b58: 8 GB RAM</li> <li>\u5b58\u50a8: 50 GB SSD</li> <li>\u7f51\u7edc: 100 Mbps</li> </ul>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_5","title":"\u4f9d\u8d56\u670d\u52a1","text":"<ul> <li>PostgreSQL 14+</li> <li>Redis 6+</li> <li>Python 3.11+</li> <li>Docker 20.10+ (\u53ef\u9009)</li> <li>Kubernetes 1.20+ (\u53ef\u9009)</li> </ul>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_6","title":"\u672c\u5730\u5f00\u53d1\u73af\u5883","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#1","title":"1. \u514b\u9686\u9879\u76ee","text":"<pre><code>git clone https://github.com/your-org/football-prediction.git\ncd football-prediction\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#2","title":"2. \u521b\u5efa\u865a\u62df\u73af\u5883","text":"<pre><code>python3 -m venv venv\nsource venv/bin/activate  # Linux/macOS\n# \u6216\nvenv\\Scripts\\activate  # Windows\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#3","title":"3. \u5b89\u88c5\u4f9d\u8d56","text":"<pre><code># \u5b89\u88c5\u5f00\u53d1\u4f9d\u8d56\npip install -r requirements/dev.lock\n\n# \u5b89\u88c5\u9884\u63d0\u4ea4\u94a9\u5b50\npre-commit install\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#4","title":"4. \u914d\u7f6e\u73af\u5883\u53d8\u91cf","text":"<pre><code># \u590d\u5236\u73af\u5883\u53d8\u91cf\u6a21\u677f\ncp .env.example .env.local\n\n# \u7f16\u8f91\u914d\u7f6e\nvim .env.local\n</code></pre> <p>\u5fc5\u9700\u7684\u73af\u5883\u53d8\u91cf\uff1a</p> <pre><code># \u6570\u636e\u5e93\u914d\u7f6e\nDATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/football_prediction\nREDIS_URL=redis://localhost:6379/0\n\n# API\u914d\u7f6e\nSECRET_KEY=your-secret-key-here\nENVIRONMENT=development\nLOG_LEVEL=INFO\n\n# \u5916\u90e8\u670d\u52a1\nFOOTBALL_API_TOKEN=your-football-api-token\nMLFLOW_TRACKING_URI=http://localhost:5002\n\n# \u53ef\u9009\u670d\u52a1\nSENTRY_DSN=your-sentry-dsn\nSLACK_WEBHOOK_URL=your-slack-webhook\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#5","title":"5. \u542f\u52a8\u4f9d\u8d56\u670d\u52a1","text":"<pre><code># \u542f\u52a8 PostgreSQL \u548c Redis\ndocker-compose -f docker-compose.test.yml up -d postgres redis\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#6","title":"6. \u6570\u636e\u5e93\u8fc1\u79fb","text":"<pre><code># \u8fd0\u884c\u8fc1\u79fb\nalembic upgrade head\n\n# \u6216\u4f7f\u7528 Makefile\nmake migrate\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#7","title":"7. \u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668","text":"<pre><code># \u542f\u52a8 API \u670d\u52a1\nuvicorn src.api.app:app --reload --host 0.0.0.0 --port 8000\n\n# \u6216\u4f7f\u7528 Makefile\nmake run-dev\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#8","title":"8. \u9a8c\u8bc1\u5b89\u88c5","text":"<pre><code># \u5065\u5eb7\u68c0\u67e5\ncurl http://localhost:8000/api/health\n\n# \u67e5\u770b API \u6587\u6863\nopen http://localhost:8000/docs\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#docker","title":"Docker \u90e8\u7f72","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#1_1","title":"1. \u6784\u5efa\u955c\u50cf","text":"<pre><code># \u6784\u5efa\u5e94\u7528\u955c\u50cf\ndocker build -t football-prediction:latest .\n\n# \u6216\u4f7f\u7528 Makefile\nmake build\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#2-docker-compose","title":"2. \u4f7f\u7528 Docker Compose","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_7","title":"\u5f00\u53d1\u73af\u5883","text":"<pre><code>docker-compose -f docker-compose.yml up -d\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_8","title":"\u6d4b\u8bd5\u73af\u5883","text":"<pre><code>docker-compose -f docker-compose.staging.yml up -d\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_9","title":"\u751f\u4ea7\u73af\u5883","text":"<pre><code># \u51c6\u5907\u751f\u4ea7\u73af\u5883\u914d\u7f6e\ncp .env.example .env.prod\n# \u7f16\u8f91 .env.prod\n\n# \u542f\u52a8\u751f\u4ea7\u670d\u52a1\ndocker-compose -f docker-compose.prod.yml up -d\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#3_1","title":"3. \u9a8c\u8bc1\u90e8\u7f72","text":"<pre><code># \u68c0\u67e5\u670d\u52a1\u72b6\u6001\ndocker-compose ps\n\n# \u67e5\u770b\u65e5\u5fd7\ndocker-compose logs -f app\n\n# \u6d4b\u8bd5 API\ncurl http://localhost:8000/api/health\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#kubernetes","title":"Kubernetes \u90e8\u7f72","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#1-kubernetes","title":"1. \u51c6\u5907 Kubernetes \u6e05\u5355","text":"<pre><code># namespace.yaml\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: football-prediction\n---\n# configmap.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: football-config\n  namespace: football-prediction\ndata:\n  ENVIRONMENT: \"production\"\n  LOG_LEVEL: \"INFO\"\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#2-secret","title":"2. \u521b\u5efa Secret","text":"<pre><code>kubectl create secret generic football-secrets \\\n  --from-literal=database-url=\"postgresql+asyncpg://...\" \\\n  --from-literal=redis-url=\"redis://...\" \\\n  --from-literal=secret-key=\"...\" \\\n  -n football-prediction\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#3_2","title":"3. \u90e8\u7f72\u5e94\u7528","text":"<pre><code># deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: football-prediction\n  namespace: football-prediction\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: football-prediction\n  template:\n    metadata:\n      labels:\n        app: football-prediction\n    spec:\n      containers:\n      - name: app\n        image: football-prediction:latest\n        ports:\n        - containerPort: 8000\n        envFrom:\n        - configMapRef:\n            name: football-config\n        - secretRef:\n            name: football-secrets\n        resources:\n          requests:\n            memory: \"256Mi\"\n            cpu: \"250m\"\n          limits:\n            memory: \"512Mi\"\n            cpu: \"500m\"\n        livenessProbe:\n          httpGet:\n            path: /api/health\n            port: 8000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /api/health\n            port: 8000\n          initialDelaySeconds: 5\n          periodSeconds: 5\n---\n# service.yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: football-prediction-service\n  namespace: football-prediction\nspec:\n  selector:\n    app: football-prediction\n  ports:\n  - port: 80\n    targetPort: 8000\n  type: LoadBalancer\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#4_1","title":"4. \u90e8\u7f72\u547d\u4ee4","text":"<pre><code># \u5e94\u7528\u6240\u6709\u914d\u7f6e\nkubectl apply -f k8s/\n\n# \u68c0\u67e5\u90e8\u7f72\u72b6\u6001\nkubectl get pods -n football-prediction\nkubectl get services -n football-prediction\n\n# \u67e5\u770b\u65e5\u5fd7\nkubectl logs -f deployment/football-prediction -n football-prediction\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_10","title":"\u4e91\u5e73\u53f0\u90e8\u7f72","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#aws-ecs","title":"AWS ECS \u90e8\u7f72","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#1-ecr","title":"1. \u521b\u5efa ECR \u4ed3\u5e93","text":"<pre><code>aws ecr create-repository \\\n  --repository-name football-prediction \\\n  --region us-west-2\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#2_1","title":"2. \u63a8\u9001\u955c\u50cf","text":"<pre><code># \u83b7\u53d6\u767b\u5f55\u4ee4\u724c\naws ecr get-login-password --region us-west-2 | docker login --username AWS --password-stdin &lt;account-id&gt;.dkr.ecr.us-west-2.amazonaws.com\n\n# \u6807\u8bb0\u955c\u50cf\ndocker tag football-prediction:latest &lt;account-id&gt;.dkr.ecr.us-west-2.amazonaws.com/football-prediction:latest\n\n# \u63a8\u9001\u955c\u50cf\ndocker push &lt;account-id&gt;.dkr.ecr.us-west-2.amazonaws.com/football-prediction:latest\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#3-ecs","title":"3. \u521b\u5efa ECS \u4efb\u52a1\u5b9a\u4e49","text":"<pre><code>{\n  \"family\": \"football-prediction\",\n  \"networkMode\": \"awsvpc\",\n  \"requiresCompatibilities\": [\"FARGATE\"],\n  \"cpu\": \"512\",\n  \"memory\": \"1024\",\n  \"executionRoleArn\": \"arn:aws:iam::&lt;account-id&gt;:role/ecsTaskExecutionRole\",\n  \"taskRoleArn\": \"arn:aws:iam::&lt;account-id&gt;:role/ecsTaskRole\",\n  \"containerDefinitions\": [\n    {\n      \"name\": \"football-prediction\",\n      \"image\": \"&lt;account-id&gt;.dkr.ecr.us-west-2.amazonaws.com/football-prediction:latest\",\n      \"portMappings\": [\n        {\n          \"containerPort\": 8000,\n          \"protocol\": \"tcp\"\n        }\n      ],\n      \"environment\": [\n        {\n          \"name\": \"ENVIRONMENT\",\n          \"value\": \"production\"\n        }\n      ],\n      \"secrets\": [\n        {\n          \"name\": \"DATABASE_URL\",\n          \"valueFrom\": \"arn:aws:secretsmanager:us-west-2:&lt;account-id&gt;:secret:football-db:url\"\n        }\n      ],\n      \"logConfiguration\": {\n        \"logDriver\": \"awslogs\",\n        \"options\": {\n          \"awslogs-group\": \"/ecs/football-prediction\",\n          \"awslogs-region\": \"us-west-2\",\n          \"awslogs-stream-prefix\": \"ecs\"\n        }\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#google-cloud-run","title":"Google Cloud Run \u90e8\u7f72","text":"<pre><code># \u6784\u5efa\u5e76\u63a8\u9001\u955c\u50cf\ngcloud builds submit --tag gcr.io/PROJECT_ID/football-prediction\n\n# \u90e8\u7f72\u5230 Cloud Run\ngcloud run deploy football-prediction \\\n  --image gcr.io/PROJECT_ID/football-prediction \\\n  --platform managed \\\n  --region us-central1 \\\n  --allow-unauthenticated \\\n  --memory 1Gi \\\n  --cpu 1 \\\n  --max-instances 100 \\\n  --set-env-vars ENVIRONMENT=production\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_11","title":"\u914d\u7f6e\u7ba1\u7406","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#1_2","title":"1. \u73af\u5883\u914d\u7f6e\u5c42\u7ea7","text":"<pre><code># config/base.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: football-base-config\ndata:\n  LOG_LEVEL: \"INFO\"\n  MAX_WORKERS: \"4\"\n  REDIS_POOL_SIZE: \"10\"\n\n---\n# config/production.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: football-prod-config\ndata:\n  ENVIRONMENT: \"production\"\n  DEBUG: \"false\"\n  SENTRY_ENABLED: \"true\"\n\n---\n# config/development.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: football-dev-config\ndata:\n  ENVIRONMENT: \"development\"\n  DEBUG: \"true\"\n  LOG_LEVEL: \"DEBUG\"\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#2-kustomize","title":"2. \u4f7f\u7528 Kustomize \u7ba1\u7406\u914d\u7f6e","text":"<pre><code># kustomization.yaml\napiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\nnamespace: football-prediction\nresources:\n- deployment.yaml\n- service.yaml\nconfigMapGenerator:\n- name: football-config\n  literals:\n- ENVIRONMENT=production\npatchesStrategicMerge:\n- patches/production.yaml\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_12","title":"\u76d1\u63a7\u548c\u65e5\u5fd7","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#1-prometheus","title":"1. Prometheus \u76d1\u63a7","text":"<pre><code># prometheus-config.yaml\nglobal:\n  scrape_interval: 15s\n\nscrape_configs:\n- job_name: 'football-prediction'\n  static_configs:\n  - targets: ['football-prediction-service:80']\n  metrics_path: /metrics\n  scrape_interval: 5s\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#2-grafana","title":"2. Grafana \u4eea\u8868\u677f","text":"<pre><code>{\n  \"dashboard\": {\n    \"title\": \"Football Prediction Metrics\",\n    \"panels\": [\n      {\n        \"title\": \"Prediction Rate\",\n        \"type\": \"graph\",\n        \"targets\": [\n          {\n            \"expr\": \"rate(predictions_total[5m])\",\n            \"legendFormat\": \"{{model_version}}\"\n          }\n        ]\n      },\n      {\n        \"title\": \"Prediction Accuracy\",\n        \"type\": \"stat\",\n        \"targets\": [\n          {\n            \"expr\": \"prediction_accuracy\",\n            \"legendFormat\": \"{{model_version}}\"\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#3-elk","title":"3. ELK \u65e5\u5fd7\u6808","text":"<pre><code># filebeat.yml\nfilebeat.inputs:\n- type: container\n  paths:\n    - '/var/log/containers/*football*.log'\n  processors:\n  - add_kubernetes_metadata:\n      host: ${NODE_NAME}\n      matchers:\n      - logs_path:\n          logs_path: \"/var/log/containers/\"\n\noutput.elasticsearch:\n  hosts: [\"elasticsearch:9200\"]\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_13","title":"\u6027\u80fd\u8c03\u4f18","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#1_3","title":"1. \u6570\u636e\u5e93\u4f18\u5316","text":"<pre><code>-- \u521b\u5efa\u7d22\u5f15\nCREATE INDEX CONCURRENTLY idx_predictions_match_created\nON predictions(match_id, created_at);\n\n-- \u5206\u533a\u8868\nCREATE TABLE predictions_2024 PARTITION OF predictions\nFOR VALUES FROM ('2024-01-01') TO ('2025-01-01');\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#2-redis","title":"2. Redis \u914d\u7f6e","text":"<pre><code># redis.conf\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\nsave 900 1\nsave 300 10\nsave 60 10000\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#3_3","title":"3. \u5e94\u7528\u914d\u7f6e","text":"<pre><code># config.py\nfrom src.core.config import Settings\n\nsettings = Settings(\n    # \u8fde\u63a5\u6c60\u914d\u7f6e\n    DB_POOL_SIZE=20,\n    DB_MAX_OVERFLOW=30,\n    REDIS_POOL_SIZE=50,\n\n    # \u7f13\u5b58\u914d\u7f6e\n    CACHE_TTL_PREDICTIONS=1800,  # 30\u5206\u949f\n    CACHE_TTL_FEATURES=3600,     # 1\u5c0f\u65f6\n\n    # \u5f02\u6b65\u914d\u7f6e\n    MAX_CONCURRENT_PREDICTIONS=10,\n    PREDICTION_TIMEOUT=30.0,\n)\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_14","title":"\u5b89\u5168\u914d\u7f6e","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#1-https","title":"1. HTTPS \u914d\u7f6e","text":"<pre><code># nginx/nginx.prod.conf\nserver {\n    listen 443 ssl http2;\n    server_name api.football-prediction.com;\n\n    ssl_certificate /etc/nginx/ssl/cert.pem;\n    ssl_certificate_key /etc/nginx/ssl/key.pem;\n\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;\n\n    location / {\n        proxy_pass http://app:8000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#2_2","title":"2. \u5b89\u5168\u5934\u914d\u7f6e","text":"<pre><code># middleware/security.py\nfrom fastapi.middleware.httpsredirect import HTTPSRedirectMiddleware\nfrom fastapi.middleware.trustedhost import TrustedHostMiddleware\n\napp.add_middleware(\n    TrustedHostMiddleware,\n    allowed_hosts=[\"api.football-prediction.com\", \"*.football-prediction.com\"]\n)\napp.add_middleware(HTTPSRedirectMiddleware)\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#3_4","title":"3. \u8bbf\u95ee\u63a7\u5236","text":"<pre><code># rbac.py\nfrom enum import Enum\n\nclass Role(str, Enum):\n    ADMIN = \"admin\"\n    ANALYST = \"analyst\"\n    VIEWER = \"viewer\"\n\nPERMISSIONS = {\n    Role.ADMIN: [\"read\", \"write\", \"delete\", \"admin\"],\n    Role.ANALYST: [\"read\", \"write\"],\n    Role.VIEWER: [\"read\"]\n}\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_15","title":"\u6545\u969c\u6392\u9664","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_16","title":"\u5e38\u89c1\u95ee\u9898","text":"<ol> <li> <p>\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25 <pre><code># \u68c0\u67e5\u8fde\u63a5\u5b57\u7b26\u4e32\npsql $DATABASE_URL -c \"SELECT 1\"\n</code></pre></p> </li> <li> <p>Redis \u8fde\u63a5\u8d85\u65f6 <pre><code># \u68c0\u67e5 Redis\nredis-cli ping\n</code></pre></p> </li> <li> <p>\u5185\u5b58\u4e0d\u8db3 <pre><code># \u68c0\u67e5\u5185\u5b58\u4f7f\u7528\ndocker stats\n</code></pre></p> </li> </ol>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_17","title":"\u65e5\u5fd7\u67e5\u770b","text":"<pre><code># \u5e94\u7528\u65e5\u5fd7\ndocker-compose logs -f app\n\n# \u7cfb\u7edf\u65e5\u5fd7\njournalctl -u football-prediction\n\n# Kubernetes \u65e5\u5fd7\nkubectl logs -f deployment/football-prediction -n football-prediction\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_18","title":"\u66f4\u65b0\u548c\u7ef4\u62a4","text":""},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_19","title":"\u6eda\u52a8\u66f4\u65b0","text":"<pre><code># 1. \u66f4\u65b0\u955c\u50cf\ndocker pull football-prediction:new-version\n\n# 2. \u66f4\u65b0\u90e8\u7f72\nkubectl set image deployment/football-prediction \\\n  app=football-prediction:new-version -n football-prediction\n\n# 3. \u7b49\u5f85\u6eda\u52a8\u66f4\u65b0\nkubectl rollout status deployment/football-prediction -n football-prediction\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_20","title":"\u5907\u4efd\u7b56\u7565","text":"<pre><code># \u6570\u636e\u5e93\u5907\u4efd\nkubectl exec -it postgres-pod -- pg_dump -U user football_prod &gt; backup.sql\n\n# Redis \u5907\u4efd\nkubectl exec -it redis-pod -- redis-cli BGSAVE\n</code></pre>"},{"location":"how-to/DEPLOYMENT_GUIDE_V2/#_21","title":"\u8054\u7cfb\u652f\u6301","text":"<p>\u5982\u6709\u90e8\u7f72\u95ee\u9898\uff0c\u8bf7\u8054\u7cfb\uff1a</p> <ul> <li>\u90ae\u7bb1\uff1asupport@football-prediction.com</li> <li>\u6587\u6863\uff1ahttps://docs.football-prediction.com</li> <li>GitHub Issues\uff1ahttps://github.com/your-org/football-prediction/issues</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/","title":"\ud83d\udcd6 Makefile \u4f7f\u7528\u6307\u5357","text":"<p>\u672c\u6307\u5357\u8be6\u7ec6\u4ecb\u7ecdFootballPrediction\u9879\u76ee\u4e2dMakefile\u7684\u6240\u6709\u547d\u4ee4\u548c\u4f7f\u7528\u573a\u666f\u3002</p>"},{"location":"how-to/MAKEFILE_GUIDE/#_1","title":"\ud83c\udfaf \u6838\u5fc3\u7406\u5ff5","text":"<p>Makefile\u5c06\u6240\u6709\u5f00\u53d1\u6d41\u7a0b\u4e2d\u7684\"\u7ec6\u8282\u89c4\u5219\"\u81ea\u52a8\u5316\uff0c\u8ba9\u4f60\u4e13\u6ce8\u4e8e\u7f16\u7801\u800c\u4e0d\u662f\u73af\u5883\u914d\u7f6e\u548c\u8d28\u91cf\u68c0\u67e5\u3002</p>"},{"location":"how-to/MAKEFILE_GUIDE/#_2","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":"<pre><code># \u67e5\u770b\u6240\u6709\u53ef\u7528\u547d\u4ee4\nmake help\n\n# \u4e00\u952e\u521d\u59cb\u5316\u5f00\u53d1\u73af\u5883\nmake init\n\n# \u5feb\u901f\u5f00\u53d1\u73af\u5883\u51c6\u5907\nmake dev\n\n# \u63d0\u4ea4\u524d\u5b8c\u6574\u68c0\u67e5\nmake prepush\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_3","title":"\ud83d\udccb \u547d\u4ee4\u8be6\u89e3","text":""},{"location":"how-to/MAKEFILE_GUIDE/#_4","title":"\ud83c\udf10 \u73af\u5883\u7ba1\u7406","text":""},{"location":"how-to/MAKEFILE_GUIDE/#make-venv","title":"<code>make venv</code>","text":"<p>\u521b\u5efaPython\u865a\u62df\u73af\u5883</p> <pre><code>make venv\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u5728\u9879\u76ee\u6839\u76ee\u5f55\u521b\u5efa<code>venv</code>\u865a\u62df\u73af\u5883</li> <li>\u81ea\u52a8\u4f7f\u7528python3</li> <li>\u5e42\u7b49\u64cd\u4f5c\uff0c\u91cd\u590d\u6267\u884c\u5b89\u5168</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-install","title":"<code>make install</code>","text":"<p>\u5b89\u88c5\u9879\u76ee\u4f9d\u8d56</p> <pre><code>make install\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u81ea\u52a8\u521b\u5efa\u865a\u62df\u73af\u5883\uff08\u5982\u679c\u4e0d\u5b58\u5728\uff09</li> <li>\u5347\u7ea7pip\u3001setuptools\u3001wheel\u5230\u6700\u65b0\u7248\u672c</li> <li>\u5b89\u88c5requirements.txt\u4e2d\u7684\u6240\u6709\u4f9d\u8d56</li> <li>\u9002\u5408\u9996\u6b21\u8bbe\u7f6e\u548c\u4f9d\u8d56\u66f4\u65b0</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-init","title":"<code>make init</code>","text":"<p>\u521d\u59cb\u5316\u9879\u76ee\uff08\u9996\u6b21\u4f7f\u7528\uff09</p> <pre><code>make init\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u6267\u884c<code>make install</code></li> <li>\u8fd0\u884c<code>scripts/setup_project.py</code>\u521b\u5efa\u57fa\u7840\u6587\u4ef6\u7ed3\u6784</li> <li>\u9002\u5408\u5168\u65b0\u9879\u76ee\u7684\u521d\u59cb\u5316</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-clean","title":"<code>make clean</code>","text":"<p>\u6e05\u7406\u73af\u5883\u548c\u7f13\u5b58</p> <pre><code>make clean\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u5220\u9664\u865a\u62df\u73af\u5883</li> <li>\u6e05\u7406\u6240\u6709Python\u7f13\u5b58\uff08pycache\u3001*.pyc\uff09</li> <li>\u5220\u9664\u6d4b\u8bd5\u548c\u5de5\u5177\u7f13\u5b58\uff08.pytest_cache\u3001.mypy_cache\u7b49\uff09</li> <li>\u6e05\u7406\u6784\u5efa\u4ea7\u7269</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#_5","title":"\ud83d\udd0d \u73af\u5883\u68c0\u67e5","text":""},{"location":"how-to/MAKEFILE_GUIDE/#make-env-check","title":"<code>make env-check</code>","text":"<p>\u5f00\u53d1\u73af\u5883\u68c0\u67e5</p> <pre><code>make env-check\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u68c0\u67e5\u865a\u62df\u73af\u5883\u72b6\u6001</li> <li>\u9a8c\u8bc1\u4f9d\u8d56\u5b8c\u6574\u6027</li> <li>\u68c0\u67e5Git\u5206\u652f\u548c\u540c\u6b65\u72b6\u6001</li> <li>\u9a8c\u8bc1\u5f00\u53d1\u5de5\u5177\u5b8c\u6574\u6027</li> <li>\u68c0\u67e5\u9879\u76ee\u7ed3\u6784</li> <li>\u63d0\u4f9b\u8be6\u7ec6\u7684\u4fee\u590d\u5efa\u8bae</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-context","title":"<code>make context</code>","text":"<p>\u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587</p> <pre><code>make context\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u626b\u63cf\u9879\u76ee\u7ed3\u6784</li> <li>\u5206\u6790Git\u5386\u53f2</li> <li>\u8bc6\u522b\u5df2\u6709\u6a21\u5757\u548c\u6d4b\u8bd5</li> <li>\u751f\u6210\u4e0a\u4e0b\u6587\u5feb\u7167\u5230<code>logs/project_context.json</code></li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-status","title":"<code>make status</code>","text":"<p>\u67e5\u770b\u9879\u76ee\u72b6\u6001</p> <pre><code>make status\n</code></pre> <p>\u8f93\u51fa\u4fe1\u606f\uff1a</p> <ul> <li>\u9879\u76ee\u57fa\u672c\u4fe1\u606f\uff08\u540d\u79f0\u3001Python\u7248\u672c\uff09</li> <li>\u4ee3\u7801\u7edf\u8ba1\uff08\u6587\u4ef6\u6570\u3001\u884c\u6570\uff09</li> <li>Git\u72b6\u6001\uff08\u5206\u652f\u3001\u6700\u8fd1\u63d0\u4ea4\u3001\u672a\u63d0\u4ea4\u6587\u4ef6\uff09</li> <li>\u4f9d\u8d56\u72b6\u6001\uff08\u4f9d\u8d56\u6587\u4ef6\u3001\u5305\u6570\u91cf\uff09</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#_6","title":"\ud83d\udd27 \u4ee3\u7801\u8d28\u91cf","text":""},{"location":"how-to/MAKEFILE_GUIDE/#make-format","title":"<code>make format</code>","text":"<p>\u4ee3\u7801\u683c\u5f0f\u5316</p> <pre><code>make format\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4f7f\u7528black\u683c\u5f0f\u5316Python\u4ee3\u7801\uff08line-length=88\uff09</li> <li>\u4f7f\u7528isort\u6574\u7406\u5bfc\u5165\u8bed\u53e5</li> <li>\u81ea\u52a8\u4fee\u590d\u683c\u5f0f\u95ee\u9898</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-lint","title":"<code>make lint</code>","text":"<p>\u4ee3\u7801\u98ce\u683c\u68c0\u67e5</p> <pre><code>make lint\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4f7f\u7528flake8\u68c0\u67e5\u4ee3\u7801\u98ce\u683c</li> <li>\u6700\u5927\u884c\u957f\u5ea688\u5b57\u7b26</li> <li>\u5ffd\u7565E203\u3001W503\u89c4\u5219\uff08\u4e0eblack\u517c\u5bb9\uff09</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-typecheck","title":"<code>make typecheck</code>","text":"<p>\u7c7b\u578b\u68c0\u67e5</p> <pre><code>make typecheck\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4f7f\u7528mypy\u8fdb\u884c\u9759\u6001\u7c7b\u578b\u68c0\u67e5</li> <li>\u5ffd\u7565\u7f3a\u5931\u7684\u7c7b\u578b\u6ce8\u89e3\u5bfc\u5165</li> <li>\u5982\u679cmypy\u672a\u5b89\u88c5\u5219\u8df3\u8fc7</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-security","title":"<code>make security</code>","text":"<p>\u5b89\u5168\u68c0\u67e5</p> <pre><code>make security\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4f7f\u7528bandit\u626b\u63cf\u5b89\u5168\u6f0f\u6d1e</li> <li>\u8f93\u51faJSON\u683c\u5f0f\u62a5\u544a</li> <li>\u5982\u679cbandit\u672a\u5b89\u88c5\u5219\u8df3\u8fc7</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-complexity","title":"<code>make complexity</code>","text":"<p>\u590d\u6742\u5ea6\u68c0\u67e5</p> <pre><code>make complexity\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4f7f\u7528radon\u5206\u6790\u4ee3\u7801\u590d\u6742\u5ea6</li> <li>\u663e\u793a\u6bcf\u4e2a\u51fd\u6570\u7684\u590d\u6742\u5ea6\u8bc4\u5206</li> <li>\u5982\u679cradon\u672a\u5b89\u88c5\u5219\u8df3\u8fc7</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#_7","title":"\ud83e\uddea \u6d4b\u8bd5","text":""},{"location":"how-to/MAKEFILE_GUIDE/#make-test","title":"<code>make test</code>","text":"<p>\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5</p> <pre><code>make test\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4f7f\u7528pytest\u8fd0\u884ctests/\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6d4b\u8bd5</li> <li>\u8be6\u7ec6\u8f93\u51fa\u6a21\u5f0f\uff08-v\uff09</li> <li>\u7b80\u77ed\u56de\u6eaf\u4fe1\u606f\uff08--tb=short\uff09</li> <li>\u5982\u679c\u65e0\u6d4b\u8bd5\u6587\u4ef6\u5219\u8df3\u8fc7</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-coverage","title":"<code>make coverage</code>","text":"<p>\u8fd0\u884c\u8986\u76d6\u7387\u6d4b\u8bd5</p> <pre><code>make coverage\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4f7f\u7528coverage + pytest\u8fd0\u884c\u6d4b\u8bd5</li> <li>\u751f\u6210\u8986\u76d6\u7387\u62a5\u544a</li> <li>\u663e\u793a\u7f3a\u5931\u8986\u76d6\u7684\u884c\u53f7</li> <li>\u5982\u679ccoverage\u672a\u5b89\u88c5\u5219\u8fd0\u884c\u666e\u901a\u6d4b\u8bd5</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-test-watch","title":"<code>make test-watch</code>","text":"<p>\u76d1\u63a7\u6a21\u5f0f\u8fd0\u884c\u6d4b\u8bd5</p> <pre><code>make test-watch\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4f7f\u7528pytest-watch\u76d1\u63a7\u6587\u4ef6\u53d8\u5316</li> <li>\u81ea\u52a8\u91cd\u65b0\u8fd0\u884c\u6d4b\u8bd5</li> <li>\u9002\u5408\u5f00\u53d1\u65f6\u6301\u7eed\u6d4b\u8bd5</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#_8","title":"\u2705 \u5b8c\u6574\u6d41\u7a0b","text":""},{"location":"how-to/MAKEFILE_GUIDE/#make-quality","title":"<code>make quality</code>","text":"<p>\u5b8c\u6574\u8d28\u91cf\u68c0\u67e5</p> <pre><code>make quality\n</code></pre> <p>\u6267\u884c\u987a\u5e8f\uff1a</p> <ol> <li>\u4ee3\u7801\u683c\u5f0f\u5316\uff08format\uff09</li> <li>\u4ee3\u7801\u98ce\u683c\u68c0\u67e5\uff08lint\uff09</li> <li>\u7c7b\u578b\u68c0\u67e5\uff08typecheck\uff09</li> <li>\u5b89\u5168\u68c0\u67e5\uff08security\uff09</li> <li>\u590d\u6742\u5ea6\u68c0\u67e5\uff08complexity\uff09</li> <li>\u8fd0\u884c\u8d28\u91cf\u68c0\u67e5\u5668\u811a\u672c</li> </ol>"},{"location":"how-to/MAKEFILE_GUIDE/#make-ci","title":"<code>make ci</code>","text":"<p>\u672c\u5730CI\u6a21\u62df</p> <pre><code>make ci\n</code></pre> <p>\u6267\u884c\u987a\u5e8f\uff1a</p> <ol> <li>\u73af\u5883\u68c0\u67e5\uff08env-check\uff09</li> <li>\u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587\uff08context\uff09</li> <li>\u5b8c\u6574\u8d28\u91cf\u68c0\u67e5\uff08quality\uff09</li> <li>\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\uff08test\uff09</li> <li>\u8fd0\u884c\u8986\u76d6\u7387\u6d4b\u8bd5\uff08coverage\uff09</li> </ol>"},{"location":"how-to/MAKEFILE_GUIDE/#make-prepush","title":"<code>make prepush</code>","text":"<p>\u63d0\u4ea4\u524d\u5b8c\u6574\u68c0\u67e5\u3001\u63a8\u9001\u548cIssue\u540c\u6b65</p> <pre><code>make prepush\n</code></pre> <p>\u6267\u884c\u987a\u5e8f\uff1a</p> <ol> <li>\u8fd0\u884c\u5b8c\u6574CI\u68c0\u67e5\uff08ci\uff09</li> <li>\u68c0\u67e5Git\u5de5\u4f5c\u533a\u72b6\u6001</li> <li>\u5982\u679c\u6709\u66f4\u6539\uff1a</li> <li>\u6dfb\u52a0\u6240\u6709\u6587\u4ef6\u5230\u6682\u5b58\u533a</li> <li>\u521b\u5efa\u81ea\u52a8\u63d0\u4ea4\uff08\u65f6\u95f4\u6233\uff09</li> <li>\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93</li> <li>\u81ea\u52a8\u540c\u6b65ISSUES.md\u5230\u8fdc\u7a0b\u4ed3\u5e93\uff08sync\uff09</li> <li>\u663e\u793a\u5b8c\u6210\u72b6\u6001</li> </ol>"},{"location":"how-to/MAKEFILE_GUIDE/#make-prepush-with-message","title":"<code>make prepush-with-message</code>","text":"<p>\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d88\u606f\u7684\u63d0\u4ea4\u524d\u68c0\u67e5</p> <pre><code>make prepush-with-message\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4e0eprepush\u76f8\u540c\uff0c\u4f46\u5141\u8bb8\u8f93\u5165\u81ea\u5b9a\u4e49\u63d0\u4ea4\u6d88\u606f</li> <li>\u4ea4\u4e92\u5f0f\u8f93\u5165\u63d0\u4ea4\u4fe1\u606f</li> <li>\u5b8c\u6210\u540e\u81ea\u52a8\u540c\u6b65Issues</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#_9","title":"\ud83c\udfaf \u5feb\u6377\u65b9\u5f0f","text":""},{"location":"how-to/MAKEFILE_GUIDE/#make-dev","title":"<code>make dev</code>","text":"<p>\u5f00\u53d1\u73af\u5883\u5feb\u901f\u51c6\u5907</p> <pre><code>make dev\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u5b89\u88c5\u4f9d\u8d56\uff08install\uff09</li> <li>\u73af\u5883\u68c0\u67e5\uff08env-check\uff09</li> <li>\u9002\u5408\u6bcf\u65e5\u5f00\u53d1\u5f00\u59cb\u65f6\u4f7f\u7528</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-fix","title":"<code>make fix</code>","text":"<p>\u5feb\u901f\u4fee\u590d\u4ee3\u7801\u95ee\u9898</p> <pre><code>make fix\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4ee3\u7801\u683c\u5f0f\u5316\uff08format\uff09</li> <li>\u4ee3\u7801\u98ce\u683c\u68c0\u67e5\uff08lint\uff09</li> <li>\u5feb\u901f\u4fee\u590d\u5e38\u89c1\u95ee\u9898</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-check","title":"<code>make check</code>","text":"<p>\u5feb\u901f\u8d28\u91cf\u68c0\u67e5</p> <pre><code>make check\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u5b8c\u6574\u8d28\u91cf\u68c0\u67e5\uff08quality\uff09</li> <li>\u8fd0\u884c\u6d4b\u8bd5\uff08test\uff09</li> <li>\u9002\u5408\u63d0\u4ea4\u524d\u5feb\u901f\u9a8c\u8bc1</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#_10","title":"\ud83d\ude80 \u9ad8\u7ea7\u7528\u6cd5","text":""},{"location":"how-to/MAKEFILE_GUIDE/#make-cursor-run","title":"<code>make cursor-run</code>","text":"<p>\u8fd0\u884cCursor\u95ed\u73af\u7cfb\u7edf</p> <pre><code>make cursor-run\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u4ea4\u4e92\u5f0f\u8f93\u5165\u4efb\u52a1\u63cf\u8ff0</li> <li>\u8fd0\u884c\u5b8c\u6574\u7684Cursor\u95ed\u73af\u6d41\u7a0b</li> <li>\u751f\u6210\u6267\u884c\u62a5\u544a</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-sync","title":"<code>make sync</code>","text":"<p>\u540c\u6b65ISSUES.md\u5230\u8fdc\u7a0b\u4ed3\u5e93</p> <pre><code>make sync\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u8bfb\u53d6\u9879\u76ee\u6839\u76ee\u5f55\u7684ISSUES.md\u6587\u4ef6</li> <li>\u6839\u636eGIT_PLATFORM\u73af\u5883\u53d8\u91cf\u9009\u62e9\u5e73\u53f0\uff08github/gitee\uff09</li> <li>\u4f7f\u7528\u5bf9\u5e94\u7684CLI\u5de5\u5177\uff08gh/tea\uff09\u521b\u5efaIssues</li> <li>\u81ea\u52a8\u8df3\u8fc7\u6ce8\u91ca\u884c\u548c\u7a7a\u884c</li> <li>\u63d0\u4f9b\u8be6\u7ec6\u7684\u6267\u884c\u53cd\u9988</li> </ul> <p>\u524d\u7f6e\u8981\u6c42\uff1a</p> <pre><code># GitHub\u5e73\u53f0\nexport GIT_PLATFORM=github\nbrew install gh  # \u6216 apt install gh\ngh auth login\n\n# Gitee\u5e73\u53f0\nexport GIT_PLATFORM=gitee\n# \u4e0b\u8f7d\u5b89\u88c5 tea CLI from https://gitea.com/gitea/tea\ntea login add\n</code></pre> <p>ISSUES.md\u683c\u5f0f\uff1a</p> <pre><code>\u5b9e\u73b0\u7528\u6237\u8ba4\u8bc1\u529f\u80fd\n\u6dfb\u52a0\u6570\u636e\u5bfc\u51fa\u529f\u80fd\n# \u8fd9\u662f\u6ce8\u91ca\uff0c\u4f1a\u88ab\u8df3\u8fc7\n\u4fee\u590d\u79fb\u52a8\u7aef\u663e\u793a\u95ee\u9898\n\n\u4f18\u5316\u6570\u636e\u5e93\u67e5\u8be2\u6027\u80fd\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#make-sync-config","title":"<code>make sync-config</code>","text":"<p>\u914d\u7f6eIssue\u540c\u6b65\u73af\u5883</p> <pre><code>make sync-config\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u663e\u793a\u8be6\u7ec6\u7684\u914d\u7f6e\u5411\u5bfc</li> <li>\u63d0\u4f9b\u5e73\u53f0\u9009\u62e9\u6307\u5bfc</li> <li>\u8bf4\u660eCLI\u5de5\u5177\u5b89\u88c5\u65b9\u6cd5</li> <li>\u5c55\u793a\u8ba4\u8bc1\u914d\u7f6e\u6b65\u9aa4</li> <li>\u63d0\u4f9bISSUES.md\u683c\u5f0f\u793a\u4f8b</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#make-clean-logs","title":"<code>make clean-logs</code>","text":"<p>\u6e05\u7406\u65e5\u5fd7\u6587\u4ef6</p> <pre><code>make clean-logs\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\u6e05\u7406logs/\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u65e5\u5fd7\u6587\u4ef6</li> <li>\u5305\u62ec.log\u548c.json\u6587\u4ef6</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#_11","title":"\ud83d\udcc8 \u4f7f\u7528\u573a\u666f","text":""},{"location":"how-to/MAKEFILE_GUIDE/#_12","title":"\ud83c\udf05 \u6bcf\u65e5\u5f00\u53d1\u6d41\u7a0b","text":"<pre><code># 1. \u5f00\u59cb\u5f00\u53d1\nmake dev\n\n# 2. \u7f16\u5199\u4ee3\u7801...\n\n# 3. \u6301\u7eed\u6d4b\u8bd5\uff08\u53ef\u9009\uff09\nmake test-watch\n\n# 4. \u63d0\u4ea4\u524d\u68c0\u67e5\nmake prepush\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_13","title":"\ud83d\udd27 \u4ee3\u7801\u95ee\u9898\u4fee\u590d","text":"<pre><code># 1. \u5feb\u901f\u4fee\u590d\u683c\u5f0f\u95ee\u9898\nmake fix\n\n# 2. \u5b8c\u6574\u8d28\u91cf\u68c0\u67e5\nmake quality\n\n# 3. \u8fd0\u884c\u6d4b\u8bd5\u786e\u8ba4\nmake test\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#cicd","title":"\ud83d\ude80 CI/CD\u51c6\u5907","text":"<pre><code># 1. \u672c\u5730CI\u6a21\u62df\nmake ci\n\n# 2. \u5982\u679c\u901a\u8fc7\uff0c\u51c6\u5907\u63a8\u9001\nmake prepush-with-message\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_14","title":"\ud83c\udd95 \u65b0\u56e2\u961f\u6210\u5458\u5165\u804c","text":"<pre><code># 1. \u9879\u76ee\u521d\u59cb\u5316\nmake init\n\n# 2. \u67e5\u770b\u9879\u76ee\u72b6\u6001\nmake status\n\n# 3. \u8fd0\u884c\u73af\u5883\u68c0\u67e5\nmake env-check\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_15","title":"\ud83e\uddf9 \u73af\u5883\u91cd\u7f6e","text":"<pre><code># 1. \u6e05\u7406\u6240\u6709\u7f13\u5b58\nmake clean\n\n# 2. \u91cd\u65b0\u5b89\u88c5\nmake install\n\n# 3. \u9a8c\u8bc1\u73af\u5883\nmake env-check\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_16","title":"\ud83c\udfa8 \u81ea\u5b9a\u4e49\u548c\u6269\u5c55","text":""},{"location":"how-to/MAKEFILE_GUIDE/#_17","title":"\u73af\u5883\u53d8\u91cf\u914d\u7f6e","text":"<pre><code># \u8bbe\u7f6e\u66f4\u4e25\u683c\u7684\u8d28\u91cf\u6807\u51c6\nexport TEST_COVERAGE_MIN=90\nexport MAX_COMPLEXITY=8\n\n# \u4f7f\u7528\u81ea\u5b9a\u4e49\u76ee\u5f55\nexport BACKUP_DIR=\"backup/$(date +%Y%m%d)\"\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#makefile_1","title":"\u4fee\u6539Makefile\u53d8\u91cf","text":"<p>\u7f16\u8f91\u9879\u76ee\u6839\u76ee\u5f55\u7684<code>Makefile</code>\uff1a</p> <pre><code># \u81ea\u5b9a\u4e49Python\u7248\u672c\nPYTHON := python3.11\n\n# \u81ea\u5b9a\u4e49\u865a\u62df\u73af\u5883\u76ee\u5f55\nVENV := .venv\n\n# \u81ea\u5b9a\u4e49\u9879\u76ee\u540d\u79f0\nPROJECT_NAME := MyProject\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_18","title":"\ud83d\udea8 \u6545\u969c\u6392\u9664","text":""},{"location":"how-to/MAKEFILE_GUIDE/#_19","title":"\u5e38\u89c1\u95ee\u9898","text":"<ol> <li>\u865a\u62df\u73af\u5883\u6fc0\u6d3b\u5931\u8d25</li> </ol> <pre><code># \u68c0\u67e5shell\u7c7b\u578b\necho $SHELL\n\n# \u624b\u52a8\u6fc0\u6d3b\u6d4b\u8bd5\n. venv/bin/activate\n</code></pre> <ol> <li>\u4f9d\u8d56\u5b89\u88c5\u5931\u8d25</li> </ol> <pre><code># \u6e05\u7406\u7f13\u5b58\u91cd\u8bd5\nmake clean\nmake install\n</code></pre> <ol> <li>\u6d4b\u8bd5\u5931\u8d25</li> </ol> <pre><code># \u67e5\u770b\u8be6\u7ec6\u9519\u8bef\nmake test\n\n# \u68c0\u67e5\u6d4b\u8bd5\u6587\u4ef6\nls -la tests/\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_20","title":"\u8c03\u8bd5\u6280\u5de7","text":"<pre><code># \u67e5\u770bmake\u547d\u4ee4\u6267\u884c\u8fc7\u7a0b\nmake -n prepush\n\n# \u542f\u7528\u8be6\u7ec6\u8f93\u51fa\nmake V=1 install\n\n# \u68c0\u67e5Makefile\u8bed\u6cd5\nmake -p | grep \"^[a-zA-Z]\"\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_21","title":"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u4f7f\u7528prepush\u8fdb\u884c\u63d0\u4ea4</li> <li>\u786e\u4fdd\u4ee3\u7801\u8d28\u91cf</li> <li>\u907f\u514dCI\u5931\u8d25</li> <li> <p>\u4fdd\u6301\u56e2\u961f\u4ee3\u7801\u4e00\u81f4\u6027</p> </li> <li> <p>\u5b9a\u671f\u8fd0\u884cenv-check</p> </li> <li>\u53ca\u65f6\u53d1\u73b0\u73af\u5883\u95ee\u9898</li> <li> <p>\u4fdd\u6301\u5f00\u53d1\u73af\u5883\u5065\u5eb7</p> </li> <li> <p>\u5229\u7528\u5feb\u6377\u65b9\u5f0f</p> </li> <li><code>make dev</code> \u5f00\u59cb\u5f00\u53d1</li> <li><code>make fix</code> \u5feb\u901f\u4fee\u590d</li> <li> <p><code>make check</code> \u5feb\u901f\u9a8c\u8bc1</p> </li> <li> <p>\u76d1\u63a7\u9879\u76ee\u72b6\u6001</p> </li> <li><code>make status</code> \u4e86\u89e3\u9879\u76ee\u6982\u51b5</li> <li><code>make context</code> \u5206\u6790\u9879\u76ee\u7ed3\u6784</li> </ol> <p>\ud83d\udca1 \u63d0\u793a\uff1a \u6240\u6709\u547d\u4ee4\u90fd\u8bbe\u8ba1\u4e3a\u5e42\u7b49\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5b89\u5168\u5730\u91cd\u590d\u6267\u884c\u3002\u5982\u679c\u9047\u5230\u95ee\u9898\uff0c\u8fd0\u884c<code>make clean &amp;&amp; make install</code>\u91cd\u7f6e\u73af\u5883\u3002</p>"},{"location":"how-to/MAKEFILE_GUIDE/#_22","title":"\ud83d\udee1\ufe0f \u5931\u8d25\u4fdd\u62a4\u673a\u5236","text":""},{"location":"how-to/MAKEFILE_GUIDE/#_23","title":"\u6838\u5fc3\u6982\u5ff5","text":"<p>FootballPrediction\u7684Makefile\u91c7\u7528\u5206\u5c42\u5931\u8d25\u4fdd\u62a4\u673a\u5236\uff1a</p> <pre><code>make prepush\n    \u2193\nCI\u68c0\u67e5 (env-check + context + quality + test + coverage)\n    \u2193 (\u5982\u679c\u5931\u8d25 \u2192 \u81ea\u52a8\u505c\u6b62)\nGit\u63a8\u9001 (add + commit + push)\n    \u2193\nIssues\u540c\u6b65 (sync)\n    \u2193\n\u5b8c\u6210\u62a5\u544a\n</code></pre> <p>\u5173\u952e\u7279\u6027\uff1a</p> <ul> <li>\u2705 \u96f6\u5bb9\u5fcd\u534a\u6210\u54c1\uff1a\u4efb\u4f55\u68c0\u67e5\u5931\u8d25\u90fd\u4f1a\u963b\u6b62\u63a8\u9001</li> <li>\u2705 \u667a\u80fd\u9519\u8bef\u63d0\u793a\uff1a\u6bcf\u79cd\u5931\u8d25\u90fd\u6709\u5177\u4f53\u7684\u4fee\u590d\u5efa\u8bae</li> <li>\u2705 \u9632\u62a4\u8fdc\u7a0b\u4ed3\u5e93\uff1a\u786e\u4fdd\u63a8\u9001\u7684\u4ee3\u7801\u90fd\u662f\u9ad8\u8d28\u91cf\u7684</li> <li>\u2705 \u5b8c\u6574\u6027\u4fdd\u8bc1\uff1aIssues\u540c\u6b65\u53ea\u5728\u4ee3\u7801\u6210\u529f\u63a8\u9001\u540e\u8fdb\u884c</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#_24","title":"\u5931\u8d25\u68c0\u6d4b\u70b9","text":""},{"location":"how-to/MAKEFILE_GUIDE/#1","title":"1. \u73af\u5883\u68c0\u67e5\u5931\u8d25","text":"<pre><code>make env-check\n# \u5982\u679c\u5931\u8d25\uff1a\n\u274c \u73af\u5883\u68c0\u67e5\u5931\u8d25\n   \u8bf7\u6839\u636e\u4e0a\u8ff0\u5efa\u8bae\u4fee\u590d\u73af\u5883\u95ee\u9898\n</code></pre> <p>\u5e38\u89c1\u95ee\u9898\uff1a</p> <ul> <li>\u865a\u62df\u73af\u5883\u672a\u6fc0\u6d3b</li> <li>\u4f9d\u8d56\u5305\u7f3a\u5931</li> <li>\u5728\u9519\u8bef\u7684Git\u5206\u652f\uff08\u5982main/master\uff09</li> <li>Git\u4ed3\u5e93\u672a\u521d\u59cb\u5316</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#2","title":"2. \u4ee3\u7801\u8d28\u91cf\u68c0\u67e5\u5931\u8d25","text":"<pre><code>make quality\n# \u5982\u679c\u5931\u8d25\uff1a\n\u274c \u8d28\u91cf\u68c0\u67e5\u5931\u8d25\n   \u8bf7\u4fee\u590d\u4ee3\u7801\u8d28\u91cf\u95ee\u9898\u540e\u91cd\u8bd5\n</code></pre> <p>\u5e38\u89c1\u95ee\u9898\uff1a</p> <ul> <li>\u4ee3\u7801\u683c\u5f0f\u4e0d\u89c4\u8303</li> <li>Lint\u89c4\u5219\u8fdd\u53cd</li> <li>\u7c7b\u578b\u68c0\u67e5\u9519\u8bef</li> <li>\u5b89\u5168\u6f0f\u6d1e</li> <li>\u4ee3\u7801\u590d\u6742\u5ea6\u8fc7\u9ad8</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#3","title":"3. \u6d4b\u8bd5\u5931\u8d25","text":"<pre><code>make test\n# \u5982\u679c\u5931\u8d25\uff1a\n\u274c \u5355\u5143\u6d4b\u8bd5\u5931\u8d25\n   \u8bf7\u4fee\u590d\u5931\u8d25\u7684\u6d4b\u8bd5\u540e\u91cd\u8bd5\n</code></pre> <p>\u5e38\u89c1\u95ee\u9898\uff1a</p> <ul> <li>\u6d4b\u8bd5\u7528\u4f8b\u5931\u8d25</li> <li>\u6d4b\u8bd5\u8986\u76d6\u7387\u4e0d\u8db3</li> <li>\u6d4b\u8bd5\u73af\u5883\u95ee\u9898</li> </ul>"},{"location":"how-to/MAKEFILE_GUIDE/#_25","title":"\u4fee\u590d\u5efa\u8bae\u7cfb\u7edf","text":"<p>\u6bcf\u79cd\u5931\u8d25\u90fd\u63d0\u4f9b\u9488\u5bf9\u6027\u7684\u4fee\u590d\u5efa\u8bae\uff1a</p> <pre><code>\ud83d\udca1 \u5feb\u901f\u4fee\u590d\u5efa\u8bae:\n   - \u4ee3\u7801\u683c\u5f0f\u95ee\u9898: make fix\n   - \u6d4b\u8bd5\u5931\u8d25: make test\n   - \u73af\u5883\u95ee\u9898: make env-check\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_26","title":"\u793a\u4f8b\uff1a\u5b8c\u6574\u7684\u5931\u8d25\u4fdd\u62a4\u6f14\u793a","text":"<pre><code># 1. \u521b\u5efa\u95ee\u9898\u4ee3\u7801\uff08\u6f14\u793a\u7528\uff09\necho \"def bad_function( x,y ):\" &gt; src/bad_code.py\necho \"  return x+y\" &gt;&gt; src/bad_code.py\n\n# 2. \u8fd0\u884cprepush\nmake prepush\n\n# \u7ed3\u679c\uff1a\n&gt;&gt;&gt; \u5f00\u59cbprepush\u6d41\u7a0b\uff08\u5305\u542b\u5931\u8d25\u4fdd\u62a4\u673a\u5236\uff09...\n&gt;&gt;&gt; \u7b2c1\u6b65: \u6267\u884cCI\u68c0\u67e5...\n&gt;&gt;&gt; \u4ee3\u7801\u683c\u5f0f\u5316...\n&gt;&gt;&gt; \u4ee3\u7801\u98ce\u683c\u68c0\u67e5...\nsrc/bad_code.py:1:18: E201 whitespace after '('\nsrc/bad_code.py:1:21: E202 whitespace before ')'\n\u274c \u8d28\u91cf\u68c0\u67e5\u5931\u8d25\n\u274c CI\u68c0\u67e5\u5931\u8d25\uff0c\u505c\u6b62\u63a8\u9001\u6d41\u7a0b\n\ud83d\udca1 \u5feb\u901f\u4fee\u590d\u5efa\u8bae:\n   - \u4ee3\u7801\u683c\u5f0f\u95ee\u9898: make fix\n\n# 3. \u4fee\u590d\u95ee\u9898\nmake fix\n\n# 4. \u91cd\u65b0\u8fd0\u884c\nmake prepush\n# \u73b0\u5728\u4f1a\u6210\u529f\u901a\u8fc7\u6240\u6709\u68c0\u67e5\u5e76\u63a8\u9001\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_27","title":"\u9ad8\u7ea7\u914d\u7f6e","text":""},{"location":"how-to/MAKEFILE_GUIDE/#_28","title":"\u81ea\u5b9a\u4e49\u5931\u8d25\u9608\u503c","text":"<pre><code># \u8bbe\u7f6e\u66f4\u4e25\u683c\u7684\u6d4b\u8bd5\u8986\u76d6\u7387\u8981\u6c42\nexport MIN_COVERAGE=90\n\n# \u8bbe\u7f6e\u66f4\u4e25\u683c\u7684\u590d\u6742\u5ea6\u9650\u5236\nexport MAX_COMPLEXITY=5\n\nmake prepush\n</code></pre>"},{"location":"how-to/MAKEFILE_GUIDE/#_29","title":"\u8c03\u8bd5\u5931\u8d25","text":"<pre><code># \u5355\u72ec\u8fd0\u884c\u5404\u4e2a\u68c0\u67e5\uff0c\u5b9a\u4f4d\u95ee\u9898\nmake env-check    # \u73af\u5883\u95ee\u9898\nmake quality      # \u4ee3\u7801\u8d28\u91cf\u95ee\u9898\nmake test         # \u6d4b\u8bd5\u95ee\u9898\nmake ci           # \u5b8c\u6574CI\u68c0\u67e5\n</code></pre>"},{"location":"how-to/MIGRATION_GUIDE/","title":"\u6a21\u5757\u5316\u4ee3\u7801\u8fc1\u79fb\u6307\u5357","text":""},{"location":"how-to/MIGRATION_GUIDE/#_2","title":"\ud83d\udcd6 \u6982\u8ff0","text":"<p>\u672c\u6307\u5357\u5e2e\u52a9\u60a8\u4ece\u65e7\u7684\u4ee3\u7801\u7ed3\u6784\u8fc1\u79fb\u5230\u65b0\u7684\u6a21\u5757\u5316\u67b6\u6784\u3002</p>"},{"location":"how-to/MIGRATION_GUIDE/#_3","title":"\ud83d\udd04 \u5bfc\u5165\u8def\u5f84\u6620\u5c04","text":""},{"location":"how-to/MIGRATION_GUIDE/#_4","title":"\u6838\u5fc3\u670d\u52a1\u6a21\u5757","text":"\u65e7\u8def\u5f84 \u65b0\u8def\u5f84 \u8bf4\u660e <code>src.services.audit_service</code> <code>src.services.audit_service_mod</code> \u5ba1\u8ba1\u670d\u52a1\u62c6\u5206\u4e3a7\u4e2a\u4e13\u4e1a\u6a21\u5757 <code>src.services.manager</code> <code>src.services.manager_mod</code> \u670d\u52a1\u7ba1\u7406\u5668 <code>src.services.data_processing</code> <code>src.services.data_processing_mod</code> \u6570\u636e\u5904\u7406\u670d\u52a1"},{"location":"how-to/MIGRATION_GUIDE/#_5","title":"\u6570\u636e\u5e93\u6a21\u5757","text":"\u65e7\u8def\u5f84 \u65b0\u8def\u5f84 \u8bf4\u660e <code>src.database.connection</code> <code>src.database.connection_mod</code> \u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406 <code>src.database.models</code> <code>src.database.models.*</code> \u6a21\u578b\u6309\u529f\u80fd\u5206\u7c7b"},{"location":"how-to/MIGRATION_GUIDE/#_6","title":"\u7f13\u5b58\u6a21\u5757","text":"\u65e7\u8def\u5f84 \u65b0\u8def\u5f84 \u8bf4\u660e <code>src.cache.ttl_cache_improved</code> <code>src.cache.ttl_cache_improved_mod</code> TTL\u7f13\u5b58\u5b9e\u73b0"},{"location":"how-to/MIGRATION_GUIDE/#_7","title":"\u6570\u636e\u5904\u7406\u6a21\u5757","text":"\u65e7\u8def\u5f84 \u65b0\u8def\u5f84 \u8bf4\u660e <code>src.data.processing.football_data_cleaner</code> <code>src.data.processing.football_data_cleaner_mod</code> \u6570\u636e\u6e05\u6d17 <code>src.data.quality.exception_handler</code> <code>src.data.quality.exception_handler_mod</code> \u5f02\u5e38\u5904\u7406"},{"location":"how-to/MIGRATION_GUIDE/#_8","title":"\u76d1\u63a7\u6a21\u5757","text":"\u65e7\u8def\u5f84 \u65b0\u8def\u5f84 \u8bf4\u660e <code>src.monitoring.system_monitor</code> <code>src.monitoring.system_monitor_mod</code> \u7cfb\u7edf\u76d1\u63a7 <code>src.monitoring.metrics_collector_enhanced</code> <code>src.monitoring.metrics_collector_enhanced_mod</code> \u6307\u6807\u6536\u96c6"},{"location":"how-to/MIGRATION_GUIDE/#_9","title":"\ud83d\udcdd \u8fc1\u79fb\u6b65\u9aa4","text":""},{"location":"how-to/MIGRATION_GUIDE/#1","title":"1. \u7acb\u5373\u53ef\u7528\uff08\u65e0\u9700\u66f4\u6539\uff09","text":"<p>\u60a8\u7684\u73b0\u6709\u4ee3\u7801\u65e0\u9700\u4efb\u4f55\u66f4\u6539\u5373\u53ef\u5de5\u4f5c\uff0c\u56e0\u4e3a\u6211\u4eec\u521b\u5efa\u4e86\u517c\u5bb9\u6027\u57ab\u7247\uff1a</p> <pre><code># \u8fd9\u4e9b\u5bfc\u5165\u4ecd\u7136\u6709\u6548\nfrom src.services.audit_service import AuditService\nfrom src.services.manager import ServiceManager\nfrom src.services.data_processing import DataProcessingService\n</code></pre>"},{"location":"how-to/MIGRATION_GUIDE/#2","title":"2. \u9010\u6b65\u8fc1\u79fb\u5230\u65b0\u8def\u5f84\uff08\u63a8\u8350\uff09","text":"<p>\u5f53\u60a8\u51c6\u5907\u66f4\u65b0\u4ee3\u7801\u65f6\uff0c\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <pre><code># \u65e7\u4ee3\u7801\nfrom src.services.audit_service import AuditService\n\n# \u65b0\u4ee3\u7801\uff08\u63a8\u8350\uff09\nfrom src.services.audit_service_mod import AuditService\n</code></pre>"},{"location":"how-to/MIGRATION_GUIDE/#3","title":"3. \u4f7f\u7528\u7279\u5b9a\u7684\u5b50\u6a21\u5757","text":"<p>\u5bf9\u4e8e\u66f4\u7cbe\u7ec6\u7684\u63a7\u5236\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5bfc\u5165\u7279\u5b9a\u7684\u7ec4\u4ef6\uff1a</p> <pre><code># \u5ba1\u8ba1\u670d\u52a1\u793a\u4f8b\nfrom src.services.audit_service_mod.service import AuditService\nfrom src.services.audit_service_mod.models import AuditLog, AuditContext\nfrom src.services.audit_service_mod.storage import AuditStorage\n\n# \u6570\u636e\u5904\u7406\u793a\u4f8b\nfrom src.services.data_processing_mod.service import DataProcessingService\nfrom src.services.data_processing_mod.validators import DataValidator\n</code></pre>"},{"location":"how-to/MIGRATION_GUIDE/#_10","title":"\ud83c\udfaf \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"how-to/MIGRATION_GUIDE/#1_1","title":"1. \u65b0\u4ee3\u7801\u4f7f\u7528\u65b0\u8def\u5f84","text":"<pre><code># \u2705 \u63a8\u8350\nfrom src.services.audit_service_mod import AuditService\n\n# \u274c \u4e0d\u63a8\u8350\uff08\u4f46\u4ecd\u6709\u6548\uff09\nfrom src.services.audit_service import AuditService\n</code></pre>"},{"location":"how-to/MIGRATION_GUIDE/#2_1","title":"2. \u6309\u9700\u5bfc\u5165\u7279\u5b9a\u529f\u80fd","text":"<pre><code># \u2705 \u53ea\u5bfc\u5165\u9700\u8981\u7684\u529f\u80fd\nfrom src.services.audit_service_mod.models import AuditContext\nfrom src.services.audit_service_mod.utils import sanitize_data\n\n# \u274c \u5bfc\u5165\u6574\u4e2a\u6a21\u5757\nfrom src.services.audit_service_mod import *\n</code></pre>"},{"location":"how-to/MIGRATION_GUIDE/#3_1","title":"3. \u5229\u7528\u65b0\u7684\u6a21\u5757\u5316\u7ed3\u6784","text":"<pre><code># \u73b0\u5728\u53ef\u4ee5\u72ec\u7acb\u4f7f\u7528\u5404\u4e2a\u7ec4\u4ef6\nfrom src.services.audit_service_mod.storage import AuditStorage\nstorage = AuditStorage()  # \u4e0d\u9700\u8981\u5b8c\u6574\u7684AuditService\n</code></pre>"},{"location":"how-to/MIGRATION_GUIDE/#_11","title":"\ud83d\udee0\ufe0f \u5b9e\u7528\u793a\u4f8b","text":""},{"location":"how-to/MIGRATION_GUIDE/#1_2","title":"\u793a\u4f8b1\uff1a\u5ba1\u8ba1\u65e5\u5fd7\u8bb0\u5f55","text":"<pre><code># \u65e7\u65b9\u5f0f\nfrom src.services.audit_service import AuditService, AuditContext\n\n# \u65b0\u65b9\u5f0f\uff08\u63a8\u8350\uff09\nfrom src.services.audit_service_mod import AuditService, AuditContext\n# \u6216\u66f4\u5177\u4f53\u7684\u5bfc\u5165\nfrom src.services.audit_service_mod.service import AuditService\nfrom src.services.audit_service_mod.models import AuditContext\n</code></pre>"},{"location":"how-to/MIGRATION_GUIDE/#2_2","title":"\u793a\u4f8b2\uff1a\u6570\u636e\u5904\u7406\u6d41\u6c34\u7ebf","text":"<pre><code># \u65b0\u7684\u6a21\u5757\u5316\u65b9\u5f0f\u5141\u8bb8\u66f4\u7075\u6d3b\u7684\u4f7f\u7528\nfrom src.services.data_processing_mod import DataProcessingService\nfrom src.services.data_processing_mod.transformers import DataTransformer\nfrom src.services.data_processing_mod.validators import DataValidator\n\n# \u53ef\u4ee5\u72ec\u7acb\u4f7f\u7528\u5404\u4e2a\u7ec4\u4ef6\nvalidator = DataValidator()\ntransformer = DataTransformer()\n</code></pre>"},{"location":"how-to/MIGRATION_GUIDE/#_12","title":"\ud83d\udccb \u8fc1\u79fb\u68c0\u67e5\u6e05\u5355","text":"<ul> <li> \u8bc6\u522b\u4f7f\u7528\u65e7\u5bfc\u5165\u8def\u5f84\u7684\u6587\u4ef6</li> <li> \u9010\u4e2a\u6587\u4ef6\u66f4\u65b0\u5bfc\u5165\u8bed\u53e5</li> <li> \u8fd0\u884c\u6d4b\u8bd5\u786e\u4fdd\u529f\u80fd\u6b63\u5e38</li> <li> \u79fb\u9664\u4e0d\u5fc5\u8981\u7684\u5bfc\u5165</li> <li> \u66f4\u65b0\u6587\u6863\u548c\u6ce8\u91ca</li> </ul>"},{"location":"how-to/MIGRATION_GUIDE/#_13","title":"\ud83d\udd27 \u8fc1\u79fb\u811a\u672c\uff08\u53ef\u9009\uff09","text":"<p>\u60a8\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u811a\u672c\u6765\u81ea\u52a8\u66f4\u65b0\u5bfc\u5165\u8def\u5f84\uff1a</p> <pre><code># \u67e5\u627e\u4f7f\u7528\u65e7\u5bfc\u5165\u7684\u6587\u4ef6\ngrep -r \"from src.services.audit_service import\" --include=\"*.py\" .\ngrep -r \"from src.services.manager import\" --include=\"*.py\" .\n\n# \u4f7f\u7528sed\u6279\u91cf\u66ff\u6362\uff08\u8bf7\u8c28\u614e\u4f7f\u7528\uff09\nfind . -name \"*.py\" -type f -exec sed -i 's/from src\\.services\\.audit_service import/from src.services.audit_service_mod import/g' {} \\;\n</code></pre>"},{"location":"how-to/MIGRATION_GUIDE/#_14","title":"\u2753 \u5e38\u89c1\u95ee\u9898","text":""},{"location":"how-to/MIGRATION_GUIDE/#q","title":"Q: \u73b0\u6709\u4ee3\u7801\u4f1a\u505c\u6b62\u5de5\u4f5c\u5417\uff1f","text":"<p>A: \u4e0d\u4f1a\u3002\u6211\u4eec\u521b\u5efa\u4e86\u517c\u5bb9\u6027\u57ab\u7247\uff0c\u786e\u4fdd\u73b0\u6709\u5bfc\u5165\u8def\u5f84\u7ee7\u7eed\u5de5\u4f5c\u3002</p>"},{"location":"how-to/MIGRATION_GUIDE/#q_1","title":"Q: \u4ec0\u4e48\u65f6\u5019\u9700\u8981\u8fc1\u79fb\uff1f","text":"<p>A: \u60a8\u53ef\u4ee5\u9009\u62e9\u5728\u4efb\u4f55\u65f6\u95f4\u8fc1\u79fb\u3002\u6ca1\u6709\u5f3a\u5236\u7684\u65f6\u95f4\u8868\u3002</p>"},{"location":"how-to/MIGRATION_GUIDE/#q_2","title":"Q: \u8fc1\u79fb\u6709\u4ec0\u4e48\u597d\u5904\uff1f","text":"<p>A: - \u66f4\u597d\u7684\u4ee3\u7801\u7ec4\u7ec7 - \u66f4\u6e05\u6670\u7684\u6a21\u5757\u8fb9\u754c - \u66f4\u5bb9\u6613\u6d4b\u8bd5\u548c\u7ef4\u62a4 - \u53ef\u4ee5\u53ea\u5bfc\u5165\u9700\u8981\u7684\u529f\u80fd</p>"},{"location":"how-to/MIGRATION_GUIDE/#q_3","title":"Q: \u9700\u8981\u4e00\u6b21\u6027\u8fc1\u79fb\u6240\u6709\u4ee3\u7801\u5417\uff1f","text":"<p>A: \u4e0d\u9700\u8981\u3002\u60a8\u53ef\u4ee5\u9010\u6b65\u8fc1\u79fb\uff0c\u751a\u81f3\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d\u6df7\u5408\u4f7f\u7528\u65b0\u65e7\u5bfc\u5165\u3002</p>"},{"location":"how-to/MIGRATION_GUIDE/#_15","title":"\ud83d\udcde \u83b7\u53d6\u5e2e\u52a9","text":"<p>\u5982\u679c\u5728\u8fc1\u79fb\u8fc7\u7a0b\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u8bf7\uff1a 1. \u67e5\u770b\u5404\u4e2a\u6a21\u5757\u7684<code>__init__.py</code>\u6587\u4ef6\u4e86\u89e3\u5bfc\u51fa\u7684\u5185\u5bb9 2. \u67e5\u770b\u6a21\u5757\u5185\u7684README\u6216\u6587\u6863 3. \u521b\u5efaIssue\u6216Pull Request</p> <p>\u6ce8\u610f: \u8fd9\u662f\u4e00\u4e2a\u6e10\u8fdb\u5f0f\u7684\u8fc1\u79fb\uff0c\u4e0d\u9700\u8981\u7acb\u5373\u6267\u884c\u3002\u8bf7\u5728\u60a8\u51c6\u5907\u597d\u7684\u65f6\u5019\u518d\u8fdb\u884c\u8fc1\u79fb\u3002</p>"},{"location":"how-to/QUICKSTART_TOOLS/","title":"\ud83d\ude80 \u9879\u76ee\u5de5\u5177\u5feb\u901f\u542f\u52a8\u6307\u5357","text":"<p>\u65b0\u7684 AI \u52a9\u624b\uff1f \u8fd9\u91cc\u662f\u60a8\u9700\u8981\u77e5\u9053\u7684\u4e00\u5207\uff01</p>"},{"location":"how-to/QUICKSTART_TOOLS/#_2","title":"\u26a1 \u7acb\u5373\u53ef\u7528\u7684\u547d\u4ee4","text":"<pre><code>make help                 # \ud83c\udfaf \u663e\u793a\u6240\u6709\u547d\u4ee4\nmake context             # \ud83e\udd16 \u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587 (AI\u5f00\u53d1\u5fc5\u5907)\nmake sync-issues         # \ud83d\udd04 GitHub Issues \u540c\u6b65\nsource github_sync_config.sh  # \ud83d\udd11 \u52a0\u8f7d\u73af\u5883\u53d8\u91cf\n</code></pre>"},{"location":"how-to/QUICKSTART_TOOLS/#ai-","title":"\ud83e\udd16 AI \u5f00\u53d1 - \u9996\u8981\u529f\u80fd","text":"<pre><code># 1. \u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587\uff08AI\u5f00\u53d1\u7b2c\u4e00\u6b65\uff09\nmake context\n\n# 2. \u67e5\u770b\u4e0a\u4e0b\u6587\u4fe1\u606f\ncat logs/project_context.json\n</code></pre>"},{"location":"how-to/QUICKSTART_TOOLS/#issues-","title":"\ud83d\udccb Issues \u540c\u6b65 - \u5e38\u7528\u529f\u80fd","text":"<pre><code># 1. \u8bbe\u7f6e\u73af\u5883\uff08\u4e00\u6b21\u6027\uff09\nsource github_sync_config.sh\n\n# 2. \u540c\u6b65 Issues\nmake sync-issues\n</code></pre>"},{"location":"how-to/QUICKSTART_TOOLS/#_3","title":"\ud83d\udcda \u5b8c\u6574\u6587\u6863\u4f4d\u7f6e","text":"<ul> <li>TOOLS.md - \u5b8c\u6574\u5de5\u5177\u6587\u6863</li> <li>scripts/README_sync_issues.md - Issues \u540c\u6b65\u8be6\u7ec6\u8bf4\u660e</li> <li>github_sync_config.sh - \u73af\u5883\u914d\u7f6e\u811a\u672c</li> </ul>"},{"location":"how-to/QUICKSTART_TOOLS/#_4","title":"\ud83c\udfaf \u5173\u952e\u6587\u4ef6","text":"<ul> <li><code>issues.yaml</code> - \u672c\u5730 Issues \u6587\u4ef6</li> <li><code>Makefile</code> - \u6240\u6709\u547d\u4ee4\u5165\u53e3</li> <li><code>scripts/sync_issues.py</code> - Issues \u540c\u6b65\u811a\u672c</li> </ul> <p>\u95ee\u9898\uff1f \u8fd0\u884c <code>make help</code> \u6216\u67e5\u770b TOOLS.md</p>"},{"location":"how-to/QUICKSTART_TOOLS/#_5","title":"\ud83d\udd17 \u76f8\u5173\u6587\u6863\u94fe\u63a5","text":""},{"location":"how-to/QUICKSTART_TOOLS/#_6","title":"\ud83d\udcda \u5feb\u901f\u5f00\u59cb\u6307\u5357","text":"<ul> <li>\u5b8c\u6574\u7cfb\u7edf\u6f14\u793a - \u7cfb\u7edf\u529f\u80fd\u5b8c\u6574\u6f14\u793a</li> <li>\u90e8\u7f72\u6307\u5357 - \u7cfb\u7edf\u90e8\u7f72\u914d\u7f6e\u6307\u5357</li> <li>\u6545\u969c\u6392\u9664\u6307\u5357 - \u5e38\u89c1\u95ee\u9898\u89e3\u51b3\u65b9\u6848</li> <li>\u8fc1\u79fb\u6307\u5357 - \u7248\u672c\u8fc1\u79fb\u548c\u5347\u7ea7\u6307\u5bfc</li> </ul>"},{"location":"how-to/QUICKSTART_TOOLS/#_7","title":"\ud83d\udee0\ufe0f \u5f00\u53d1\u5de5\u5177\u548c\u89c4\u8303","text":"<ul> <li>\u5f00\u53d1\u6307\u5357 - \u5b8c\u6574\u7684\u5f00\u53d1\u73af\u5883\u642d\u5efa\u548c\u7f16\u7801\u89c4\u8303</li> <li>Makefile\u5de5\u5177\u6307\u5357 - 120+\u5f00\u53d1\u547d\u4ee4\u8be6\u89e3</li> <li>CLAUDE.md - AI\u8f85\u52a9\u5f00\u53d1\u6307\u5bfc\u548c\u5de5\u4f5c\u6d41\u7a0b</li> <li>\u7cfb\u7edf\u67b6\u6784\u6587\u6863 - \u5b8c\u6574\u7684\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1</li> </ul>"},{"location":"how-to/QUICKSTART_TOOLS/#_8","title":"\ud83d\ude80 \u90e8\u7f72\u548c\u73af\u5883","text":"<ul> <li>Staging\u73af\u5883\u914d\u7f6e - \u6d4b\u8bd5\u73af\u5883\u914d\u7f6e\u548c\u7ba1\u7406</li> <li>\u751f\u4ea7\u90e8\u7f72\u6307\u5357 - \u751f\u4ea7\u73af\u5883\u90e8\u7f72\u548c\u8fd0\u7ef4</li> <li>\u8fd0\u7ef4\u624b\u518c - \u8fd0\u7ef4\u64cd\u4f5c\u6307\u5357\u548c\u6545\u969c\u6392\u9664</li> </ul>"},{"location":"how-to/QUICKSTART_TOOLS/#_9","title":"\ud83e\uddea \u6d4b\u8bd5\u548c\u8d28\u91cf","text":"<ul> <li>\u6d4b\u8bd5\u7b56\u7565\u6587\u6863 - \u5b8c\u6574\u7684\u6d4b\u8bd5\u7b56\u7565\u548c\u8d28\u91cf\u4fdd\u8bc1\u4f53\u7cfb</li> <li>API\u6587\u6863 - REST API\u63a5\u53e3\u89c4\u8303</li> <li>\u672f\u8bed\u8868 - \u9879\u76ee\u4e13\u4e1a\u672f\u8bed\u548c\u6982\u5ff5\u5b9a\u4e49</li> </ul>"},{"location":"how-to/QUICKSTART_TOOLS/#_10","title":"\ud83d\udcca \u9879\u76ee\u8d44\u6e90","text":"<ul> <li>\u9879\u76ee\u7d22\u5f15 - \u5b8c\u6574\u7684\u6587\u6863\u5bfc\u822a\u548c\u5165\u53e3</li> <li>\u6570\u636e\u5e93\u67b6\u6784 - \u6570\u636e\u5e93\u8bbe\u8ba1\u548c\u8868\u7ed3\u6784\u8be6\u60c5</li> <li>\u76d1\u63a7\u7cfb\u7edf - \u76d1\u63a7\u7cfb\u7edf\u914d\u7f6e\u548c\u544a\u8b66\u8bbe\u7f6e</li> </ul>"},{"location":"how-to/QUICKSTART_TOOLS/#_11","title":"\ud83d\udccb \u7ba1\u7406\u548c\u534f\u4f5c","text":"<ul> <li>\u9879\u76ee\u8d21\u732e\u6307\u5357 - \u8d21\u732e\u6d41\u7a0b\u548c\u89c4\u8303</li> <li>\u53d8\u66f4\u65e5\u5fd7 - \u9879\u76ee\u7248\u672c\u53d8\u66f4\u8bb0\u5f55</li> <li>\u9879\u76ee\u7ba1\u7406 - \u9879\u76ee\u7ba1\u7406\u76f8\u5173\u4fe1\u606f</li> </ul> <p>\u6587\u6863\u7ef4\u62a4: \u672c\u5feb\u901f\u542f\u52a8\u6307\u5357\u4e0e\u9879\u76ee\u5de5\u5177\u540c\u6b65\u66f4\u65b0\uff0c\u5e2e\u52a9\u65b0\u7528\u6237\u5feb\u901f\u4e0a\u624b\u9879\u76ee\u5f00\u53d1\u3002</p>"},{"location":"how-to/STAGING_ENVIRONMENT/","title":"\u9884\u53d1\u5e03\u73af\u5883\u914d\u7f6e","text":""},{"location":"how-to/STAGING_ENVIRONMENT/#_2","title":"\u73af\u5883\u6982\u8ff0","text":"<p>\u9884\u53d1\u5e03\u73af\u5883\u662f\u751f\u4ea7\u73af\u5883\u7684\u955c\u50cf\uff0c\u7528\u4e8e\u6700\u7ec8\u9a8c\u8bc1\u548c\u6d4b\u8bd5\u3002</p>"},{"location":"how-to/STAGING_ENVIRONMENT/#_3","title":"\u73af\u5883\u67b6\u6784","text":""},{"location":"how-to/STAGING_ENVIRONMENT/#_4","title":"\u57fa\u7840\u8bbe\u65bd","text":"<ul> <li>\u670d\u52a1\u5668\uff1a\u4e0e\u751f\u4ea7\u73af\u5883\u76f8\u540c\u914d\u7f6e</li> <li>\u6570\u636e\u5e93\uff1a\u751f\u4ea7\u6570\u636e\u7684\u8131\u654f\u526f\u672c</li> <li>\u7f13\u5b58\uff1a\u72ec\u7acb\u7684Redis\u5b9e\u4f8b</li> <li>\u8d1f\u8f7d\u5747\u8861\uff1a\u6a21\u62df\u751f\u4ea7\u914d\u7f6e</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_5","title":"\u7f51\u7edc\u914d\u7f6e","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Load Balancer \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Staging App    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Staging DB      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"how-to/STAGING_ENVIRONMENT/#_6","title":"\u90e8\u7f72\u6d41\u7a0b","text":""},{"location":"how-to/STAGING_ENVIRONMENT/#1","title":"1. \u73af\u5883\u51c6\u5907","text":"<pre><code># \u521b\u5efastaging\u914d\u7f6e\ncp .env.example .env.staging\n\n# \u542f\u52a8staging\u670d\u52a1\ndocker-compose -f docker-compose.staging.yml up -d\n</code></pre>"},{"location":"how-to/STAGING_ENVIRONMENT/#2","title":"2. \u6570\u636e\u540c\u6b65","text":"<ul> <li>\u4ece\u751f\u4ea7\u73af\u5883\u5bfc\u51fa\u8131\u654f\u6570\u636e</li> <li>\u540c\u6b65\u5230staging\u6570\u636e\u5e93</li> <li>\u9a8c\u8bc1\u6570\u636e\u5b8c\u6574\u6027</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#3","title":"3. \u5e94\u7528\u90e8\u7f72","text":"<ul> <li>\u6784\u5efastaging\u955c\u50cf</li> <li>\u6eda\u52a8\u66f4\u65b0\u90e8\u7f72</li> <li>\u5065\u5eb7\u68c0\u67e5\u9a8c\u8bc1</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_7","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":""},{"location":"how-to/STAGING_ENVIRONMENT/#_8","title":"\u529f\u80fd\u6d4b\u8bd5","text":"<ul> <li> \u6240\u6709API\u7aef\u70b9\u6b63\u5e38\u54cd\u5e94</li> <li> \u7528\u6237\u754c\u9762\u529f\u80fd\u5b8c\u6574</li> <li> \u6570\u636e\u5904\u7406\u6d41\u7a0b\u6b63\u786e</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_9","title":"\u6027\u80fd\u6d4b\u8bd5","text":"<ul> <li> \u54cd\u5e94\u65f6\u95f4\u7b26\u5408\u8981\u6c42</li> <li> \u5e76\u53d1\u5904\u7406\u80fd\u529b\u8fbe\u6807</li> <li> \u8d44\u6e90\u4f7f\u7528\u7387\u6b63\u5e38</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_10","title":"\u5b89\u5168\u6d4b\u8bd5","text":"<ul> <li> \u8ba4\u8bc1\u6388\u6743\u6b63\u5e38</li> <li> \u6570\u636e\u4f20\u8f93\u52a0\u5bc6</li> <li> \u6f0f\u6d1e\u626b\u63cf\u901a\u8fc7</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_11","title":"\u914d\u7f6e\u7ba1\u7406","text":""},{"location":"how-to/STAGING_ENVIRONMENT/#_12","title":"\u73af\u5883\u53d8\u91cf","text":"<pre><code># Staging\u73af\u5883\u914d\u7f6e\nENVIRONMENT=staging\nDEBUG=true\nLOG_LEVEL=DEBUG\nAPI_HOST=0.0.0.0\nAPI_PORT=8000\n</code></pre>"},{"location":"how-to/STAGING_ENVIRONMENT/#_13","title":"\u6570\u636e\u5e93\u914d\u7f6e","text":"<ul> <li>\u4e0e\u751f\u4ea7\u73af\u5883\u76f8\u540c\u7684schema</li> <li>\u6d4b\u8bd5\u6570\u636e\u5b9a\u671f\u5237\u65b0</li> <li>\u81ea\u52a8\u5907\u4efd\u673a\u5236</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_14","title":"\u76d1\u63a7\u548c\u65e5\u5fd7","text":""},{"location":"how-to/STAGING_ENVIRONMENT/#_15","title":"\u76d1\u63a7\u6307\u6807","text":"<ul> <li>\u5e94\u7528\u6027\u80fd\u6307\u6807</li> <li>\u7cfb\u7edf\u8d44\u6e90\u4f7f\u7528</li> <li>\u9519\u8bef\u7387\u7edf\u8ba1</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_16","title":"\u65e5\u5fd7\u7ba1\u7406","text":"<ul> <li>\u96c6\u4e2d\u5316\u65e5\u5fd7\u6536\u96c6</li> <li>\u65e5\u5fd7\u7ea7\u522b\u914d\u7f6e</li> <li>\u654f\u611f\u4fe1\u606f\u8131\u654f</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_17","title":"\u8bbf\u95ee\u63a7\u5236","text":""},{"location":"how-to/STAGING_ENVIRONMENT/#_18","title":"\u7528\u6237\u6743\u9650","text":"<ul> <li>\u5f00\u53d1\u56e2\u961f\uff1a\u8bfb\u5199\u6743\u9650</li> <li>\u6d4b\u8bd5\u56e2\u961f\uff1a\u53ea\u8bfb\u6743\u9650</li> <li>\u8fd0\u7ef4\u56e2\u961f\uff1a\u7ba1\u7406\u6743\u9650</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_19","title":"\u7f51\u7edc\u8bbf\u95ee","text":"<ul> <li>VPN\u8bbf\u95ee\u63a7\u5236</li> <li>IP\u767d\u540d\u5355\u9650\u5236</li> <li>\u5ba1\u8ba1\u65e5\u5fd7\u8bb0\u5f55</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_20","title":"\u7ef4\u62a4\u8ba1\u5212","text":""},{"location":"how-to/STAGING_ENVIRONMENT/#_21","title":"\u65e5\u5e38\u7ef4\u62a4","text":"<ul> <li>\u6bcf\u65e5\u5065\u5eb7\u68c0\u67e5</li> <li>\u65e5\u5fd7\u6e05\u7406</li> <li>\u6027\u80fd\u76d1\u63a7</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_22","title":"\u5b9a\u671f\u66f4\u65b0","text":"<ul> <li>\u6bcf\u5468\u540c\u6b65\u751f\u4ea7\u6570\u636e</li> <li>\u6bcf\u6708\u66f4\u65b0\u6d4b\u8bd5\u7528\u4f8b</li> <li>\u6bcf\u5b63\u5ea6\u73af\u5883\u91cd\u5efa</li> </ul>"},{"location":"how-to/STAGING_ENVIRONMENT/#_23","title":"\u6545\u969c\u5904\u7406","text":""},{"location":"how-to/STAGING_ENVIRONMENT/#_24","title":"\u5e38\u89c1\u95ee\u9898","text":"<ol> <li>\u670d\u52a1\u65e0\u6cd5\u542f\u52a8</li> <li>\u68c0\u67e5\u7aef\u53e3\u5360\u7528</li> <li>\u9a8c\u8bc1\u914d\u7f6e\u6587\u4ef6</li> <li> <p>\u67e5\u770b\u9519\u8bef\u65e5\u5fd7</p> </li> <li> <p>\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25</p> </li> <li>\u68c0\u67e5\u7f51\u7edc\u8fde\u901a\u6027</li> <li>\u9a8c\u8bc1\u8ba4\u8bc1\u4fe1\u606f</li> <li> <p>\u786e\u8ba4\u670d\u52a1\u72b6\u6001</p> </li> <li> <p>\u6027\u80fd\u4e0b\u964d</p> </li> <li>\u68c0\u67e5\u8d44\u6e90\u4f7f\u7528</li> <li>\u5206\u6790\u6162\u67e5\u8be2</li> <li>\u4f18\u5316\u914d\u7f6e\u53c2\u6570</li> </ol>"},{"location":"how-to/STAGING_ENVIRONMENT/#_25","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u751f\u4ea7\u90e8\u7f72\u6307\u5357</li> <li>\u76d1\u63a7\u6307\u5357</li> <li>\u8fd0\u7ef4\u624b\u518c</li> </ul> <p>\u6700\u540e\u66f4\u65b0\uff1a2025-10-02</p>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/","title":"\u6545\u969c\u6392\u9664\u624b\u518c","text":"<p>\u672c\u624b\u518c\u63d0\u4f9b\u4e86\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u5e38\u89c1\u95ee\u9898\u7684\u8bca\u65ad\u548c\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_2","title":"\u76ee\u5f55","text":"<ol> <li>\u5feb\u901f\u8bca\u65ad</li> <li>\u670d\u52a1\u542f\u52a8\u95ee\u9898</li> <li>\u6570\u636e\u5e93\u95ee\u9898</li> <li>Redis \u7f13\u5b58\u95ee\u9898</li> <li>\u9884\u6d4b\u670d\u52a1\u95ee\u9898</li> <li>API \u95ee\u9898</li> <li>\u6027\u80fd\u95ee\u9898</li> <li>\u76d1\u63a7\u548c\u544a\u8b66</li> </ol>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_3","title":"\u5feb\u901f\u8bca\u65ad","text":""},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_4","title":"\u5065\u5eb7\u68c0\u67e5\u811a\u672c","text":"<pre><code>#!/bin/bash\n# health_check.sh - \u7cfb\u7edf\u5065\u5eb7\u68c0\u67e5\u811a\u672c\n\necho \"=== \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u5065\u5eb7\u68c0\u67e5 ===\"\necho \"\u65f6\u95f4: $(date)\"\necho \"\"\n\n# 1. \u68c0\u67e5\u670d\u52a1\u72b6\u6001\necho \"1. \u68c0\u67e5\u670d\u52a1\u72b6\u6001...\"\nsystemctl is-active football-prediction || echo \"\u274c \u670d\u52a1\u672a\u8fd0\u884c\"\nsystemctl is-enabled football-prediction || echo \"\u274c \u670d\u52a1\u672a\u542f\u7528\"\n\n# 2. \u68c0\u67e5\u7aef\u53e3\necho -e \"\\n2. \u68c0\u67e5\u7aef\u53e3...\"\nnetstat -tlnp | grep :8000 &gt; /dev/null &amp;&amp; echo \"\u2705 API \u7aef\u53e3 8000 \u6b63\u5e38\" || echo \"\u274c API \u7aef\u53e3 8000 \u672a\u76d1\u542c\"\nnetstat -tlnp | grep :5432 &gt; /dev/null &amp;&amp; echo \"\u2705 PostgreSQL \u7aef\u53e3 5432 \u6b63\u5e38\" || echo \"\u274c PostgreSQL \u7aef\u53e3 5432 \u672a\u76d1\u542c\"\nnetstat -tlnp | grep :6379 &gt; /dev/null &amp;&amp; echo \"\u2705 Redis \u7aef\u53e3 6379 \u6b63\u5e38\" || echo \"\u274c Redis \u7aef\u53e3 6379 \u672a\u76d1\u542c\"\n\n# 3. \u68c0\u67e5 API \u5065\u5eb7\u7aef\u70b9\necho -e \"\\n3. \u68c0\u67e5 API \u5065\u5eb7...\"\nif curl -s http://localhost:8000/api/health &gt; /dev/null; then\n    echo \"\u2705 API \u5065\u5eb7\u68c0\u67e5\u901a\u8fc7\"\nelse\n    echo \"\u274c API \u5065\u5eb7\u68c0\u67e5\u5931\u8d25\"\nfi\n\n# 4. \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\necho -e \"\\n4. \u68c0\u67e5\u6570\u636e\u5e93...\"\nif PGPASSWORD=$POSTGRES_PASSWORD psql -h $DB_HOST -U $DB_USER -d $DB_NAME -c \"SELECT 1\" &gt; /dev/null 2&gt;&amp;1; then\n    echo \"\u2705 \u6570\u636e\u5e93\u8fde\u63a5\u6b63\u5e38\"\nelse\n    echo \"\u274c \u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\"\nfi\n\n# 5. \u68c0\u67e5 Redis\necho -e \"\\n5. \u68c0\u67e5 Redis...\"\nif redis-cli -h $REDIS_HOST ping &gt; /dev/null 2&gt;&amp;1; then\n    echo \"\u2705 Redis \u8fde\u63a5\u6b63\u5e38\"\nelse\n    echo \"\u274c Redis \u8fde\u63a5\u5931\u8d25\"\nfi\n\necho -e \"\\n=== \u5065\u5eb7\u68c0\u67e5\u5b8c\u6210 ===\"\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_5","title":"\u4e00\u952e\u8bca\u65ad\u811a\u672c","text":"<pre><code># \u4fdd\u5b58\u4e3a diagnose.sh\ncurl -sSL https://raw.githubusercontent.com/your-org/football-prediction/main/scripts/diagnose.sh | bash\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_6","title":"\u670d\u52a1\u542f\u52a8\u95ee\u9898","text":""},{"location":"how-to/TROUBLESHOOTING_GUIDE/#1","title":"\u95ee\u9898 1: \u670d\u52a1\u65e0\u6cd5\u542f\u52a8","text":"<p>\u75c7\u72b6\uff1a <pre><code>$ systemctl start football-prediction\nJob for football-prediction.service failed.\n</code></pre></p> <p>\u8bca\u65ad\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u67e5\u770b\u670d\u52a1\u72b6\u6001 <pre><code>systemctl status football-prediction\njournalctl -u football-prediction -f\n</code></pre></p> </li> <li> <p>\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6 <pre><code>cat /etc/systemd/system/football-prediction.service\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u5e94\u7528\u65e5\u5fd7 <pre><code>tail -f /var/log/football-prediction/app.log\n</code></pre></p> </li> </ol> <p>\u5e38\u89c1\u539f\u56e0\u548c\u89e3\u51b3\u65b9\u6848\uff1a</p> \u539f\u56e0 \u89e3\u51b3\u65b9\u6848 \u7aef\u53e3\u88ab\u5360\u7528 <code>sudo netstat -tlnp \\| grep :8000</code>\uff0c\u7136\u540e <code>sudo kill -9 &lt;PID&gt;</code> \u73af\u5883\u53d8\u91cf\u7f3a\u5931 \u68c0\u67e5 <code>.env</code> \u6587\u4ef6\uff0c\u786e\u4fdd\u6240\u6709\u5fc5\u9700\u53d8\u91cf\u90fd\u5df2\u8bbe\u7f6e \u4f9d\u8d56\u670d\u52a1\u672a\u542f\u52a8 \u5148\u542f\u52a8 PostgreSQL \u548c Redis \u6743\u9650\u4e0d\u8db3 <code>sudo chown -R user:user /var/log/football-prediction</code>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#2","title":"\u95ee\u9898 2: \u5e94\u7528\u542f\u52a8\u540e\u7acb\u5373\u5d29\u6e83","text":"<p>\u8bca\u65ad\u6b65\u9aa4\uff1a</p> <pre><code># \u68c0\u67e5\u6700\u8fd1\u7684\u5d29\u6e83\u65e5\u5fd7\ndmesg | grep football-prediction\njournalctl -u football-prediction --since \"1 minute ago\"\n\n# \u68c0\u67e5 Python \u8def\u5f84\nwhich python\npython --version\n\n# \u68c0\u67e5\u4f9d\u8d56\npip freeze | grep -E \"(fastapi|uvicorn|sqlalchemy)\"\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <pre><code># \u91cd\u65b0\u5b89\u88c5\u4f9d\u8d56\npip install -r requirements/dev.lock\n\n# \u4f7f\u7528\u8c03\u8bd5\u6a21\u5f0f\u542f\u52a8\npython -m uvicorn src.api.app:app --reload --log-level debug\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_7","title":"\u6570\u636e\u5e93\u95ee\u9898","text":""},{"location":"how-to/TROUBLESHOOTING_GUIDE/#1_1","title":"\u95ee\u9898 1: \u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25","text":"<p>\u75c7\u72b6\uff1a <pre><code>sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) could not connect to server\n</code></pre></p> <p>\u8bca\u65ad\u811a\u672c\uff1a</p> <pre><code>#!/bin/bash\n# db_diagnose.sh\n\necho \"=== \u6570\u636e\u5e93\u8bca\u65ad ===\"\n\n# \u68c0\u67e5\u8fde\u63a5\u5b57\u7b26\u4e32\necho \"DATABASE_URL: $DATABASE_URL\"\n\n# \u68c0\u67e5 PostgreSQL \u670d\u52a1\nsystemctl is-active postgresql || echo \"PostgreSQL \u670d\u52a1\u672a\u8fd0\u884c\"\n\n# \u68c0\u67e5\u76d1\u542c\u7aef\u53e3\nss -tlnp | grep :5432\n\n# \u5c1d\u8bd5\u8fde\u63a5\npsql $DATABASE_URL -c \"SELECT version();\" || echo \"\u8fde\u63a5\u5931\u8d25\"\n\n# \u68c0\u67e5\u8fde\u63a5\u6570\npsql $DATABASE_URL -c \"SELECT count(*) FROM pg_stat_activity;\"\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u68c0\u67e5 PostgreSQL \u914d\u7f6e <pre><code>sudo vim /etc/postgresql/14/main/postgresql.conf\n# \u786e\u4fdd\u4ee5\u4e0b\u914d\u7f6e\uff1a\nlisten_addresses = '*'\nport = 5432\nmax_connections = 100\n</code></pre></p> </li> <li> <p>\u68c0\u67e5 pg_hba.conf <pre><code>sudo vim /etc/postgresql/14/main/pg_hba.conf\n# \u6dfb\u52a0\uff1a\nhost    all             all             0.0.0.0/0               md5\n</code></pre></p> </li> <li> <p>\u91cd\u542f PostgreSQL <pre><code>sudo systemctl restart postgresql\n</code></pre></p> </li> </ol>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#2_1","title":"\u95ee\u9898 2: \u6570\u636e\u5e93\u8fc1\u79fb\u5931\u8d25","text":"<p>\u75c7\u72b6\uff1a <pre><code>alembic upgrade head\nFAILED: Target database is not up to date\n</code></pre></p> <p>\u8bca\u65ad\u6b65\u9aa4\uff1a</p> <pre><code># \u67e5\u770b\u5f53\u524d\u7248\u672c\nalembic current\n\n# \u67e5\u770b\u5f85\u6267\u884c\u7684\u8fc1\u79fb\nalembic history\n\n# \u68c0\u67e5\u8fc1\u79fb\u811a\u672c\nls src/database/migrations/versions/\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <pre><code># \u6807\u8bb0\u4e3a\u5df2\u6267\u884c\uff08\u8c28\u614e\u4f7f\u7528\uff09\nalembic stamp &lt;revision&gt;\n\n# \u6216\u8005\u91cd\u65b0\u521b\u5efa\u8fc1\u79fb\nalembic revision --autogenerate -m \"Initial migration\"\nalembic upgrade head\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#3","title":"\u95ee\u9898 3: \u6570\u636e\u5e93\u6027\u80fd\u95ee\u9898","text":"<p>\u8bca\u65ad\u67e5\u8be2\uff1a</p> <pre><code>-- \u67e5\u770b\u6162\u67e5\u8be2\nSELECT query, mean_time, calls, total_time\nFROM pg_stat_statements\nWHERE mean_time &gt; 1000  -- \u8d85\u8fc71\u79d2\u7684\u67e5\u8be2\nORDER BY mean_time DESC\nLIMIT 10;\n\n-- \u67e5\u770b\u8fde\u63a5\u6570\nSELECT state, count(*)\nFROM pg_stat_activity\nGROUP BY state;\n\n-- \u67e5\u770b\u9501\u7b49\u5f85\nSELECT blocked_locks.pid AS blocked_pid,\n       blocked_activity.usename AS blocked_user,\n       blocking_locks.pid AS blocking_pid,\n       blocking_activity.usename AS blocking_user,\n       blocked_activity.query AS blocked_statement,\n       blocking_activity.query AS current_statement_in_blocking_process\nFROM pg_catalog.pg_locks blocked_locks\nJOIN pg_catalog.pg_stat_activity blocked_activity ON blocked_activity.pid = blocked_locks.pid\nJOIN pg_catalog.pg_locks blocking_locks ON blocking_locks.locktype = blocked_locks.locktype\nJOIN pg_catalog.pg_stat_activity blocking_activity ON blocking_activity.pid = blocking_locks.pid\nWHERE NOT blocked_locks.granted;\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#redis","title":"Redis \u7f13\u5b58\u95ee\u9898","text":""},{"location":"how-to/TROUBLESHOOTING_GUIDE/#1-redis","title":"\u95ee\u9898 1: Redis \u8fde\u63a5\u8d85\u65f6","text":"<p>\u8bca\u65ad\u811a\u672c\uff1a</p> <pre><code># redis_diagnose.sh\n\necho \"=== Redis \u8bca\u65ad ===\"\n\n# \u6d4b\u8bd5\u8fde\u63a5\nredis-cli -h $REDIS_HOST ping || echo \"Redis \u65e0\u6cd5\u8fde\u63a5\"\n\n# \u68c0\u67e5\u5185\u5b58\u4f7f\u7528\nredis-cli -h $REDIS_HOST info memory\n\n# \u68c0\u67e5\u8fde\u63a5\u6570\nredis-cli -h $REDIS_HOST info clients\n\n# \u68c0\u67e5\u6162\u67e5\u8be2\nredis-cli -h $REDIS_HOST slowlog get 10\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u589e\u52a0 Redis \u8fde\u63a5\u6c60\u5927\u5c0f <pre><code># config.py\nREDIS_POOL_SIZE = 20\nREDIS_MAX_CONNECTIONS = 50\n</code></pre></p> </li> <li> <p>\u4f18\u5316 Redis \u914d\u7f6e <pre><code># redis.conf\ntimeout 300\ntcp-keepalive 60\nmaxclients 10000\n</code></pre></p> </li> </ol>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#2_2","title":"\u95ee\u9898 2: \u7f13\u5b58\u672a\u547d\u4e2d","text":"<p>\u8bca\u65ad\u4ee3\u7801\uff1a</p> <pre><code>import logging\n\nlogger = logging.getLogger(__name__)\n\ndef diagnose_cache_hits():\n    \"\"\"\u8bca\u65ad\u7f13\u5b58\u547d\u4e2d\u7387\"\"\"\n    from src.cache.redis_manager import get_redis_manager\n\n    redis = get_redis_manager()\n\n    # \u6a21\u62df\u8bf7\u6c42\n    test_keys = [\"test:1\", \"test:2\", \"test:3\"]\n    hits = 0\n\n    for key in test_keys:\n        if redis.get(key):\n            hits += 1\n\n    hit_rate = hits / len(test_keys)\n    logger.info(f\"\u7f13\u5b58\u547d\u4e2d\u7387: {hit_rate:.2%}\")\n\n    if hit_rate &lt; 0.5:\n        logger.warning(\"\u7f13\u5b58\u547d\u4e2d\u7387\u8fc7\u4f4e\uff01\")\n        # \u68c0\u67e5\u7f13\u5b58\u914d\u7f6e\n        logger.info(f\"\u7f13\u5b58\u914d\u7f6e: TTL={settings.CACHE_TTL}\")\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_8","title":"\u9884\u6d4b\u670d\u52a1\u95ee\u9898","text":""},{"location":"how-to/TROUBLESHOOTING_GUIDE/#1-mlflow","title":"\u95ee\u9898 1: MLflow \u6a21\u578b\u52a0\u8f7d\u5931\u8d25","text":"<p>\u75c7\u72b6\uff1a <pre><code>mlflow.exceptions.MlflowException: No model version found for model 'football_baseline_model' with stage 'Production'\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <pre><code># 1. \u68c0\u67e5 MLflow \u670d\u52a1\ncurl http://localhost:5002/api/2.0/search/experiments\n\n# 2. \u6ce8\u518c\u6a21\u578b\npython scripts/register_model.py \\\n  --model-path models/football_model.pkl \\\n  --model-name football_baseline_model \\\n  --stage Production\n\n# 3. \u9a8c\u8bc1\u6a21\u578b\npython scripts/test_model.py\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#2_3","title":"\u95ee\u9898 2: \u9884\u6d4b\u670d\u52a1\u54cd\u5e94\u6162","text":"<p>\u8bca\u65ad\u4ee3\u7801\uff1a</p> <pre><code>import time\nimport asyncio\nfrom src.core.prediction_engine import get_prediction_engine\n\nasync def diagnose_prediction_performance():\n    \"\"\"\u8bca\u65ad\u9884\u6d4b\u6027\u80fd\"\"\"\n    engine = await get_prediction_engine()\n\n    match_ids = list(range(1000, 1010))\n    start_time = time.time()\n\n    # \u6d4b\u8bd5\u6279\u91cf\u9884\u6d4b\n    results = await engine.batch_predict(match_ids)\n\n    duration = time.time() - start_time\n    avg_time = duration / len(results)\n\n    print(f\"\u6279\u91cf\u9884\u6d4b\u6027\u80fd:\")\n    print(f\"  \u603b\u65f6\u95f4: {duration:.2f}s\")\n    print(f\"  \u5e73\u5747\u5ef6\u8fdf: {avg_time*1000:.2f}ms\")\n    print(f\"  \u541e\u5410\u91cf: {len(results)/duration:.2f} predictions/sec\")\n\n    # \u83b7\u53d6\u6027\u80fd\u7edf\u8ba1\n    stats = engine.get_performance_stats()\n    print(f\"\\n\u7edf\u8ba1\u4fe1\u606f: {stats}\")\n\n# \u8fd0\u884c\u8bca\u65ad\nasyncio.run(diagnose_prediction_performance())\n</code></pre> <p>\u4f18\u5316\u65b9\u6848\uff1a</p> <ol> <li>\u589e\u52a0\u7f13\u5b58\u547d\u4e2d\u7387</li> <li>\u4f7f\u7528\u6279\u91cf\u9884\u6d4b</li> <li>\u4f18\u5316\u7279\u5f81\u8ba1\u7b97</li> <li>\u542f\u7528\u6a21\u578b\u9884\u52a0\u8f7d</li> </ol>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#api","title":"API \u95ee\u9898","text":""},{"location":"how-to/TROUBLESHOOTING_GUIDE/#1-429-too-many-requests","title":"\u95ee\u9898 1: 429 Too Many Requests","text":"<p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li> <p>\u5b9e\u73b0\u901f\u7387\u9650\u5236 <pre><code># ratelimit.py\nfrom fastapi import HTTPException, Request\nfrom slowapi import Limiter, _rate_limit_exceeded_handler\nfrom slowapi.util import get_remote_address\n\nlimiter = Limiter(key_func=get_remote_address)\napp.state.limiter = limiter\n\n@app.exception_handler(_rate_limit_exceeded_handler)\nasync def rate_limit_exception_handler(request: Request, exc):\n    raise HTTPException(\n        status_code=429,\n        detail=\"Too many requests. Please try again later.\"\n    )\n</code></pre></p> </li> <li> <p>\u589e\u52a0\u7f13\u5b58 <pre><code># \u5e26\u7f13\u5b58\u7684 API \u7aef\u70b9\n@app.get(\"/api/v1/predictions/match/{match_id}\")\n@limiter.limit(\"100/minute\")\nasync def get_match_prediction(\n    match_id: int,\n    current_user: User = Depends(get_current_user)\n):\n    # \u68c0\u67e5\u7f13\u5b58\n    cache_key = f\"prediction:{match_id}\"\n    cached = await redis.get(cache_key)\n    if cached:\n        return cached\n\n    # \u6267\u884c\u9884\u6d4b\n    result = await predict_match(match_id)\n    await redis.set(cache_key, result, ex=1800)\n    return result\n</code></pre></p> </li> </ol>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#2-503-service-unavailable","title":"\u95ee\u9898 2: 503 Service Unavailable","text":"<p>\u8bca\u65ad\u6b65\u9aa4\uff1a</p> <pre><code># \u68c0\u67e5\u670d\u52a1\u72b6\u6001\ncurl -I http://localhost:8000/api/health\n\n# \u68c0\u67e5\u8fdb\u7a0b\nps aux | grep uvicorn\n\n# \u68c0\u67e5\u7aef\u53e3\nnetstat -tlnp | grep :8000\n\n# \u68c0\u67e5\u7cfb\u7edf\u8d44\u6e90\ndf -h\nfree -m\ntop\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_9","title":"\u6027\u80fd\u95ee\u9898","text":""},{"location":"how-to/TROUBLESHOOTING_GUIDE/#1_2","title":"1. \u5185\u5b58\u6cc4\u6f0f\u8bca\u65ad","text":"<p>\u8bca\u65ad\u811a\u672c\uff1a</p> <pre><code># memory_profiler.py\nimport psutil\nimport tracemalloc\n\ndef diagnose_memory():\n    \"\"\"\u8bca\u65ad\u5185\u5b58\u4f7f\u7528\"\"\"\n    process = psutil.Process()\n\n    # \u5185\u5b58\u4fe1\u606f\n    memory_info = process.memory_info()\n    print(f\"RSS: {memory_info.rss / 1024 / 1024:.1f} MB\")\n    print(f\"VMS: {memory_info.vms / 1024 / 1024:.1f} MB\")\n\n    # \u5185\u5b58\u8ddf\u8e2a\n    snapshot = tracemalloc.take_snapshot()\n    top_stats = snapshot.statistics('lineno')\n    print(\"\\nTop memory allocations:\")\n    for stat in top_stats[:10]:\n        print(f\"  {stat.traceback}\")\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#2-cpu","title":"2. CPU \u4f7f\u7528\u7387\u9ad8","text":"<p>\u8bca\u65ad\u6b65\u9aa4\uff1a</p> <pre><code># \u67e5\u770b\u8fdb\u7a0b\u72b6\u6001\ntop -p $(pgrep -f football-prediction)\n\n# \u67e5\u770b\u7ebf\u7a0b\u72b6\u6001\nps -eLf | grep football-prediction\n\n# \u4f7f\u7528 py-spy \u8fdb\u884c\u6027\u80fd\u5206\u6790\npip install py-spy\npy-spy top -- python -m uvicorn src.api.app:app\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#3_1","title":"3. \u54cd\u5e94\u65f6\u95f4\u6162","text":"<p>\u7aef\u5230\u7aef\u76d1\u63a7\uff1a</p> <pre><code># performance_monitor.py\nimport time\nfrom functools import wraps\n\ndef monitor_performance(func):\n    @wraps(func)\n    async def wrapper(*args, **kwargs):\n        start = time.time()\n        try:\n            result = await func(*args, **kwargs)\n            status = \"success\"\n        except Exception as e:\n            result = None\n            status = \"error\"\n        finally:\n            duration = time.time() - start\n            logger.info(\n                f\"Performance: {func.__name__}\",\n                duration=duration,\n                status=status\n            )\n        return result\n    return wrapper\n\n# \u4f7f\u7528\u88c5\u9970\u5668\n@monitor_performance\nasync def predict_match(match_id: int):\n    # ... \u9884\u6d4b\u903b\u8f91\n    pass\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_10","title":"\u76d1\u63a7\u548c\u544a\u8b66","text":""},{"location":"how-to/TROUBLESHOOTING_GUIDE/#grafana","title":"\u8bbe\u7f6e Grafana \u544a\u8b66","text":"<pre><code>{\n  \"dashboard\": {\n    \"alerting\": {\n      \"rules\": [\n        {\n          \"name\": \"\u9884\u6d4b\u670d\u52a1\u5f02\u5e38\",\n          \"conditions\": [\n            {\n              \"query\": \"up{job=\\\"football-prediction\\\"} == 0\",\n              \"for\": \"1m\"\n            }\n          ],\n          \"notifications\": [\"slack\"]\n        },\n        {\n          \"name\": \"\u9ad8\u9519\u8bef\u7387\",\n          \"conditions\": [\n            {\n              \"query\": \"rate(http_requests_total{status=~\\\"5..\\\"}[5m]) / rate(http_requests_total[5m]) &gt; 0.05\",\n              \"for\": \"2m\"\n            }\n          ]\n        },\n        {\n          \"name\": \"\u54cd\u5e94\u65f6\u95f4\u8fc7\u957f\",\n          \"conditions\": [\n            {\n              \"query\": \"histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) &gt; 1\",\n              \"for\": \"5m\"\n            }\n          ]\n        }\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#slack","title":"Slack \u96c6\u6210","text":"<pre><code># slack_notifier.py\nimport requests\nimport json\n\nclass SlackNotifier:\n    def __init__(self, webhook_url: str):\n        self.webhook_url = webhook_url\n\n    def send_alert(self, message: str, severity: str = \"warning\"):\n        color = {\n            \"info\": \"good\",\n            \"warning\": \"warning\",\n            \"error\": \"danger\"\n        }.get(severity, \"warning\")\n\n        payload = {\n            \"text\": f\"\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u544a\u8b66\",\n            \"attachments\": [\n                {\n                    \"color\": color,\n                    \"fields\": [\n                        {\n                            \"title\": \"\u4e25\u91cd\u7a0b\u5ea6\",\n                            \"value\": severity.upper(),\n                            \"short\": True\n                        },\n                        {\n                            \"title\": \"\u65f6\u95f4\",\n                            \"value\": datetime.now().isoformat(),\n                            \"short\": True\n                        },\n                        {\n                            \"title\": \"\u6d88\u606f\",\n                            \"value\": message,\n                            \"short\": False\n                        }\n                    ]\n                }\n            ]\n        }\n\n        try:\n            requests.post(self.webhook_url, json=payload)\n        except Exception as e:\n            logger.error(f\"\u53d1\u9001 Slack \u544a\u8b66\u5931\u8d25: {e}\")\n\n# \u4f7f\u7528\u793a\u4f8b\nnotifier = SlackNotifier(os.getenv(\"SLACK_WEBHOOK_URL\"))\nnotifier.send_alert(\"\u9884\u6d4b\u670d\u52a1\u54cd\u5e94\u65f6\u95f4\u8d85\u8fc75\u79d2\", \"warning\")\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_11","title":"\u5e38\u7528\u547d\u4ee4\u901f\u67e5","text":"<pre><code># \u67e5\u770b\u670d\u52a1\u72b6\u6001\nsystemctl status football-prediction\n\n# \u67e5\u770b\u6700\u65b0\u65e5\u5fd7\ntail -f /var/log/football-prediction/app.log\n\n# \u91cd\u542f\u670d\u52a1\nsudo systemctl restart football-prediction\n\n# \u67e5\u770b\u8fdb\u7a0b\nps aux | grep football\n\n# \u67e5\u770b\u7aef\u53e3\nnetstat -tlnp | grep :8000\n\n# \u6d4b\u8bd5 API\ncurl http://localhost:8000/api/health\n\n# \u67e5\u770b\u6570\u636e\u5e93\u8fde\u63a5\npsql $DATABASE_URL -c \"SELECT count(*) FROM matches;\"\n\n# \u67e5\u770b Redis\nredis-cli info memory\n\n# \u8fd0\u884c\u6d4b\u8bd5\npytest tests/\n\n# \u67e5\u770b\u7cfb\u7edf\u8d44\u6e90\nhtop\n</code></pre>"},{"location":"how-to/TROUBLESHOOTING_GUIDE/#_12","title":"\u8054\u7cfb\u652f\u6301","text":"<p>\u5982\u679c\u95ee\u9898\u4ecd\u672a\u89e3\u51b3\uff0c\u8bf7\u6536\u96c6\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ol> <li> <p>\u7cfb\u7edf\u4fe1\u606f <pre><code>uname -a\npython --version\npip list | grep -E \"(fastapi|uvicorn|sqlalchemy|redis)\"\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u4fe1\u606f <pre><code>cat .env | grep -v \"PASSWORD\\|SECRET\\|TOKEN\"\n</code></pre></p> </li> <li> <p>\u65e5\u5fd7\u6587\u4ef6 <pre><code>journalctl -u football-prediction --since \"10 minutes ago\" &gt; system.log\ntail -100 /var/log/football-prediction/app.log &gt; app.log\n</code></pre></p> </li> <li> <p>\u9519\u8bef\u4fe1\u606f <pre><code># \u63d0\u4f9b\u5b8c\u6574\u7684\u9519\u8bef\u5806\u6808\n</code></pre></p> </li> </ol> <p>\u53d1\u9001\u81f3\uff1asupport@football-prediction.com</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/_index/","title":"PRODUCTION_DEPLOYMENT_GUIDE - \u5206\u5272\u6587\u6863","text":"<ul> <li>Part 1</li> <li>Part 2</li> <li>Part 3</li> <li>Part 4</li> <li>Part 5</li> <li>Part 6</li> <li>Part 7</li> </ul>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":"<p>\u7cfb\u7edf\u540d\u79f0: \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf (Football Prediction System) \u7248\u672c: Phase 6 Production Ready \u6700\u540e\u66f4\u65b0: 2025-09-25 \u6587\u6863\u76ee\u6807: \u63d0\u4f9b\u6807\u51c6\u5316\u3001\u53ef\u6267\u884c\u7684\u751f\u4ea7\u90e8\u7f72\u624b\u518c\uff0c\u786e\u4fdd\u90e8\u7f72\u8fc7\u7a0b\u5b89\u5168\u3001\u53ef\u63a7\u3001\u53ef\u56de\u6eda</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_2","title":"\ud83d\udccb \u6267\u884c\u6458\u8981","text":"<p>\ud83d\udccb \u6267\u884c\u6458\u8981</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_3","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_4","title":"\ud83c\udfaf \u624b\u518c\u76ee\u6807","text":"<p>\u672c\u624b\u518c\u65e8\u5728\u4e3a\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u7684\u751f\u4ea7\u90e8\u7f72\u63d0\u4f9b\u6807\u51c6\u5316\u7684\u6267\u884c\u6d41\u7a0b\uff0c\u6db5\u76d6\u4ece\u90e8\u7f72\u51c6\u5907\u5230\u9a8c\u8bc1\u518d\u5230\u56de\u6eda\u6f14\u7ec3\u7684\u5b8c\u6574\u73af\u8282\u3002\u901a\u8fc7\u9075\u5faa\u672c\u624b\u518c\uff0c\u786e\u4fdd\u7cfb\u7edf\u90e8\u7f72\u8fc7\u7a0b\u7684\u5b89\u5168\u6027\u3001\u53ef\u63a7\u6027\u548c\u53ef\u56de\u6eda\u6027\u3002</p> <p>\ud83c\udfaf \u624b\u518c\u76ee\u6807</p> <p>\u672c\u624b\u518c\u65e8\u5728\u4e3a\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u7684\u751f\u4ea7\u90e8\u7f72\u63d0\u4f9b\u6807\u51c6\u5316\u7684\u6267\u884c\u6d41\u7a0b\uff0c\u6db5\u76d6\u4ece\u90e8\u7f72\u51c6\u5907\u5230\u9a8c\u8bc1\u518d\u5230\u56de\u6eda\u6f14\u7ec3\u7684\u5b8c\u6574\u73af\u8282\u3002\u901a\u8fc7\u9075\u5faa\u672c\u624b\u518c\uff0c\u786e\u4fdd\u7cfb\u7edf\u90e8\u7f72\u8fc7\u7a0b\u7684\u5b89\u5168\u6027\u3001\u53ef\u63a7\u6027\u548c\u53ef\u56de\u6eda\u6027\u3002</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_5","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_6","title":"\ud83c\udfd7\ufe0f \u4e0a\u7ebf\u6d89\u53ca\u7684\u6838\u5fc3\u7ec4\u4ef6","text":"\u7ec4\u4ef6\u7c7b\u522b \u7ec4\u4ef6\u540d\u79f0 \u7aef\u53e3 \u5173\u952e\u4f5c\u7528 \u5e94\u7528\u670d\u52a1 FastAPI Application 8000 \u6838\u5fc3API\u670d\u52a1\u548c\u9884\u6d4b\u529f\u80fd \u6570\u636e\u5e93 PostgreSQL 15 5432 \u4e3b\u6570\u636e\u5e93\u5b58\u50a8 \u7f13\u5b58 Redis 7 6379 \u7f13\u5b58\u548c\u4f1a\u8bdd\u5b58\u50a8 \u6d88\u606f\u961f\u5217 Kafka 3.6.1 9092 \u5f02\u6b65\u6d88\u606f\u5904\u7406 \u6a21\u578b\u670d\u52a1 MLflow 5002 \u6a21\u578b\u751f\u547d\u5468\u671f\u7ba1\u7406 \u5bf9\u8c61\u5b58\u50a8 MinIO 9000 \u6a21\u578b\u6587\u4ef6\u548c\u6570\u636e\u5b58\u50a8 \u6570\u636e\u8840\u7f18 Marquez 5000 \u6570\u636e\u8840\u7f18\u8ffd\u8e2a \u76d1\u63a7\u7cfb\u7edf Prometheus/Grafana 9090/3000 \u76d1\u63a7\u544a\u8b66 \u8d1f\u8f7d\u5747\u8861 Nginx 80/443 \u53cd\u5411\u4ee3\u7406\u548c\u8d1f\u8f7d\u5747\u8861 \u4efb\u52a1\u961f\u5217 Celery - \u540e\u53f0\u4efb\u52a1\u5904\u7406 <p>\ud83c\udfd7\ufe0f \u4e0a\u7ebf\u6d89\u53ca\u7684\u6838\u5fc3\u7ec4\u4ef6</p> \u7ec4\u4ef6\u7c7b\u522b \u7ec4\u4ef6\u540d\u79f0 \u7aef\u53e3 \u5173\u952e\u4f5c\u7528 \u5e94\u7528\u670d\u52a1 FastAPI Application 8000 \u6838\u5fc3API\u670d\u52a1\u548c\u9884\u6d4b\u529f\u80fd \u6570\u636e\u5e93 PostgreSQL 15 5432 \u4e3b\u6570\u636e\u5e93\u5b58\u50a8 \u7f13\u5b58 Redis 7 6379 \u7f13\u5b58\u548c\u4f1a\u8bdd\u5b58\u50a8 \u6d88\u606f\u961f\u5217 Kafka 3.6.1 9092 \u5f02\u6b65\u6d88\u606f\u5904\u7406 \u6a21\u578b\u670d\u52a1 MLflow 5002 \u6a21\u578b\u751f\u547d\u5468\u671f\u7ba1\u7406 \u5bf9\u8c61\u5b58\u50a8 MinIO 9000 \u6a21\u578b\u6587\u4ef6\u548c\u6570\u636e\u5b58\u50a8 \u6570\u636e\u8840\u7f18 Marquez 5000 \u6570\u636e\u8840\u7f18\u8ffd\u8e2a \u76d1\u63a7\u7cfb\u7edf Prometheus/Grafana 9090/3000 \u76d1\u63a7\u544a\u8b66 \u8d1f\u8f7d\u5747\u8861 Nginx 80/443 \u53cd\u5411\u4ee3\u7406\u548c\u8d1f\u8f7d\u5747\u8861 \u4efb\u52a1\u961f\u5217 Celery - \u540e\u53f0\u4efb\u52a1\u5904\u7406"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_7","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_8","title":"\ud83d\udd27 \u90e8\u7f72\u524d\u51c6\u5907","text":"<p>\ud83d\udd27 \u90e8\u7f72\u524d\u51c6\u5907</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_9","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#1-cicd","title":"1. \u4ee3\u7801\u548cCI/CD\u9a8c\u8bc1","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_10","title":"\u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u4ee3\u7801\u51c6\u5907","text":"<ul> <li> \u4e3b\u5206\u652f\u72b6\u6001: \u786e\u8ba4\u4ee3\u7801\u5df2\u5408\u5e76\u81f3 <code>main</code> \u5206\u652f</li> <li> CI/CD\u901a\u8fc7: \u6700\u65b0\u63d0\u4ea4\u7684CI/CD\u6d41\u7a0b\u5168\u90e8\u901a\u8fc7</li> <li> \u7248\u672c\u6807\u8bb0: \u4f7f\u7528\u6b63\u786e\u7684\u7248\u672c\u6807\u7b7e\u683c\u5f0f <code>football-predict:phase6</code></li> <li> \u6d4b\u8bd5\u8986\u76d6\u7387: \u786e\u8ba4\u6d4b\u8bd5\u8986\u76d6\u7387 \u226570%</li> <li> \u5b89\u5168\u626b\u63cf: Bandit\u548cSafety\u5b89\u5168\u626b\u63cf\u901a\u8fc7</li> </ul>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_11","title":"\ud83d\udd04 \u7248\u672c\u53f7\u89c4\u8303","text":"<pre><code>1. \u4ee3\u7801\u548cCI/CD\u9a8c\u8bc1\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u4ee3\u7801\u51c6\u5907\n\n- [ ] **\u4e3b\u5206\u652f\u72b6\u6001**: \u786e\u8ba4\u4ee3\u7801\u5df2\u5408\u5e76\u81f3 `main` \u5206\u652f\n- [ ] **CI/CD\u901a\u8fc7**: \u6700\u65b0\u63d0\u4ea4\u7684CI/CD\u6d41\u7a0b\u5168\u90e8\u901a\u8fc7\n- [ ] **\u7248\u672c\u6807\u8bb0**: \u4f7f\u7528\u6b63\u786e\u7684\u7248\u672c\u6807\u7b7e\u683c\u5f0f `football-predict:phase6`\n- [ ] **\u6d4b\u8bd5\u8986\u76d6\u7387**: \u786e\u8ba4\u6d4b\u8bd5\u8986\u76d6\u7387 \u226570%\n- [ ] **\u5b89\u5168\u626b\u63cf**: Bandit\u548cSafety\u5b89\u5168\u626b\u63cf\u901a\u8fc7\n\n#### \ud83d\udd04 \u7248\u672c\u53f7\u89c4\u8303\n\n```bash#\n#\u7248\u672c\u547d\u540d\u89c4\u8303\nfootball-predict:phase6              # Phase 6 \u751f\u4ea7\u7248\u672c\nfootball-predict:phase6-v1.0.0       # \u8bed\u4e49\u5316\u7248\u672c\nfootball-predict:phase6-&lt;git-sha&gt;    # Git SHA\u7248\u672c\nfootball-predict:phase6-&lt;timestamp&gt;  # \u65f6\u95f4\u6233\u7248\u672c\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_12","title":"\ud83d\udccb \u9a8c\u8bc1\u547d\u4ee4","text":"<pre><code>\u7248\u672c\u547d\u540d\u89c4\u8303\nfootball-predict:phase6              # Phase 6 \u751f\u4ea7\u7248\u672c\nfootball-predict:phase6-v1.0.0       # \u8bed\u4e49\u5316\u7248\u672c\nfootball-predict:phase6-&lt;git-sha&gt;    # Git SHA\u7248\u672c\nfootball-predict:phase6-&lt;timestamp&gt;  # \u65f6\u95f4\u6233\u7248\u672c\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_13","title":"\ud83d\udccb \u9a8c\u8bc1\u547d\u4ee4","text":"<pre><code>#1. \u68c0\u67e5\u4ee3\u7801\u72b6\u6001\ngit status\ngit log --oneline -5\n\n1. \u68c0\u67e5\u4ee3\u7801\u72b6\u6001\ngit status\ngit log --oneline -5\n#\n#2. \u9a8c\u8bc1CI/CD\u72b6\u6001\ngh run list --limit=5\n\n2. \u9a8c\u8bc1CI/CD\u72b6\u6001\ngh run list --limit=5\n#\n#3. \u68c0\u67e5\u6d4b\u8bd5\u8986\u76d6\u7387\n./venv/bin/pytest tests/unit --cov=src --cov-report=term --cov-fail-under=70\n\n3. \u68c0\u67e5\u6d4b\u8bd5\u8986\u76d6\u7387\n./venv/bin/pytest tests/unit --cov=src --cov-report=term --cov-fail-under=70\n#\n#4. \u5b89\u5168\u626b\u63cf\u9a8c\u8bc1\nbandit -r src/ -f json -o bandit-latest.json\nsafety check --json --output safety-latest.json\n</code></pre> <ol> <li>\u5b89\u5168\u626b\u63cf\u9a8c\u8bc1 bandit -r src/ -f json -o bandit-latest.json safety check --json --output safety-latest.json <pre><code>###\n###2. \u73af\u5883\u53d8\u91cf\u51c6\u5907\n\n#### \ud83d\udd10 \u73af\u5883\u53d8\u91cf\u6e05\u5355\n\n```bash\n2. \u73af\u5883\u53d8\u91cf\u51c6\u5907\n\n#### \ud83d\udd10 \u73af\u5883\u53d8\u91cf\u6e05\u5355\n\n```bash#\n#=============================================================================\n=============================================================================#\n#\u5e94\u7528\u57fa\u7840\u914d\u7f6e\n\u5e94\u7528\u57fa\u7840\u914d\u7f6e#\n#=============================================================================\nENVIRONMENT=production\nAPI_HOST=0.0.0.0\nAPI_PORT=8000\nLOG_LEVEL=INFO\nCORS_ORIGINS=https://your-domain.com,https://api.your-domain.com\n\n=============================================================================\nENVIRONMENT=production\nAPI_HOST=0.0.0.0\nAPI_PORT=8000\nLOG_LEVEL=INFO\nCORS_ORIGINS=https://your-domain.com,https://api.your-domain.com\n#\n#=============================================================================\n=============================================================================#\n#\u5b89\u5168\u914d\u7f6e\n\u5b89\u5168\u914d\u7f6e#\n#=============================================================================\nJWT_SECRET_KEY=your_super_secure_jwt_secret_key_here_minimum_32_characters\nJWT_ALGORITHM=HS256\nJWT_EXPIRE_MINUTES=1440\n\n=============================================================================\nJWT_SECRET_KEY=your_super_secure_jwt_secret_key_here_minimum_32_characters\nJWT_ALGORITHM=HS256\nJWT_EXPIRE_MINUTES=1440\n#\n#=============================================================================\n=============================================================================#\n#\u6570\u636e\u5e93\u914d\u7f6e - \u4e3b\u6570\u636e\u5e93\n\u6570\u636e\u5e93\u914d\u7f6e - \u4e3b\u6570\u636e\u5e93#\n#=============================================================================\nDB_HOST=db\nDB_PORT=5432\nDB_NAME=football_prediction_dev\nDB_USER=football_user\nDB_PASSWORD=your_secure_db_password_here\n\n=============================================================================\nDB_HOST=db\nDB_PORT=5432\nDB_NAME=football_prediction_dev\nDB_USER=football_user\nDB_PASSWORD=your_secure_db_password_here\n#\n#PostgreSQL \u6839\u7528\u6237\nPOSTGRES_DB=football_prediction_dev\nPOSTGRES_USER=football_user\nPOSTGRES_PASSWORD=your_secure_postgres_password_here\n\nPostgreSQL \u6839\u7528\u6237\nPOSTGRES_DB=football_prediction_dev\nPOSTGRES_USER=football_user\nPOSTGRES_PASSWORD=your_secure_postgres_password_here\n#\n#\u591a\u7528\u6237\u67b6\u6784\nDB_READER_USER=football_reader\nDB_READER_PASSWORD=your_reader_password_here\nDB_WRITER_USER=football_writer\nDB_WRITER_PASSWORD=your_writer_password_here\nDB_ADMIN_USER=football_admin\nDB_ADMIN_PASSWORD=your_admin_password_here\n\n\u591a\u7528\u6237\u67b6\u6784\nDB_READER_USER=football_reader\nDB_READER_PASSWORD=your_reader_password_here\nDB_WRITER_USER=football_writer\nDB_WRITER_PASSWORD=your_writer_password_here\nDB_ADMIN_USER=football_admin\nDB_ADMIN_PASSWORD=your_admin_password_here\n#\n#=============================================================================\n=============================================================================#\n#\u7f13\u5b58\u914d\u7f6e\n\u7f13\u5b58\u914d\u7f6e#\n#=============================================================================\nREDIS_PASSWORD=your_secure_redis_password_here\nREDIS_URL=redis://:your_secure_redis_password_here@redis:6379/0\n\n=============================================================================\nREDIS_PASSWORD=your_secure_redis_password_here\nREDIS_URL=redis://:your_secure_redis_password_here@redis:6379/0\n#\n#Celery \u4efb\u52a1\u961f\u5217\nCELERY_BROKER_URL=redis://:your_secure_redis_password_here@redis:6379/0\nCELERY_RESULT_BACKEND=redis://:your_secure_redis_password_here@redis:6379/0\n\nCelery \u4efb\u52a1\u961f\u5217\nCELERY_BROKER_URL=redis://:your_secure_redis_password_here@redis:6379/0\nCELERY_RESULT_BACKEND=redis://:your_secure_redis_password_here@redis:6379/0\n#\n#=============================================================================\n=============================================================================#\n#\u5bf9\u8c61\u5b58\u50a8\u914d\u7f6e\n\u5bf9\u8c61\u5b58\u50a8\u914d\u7f6e#\n#=============================================================================\nMINIO_ROOT_USER=football_minio_admin\nMINIO_ROOT_PASSWORD=your_secure_minio_password_here\nMINIO_SECRET_KEY=your_minio_secret_key_here\n\n=============================================================================\nMINIO_ROOT_USER=football_minio_admin\nMINIO_ROOT_PASSWORD=your_secure_minio_password_here\nMINIO_SECRET_KEY=your_minio_secret_key_here\n#\n#AWS (for MinIO compatibility)\nAWS_ACCESS_KEY_ID=football_minio_admin\nAWS_SECRET_ACCESS_KEY=your_secure_minio_password_here\nAWS_DEFAULT_REGION=us-east-1\n\nAWS (for MinIO compatibility)\nAWS_ACCESS_KEY_ID=football_minio_admin\nAWS_SECRET_ACCESS_KEY=your_secure_minio_password_here\nAWS_DEFAULT_REGION=us-east-1\n#\n#=============================================================================\n=============================================================================#\n#MLflow \u914d\u7f6e\nMLflow \u914d\u7f6e#\n#=============================================================================\nMLFLOW_TRACKING_URI=http://mlflow:5000\nMLFLOW_EXPERIMENT_NAME=football_prediction\nMLFLOW_REGISTRY_URI=http://mlflow:5000\nMLFLOW_BACKEND_STORE_URI=postgresql://mlflow_user:mlflow_password@mlflow-db:5432/mlflow\nMLFLOW_DEFAULT_ARTIFACT_ROOT=s3://football-models/mlflow-artifacts\nMLFLOW_S3_ENDPOINT_URL=http://minio:9000\n\n=============================================================================\nMLFLOW_TRACKING_URI=http://mlflow:5000\nMLFLOW_EXPERIMENT_NAME=football_prediction\nMLFLOW_REGISTRY_URI=http://mlflow:5000\nMLFLOW_BACKEND_STORE_URI=postgresql://mlflow_user:mlflow_password@mlflow-db:5432/mlflow\nMLFLOW_DEFAULT_ARTIFACT_ROOT=s3://football-models/mlflow-artifacts\nMLFLOW_S3_ENDPOINT_URL=http://minio:9000\n#\n#MLflow \u6570\u636e\u5e93\nMLFLOW_DB_USER=mlflow_user\nMLFLOW_DB_PASSWORD=your_mlflow_password_here\nMLFLOW_DB_NAME=mlflow\n\nMLflow \u6570\u636e\u5e93\nMLFLOW_DB_USER=mlflow_user\nMLFLOW_DB_PASSWORD=your_mlflow_password_here\nMLFLOW_DB_NAME=mlflow\n#\n#=============================================================================\n=============================================================================#\n#\u6570\u636e\u8840\u7f18\u914d\u7f6e\n\u6570\u636e\u8840\u7f18\u914d\u7f6e#\n#=============================================================================\nMARQUEZ_DB_USER=marquez_user\nMARQUEZ_DB_PASSWORD=your_marquez_password_here\nMARQUEZ_DB_NAME=marquez\n\n=============================================================================\nMARQUEZ_DB_USER=marquez_user\nMARQUEZ_DB_PASSWORD=your_marquez_password_here\nMARQUEZ_DB_NAME=marquez\n#\n#=============================================================================\n=============================================================================#\n#\u76d1\u63a7\u914d\u7f6e\n\u76d1\u63a7\u914d\u7f6e#\n#=============================================================================\nGRAFANA_ADMIN_PASSWORD=your_grafana_password_here\n\n=============================================================================\nGRAFANA_ADMIN_PASSWORD=your_grafana_password_here\n#\n#=============================================================================\n=============================================================================#\n#\u6a21\u578b\u914d\u7f6e\n\u6a21\u578b\u914d\u7f6e#\n#=============================================================================\nMODEL_CACHE_TTL_HOURS=1\nPREDICTION_CACHE_TTL_MINUTES=30\nPRODUCTION_MODEL_NAME=football-match-predictor\nPRODUCTION_MODEL_VERSION=latest\n</code></pre></li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_14","title":"\ud83d\udcc1 \u73af\u5883\u6587\u4ef6\u521b\u5efa","text":"<pre><code>=============================================================================\nMODEL_CACHE_TTL_HOURS=1\nPREDICTION_CACHE_TTL_MINUTES=30\nPRODUCTION_MODEL_NAME=football-match-predictor\nPRODUCTION_MODEL_VERSION=latest\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_15","title":"\ud83d\udcc1 \u73af\u5883\u6587\u4ef6\u521b\u5efa","text":"<pre><code>#1. \u521b\u5efa\u751f\u4ea7\u73af\u5883\u6587\u4ef6\ncp .env.production.example .env.production\n\n1. \u521b\u5efa\u751f\u4ea7\u73af\u5883\u6587\u4ef6\ncp .env.production.example .env.production\n#\n#2. \u7f16\u8f91\u73af\u5883\u53d8\u91cf\uff08\u4f7f\u7528\u5b89\u5168\u7684\u65b9\u5f0f\uff09\n2. \u7f16\u8f91\u73af\u5883\u53d8\u91cf\uff08\u4f7f\u7528\u5b89\u5168\u7684\u65b9\u5f0f\uff09#\n#\u63a8\u8350\u4f7f\u7528\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1\u6216\u52a0\u5bc6\u7684\u73af\u5883\u53d8\u91cf\n\u63a8\u8350\u4f7f\u7528\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1\u6216\u52a0\u5bc6\u7684\u73af\u5883\u53d8\u91cf#\n#\u6216\u8005\u4f7f\u7528\u5b89\u5168\u914d\u7f6e\u7ba1\u7406\u5de5\u5177\n\n\u6216\u8005\u4f7f\u7528\u5b89\u5168\u914d\u7f6e\u7ba1\u7406\u5de5\u5177\n#\n#3. \u9a8c\u8bc1\u73af\u5883\u53d8\u91cf\ngrep -E \"PASSWORD|SECRET|KEY\" .env.production\n</code></pre> <ol> <li> <p>\u9a8c\u8bc1\u73af\u5883\u53d8\u91cf grep -E \"PASSWORD|SECRET|KEY\" .env.production <pre><code>###\n###3. \u6570\u636e\u5e93\u8fc1\u79fb\u68c0\u67e5\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u6570\u636e\u5e93\u51c6\u5907\n\n- [ ] **\u8fc1\u79fb\u6587\u4ef6\u5b8c\u6574**: \u786e\u8ba4\u6240\u670912\u4e2aAlembic\u8fc1\u79fb\u6587\u4ef6\u5b58\u5728\n- [ ] **\u6570\u636e\u5e93\u5907\u4efd**: \u751f\u4ea7\u6570\u636e\u5e93\u6709\u5b8c\u6574\u5907\u4efd\n- [ ] **\u8fde\u63a5\u6d4b\u8bd5**: \u6570\u636e\u5e93\u8fde\u63a5\u914d\u7f6e\u6b63\u786e\n- [ ] **\u6743\u9650\u9a8c\u8bc1**: \u6570\u636e\u5e93\u7528\u6237\u6743\u9650\u6b63\u786e\u8bbe\u7f6e\n- [ ] **\u6027\u80fd\u914d\u7f6e**: \u6570\u636e\u5e93\u6027\u80fd\u53c2\u6570\u4f18\u5316\n\n#### \ud83d\uddc4\ufe0f \u6570\u636e\u5e93\u8fc1\u79fb\u547d\u4ee4\n\n```bash\n3. \u6570\u636e\u5e93\u8fc1\u79fb\u68c0\u67e5\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u6570\u636e\u5e93\u51c6\u5907\n\n- [ ] **\u8fc1\u79fb\u6587\u4ef6\u5b8c\u6574**: \u786e\u8ba4\u6240\u670912\u4e2aAlembic\u8fc1\u79fb\u6587\u4ef6\u5b58\u5728\n- [ ] **\u6570\u636e\u5e93\u5907\u4efd**: \u751f\u4ea7\u6570\u636e\u5e93\u6709\u5b8c\u6574\u5907\u4efd\n- [ ] **\u8fde\u63a5\u6d4b\u8bd5**: \u6570\u636e\u5e93\u8fde\u63a5\u914d\u7f6e\u6b63\u786e\n- [ ] **\u6743\u9650\u9a8c\u8bc1**: \u6570\u636e\u5e93\u7528\u6237\u6743\u9650\u6b63\u786e\u8bbe\u7f6e\n- [ ] **\u6027\u80fd\u914d\u7f6e**: \u6570\u636e\u5e93\u6027\u80fd\u53c2\u6570\u4f18\u5316\n\n#### \ud83d\uddc4\ufe0f \u6570\u636e\u5e93\u8fc1\u79fb\u547d\u4ee4\n\n```bash#\n#1. \u68c0\u67e5\u8fc1\u79fb\u72b6\u6001\nalembic current\nalembic history --verbose\n\n1. \u68c0\u67e5\u8fc1\u79fb\u72b6\u6001\nalembic current\nalembic history --verbose\n#\n#2. \u9a8c\u8bc1\u8fc1\u79fb\u6587\u4ef6\nls -la src/database/migrations/versions/\nwc -l src/database/migrations/versions/*.py\n\n2. \u9a8c\u8bc1\u8fc1\u79fb\u6587\u4ef6\nls -la src/database/migrations/versions/\nwc -l src/database/migrations/versions/*.py\n#\n#3. \u6d4b\u8bd5\u6570\u636e\u5e93\u8fde\u63a5\npython -c \"\nimport asyncio\nfrom src.database.config import get_database_config\nconfig = get_database_config()\nprint(f'Database URL: {config.database_url}')\n\"\n\n3. \u6d4b\u8bd5\u6570\u636e\u5e93\u8fde\u63a5\npython -c \"\nimport asyncio\nfrom src.database.config import get_database_config\nconfig = get_database_config()\nprint(f'Database URL: {config.database_url}')\n\"\n#\n#4. \u8fd0\u884c\u8fc1\u79fb\uff08\u5982\u679c\u9700\u8981\uff09\nalembic upgrade head\n\n4. \u8fd0\u884c\u8fc1\u79fb\uff08\u5982\u679c\u9700\u8981\uff09\nalembic upgrade head\n#\n#5. \u9a8c\u8bc1\u6570\u636e\u5e93\u8868\npython -c \"\nimport asyncio\nfrom src.database.connection import get_async_session\nasync def check_tables():\n    async with get_async_session() as session:\n        result = await session.execute('SELECT tablename FROM pg_tables WHERE schemaname = \\'public\\'')\n        tables = [row[0] for row in result.fetchall()]\n        print(f'Tables: {tables}')\nasyncio.run(check_tables())\n\"\n</code></pre></p> </li> <li> <p>\u9a8c\u8bc1\u6570\u636e\u5e93\u8868 python -c \" import asyncio from src.database.connection import get_async_session async def check_tables():     async with get_async_session() as session:         result = await session.execute('SELECT tablename FROM pg_tables WHERE schemaname = \\'public\\'')         tables = [row[0] for row in result.fetchall()]         print(f'Tables: {tables}') asyncio.run(check_tables()) \" <pre><code>###\n###4. \u6a21\u578b\u6587\u4ef6\u4e0e\u7f13\u5b58\u9884\u52a0\u8f7d\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u6a21\u578b\u51c6\u5907\n\n- [ ] **\u6a21\u578b\u6587\u4ef6\u5b58\u5728**: \u786e\u8ba4MLflow\u4e2d\u5df2\u6ce8\u518c\u751f\u4ea7\u6a21\u578b\n- [ ] **\u6a21\u578b\u7248\u672c\u6b63\u786e**: \u4f7f\u7528\u6b63\u786e\u7684\u6a21\u578b\u7248\u672c\u6807\u7b7e\n- [ ] **Feature Store**: Feast feature store\u5df2\u521d\u59cb\u5316\n- [ ] **\u7f13\u5b58\u9884\u70ed**: Redis\u7f13\u5b58\u5df2\u9884\u70ed\n- [ ] **\u6a21\u578b\u52a0\u8f7d**: \u6a21\u578b\u52a0\u8f7d\u6d4b\u8bd5\u901a\u8fc7\n\n#### \ud83e\udd16 \u6a21\u578b\u9a8c\u8bc1\u547d\u4ee4\n\n```bash\n4. \u6a21\u578b\u6587\u4ef6\u4e0e\u7f13\u5b58\u9884\u52a0\u8f7d\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u6a21\u578b\u51c6\u5907\n\n- [ ] **\u6a21\u578b\u6587\u4ef6\u5b58\u5728**: \u786e\u8ba4MLflow\u4e2d\u5df2\u6ce8\u518c\u751f\u4ea7\u6a21\u578b\n- [ ] **\u6a21\u578b\u7248\u672c\u6b63\u786e**: \u4f7f\u7528\u6b63\u786e\u7684\u6a21\u578b\u7248\u672c\u6807\u7b7e\n- [ ] **Feature Store**: Feast feature store\u5df2\u521d\u59cb\u5316\n- [ ] **\u7f13\u5b58\u9884\u70ed**: Redis\u7f13\u5b58\u5df2\u9884\u70ed\n- [ ] **\u6a21\u578b\u52a0\u8f7d**: \u6a21\u578b\u52a0\u8f7d\u6d4b\u8bd5\u901a\u8fc7\n\n#### \ud83e\udd16 \u6a21\u578b\u9a8c\u8bc1\u547d\u4ee4\n\n```bash#\n#1. \u68c0\u67e5MLflow\u6a21\u578b\u6ce8\u518c\ncurl -s http://mlflow:5000/api/2.0/registered-models/list | jq '.registered_models[].name'\n\n1. \u68c0\u67e5MLflow\u6a21\u578b\u6ce8\u518c\ncurl -s http://mlflow:5000/api/2.0/registered-models/list | jq '.registered_models[].name'\n#\n#2. \u9a8c\u8bc1\u751f\u4ea7\u6a21\u578b\u7248\u672c\ncurl -s http://mlflow:5000/api/2.0/registered-models/get?name=football-match-predictor | jq '.latest_versions[]'\n\n2. \u9a8c\u8bc1\u751f\u4ea7\u6a21\u578b\u7248\u672c\ncurl -s http://mlflow:5000/api/2.0/registered-models/get?name=football-match-predictor | jq '.latest_versions[]'\n#\n#3. \u521d\u59cb\u5316Feature Store\npython -c \"\nfrom src.features.feature_store import FootballFeatureStore\nstore = FootballFeatureStore()\nstore.initialize()\nprint('Feature Store initialized successfully')\n\"\n\n3. \u521d\u59cb\u5316Feature Store\npython -c \"\nfrom src.features.feature_store import FootballFeatureStore\nstore = FootballFeatureStore()\nstore.initialize()\nprint('Feature Store initialized successfully')\n\"\n#\n#4. \u6d4b\u8bd5\u6a21\u578b\u52a0\u8f7d\npython -c \"\nfrom src.models.prediction_service import PredictionService\nservice = PredictionService(mlflow_tracking_uri='http://mlflow:5000')\nmodel = service.load_production_model()\nprint(f'Model loaded: {type(model)}')\n\"\n\n4. \u6d4b\u8bd5\u6a21\u578b\u52a0\u8f7d\npython -c \"\nfrom src.models.prediction_service import PredictionService\nservice = PredictionService(mlflow_tracking_uri='http://mlflow:5000')\nmodel = service.load_production_model()\nprint(f'Model loaded: {type(model)}')\n\"\n#\n#5. \u9884\u70ed\u7f13\u5b58\npython -c \"\nfrom src.cache.redis_manager import RedisManager\nredis = RedisManager()\n5. \u9884\u70ed\u7f13\u5b58\npython -c \"\nfrom src.cache.redis_manager import RedisManager\nredis = RedisManager()#\n#\u9884\u70ed\u5e38\u7528\u6570\u636e\nredis.warmup_cache()\nprint('Cache warmed up successfully')\n\"\n</code></pre></p> </li> </ol> <p>\u9884\u70ed\u5e38\u7528\u6570\u636e redis.warmup_cache() print('Cache warmed up successfully') \" <pre><code>---\n##\n##\ud83d\ude80 \u90e8\u7f72\u6b65\u9aa4\n\n\ud83d\ude80 \u90e8\u7f72\u6b65\u9aa4\n###\n###1. Docker Compose \u90e8\u7f72\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u90e8\u7f72\u51c6\u5907\n\n- [ ] **\u955c\u50cf\u51c6\u5907**: \u6240\u6709\u670d\u52a1\u955c\u50cf\u5df2\u6784\u5efa\u5e76\u63a8\u9001\n- [ ] **\u914d\u7f6e\u6587\u4ef6**: \u6240\u6709\u914d\u7f6e\u6587\u4ef6\u5df2\u51c6\u5907\u5c31\u7eea\n- [ ] **\u5b58\u50a8\u51c6\u5907**: \u6570\u636e\u76ee\u5f55\u548c\u5907\u4efd\u76ee\u5f55\u5df2\u521b\u5efa\n- [ ] **\u7f51\u7edc\u51c6\u5907**: Docker\u7f51\u7edc\u914d\u7f6e\u6b63\u786e\n- [ ] **\u6743\u9650\u51c6\u5907**: \u6587\u4ef6\u7cfb\u7edf\u6743\u9650\u6b63\u786e\u8bbe\u7f6e\n\n#### \ud83d\udc33 Docker Compose \u90e8\u7f72\u547d\u4ee4\n\n```bash\n1. Docker Compose \u90e8\u7f72\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u90e8\u7f72\u51c6\u5907\n\n- [ ] **\u955c\u50cf\u51c6\u5907**: \u6240\u6709\u670d\u52a1\u955c\u50cf\u5df2\u6784\u5efa\u5e76\u63a8\u9001\n- [ ] **\u914d\u7f6e\u6587\u4ef6**: \u6240\u6709\u914d\u7f6e\u6587\u4ef6\u5df2\u51c6\u5907\u5c31\u7eea\n- [ ] **\u5b58\u50a8\u51c6\u5907**: \u6570\u636e\u76ee\u5f55\u548c\u5907\u4efd\u76ee\u5f55\u5df2\u521b\u5efa\n- [ ] **\u7f51\u7edc\u51c6\u5907**: Docker\u7f51\u7edc\u914d\u7f6e\u6b63\u786e\n- [ ] **\u6743\u9650\u51c6\u5907**: \u6587\u4ef6\u7cfb\u7edf\u6743\u9650\u6b63\u786e\u8bbe\u7f6e\n\n#### \ud83d\udc33 Docker Compose \u90e8\u7f72\u547d\u4ee4\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u73af\u5883\u51c6\u5907\n1. \u73af\u5883\u51c6\u5907#\n#=============================================================================\n\n=============================================================================\n#\n#\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nexport COMPOSE_PROJECT_NAME=football-prediction-production\nexport DOCKER_DEFAULT_PLATFORM=linux/amd64\n\n\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nexport COMPOSE_PROJECT_NAME=football-prediction-production\nexport DOCKER_DEFAULT_PLATFORM=linux/amd64\n#\n#\u521b\u5efa\u5fc5\u8981\u76ee\u5f55\nmkdir -p data/{db-backups,football_lake,logs/{postgresql,redis,app}}\nmkdir -p models/{trained,experiments,retrain_reports}\n\n\u521b\u5efa\u5fc5\u8981\u76ee\u5f55\nmkdir -p data/{db-backups,football_lake,logs/{postgresql,redis,app}}\nmkdir -p models/{trained,experiments,retrain_reports}\n#\n#\u8bbe\u7f6e\u6743\u9650\nchmod 755 data/ models/\nchown -R 999:999 data/db-backups/  # PostgreSQL\u7528\u6237\u6743\u9650\n\n\u8bbe\u7f6e\u6743\u9650\nchmod 755 data/ models/\nchown -R 999:999 data/db-backups/  # PostgreSQL\u7528\u6237\u6743\u9650\n#\n#=============================================================================\n=============================================================================#\n#2. \u542f\u52a8\u57fa\u7840\u8bbe\u65bd\u670d\u52a1\n2. \u542f\u52a8\u57fa\u7840\u8bbe\u65bd\u670d\u52a1#\n#=============================================================================\n\n=============================================================================\n#\n#\u542f\u52a8\u6570\u636e\u5e93\u548c\u7f13\u5b58\uff08\u6309\u4f9d\u8d56\u987a\u5e8f\uff09\ndocker-compose up -d db redis\n\n\u542f\u52a8\u6570\u636e\u5e93\u548c\u7f13\u5b58\uff08\u6309\u4f9d\u8d56\u987a\u5e8f\uff09\ndocker-compose up -d db redis\n#\n#\u7b49\u5f85\u6570\u636e\u5e93\u542f\u52a8\u5b8c\u6210\necho \"Waiting for database to be ready...\"\ntimeout 60 bash -c 'until docker exec football_prediction_db pg_isready -U football_user; do sleep 2; done'\n\n\u7b49\u5f85\u6570\u636e\u5e93\u542f\u52a8\u5b8c\u6210\necho \"Waiting for database to be ready...\"\ntimeout 60 bash -c 'until docker exec football_prediction_db pg_isready -U football_user; do sleep 2; done'\n#\n#\u542f\u52a8\u6d88\u606f\u961f\u5217\ndocker-compose up -d zookeeper kafka\n\n\u542f\u52a8\u6d88\u606f\u961f\u5217\ndocker-compose up -d zookeeper kafka\n#\n#\u7b49\u5f85Kafka\u542f\u52a8\u5b8c\u6210\necho \"Waiting for Kafka to be ready...\"\ntimeout 60 bash -c 'until docker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 --list; do sleep 5; done'\n\n\u7b49\u5f85Kafka\u542f\u52a8\u5b8c\u6210\necho \"Waiting for Kafka to be ready...\"\ntimeout 60 bash -c 'until docker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 --list; do sleep 5; done'\n#\n#=============================================================================\n=============================================================================#\n#3. \u542f\u52a8\u5b58\u50a8\u548cML\u670d\u52a1\n3. \u542f\u52a8\u5b58\u50a8\u548cML\u670d\u52a1#\n#=============================================================================\n\n=============================================================================\n#\n#\u542f\u52a8\u5bf9\u8c61\u5b58\u50a8\ndocker-compose up -d minio\n\n\u542f\u52a8\u5bf9\u8c61\u5b58\u50a8\ndocker-compose up -d minio\n#\n#\u7b49\u5f85MinIO\u542f\u52a8\u5b8c\u6210\necho \"Waiting for MinIO to be ready...\"\ntimeout 30 bash -c 'until curl -f http://localhost:9000/minio/health/live; do sleep 2; done'\n\n\u7b49\u5f85MinIO\u542f\u52a8\u5b8c\u6210\necho \"Waiting for MinIO to be ready...\"\ntimeout 30 bash -c 'until curl -f http://localhost:9000/minio/health/live; do sleep 2; done'\n#\n#\u542f\u52a8MLflow\ndocker-compose up -d mlflow-db mlflow\n\n\u542f\u52a8MLflow\ndocker-compose up -d mlflow-db mlflow\n#\n#\u7b49\u5f85MLflow\u542f\u52a8\u5b8c\u6210\necho \"Waiting for MLflow to be ready...\"\ntimeout 60 bash -c 'until curl -f http://localhost:5002/health; do sleep 5; done'\n\n\u7b49\u5f85MLflow\u542f\u52a8\u5b8c\u6210\necho \"Waiting for MLflow to be ready...\"\ntimeout 60 bash -c 'until curl -f http://localhost:5002/health; do sleep 5; done'\n#\n#=============================================================================\n=============================================================================#\n#4. \u542f\u52a8\u76d1\u63a7\u670d\u52a1\n4. \u542f\u52a8\u76d1\u63a7\u670d\u52a1#\n#=============================================================================\n\n=============================================================================\n#\n#\u542f\u52a8\u76d1\u63a7\u7cfb\u7edf\ndocker-compose up -d prometheus grafana alertmanager\n\n\u542f\u52a8\u76d1\u63a7\u7cfb\u7edf\ndocker-compose up -d prometheus grafana alertmanager\n#\n#\u542f\u52a8\u6307\u6807\u5bfc\u51fa\u5668\ndocker-compose up -d node-exporter postgres-exporter redis-exporter\n\n\u542f\u52a8\u6307\u6807\u5bfc\u51fa\u5668\ndocker-compose up -d node-exporter postgres-exporter redis-exporter\n#\n#=============================================================================\n=============================================================================#\n#5. \u542f\u52a8\u5e94\u7528\u670d\u52a1\n5. \u542f\u52a8\u5e94\u7528\u670d\u52a1#\n#=============================================================================\n\n=============================================================================\n#\n#\u542f\u52a8\u6570\u636e\u8840\u7f18\u670d\u52a1\ndocker-compose up -d marquez-db marquez\n\n\u542f\u52a8\u6570\u636e\u8840\u7f18\u670d\u52a1\ndocker-compose up -d marquez-db marquez\n#\n#\u542f\u52a8\u4efb\u52a1\u961f\u5217\ndocker-compose up -d celery-worker celery-beat celery-flower\n\n\u542f\u52a8\u4efb\u52a1\u961f\u5217\ndocker-compose up -d celery-worker celery-beat celery-flower\n#\n#\u542f\u52a8\u5e94\u7528\u670d\u52a1\ndocker-compose up -d app\n\n\u542f\u52a8\u5e94\u7528\u670d\u52a1\ndocker-compose up -d app\n#\n#\u542f\u52a8\u8d1f\u8f7d\u5747\u8861\ndocker-compose up -d nginx\n\n\u542f\u52a8\u8d1f\u8f7d\u5747\u8861\ndocker-compose up -d nginx\n#\n#=============================================================================\n=============================================================================#\n#6. \u9a8c\u8bc1\u542f\u52a8\u72b6\u6001\n6. \u9a8c\u8bc1\u542f\u52a8\u72b6\u6001#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u6240\u6709\u670d\u52a1\u72b6\u6001\ndocker-compose ps\n\n\u68c0\u67e5\u6240\u6709\u670d\u52a1\u72b6\u6001\ndocker-compose ps\n#\n#\u68c0\u67e5\u670d\u52a1\u5065\u5eb7\u72b6\u6001\ndocker-compose exec app curl -f http://localhost:8000/health\ndocker-compose exec db pg_isready -U football_user\ndocker-compose exec redis redis-cli ping\n</code></pre></p> <p>\u68c0\u67e5\u670d\u52a1\u5065\u5eb7\u72b6\u6001 docker-compose exec app curl -f http://localhost:8000/health docker-compose exec db pg_isready -U football_user docker-compose exec redis redis-cli ping ```</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_16","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#2-kubernetes","title":"2. Kubernetes \u90e8\u7f72","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#k8s","title":"\u2705 \u68c0\u67e5\u6e05\u5355\uff1aK8s\u51c6\u5907","text":"<ul> <li> \u96c6\u7fa4\u8fde\u63a5: kubectl\u914d\u7f6e\u6b63\u786e</li> <li> \u547d\u540d\u7a7a\u95f4: \u751f\u4ea7\u547d\u540d\u7a7a\u95f4\u5df2\u521b\u5efa</li> <li> \u5bc6\u94a5\u914d\u7f6e: Kubernetes secrets\u5df2\u521b\u5efa</li> <li> \u914d\u7f6e\u6620\u5c04: ConfigMaps\u5df2\u521b\u5efa</li> <li> \u5b58\u50a8\u7c7b: PersistentVolume\u914d\u7f6e\u6b63\u786e</li> </ul>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#kubernetes","title":"\u2638\ufe0f Kubernetes \u90e8\u7f72\u547d\u4ee4","text":"<p>```bash 2. Kubernetes \u90e8\u7f72</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#k8s_1","title":"\u2705 \u68c0\u67e5\u6e05\u5355\uff1aK8s\u51c6\u5907","text":"<ul> <li> \u96c6\u7fa4\u8fde\u63a5: kubectl\u914d\u7f6e\u6b63\u786e</li> <li> \u547d\u540d\u7a7a\u95f4: \u751f\u4ea7\u547d\u540d\u7a7a\u95f4\u5df2\u521b\u5efa</li> <li> \u5bc6\u94a5\u914d\u7f6e: Kubernetes secrets\u5df2\u521b\u5efa</li> <li> \u914d\u7f6e\u6620\u5c04: ConfigMaps\u5df2\u521b\u5efa</li> <li> \u5b58\u50a8\u7c7b: PersistentVolume\u914d\u7f6e\u6b63\u786e</li> </ul>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#kubernetes_1","title":"\u2638\ufe0f Kubernetes \u90e8\u7f72\u547d\u4ee4","text":"<p>```bash#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_17","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#1","title":"1. \u547d\u540d\u7a7a\u95f4\u51c6\u5907","text":"<ol> <li>\u547d\u540d\u7a7a\u95f4\u51c6\u5907#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_18","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_19","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_20","title":"\u521b\u5efa\u751f\u4ea7\u547d\u540d\u7a7a\u95f4","text":"<p>kubectl create namespace football-production</p> <p>\u521b\u5efa\u751f\u4ea7\u547d\u540d\u7a7a\u95f4 kubectl create namespace football-production</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_21","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_22","title":"\u8bbe\u7f6e\u9ed8\u8ba4\u547d\u540d\u7a7a\u95f4","text":"<p>kubectl config set-context --current --namespace=football-production</p> <p>\u8bbe\u7f6e\u9ed8\u8ba4\u547d\u540d\u7a7a\u95f4 kubectl config set-context --current --namespace=football-production</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_23","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_24","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#2","title":"2. \u5bc6\u94a5\u548c\u914d\u7f6e","text":"<ol> <li>\u5bc6\u94a5\u548c\u914d\u7f6e#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_25","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_26","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_27","title":"\u521b\u5efa\u6570\u636e\u5e93\u5bc6\u94a5","text":"<p>kubectl create secret generic db-secrets \\   --from-literal=db-user=football_user \\   --from-literal=db-password=your_secure_db_password_here \\   --from-literal=postgres-password=your_secure_postgres_password_here</p> <p>\u521b\u5efa\u6570\u636e\u5e93\u5bc6\u94a5 kubectl create secret generic db-secrets \\   --from-literal=db-user=football_user \\   --from-literal=db-password=your_secure_db_password_here \\   --from-literal=postgres-password=your_secure_postgres_password_here</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_28","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#redis","title":"\u521b\u5efaRedis\u5bc6\u94a5","text":"<p>kubectl create secret generic redis-secrets \\   --from-literal=redis-password=your_secure_redis_password_here</p> <p>\u521b\u5efaRedis\u5bc6\u94a5 kubectl create secret generic redis-secrets \\   --from-literal=redis-password=your_secure_redis_password_here</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_29","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_30","title":"\u521b\u5efa\u5e94\u7528\u5bc6\u94a5","text":"<p>kubectl create secret generic app-secrets \\   --from-literal=jwt-secret-key=your_super_secure_jwt_secret_key_here \\   --from-literal=minio-secret-key=your_minio_secret_key_here</p> <p>\u521b\u5efa\u5e94\u7528\u5bc6\u94a5 kubectl create secret generic app-secrets \\   --from-literal=jwt-secret-key=your_super_secure_jwt_secret_key_here \\   --from-literal=minio-secret-key=your_minio_secret_key_here</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_31","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#configmap","title":"\u521b\u5efaConfigMap","text":"<p>kubectl create configmap app-config \\   --from-file=configs/ \\   --from-literal=environment=production \\   --from-literal=log-level=INFO</p> <p>\u521b\u5efaConfigMap kubectl create configmap app-config \\   --from-file=configs/ \\   --from-literal=environment=production \\   --from-literal=log-level=INFO</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_32","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_33","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#3","title":"3. \u5b58\u50a8\u914d\u7f6e","text":"<ol> <li>\u5b58\u50a8\u914d\u7f6e#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_34","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_35","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#persistentvolumeclaims","title":"\u521b\u5efaPersistentVolumeClaims","text":"<p>kubectl apply -f k8s/storage/postgres-pvc.yaml kubectl apply -f k8s/storage/redis-pvc.yaml kubectl apply -f k8s/storage/minio-pvc.yaml</p> <p>\u521b\u5efaPersistentVolumeClaims kubectl apply -f k8s/storage/postgres-pvc.yaml kubectl apply -f k8s/storage/redis-pvc.yaml kubectl apply -f k8s/storage/minio-pvc.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_36","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_37","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#4","title":"4. \u6570\u636e\u5e93\u90e8\u7f72","text":"<ol> <li>\u6570\u636e\u5e93\u90e8\u7f72#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_38","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_39","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#postgresql","title":"\u90e8\u7f72PostgreSQL","text":"<p>kubectl apply -f k8s/database/postgres-deployment.yaml kubectl apply -f k8s/database/postgres-service.yaml</p> <p>\u90e8\u7f72PostgreSQL kubectl apply -f k8s/database/postgres-deployment.yaml kubectl apply -f k8s/database/postgres-service.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_40","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_41","title":"\u7b49\u5f85\u6570\u636e\u5e93\u5c31\u7eea","text":"<p>kubectl wait --for=condition=ready pod -l app=postgres --timeout=300s</p> <p>\u7b49\u5f85\u6570\u636e\u5e93\u5c31\u7eea kubectl wait --for=condition=ready pod -l app=postgres --timeout=300s</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_42","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#redis_1","title":"\u90e8\u7f72Redis","text":"<p>kubectl apply -f k8s/cache/redis-deployment.yaml kubectl apply -f k8s/cache/redis-service.yaml</p> <p>\u90e8\u7f72Redis kubectl apply -f k8s/cache/redis-deployment.yaml kubectl apply -f k8s/cache/redis-service.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_43","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#redis_2","title":"\u7b49\u5f85Redis\u5c31\u7eea","text":"<p>kubectl wait --for=condition=ready pod -l app=redis --timeout=120s</p> <p>\u7b49\u5f85Redis\u5c31\u7eea kubectl wait --for=condition=ready pod -l app=redis --timeout=120s</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_44","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_45","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#5","title":"5. \u6d88\u606f\u961f\u5217\u90e8\u7f72","text":"<ol> <li>\u6d88\u606f\u961f\u5217\u90e8\u7f72#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_46","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_47","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#kafka","title":"\u90e8\u7f72Kafka","text":"<p>kubectl apply -f k8s/messaging/zookeeper-deployment.yaml kubectl apply -f k8s/messaging/zookeeper-service.yaml kubectl apply -f k8s/messaging/kafka-deployment.yaml kubectl apply -f k8s/messaging/kafka-service.yaml</p> <p>\u90e8\u7f72Kafka kubectl apply -f k8s/messaging/zookeeper-deployment.yaml kubectl apply -f k8s/messaging/zookeeper-service.yaml kubectl apply -f k8s/messaging/kafka-deployment.yaml kubectl apply -f k8s/messaging/kafka-service.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_48","title":"\ud83d\ude80 \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u6267\u884c\u624b\u518c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#_49","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_01/#6-ml","title":"6. \u5b58\u50a8\u548cML\u670d\u52a1","text":"<ol> <li>\u5b58\u50a8\u548cML\u670d\u52a1#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_2","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#minio","title":"\u90e8\u7f72MinIO","text":"<p>kubectl apply -f k8s/storage/minio-deployment.yaml kubectl apply -f k8s/storage/minio-service.yaml</p> <p>\u90e8\u7f72MinIO kubectl apply -f k8s/storage/minio-deployment.yaml kubectl apply -f k8s/storage/minio-service.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_3","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#mlflow","title":"\u90e8\u7f72MLflow","text":"<p>kubectl apply -f k8s/ml/mlflow-deployment.yaml kubectl apply -f k8s/ml/mlflow-service.yaml</p> <p>\u90e8\u7f72MLflow kubectl apply -f k8s/ml/mlflow-deployment.yaml kubectl apply -f k8s/ml/mlflow-service.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_4","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_5","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#7","title":"7. \u76d1\u63a7\u7cfb\u7edf\u90e8\u7f72","text":"<ol> <li>\u76d1\u63a7\u7cfb\u7edf\u90e8\u7f72#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_6","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_7","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#prometheus","title":"\u90e8\u7f72Prometheus","text":"<p>kubectl apply -f k8s/monitoring/prometheus-deployment.yaml kubectl apply -f k8s/monitoring/prometheus-service.yaml</p> <p>\u90e8\u7f72Prometheus kubectl apply -f k8s/monitoring/prometheus-deployment.yaml kubectl apply -f k8s/monitoring/prometheus-service.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_8","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#grafana","title":"\u90e8\u7f72Grafana","text":"<p>kubectl apply -f k8s/monitoring/grafana-deployment.yaml kubectl apply -f k8s/monitoring/grafana-service.yaml</p> <p>\u90e8\u7f72Grafana kubectl apply -f k8s/monitoring/grafana-deployment.yaml kubectl apply -f k8s/monitoring/grafana-service.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_9","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#alertmanager","title":"\u90e8\u7f72AlertManager","text":"<p>kubectl apply -f k8s/monitoring/alertmanager-deployment.yaml kubectl apply -f k8s/monitoring/alertmanager-service.yaml</p> <p>\u90e8\u7f72AlertManager kubectl apply -f k8s/monitoring/alertmanager-deployment.yaml kubectl apply -f k8s/monitoring/alertmanager-service.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_10","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_11","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#8","title":"8. \u5e94\u7528\u670d\u52a1\u90e8\u7f72","text":"<ol> <li>\u5e94\u7528\u670d\u52a1\u90e8\u7f72#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_12","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_13","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_14","title":"\u90e8\u7f72\u5e94\u7528","text":"<p>kubectl apply -f k8s/app/football-prediction-deployment.yaml kubectl apply -f k8s/app/football-prediction-service.yaml</p> <p>\u90e8\u7f72\u5e94\u7528 kubectl apply -f k8s/app/football-prediction-deployment.yaml kubectl apply -f k8s/app/football-prediction-service.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_15","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_16","title":"\u90e8\u7f72\u4efb\u52a1\u961f\u5217","text":"<p>kubectl apply -f k8s/tasks/celery-worker-deployment.yaml kubectl apply -f k8s/tasks/celery-beat-deployment.yaml</p> <p>\u90e8\u7f72\u4efb\u52a1\u961f\u5217 kubectl apply -f k8s/tasks/celery-worker-deployment.yaml kubectl apply -f k8s/tasks/celery-beat-deployment.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_17","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#ingress","title":"\u90e8\u7f72Ingress","text":"<p>kubectl apply -f k8s/ingress/football-prediction-ingress.yaml</p> <p>\u90e8\u7f72Ingress kubectl apply -f k8s/ingress/football-prediction-ingress.yaml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_18","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_19","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#9","title":"9. \u9a8c\u8bc1\u90e8\u7f72","text":"<ol> <li>\u9a8c\u8bc1\u90e8\u7f72#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_20","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_21","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#pod","title":"\u68c0\u67e5\u6240\u6709Pod\u72b6\u6001","text":"<p>kubectl get pods -o wide</p> <p>\u68c0\u67e5\u6240\u6709Pod\u72b6\u6001 kubectl get pods -o wide</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_22","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_23","title":"\u68c0\u67e5\u670d\u52a1\u72b6\u6001","text":"<p>kubectl get services</p> <p>\u68c0\u67e5\u670d\u52a1\u72b6\u6001 kubectl get services</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_24","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#ingress_1","title":"\u68c0\u67e5Ingress\u72b6\u6001","text":"<p>kubectl get ingress <pre><code>\u68c0\u67e5Ingress\u72b6\u6001\nkubectl get ingress\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_25","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#3","title":"3. \u670d\u52a1\u542f\u52a8\u987a\u5e8f\u8bf4\u660e","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_26","title":"\ud83d\udccb \u542f\u52a8\u987a\u5e8f\u4f9d\u8d56\u56fe","text":"<pre><code>1. \u57fa\u7840\u8bbe\u65bd\u5c42\n   \u251c\u2500\u2500 PostgreSQL (db)\n   \u251c\u2500\u2500 Redis (redis)\n   \u2514\u2500\u2500 MinIO (minio)\n\n2. \u6d88\u606f\u961f\u5217\u5c42\n   \u251c\u2500\u2500 Zookeeper (zookeeper)\n   \u2514\u2500\u2500 Kafka (kafka)\n\n3. \u6570\u636e\u670d\u52a1\u5c42\n   \u251c\u2500\u2500 MLflow DB (mlflow-db)\n   \u251c\u2500\u2500 Marquez DB (marquez-db)\n   \u2514\u2500\u2500 Feature Store (feast)\n\n4. \u5e94\u7528\u670d\u52a1\u5c42\n   \u251c\u2500\u2500 MLflow (mlflow)\n   \u251c\u2500\u2500 Marquez (marquez)\n   \u2514\u2500\u2500 Prometheus (prometheus)\n\n5. \u76d1\u63a7\u5c55\u793a\u5c42\n   \u251c\u2500\u2500 Grafana (grafana)\n   \u251c\u2500\u2500 AlertManager (alertmanager)\n   \u2514\u2500\u2500 Exporters (node-exporter, postgres-exporter, redis-exporter)\n\n6. \u4efb\u52a1\u961f\u5217\u5c42\n   \u251c\u2500\u2500 Celery Worker (celery-worker)\n   \u251c\u2500\u2500 Celery Beat (celery-beat)\n   \u2514\u2500\u2500 Celery Flower (celery-flower)\n\n7. \u5e94\u7528\u5c42\n   \u251c\u2500\u2500 FastAPI App (app)\n   \u2514\u2500\u2500 Nginx (nginx)\n</code></pre> <ol> <li>\u670d\u52a1\u542f\u52a8\u987a\u5e8f\u8bf4\u660e</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_27","title":"\ud83d\udccb \u542f\u52a8\u987a\u5e8f\u4f9d\u8d56\u56fe","text":"<pre><code>1. \u57fa\u7840\u8bbe\u65bd\u5c42\n   \u251c\u2500\u2500 PostgreSQL (db)\n   \u251c\u2500\u2500 Redis (redis)\n   \u2514\u2500\u2500 MinIO (minio)\n\n2. \u6d88\u606f\u961f\u5217\u5c42\n   \u251c\u2500\u2500 Zookeeper (zookeeper)\n   \u2514\u2500\u2500 Kafka (kafka)\n\n3. \u6570\u636e\u670d\u52a1\u5c42\n   \u251c\u2500\u2500 MLflow DB (mlflow-db)\n   \u251c\u2500\u2500 Marquez DB (marquez-db)\n   \u2514\u2500\u2500 Feature Store (feast)\n\n4. \u5e94\u7528\u670d\u52a1\u5c42\n   \u251c\u2500\u2500 MLflow (mlflow)\n   \u251c\u2500\u2500 Marquez (marquez)\n   \u2514\u2500\u2500 Prometheus (prometheus)\n\n5. \u76d1\u63a7\u5c55\u793a\u5c42\n   \u251c\u2500\u2500 Grafana (grafana)\n   \u251c\u2500\u2500 AlertManager (alertmanager)\n   \u2514\u2500\u2500 Exporters (node-exporter, postgres-exporter, redis-exporter)\n\n6. \u4efb\u52a1\u961f\u5217\u5c42\n   \u251c\u2500\u2500 Celery Worker (celery-worker)\n   \u251c\u2500\u2500 Celery Beat (celery-beat)\n   \u2514\u2500\u2500 Celery Flower (celery-flower)\n\n7. \u5e94\u7528\u5c42\n   \u251c\u2500\u2500 FastAPI App (app)\n   \u2514\u2500\u2500 Nginx (nginx)\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_28","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#4","title":"4. \u5065\u5eb7\u68c0\u67e5\u9a8c\u8bc1","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_29","title":"\ud83c\udfe5 \u5065\u5eb7\u68c0\u67e5\u7aef\u70b9\u9a8c\u8bc1","text":"<pre><code>4. \u5065\u5eb7\u68c0\u67e5\u9a8c\u8bc1\n\n#### \ud83c\udfe5 \u5065\u5eb7\u68c0\u67e5\u7aef\u70b9\u9a8c\u8bc1\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u5e94\u7528\u670d\u52a1\u5065\u5eb7\u68c0\u67e5\n1. \u5e94\u7528\u670d\u52a1\u5065\u5eb7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#\u4e3b\u5e94\u7528\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:8000/health\ncurl -f http://localhost:8000/health/liveness\ncurl -f http://localhost:8000/health/readiness\n\n\u4e3b\u5e94\u7528\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:8000/health\ncurl -f http://localhost:8000/health/liveness\ncurl -f http://localhost:8000/health/readiness\n#\n#API\u6587\u6863\u68c0\u67e5\ncurl -f http://localhost:8000/docs\ncurl -f http://localhost:8000/openapi.json\n\nAPI\u6587\u6863\u68c0\u67e5\ncurl -f http://localhost:8000/docs\ncurl -f http://localhost:8000/openapi.json\n#\n#=============================================================================\n=============================================================================#\n#2. \u6570\u636e\u5e93\u5065\u5eb7\u68c0\u67e5\n2. \u6570\u636e\u5e93\u5065\u5eb7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#PostgreSQL\u5065\u5eb7\u68c0\u67e5\ndocker exec football_prediction_db pg_isready -U football_user -d football_prediction_dev\n\nPostgreSQL\u5065\u5eb7\u68c0\u67e5\ndocker exec football_prediction_db pg_isready -U football_user -d football_prediction_dev\n#\n#Redis\u5065\u5eb7\u68c0\u67e5\ndocker exec football_prediction_redis redis-cli ping\n\nRedis\u5065\u5eb7\u68c0\u67e5\ndocker exec football_prediction_redis redis-cli ping\n#\n#MLflow\u6570\u636e\u5e93\u68c0\u67e5\ndocker exec football_prediction_mlflow-db pg_isready -U mlflow_user -d mlflow\n\nMLflow\u6570\u636e\u5e93\u68c0\u67e5\ndocker exec football_prediction_mlflow-db pg_isready -U mlflow_user -d mlflow\n#\n#=============================================================================\n=============================================================================#\n#3. \u6d88\u606f\u961f\u5217\u5065\u5eb7\u68c0\u67e5\n3. \u6d88\u606f\u961f\u5217\u5065\u5eb7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#Kafka\u5065\u5eb7\u68c0\u67e5\ndocker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 --list\n\nKafka\u5065\u5eb7\u68c0\u67e5\ndocker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 --list\n#\n#Zookeeper\u5065\u5eb7\u68c0\u67e5\ndocker exec football_prediction_zookeeper echo \"ruok\" | nc localhost 2181\n\nZookeeper\u5065\u5eb7\u68c0\u67e5\ndocker exec football_prediction_zookeeper echo \"ruok\" | nc localhost 2181\n#\n#=============================================================================\n=============================================================================#\n#4. \u5b58\u50a8\u670d\u52a1\u5065\u5eb7\u68c0\u67e5\n4. \u5b58\u50a8\u670d\u52a1\u5065\u5eb7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#MinIO\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:9000/minio/health/live\ncurl -f http://localhost:9001/minio/health/live\n\nMinIO\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:9000/minio/health/live\ncurl -f http://localhost:9001/minio/health/live\n#\n#MLflow\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:5002/health\n\nMLflow\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:5002/health\n#\n#Marquez\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:5000/api/v1/namespaces\n\nMarquez\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:5000/api/v1/namespaces\n#\n#=============================================================================\n=============================================================================#\n#5. \u76d1\u63a7\u670d\u52a1\u5065\u5eb7\u68c0\u67e5\n5. \u76d1\u63a7\u670d\u52a1\u5065\u5eb7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#Prometheus\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:9090/-/ready\n\nPrometheus\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:9090/-/ready\n#\n#Grafana\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:3000/api/health\n\nGrafana\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:3000/api/health\n#\n#AlertManager\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:9093/-/ready\n\nAlertManager\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:9093/-/ready\n#\n#=============================================================================\n=============================================================================#\n#6. \u4efb\u52a1\u961f\u5217\u5065\u5eb7\u68c0\u67e5\n6. \u4efb\u52a1\u961f\u5217\u5065\u5eb7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#Celery Flower\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:5555/\n\nCelery Flower\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:5555/\n#\n#\u68c0\u67e5Celery\u5de5\u4f5c\u72b6\u6001\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect active\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect scheduled\n</code></pre> <p>\u68c0\u67e5Celery\u5de5\u4f5c\u72b6\u6001 docker exec football_prediction_celery-worker celery -A football_prediction.celery inspect active docker exec football_prediction_celery-worker celery -A football_prediction.celery inspect scheduled <pre><code>###\n###5. \u65e5\u5fd7\u68c0\u67e5\u8981\u70b9\n\n#### \ud83d\udccb \u65e5\u5fd7\u68c0\u67e5\u6e05\u5355\u548c\u5173\u952e\u9519\u8bef\u6a21\u5f0f\n\n```bash\n5. \u65e5\u5fd7\u68c0\u67e5\u8981\u70b9\n\n#### \ud83d\udccb \u65e5\u5fd7\u68c0\u67e5\u6e05\u5355\u548c\u5173\u952e\u9519\u8bef\u6a21\u5f0f\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u5e94\u7528\u670d\u52a1\u65e5\u5fd7\u68c0\u67e5\n1. \u5e94\u7528\u670d\u52a1\u65e5\u5fd7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#\u67e5\u770b\u5e94\u7528\u542f\u52a8\u65e5\u5fd7\ndocker-compose logs --tail=100 app\n\n\u67e5\u770b\u5e94\u7528\u542f\u52a8\u65e5\u5fd7\ndocker-compose logs --tail=100 app\n#\n#\u5173\u952e\u542f\u52a8\u4fe1\u606f\u67e5\u627e\ndocker-compose logs app | grep -E \"(Starting|Started|Ready|Listening|Database connected|Cache connected)\"\n\n\u5173\u952e\u542f\u52a8\u4fe1\u606f\u67e5\u627e\ndocker-compose logs app | grep -E \"(Starting|Started|Ready|Listening|Database connected|Cache connected)\"\n#\n#\u9519\u8bef\u65e5\u5fd7\u68c0\u67e5\ndocker-compose logs app | grep -E \"(ERROR|CRITICAL|Exception|Failed|Connection refused|Timeout)\"\n\n\u9519\u8bef\u65e5\u5fd7\u68c0\u67e5\ndocker-compose logs app | grep -E \"(ERROR|CRITICAL|Exception|Failed|Connection refused|Timeout)\"\n#\n#=============================================================================\n=============================================================================#\n#2. \u6570\u636e\u5e93\u65e5\u5fd7\u68c0\u67e5\n2. \u6570\u636e\u5e93\u65e5\u5fd7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#PostgreSQL\u65e5\u5fd7\ndocker-compose logs --tail=50 db\n\nPostgreSQL\u65e5\u5fd7\ndocker-compose logs --tail=50 db\n#\n#\u5173\u952e\u6570\u636e\u5e93\u4fe1\u606f\ndocker-compose logs db | grep -E \"(ready|accepting connections|authentication|database system is ready)\"\n\n\u5173\u952e\u6570\u636e\u5e93\u4fe1\u606f\ndocker-compose logs db | grep -E \"(ready|accepting connections|authentication|database system is ready)\"\n#\n#\u6570\u636e\u5e93\u9519\u8bef\u68c0\u67e5\ndocker-compose logs db | grep -E \"(FATAL|ERROR|connection|authentication|permission)\"\n\n\u6570\u636e\u5e93\u9519\u8bef\u68c0\u67e5\ndocker-compose logs db | grep -E \"(FATAL|ERROR|connection|authentication|permission)\"\n#\n#=============================================================================\n=============================================================================#\n#3. \u7f13\u5b58\u548c\u961f\u5217\u65e5\u5fd7\u68c0\u67e5\n3. \u7f13\u5b58\u548c\u961f\u5217\u65e5\u5fd7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#Redis\u65e5\u5fd7\ndocker-compose logs --tail=50 redis\n\nRedis\u65e5\u5fd7\ndocker-compose logs --tail=50 redis\n#\n#Kafka\u65e5\u5fd7\ndocker-compose logs --tail=50 kafka\n\nKafka\u65e5\u5fd7\ndocker-compose logs --tail=50 kafka\n#\n#Celery\u65e5\u5fd7\ndocker-compose logs --tail=50 celery-worker\n\nCelery\u65e5\u5fd7\ndocker-compose logs --tail=50 celery-worker\n#\n#=============================================================================\n=============================================================================#\n#4. \u76d1\u63a7\u7cfb\u7edf\u65e5\u5fd7\u68c0\u67e5\n4. \u76d1\u63a7\u7cfb\u7edf\u65e5\u5fd7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#Prometheus\u65e5\u5fd7\ndocker-compose logs --tail=30 prometheus\n\nPrometheus\u65e5\u5fd7\ndocker-compose logs --tail=30 prometheus\n#\n#Grafana\u65e5\u5fd7\ndocker-compose logs --tail=30 grafana\n\nGrafana\u65e5\u5fd7\ndocker-compose logs --tail=30 grafana\n#\n#=============================================================================\n=============================================================================#\n#5. \u6027\u80fd\u6307\u6807\u65e5\u5fd7\u68c0\u67e5\n5. \u6027\u80fd\u6307\u6807\u65e5\u5fd7\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#\u67e5\u770b\u6027\u80fd\u76f8\u5173\u65e5\u5fd7\ndocker-compose logs app | grep -E \"(latency|response time|memory|cpu|slow query)\"\n\n\u67e5\u770b\u6027\u80fd\u76f8\u5173\u65e5\u5fd7\ndocker-compose logs app | grep -E \"(latency|response time|memory|cpu|slow query)\"\n#\n#\u68c0\u67e5\u6570\u636e\u5e93\u67e5\u8be2\u6027\u80fd\ndocker-compose logs app | grep -E \"(slow query|query.*ms|execution time)\"\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_30","title":"\ud83d\udea8 \u5173\u952e\u9519\u8bef\u6a21\u5f0f\u548c\u89e3\u51b3\u65b9\u6848","text":"\u9519\u8bef\u6a21\u5f0f \u53ef\u80fd\u539f\u56e0 \u89e3\u51b3\u65b9\u6848 <code>Connection refused</code> \u670d\u52a1\u672a\u542f\u52a8\u6216\u7aef\u53e3\u88ab\u5360\u7528 \u68c0\u67e5\u670d\u52a1\u72b6\u6001\u548c\u7aef\u53e3\u914d\u7f6e <code>Database connection failed</code> \u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32\u9519\u8bef\u6216\u6570\u636e\u5e93\u672a\u542f\u52a8 \u9a8c\u8bc1\u6570\u636e\u5e93\u914d\u7f6e\u548c\u72b6\u6001 <code>Authentication failed</code> \u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef \u68c0\u67e5\u73af\u5883\u53d8\u91cf\u548c\u5bc6\u94a5\u914d\u7f6e <code>Module not found</code> \u4f9d\u8d56\u5305\u7f3a\u5931 \u68c0\u67e5Docker\u955c\u50cf\u6784\u5efa\u8fc7\u7a0b <code>Port already in use</code> \u7aef\u53e3\u51b2\u7a81 \u68c0\u67e5\u7aef\u53e3\u914d\u7f6e\u548c\u5360\u7528\u60c5\u51b5 <code>Out of memory</code> \u5185\u5b58\u4e0d\u8db3 \u589e\u52a0\u5185\u5b58\u9650\u5236\u6216\u4f18\u5316\u5e94\u7528 <code>Permission denied</code> \u6587\u4ef6\u6743\u9650\u95ee\u9898 \u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u6743\u9650 <p>\u68c0\u67e5\u6570\u636e\u5e93\u67e5\u8be2\u6027\u80fd docker-compose logs app | grep -E \"(slow query|query.*ms|execution time)\" <pre><code>#### \ud83d\udea8 \u5173\u952e\u9519\u8bef\u6a21\u5f0f\u548c\u89e3\u51b3\u65b9\u6848\n\n| \u9519\u8bef\u6a21\u5f0f | \u53ef\u80fd\u539f\u56e0 | \u89e3\u51b3\u65b9\u6848 |\n|---------|---------|---------|\n| `Connection refused` | \u670d\u52a1\u672a\u542f\u52a8\u6216\u7aef\u53e3\u88ab\u5360\u7528 | \u68c0\u67e5\u670d\u52a1\u72b6\u6001\u548c\u7aef\u53e3\u914d\u7f6e |\n| `Database connection failed` | \u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32\u9519\u8bef\u6216\u6570\u636e\u5e93\u672a\u542f\u52a8 | \u9a8c\u8bc1\u6570\u636e\u5e93\u914d\u7f6e\u548c\u72b6\u6001 |\n| `Authentication failed` | \u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef | \u68c0\u67e5\u73af\u5883\u53d8\u91cf\u548c\u5bc6\u94a5\u914d\u7f6e |\n| `Module not found` | \u4f9d\u8d56\u5305\u7f3a\u5931 | \u68c0\u67e5Docker\u955c\u50cf\u6784\u5efa\u8fc7\u7a0b |\n| `Port already in use` | \u7aef\u53e3\u51b2\u7a81 | \u68c0\u67e5\u7aef\u53e3\u914d\u7f6e\u548c\u5360\u7528\u60c5\u51b5 |\n| `Out of memory` | \u5185\u5b58\u4e0d\u8db3 | \u589e\u52a0\u5185\u5b58\u9650\u5236\u6216\u4f18\u5316\u5e94\u7528 |\n| `Permission denied` | \u6587\u4ef6\u6743\u9650\u95ee\u9898 | \u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u6743\u9650 |\n\n---\n##\n##\u2705 \u90e8\u7f72\u540e\u9a8c\u8bc1\n\n\u2705 \u90e8\u7f72\u540e\u9a8c\u8bc1\n###\n###1. \u529f\u80fd\u9a8c\u8bc1\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u529f\u80fd\u9a8c\u8bc1\n\n- [ ] **API\u670d\u52a1\u54cd\u5e94**: \u6240\u6709\u6838\u5fc3API\u63a5\u53e3\u6b63\u5e38\u54cd\u5e94\n- [ ] **\u6570\u636e\u5e93\u8bfb\u5199**: \u6570\u636e\u5e93\u8fde\u63a5\u6b63\u5e38\uff0c\u8bfb\u5199\u64cd\u4f5c\u6210\u529f\n- [ ] **\u7f13\u5b58\u529f\u80fd**: Redis\u7f13\u5b58\u8bfb\u5199\u6b63\u5e38\n- [ ] **\u6a21\u578b\u9884\u6d4b**: \u6a21\u578b\u52a0\u8f7d\u548c\u9884\u6d4b\u529f\u80fd\u6b63\u5e38\n- [ ] **\u4efb\u52a1\u961f\u5217**: Celery\u4efb\u52a1\u6b63\u5e38\u6267\u884c\n- [ ] **\u6587\u4ef6\u5b58\u50a8**: MinIO\u6587\u4ef6\u4e0a\u4f20\u4e0b\u8f7d\u6b63\u5e38\n\n#### \ud83e\uddea API \u6838\u5fc3\u63a5\u53e3\u8c03\u7528\u6d4b\u8bd5\n\n```bash\n1. \u529f\u80fd\u9a8c\u8bc1\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u529f\u80fd\u9a8c\u8bc1\n\n- [ ] **API\u670d\u52a1\u54cd\u5e94**: \u6240\u6709\u6838\u5fc3API\u63a5\u53e3\u6b63\u5e38\u54cd\u5e94\n- [ ] **\u6570\u636e\u5e93\u8bfb\u5199**: \u6570\u636e\u5e93\u8fde\u63a5\u6b63\u5e38\uff0c\u8bfb\u5199\u64cd\u4f5c\u6210\u529f\n- [ ] **\u7f13\u5b58\u529f\u80fd**: Redis\u7f13\u5b58\u8bfb\u5199\u6b63\u5e38\n- [ ] **\u6a21\u578b\u9884\u6d4b**: \u6a21\u578b\u52a0\u8f7d\u548c\u9884\u6d4b\u529f\u80fd\u6b63\u5e38\n- [ ] **\u4efb\u52a1\u961f\u5217**: Celery\u4efb\u52a1\u6b63\u5e38\u6267\u884c\n- [ ] **\u6587\u4ef6\u5b58\u50a8**: MinIO\u6587\u4ef6\u4e0a\u4f20\u4e0b\u8f7d\u6b63\u5e38\n\n#### \ud83e\uddea API \u6838\u5fc3\u63a5\u53e3\u8c03\u7528\u6d4b\u8bd5\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u57fa\u7840API\u6d4b\u8bd5\n1. \u57fa\u7840API\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u670d\u52a1\u4fe1\u606f\u6d4b\u8bd5\ncurl -X GET http://localhost:8000/ \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n\n\u670d\u52a1\u4fe1\u606f\u6d4b\u8bd5\ncurl -X GET http://localhost:8000/ \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n#\n#\u5065\u5eb7\u68c0\u67e5\u6d4b\u8bd5\ncurl -X GET http://localhost:8000/health \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n\n\u5065\u5eb7\u68c0\u67e5\u6d4b\u8bd5\ncurl -X GET http://localhost:8000/health \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n#\n#API\u6587\u6863\u8bbf\u95ee\u6d4b\u8bd5\ncurl -X GET http://localhost:8000/docs \\\n  -I\n\nAPI\u6587\u6863\u8bbf\u95ee\u6d4b\u8bd5\ncurl -X GET http://localhost:8000/docs \\\n  -I\n#\n#=============================================================================\n=============================================================================#\n#2. \u9884\u6d4b\u529f\u80fd\u6d4b\u8bd5\n2. \u9884\u6d4b\u529f\u80fd\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u83b7\u53d6\u9884\u6d4b\u63a5\u53e3\u6587\u6863\ncurl -X GET http://localhost:8000/api/v1/predictions/ \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n\n\u83b7\u53d6\u9884\u6d4b\u63a5\u53e3\u6587\u6863\ncurl -X GET http://localhost:8000/api/v1/predictions/ \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n#\n#\u521b\u5efa\u9884\u6d4b\u8bf7\u6c42\ncurl -X POST http://localhost:8000/api/v1/predictions/ \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"match_id\": \"test_match_001\",\n    \"home_team_id\": 1,\n    \"away_team_id\": 2,\n    \"league_id\": 1,\n    \"match_date\": \"2025-09-25T15:00:00Z\"\n  }' \\\n  | jq .\n\n\u521b\u5efa\u9884\u6d4b\u8bf7\u6c42\ncurl -X POST http://localhost:8000/api/v1/predictions/ \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"match_id\": \"test_match_001\",\n    \"home_team_id\": 1,\n    \"away_team_id\": 2,\n    \"league_id\": 1,\n    \"match_date\": \"2025-09-25T15:00:00Z\"\n  }' \\\n  | jq .\n#\n#\u83b7\u53d6\u9884\u6d4b\u7ed3\u679c\ncurl -X GET http://localhost:8000/api/v1/predictions/test_prediction_001 \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n\n\u83b7\u53d6\u9884\u6d4b\u7ed3\u679c\ncurl -X GET http://localhost:8000/api/v1/predictions/test_prediction_001 \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n#\n#=============================================================================\n=============================================================================#\n#3. \u6570\u636e\u63a5\u53e3\u6d4b\u8bd5\n3. \u6570\u636e\u63a5\u53e3\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u83b7\u53d6\u6bd4\u8d5b\u6570\u636e\ncurl -X GET http://localhost:8000/api/v1/data/matches?limit=5 \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n\n\u83b7\u53d6\u6bd4\u8d5b\u6570\u636e\ncurl -X GET http://localhost:8000/api/v1/data/matches?limit=5 \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n#\n#\u83b7\u53d6\u961f\u4f0d\u6570\u636e\ncurl -X GET http://localhost:8000/api/v1/data/teams?limit=5 \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n\n\u83b7\u53d6\u961f\u4f0d\u6570\u636e\ncurl -X GET http://localhost:8000/api/v1/data/teams?limit=5 \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n#\n#\u83b7\u53d6\u7279\u5f81\u6570\u636e\ncurl -X GET http://localhost:8000/api/v1/features/ \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n\n\u83b7\u53d6\u7279\u5f81\u6570\u636e\ncurl -X GET http://localhost:8000/api/v1/features/ \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n#\n#\u83b7\u53d6\u961f\u4f0d\u7279\u5f81\ncurl -X GET http://localhost:8000/api/v1/features/teams/1 \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n\n\u83b7\u53d6\u961f\u4f0d\u7279\u5f81\ncurl -X GET http://localhost:8000/api/v1/features/teams/1 \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n#\n#=============================================================================\n=============================================================================#\n#4. \u76d1\u63a7\u63a5\u53e3\u6d4b\u8bd5\n4. \u76d1\u63a7\u63a5\u53e3\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u83b7\u53d6\u7cfb\u7edf\u6307\u6807\ncurl -X GET http://localhost:8000/api/v1/monitoring/metrics \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n\n\u83b7\u53d6\u7cfb\u7edf\u6307\u6807\ncurl -X GET http://localhost:8000/api/v1/monitoring/metrics \\\n  -H \"Content-Type: application/json\" \\\n  | jq .\n#\n#\u83b7\u53d6Prometheus\u6307\u6807\ncurl -X GET http://localhost:8000/metrics \\\n  | head -20\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_31","title":"\ud83d\uddc4\ufe0f \u6570\u636e\u5e93\u8bfb\u5199\u9a8c\u8bc1","text":"<pre><code>\u83b7\u53d6Prometheus\u6307\u6807\ncurl -X GET http://localhost:8000/metrics \\\n  | head -20\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_32","title":"\ud83d\uddc4\ufe0f \u6570\u636e\u5e93\u8bfb\u5199\u9a8c\u8bc1","text":"<pre><code>#=============================================================================\n=============================================================================#\n#1. \u6570\u636e\u5e93\u8fde\u63a5\u9a8c\u8bc1\n1. \u6570\u636e\u5e93\u8fde\u63a5\u9a8c\u8bc1#\n#=============================================================================\n\n=============================================================================\n#\n#\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u6d4b\u8bd5\u811a\u672c\ncat &gt; db_test.py &lt;&lt; 'EOF'\nimport asyncio\nimport sys\nimport os\nsys.path.append('/home/user/projects/FootballPrediction')\n\nfrom src.database.connection import get_async_session\nfrom src.database.models import League, Team, Match\n\nasync def test_database_operations():\n    \"\"\"\u6d4b\u8bd5\u6570\u636e\u5e93\u8bfb\u5199\u64cd\u4f5c\"\"\"\n    try:\n        async with get_async_session() as session:\n            # \u6d4b\u8bd5\u8bfb\u53d6\n            result = await session.execute(\"SELECT COUNT(*) FROM leagues\")\n            league_count = result.scalar()\n            print(f\"\u2705 Leagues count: {league_count}\")\n\n            result = await session.execute(\"SELECT COUNT(*) FROM teams\")\n            team_count = result.scalar()\n            print(f\"\u2705 Teams count: {team_count}\")\n\n            result = await session.execute(\"SELECT COUNT(*) FROM matches\")\n            match_count = result.scalar()\n            print(f\"\u2705 Matches count: {match_count}\")\n\n            # \u6d4b\u8bd5\u5199\u5165\n            await session.execute(\"INSERT INTO audit_logs (action, table_name, record_id, success, duration_ms) VALUES ('TEST', 'test_table', 'test_id', true, 100)\")\n            await session.commit()\n            print(\"\u2705 Test write successful\")\n\n            return True\n\n    except Exception as e:\n        print(f\"\u274c Database test failed: {e}\")\n        return False\n\nif __name__ == \"__main__\":\n    success = asyncio.run(test_database_operations())\n    sys.exit(0 if success else 1)\nEOF\n\n\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u6d4b\u8bd5\u811a\u672c\ncat &gt; db_test.py &lt;&lt; 'EOF'\nimport asyncio\nimport sys\nimport os\nsys.path.append('/home/user/projects/FootballPrediction')\n\nfrom src.database.connection import get_async_session\nfrom src.database.models import League, Team, Match\n\nasync def test_database_operations():\n    \"\"\"\u6d4b\u8bd5\u6570\u636e\u5e93\u8bfb\u5199\u64cd\u4f5c\"\"\"\n    try:\n        async with get_async_session() as session:\n            # \u6d4b\u8bd5\u8bfb\u53d6\n            result = await session.execute(\"SELECT COUNT(*) FROM leagues\")\n            league_count = result.scalar()\n            print(f\"\u2705 Leagues count: {league_count}\")\n\n            result = await session.execute(\"SELECT COUNT(*) FROM teams\")\n            team_count = result.scalar()\n            print(f\"\u2705 Teams count: {team_count}\")\n\n            result = await session.execute(\"SELECT COUNT(*) FROM matches\")\n            match_count = result.scalar()\n            print(f\"\u2705 Matches count: {match_count}\")\n\n            # \u6d4b\u8bd5\u5199\u5165\n            await session.execute(\"INSERT INTO audit_logs (action, table_name, record_id, success, duration_ms) VALUES ('TEST', 'test_table', 'test_id', true, 100)\")\n            await session.commit()\n            print(\"\u2705 Test write successful\")\n\n            return True\n\n    except Exception as e:\n        print(f\"\u274c Database test failed: {e}\")\n        return False\n\nif __name__ == \"__main__\":\n    success = asyncio.run(test_database_operations())\n    sys.exit(0 if success else 1)\nEOF\n#\n#\u8fd0\u884c\u6570\u636e\u5e93\u6d4b\u8bd5\npython db_test.py\n\n\u8fd0\u884c\u6570\u636e\u5e93\u6d4b\u8bd5\npython db_test.py\n#\n#=============================================================================\n=============================================================================#\n#2. \u6570\u636e\u4e00\u81f4\u6027\u9a8c\u8bc1\n2. \u6570\u636e\u4e00\u81f4\u6027\u9a8c\u8bc1#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u6570\u636e\u5e93\u8868\u5b8c\u6574\u6027\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nSELECT table_name\nFROM information_schema.tables\nWHERE table_schema = 'public'\nORDER BY table_name;\n\"\n\n\u68c0\u67e5\u6570\u636e\u5e93\u8868\u5b8c\u6574\u6027\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nSELECT table_name\nFROM information_schema.tables\nWHERE table_schema = 'public'\nORDER BY table_name;\n\"\n#\n#\u68c0\u67e5\u7d22\u5f15\u5b8c\u6574\u6027\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nSELECT indexname, tablename\nFROM pg_indexes\nWHERE schemaname = 'public'\nORDER BY tablename, indexname;\n\"\n\n\u68c0\u67e5\u7d22\u5f15\u5b8c\u6574\u6027\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nSELECT indexname, tablename\nFROM pg_indexes\nWHERE schemaname = 'public'\nORDER BY tablename, indexname;\n\"\n#\n#=============================================================================\n=============================================================================#\n#3. \u7f13\u5b58\u8bfb\u5199\u9a8c\u8bc1\n3. \u7f13\u5b58\u8bfb\u5199\u9a8c\u8bc1#\n#=============================================================================\n\n=============================================================================\n#\n#\u521b\u5efa\u7f13\u5b58\u6d4b\u8bd5\u811a\u672c\ncat &gt; cache_test.py &lt;&lt; 'EOF'\nimport asyncio\nimport sys\nimport os\nsys.path.append('/home/user/projects/FootballPrediction')\n\nfrom src.cache.redis_manager import RedisManager\n\nasync def test_cache_operations():\n    \"\"\"\u6d4b\u8bd5\u7f13\u5b58\u8bfb\u5199\u64cd\u4f5c\"\"\"\n    try:\n        redis = RedisManager()\n\n        # \u6d4b\u8bd5\u5199\u5165\n        await redis.set(\"test_key\", \"test_value\", ttl=300)\n        print(\"\u2705 Cache write successful\")\n\n        # \u6d4b\u8bd5\u8bfb\u53d6\n        value = await redis.get(\"test_key\")\n        print(f\"\u2705 Cache read successful: {value}\")\n\n        # \u6d4b\u8bd5\u5220\u9664\n        await redis.delete(\"test_key\")\n        print(\"\u2705 Cache delete successful\")\n\n        # \u6d4b\u8bd5\u7f13\u5b58\u547d\u4e2d\u7387\n        await redis.set(\"hit_test\", \"hit_value\", ttl=300)\n        await redis.get(\"hit_test\")  # Hit\n        await redis.get(\"miss_test\")  # Miss\n        print(\"\u2705 Cache hit/miss test completed\")\n\n        return True\n\n    except Exception as e:\n        print(f\"\u274c Cache test failed: {e}\")\n        return False\n\nif __name__ == \"__main__\":\n    success = asyncio.run(test_cache_operations())\n    sys.exit(0 if success else 1)\nEOF\n\n\u521b\u5efa\u7f13\u5b58\u6d4b\u8bd5\u811a\u672c\ncat &gt; cache_test.py &lt;&lt; 'EOF'\nimport asyncio\nimport sys\nimport os\nsys.path.append('/home/user/projects/FootballPrediction')\n\nfrom src.cache.redis_manager import RedisManager\n\nasync def test_cache_operations():\n    \"\"\"\u6d4b\u8bd5\u7f13\u5b58\u8bfb\u5199\u64cd\u4f5c\"\"\"\n    try:\n        redis = RedisManager()\n\n        # \u6d4b\u8bd5\u5199\u5165\n        await redis.set(\"test_key\", \"test_value\", ttl=300)\n        print(\"\u2705 Cache write successful\")\n\n        # \u6d4b\u8bd5\u8bfb\u53d6\n        value = await redis.get(\"test_key\")\n        print(f\"\u2705 Cache read successful: {value}\")\n\n        # \u6d4b\u8bd5\u5220\u9664\n        await redis.delete(\"test_key\")\n        print(\"\u2705 Cache delete successful\")\n\n        # \u6d4b\u8bd5\u7f13\u5b58\u547d\u4e2d\u7387\n        await redis.set(\"hit_test\", \"hit_value\", ttl=300)\n        await redis.get(\"hit_test\")  # Hit\n        await redis.get(\"miss_test\")  # Miss\n        print(\"\u2705 Cache hit/miss test completed\")\n\n        return True\n\n    except Exception as e:\n        print(f\"\u274c Cache test failed: {e}\")\n        return False\n\nif __name__ == \"__main__\":\n    success = asyncio.run(test_cache_operations())\n    sys.exit(0 if success else 1)\nEOF\n#\n#\u8fd0\u884c\u7f13\u5b58\u6d4b\u8bd5\npython cache_test.py\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_33","title":"\ud83e\udd16 \u6a21\u578b\u9884\u6d4b\u7ed3\u679c\u6b63\u786e\u6027\u68c0\u67e5","text":"<pre><code>\u8fd0\u884c\u7f13\u5b58\u6d4b\u8bd5\npython cache_test.py\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_34","title":"\ud83e\udd16 \u6a21\u578b\u9884\u6d4b\u7ed3\u679c\u6b63\u786e\u6027\u68c0\u67e5","text":"<p>```bash#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_35","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#1","title":"1. \u6a21\u578b\u52a0\u8f7d\u9a8c\u8bc1","text":"<ol> <li>\u6a21\u578b\u52a0\u8f7d\u9a8c\u8bc1#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_36","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_02/#_37","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/","title":"\u521b\u5efa\u6a21\u578b\u6d4b\u8bd5\u811a\u672c","text":"<p>cat &gt; model_test.py &lt;&lt; 'EOF' import asyncio import sys import os sys.path.append('/home/user/projects/FootballPrediction')</p> <p>from src.models.prediction_service import PredictionService</p> <p>async def test_model_prediction():     \"\"\"\u6d4b\u8bd5\u6a21\u578b\u9884\u6d4b\u529f\u80fd\"\"\"     try:         # \u521d\u59cb\u5316\u9884\u6d4b\u670d\u52a1         service = PredictionService(             mlflow_tracking_uri=\"http://localhost:5002\",             feature_store_redis_url=\"redis://:your_redis_password@redis:6379/0\"         )</p> <pre><code>    # \u52a0\u8f7d\u751f\u4ea7\u6a21\u578b\n    model = service.load_production_model()\n    print(f\"\u2705 Model loaded: {type(model)}\")\n\n    # \u51c6\u5907\u6d4b\u8bd5\u6570\u636e\n    test_features = {\n        \"home_team_goals_recent\": 2.5,\n        \"away_team_goals_recent\": 1.2,\n        \"home_team_wins_recent\": 0.7,\n        \"away_team_wins_recent\": 0.4,\n        \"home_team_xg\": 1.8,\n        \"away_team_xg\": 1.1,\n        \"league_importance\": 0.8,\n        \"home_advantage\": 0.2\n    }\n\n    # \u6267\u884c\u9884\u6d4b\n    prediction = await service.predict_match(\n        match_id=\"test_match_001\",\n        home_team_id=1,\n        away_team_id=2,\n        features=test_features\n    )\n\n    print(f\"\u2705 Prediction successful: {prediction}\")\n\n    # \u9a8c\u8bc1\u9884\u6d4b\u7ed3\u679c\u683c\u5f0f\n    assert \"prediction_id\" in prediction\n    assert \"home_win_probability\" in prediction\n    assert \"draw_probability\" in prediction\n    assert \"away_win_probability\" in prediction\n    assert \"confidence\" in prediction\n\n    # \u9a8c\u8bc1\u6982\u7387\u603b\u548c\n    total_prob = (prediction[\"home_win_probability\"] +\n                 prediction[\"draw_probability\"] +\n                 prediction[\"away_win_probability\"])\n    assert abs(total_prob - 1.0) &lt; 0.01, f\"Probabilities sum to {total_prob}\"\n\n    print(\"\u2705 Prediction format validation passed\")\n\n    return True\n\nexcept Exception as e:\n    print(f\"\u274c Model prediction test failed: {e}\")\n    import traceback\n    traceback.print_exc()\n    return False\n</code></pre> <p>if name == \"main\":     success = asyncio.run(test_model_prediction())     sys.exit(0 if success else 1) EOF</p> <p>\u521b\u5efa\u6a21\u578b\u6d4b\u8bd5\u811a\u672c cat &gt; model_test.py &lt;&lt; 'EOF' import asyncio import sys import os sys.path.append('/home/user/projects/FootballPrediction')</p> <p>from src.models.prediction_service import PredictionService</p> <p>async def test_model_prediction():     \"\"\"\u6d4b\u8bd5\u6a21\u578b\u9884\u6d4b\u529f\u80fd\"\"\"     try:         # \u521d\u59cb\u5316\u9884\u6d4b\u670d\u52a1         service = PredictionService(             mlflow_tracking_uri=\"http://localhost:5002\",             feature_store_redis_url=\"redis://:your_redis_password@redis:6379/0\"         )</p> <pre><code>    # \u52a0\u8f7d\u751f\u4ea7\u6a21\u578b\n    model = service.load_production_model()\n    print(f\"\u2705 Model loaded: {type(model)}\")\n\n    # \u51c6\u5907\u6d4b\u8bd5\u6570\u636e\n    test_features = {\n        \"home_team_goals_recent\": 2.5,\n        \"away_team_goals_recent\": 1.2,\n        \"home_team_wins_recent\": 0.7,\n        \"away_team_wins_recent\": 0.4,\n        \"home_team_xg\": 1.8,\n        \"away_team_xg\": 1.1,\n        \"league_importance\": 0.8,\n        \"home_advantage\": 0.2\n    }\n\n    # \u6267\u884c\u9884\u6d4b\n    prediction = await service.predict_match(\n        match_id=\"test_match_001\",\n        home_team_id=1,\n        away_team_id=2,\n        features=test_features\n    )\n\n    print(f\"\u2705 Prediction successful: {prediction}\")\n\n    # \u9a8c\u8bc1\u9884\u6d4b\u7ed3\u679c\u683c\u5f0f\n    assert \"prediction_id\" in prediction\n    assert \"home_win_probability\" in prediction\n    assert \"draw_probability\" in prediction\n    assert \"away_win_probability\" in prediction\n    assert \"confidence\" in prediction\n\n    # \u9a8c\u8bc1\u6982\u7387\u603b\u548c\n    total_prob = (prediction[\"home_win_probability\"] +\n                 prediction[\"draw_probability\"] +\n                 prediction[\"away_win_probability\"])\n    assert abs(total_prob - 1.0) &lt; 0.01, f\"Probabilities sum to {total_prob}\"\n\n    print(\"\u2705 Prediction format validation passed\")\n\n    return True\n\nexcept Exception as e:\n    print(f\"\u274c Model prediction test failed: {e}\")\n    import traceback\n    traceback.print_exc()\n    return False\n</code></pre> <p>if name == \"main\":     success = asyncio.run(test_model_prediction())     sys.exit(0 if success else 1) EOF</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_2","title":"\u521b\u5efa\u6a21\u578b\u6d4b\u8bd5\u811a\u672c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_3","title":"\u8fd0\u884c\u6a21\u578b\u6d4b\u8bd5","text":"<p>python model_test.py</p> <p>\u8fd0\u884c\u6a21\u578b\u6d4b\u8bd5 python model_test.py</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_4","title":"\u521b\u5efa\u6a21\u578b\u6d4b\u8bd5\u811a\u672c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_5","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#2","title":"2. \u6a21\u578b\u6027\u80fd\u9a8c\u8bc1","text":"<ol> <li>\u6a21\u578b\u6027\u80fd\u9a8c\u8bc1#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_6","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_7","title":"\u521b\u5efa\u6a21\u578b\u6d4b\u8bd5\u811a\u672c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_8","title":"\u68c0\u67e5\u6a21\u578b\u7248\u672c\u548c\u5143\u6570\u636e","text":"<p>curl -s http://localhost:5002/api/2.0/registered-models/get?name=football-match-predictor | jq '.latest_versions[] | {version, status, creation_timestamp}'</p> <p>\u68c0\u67e5\u6a21\u578b\u7248\u672c\u548c\u5143\u6570\u636e curl -s http://localhost:5002/api/2.0/registered-models/get?name=football-match-predictor | jq '.latest_versions[] | {version, status, creation_timestamp}'</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_9","title":"\u521b\u5efa\u6a21\u578b\u6d4b\u8bd5\u811a\u672c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_10","title":"\u9a8c\u8bc1\u6a21\u578b\u6587\u4ef6\u5b58\u5728","text":"<p>docker exec football_prediction_mlflow ls -la /mlflow-artifacts/</p> <p>\u9a8c\u8bc1\u6a21\u578b\u6587\u4ef6\u5b58\u5728 docker exec football_prediction_mlflow ls -la /mlflow-artifacts/</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_11","title":"\u521b\u5efa\u6a21\u578b\u6d4b\u8bd5\u811a\u672c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_12","title":"\u68c0\u67e5\u6a21\u578b\u6027\u80fd\u6307\u6807","text":"<p>curl -s http://localhost:5002/api/2.0/mlflow/runs/search | jq '.runs[] | select(.tags.mlflow.runName | contains(\"production\")) | {run_id, metrics}' <pre><code>\u68c0\u67e5\u6a21\u578b\u6027\u80fd\u6307\u6807\ncurl -s http://localhost:5002/api/2.0/mlflow/runs/search | jq '.runs[] | select(.tags.mlflow.runName | contains(\"production\")) | {run_id, metrics}'\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_13","title":"\u521b\u5efa\u6a21\u578b\u6d4b\u8bd5\u811a\u672c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#2_1","title":"2. \u6027\u80fd\u9a8c\u8bc1","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_14","title":"\u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u6027\u80fd\u9a8c\u8bc1","text":"<ul> <li> \u54cd\u5e94\u65f6\u95f4: API\u54cd\u5e94\u65f6\u95f4\u5728\u53ef\u63a5\u53d7\u8303\u56f4\u5185</li> <li> \u541e\u5410\u91cf: \u7cfb\u7edf\u652f\u6301\u9884\u671f\u7684\u5e76\u53d1\u8bf7\u6c42\u91cf</li> <li> \u8d44\u6e90\u4f7f\u7528: CPU\u3001\u5185\u5b58\u3001\u78c1\u76d8\u4f7f\u7528\u6b63\u5e38</li> <li> \u6570\u636e\u5e93\u6027\u80fd: \u67e5\u8be2\u54cd\u5e94\u65f6\u95f4\u6b63\u5e38</li> <li> \u7f13\u5b58\u6548\u7387: \u7f13\u5b58\u547d\u4e2d\u7387\u7b26\u5408\u9884\u671f</li> <li> \u9519\u8bef\u7387: \u7cfb\u7edf\u9519\u8bef\u7387\u4f4e\u4e8e\u9608\u503c</li> </ul>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_15","title":"\u26a1 \u57fa\u7840\u538b\u529b\u6d4b\u8bd5","text":"<pre><code>2. \u6027\u80fd\u9a8c\u8bc1\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u6027\u80fd\u9a8c\u8bc1\n\n- [ ] **\u54cd\u5e94\u65f6\u95f4**: API\u54cd\u5e94\u65f6\u95f4\u5728\u53ef\u63a5\u53d7\u8303\u56f4\u5185\n- [ ] **\u541e\u5410\u91cf**: \u7cfb\u7edf\u652f\u6301\u9884\u671f\u7684\u5e76\u53d1\u8bf7\u6c42\u91cf\n- [ ] **\u8d44\u6e90\u4f7f\u7528**: CPU\u3001\u5185\u5b58\u3001\u78c1\u76d8\u4f7f\u7528\u6b63\u5e38\n- [ ] **\u6570\u636e\u5e93\u6027\u80fd**: \u67e5\u8be2\u54cd\u5e94\u65f6\u95f4\u6b63\u5e38\n- [ ] **\u7f13\u5b58\u6548\u7387**: \u7f13\u5b58\u547d\u4e2d\u7387\u7b26\u5408\u9884\u671f\n- [ ] **\u9519\u8bef\u7387**: \u7cfb\u7edf\u9519\u8bef\u7387\u4f4e\u4e8e\u9608\u503c\n\n#### \u26a1 \u57fa\u7840\u538b\u529b\u6d4b\u8bd5\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u4f7f\u7528Apache Bench\u8fdb\u884cAPI\u538b\u529b\u6d4b\u8bd5\n1. \u4f7f\u7528Apache Bench\u8fdb\u884cAPI\u538b\u529b\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u5065\u5eb7\u68c0\u67e5\u63a5\u53e3\u6d4b\u8bd5\nab -n 1000 -c 10 -t 30 http://localhost:8000/health\n\n\u5065\u5eb7\u68c0\u67e5\u63a5\u53e3\u6d4b\u8bd5\nab -n 1000 -c 10 -t 30 http://localhost:8000/health\n#\n#API\u63a5\u53e3\u6d4b\u8bd5\nab -n 500 -c 20 -t 60 -H \"Content-Type: application/json\" \\\n  -p test_payload.json \\\n  http://localhost:8000/api/v1/predictions/\n\nAPI\u63a5\u53e3\u6d4b\u8bd5\nab -n 500 -c 20 -t 60 -H \"Content-Type: application/json\" \\\n  -p test_payload.json \\\n  http://localhost:8000/api/v1/predictions/\n#\n#\u521b\u5efa\u6d4b\u8bd5\u8d1f\u8f7d\u6587\u4ef6\ncat &gt; test_payload.json &lt;&lt; 'EOF'\n{\n  \"match_id\": \"stress_test_001\",\n  \"home_team_id\": 1,\n  \"away_team_id\": 2,\n  \"league_id\": 1,\n  \"match_date\": \"2025-09-25T15:00:00Z\"\n}\nEOF\n\n\u521b\u5efa\u6d4b\u8bd5\u8d1f\u8f7d\u6587\u4ef6\ncat &gt; test_payload.json &lt;&lt; 'EOF'\n{\n  \"match_id\": \"stress_test_001\",\n  \"home_team_id\": 1,\n  \"away_team_id\": 2,\n  \"league_id\": 1,\n  \"match_date\": \"2025-09-25T15:00:00Z\"\n}\nEOF\n#\n#\u5e76\u53d1\u6d4b\u8bd5\u4e0d\u540c\u5e76\u53d1\u7ea7\u522b\nfor concurrency in 5 10 20 50; do\n  echo \"Testing with $concurrency concurrent users...\"\n  ab -n 200 -c $concurrency -t 30 http://localhost:8000/health\n  echo \"---\"\ndone\n\n\u5e76\u53d1\u6d4b\u8bd5\u4e0d\u540c\u5e76\u53d1\u7ea7\u522b\nfor concurrency in 5 10 20 50; do\n  echo \"Testing with $concurrency concurrent users...\"\n  ab -n 200 -c $concurrency -t 30 http://localhost:8000/health\n  echo \"---\"\ndone\n#\n#=============================================================================\n=============================================================================#\n#2. \u4f7f\u7528Locust\u8fdb\u884c\u5206\u5e03\u5f0f\u8d1f\u8f7d\u6d4b\u8bd5\n2. \u4f7f\u7528Locust\u8fdb\u884c\u5206\u5e03\u5f0f\u8d1f\u8f7d\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u521b\u5efaLocust\u6d4b\u8bd5\u6587\u4ef6\ncat &gt; locustfile.py &lt;&lt; 'EOF'\nfrom locust import HttpUser, task, between\nimport json\n\nclass FootballPredictionUser(HttpUser):\n    wait_time = between(1, 3)\n\n    def on_start(self):\n        \"\"\"\u7528\u6237\u5f00\u59cb\u65f6\u7684\u521d\u59cb\u5316\"\"\"\n        self.headers = {\"Content-Type\": \"application/json\"}\n\n    @task(3)\n    def health_check(self):\n        \"\"\"\u5065\u5eb7\u68c0\u67e5\u4efb\u52a1\"\"\"\n        self.client.get(\"/health\")\n\n    @task(2)\n    def get_predictions(self):\n        \"\"\"\u83b7\u53d6\u9884\u6d4b\u4efb\u52a1\"\"\"\n        self.client.get(\"/api/v1/predictions/\")\n\n    @task(1)\n    def create_prediction(self):\n        \"\"\"\u521b\u5efa\u9884\u6d4b\u4efb\u52a1\"\"\"\n        payload = {\n            \"match_id\": f\"locust_test_{self.environment}\",\n            \"home_team_id\": 1,\n            \"away_team_id\": 2,\n            \"league_id\": 1,\n            \"match_date\": \"2025-09-25T15:00:00Z\"\n        }\n        self.client.post(\"/api/v1/predictions/\", json=payload)\n\n    @task(1)\n    def get_features(self):\n        \"\"\"\u83b7\u53d6\u7279\u5f81\u4efb\u52a1\"\"\"\n        self.client.get(\"/api/v1/features/\")\nEOF\n\n\u521b\u5efaLocust\u6d4b\u8bd5\u6587\u4ef6\ncat &gt; locustfile.py &lt;&lt; 'EOF'\nfrom locust import HttpUser, task, between\nimport json\n\nclass FootballPredictionUser(HttpUser):\n    wait_time = between(1, 3)\n\n    def on_start(self):\n        \"\"\"\u7528\u6237\u5f00\u59cb\u65f6\u7684\u521d\u59cb\u5316\"\"\"\n        self.headers = {\"Content-Type\": \"application/json\"}\n\n    @task(3)\n    def health_check(self):\n        \"\"\"\u5065\u5eb7\u68c0\u67e5\u4efb\u52a1\"\"\"\n        self.client.get(\"/health\")\n\n    @task(2)\n    def get_predictions(self):\n        \"\"\"\u83b7\u53d6\u9884\u6d4b\u4efb\u52a1\"\"\"\n        self.client.get(\"/api/v1/predictions/\")\n\n    @task(1)\n    def create_prediction(self):\n        \"\"\"\u521b\u5efa\u9884\u6d4b\u4efb\u52a1\"\"\"\n        payload = {\n            \"match_id\": f\"locust_test_{self.environment}\",\n            \"home_team_id\": 1,\n            \"away_team_id\": 2,\n            \"league_id\": 1,\n            \"match_date\": \"2025-09-25T15:00:00Z\"\n        }\n        self.client.post(\"/api/v1/predictions/\", json=payload)\n\n    @task(1)\n    def get_features(self):\n        \"\"\"\u83b7\u53d6\u7279\u5f81\u4efb\u52a1\"\"\"\n        self.client.get(\"/api/v1/features/\")\nEOF\n#\n#\u542f\u52a8Locust\u6d4b\u8bd5\uff08\u9700\u8981\u5148\u5b89\u88c5locust\uff09\n\u542f\u52a8Locust\u6d4b\u8bd5\uff08\u9700\u8981\u5148\u5b89\u88c5locust\uff09#\n#locust -f locustfile.py --host=http://localhost:8000 --users=50 --spawn-rate=5 --run-time=5m\n\nlocust -f locustfile.py --host=http://localhost:8000 --users=50 --spawn-rate=5 --run-time=5m\n#\n#=============================================================================\n=============================================================================#\n#3. \u4f7f\u7528k6\u8fdb\u884c\u73b0\u4ee3\u5316\u6027\u80fd\u6d4b\u8bd5\n3. \u4f7f\u7528k6\u8fdb\u884c\u73b0\u4ee3\u5316\u6027\u80fd\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u521b\u5efak6\u6d4b\u8bd5\u811a\u672c\ncat &gt; k6_test.js &lt;&lt; 'EOF'\nimport http from 'k6/http';\nimport { check, sleep } from 'k6';\n\nexport let options = {\n    stages: [\n        { duration: '30s', target: 10 },  // \u9884\u70ed\n        { duration: '1m', target: 30 },   // \u8d1f\u8f7d\u589e\u52a0\n        { duration: '2m', target: 50 },   // \u7a33\u5b9a\u8d1f\u8f7d\n        { duration: '30s', target: 0 },   // \u51b7\u5374\n    ],\n    thresholds: {\n        http_req_duration: ['p(95)&lt;500'], // 95%\u8bf7\u6c42\u54cd\u5e94\u65f6\u95f4&lt;500ms\n        http_req_failed: ['rate&lt;0.01'],   // \u9519\u8bef\u7387&lt;1%\n    },\n};\n\nexport default function () {\n    // \u5065\u5eb7\u68c0\u67e5\n    let healthRes = http.get('http://localhost:8000/health');\n    check(healthRes, {\n        'health status is 200': (r) =&gt; r.status === 200,\n    });\n\n    // \u83b7\u53d6\u9884\u6d4b\u5217\u8868\n    let predictionsRes = http.get('http://localhost:8000/api/v1/predictions/');\n    check(predictionsRes, {\n        'predictions status is 200': (r) =&gt; r.status === 200,\n    });\n\n    // \u521b\u5efa\u9884\u6d4b\n    let payload = JSON.stringify({\n        match_id: `k6_test_${__VU}`,\n        home_team_id: 1,\n        away_team_id: 2,\n        league_id: 1,\n        match_date: \"2025-09-25T15:00:00Z\"\n    });\n\n    let createRes = http.post('http://localhost:8000/api/v1/predictions/', payload);\n    check(createRes, {\n        'create prediction status is 200': (r) =&gt; r.status === 200,\n    });\n\n    sleep(1);\n}\nEOF\n\n\u521b\u5efak6\u6d4b\u8bd5\u811a\u672c\ncat &gt; k6_test.js &lt;&lt; 'EOF'\nimport http from 'k6/http';\nimport { check, sleep } from 'k6';\n\nexport let options = {\n    stages: [\n        { duration: '30s', target: 10 },  // \u9884\u70ed\n        { duration: '1m', target: 30 },   // \u8d1f\u8f7d\u589e\u52a0\n        { duration: '2m', target: 50 },   // \u7a33\u5b9a\u8d1f\u8f7d\n        { duration: '30s', target: 0 },   // \u51b7\u5374\n    ],\n    thresholds: {\n        http_req_duration: ['p(95)&lt;500'], // 95%\u8bf7\u6c42\u54cd\u5e94\u65f6\u95f4&lt;500ms\n        http_req_failed: ['rate&lt;0.01'],   // \u9519\u8bef\u7387&lt;1%\n    },\n};\n\nexport default function () {\n    // \u5065\u5eb7\u68c0\u67e5\n    let healthRes = http.get('http://localhost:8000/health');\n    check(healthRes, {\n        'health status is 200': (r) =&gt; r.status === 200,\n    });\n\n    // \u83b7\u53d6\u9884\u6d4b\u5217\u8868\n    let predictionsRes = http.get('http://localhost:8000/api/v1/predictions/');\n    check(predictionsRes, {\n        'predictions status is 200': (r) =&gt; r.status === 200,\n    });\n\n    // \u521b\u5efa\u9884\u6d4b\n    let payload = JSON.stringify({\n        match_id: `k6_test_${__VU}`,\n        home_team_id: 1,\n        away_team_id: 2,\n        league_id: 1,\n        match_date: \"2025-09-25T15:00:00Z\"\n    });\n\n    let createRes = http.post('http://localhost:8000/api/v1/predictions/', payload);\n    check(createRes, {\n        'create prediction status is 200': (r) =&gt; r.status === 200,\n    });\n\n    sleep(1);\n}\nEOF\n#\n#\u8fd0\u884ck6\u6d4b\u8bd5\uff08\u9700\u8981\u5148\u5b89\u88c5k6\uff09\n\u8fd0\u884ck6\u6d4b\u8bd5\uff08\u9700\u8981\u5148\u5b89\u88c5k6\uff09#\n#k6 run k6_test.js\n\nk6 run k6_test.js\n#\n#=============================================================================\n=============================================================================#\n#4. \u6570\u636e\u5e93\u6027\u80fd\u6d4b\u8bd5\n4. \u6570\u636e\u5e93\u6027\u80fd\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u6570\u636e\u5e93\u67e5\u8be2\u6027\u80fd\u6d4b\u8bd5\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nEXPLAIN ANALYZE SELECT * FROM matches LIMIT 100;\n\"\n\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nEXPLAIN ANALYZE SELECT * FROM predictions WHERE confidence &gt; 0.8 LIMIT 50;\n\"\n\n\u6570\u636e\u5e93\u67e5\u8be2\u6027\u80fd\u6d4b\u8bd5\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nEXPLAIN ANALYZE SELECT * FROM matches LIMIT 100;\n\"\n\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nEXPLAIN ANALYZE SELECT * FROM predictions WHERE confidence &gt; 0.8 LIMIT 50;\n\"\n#\n#\u8fde\u63a5\u6c60\u6d4b\u8bd5\ncat &gt; db_pool_test.py &lt;&lt; 'EOF'\nimport asyncio\nimport time\nimport sys\nsys.path.append('/home/user/projects/FootballPrediction')\n\nfrom src.database.connection import get_async_session\n\nasync def test_database_pool():\n    \"\"\"\u6d4b\u8bd5\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u6027\u80fd\"\"\"\n    start_time = time.time()\n\n    # \u5e76\u53d1\u67e5\u8be2\u6d4b\u8bd5\n    tasks = []\n    for i in range(50):\n        task = asyncio.create_task(test_query(f\"test_query_{i}\"))\n        tasks.append(task)\n\n    results = await asyncio.gather(*tasks, return_exceptions=True)\n\n    end_time = time.time()\n    duration = end_time - start_time\n\n    successful = sum(1 for r in results if not isinstance(r, Exception))\n    failed = len(results) - successful\n\n    print(f\"\u2705 Database pool test completed:\")\n    print(f\"   Total queries: {len(results)}\")\n    print(f\"   Successful: {successful}\")\n    print(f\"   Failed: {failed}\")\n    print(f\"   Duration: {duration:.2f}s\")\n    print(f\"   QPS: {len(results)/duration:.2f}\")\n\n    return failed == 0\n\nasync def test_query(query_id):\n    \"\"\"\u6267\u884c\u5355\u4e2a\u67e5\u8be2\"\"\"\n    try:\n        async with get_async_session() as session:\n            await session.execute(\"SELECT 1\")\n            return True\n    except Exception as e:\n        print(f\"Query {query_id} failed: {e}\")\n        return False\n\nif __name__ == \"__main__\":\n    success = asyncio.run(test_database_pool())\n    sys.exit(0 if success else 1)\nEOF\n\n\u8fde\u63a5\u6c60\u6d4b\u8bd5\ncat &gt; db_pool_test.py &lt;&lt; 'EOF'\nimport asyncio\nimport time\nimport sys\nsys.path.append('/home/user/projects/FootballPrediction')\n\nfrom src.database.connection import get_async_session\n\nasync def test_database_pool():\n    \"\"\"\u6d4b\u8bd5\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u6027\u80fd\"\"\"\n    start_time = time.time()\n\n    # \u5e76\u53d1\u67e5\u8be2\u6d4b\u8bd5\n    tasks = []\n    for i in range(50):\n        task = asyncio.create_task(test_query(f\"test_query_{i}\"))\n        tasks.append(task)\n\n    results = await asyncio.gather(*tasks, return_exceptions=True)\n\n    end_time = time.time()\n    duration = end_time - start_time\n\n    successful = sum(1 for r in results if not isinstance(r, Exception))\n    failed = len(results) - successful\n\n    print(f\"\u2705 Database pool test completed:\")\n    print(f\"   Total queries: {len(results)}\")\n    print(f\"   Successful: {successful}\")\n    print(f\"   Failed: {failed}\")\n    print(f\"   Duration: {duration:.2f}s\")\n    print(f\"   QPS: {len(results)/duration:.2f}\")\n\n    return failed == 0\n\nasync def test_query(query_id):\n    \"\"\"\u6267\u884c\u5355\u4e2a\u67e5\u8be2\"\"\"\n    try:\n        async with get_async_session() as session:\n            await session.execute(\"SELECT 1\")\n            return True\n    except Exception as e:\n        print(f\"Query {query_id} failed: {e}\")\n        return False\n\nif __name__ == \"__main__\":\n    success = asyncio.run(test_database_pool())\n    sys.exit(0 if success else 1)\nEOF\n#\n#\u8fd0\u884c\u6570\u636e\u5e93\u6c60\u6d4b\u8bd5\npython db_pool_test.py\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_16","title":"\ud83d\udcca \u6027\u80fd\u57fa\u51c6\u6307\u6807","text":"\u6307\u6807 \u5065\u5eb7\u68c0\u67e5 \u9884\u6d4b\u63a5\u53e3 \u7279\u5f81\u63a5\u53e3 \u9608\u503c \u54cd\u5e94\u65f6\u95f4 &lt; 50ms &lt; 500ms &lt; 200ms 95% &lt; 500ms \u541e\u5410\u91cf &gt; 1000 RPM &gt; 200 RPM &gt; 500 RPM \u6839\u636e\u4e1a\u52a1\u9700\u6c42 \u9519\u8bef\u7387 &lt; 0.1% &lt; 1% &lt; 0.5% &lt; 1% CPU\u4f7f\u7528\u7387 &lt; 30% &lt; 70% &lt; 50% &lt; 80% \u5185\u5b58\u4f7f\u7528 &lt; 512MB &lt; 1GB &lt; 768MB &lt; 2GB \u6570\u636e\u5e93\u8fde\u63a5 &lt; 50 &lt; 100 &lt; 80 &lt; 150 <p>\u8fd0\u884c\u6570\u636e\u5e93\u6c60\u6d4b\u8bd5 python db_pool_test.py <pre><code>#### \ud83d\udcca \u6027\u80fd\u57fa\u51c6\u6307\u6807\n\n| \u6307\u6807 | \u5065\u5eb7\u68c0\u67e5 | \u9884\u6d4b\u63a5\u53e3 | \u7279\u5f81\u63a5\u53e3 | \u9608\u503c |\n|------|---------|---------|---------|------|\n| **\u54cd\u5e94\u65f6\u95f4** | &lt; 50ms | &lt; 500ms | &lt; 200ms | 95% &lt; 500ms |\n| **\u541e\u5410\u91cf** | &gt; 1000 RPM | &gt; 200 RPM | &gt; 500 RPM | \u6839\u636e\u4e1a\u52a1\u9700\u6c42 |\n| **\u9519\u8bef\u7387** | &lt; 0.1% | &lt; 1% | &lt; 0.5% | &lt; 1% |\n| **CPU\u4f7f\u7528\u7387** | &lt; 30% | &lt; 70% | &lt; 50% | &lt; 80% |\n| **\u5185\u5b58\u4f7f\u7528** | &lt; 512MB | &lt; 1GB | &lt; 768MB | &lt; 2GB |\n| **\u6570\u636e\u5e93\u8fde\u63a5** | &lt; 50 | &lt; 100 | &lt; 80 | &lt; 150 |\n###\n###3. \u76d1\u63a7\u9a8c\u8bc1\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u76d1\u63a7\u9a8c\u8bc1\n\n- [ ] **Grafana\u4eea\u8868\u76d8**: \u6240\u6709\u4eea\u8868\u76d8\u52a0\u8f7d\u6b63\u5e38\n- [ ] **Prometheus\u6307\u6807**: \u6307\u6807\u6570\u636e\u6b63\u5e38\u91c7\u96c6\n- [ **AlertManager\u914d\u7f6e**: \u544a\u8b66\u89c4\u5219\u548c\u901a\u77e5\u914d\u7f6e\u6b63\u786e\n- [ ] **\u544a\u8b66\u63a8\u9001**: \u544a\u8b66\u901a\u77e5\u6b63\u5e38\u53d1\u9001\n- [ ] **\u65e5\u5fd7\u805a\u5408**: \u65e5\u5fd7\u6536\u96c6\u548c\u67e5\u8be2\u6b63\u5e38\n- [ ] **\u4e1a\u52a1\u6307\u6807**: \u4e1a\u52a1\u76d1\u63a7\u6307\u6807\u6b63\u5e38\u663e\u793a\n\n#### \ud83d\udcc8 Grafana \u4eea\u8868\u76d8\u9a8c\u8bc1\n\n```bash\n3. \u76d1\u63a7\u9a8c\u8bc1\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u76d1\u63a7\u9a8c\u8bc1\n\n- [ ] **Grafana\u4eea\u8868\u76d8**: \u6240\u6709\u4eea\u8868\u76d8\u52a0\u8f7d\u6b63\u5e38\n- [ ] **Prometheus\u6307\u6807**: \u6307\u6807\u6570\u636e\u6b63\u5e38\u91c7\u96c6\n- [ **AlertManager\u914d\u7f6e**: \u544a\u8b66\u89c4\u5219\u548c\u901a\u77e5\u914d\u7f6e\u6b63\u786e\n- [ ] **\u544a\u8b66\u63a8\u9001**: \u544a\u8b66\u901a\u77e5\u6b63\u5e38\u53d1\u9001\n- [ ] **\u65e5\u5fd7\u805a\u5408**: \u65e5\u5fd7\u6536\u96c6\u548c\u67e5\u8be2\u6b63\u5e38\n- [ ] **\u4e1a\u52a1\u6307\u6807**: \u4e1a\u52a1\u76d1\u63a7\u6307\u6807\u6b63\u5e38\u663e\u793a\n\n#### \ud83d\udcc8 Grafana \u4eea\u8868\u76d8\u9a8c\u8bc1\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. Grafana\u670d\u52a1\u8bbf\u95ee\u9a8c\u8bc1\n1. Grafana\u670d\u52a1\u8bbf\u95ee\u9a8c\u8bc1#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5Grafana\u670d\u52a1\u72b6\u6001\ncurl -f http://localhost:3000/api/health\n\n\u68c0\u67e5Grafana\u670d\u52a1\u72b6\u6001\ncurl -f http://localhost:3000/api/health\n#\n#\u68c0\u67e5\u6570\u636e\u6e90\u914d\u7f6e\ncurl -u admin:your_grafana_password http://localhost:3000/api/datasources | jq '.[].name'\n\n\u68c0\u67e5\u6570\u636e\u6e90\u914d\u7f6e\ncurl -u admin:your_grafana_password http://localhost:3000/api/datasources | jq '.[].name'\n#\n#\u68c0\u67e5\u4eea\u8868\u76d8\u5217\u8868\ncurl -u admin:your_grafana_password http://localhost:3000/api/search | jq '.[].title'\n\n\u68c0\u67e5\u4eea\u8868\u76d8\u5217\u8868\ncurl -u admin:your_grafana_password http://localhost:3000/api/search | jq '.[].title'\n#\n#=============================================================================\n=============================================================================#\n#2. \u4eea\u8868\u76d8\u52a0\u8f7d\u6d4b\u8bd5\n2. \u4eea\u8868\u76d8\u52a0\u8f7d\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u4e3b\u8981\u4eea\u8868\u76d8\nDASHBOARDS=(\n    \"\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u76d1\u63a7\u4eea\u8868\u76d8\"\n    \"\u7cfb\u7edf\u6982\u89c8\"\n    \"API\u6027\u80fd\"\n    \"\u6570\u636e\u5e93\u6027\u80fd\"\n    \"\u7f13\u5b58\u6027\u80fd\"\n    \"\u4efb\u52a1\u961f\u5217\"\n    \"\u6a21\u578b\u6027\u80fd\"\n)\n\nfor dashboard in \"${DASHBOARDS[@]}\"; do\n    echo \"Checking dashboard: $dashboard\"\n    dashboard_uid=$(curl -s -u admin:your_grafana_password \\\n        \"http://localhost:3000/api/search?query=$dashboard\" | \\\n        jq -r '.[0].uid')\n\n    if [ \"$dashboard_uid\" != \"null\" ]; then\n        # \u68c0\u67e5\u4eea\u8868\u76d8\u52a0\u8f7d\n        curl -s -u admin:your_grafana_password \\\n            \"http://localhost:3000/api/dashboards/uid/$dashboard_uid\" | \\\n            jq '.dashboard.title'\n        echo \"\u2705 Dashboard loaded successfully\"\n    else\n        echo \"\u274c Dashboard not found: $dashboard\"\n    fi\ndone\n\n\u68c0\u67e5\u4e3b\u8981\u4eea\u8868\u76d8\nDASHBOARDS=(\n    \"\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u76d1\u63a7\u4eea\u8868\u76d8\"\n    \"\u7cfb\u7edf\u6982\u89c8\"\n    \"API\u6027\u80fd\"\n    \"\u6570\u636e\u5e93\u6027\u80fd\"\n    \"\u7f13\u5b58\u6027\u80fd\"\n    \"\u4efb\u52a1\u961f\u5217\"\n    \"\u6a21\u578b\u6027\u80fd\"\n)\n\nfor dashboard in \"${DASHBOARDS[@]}\"; do\n    echo \"Checking dashboard: $dashboard\"\n    dashboard_uid=$(curl -s -u admin:your_grafana_password \\\n        \"http://localhost:3000/api/search?query=$dashboard\" | \\\n        jq -r '.[0].uid')\n\n    if [ \"$dashboard_uid\" != \"null\" ]; then\n        # \u68c0\u67e5\u4eea\u8868\u76d8\u52a0\u8f7d\n        curl -s -u admin:your_grafana_password \\\n            \"http://localhost:3000/api/dashboards/uid/$dashboard_uid\" | \\\n            jq '.dashboard.title'\n        echo \"\u2705 Dashboard loaded successfully\"\n    else\n        echo \"\u274c Dashboard not found: $dashboard\"\n    fi\ndone\n#\n#=============================================================================\n=============================================================================#\n#3. \u9762\u677f\u6570\u636e\u9a8c\u8bc1\n3. \u9762\u677f\u6570\u636e\u9a8c\u8bc1#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u5173\u952e\u6307\u6807\u662f\u5426\u6b63\u5e38\u663e\u793a\ncurl -s -u admin:your_grafana_password \\\n    \"http://localhost:3000/api/datasources/proxy/1/api/v1/query?query=up\" | \\\n    jq '.data.result[]'\n\n\u68c0\u67e5\u5173\u952e\u6307\u6807\u662f\u5426\u6b63\u5e38\u663e\u793a\ncurl -s -u admin:your_grafana_password \\\n    \"http://localhost:3000/api/datasources/proxy/1/api/v1/query?query=up\" | \\\n    jq '.data.result[]'\n#\n#\u68c0\u67e5API\u54cd\u5e94\u65f6\u95f4\u6307\u6807\ncurl -s -u admin:your_grafana_password \\\n    \"http://localhost:3000/api/datasources/proxy/1/api/v1/query?query=football_prediction_latency_seconds_sum\" | \\\n    jq '.data.result[]'\n\n\u68c0\u67e5API\u54cd\u5e94\u65f6\u95f4\u6307\u6807\ncurl -s -u admin:your_grafana_password \\\n    \"http://localhost:3000/api/datasources/proxy/1/api/v1/query?query=football_prediction_latency_seconds_sum\" | \\\n    jq '.data.result[]'\n#\n#\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\u6307\u6807\ncurl -s -u admin:your_grafana_password \\\n    \"http://localhost:3000/api/datasources/proxy/1/api/v1/query?query=pg_stat_database_numbackends\" | \\\n    jq '.data.result[]'\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#prometheus","title":"\ud83d\udea8 Prometheus \u89c4\u5219\u89e6\u53d1\u6d4b\u8bd5","text":"<pre><code>\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\u6307\u6807\ncurl -s -u admin:your_grafana_password \\\n    \"http://localhost:3000/api/datasources/proxy/1/api/v1/query?query=pg_stat_database_numbackends\" | \\\n    jq '.data.result[]'\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#prometheus_1","title":"\ud83d\udea8 Prometheus \u89c4\u5219\u89e6\u53d1\u6d4b\u8bd5","text":"<pre><code>#=============================================================================\n=============================================================================#\n#1. Prometheus \u670d\u52a1\u9a8c\u8bc1\n1. Prometheus \u670d\u52a1\u9a8c\u8bc1#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5Prometheus\u5065\u5eb7\u72b6\u6001\ncurl -f http://localhost:9090/-/ready\n\n\u68c0\u67e5Prometheus\u5065\u5eb7\u72b6\u6001\ncurl -f http://localhost:9090/-/ready\n#\n#\u68c0\u67e5\u76ee\u6807\u72b6\u6001\ncurl -s http://localhost:9090/api/v1/targets | jq '.data.activeTargets[] | {health, labels}'\n\n\u68c0\u67e5\u76ee\u6807\u72b6\u6001\ncurl -s http://localhost:9090/api/v1/targets | jq '.data.activeTargets[] | {health, labels}'\n#\n#\u68c0\u67e5\u89c4\u5219\u914d\u7f6e\ncurl -s http://localhost:9090/api/v1/rules | jq '.data.groups[] | {name, rules}'\n\n\u68c0\u67e5\u89c4\u5219\u914d\u7f6e\ncurl -s http://localhost:9090/api/v1/rules | jq '.data.groups[] | {name, rules}'\n#\n#=============================================================================\n=============================================================================#\n#2. \u544a\u8b66\u89c4\u5219\u6d4b\u8bd5\n2. \u544a\u8b66\u89c4\u5219\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u544a\u8b66\u89c4\u5219\u72b6\u6001\ncurl -s http://localhost:9090/api/v1/alerts | jq '.data.alerts[] | {name, state, labels}'\n\n\u68c0\u67e5\u544a\u8b66\u89c4\u5219\u72b6\u6001\ncurl -s http://localhost:9090/api/v1/alerts | jq '.data.alerts[] | {name, state, labels}'\n#\n#\u68c0\u67e5\u544a\u8b66\u89c4\u5219\u52a0\u8f7d\ncurl -s http://localhost:9090/api/v1/rules?type=alert | jq '.data.groups[].rules[] | {name, health, lastError}'\n\n\u68c0\u67e5\u544a\u8b66\u89c4\u5219\u52a0\u8f7d\ncurl -s http://localhost:9090/api/v1/rules?type=alert | jq '.data.groups[].rules[] | {name, health, lastError}'\n#\n#=============================================================================\n=============================================================================#\n#3. \u6a21\u62df\u544a\u8b66\u89e6\u53d1\n3. \u6a21\u62df\u544a\u8b66\u89e6\u53d1#\n#=============================================================================\n\n=============================================================================\n#\n#\u521b\u5efa\u9ad8CPU\u4f7f\u7528\u7387\u544a\u8b66\u6d4b\u8bd5\ndocker exec football_prediction_app sh -c \"dd if=/dev/zero of=/dev/null bs=1G count=10 &amp;\"\n\n\u521b\u5efa\u9ad8CPU\u4f7f\u7528\u7387\u544a\u8b66\u6d4b\u8bd5\ndocker exec football_prediction_app sh -c \"dd if=/dev/zero of=/dev/null bs=1G count=10 &amp;\"\n#\n#\u68c0\u67e5CPU\u4f7f\u7528\u7387\u544a\u8b66\u662f\u5426\u89e6\u53d1\nsleep 30\ncurl -s http://localhost:9090/api/v1/alerts | jq '.data.alerts[] | select(.labels.alertname==\"HighCpuUsage\")'\n\n\u68c0\u67e5CPU\u4f7f\u7528\u7387\u544a\u8b66\u662f\u5426\u89e6\u53d1\nsleep 30\ncurl -s http://localhost:9090/api/v1/alerts | jq '.data.alerts[] | select(.labels.alertname==\"HighCpuUsage\")'\n#\n#\u505c\u6b62CPU\u538b\u529b\u6d4b\u8bd5\ndocker exec football_prediction_app pkill dd\n\n\u505c\u6b62CPU\u538b\u529b\u6d4b\u8bd5\ndocker exec football_prediction_app pkill dd\n#\n#=============================================================================\n=============================================================================#\n#4. AlertManager \u901a\u77e5\u6d4b\u8bd5\n4. AlertManager \u901a\u77e5\u6d4b\u8bd5#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5AlertManager\u914d\u7f6e\ncurl -f http://localhost:9093/-/ready\n\n\u68c0\u67e5AlertManager\u914d\u7f6e\ncurl -f http://localhost:9093/-/ready\n#\n#\u68c0\u67e5\u544a\u8b66\u8def\u7531\u914d\u7f6e\ncurl -s http://localhost:9093/api/v1/alerts/groups | jq '.[] | {receiver, alerts}'\n\n\u68c0\u67e5\u544a\u8b66\u8def\u7531\u914d\u7f6e\ncurl -s http://localhost:9093/api/v1/alerts/groups | jq '.[] | {receiver, alerts}'\n#\n#\u53d1\u9001\u6d4b\u8bd5\u544a\u8b66\ncurl -X POST http://localhost:9093/api/v1/alerts \\\n  -H \"Content-Type: application/json\" \\\n  -d '[\n    {\n      \"labels\": {\n        \"alertname\": \"TestAlert\",\n        \"severity\": \"warning\",\n        \"component\": \"test\"\n      },\n      \"annotations\": {\n        \"summary\": \"This is a test alert\",\n        \"description\": \"Test alert notification\"\n      }\n    }\n  ]'\n\n\u53d1\u9001\u6d4b\u8bd5\u544a\u8b66\ncurl -X POST http://localhost:9093/api/v1/alerts \\\n  -H \"Content-Type: application/json\" \\\n  -d '[\n    {\n      \"labels\": {\n        \"alertname\": \"TestAlert\",\n        \"severity\": \"warning\",\n        \"component\": \"test\"\n      },\n      \"annotations\": {\n        \"summary\": \"This is a test alert\",\n        \"description\": \"Test alert notification\"\n      }\n    }\n  ]'\n#\n#=============================================================================\n=============================================================================#\n#5. \u76d1\u63a7\u6307\u6807\u9a8c\u8bc1\n5. \u76d1\u63a7\u6307\u6807\u9a8c\u8bc1#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u5e94\u7528\u6307\u6807\ncurl -s http://localhost:8000/metrics | grep -E \"football_predictions_total|football_prediction_latency_seconds\"\n\n\u68c0\u67e5\u5e94\u7528\u6307\u6807\ncurl -s http://localhost:8000/metrics | grep -E \"football_predictions_total|football_prediction_latency_seconds\"\n#\n#\u68c0\u67e5\u7cfb\u7edf\u6307\u6807\ncurl -s http://localhost:9100/metrics | grep node_cpu_seconds_total\n\n\u68c0\u67e5\u7cfb\u7edf\u6307\u6807\ncurl -s http://localhost:9100/metrics | grep node_cpu_seconds_total\n#\n#\u68c0\u67e5\u6570\u636e\u5e93\u6307\u6807\ncurl -s http://localhost:9187/metrics | grep pg_stat_database\n\n\u68c0\u67e5\u6570\u636e\u5e93\u6307\u6807\ncurl -s http://localhost:9187/metrics | grep pg_stat_database\n#\n#\u68c0\u67e5Redis\u6307\u6807\ncurl -s http://localhost:9121/metrics | grep redis_keyspace_hits_total\n</code></pre> <p>\u68c0\u67e5Redis\u6307\u6807 curl -s http://localhost:9121/metrics | grep redis_keyspace_hits_total ```</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_17","title":"\u521b\u5efa\u6a21\u578b\u6d4b\u8bd5\u811a\u672c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_18","title":"\ud83d\udd04 \u56de\u6eda\u6f14\u7ec3","text":"<p>\ud83d\udd04 \u56de\u6eda\u6f14\u7ec3</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_19","title":"\u521b\u5efa\u6a21\u578b\u6d4b\u8bd5\u811a\u672c","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#1","title":"1. \u5bb9\u5668\u56de\u6eda","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_20","title":"\u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u5bb9\u5668\u56de\u6eda\u51c6\u5907","text":"<ul> <li> \u955c\u50cf\u5907\u4efd: \u786e\u4fdd\u6709\u53ef\u7528\u7684\u56de\u6eda\u955c\u50cf</li> <li> \u7248\u672c\u8bb0\u5f55: \u8bb0\u5f55\u5f53\u524d\u90e8\u7f72\u7248\u672c\u4fe1\u606f</li> <li> \u56de\u6eda\u811a\u672c: \u56de\u6eda\u811a\u672c\u51c6\u5907\u5c31\u7eea</li> <li> \u6570\u636e\u5907\u4efd: \u6570\u636e\u5e93\u548c\u7f13\u5b58\u5df2\u5907\u4efd</li> <li> \u56de\u6eda\u9a8c\u8bc1: \u56de\u6eda\u9a8c\u8bc1\u6b65\u9aa4\u660e\u786e</li> </ul>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_03/#_21","title":"\ud83d\udc33 \u4f7f\u7528\u4e0a\u4e00\u7248\u672c\u955c\u50cf\u5feb\u901f\u56de\u9000","text":"<p>```bash</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/","title":"Part 04","text":"<ol> <li>\u5bb9\u5668\u56de\u6eda</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_1","title":"\u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u5bb9\u5668\u56de\u6eda\u51c6\u5907","text":"<ul> <li> \u955c\u50cf\u5907\u4efd: \u786e\u4fdd\u6709\u53ef\u7528\u7684\u56de\u6eda\u955c\u50cf</li> <li> \u7248\u672c\u8bb0\u5f55: \u8bb0\u5f55\u5f53\u524d\u90e8\u7f72\u7248\u672c\u4fe1\u606f</li> <li> \u56de\u6eda\u811a\u672c: \u56de\u6eda\u811a\u672c\u51c6\u5907\u5c31\u7eea</li> <li> \u6570\u636e\u5907\u4efd: \u6570\u636e\u5e93\u548c\u7f13\u5b58\u5df2\u5907\u4efd</li> <li> \u56de\u6eda\u9a8c\u8bc1: \u56de\u6eda\u9a8c\u8bc1\u6b65\u9aa4\u660e\u786e</li> </ul>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_2","title":"\ud83d\udc33 \u4f7f\u7528\u4e0a\u4e00\u7248\u672c\u955c\u50cf\u5feb\u901f\u56de\u9000","text":"<pre><code>#=============================================================================\n=============================================================================#\n#1. \u56de\u6eda\u51c6\u5907\n1. \u56de\u6eda\u51c6\u5907#\n#=============================================================================\n\n=============================================================================\n#\n#\u8bb0\u5f55\u5f53\u524d\u7248\u672c\u4fe1\u606f\necho \"=== Current Deployment Information ===\" &gt; rollback_log.txt\necho \"Timestamp: $(date)\" &gt;&gt; rollback_log.txt\necho \"Current Git SHA: $(git rev-parse HEAD)\" &gt;&gt; rollback_log.txt\necho \"Current Docker Images:\" &gt;&gt; rollback_log.txt\ndocker-compose images &gt;&gt; rollback_log.txt\n\n\u8bb0\u5f55\u5f53\u524d\u7248\u672c\u4fe1\u606f\necho \"=== Current Deployment Information ===\" &gt; rollback_log.txt\necho \"Timestamp: $(date)\" &gt;&gt; rollback_log.txt\necho \"Current Git SHA: $(git rev-parse HEAD)\" &gt;&gt; rollback_log.txt\necho \"Current Docker Images:\" &gt;&gt; rollback_log.txt\ndocker-compose images &gt;&gt; rollback_log.txt\n#\n#\u4fdd\u5b58\u5f53\u524d\u914d\u7f6e\ncp docker-compose.yml docker-compose.yml.current\ncp .env.production .env.production.backup\n\n\u4fdd\u5b58\u5f53\u524d\u914d\u7f6e\ncp docker-compose.yml docker-compose.yml.current\ncp .env.production .env.production.backup\n#\n#\u83b7\u53d6\u4e0a\u4e00\u4e2a\u53ef\u7528\u7684Git SHA\nPREVIOUS_SHA=$(git rev-parse HEAD^)\necho \"Previous SHA: $PREVIOUS_SHA\" &gt;&gt; rollback_log.txt\n\n\u83b7\u53d6\u4e0a\u4e00\u4e2a\u53ef\u7528\u7684Git SHA\nPREVIOUS_SHA=$(git rev-parse HEAD^)\necho \"Previous SHA: $PREVIOUS_SHA\" &gt;&gt; rollback_log.txt\n#\n#=============================================================================\n=============================================================================#\n#2. Docker Compose \u56de\u6eda\n2. Docker Compose \u56de\u6eda#\n#=============================================================================\n\n=============================================================================\n#\n#\u65b9\u6cd51: \u4f7f\u7528Makefile\u56de\u6eda\nmake rollback TAG=$PREVIOUS_SHA\n\n\u65b9\u6cd51: \u4f7f\u7528Makefile\u56de\u6eda\nmake rollback TAG=$PREVIOUS_SHA\n#\n#\u65b9\u6cd52: \u624b\u52a8\u56de\u6eda\u6b65\u9aa4\necho \"=== Starting Docker Compose Rollback ===\" &gt;&gt; rollback_log.txt\n\n\u65b9\u6cd52: \u624b\u52a8\u56de\u6eda\u6b65\u9aa4\necho \"=== Starting Docker Compose Rollback ===\" &gt;&gt; rollback_log.txt\n#\n#\u505c\u6b62\u5f53\u524d\u670d\u52a1\ndocker-compose down\n\n\u505c\u6b62\u5f53\u524d\u670d\u52a1\ndocker-compose down\n#\n#\u62c9\u53d6\u4e0a\u4e00\u4e2a\u7248\u672c\u7684\u955c\u50cf\ndocker pull football-predict:phase6-$PREVIOUS_SHA\n\n\u62c9\u53d6\u4e0a\u4e00\u4e2a\u7248\u672c\u7684\u955c\u50cf\ndocker pull football-predict:phase6-$PREVIOUS_SHA\n#\n#\u4fee\u6539docker-compose.yml\u4f7f\u7528\u4e0a\u4e00\u4e2a\u7248\u672c\nsed -i \"s/football-predict:phase6-.*/football-predict:phase6-$PREVIOUS_SHA/g\" docker-compose.yml\n\n\u4fee\u6539docker-compose.yml\u4f7f\u7528\u4e0a\u4e00\u4e2a\u7248\u672c\nsed -i \"s/football-predict:phase6-.*/football-predict:phase6-$PREVIOUS_SHA/g\" docker-compose.yml\n#\n#\u91cd\u65b0\u542f\u52a8\u670d\u52a1\ndocker-compose up -d\n\n\u91cd\u65b0\u542f\u52a8\u670d\u52a1\ndocker-compose up -d\n#\n#\u7b49\u5f85\u670d\u52a1\u542f\u52a8\nsleep 30\n\n\u7b49\u5f85\u670d\u52a1\u542f\u52a8\nsleep 30\n#\n#\u9a8c\u8bc1\u670d\u52a1\u72b6\u6001\ndocker-compose ps &gt;&gt; rollback_log.txt\n\n\u9a8c\u8bc1\u670d\u52a1\u72b6\u6001\ndocker-compose ps &gt;&gt; rollback_log.txt\n#\n#=============================================================================\n=============================================================================#\n#3. \u9a8c\u8bc1\u56de\u6eda\u6210\u529f\n3. \u9a8c\u8bc1\u56de\u6eda\u6210\u529f#\n#=============================================================================\n\necho \"=== Verifying Rollback ===\" &gt;&gt; rollback_log.txt\n\n=============================================================================\n\necho \"=== Verifying Rollback ===\" &gt;&gt; rollback_log.txt\n#\n#\u68c0\u67e5\u670d\u52a1\u5065\u5eb7\u72b6\u6001\ncurl -f http://localhost:8000/health &gt;&gt; rollback_log.txt 2&gt;&amp;1\n\n\u68c0\u67e5\u670d\u52a1\u5065\u5eb7\u72b6\u6001\ncurl -f http://localhost:8000/health &gt;&gt; rollback_log.txt 2&gt;&amp;1\n#\n#\u68c0\u67e5API\u7248\u672c\u4fe1\u606f\ncurl -s http://localhost:8000/ | jq -r '.version' &gt;&gt; rollback_log.txt 2&gt;&amp;1\n\n\u68c0\u67e5API\u7248\u672c\u4fe1\u606f\ncurl -s http://localhost:8000/ | jq -r '.version' &gt;&gt; rollback_log.txt 2&gt;&amp;1\n#\n#\u9a8c\u8bc1\u6570\u636e\u5e93\u8fde\u63a5\ndocker exec football_prediction_db pg_isready -U football_user &gt;&gt; rollback_log.txt 2&gt;&amp;1\n\n\u9a8c\u8bc1\u6570\u636e\u5e93\u8fde\u63a5\ndocker exec football_prediction_db pg_isready -U football_user &gt;&gt; rollback_log.txt 2&gt;&amp;1\n#\n#\u8fd0\u884c\u57fa\u672c\u529f\u80fd\u6d4b\u8bd5\npython -c \"\nimport asyncio\nimport sys\nsys.path.append('/home/user/projects/FootballPrediction')\nfrom src.database.connection import get_async_session\n\nasync def test_connection():\n    try:\n        async with get_async_session() as session:\n            result = await session.execute('SELECT 1')\n            print('\u2705 Database connection successful')\n            return True\n    except Exception as e:\n        print(f'\u274c Database connection failed: {e}')\n        return False\n\nasyncio.run(test_connection())\n\" &gt;&gt; rollback_log.txt 2&gt;&amp;1\n\necho \"Rollback completed at $(date)\" &gt;&gt; rollback_log.txt\necho \"Rollback log saved to rollback_log.txt\"\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#kubernetes","title":"\u2638\ufe0f Kubernetes \u56de\u6eda","text":"<pre><code>\u8fd0\u884c\u57fa\u672c\u529f\u80fd\u6d4b\u8bd5\npython -c \"\nimport asyncio\nimport sys\nsys.path.append('/home/user/projects/FootballPrediction')\nfrom src.database.connection import get_async_session\n\nasync def test_connection():\n    try:\n        async with get_async_session() as session:\n            result = await session.execute('SELECT 1')\n            print('\u2705 Database connection successful')\n            return True\n    except Exception as e:\n        print(f'\u274c Database connection failed: {e}')\n        return False\n\nasyncio.run(test_connection())\n\" &gt;&gt; rollback_log.txt 2&gt;&amp;1\n\necho \"Rollback completed at $(date)\" &gt;&gt; rollback_log.txt\necho \"Rollback log saved to rollback_log.txt\"\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#kubernetes_1","title":"\u2638\ufe0f Kubernetes \u56de\u6eda","text":"<pre><code>#=============================================================================\n=============================================================================#\n#1. Kubernetes \u56de\u6eda\u51c6\u5907\n1. Kubernetes \u56de\u6eda\u51c6\u5907#\n#=============================================================================\n\n=============================================================================\n#\n#\u8bb0\u5f55\u5f53\u524d\u72b6\u6001\necho \"=== Current Kubernetes State ===\" &gt; k8s_rollback_log.txt\necho \"Timestamp: $(date)\" &gt;&gt; k8s_rollback_log.txt\nkubectl get pods -o wide &gt;&gt; k8s_rollback_log.txt\nkubectl get deployments &gt;&gt; k8s_rollback_log.txt\n\n\u8bb0\u5f55\u5f53\u524d\u72b6\u6001\necho \"=== Current Kubernetes State ===\" &gt; k8s_rollback_log.txt\necho \"Timestamp: $(date)\" &gt;&gt; k8s_rollback_log.txt\nkubectl get pods -o wide &gt;&gt; k8s_rollback_log.txt\nkubectl get deployments &gt;&gt; k8s_rollback_log.txt\n#\n#\u83b7\u53d6\u5f53\u524d\u90e8\u7f72\u7248\u672c\nCURRENT_REVISION=$(kubectl rollout history deployment/football-prediction | grep \"REVISION\" | tail -1 | awk '{print $1}')\necho \"Current revision: $CURRENT_REVISION\" &gt;&gt; k8s_rollback_log.txt\n\n\u83b7\u53d6\u5f53\u524d\u90e8\u7f72\u7248\u672c\nCURRENT_REVISION=$(kubectl rollout history deployment/football-prediction | grep \"REVISION\" | tail -1 | awk '{print $1}')\necho \"Current revision: $CURRENT_REVISION\" &gt;&gt; k8s_rollback_log.txt\n#\n#=============================================================================\n=============================================================================#\n#2. \u6267\u884c\u56de\u6eda\n2. \u6267\u884c\u56de\u6eda#\n#=============================================================================\n\necho \"=== Starting Kubernetes Rollback ===\" &gt;&gt; k8s_rollback_log.txt\n\n=============================================================================\n\necho \"=== Starting Kubernetes Rollback ===\" &gt;&gt; k8s_rollback_log.txt\n#\n#\u65b9\u6cd51: \u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\nkubectl rollout undo deployment/football-prediction\n\n\u65b9\u6cd51: \u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\nkubectl rollout undo deployment/football-prediction\n#\n#\u65b9\u6cd52: \u56de\u6eda\u5230\u7279\u5b9a\u7248\u672c\n\u65b9\u6cd52: \u56de\u6eda\u5230\u7279\u5b9a\u7248\u672c#\n#kubectl rollout undo deployment/football-prediction --to-revision=2\n\nkubectl rollout undo deployment/football-prediction --to-revision=2\n#\n#\u7b49\u5f85\u56de\u6eda\u5b8c\u6210\nkubectl rollout status deployment/football-prediction --timeout=300s\n\n\u7b49\u5f85\u56de\u6eda\u5b8c\u6210\nkubectl rollout status deployment/football-prediction --timeout=300s\n#\n#=============================================================================\n=============================================================================#\n#3. \u9a8c\u8bc1\u56de\u6eda\n3. \u9a8c\u8bc1\u56de\u6eda#\n#=============================================================================\n\necho \"=== Verifying Kubernetes Rollback ===\" &gt;&gt; k8s_rollback_log.txt\n\n=============================================================================\n\necho \"=== Verifying Kubernetes Rollback ===\" &gt;&gt; k8s_rollback_log.txt\n#\n#\u68c0\u67e5Pod\u72b6\u6001\nkubectl get pods -l app=football-prediction &gt;&gt; k8s_rollback_log.txt\n\n\u68c0\u67e5Pod\u72b6\u6001\nkubectl get pods -l app=football-prediction &gt;&gt; k8s_rollback_log.txt\n#\n#\u68c0\u67e5\u65b0\u7248\u672c\nNEW_REVISION=$(kubectl rollout history deployment/football-prediction | grep \"REVISION\" | tail -1 | awk '{print $1}')\necho \"New revision: $NEW_REVISION\" &gt;&gt; k8s_rollback_log.txt\n\n\u68c0\u67e5\u65b0\u7248\u672c\nNEW_REVISION=$(kubectl rollout history deployment/football-prediction | grep \"REVISION\" | tail -1 | awk '{print $1}')\necho \"New revision: $NEW_REVISION\" &gt;&gt; k8s_rollback_log.txt\n#\n#\u68c0\u67e5\u670d\u52a1\u8bbf\u95ee\nSERVICE_IP=$(kubectl get service football-prediction -o jsonpath='{.status.loadBalancer.ingress[0].ip}')\nif [ -z \"$SERVICE_IP\" ]; then\n    SERVICE_IP=$(kubectl get service football-prediction -o jsonpath='{.status.clusterIP}')\nfi\n\ncurl -f http://$SERVICE_IP:8000/health &gt;&gt; k8s_rollback_log.txt 2&gt;&amp;1\n\necho \"Kubernetes rollback completed at $(date)\" &gt;&gt; k8s_rollback_log.txt\n</code></pre> <p>\u68c0\u67e5\u670d\u52a1\u8bbf\u95ee SERVICE_IP=(kubectl get service football-prediction -o jsonpath='{.status.loadBalancer.ingress[0].ip}') if [ -z \"SERVICE_IP\" ]; then     SERVICE_IP=$(kubectl get service football-prediction -o jsonpath='{.status.clusterIP}') fi</p> <p>curl -f http://$SERVICE_IP:8000/health &gt;&gt; k8s_rollback_log.txt 2&gt;&amp;1</p> <p>echo \"Kubernetes rollback completed at $(date)\" &gt;&gt; k8s_rollback_log.txt <pre><code>###\n###2. \u6570\u636e\u5e93\u56de\u6eda\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u6570\u636e\u5e93\u56de\u6eda\u51c6\u5907\n\n- [ ] **\u5b8c\u6574\u5907\u4efd**: \u6709\u65f6\u95f4\u70b9\u6700\u8fd1\u7684\u5b8c\u6574\u6570\u636e\u5e93\u5907\u4efd\n- [ **WAL\u5f52\u6863**: WAL\u65e5\u5fd7\u5f52\u6863\u6b63\u5e38\n- [ ] **\u56de\u6eda\u811a\u672c**: \u6570\u636e\u5e93\u56de\u6eda\u811a\u672c\u51c6\u5907\u5c31\u7eea\n- [ ] **\u8fc1\u79fb\u8bb0\u5f55**: \u6570\u636e\u5e93\u8fc1\u79fb\u7248\u672c\u8bb0\u5f55\u5b8c\u6574\n- [ ] **\u6570\u636e\u4e00\u81f4\u6027**: \u56de\u6eda\u540e\u6570\u636e\u4e00\u81f4\u6027\u9a8c\u8bc1\u65b9\u6cd5\n\n#### \ud83d\uddc4\ufe0f \u4ece\u5907\u4efd\u6062\u590d\n\n```bash\n2. \u6570\u636e\u5e93\u56de\u6eda\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u6570\u636e\u5e93\u56de\u6eda\u51c6\u5907\n\n- [ ] **\u5b8c\u6574\u5907\u4efd**: \u6709\u65f6\u95f4\u70b9\u6700\u8fd1\u7684\u5b8c\u6574\u6570\u636e\u5e93\u5907\u4efd\n- [ **WAL\u5f52\u6863**: WAL\u65e5\u5fd7\u5f52\u6863\u6b63\u5e38\n- [ ] **\u56de\u6eda\u811a\u672c**: \u6570\u636e\u5e93\u56de\u6eda\u811a\u672c\u51c6\u5907\u5c31\u7eea\n- [ ] **\u8fc1\u79fb\u8bb0\u5f55**: \u6570\u636e\u5e93\u8fc1\u79fb\u7248\u672c\u8bb0\u5f55\u5b8c\u6574\n- [ ] **\u6570\u636e\u4e00\u81f4\u6027**: \u56de\u6eda\u540e\u6570\u636e\u4e00\u81f4\u6027\u9a8c\u8bc1\u65b9\u6cd5\n\n#### \ud83d\uddc4\ufe0f \u4ece\u5907\u4efd\u6062\u590d\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u6570\u636e\u5e93\u5907\u4efd\u68c0\u67e5\n1. \u6570\u636e\u5e93\u5907\u4efd\u68c0\u67e5#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u6700\u65b0\u5907\u4efd\nls -la data/db-backups/full/ | tail -5\n\n\u68c0\u67e5\u6700\u65b0\u5907\u4efd\nls -la data/db-backups/full/ | tail -5\n#\n#\u68c0\u67e5\u5907\u4efd\u5b8c\u6574\u6027\ndocker exec football_prediction_dbBackup sh -c \"\nls -la /backups/full/ | tail -5\nfor backup in /backups/full/*.sql; do\n    echo \\\"Checking \\$backup\\\"\n    head -10 \\\"\\$backup\\\"\ndone\n\"\n\n\u68c0\u67e5\u5907\u4efd\u5b8c\u6574\u6027\ndocker exec football_prediction_dbBackup sh -c \"\nls -la /backups/full/ | tail -5\nfor backup in /backups/full/*.sql; do\n    echo \\\"Checking \\$backup\\\"\n    head -10 \\\"\\$backup\\\"\ndone\n\"\n#\n#=============================================================================\n=============================================================================#\n#2. \u6570\u636e\u5e93\u56de\u6eda\u6b65\u9aa4\n2. \u6570\u636e\u5e93\u56de\u6eda\u6b65\u9aa4#\n#=============================================================================\n\n=============================================================================\n#\n#\u521b\u5efa\u6570\u636e\u5e93\u56de\u6eda\u811a\u672c\ncat &gt; db_rollback.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e  # \u9047\u5230\u9519\u8bef\u7acb\u5373\u9000\u51fa\n\necho \"=== Database Rollback Started at $(date) ===\"\n\n\u521b\u5efa\u6570\u636e\u5e93\u56de\u6eda\u811a\u672c\ncat &gt; db_rollback.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e  # \u9047\u5230\u9519\u8bef\u7acb\u5373\u9000\u51fa\n\necho \"=== Database Rollback Started at $(date) ===\"\n#\n#\u505c\u6b62\u5e94\u7528\u670d\u52a1\u4ee5\u907f\u514d\u5199\u5165\necho \"Stopping application services...\"\ndocker-compose stop app celery-worker celery-beat\n\n\u505c\u6b62\u5e94\u7528\u670d\u52a1\u4ee5\u907f\u514d\u5199\u5165\necho \"Stopping application services...\"\ndocker-compose stop app celery-worker celery-beat\n#\n#\u7b49\u5f85\u5e94\u7528\u5b8c\u5168\u505c\u6b62\nsleep 10\n\n\u7b49\u5f85\u5e94\u7528\u5b8c\u5168\u505c\u6b62\nsleep 10\n#\n#\u8bb0\u5f55\u56de\u6eda\u524d\u72b6\u6001\necho \"Recording pre-rollback state...\"\ndocker exec football_prediction_db pg_dump -U football_user -d football_prediction_dev &gt; pre_rollback_backup_$(date +%Y%m%d_%H%M%S).sql\n\n\u8bb0\u5f55\u56de\u6eda\u524d\u72b6\u6001\necho \"Recording pre-rollback state...\"\ndocker exec football_prediction_db pg_dump -U football_user -d football_prediction_dev &gt; pre_rollback_backup_$(date +%Y%m%d_%H%M%S).sql\n#\n#\u9009\u62e9\u56de\u6eda\u70b9\necho \"Available backups:\"\nls -la data/db-backups/full/ | tail -10\n\n\u9009\u62e9\u56de\u6eda\u70b9\necho \"Available backups:\"\nls -la data/db-backups/full/ | tail -10\n#\n#\u63d0\u793a\u7528\u6237\u9009\u62e9\u5907\u4efd\u6587\u4ef6\nread -p \"Enter backup file to restore (e.g., football_prediction_dev_20250925_120000.sql): \" BACKUP_FILE\n\nif [ ! -f \"data/db-backups/full/$BACKUP_FILE\" ]; then\n    echo \"\u274c Backup file not found: $BACKUP_FILE\"\n    exit 1\nfi\n\n\u63d0\u793a\u7528\u6237\u9009\u62e9\u5907\u4efd\u6587\u4ef6\nread -p \"Enter backup file to restore (e.g., football_prediction_dev_20250925_120000.sql): \" BACKUP_FILE\n\nif [ ! -f \"data/db-backups/full/$BACKUP_FILE\" ]; then\n    echo \"\u274c Backup file not found: $BACKUP_FILE\"\n    exit 1\nfi\n#\n#\u6267\u884c\u56de\u6eda\necho \"Starting database restore from $BACKUP_FILE...\"\n\n\u6267\u884c\u56de\u6eda\necho \"Starting database restore from $BACKUP_FILE...\"\n#\n#\u521b\u5efa\u4e34\u65f6\u6570\u636e\u5e93\ndocker exec football_prediction_db psql -U postgres -c \"DROP DATABASE IF EXISTS football_prediction_dev_temp;\"\ndocker exec football_prediction_db psql -U postgres -c \"CREATE DATABASE football_prediction_dev_temp WITH TEMPLATE football_prediction_dev;\"\n\n\u521b\u5efa\u4e34\u65f6\u6570\u636e\u5e93\ndocker exec football_prediction_db psql -U postgres -c \"DROP DATABASE IF EXISTS football_prediction_dev_temp;\"\ndocker exec football_prediction_db psql -U postgres -c \"CREATE DATABASE football_prediction_dev_temp WITH TEMPLATE football_prediction_dev;\"\n#\n#\u6062\u590d\u5230\u4e34\u65f6\u6570\u636e\u5e93\ndocker exec -i football_prediction_db psql -U football_user -d football_prediction_dev_temp &lt; data/db-backups/full/$BACKUP_FILE\n\n\u6062\u590d\u5230\u4e34\u65f6\u6570\u636e\u5e93\ndocker exec -i football_prediction_db psql -U football_user -d football_prediction_dev_temp &lt; data/db-backups/full/$BACKUP_FILE\n#\n#\u9a8c\u8bc1\u6062\u590d\u7684\u6570\u636e\necho \"Verifying restored data...\"\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev_temp -c \"SELECT COUNT(*) FROM matches;\"\n\n\u9a8c\u8bc1\u6062\u590d\u7684\u6570\u636e\necho \"Verifying restored data...\"\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev_temp -c \"SELECT COUNT(*) FROM matches;\"\n#\n#\u5982\u679c\u9a8c\u8bc1\u6210\u529f\uff0c\u66ff\u6362\u539f\u6570\u636e\u5e93\necho \"Replacing production database...\"\ndocker exec football_prediction_db psql -U postgres -c \"DROP DATABASE football_prediction_dev;\"\ndocker exec football_prediction_db psql -U postgres -c \"ALTER DATABASE football_prediction_dev_temp RENAME TO football_prediction_dev;\"\n\n\u5982\u679c\u9a8c\u8bc1\u6210\u529f\uff0c\u66ff\u6362\u539f\u6570\u636e\u5e93\necho \"Replacing production database...\"\ndocker exec football_prediction_db psql -U postgres -c \"DROP DATABASE football_prediction_dev;\"\ndocker exec football_prediction_db psql -U postgres -c \"ALTER DATABASE football_prediction_dev_temp RENAME TO football_prediction_dev;\"\n#\n#\u91cd\u65b0\u542f\u52a8\u5e94\u7528\u670d\u52a1\necho \"Restarting application services...\"\ndocker-compose up -d app celery-worker celery-beat\n\n\u91cd\u65b0\u542f\u52a8\u5e94\u7528\u670d\u52a1\necho \"Restarting application services...\"\ndocker-compose up -d app celery-worker celery-beat\n#\n#\u7b49\u5f85\u670d\u52a1\u542f\u52a8\nsleep 30\n\n\u7b49\u5f85\u670d\u52a1\u542f\u52a8\nsleep 30\n#\n#\u9a8c\u8bc1\u670d\u52a1\u72b6\u6001\necho \"Verifying service health...\"\ncurl -f http://localhost:8000/health\n\necho \"\u2705 Database rollback completed successfully at $(date)\"\nEOF\n\n\u9a8c\u8bc1\u670d\u52a1\u72b6\u6001\necho \"Verifying service health...\"\ncurl -f http://localhost:8000/health\n\necho \"\u2705 Database rollback completed successfully at $(date)\"\nEOF\n#\n#\u4f7f\u811a\u672c\u53ef\u6267\u884c\nchmod +x db_rollback.sh\n\n\u4f7f\u811a\u672c\u53ef\u6267\u884c\nchmod +x db_rollback.sh\n#\n#=============================================================================\n=============================================================================#\n#3. \u6267\u884c\u6570\u636e\u5e93\u56de\u6eda\n3. \u6267\u884c\u6570\u636e\u5e93\u56de\u6eda#\n#=============================================================================\n\n=============================================================================\n#\n#\u6ce8\u610f\uff1a\u8fd9\u662f\u4e00\u4e2a\u5371\u9669\u64cd\u4f5c\uff0c\u8bf7\u8c28\u614e\u6267\u884c\n\u6ce8\u610f\uff1a\u8fd9\u662f\u4e00\u4e2a\u5371\u9669\u64cd\u4f5c\uff0c\u8bf7\u8c28\u614e\u6267\u884c#\n#./db_rollback.sh\n\n./db_rollback.sh\n#\n#=============================================================================\n=============================================================================#\n#4. \u4f7f\u7528\u65f6\u95f4\u70b9\u6062\u590d (PITR)\n4. \u4f7f\u7528\u65f6\u95f4\u70b9\u6062\u590d (PITR)#\n#=============================================================================\n\n=============================================================================\n#\n#\u5982\u679c\u542f\u7528\u4e86WAL\u5f52\u6863\uff0c\u53ef\u4ee5\u4f7f\u7528\u65f6\u95f4\u70b9\u6062\u590d\ncat &gt; point_in_time_recovery.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Point-in-Time Recovery Started ===\"\n\n\u5982\u679c\u542f\u7528\u4e86WAL\u5f52\u6863\uff0c\u53ef\u4ee5\u4f7f\u7528\u65f6\u95f4\u70b9\u6062\u590d\ncat &gt; point_in_time_recovery.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Point-in-Time Recovery Started ===\"\n#\n#\u505c\u6b62\u5e94\u7528\ndocker-compose stop app celery-worker celery-beat\n\n\u505c\u6b62\u5e94\u7528\ndocker-compose stop app celery-worker celery-beat\n#\n#\u521b\u5efa\u6062\u590d\u76ee\u5f55\nmkdir -p recovery/$(date +%Y%m%d_%H%M%S)\ncd recovery/$(date +%Y%m%d_%H%M%S)\n\n\u521b\u5efa\u6062\u590d\u76ee\u5f55\nmkdir -p recovery/$(date +%Y%m%d_%H%M%S)\ncd recovery/$(date +%Y%m%d_%H%M%S)\n#\n#\u590d\u5236\u5907\u4efd\u6587\u4ef6\ncp ../../data/db-backups/full/football_prediction_dev_20250925_120000.sql .\n\n\u590d\u5236\u5907\u4efd\u6587\u4ef6\ncp ../../data/db-backups/full/football_prediction_dev_20250925_120000.sql .\n#\n#\u8bbe\u7f6e\u6062\u590d\u65f6\u95f4\nread -p \"Enter recovery time (YYYY-MM-DD HH:MM:SS): \" RECOVERY_TIME\n\n\u8bbe\u7f6e\u6062\u590d\u65f6\u95f4\nread -p \"Enter recovery time (YYYY-MM-DD HH:MM:SS): \" RECOVERY_TIME\n#\n#\u521b\u5efa\u6062\u590d\u914d\u7f6e\u6587\u4ef6\ncat &gt; recovery.conf &lt;&lt; EOF\nrestore_command = 'cp /backups/wal/%f %p'\nrecovery_target_time = '$RECOVERY_TIME'\nrecovery_target_action = 'promote'\nEOF\n\n\u521b\u5efa\u6062\u590d\u914d\u7f6e\u6587\u4ef6\ncat &gt; recovery.conf &lt;&lt; EOF\nrestore_command = 'cp /backups/wal/%f %p'\nrecovery_target_time = '$RECOVERY_TIME'\nrecovery_target_action = 'promote'\nEOF\n#\n#\u6267\u884c\u6062\u590d\necho \"Starting point-in-time recovery...\"\ndocker exec football_prediction_db sh -c \"\n    # \u505c\u6b62PostgreSQL\n    pg_ctl stop -D /var/lib/postgresql/data\n\n    # \u6062\u590d\u57fa\u7840\u5907\u4efd\n    rm -rf /var/lib/postgresql/data/*\n    initdb -D /var/lib/postgresql/data\n\n    # \u914d\u7f6e\u6062\u590d\n    cp recovery.conf /var/lib/postgresql/data/\n\n    # \u542f\u52a8\u6062\u590d\u6a21\u5f0f\n    pg_ctl start -D /var/lib/postgresql/data\n\n    # \u7b49\u5f85\u6062\u590d\u5b8c\u6210\n    while [ ! -f /var/lib/postgresql/data/recovery.done ]; do\n        sleep 5\n    done\n\n    # \u91cd\u542f\u4e3a\u6b63\u5e38\u6a21\u5f0f\n    pg_ctl restart -D /var/lib/postgresql/data\n\"\n\necho \"\u2705 Point-in-time recovery completed\"\nEOF\n\nchmod +x point_in_time_recovery.sh\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#alembic-downgrade","title":"\ud83d\udd04 Alembic Downgrade \u793a\u4f8b","text":"<pre><code>\u6267\u884c\u6062\u590d\necho \"Starting point-in-time recovery...\"\ndocker exec football_prediction_db sh -c \"\n    # \u505c\u6b62PostgreSQL\n    pg_ctl stop -D /var/lib/postgresql/data\n\n    # \u6062\u590d\u57fa\u7840\u5907\u4efd\n    rm -rf /var/lib/postgresql/data/*\n    initdb -D /var/lib/postgresql/data\n\n    # \u914d\u7f6e\u6062\u590d\n    cp recovery.conf /var/lib/postgresql/data/\n\n    # \u542f\u52a8\u6062\u590d\u6a21\u5f0f\n    pg_ctl start -D /var/lib/postgresql/data\n\n    # \u7b49\u5f85\u6062\u590d\u5b8c\u6210\n    while [ ! -f /var/lib/postgresql/data/recovery.done ]; do\n        sleep 5\n    done\n\n    # \u91cd\u542f\u4e3a\u6b63\u5e38\u6a21\u5f0f\n    pg_ctl restart -D /var/lib/postgresql/data\n\"\n\necho \"\u2705 Point-in-time recovery completed\"\nEOF\n\nchmod +x point_in_time_recovery.sh\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#alembic-downgrade_1","title":"\ud83d\udd04 Alembic Downgrade \u793a\u4f8b","text":"<pre><code>#=============================================================================\n=============================================================================#\n#1. \u68c0\u67e5\u5f53\u524d\u8fc1\u79fb\u72b6\u6001\n1. \u68c0\u67e5\u5f53\u524d\u8fc1\u79fb\u72b6\u6001#\n#=============================================================================\n\n=============================================================================\n#\n#\u67e5\u770b\u5f53\u524d\u8fc1\u79fb\u7248\u672c\nalembic current\n\n\u67e5\u770b\u5f53\u524d\u8fc1\u79fb\u7248\u672c\nalembic current\n#\n#\u67e5\u770b\u8fc1\u79fb\u5386\u53f2\nalembic history --verbose\n\n\u67e5\u770b\u8fc1\u79fb\u5386\u53f2\nalembic history --verbose\n#\n#=============================================================================\n=============================================================================#\n#2. \u6267\u884c\u56de\u6eda\u8fc1\u79fb\n2. \u6267\u884c\u56de\u6eda\u8fc1\u79fb#\n#=============================================================================\n\n=============================================================================\n#\n#\u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\nalembic downgrade -1\n\n\u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\nalembic downgrade -1\n#\n#\u56de\u6eda\u5230\u7279\u5b9a\u7248\u672c\nalembic downgrade d56c8d0d5aa0  # \u56de\u6eda\u5230\u521d\u59cb\u7248\u672c\n\n\u56de\u6eda\u5230\u7279\u5b9a\u7248\u672c\nalembic downgrade d56c8d0d5aa0  # \u56de\u6eda\u5230\u521d\u59cb\u7248\u672c\n#\n#\u67e5\u770b\u56de\u6eda\u540e\u7684\u72b6\u6001\nalembic current\n\n\u67e5\u770b\u56de\u6eda\u540e\u7684\u72b6\u6001\nalembic current\n#\n#=============================================================================\n=============================================================================#\n#3. \u9a8c\u8bc1\u56de\u6eda\u7ed3\u679c\n3. \u9a8c\u8bc1\u56de\u6eda\u7ed3\u679c#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u6570\u636e\u5e93\u8868\u7ed3\u6784\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nSELECT table_name\nFROM information_schema.tables\nWHERE table_schema = 'public'\nORDER BY table_name;\n\"\n\n\u68c0\u67e5\u6570\u636e\u5e93\u8868\u7ed3\u6784\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nSELECT table_name\nFROM information_schema.tables\nWHERE table_schema = 'public'\nORDER BY table_name;\n\"\n#\n#\u68c0\u67e5\u7d22\u5f15\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nSELECT indexname, tablename\nFROM pg_indexes\nWHERE schemaname = 'public'\nORDER BY tablename, indexname;\n\"\n\n\u68c0\u67e5\u7d22\u5f15\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nSELECT indexname, tablename\nFROM pg_indexes\nWHERE schemaname = 'public'\nORDER BY tablename, indexname;\n\"\n#\n#=============================================================================\n=============================================================================#\n#4. \u6279\u91cf\u8fc1\u79fb\u56de\u6eda\u811a\u672c\n4. \u6279\u91cf\u8fc1\u79fb\u56de\u6eda\u811a\u672c#\n#=============================================================================\n\ncat &gt; migration_rollback.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Migration Rollback Script ===\"\n\n=============================================================================\n\ncat &gt; migration_rollback.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Migration Rollback Script ===\"\n#\n#\u8bb0\u5f55\u5f53\u524d\u72b6\u6001\necho \"Current migration status:\"\nalembic current &gt; migration_status_before.txt\n\n\u8bb0\u5f55\u5f53\u524d\u72b6\u6001\necho \"Current migration status:\"\nalembic current &gt; migration_status_before.txt\n#\n#\u83b7\u53d6\u76ee\u6807\u7248\u672c\uff08\u56de\u6eda3\u4e2a\u7248\u672c\uff09\nTARGET_VERSION=$(alembic history | head -4 | tail -1 | awk '{print $1}')\necho \"Target version: $TARGET_VERSION\"\n\n\u83b7\u53d6\u76ee\u6807\u7248\u672c\uff08\u56de\u6eda3\u4e2a\u7248\u672c\uff09\nTARGET_VERSION=$(alembic history | head -4 | tail -1 | awk '{print $1}')\necho \"Target version: $TARGET_VERSION\"\n#\n#\u6267\u884c\u56de\u6eda\necho \"Executing migration rollback...\"\nalembic downgrade $TARGET_VERSION\n\n\u6267\u884c\u56de\u6eda\necho \"Executing migration rollback...\"\nalembic downgrade $TARGET_VERSION\n#\n#\u9a8c\u8bc1\u56de\u6eda\necho \"Verifying rollback...\"\nalembic current &gt; migration_status_after.txt\n\n\u9a8c\u8bc1\u56de\u6eda\necho \"Verifying rollback...\"\nalembic current &gt; migration_status_after.txt\n#\n#\u6bd4\u8f83\u56de\u6eda\u524d\u540e\u72b6\u6001\necho \"Migration status comparison:\"\necho \"Before: $(cat migration_status_before.txt)\"\necho \"After: $(cat migration_status_after.txt)\"\n\n\u6bd4\u8f83\u56de\u6eda\u524d\u540e\u72b6\u6001\necho \"Migration status comparison:\"\necho \"Before: $(cat migration_status_before.txt)\"\necho \"After: $(cat migration_status_after.txt)\"\n#\n#\u6570\u636e\u5e93\u7ed3\u6784\u9a8c\u8bc1\necho \"Database structure verification:\"\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nSELECT COUNT(*) as table_count FROM information_schema.tables WHERE table_schema = 'public';\n\"\n\necho \"\u2705 Migration rollback completed\"\nEOF\n\nchmod +x migration_rollback.sh\n</code></pre> <p>\u6570\u636e\u5e93\u7ed3\u6784\u9a8c\u8bc1 echo \"Database structure verification:\" docker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \" SELECT COUNT(*) as table_count FROM information_schema.tables WHERE table_schema = 'public'; \"</p> <p>echo \"\u2705 Migration rollback completed\" EOF</p> <p>chmod +x migration_rollback.sh ```</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_3","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#3","title":"3. \u914d\u7f6e\u56de\u6eda","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_4","title":"\u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u914d\u7f6e\u56de\u6eda\u51c6\u5907","text":"<ul> <li> \u914d\u7f6e\u5907\u4efd: \u5f53\u524d\u73af\u5883\u914d\u7f6e\u6587\u4ef6\u5df2\u5907\u4efd</li> <li> \u7248\u672c\u63a7\u5236: \u914d\u7f6e\u6587\u4ef6\u5728\u7248\u672c\u63a7\u5236\u4e2d</li> <li> \u56de\u6eda\u811a\u672c: \u914d\u7f6e\u56de\u6eda\u811a\u672c\u51c6\u5907\u5c31\u7eea</li> <li> \u73af\u5883\u53d8\u91cf: \u73af\u5883\u53d8\u91cf\u56de\u6eda\u65b9\u6848\u660e\u786e</li> <li> \u914d\u7f6e\u9a8c\u8bc1: \u914d\u7f6e\u56de\u6eda\u540e\u7684\u9a8c\u8bc1\u65b9\u6cd5</li> </ul>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_5","title":"\ud83d\udd04 \u73af\u5883\u53d8\u91cf\u6062\u590d\u6d41\u7a0b","text":"<p>```bash 3. \u914d\u7f6e\u56de\u6eda</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_6","title":"\u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u914d\u7f6e\u56de\u6eda\u51c6\u5907","text":"<ul> <li> \u914d\u7f6e\u5907\u4efd: \u5f53\u524d\u73af\u5883\u914d\u7f6e\u6587\u4ef6\u5df2\u5907\u4efd</li> <li> \u7248\u672c\u63a7\u5236: \u914d\u7f6e\u6587\u4ef6\u5728\u7248\u672c\u63a7\u5236\u4e2d</li> <li> \u56de\u6eda\u811a\u672c: \u914d\u7f6e\u56de\u6eda\u811a\u672c\u51c6\u5907\u5c31\u7eea</li> <li> \u73af\u5883\u53d8\u91cf: \u73af\u5883\u53d8\u91cf\u56de\u6eda\u65b9\u6848\u660e\u786e</li> <li> \u914d\u7f6e\u9a8c\u8bc1: \u914d\u7f6e\u56de\u6eda\u540e\u7684\u9a8c\u8bc1\u65b9\u6cd5</li> </ul>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_7","title":"\ud83d\udd04 \u73af\u5883\u53d8\u91cf\u6062\u590d\u6d41\u7a0b","text":"<p>```bash#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_8","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#1","title":"1. \u914d\u7f6e\u6587\u4ef6\u5907\u4efd","text":"<ol> <li>\u914d\u7f6e\u6587\u4ef6\u5907\u4efd#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_9","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_10","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_11","title":"\u521b\u5efa\u914d\u7f6e\u5907\u4efd\u76ee\u5f55","text":"<p>mkdir -p config_backup/$(date +%Y%m%d_%H%M%S)</p> <p>\u521b\u5efa\u914d\u7f6e\u5907\u4efd\u76ee\u5f55 mkdir -p config_backup/$(date +%Y%m%d_%H%M%S)</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_12","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_13","title":"\u5907\u4efd\u5f53\u524d\u914d\u7f6e","text":"<p>cp .env.production config_backup/(date +%Y%m%d_%H%M%S)/ cp docker-compose.yml config_backup/(date +%Y%m%d_%H%M%S)/ cp configs/* config_backup/$(date +%Y%m%d_%H%M%S)/</p> <p>echo \"Configuration backed up to config_backup/$(date +%Y%m%d_%H%M%S)/\"</p> <p>\u5907\u4efd\u5f53\u524d\u914d\u7f6e cp .env.production config_backup/(date +%Y%m%d_%H%M%S)/ cp docker-compose.yml config_backup/(date +%Y%m%d_%H%M%S)/ cp configs/* config_backup/$(date +%Y%m%d_%H%M%S)/</p> <p>echo \"Configuration backed up to config_backup/$(date +%Y%m%d_%H%M%S)/\"</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_14","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_15","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#2","title":"2. \u914d\u7f6e\u56de\u6eda\u811a\u672c","text":"<ol> <li>\u914d\u7f6e\u56de\u6eda\u811a\u672c#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_16","title":"=============================================================================","text":"<p>cat &gt; config_rollback.sh &lt;&lt; 'EOF'</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#binbash","title":"!/bin/bash","text":"<p>set -e</p> <p>echo \"=== Configuration Rollback Script ===\"</p> <p>=============================================================================</p> <p>cat &gt; config_rollback.sh &lt;&lt; 'EOF'</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#binbash_1","title":"!/bin/bash","text":"<p>set -e</p> <p>echo \"=== Configuration Rollback Script ===\"</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_17","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_18","title":"\u8bb0\u5f55\u5f53\u524d\u914d\u7f6e","text":"<p>echo \"Current configuration backup:\" ls -la config_backup/ | tail -5</p> <p>\u8bb0\u5f55\u5f53\u524d\u914d\u7f6e echo \"Current configuration backup:\" ls -la config_backup/ | tail -5</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_19","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_20","title":"\u9009\u62e9\u56de\u6eda\u70b9","text":"<p>read -p \"Enter backup timestamp to restore (e.g., 20250925_120000): \" BACKUP_TIMESTAMP</p> <p>BACKUP_DIR=\"config_backup/$BACKUP_TIMESTAMP\"</p> <p>if [ ! -d \"$BACKUP_DIR\" ]; then     echo \"\u274c Backup directory not found: $BACKUP_DIR\"     exit 1 fi</p> <p>\u9009\u62e9\u56de\u6eda\u70b9 read -p \"Enter backup timestamp to restore (e.g., 20250925_120000): \" BACKUP_TIMESTAMP</p> <p>BACKUP_DIR=\"config_backup/$BACKUP_TIMESTAMP\"</p> <p>if [ ! -d \"$BACKUP_DIR\" ]; then     echo \"\u274c Backup directory not found: $BACKUP_DIR\"     exit 1 fi</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_21","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_22","title":"\u9a8c\u8bc1\u5907\u4efd\u6587\u4ef6","text":"<p>echo \"Verifying backup files...\" for file in .env.production docker-compose.yml; do     if [ ! -f \"BACKUP_DIR/file\" ]; then         echo \"\u274c Missing backup file: $file\"         exit 1     fi done</p> <p>\u9a8c\u8bc1\u5907\u4efd\u6587\u4ef6 echo \"Verifying backup files...\" for file in .env.production docker-compose.yml; do     if [ ! -f \"BACKUP_DIR/file\" ]; then         echo \"\u274c Missing backup file: $file\"         exit 1     fi done</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_23","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_24","title":"\u505c\u6b62\u670d\u52a1","text":"<p>echo \"Stopping services...\" docker-compose down</p> <p>\u505c\u6b62\u670d\u52a1 echo \"Stopping services...\" docker-compose down</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_25","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_26","title":"\u6062\u590d\u914d\u7f6e\u6587\u4ef6","text":"<p>echo \"Restoring configuration files...\" cp \"BACKUP_DIR/.env.production\" .env.production cp \"BACKUP_DIR/docker-compose.yml\" docker-compose.yml</p> <p>if [ -d \"BACKUP_DIR/configs\" ]; then     cp -r \"BACKUP_DIR/configs/\"* configs/ fi</p> <p>\u6062\u590d\u914d\u7f6e\u6587\u4ef6 echo \"Restoring configuration files...\" cp \"BACKUP_DIR/.env.production\" .env.production cp \"BACKUP_DIR/docker-compose.yml\" docker-compose.yml</p> <p>if [ -d \"BACKUP_DIR/configs\" ]; then     cp -r \"BACKUP_DIR/configs/\"* configs/ fi</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_27","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_28","title":"\u9a8c\u8bc1\u6062\u590d\u7684\u914d\u7f6e","text":"<p>echo \"Verifying restored configuration...\" echo \"Environment file:\" grep -E \"ENVIRONMENT|DB_PASSWORD|REDIS_PASSWORD\" .env.production</p> <p>echo \"Docker Compose configuration:\" grep -E \"image.*football-predict\" docker-compose.yml</p> <p>\u9a8c\u8bc1\u6062\u590d\u7684\u914d\u7f6e echo \"Verifying restored configuration...\" echo \"Environment file:\" grep -E \"ENVIRONMENT|DB_PASSWORD|REDIS_PASSWORD\" .env.production</p> <p>echo \"Docker Compose configuration:\" grep -E \"image.*football-predict\" docker-compose.yml</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_29","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_30","title":"\u91cd\u65b0\u542f\u52a8\u670d\u52a1","text":"<p>echo \"Restarting services with restored configuration...\" docker-compose up -d</p> <p>\u91cd\u65b0\u542f\u52a8\u670d\u52a1 echo \"Restarting services with restored configuration...\" docker-compose up -d</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_31","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_32","title":"\u7b49\u5f85\u670d\u52a1\u542f\u52a8","text":"<p>sleep 30</p> <p>\u7b49\u5f85\u670d\u52a1\u542f\u52a8 sleep 30</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_33","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_34","title":"\u9a8c\u8bc1\u670d\u52a1\u72b6\u6001","text":"<p>echo \"Verifying service health...\" curl -f http://localhost:8000/health</p> <p>echo \"\u2705 Configuration rollback completed successfully\" EOF</p> <p>chmod +x config_rollback.sh</p> <p>\u9a8c\u8bc1\u670d\u52a1\u72b6\u6001 echo \"Verifying service health...\" curl -f http://localhost:8000/health</p> <p>echo \"\u2705 Configuration rollback completed successfully\" EOF</p> <p>chmod +x config_rollback.sh</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_35","title":"Part 04","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#_36","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_04/#3_1","title":"3. \u90e8\u5206\u914d\u7f6e\u56de\u6eda","text":"<ol> <li>\u90e8\u5206\u914d\u7f6e\u56de\u6eda#</li> </ol>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/","title":"=============================================================================","text":"<p>cat &gt; partial_config_rollback.sh &lt;&lt; 'EOF'</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#binbash","title":"!/bin/bash","text":"<p>set -e</p> <p>echo \"=== Partial Configuration Rollback ===\"</p> <p>=============================================================================</p> <p>cat &gt; partial_config_rollback.sh &lt;&lt; 'EOF'</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#binbash_1","title":"!/bin/bash","text":"<p>set -e</p> <p>echo \"=== Partial Configuration Rollback ===\"</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_2","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_3","title":"\u5907\u4efd\u5f53\u524d\u7279\u5b9a\u914d\u7f6e","text":"<p>echo \"Backing up specific configurations...\" cp .env.production .env.production.backup_$(date +%Y%m%d_%H%M%S)</p> <p>\u5907\u4efd\u5f53\u524d\u7279\u5b9a\u914d\u7f6e echo \"Backing up specific configurations...\" cp .env.production .env.production.backup_$(date +%Y%m%d_%H%M%S)</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_4","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_5","title":"\u9009\u62e9\u56de\u6eda\u9879\u76ee","text":"<p>echo \"Available configuration items to rollback:\" echo \"1. Database passwords\" echo \"2. Redis configuration\" echo \"3. API endpoints\" echo \"4. Monitoring settings\" echo \"5. Model settings\"</p> <p>read -p \"Enter item number to rollback (1-5): \" ITEM_NUMBER</p> <p>case $ITEM_NUMBER in     1)         echo \"Rolling back database passwords...\"         # \u4ece\u5907\u4efd\u6062\u590d\u6570\u636e\u5e93\u5bc6\u7801         sed -i 's/DB_PASSWORD=./DB_PASSWORD=previous_password_here/' .env.production         sed -i 's/POSTGRES_PASSWORD=./POSTGRES_PASSWORD=previous_postgres_password_here/' .env.production         ;;     2)         echo \"Rolling back Redis configuration...\"         sed -i 's/REDIS_PASSWORD=./REDIS_PASSWORD=previous_redis_password_here/' .env.production         sed -i 's/REDIS_URL=./REDIS_URL=redis://:previous_redis_password_here@redis:6379\\/0/' .env.production         ;;     3)         echo \"Rolling back API endpoints...\"         sed -i 's/API_HOST=./API_HOST=0.0.0.0/' .env.production         sed -i 's/API_PORT=./API_PORT=8000/' .env.production         ;;     4)         echo \"Rolling back monitoring settings...\"         sed -i 's/GRAFANA_ADMIN_PASSWORD=./GRAFANA_ADMIN_PASSWORD=previous_grafana_password/' .env.production         ;;     5)         echo \"Rolling back model settings...\"         sed -i 's/MODEL_CACHE_TTL_HOURS=./MODEL_CACHE_TTL_HOURS=1/' .env.production         sed -i 's/PRODUCTION_MODEL_VERSION=.*/PRODUCTION_MODEL_VERSION=previous_version/' .env.production         ;;     *)         echo \"Invalid item number\"         exit 1         ;; esac</p> <p>\u9009\u62e9\u56de\u6eda\u9879\u76ee echo \"Available configuration items to rollback:\" echo \"1. Database passwords\" echo \"2. Redis configuration\" echo \"3. API endpoints\" echo \"4. Monitoring settings\" echo \"5. Model settings\"</p> <p>read -p \"Enter item number to rollback (1-5): \" ITEM_NUMBER</p> <p>case $ITEM_NUMBER in     1)         echo \"Rolling back database passwords...\"         # \u4ece\u5907\u4efd\u6062\u590d\u6570\u636e\u5e93\u5bc6\u7801         sed -i 's/DB_PASSWORD=./DB_PASSWORD=previous_password_here/' .env.production         sed -i 's/POSTGRES_PASSWORD=./POSTGRES_PASSWORD=previous_postgres_password_here/' .env.production         ;;     2)         echo \"Rolling back Redis configuration...\"         sed -i 's/REDIS_PASSWORD=./REDIS_PASSWORD=previous_redis_password_here/' .env.production         sed -i 's/REDIS_URL=./REDIS_URL=redis://:previous_redis_password_here@redis:6379\\/0/' .env.production         ;;     3)         echo \"Rolling back API endpoints...\"         sed -i 's/API_HOST=./API_HOST=0.0.0.0/' .env.production         sed -i 's/API_PORT=./API_PORT=8000/' .env.production         ;;     4)         echo \"Rolling back monitoring settings...\"         sed -i 's/GRAFANA_ADMIN_PASSWORD=./GRAFANA_ADMIN_PASSWORD=previous_grafana_password/' .env.production         ;;     5)         echo \"Rolling back model settings...\"         sed -i 's/MODEL_CACHE_TTL_HOURS=./MODEL_CACHE_TTL_HOURS=1/' .env.production         sed -i 's/PRODUCTION_MODEL_VERSION=.*/PRODUCTION_MODEL_VERSION=previous_version/' .env.production         ;;     *)         echo \"Invalid item number\"         exit 1         ;; esac</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_6","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_7","title":"\u91cd\u542f\u76f8\u5173\u670d\u52a1","text":"<p>echo \"Restarting affected services...\" docker-compose restart app celery-worker celery-beat</p> <p>\u91cd\u542f\u76f8\u5173\u670d\u52a1 echo \"Restarting affected services...\" docker-compose restart app celery-worker celery-beat</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_8","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_9","title":"\u9a8c\u8bc1\u66f4\u6539","text":"<p>echo \"Verifying configuration changes...\" curl -f http://localhost:8000/health</p> <p>echo \"\u2705 Partial configuration rollback completed\" EOF</p> <p>chmod +x partial_config_rollback.sh <pre><code>\u9a8c\u8bc1\u66f4\u6539\necho \"Verifying configuration changes...\"\ncurl -f http://localhost:8000/health\n\necho \"\u2705 Partial configuration rollback completed\"\nEOF\n\nchmod +x partial_config_rollback.sh\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_10","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#4","title":"4. \u9a8c\u8bc1\u56de\u6eda\u6210\u529f\u7684\u68c0\u67e5\u6b65\u9aa4","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_11","title":"\u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u56de\u6eda\u9a8c\u8bc1","text":"<ul> <li> \u670d\u52a1\u72b6\u6001: \u6240\u6709\u670d\u52a1\u6b63\u5e38\u8fd0\u884c</li> <li> \u6570\u636e\u4e00\u81f4\u6027: \u6570\u636e\u56de\u6eda\u540e\u4e00\u81f4\u6027\u9a8c\u8bc1</li> <li> \u529f\u80fd\u9a8c\u8bc1: \u6838\u5fc3\u529f\u80fd\u6b63\u5e38\u5de5\u4f5c</li> <li> \u6027\u80fd\u6307\u6807: \u6027\u80fd\u6307\u6807\u6062\u590d\u5230\u6b63\u5e38\u8303\u56f4</li> <li> \u76d1\u63a7\u544a\u8b66: \u76d1\u63a7\u7cfb\u7edf\u6b63\u5e38\u5de5\u4f5c</li> <li> \u65e5\u5fd7\u68c0\u67e5: \u9519\u8bef\u65e5\u5fd7\u5728\u6b63\u5e38\u8303\u56f4\u5185</li> </ul>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_12","title":"\ud83e\uddea \u56de\u6eda\u540e\u9a8c\u8bc1\u811a\u672c","text":"<pre><code>4. \u9a8c\u8bc1\u56de\u6eda\u6210\u529f\u7684\u68c0\u67e5\u6b65\u9aa4\n\n#### \u2705 \u68c0\u67e5\u6e05\u5355\uff1a\u56de\u6eda\u9a8c\u8bc1\n\n- [ ] **\u670d\u52a1\u72b6\u6001**: \u6240\u6709\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\n- [ ] **\u6570\u636e\u4e00\u81f4\u6027**: \u6570\u636e\u56de\u6eda\u540e\u4e00\u81f4\u6027\u9a8c\u8bc1\n- [ ] **\u529f\u80fd\u9a8c\u8bc1**: \u6838\u5fc3\u529f\u80fd\u6b63\u5e38\u5de5\u4f5c\n- [ ] **\u6027\u80fd\u6307\u6807**: \u6027\u80fd\u6307\u6807\u6062\u590d\u5230\u6b63\u5e38\u8303\u56f4\n- [ ] **\u76d1\u63a7\u544a\u8b66**: \u76d1\u63a7\u7cfb\u7edf\u6b63\u5e38\u5de5\u4f5c\n- [ ] **\u65e5\u5fd7\u68c0\u67e5**: \u9519\u8bef\u65e5\u5fd7\u5728\u6b63\u5e38\u8303\u56f4\u5185\n\n#### \ud83e\uddea \u56de\u6eda\u540e\u9a8c\u8bc1\u811a\u672c\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u7efc\u5408\u56de\u6eda\u9a8c\u8bc1\u811a\u672c\n1. \u7efc\u5408\u56de\u6eda\u9a8c\u8bc1\u811a\u672c#\n#=============================================================================\n\ncat &gt; verify_rollback.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Rollback Verification Script ===\"\necho \"Verification started at $(date)\"\n\n=============================================================================\n\ncat &gt; verify_rollback.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Rollback Verification Script ===\"\necho \"Verification started at $(date)\"\n#\n#\u521b\u5efa\u9a8c\u8bc1\u62a5\u544a\u6587\u4ef6\nREPORT_FILE=\"rollback_verification_$(date +%Y%m%d_%H%M%S).txt\"\necho \"Rollback Verification Report\" &gt; $REPORT_FILE\necho \"Timestamp: $(date)\" &gt;&gt; $REPORT_FILE\necho \"================================\" &gt;&gt; $REPORT_FILE\n\n\u521b\u5efa\u9a8c\u8bc1\u62a5\u544a\u6587\u4ef6\nREPORT_FILE=\"rollback_verification_$(date +%Y%m%d_%H%M%S).txt\"\necho \"Rollback Verification Report\" &gt; $REPORT_FILE\necho \"Timestamp: $(date)\" &gt;&gt; $REPORT_FILE\necho \"================================\" &gt;&gt; $REPORT_FILE\n#\n#\u521d\u59cb\u5316\u9a8c\u8bc1\u8ba1\u6570\u5668\nTOTAL_CHECKS=0\nPASSED_CHECKS=0\nFAILED_CHECKS=0\n\n\u521d\u59cb\u5316\u9a8c\u8bc1\u8ba1\u6570\u5668\nTOTAL_CHECKS=0\nPASSED_CHECKS=0\nFAILED_CHECKS=0\n#\n#\u9a8c\u8bc1\u51fd\u6570\nverify() {\n    local check_name=\"$1\"\n    local check_command=\"$2\"\n\n    echo \"Verifying: $check_name\"\n    echo \"Checking: $check_name\" &gt;&gt; $REPORT_FILE\n\n    TOTAL_CHECKS=$((TOTAL_CHECKS + 1))\n\n    if eval \"$check_command\" &gt;&gt; $REPORT_FILE 2&gt;&amp;1; then\n        echo \"\u2705 PASSED: $check_name\"\n        echo \"Status: PASSED\" &gt;&gt; $REPORT_FILE\n        echo \"\" &gt;&gt; $REPORT_FILE\n        PASSED_CHECKS=$((PASSED_CHECKS + 1))\n    else\n        echo \"\u274c FAILED: $check_name\"\n        echo \"Status: FAILED\" &gt;&gt; $REPORT_FILE\n        echo \"\" &gt;&gt; $REPORT_FILE\n        FAILED_CHECKS=$((FAILED_CHECKS + 1))\n    fi\n}\n\n\u9a8c\u8bc1\u51fd\u6570\nverify() {\n    local check_name=\"$1\"\n    local check_command=\"$2\"\n\n    echo \"Verifying: $check_name\"\n    echo \"Checking: $check_name\" &gt;&gt; $REPORT_FILE\n\n    TOTAL_CHECKS=$((TOTAL_CHECKS + 1))\n\n    if eval \"$check_command\" &gt;&gt; $REPORT_FILE 2&gt;&amp;1; then\n        echo \"\u2705 PASSED: $check_name\"\n        echo \"Status: PASSED\" &gt;&gt; $REPORT_FILE\n        echo \"\" &gt;&gt; $REPORT_FILE\n        PASSED_CHECKS=$((PASSED_CHECKS + 1))\n    else\n        echo \"\u274c FAILED: $check_name\"\n        echo \"Status: FAILED\" &gt;&gt; $REPORT_FILE\n        echo \"\" &gt;&gt; $REPORT_FILE\n        FAILED_CHECKS=$((FAILED_CHECKS + 1))\n    fi\n}\n#\n#=============================================================================\n=============================================================================#\n#1. \u670d\u52a1\u72b6\u6001\u9a8c\u8bc1\n1. \u670d\u52a1\u72b6\u6001\u9a8c\u8bc1#\n#=============================================================================\n\nverify \"Docker services status\" \"docker-compose ps | grep -q 'Up'\"\nverify \"Application service health\" \"curl -f http://localhost:8000/health\"\nverify \"Database connectivity\" \"docker exec football_prediction_db pg_isready -U football_user\"\nverify \"Redis connectivity\" \"docker exec football_prediction_redis redis-cli ping\"\nverify \"MLflow service\" \"curl -f http://localhost:5002/health\"\nverify \"Grafana service\" \"curl -f http://localhost:3000/api/health\"\n\n=============================================================================\n\nverify \"Docker services status\" \"docker-compose ps | grep -q 'Up'\"\nverify \"Application service health\" \"curl -f http://localhost:8000/health\"\nverify \"Database connectivity\" \"docker exec football_prediction_db pg_isready -U football_user\"\nverify \"Redis connectivity\" \"docker exec football_prediction_redis redis-cli ping\"\nverify \"MLflow service\" \"curl -f http://localhost:5002/health\"\nverify \"Grafana service\" \"curl -f http://localhost:3000/api/health\"\n#\n#=============================================================================\n=============================================================================#\n#2. \u6570\u636e\u4e00\u81f4\u6027\u9a8c\u8bc1\n2. \u6570\u636e\u4e00\u81f4\u6027\u9a8c\u8bc1#\n#=============================================================================\n\nverify \"Database tables exist\" \"docker exec football_prediction_db psql -U football_user -d football_prediction_dev -c 'SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = '\\\\\\\"public\\\\\\\";' | grep -q '[0-9]'\"\n\nverify \"Essential data present\" \"\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c 'SELECT COUNT(*) FROM leagues;' | grep -q '[0-9]'\n\"\n\nverify \"No data corruption\" \"\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c 'SELECT COUNT(*) FROM matches WHERE match_date &gt; now() + interval '1 year';' | grep -q '^0$'\n\"\n\n=============================================================================\n\nverify \"Database tables exist\" \"docker exec football_prediction_db psql -U football_user -d football_prediction_dev -c 'SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = '\\\\\\\"public\\\\\\\";' | grep -q '[0-9]'\"\n\nverify \"Essential data present\" \"\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c 'SELECT COUNT(*) FROM leagues;' | grep -q '[0-9]'\n\"\n\nverify \"No data corruption\" \"\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c 'SELECT COUNT(*) FROM matches WHERE match_date &gt; now() + interval '1 year';' | grep -q '^0$'\n\"\n#\n#=============================================================================\n=============================================================================#\n#3. \u529f\u80fd\u9a8c\u8bc1\n3. \u529f\u80fd\u9a8c\u8bc1#\n#=============================================================================\n\nverify \"API endpoints accessible\" \"curl -f http://localhost:8000/docs\"\nverify \"Prediction API functional\" \"\ncurl -X POST http://localhost:8000/api/v1/predictions/ \\\n  -H 'Content-Type: application/json' \\\n  -d '{\\\"match_id\\\": \\\"rollback_test\\\", \\\"home_team_id\\\": 1, \\\"away_team_id\\\": 2, \\\"league_id\\\": 1, \\\"match_date\\\": \\\"2025-09-25T15:00:00Z\\\"}' | grep -q 'prediction_id'\n\"\n\nverify \"Data retrieval working\" \"curl -f http://localhost:8000/api/v1/data/teams?limit=5\"\nverify \"Feature access working\" \"curl -f http://localhost:8000/api/v1/features/\"\n\n=============================================================================\n\nverify \"API endpoints accessible\" \"curl -f http://localhost:8000/docs\"\nverify \"Prediction API functional\" \"\ncurl -X POST http://localhost:8000/api/v1/predictions/ \\\n  -H 'Content-Type: application/json' \\\n  -d '{\\\"match_id\\\": \\\"rollback_test\\\", \\\"home_team_id\\\": 1, \\\"away_team_id\\\": 2, \\\"league_id\\\": 1, \\\"match_date\\\": \\\"2025-09-25T15:00:00Z\\\"}' | grep -q 'prediction_id'\n\"\n\nverify \"Data retrieval working\" \"curl -f http://localhost:8000/api/v1/data/teams?limit=5\"\nverify \"Feature access working\" \"curl -f http://localhost:8000/api/v1/features/\"\n#\n#=============================================================================\n=============================================================================#\n#4. \u6027\u80fd\u9a8c\u8bc1\n4. \u6027\u80fd\u9a8c\u8bc1#\n#=============================================================================\n\nverify \"Response time acceptable\" \"\nresponse_time=\\$(curl -o /dev/null -s -w '%{time_total}' http://localhost:8000/health)\necho \\\"Response time: \\$response_time seconds\\\"\nif (( \\$(echo \\\"\\$response_time &lt; 0.5\\\" | bc -l) )); then\n    exit 0\nelse\n    exit 1\nfi\n\"\n\nverify \"Memory usage normal\" \"\nmemory_usage=\\$(docker stats football_prediction_app --no-stream --format '{{.MemUsage}}' | head -1 | cut -d'%' -f1 | tr -d ' ')\necho \\\"Memory usage: \\$memory_usage%\\\"\nif [ \\\"\\$memory_usage\\\" -lt 80 ]; then\n    exit 0\nelse\n    exit 1\nfi\n\"\n\nverify \"CPU usage normal\" \"\ncpu_usage=\\$(docker stats football_prediction_app --no-stream --format '{{.CPUPerc}}' | head -1 | tr -d '%')\necho \\\"CPU usage: \\$cpu_usage%\\\"\nif (( \\$(echo \\\"\\$cpu_usage &lt; 80\\\" | bc -l) )); then\n    exit 0\nelse\n    exit 1\nfi\n\"\n\n=============================================================================\n\nverify \"Response time acceptable\" \"\nresponse_time=\\$(curl -o /dev/null -s -w '%{time_total}' http://localhost:8000/health)\necho \\\"Response time: \\$response_time seconds\\\"\nif (( \\$(echo \\\"\\$response_time &lt; 0.5\\\" | bc -l) )); then\n    exit 0\nelse\n    exit 1\nfi\n\"\n\nverify \"Memory usage normal\" \"\nmemory_usage=\\$(docker stats football_prediction_app --no-stream --format '{{.MemUsage}}' | head -1 | cut -d'%' -f1 | tr -d ' ')\necho \\\"Memory usage: \\$memory_usage%\\\"\nif [ \\\"\\$memory_usage\\\" -lt 80 ]; then\n    exit 0\nelse\n    exit 1\nfi\n\"\n\nverify \"CPU usage normal\" \"\ncpu_usage=\\$(docker stats football_prediction_app --no-stream --format '{{.CPUPerc}}' | head -1 | tr -d '%')\necho \\\"CPU usage: \\$cpu_usage%\\\"\nif (( \\$(echo \\\"\\$cpu_usage &lt; 80\\\" | bc -l) )); then\n    exit 0\nelse\n    exit 1\nfi\n\"\n#\n#=============================================================================\n=============================================================================#\n#5. \u76d1\u63a7\u9a8c\u8bc1\n5. \u76d1\u63a7\u9a8c\u8bc1#\n#=============================================================================\n\nverify \"Prometheus metrics available\" \"curl -f http://localhost:8000/metrics | grep -q 'football_predictions_total'\"\nverify \"Grafana accessible\" \"curl -f http://localhost:3000/api/health\"\nverify \"AlertManager functioning\" \"curl -f http://localhost:9093/-/ready\"\n\n=============================================================================\n\nverify \"Prometheus metrics available\" \"curl -f http://localhost:8000/metrics | grep -q 'football_predictions_total'\"\nverify \"Grafana accessible\" \"curl -f http://localhost:3000/api/health\"\nverify \"AlertManager functioning\" \"curl -f http://localhost:9093/-/ready\"\n#\n#=============================================================================\n=============================================================================#\n#6. \u65e5\u5fd7\u9a8c\u8bc1\n6. \u65e5\u5fd7\u9a8c\u8bc1#\n#=============================================================================\n\nverify \"No critical errors in logs\" \"\n! docker-compose logs app | tail -100 | grep -E '(ERROR|CRITICAL|Exception)' | grep -v 'test'\n\"\n\nverify \"Database connection stable\" \"\n! docker-compose logs app | tail -100 | grep -E '(Connection refused|Database.*failed|authentication.*failed)'\n\"\n\n=============================================================================\n\nverify \"No critical errors in logs\" \"\n! docker-compose logs app | tail -100 | grep -E '(ERROR|CRITICAL|Exception)' | grep -v 'test'\n\"\n\nverify \"Database connection stable\" \"\n! docker-compose logs app | tail -100 | grep -E '(Connection refused|Database.*failed|authentication.*failed)'\n\"\n#\n#=============================================================================\n=============================================================================#\n#7. \u751f\u6210\u9a8c\u8bc1\u62a5\u544a\n7. \u751f\u6210\u9a8c\u8bc1\u62a5\u544a#\n#=============================================================================\n\necho \"================================\" &gt;&gt; $REPORT_FILE\necho \"Verification Summary\" &gt;&gt; $REPORT_FILE\necho \"Total checks: $TOTAL_CHECKS\" &gt;&gt; $REPORT_FILE\necho \"Passed: $PASSED_CHECKS\" &gt;&gt; $REPORT_FILE\necho \"Failed: $FAILED_CHECKS\" &gt;&gt; $REPORT_FILE\necho \"Success rate: $(( PASSED_CHECKS * 100 / TOTAL_CHECKS ))%\" &gt;&gt; $REPORT_FILE\necho \"Verification completed at $(date)\" &gt;&gt; $REPORT_FILE\n\n=============================================================================\n\necho \"================================\" &gt;&gt; $REPORT_FILE\necho \"Verification Summary\" &gt;&gt; $REPORT_FILE\necho \"Total checks: $TOTAL_CHECKS\" &gt;&gt; $REPORT_FILE\necho \"Passed: $PASSED_CHECKS\" &gt;&gt; $REPORT_FILE\necho \"Failed: $FAILED_CHECKS\" &gt;&gt; $REPORT_FILE\necho \"Success rate: $(( PASSED_CHECKS * 100 / TOTAL_CHECKS ))%\" &gt;&gt; $REPORT_FILE\necho \"Verification completed at $(date)\" &gt;&gt; $REPORT_FILE\n#\n#\u663e\u793a\u7ed3\u679c\necho \"\"\necho \"=== Rollback Verification Summary ===\"\necho \"Total checks: $TOTAL_CHECKS\"\necho \"Passed: $PASSED_CHECKS\"\necho \"Failed: $FAILED_CHECKS\"\necho \"Success rate: $(( PASSED_CHECKS * 100 / TOTAL_CHECKS ))%\"\n\nif [ $FAILED_CHECKS -eq 0 ]; then\n    echo \"\u2705 All checks passed! Rollback successful.\"\n    exit 0\nelse\n    echo \"\u274c $FAILED_CHECKS checks failed. Manual intervention required.\"\n    echo \"Detailed report saved to: $REPORT_FILE\"\n    exit 1\nfi\nEOF\n\nchmod +x verify_rollback.sh\n\n\u663e\u793a\u7ed3\u679c\necho \"\"\necho \"=== Rollback Verification Summary ===\"\necho \"Total checks: $TOTAL_CHECKS\"\necho \"Passed: $PASSED_CHECKS\"\necho \"Failed: $FAILED_CHECKS\"\necho \"Success rate: $(( PASSED_CHECKS * 100 / TOTAL_CHECKS ))%\"\n\nif [ $FAILED_CHECKS -eq 0 ]; then\n    echo \"\u2705 All checks passed! Rollback successful.\"\n    exit 0\nelse\n    echo \"\u274c $FAILED_CHECKS checks failed. Manual intervention required.\"\n    echo \"Detailed report saved to: $REPORT_FILE\"\n    exit 1\nfi\nEOF\n\nchmod +x verify_rollback.sh\n#\n#=============================================================================\n=============================================================================#\n#2. \u6267\u884c\u9a8c\u8bc1\n2. \u6267\u884c\u9a8c\u8bc1#\n#=============================================================================\n\n=============================================================================\n#\n#\u6ce8\u610f\uff1a\u5728\u6267\u884c\u56de\u6eda\u540e\u8fd0\u884c\u6b64\u811a\u672c\n\u6ce8\u610f\uff1a\u5728\u6267\u884c\u56de\u6eda\u540e\u8fd0\u884c\u6b64\u811a\u672c#\n#./verify_rollback.sh\n</code></pre> <p>./verify_rollback.sh <pre><code>---\n##\n##\ud83d\udea8 \u5e38\u89c1\u95ee\u9898\u4e0e\u5e94\u6025\u9884\u6848\n\n\ud83d\udea8 \u5e38\u89c1\u95ee\u9898\u4e0e\u5e94\u6025\u9884\u6848\n###\n###1. \u670d\u52a1\u65e0\u6cd5\u542f\u52a8\n\n#### \ud83d\udd0d \u95ee\u9898\u8bca\u65ad\u6b65\u9aa4\n\n```bash\n1. \u670d\u52a1\u65e0\u6cd5\u542f\u52a8\n\n#### \ud83d\udd0d \u95ee\u9898\u8bca\u65ad\u6b65\u9aa4\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u68c0\u67e5\u670d\u52a1\u72b6\u6001\n1. \u68c0\u67e5\u670d\u52a1\u72b6\u6001#\n#=============================================================================\n\n=============================================================================\n#\n#\u67e5\u770b\u6240\u6709\u670d\u52a1\u72b6\u6001\ndocker-compose ps\n\n\u67e5\u770b\u6240\u6709\u670d\u52a1\u72b6\u6001\ndocker-compose ps\n#\n#\u68c0\u67e5\u7279\u5b9a\u670d\u52a1\u72b6\u6001\ndocker-compose ps app\n\n\u68c0\u67e5\u7279\u5b9a\u670d\u52a1\u72b6\u6001\ndocker-compose ps app\n#\n#\u67e5\u770b\u670d\u52a1\u65e5\u5fd7\ndocker-compose logs app\ndocker-compose logs --tail=50 app\n\n\u67e5\u770b\u670d\u52a1\u65e5\u5fd7\ndocker-compose logs app\ndocker-compose logs --tail=50 app\n#\n#=============================================================================\n=============================================================================#\n#2. \u68c0\u67e5\u4f9d\u8d56\u670d\u52a1\n2. \u68c0\u67e5\u4f9d\u8d56\u670d\u52a1#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\ndocker exec football_prediction_db pg_isready -U football_user\n\n\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\ndocker exec football_prediction_db pg_isready -U football_user\n#\n#\u68c0\u67e5Redis\u8fde\u63a5\ndocker exec football_prediction_redis redis-cli ping\n\n\u68c0\u67e5Redis\u8fde\u63a5\ndocker exec football_prediction_redis redis-cli ping\n#\n#\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\ndocker network ls\ndocker network inspect football-network\n\n\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\ndocker network ls\ndocker network inspect football-network\n#\n#=============================================================================\n=============================================================================#\n#3. \u68c0\u67e5\u8d44\u6e90\u4f7f\u7528\n3. \u68c0\u67e5\u8d44\u6e90\u4f7f\u7528#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u5185\u5b58\u4f7f\u7528\ndocker stats football_prediction_app\n\n\u68c0\u67e5\u5185\u5b58\u4f7f\u7528\ndocker stats football_prediction_app\n#\n#\u68c0\u67e5\u78c1\u76d8\u7a7a\u95f4\ndf -h\n\n\u68c0\u67e5\u78c1\u76d8\u7a7a\u95f4\ndf -h\n#\n#\u68c0\u67e5\u7aef\u53e3\u5360\u7528\nnetstat -tulpn | grep :8000\n\n\u68c0\u67e5\u7aef\u53e3\u5360\u7528\nnetstat -tulpn | grep :8000\n#\n#=============================================================================\n=============================================================================#\n#4. \u5e38\u89c1\u542f\u52a8\u95ee\u9898\u89e3\u51b3\n4. \u5e38\u89c1\u542f\u52a8\u95ee\u9898\u89e3\u51b3#\n#=============================================================================\n\n=============================================================================\n#\n#\u95ee\u98981: \u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\nif docker-compose logs app | grep -q \"Connection refused\"; then\n    echo \"\u89e3\u51b3\u65b9\u6848: \u68c0\u67e5\u6570\u636e\u5e93\u670d\u52a1\u72b6\u6001\u548c\u7f51\u7edc\u914d\u7f6e\"\n    docker-compose restart db\n    sleep 10\n    docker-compose restart app\nfi\n\n\u95ee\u98981: \u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\nif docker-compose logs app | grep -q \"Connection refused\"; then\n    echo \"\u89e3\u51b3\u65b9\u6848: \u68c0\u67e5\u6570\u636e\u5e93\u670d\u52a1\u72b6\u6001\u548c\u7f51\u7edc\u914d\u7f6e\"\n    docker-compose restart db\n    sleep 10\n    docker-compose restart app\nfi\n#\n#\u95ee\u98982: Redis\u8fde\u63a5\u5931\u8d25\nif docker-compose logs app | grep -q \"Redis connection\"; then\n    echo \"\u89e3\u51b3\u65b9\u6848: \u68c0\u67e5Redis\u670d\u52a1\u72b6\u6001\u548c\u5bc6\u7801\u914d\u7f6e\"\n    docker-compose restart redis\n    sleep 5\n    docker-compose restart app\nfi\n\n\u95ee\u98982: Redis\u8fde\u63a5\u5931\u8d25\nif docker-compose logs app | grep -q \"Redis connection\"; then\n    echo \"\u89e3\u51b3\u65b9\u6848: \u68c0\u67e5Redis\u670d\u52a1\u72b6\u6001\u548c\u5bc6\u7801\u914d\u7f6e\"\n    docker-compose restart redis\n    sleep 5\n    docker-compose restart app\nfi\n#\n#\u95ee\u98983: \u7aef\u53e3\u51b2\u7a81\nif docker-compose logs app | grep -q \"Address already in use\"; then\n    echo \"\u89e3\u51b3\u65b9\u6848: \u68c0\u67e5\u7aef\u53e3\u5360\u7528\u60c5\u51b5\"\n    lsof -i :8000\n    # \u6740\u6b7b\u5360\u7528\u7aef\u53e3\u7684\u8fdb\u7a0b\n    # kill -9 &lt;PID&gt;\nfi\n\n\u95ee\u98983: \u7aef\u53e3\u51b2\u7a81\nif docker-compose logs app | grep -q \"Address already in use\"; then\n    echo \"\u89e3\u51b3\u65b9\u6848: \u68c0\u67e5\u7aef\u53e3\u5360\u7528\u60c5\u51b5\"\n    lsof -i :8000\n    # \u6740\u6b7b\u5360\u7528\u7aef\u53e3\u7684\u8fdb\u7a0b\n    # kill -9 &lt;PID&gt;\nfi\n#\n#\u95ee\u98984: \u6743\u9650\u95ee\u9898\nif docker-compose logs app | grep -q \"Permission denied\"; then\n    echo \"\u89e3\u51b3\u65b9\u6848: \u68c0\u67e5\u6587\u4ef6\u6743\u9650\u548c\u73af\u5883\u53d8\u91cf\"\n    chown -R 999:999 data/\n    docker-compose restart app\nfi\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_13","title":"\ud83d\udee0\ufe0f \u5e94\u6025\u89e3\u51b3\u65b9\u6848","text":"<pre><code>\u95ee\u98984: \u6743\u9650\u95ee\u9898\nif docker-compose logs app | grep -q \"Permission denied\"; then\n    echo \"\u89e3\u51b3\u65b9\u6848: \u68c0\u67e5\u6587\u4ef6\u6743\u9650\u548c\u73af\u5883\u53d8\u91cf\"\n    chown -R 999:999 data/\n    docker-compose restart app\nfi\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_14","title":"\ud83d\udee0\ufe0f \u5e94\u6025\u89e3\u51b3\u65b9\u6848","text":"<pre><code>#=============================================================================\n=============================================================================#\n#1. \u7d27\u6025\u91cd\u542f\u811a\u672c\n1. \u7d27\u6025\u91cd\u542f\u811a\u672c#\n#=============================================================================\n\ncat &gt; emergency_restart.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Emergency Service Restart ===\"\n\n=============================================================================\n\ncat &gt; emergency_restart.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Emergency Service Restart ===\"\n#\n#\u8bb0\u5f55\u5f53\u524d\u72b6\u6001\necho \"Current service status:\" &gt; emergency_restart.log\ndocker-compose ps &gt;&gt; emergency_restart.log\n\n\u8bb0\u5f55\u5f53\u524d\u72b6\u6001\necho \"Current service status:\" &gt; emergency_restart.log\ndocker-compose ps &gt;&gt; emergency_restart.log\n#\n#\u505c\u6b62\u6240\u6709\u670d\u52a1\necho \"Stopping all services...\"\ndocker-compose down\n\n\u505c\u6b62\u6240\u6709\u670d\u52a1\necho \"Stopping all services...\"\ndocker-compose down\n#\n#\u6e05\u7406\u8d44\u6e90\necho \"Cleaning up resources...\"\ndocker system prune -f\ndocker volume prune -f\n\n\u6e05\u7406\u8d44\u6e90\necho \"Cleaning up resources...\"\ndocker system prune -f\ndocker volume prune -f\n#\n#\u91cd\u65b0\u542f\u52a8\u57fa\u7840\u8bbe\u65bd\necho \"Starting infrastructure services...\"\ndocker-compose up -d db redis\n\n\u91cd\u65b0\u542f\u52a8\u57fa\u7840\u8bbe\u65bd\necho \"Starting infrastructure services...\"\ndocker-compose up -d db redis\n#\n#\u7b49\u5f85\u57fa\u7840\u8bbe\u65bd\u5c31\u7eea\necho \"Waiting for infrastructure...\"\ntimeout 60 bash -c 'until docker exec football_prediction_db pg_isready -U football_user; do sleep 2; done'\ntimeout 30 bash -c 'until docker exec football_prediction_redis redis-cli ping; do sleep 2; done'\n\n\u7b49\u5f85\u57fa\u7840\u8bbe\u65bd\u5c31\u7eea\necho \"Waiting for infrastructure...\"\ntimeout 60 bash -c 'until docker exec football_prediction_db pg_isready -U football_user; do sleep 2; done'\ntimeout 30 bash -c 'until docker exec football_prediction_redis redis-cli ping; do sleep 2; done'\n#\n#\u542f\u52a8\u5e94\u7528\u670d\u52a1\necho \"Starting application services...\"\ndocker-compose up -d app\n\n\u542f\u52a8\u5e94\u7528\u670d\u52a1\necho \"Starting application services...\"\ndocker-compose up -d app\n#\n#\u7b49\u5f85\u5e94\u7528\u542f\u52a8\necho \"Waiting for application...\"\nsleep 30\n\n\u7b49\u5f85\u5e94\u7528\u542f\u52a8\necho \"Waiting for application...\"\nsleep 30\n#\n#\u9a8c\u8bc1\u670d\u52a1\u72b6\u6001\necho \"Verifying service status...\"\ndocker-compose ps &gt;&gt; emergency_restart.log\ncurl -f http://localhost:8000/health &gt;&gt; emergency_restart.log 2&gt;&amp;1\n\necho \"Emergency restart completed\"\necho \"Log saved to emergency_restart.log\"\nEOF\n\nchmod +x emergency_restart.sh\n\n\u9a8c\u8bc1\u670d\u52a1\u72b6\u6001\necho \"Verifying service status...\"\ndocker-compose ps &gt;&gt; emergency_restart.log\ncurl -f http://localhost:8000/health &gt;&gt; emergency_restart.log 2&gt;&amp;1\n\necho \"Emergency restart completed\"\necho \"Log saved to emergency_restart.log\"\nEOF\n\nchmod +x emergency_restart.sh\n#\n#=============================================================================\n=============================================================================#\n#2. \u5355\u72ec\u670d\u52a1\u91cd\u542f\n2. \u5355\u72ec\u670d\u52a1\u91cd\u542f#\n#=============================================================================\n\n=============================================================================\n#\n#\u91cd\u542f\u7279\u5b9a\u670d\u52a1\ndocker-compose restart app\ndocker-compose restart db\ndocker-compose restart redis\n\n\u91cd\u542f\u7279\u5b9a\u670d\u52a1\ndocker-compose restart app\ndocker-compose restart db\ndocker-compose restart redis\n#\n#\u5f3a\u5236\u91cd\u542f\ndocker-compose restart --timeout 60 app\n\n\u5f3a\u5236\u91cd\u542f\ndocker-compose restart --timeout 60 app\n#\n#=============================================================================\n=============================================================================#\n#3. \u914d\u7f6e\u91cd\u7f6e\n3. \u914d\u7f6e\u91cd\u7f6e#\n#=============================================================================\n\n=============================================================================\n#\n#\u91cd\u7f6e\u5230\u9ed8\u8ba4\u914d\u7f6e\ncp .env.production.example .env.production\ndocker-compose down\ndocker-compose up -d\n</code></pre> <p>\u91cd\u7f6e\u5230\u9ed8\u8ba4\u914d\u7f6e cp .env.production.example .env.production docker-compose down docker-compose up -d <pre><code>###\n###2. API \u8bf7\u6c42 500\n\n#### \ud83d\udd0d \u95ee\u9898\u8bca\u65ad\u6b65\u9aa4\n\n```bash\n2. API \u8bf7\u6c42 500\n\n#### \ud83d\udd0d \u95ee\u9898\u8bca\u65ad\u6b65\u9aa4\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u68c0\u67e5\u9519\u8bef\u65e5\u5fd7\n1. \u68c0\u67e5\u9519\u8bef\u65e5\u5fd7#\n#=============================================================================\n\n=============================================================================\n#\n#\u67e5\u770b\u5e94\u7528\u9519\u8bef\u65e5\u5fd7\ndocker-compose logs app | grep -E \"(500|ERROR|Exception|Traceback)\" | tail -20\n\n\u67e5\u770b\u5e94\u7528\u9519\u8bef\u65e5\u5fd7\ndocker-compose logs app | grep -E \"(500|ERROR|Exception|Traceback)\" | tail -20\n#\n#\u67e5\u770b\u6700\u65b0\u9519\u8bef\ndocker-compose logs --tail=100 app | grep -A 5 -B 5 \"ERROR\"\n\n\u67e5\u770b\u6700\u65b0\u9519\u8bef\ndocker-compose logs --tail=100 app | grep -A 5 -B 5 \"ERROR\"\n#\n#=============================================================================\n=============================================================================#\n#2. \u68c0\u67e5\u6a21\u578b\u6587\u4ef6\n2. \u68c0\u67e5\u6a21\u578b\u6587\u4ef6#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5MLflow\u6a21\u578b\u6ce8\u518c\ncurl -s http://localhost:5002/api/2.0/registered-models/get?name=football-match-predictor | jq '.latest_versions[]'\n\n\u68c0\u67e5MLflow\u6a21\u578b\u6ce8\u518c\ncurl -s http://localhost:5002/api/2.0/registered-models/get?name=football-match-predictor | jq '.latest_versions[]'\n#\n#\u68c0\u67e5\u6a21\u578b\u6587\u4ef6\u5b58\u5728\ndocker exec football_prediction_mlflow ls -la /mlflow-artifacts/\n\n\u68c0\u67e5\u6a21\u578b\u6587\u4ef6\u5b58\u5728\ndocker exec football_prediction_mlflow ls -la /mlflow-artifacts/\n#\n#\u68c0\u67e5\u6a21\u578b\u52a0\u8f7d\u65e5\u5fd7\ndocker-compose logs app | grep -i \"model\\|mlflow\"\n\n\u68c0\u67e5\u6a21\u578b\u52a0\u8f7d\u65e5\u5fd7\ndocker-compose logs app | grep -i \"model\\|mlflow\"\n#\n#=============================================================================\n=============================================================================#\n#3. \u68c0\u67e5\u7f13\u5b58\u72b6\u6001\n3. \u68c0\u67e5\u7f13\u5b58\u72b6\u6001#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5Redis\u8fde\u63a5\ndocker exec football_prediction_redis redis-cli ping\n\n\u68c0\u67e5Redis\u8fde\u63a5\ndocker exec football_prediction_redis redis-cli ping\n#\n#\u68c0\u67e5\u7f13\u5b58\u547d\u4e2d\u7387\ndocker exec football_prediction_redis redis-cli info | grep keyspace\n\n\u68c0\u67e5\u7f13\u5b58\u547d\u4e2d\u7387\ndocker exec football_prediction_redis redis-cli info | grep keyspace\n#\n#\u68c0\u67e5\u7f13\u5b58\u952e\ndocker exec football_prediction_redis redis-cli keys \"model:*\" | head -10\n\n\u68c0\u67e5\u7f13\u5b58\u952e\ndocker exec football_prediction_redis redis-cli keys \"model:*\" | head -10\n#\n#=============================================================================\n=============================================================================#\n#4. \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\n4. \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5#\n#=============================================================================\n\n=============================================================================\n#\n#\u6d4b\u8bd5\u6570\u636e\u5e93\u8fde\u63a5\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"SELECT 1;\"\n\n\u6d4b\u8bd5\u6570\u636e\u5e93\u8fde\u63a5\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"SELECT 1;\"\n#\n#\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\u6c60\ndocker-compose logs app | grep -i \"connection\\|pool\"\n\n\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\u6c60\ndocker-compose logs app | grep -i \"connection\\|pool\"\n#\n#\u68c0\u67e5\u6162\u67e5\u8be2\ndocker-compose logs app | grep -i \"slow\\|query.*ms\"\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_05/#_15","title":"\ud83d\udee0\ufe0f \u5e94\u6025\u89e3\u51b3\u65b9\u6848","text":"<p>```bash</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/","title":"Part 06","text":"<p>\u68c0\u67e5\u6162\u67e5\u8be2 docker-compose logs app | grep -i \"slow|query.*ms\" <pre><code>#### \ud83d\udee0\ufe0f \u5e94\u6025\u89e3\u51b3\u65b9\u6848\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u6a21\u578b\u91cd\u65b0\u52a0\u8f7d\n1. \u6a21\u578b\u91cd\u65b0\u52a0\u8f7d#\n#=============================================================================\n\ncat &gt; reload_model.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Model Reload Script ===\"\n\n=============================================================================\n\ncat &gt; reload_model.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Model Reload Script ===\"\n#\n#\u91cd\u542fMLflow\u670d\u52a1\necho \"Restarting MLflow...\"\ndocker-compose restart mlflow\n\n\u91cd\u542fMLflow\u670d\u52a1\necho \"Restarting MLflow...\"\ndocker-compose restart mlflow\n#\n#\u7b49\u5f85MLflow\u5c31\u7eea\nsleep 20\n\n\u7b49\u5f85MLflow\u5c31\u7eea\nsleep 20\n#\n#\u6e05\u7406\u5e94\u7528\u7f13\u5b58\necho \"Clearing application cache...\"\ndocker exec football_prediction_app rm -rf /tmp/model_cache/*\n\n\u6e05\u7406\u5e94\u7528\u7f13\u5b58\necho \"Clearing application cache...\"\ndocker exec football_prediction_app rm -rf /tmp/model_cache/*\n#\n#\u91cd\u542f\u5e94\u7528\u670d\u52a1\necho \"Restarting application...\"\ndocker-compose restart app\n\n\u91cd\u542f\u5e94\u7528\u670d\u52a1\necho \"Restarting application...\"\ndocker-compose restart app\n#\n#\u7b49\u5f85\u5e94\u7528\u542f\u52a8\nsleep 15\n\n\u7b49\u5f85\u5e94\u7528\u542f\u52a8\nsleep 15\n#\n#\u9a8c\u8bc1\u6a21\u578b\u52a0\u8f7d\necho \"Verifying model loading...\"\ncurl -f http://localhost:8000/health\n\necho \"Model reload completed\"\nEOF\n\nchmod +x reload_model.sh\n\n\u9a8c\u8bc1\u6a21\u578b\u52a0\u8f7d\necho \"Verifying model loading...\"\ncurl -f http://localhost:8000/health\n\necho \"Model reload completed\"\nEOF\n\nchmod +x reload_model.sh\n#\n#=============================================================================\n=============================================================================#\n#2. \u7f13\u5b58\u91cd\u7f6e\n2. \u7f13\u5b58\u91cd\u7f6e#\n#=============================================================================\n\ncat &gt; reset_cache.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Cache Reset Script ===\"\n\n=============================================================================\n\ncat &gt; reset_cache.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Cache Reset Script ===\"\n#\n#\u91cd\u542fRedis\u670d\u52a1\necho \"Restarting Redis...\"\ndocker-compose restart redis\n\n\u91cd\u542fRedis\u670d\u52a1\necho \"Restarting Redis...\"\ndocker-compose restart redis\n#\n#\u7b49\u5f85Redis\u5c31\u7eea\nsleep 10\n\n\u7b49\u5f85Redis\u5c31\u7eea\nsleep 10\n#\n#\u6e05\u7406\u5e94\u7528\u7f13\u5b58\u8fde\u63a5\necho \"Clearing application cache...\"\ndocker-compose restart app\n\n\u6e05\u7406\u5e94\u7528\u7f13\u5b58\u8fde\u63a5\necho \"Clearing application cache...\"\ndocker-compose restart app\n#\n#\u9a8c\u8bc1\u7f13\u5b58\u8fde\u63a5\necho \"Verifying cache connection...\"\ndocker exec football_prediction_redis redis-cli ping\n\necho \"Cache reset completed\"\nEOF\n\nchmod +x reset_cache.sh\n\n\u9a8c\u8bc1\u7f13\u5b58\u8fde\u63a5\necho \"Verifying cache connection...\"\ndocker exec football_prediction_redis redis-cli ping\n\necho \"Cache reset completed\"\nEOF\n\nchmod +x reset_cache.sh\n#\n#=============================================================================\n=============================================================================#\n#3. \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u91cd\u7f6e\n3. \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u91cd\u7f6e#\n#=============================================================================\n\ncat &gt; reset_db_pool.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Database Pool Reset Script ===\"\n\n=============================================================================\n\ncat &gt; reset_db_pool.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Database Pool Reset Script ===\"\n#\n#\u91cd\u542f\u6570\u636e\u5e93\u670d\u52a1\necho \"Restarting database...\"\ndocker-compose restart db\n\n\u91cd\u542f\u6570\u636e\u5e93\u670d\u52a1\necho \"Restarting database...\"\ndocker-compose restart db\n#\n#\u7b49\u5f85\u6570\u636e\u5e93\u5c31\u7eea\ntimeout 60 bash -c 'until docker exec football_prediction_db pg_isready -U football_user; do sleep 2; done'\n\n\u7b49\u5f85\u6570\u636e\u5e93\u5c31\u7eea\ntimeout 60 bash -c 'until docker exec football_prediction_db pg_isready -U football_user; do sleep 2; done'\n#\n#\u91cd\u542f\u5e94\u7528\u670d\u52a1\necho \"Restarting application...\"\ndocker-compose restart app\n\n\u91cd\u542f\u5e94\u7528\u670d\u52a1\necho \"Restarting application...\"\ndocker-compose restart app\n#\n#\u9a8c\u8bc1\u6570\u636e\u5e93\u8fde\u63a5\necho \"Verifying database connection...\"\ncurl -f http://localhost:8000/health\n\necho \"Database pool reset completed\"\nEOF\n\nchmod +x reset_db_pool.sh\n</code></pre></p> <p>\u9a8c\u8bc1\u6570\u636e\u5e93\u8fde\u63a5 echo \"Verifying database connection...\" curl -f http://localhost:8000/health</p> <p>echo \"Database pool reset completed\" EOF</p> <p>chmod +x reset_db_pool.sh <pre><code>###\n###3. \u6d88\u606f\u961f\u5217\u963b\u585e\n\n#### \ud83d\udd0d \u95ee\u9898\u8bca\u65ad\u6b65\u9aa4\n\n```bash\n3. \u6d88\u606f\u961f\u5217\u963b\u585e\n\n#### \ud83d\udd0d \u95ee\u9898\u8bca\u65ad\u6b65\u9aa4\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u68c0\u67e5Kafka\u72b6\u6001\n1. \u68c0\u67e5Kafka\u72b6\u6001#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5Kafka\u670d\u52a1\u72b6\u6001\ndocker-compose ps kafka\n\n\u68c0\u67e5Kafka\u670d\u52a1\u72b6\u6001\ndocker-compose ps kafka\n#\n#\u68c0\u67e5Kafka\u65e5\u5fd7\ndocker-compose logs kafka | tail -20\n\n\u68c0\u67e5Kafka\u65e5\u5fd7\ndocker-compose logs kafka | tail -20\n#\n#\u68c0\u67e5Kafka\u4e3b\u9898\ndocker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 --list\n\n\u68c0\u67e5Kafka\u4e3b\u9898\ndocker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 --list\n#\n#\u68c0\u67e5\u4e3b\u9898\u72b6\u6001\ndocker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 --describe\n\n\u68c0\u67e5\u4e3b\u9898\u72b6\u6001\ndocker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 --describe\n#\n#=============================================================================\n=============================================================================#\n#2. \u68c0\u67e5Celery\u72b6\u6001\n2. \u68c0\u67e5Celery\u72b6\u6001#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5Celery\u5de5\u4f5c\u8fdb\u7a0b\ndocker-compose ps celery-worker\n\n\u68c0\u67e5Celery\u5de5\u4f5c\u8fdb\u7a0b\ndocker-compose ps celery-worker\n#\n#\u68c0\u67e5Celery\u65e5\u5fd7\ndocker-compose logs celery-worker | tail -20\n\n\u68c0\u67e5Celery\u65e5\u5fd7\ndocker-compose logs celery-worker | tail -20\n#\n#\u68c0\u67e5Celery\u4efb\u52a1\u72b6\u6001\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect active\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect scheduled\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect stats\n\n\u68c0\u67e5Celery\u4efb\u52a1\u72b6\u6001\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect active\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect scheduled\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect stats\n#\n#=============================================================================\n=============================================================================#\n#3. \u68c0\u67e5\u6d88\u606f\u79ef\u538b\n3. \u68c0\u67e5\u6d88\u606f\u79ef\u538b#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u961f\u5217\u957f\u5ea6\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect queued\n\n\u68c0\u67e5\u961f\u5217\u957f\u5ea6\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect queued\n#\n#\u68c0\u67e5\u6d88\u8d39\u8005\u5ef6\u8fdf\ndocker-compose logs celery-worker | grep -i \"delay\\|latency\"\n\n\u68c0\u67e5\u6d88\u8d39\u8005\u5ef6\u8fdf\ndocker-compose logs celery-worker | grep -i \"delay\\|latency\"\n#\n#\u68c0\u67e5ZooKeeper\u72b6\u6001\ndocker exec football_prediction_zookeeper echo \"ruok\" | nc localhost 2181\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_1","title":"\ud83d\udee0\ufe0f \u5e94\u6025\u89e3\u51b3\u65b9\u6848","text":"<pre><code>\u68c0\u67e5ZooKeeper\u72b6\u6001\ndocker exec football_prediction_zookeeper echo \"ruok\" | nc localhost 2181\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_2","title":"\ud83d\udee0\ufe0f \u5e94\u6025\u89e3\u51b3\u65b9\u6848","text":"<pre><code>#=============================================================================\n=============================================================================#\n#1. \u6d88\u606f\u961f\u5217\u91cd\u7f6e\n1. \u6d88\u606f\u961f\u5217\u91cd\u7f6e#\n#=============================================================================\n\ncat &gt; reset_message_queue.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Message Queue Reset Script ===\"\n\n=============================================================================\n\ncat &gt; reset_message_queue.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Message Queue Reset Script ===\"\n#\n#\u505c\u6b62\u6d88\u606f\u961f\u5217\u670d\u52a1\necho \"Stopping message queue services...\"\ndocker-compose stop kafka zookeeper celery-worker celery-beat\n\n\u505c\u6b62\u6d88\u606f\u961f\u5217\u670d\u52a1\necho \"Stopping message queue services...\"\ndocker-compose stop kafka zookeeper celery-worker celery-beat\n#\n#\u6e05\u7406Kafka\u6570\u636e\necho \"Cleaning Kafka data...\"\ndocker volume rm football_prediction_kafka_data\ndocker volume create football_prediction_kafka_data\n\n\u6e05\u7406Kafka\u6570\u636e\necho \"Cleaning Kafka data...\"\ndocker volume rm football_prediction_kafka_data\ndocker volume create football_prediction_kafka_data\n#\n#\u91cd\u542fZooKeeper\necho \"Restarting ZooKeeper...\"\ndocker-compose up -d zookeeper\n\n\u91cd\u542fZooKeeper\necho \"Restarting ZooKeeper...\"\ndocker-compose up -d zookeeper\n#\n#\u7b49\u5f85ZooKeeper\u5c31\u7eea\nsleep 20\n\n\u7b49\u5f85ZooKeeper\u5c31\u7eea\nsleep 20\n#\n#\u91cd\u542fKafka\necho \"Restarting Kafka...\"\ndocker-compose up -d kafka\n\n\u91cd\u542fKafka\necho \"Restarting Kafka...\"\ndocker-compose up -d kafka\n#\n#\u7b49\u5f85Kafka\u5c31\u7eea\ntimeout 60 bash -c 'until docker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 --list; do sleep 5; done'\n\n\u7b49\u5f85Kafka\u5c31\u7eea\ntimeout 60 bash -c 'until docker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 --list; do sleep 5; done'\n#\n#\u91cd\u5efa\u4e3b\u9898\necho \"Recreating topics...\"\ndocker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 \\\n  --create --topic football-predictions --partitions 3 --replication-factor 1\n\n\u91cd\u5efa\u4e3b\u9898\necho \"Recreating topics...\"\ndocker exec football_prediction_kafka kafka-topics --bootstrap-server localhost:9092 \\\n  --create --topic football-predictions --partitions 3 --replication-factor 1\n#\n#\u91cd\u542fCelery\u670d\u52a1\necho \"Restarting Celery services...\"\ndocker-compose up -d celery-worker celery-beat\n\n\u91cd\u542fCelery\u670d\u52a1\necho \"Restarting Celery services...\"\ndocker-compose up -d celery-worker celery-beat\n#\n#\u9a8c\u8bc1\u670d\u52a1\u72b6\u6001\necho \"Verifying services...\"\ndocker-compose ps celery-worker celery-beat kafka\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect stats\n\necho \"Message queue reset completed\"\nEOF\n\nchmod +x reset_message_queue.sh\n\n\u9a8c\u8bc1\u670d\u52a1\u72b6\u6001\necho \"Verifying services...\"\ndocker-compose ps celery-worker celery-beat kafka\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect stats\n\necho \"Message queue reset completed\"\nEOF\n\nchmod +x reset_message_queue.sh\n#\n#=============================================================================\n=============================================================================#\n#2. Celery\u4efb\u52a1\u6e05\u7406\n2. Celery\u4efb\u52a1\u6e05\u7406#\n#=============================================================================\n\ncat &gt; clear_celery_tasks.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Celery Tasks Cleanup Script ===\"\n\n=============================================================================\n\ncat &gt; clear_celery_tasks.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Celery Tasks Cleanup Script ===\"\n#\n#\u505c\u6b62Celery\u5de5\u4f5c\u8fdb\u7a0b\necho \"Stopping Celery workers...\"\ndocker-compose stop celery-worker celery-beat\n\n\u505c\u6b62Celery\u5de5\u4f5c\u8fdb\u7a0b\necho \"Stopping Celery workers...\"\ndocker-compose stop celery-worker celery-beat\n#\n#\u6e05\u7406Redis\u4e2d\u7684\u4efb\u52a1\u6570\u636e\necho \"Clearing Redis task data...\"\ndocker exec football_prediction_redis redis-cli flushdb\n\n\u6e05\u7406Redis\u4e2d\u7684\u4efb\u52a1\u6570\u636e\necho \"Clearing Redis task data...\"\ndocker exec football_prediction_redis redis-cli flushdb\n#\n#\u91cd\u542fCelery\u670d\u52a1\necho \"Restarting Celery services...\"\ndocker-compose up -d celery-worker celery-beat\n\n\u91cd\u542fCelery\u670d\u52a1\necho \"Restarting Celery services...\"\ndocker-compose up -d celery-worker celery-beat\n#\n#\u7b49\u5f85\u670d\u52a1\u542f\u52a8\nsleep 10\n\n\u7b49\u5f85\u670d\u52a1\u542f\u52a8\nsleep 10\n#\n#\u9a8c\u8bc1Celery\u72b6\u6001\necho \"Verifying Celery status...\"\ndocker exec football_prediction_celery-worker celery -A football_prediction.celery inspect stats\n\necho \"Celery tasks cleanup completed\"\nEOF\n\nchmod +x clear_celery_tasks.sh\n</code></pre> <p>\u9a8c\u8bc1Celery\u72b6\u6001 echo \"Verifying Celery status...\" docker exec football_prediction_celery-worker celery -A football_prediction.celery inspect stats</p> <p>echo \"Celery tasks cleanup completed\" EOF</p> <p>chmod +x clear_celery_tasks.sh <pre><code>###\n###4. \u544a\u8b66\u98ce\u66b4\n\n#### \ud83d\udd0d \u95ee\u9898\u8bca\u65ad\u6b65\u9aa4\n\n```bash\n4. \u544a\u8b66\u98ce\u66b4\n\n#### \ud83d\udd0d \u95ee\u9898\u8bca\u65ad\u6b65\u9aa4\n\n```bash#\n#=============================================================================\n=============================================================================#\n#1. \u68c0\u67e5\u544a\u8b66\u72b6\u6001\n1. \u68c0\u67e5\u544a\u8b66\u72b6\u6001#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5\u5f53\u524d\u544a\u8b66\ncurl -s http://localhost:9093/api/v1/alerts | jq '.data.alerts[] | {name, state, labels}'\n\n\u68c0\u67e5\u5f53\u524d\u544a\u8b66\ncurl -s http://localhost:9093/api/v1/alerts | jq '.data.alerts[] | {name, state, labels}'\n#\n#\u68c0\u67e5\u544a\u8b66\u89c4\u5219\u72b6\u6001\ncurl -s http://localhost:9090/api/v1/rules | jq '.data.groups[].rules[] | {name, health, lastError}'\n\n\u68c0\u67e5\u544a\u8b66\u89c4\u5219\u72b6\u6001\ncurl -s http://localhost:9090/api/v1/rules | jq '.data.groups[].rules[] | {name, health, lastError}'\n#\n#\u68c0\u67e5Prometheus\u76ee\u6807\u72b6\u6001\ncurl -s http://localhost:9090/api/v1/targets | jq '.data.activeTargets[] | {health, labels}'\n\n\u68c0\u67e5Prometheus\u76ee\u6807\u72b6\u6001\ncurl -s http://localhost:9090/api/v1/targets | jq '.data.activeTargets[] | {health, labels}'\n#\n#=============================================================================\n=============================================================================#\n#2. \u68c0\u67e5\u7cfb\u7edf\u8d44\u6e90\n2. \u68c0\u67e5\u7cfb\u7edf\u8d44\u6e90#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5CPU\u4f7f\u7528\u7387\ndocker stats football_prediction_app --no-stream --format '{{.CPUPerc}}'\n\n\u68c0\u67e5CPU\u4f7f\u7528\u7387\ndocker stats football_prediction_app --no-stream --format '{{.CPUPerc}}'\n#\n#\u68c0\u67e5\u5185\u5b58\u4f7f\u7528\u7387\ndocker stats football_prediction_app --no-stream --format '{{.MemUsage}}'\n\n\u68c0\u67e5\u5185\u5b58\u4f7f\u7528\u7387\ndocker stats football_prediction_app --no-stream --format '{{.MemUsage}}'\n#\n#\u68c0\u67e5\u78c1\u76d8\u4f7f\u7528\ndf -h\n\n\u68c0\u67e5\u78c1\u76d8\u4f7f\u7528\ndf -h\n#\n#\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\nnetstat -an | grep :8000 | wc -l\n\n\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\nnetstat -an | grep :8000 | wc -l\n#\n#=============================================================================\n=============================================================================#\n#3. \u68c0\u67e5\u4e1a\u52a1\u6307\u6807\n3. \u68c0\u67e5\u4e1a\u52a1\u6307\u6807#\n#=============================================================================\n\n=============================================================================\n#\n#\u68c0\u67e5API\u9519\u8bef\u7387\ncurl -s http://localhost:8000/metrics | grep \"http_requests_total{status=\\\"5..\\\"}\"\n\n\u68c0\u67e5API\u9519\u8bef\u7387\ncurl -s http://localhost:8000/metrics | grep \"http_requests_total{status=\\\"5..\\\"}\"\n#\n#\u68c0\u67e5\u54cd\u5e94\u65f6\u95f4\ncurl -s http://localhost:8000/metrics | grep \"football_prediction_latency_seconds\"\n\n\u68c0\u67e5\u54cd\u5e94\u65f6\u95f4\ncurl -s http://localhost:8000/metrics | grep \"football_prediction_latency_seconds\"\n#\n#\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\u6570\ncurl -s http://localhost:9187/metrics | grep \"pg_stat_database_numbackends\"\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_3","title":"\ud83d\udee0\ufe0f \u5e94\u6025\u89e3\u51b3\u65b9\u6848","text":"<pre><code>\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\u6570\ncurl -s http://localhost:9187/metrics | grep \"pg_stat_database_numbackends\"\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_4","title":"\ud83d\udee0\ufe0f \u5e94\u6025\u89e3\u51b3\u65b9\u6848","text":"<pre><code>#=============================================================================\n=============================================================================#\n#1. \u544a\u8b66\u9759\u9ed8\u811a\u672c\n1. \u544a\u8b66\u9759\u9ed8\u811a\u672c#\n#=============================================================================\n\ncat &gt; silence_alerts.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Alert Silence Script ===\"\n\n=============================================================================\n\ncat &gt; silence_alerts.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Alert Silence Script ===\"\n#\n#\u9759\u9ed8\u6240\u6709\u544a\u8b66\ncurl -X POST http://localhost:9093/api/v1/silences \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"matchers\": [\n      {\n        \"name\": \"severity\",\n        \"value\": \".*\",\n        \"isRegex\": true\n      }\n    ],\n    \"startsAt\": \"'$(date -Iseconds)'\",\n    \"endsAt\": \"'$(date -d '+1 hour' -Iseconds)'\",\n    \"comment\": \"Emergency silence during incident\",\n    \"createdBy\": \"emergency_script\"\n  }'\n\necho \"All alerts silenced for 1 hour\"\nEOF\n\nchmod +x silence_alerts.sh\n\n\u9759\u9ed8\u6240\u6709\u544a\u8b66\ncurl -X POST http://localhost:9093/api/v1/silences \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"matchers\": [\n      {\n        \"name\": \"severity\",\n        \"value\": \".*\",\n        \"isRegex\": true\n      }\n    ],\n    \"startsAt\": \"'$(date -Iseconds)'\",\n    \"endsAt\": \"'$(date -d '+1 hour' -Iseconds)'\",\n    \"comment\": \"Emergency silence during incident\",\n    \"createdBy\": \"emergency_script\"\n  }'\n\necho \"All alerts silenced for 1 hour\"\nEOF\n\nchmod +x silence_alerts.sh\n#\n#=============================================================================\n=============================================================================#\n#2. \u544a\u8b66\u9608\u503c\u8c03\u6574\n2. \u544a\u8b66\u9608\u503c\u8c03\u6574#\n#=============================================================================\n\ncat &gt; adjust_alert_thresholds.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Alert Threshold Adjustment Script ===\"\n\n=============================================================================\n\ncat &gt; adjust_alert_thresholds.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Alert Threshold Adjustment Script ===\"\n#\n#\u5907\u4efd\u5f53\u524d\u544a\u8b66\u89c4\u5219\ncp configs/prometheus/alert_rules.yml configs/prometheus/alert_rules.yml.backup_$(date +%Y%m%d_%H%M%S)\n\n\u5907\u4efd\u5f53\u524d\u544a\u8b66\u89c4\u5219\ncp configs/prometheus/alert_rules.yml configs/prometheus/alert_rules.yml.backup_$(date +%Y%m%d_%H%M%S)\n#\n#\u8c03\u6574\u544a\u8b66\u9608\u503c\uff08\u63d0\u9ad8\u9608\u503c\u4ee5\u51cf\u5c11\u544a\u8b66\uff09\nsed -i 's/&gt; 0.01/&gt; 0.05/g' configs/prometheus/alert_rules.yml\nsed -i 's/&gt; 1/&gt; 5/g' configs/prometheus/alert_rules.yml\nsed -i 's/&gt; 80/&gt; 90/g' configs/prometheus/alert_rules.yml\nsed -i 's/&gt; 90/&gt; 95/g' configs/prometheus/alert_rules.yml\n\n\u8c03\u6574\u544a\u8b66\u9608\u503c\uff08\u63d0\u9ad8\u9608\u503c\u4ee5\u51cf\u5c11\u544a\u8b66\uff09\nsed -i 's/&gt; 0.01/&gt; 0.05/g' configs/prometheus/alert_rules.yml\nsed -i 's/&gt; 1/&gt; 5/g' configs/prometheus/alert_rules.yml\nsed -i 's/&gt; 80/&gt; 90/g' configs/prometheus/alert_rules.yml\nsed -i 's/&gt; 90/&gt; 95/g' configs/prometheus/alert_rules.yml\n#\n#\u91cd\u65b0\u52a0\u8f7dPrometheus\u914d\u7f6e\ncurl -X POST http://localhost:9090/-/reload\n\necho \"Alert thresholds adjusted and Prometheus reloaded\"\nEOF\n\nchmod +x adjust_alert_thresholds.sh\n\n\u91cd\u65b0\u52a0\u8f7dPrometheus\u914d\u7f6e\ncurl -X POST http://localhost:9090/-/reload\n\necho \"Alert thresholds adjusted and Prometheus reloaded\"\nEOF\n\nchmod +x adjust_alert_thresholds.sh\n#\n#=============================================================================\n=============================================================================#\n#3. \u7cfb\u7edf\u8d44\u6e90\u4f18\u5316\n3. \u7cfb\u7edf\u8d44\u6e90\u4f18\u5316#\n#=============================================================================\n\ncat &gt; optimize_resources.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Resource Optimization Script ===\"\n\n=============================================================================\n\ncat &gt; optimize_resources.sh &lt;&lt; 'EOF'\n#!/bin/bash\nset -e\n\necho \"=== Resource Optimization Script ===\"\n#\n#\u91cd\u542f\u9ad8\u5185\u5b58\u4f7f\u7528\u670d\u52a1\necho \"Restarting high-memory services...\"\ndocker-compose restart app celery-worker\n\n\u91cd\u542f\u9ad8\u5185\u5b58\u4f7f\u7528\u670d\u52a1\necho \"Restarting high-memory services...\"\ndocker-compose restart app celery-worker\n#\n#\u6e05\u7406Docker\u8d44\u6e90\necho \"Cleaning Docker resources...\"\ndocker system prune -f\ndocker volume prune -f\n\n\u6e05\u7406Docker\u8d44\u6e90\necho \"Cleaning Docker resources...\"\ndocker system prune -f\ndocker volume prune -f\n#\n#\u4f18\u5316\u6570\u636e\u5e93\u8fde\u63a5\u6c60\necho \"Optimizing database connection pool...\"\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nALTER SYSTEM SET max_connections = 200;\nSELECT pg_reload_conf();\n\"\n\n\u4f18\u5316\u6570\u636e\u5e93\u8fde\u63a5\u6c60\necho \"Optimizing database connection pool...\"\ndocker exec football_prediction_db psql -U football_user -d football_prediction_dev -c \"\nALTER SYSTEM SET max_connections = 200;\nSELECT pg_reload_conf();\n\"\n#\n#\u91cd\u542f\u6570\u636e\u5e93\necho \"Restarting database...\"\ndocker-compose restart db\n\necho \"Resource optimization completed\"\nEOF\n\nchmod +x optimize_resources.sh\n</code></pre> <p>\u91cd\u542f\u6570\u636e\u5e93 echo \"Restarting database...\" docker-compose restart db</p> <p>echo \"Resource optimization completed\" EOF</p> <p>chmod +x optimize_resources.sh <pre><code>---\n##\n##\ud83d\udccb \u9644\u5f55\n\n\ud83d\udccb \u9644\u5f55\n###\n###A. \u90e8\u7f72\u547d\u4ee4\u793a\u4f8b\n\n#### \ud83d\udc33 Docker Compose \u90e8\u7f72\u547d\u4ee4\n\n```bash\nA. \u90e8\u7f72\u547d\u4ee4\u793a\u4f8b\n\n#### \ud83d\udc33 Docker Compose \u90e8\u7f72\u547d\u4ee4\n\n```bash#\n#=============================================================================\n=============================================================================#\n#\u57fa\u7840\u90e8\u7f72\u547d\u4ee4\n\u57fa\u7840\u90e8\u7f72\u547d\u4ee4#\n#=============================================================================\n\n=============================================================================\n#\n#\u5b8c\u6574\u90e8\u7f72\ndocker-compose up -d\n\n\u5b8c\u6574\u90e8\u7f72\ndocker-compose up -d\n#\n#\u5206\u6b65\u90e8\u7f72\ndocker-compose up -d db redis\ndocker-compose up -d zookeeper kafka\ndocker-compose up -d minio mlflow\ndocker-compose up -d prometheus grafana\ndocker-compose up -d app celery-worker celery-beat\ndocker-compose up -d nginx\n\n\u5206\u6b65\u90e8\u7f72\ndocker-compose up -d db redis\ndocker-compose up -d zookeeper kafka\ndocker-compose up -d minio mlflow\ndocker-compose up -d prometheus grafana\ndocker-compose up -d app celery-worker celery-beat\ndocker-compose up -d nginx\n#\n#\u7279\u5b9a\u670d\u52a1\u90e8\u7f72\ndocker-compose up -d app\ndocker-compose up -d db\ndocker-compose up -d redis\n\n\u7279\u5b9a\u670d\u52a1\u90e8\u7f72\ndocker-compose up -d app\ndocker-compose up -d db\ndocker-compose up -d redis\n#\n#=============================================================================\n=============================================================================#\n#\u670d\u52a1\u7ba1\u7406\u547d\u4ee4\n\u670d\u52a1\u7ba1\u7406\u547d\u4ee4#\n#=============================================================================\n\n=============================================================================\n#\n#\u542f\u52a8\u670d\u52a1\ndocker-compose up -d\n\n\u542f\u52a8\u670d\u52a1\ndocker-compose up -d\n#\n#\u505c\u6b62\u670d\u52a1\ndocker-compose down\n\n\u505c\u6b62\u670d\u52a1\ndocker-compose down\n#\n#\u91cd\u542f\u670d\u52a1\ndocker-compose restart app\n\n\u91cd\u542f\u670d\u52a1\ndocker-compose restart app\n#\n#\u67e5\u770b\u65e5\u5fd7\ndocker-compose logs -f app\n\n\u67e5\u770b\u65e5\u5fd7\ndocker-compose logs -f app\n#\n#\u67e5\u770b\u670d\u52a1\u72b6\u6001\ndocker-compose ps\n\n\u67e5\u770b\u670d\u52a1\u72b6\u6001\ndocker-compose ps\n#\n#=============================================================================\n=============================================================================#\n#\u6e05\u7406\u547d\u4ee4\n\u6e05\u7406\u547d\u4ee4#\n#=============================================================================\n\n=============================================================================\n#\n#\u505c\u6b62\u5e76\u5220\u9664\u5bb9\u5668\ndocker-compose down\n\n\u505c\u6b62\u5e76\u5220\u9664\u5bb9\u5668\ndocker-compose down\n#\n#\u505c\u6b62\u5e76\u5220\u9664\u5bb9\u5668\u548c\u7f51\u7edc\ndocker-compose down --rmi all\n\n\u505c\u6b62\u5e76\u5220\u9664\u5bb9\u5668\u548c\u7f51\u7edc\ndocker-compose down --rmi all\n#\n#\u505c\u6b62\u5e76\u5220\u9664\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u5377\ndocker-compose down -v\n\n\u505c\u6b62\u5e76\u5220\u9664\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u5377\ndocker-compose down -v\n#\n#\u6e05\u7406\u672a\u4f7f\u7528\u7684\u8d44\u6e90\ndocker system prune -a\ndocker volume prune\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#kubernetes","title":"\u2638\ufe0f Kubernetes \u90e8\u7f72\u547d\u4ee4","text":"<pre><code>\u6e05\u7406\u672a\u4f7f\u7528\u7684\u8d44\u6e90\ndocker system prune -a\ndocker volume prune\n</code></pre>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#kubernetes_1","title":"\u2638\ufe0f Kubernetes \u90e8\u7f72\u547d\u4ee4","text":"<pre><code>#=============================================================================\n=============================================================================#\n#\u57fa\u7840\u90e8\u7f72\u547d\u4ee4\n\u57fa\u7840\u90e8\u7f72\u547d\u4ee4#\n#=============================================================================\n\n=============================================================================\n#\n#\u5e94\u7528\u6240\u6709\u914d\u7f6e\nkubectl apply -f k8s/\n\n\u5e94\u7528\u6240\u6709\u914d\u7f6e\nkubectl apply -f k8s/\n#\n#\u5206\u6b65\u5e94\u7528\nkubectl apply -f k8s/storage/\nkubectl apply -f k8s/database/\nkubectl apply -f k8s/cache/\nkubectl apply -f k8s/messaging/\nkubectl apply -f k8s/ml/\nkubectl apply -f k8s/monitoring/\nkubectl apply -f k8s/app/\nkubectl apply -f k8s/ingress/\n\n\u5206\u6b65\u5e94\u7528\nkubectl apply -f k8s/storage/\nkubectl apply -f k8s/database/\nkubectl apply -f k8s/cache/\nkubectl apply -f k8s/messaging/\nkubectl apply -f k8s/ml/\nkubectl apply -f k8s/monitoring/\nkubectl apply -f k8s/app/\nkubectl apply -f k8s/ingress/\n#\n#=============================================================================\n=============================================================================#\n#\u670d\u52a1\u7ba1\u7406\u547d\u4ee4\n\u670d\u52a1\u7ba1\u7406\u547d\u4ee4#\n#=============================================================================\n\n=============================================================================\n#\n#\u67e5\u770bPod\u72b6\u6001\nkubectl get pods -o wide\n\n\u67e5\u770bPod\u72b6\u6001\nkubectl get pods -o wide\n#\n#\u67e5\u770b\u670d\u52a1\u72b6\u6001\nkubectl get services\n\n\u67e5\u770b\u670d\u52a1\u72b6\u6001\nkubectl get services\n#\n#\u67e5\u770bIngress\u72b6\u6001\nkubectl get ingress\n\n\u67e5\u770bIngress\u72b6\u6001\nkubectl get ingress\n#\n#\u67e5\u770b\u90e8\u7f72\u72b6\u6001\nkubectl get deployments\n\n\u67e5\u770b\u90e8\u7f72\u72b6\u6001\nkubectl get deployments\n#\n#=============================================================================\n=============================================================================#\n#\u6545\u969c\u6392\u67e5\u547d\u4ee4\n\u6545\u969c\u6392\u67e5\u547d\u4ee4#\n#=============================================================================\n\n=============================================================================\n#\n#\u67e5\u770bPod\u65e5\u5fd7\nkubectl logs -f deployment/football-prediction\n\n\u67e5\u770bPod\u65e5\u5fd7\nkubectl logs -f deployment/football-prediction\n#\n#\u67e5\u770b\u7279\u5b9aPod\u65e5\u5fd7\nkubectl logs -f &lt;pod-name&gt;\n\n\u67e5\u770b\u7279\u5b9aPod\u65e5\u5fd7\nkubectl logs -f &lt;pod-name&gt;\n#\n#\u8fdb\u5165Pod\u8c03\u8bd5\nkubectl exec -it &lt;pod-name&gt; -- /bin/bash\n\n\u8fdb\u5165Pod\u8c03\u8bd5\nkubectl exec -it &lt;pod-name&gt; -- /bin/bash\n#\n#\u63cf\u8ff0Pod\u8be6\u7ec6\u4fe1\u606f\nkubectl describe pod &lt;pod-name&gt;\n\n\u63cf\u8ff0Pod\u8be6\u7ec6\u4fe1\u606f\nkubectl describe pod &lt;pod-name&gt;\n#\n#=============================================================================\n=============================================================================#\n#\u6269\u7f29\u5bb9\u547d\u4ee4\n\u6269\u7f29\u5bb9\u547d\u4ee4#\n#=============================================================================\n\n=============================================================================\n#\n#\u6269\u5bb9\u5e94\u7528\nkubectl scale deployment football-prediction --replicas=3\n\n\u6269\u5bb9\u5e94\u7528\nkubectl scale deployment football-prediction --replicas=3\n#\n#\u6269\u5bb9\u5de5\u4f5c\u8282\u70b9\nkubectl scale deployment celery-worker --replicas=2\n\n\u6269\u5bb9\u5de5\u4f5c\u8282\u70b9\nkubectl scale deployment celery-worker --replicas=2\n#\n#=============================================================================\n=============================================================================#\n#\u66f4\u65b0\u547d\u4ee4\n\u66f4\u65b0\u547d\u4ee4#\n#=============================================================================\n\n=============================================================================\n#\n#\u6eda\u52a8\u66f4\u65b0\nkubectl rollout restart deployment football-prediction\n\n\u6eda\u52a8\u66f4\u65b0\nkubectl rollout restart deployment football-prediction\n#\n#\u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\nkubectl rollout undo deployment football-prediction\n\n\u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\nkubectl rollout undo deployment football-prediction\n#\n#\u67e5\u770b\u66f4\u65b0\u72b6\u6001\nkubectl rollout status deployment football-prediction\n</code></pre> <p>\u67e5\u770b\u66f4\u65b0\u72b6\u6001 kubectl rollout status deployment football-prediction ```</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_5","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#b","title":"B. \u5e38\u7528\u8fd0\u7ef4\u547d\u4ee4","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_6","title":"\ud83d\udcca \u65e5\u5fd7\u548c\u72b6\u6001\u547d\u4ee4","text":"<p>```bash B. \u5e38\u7528\u8fd0\u7ef4\u547d\u4ee4</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_7","title":"\ud83d\udcca \u65e5\u5fd7\u548c\u72b6\u6001\u547d\u4ee4","text":"<p>```bash#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_8","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_9","title":"\u5e94\u7528\u65e5\u5fd7","text":"<p>\u5e94\u7528\u65e5\u5fd7#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_10","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_11","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_12","title":"\u5b9e\u65f6\u67e5\u770b\u5e94\u7528\u65e5\u5fd7","text":"<p>docker-compose logs -f app</p> <p>\u5b9e\u65f6\u67e5\u770b\u5e94\u7528\u65e5\u5fd7 docker-compose logs -f app</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_13","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#100","title":"\u67e5\u770b\u6700\u8fd1\u7684100\u884c\u65e5\u5fd7","text":"<p>docker-compose logs --tail=100 app</p> <p>\u67e5\u770b\u6700\u8fd1\u7684100\u884c\u65e5\u5fd7 docker-compose logs --tail=100 app</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_14","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_15","title":"\u67e5\u770b\u7279\u5b9a\u65f6\u95f4\u6bb5\u7684\u65e5\u5fd7","text":"<p>docker-compose logs --since=1h app</p> <p>\u67e5\u770b\u7279\u5b9a\u65f6\u95f4\u6bb5\u7684\u65e5\u5fd7 docker-compose logs --since=1h app</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_16","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_17","title":"\u67e5\u770b\u9519\u8bef\u65e5\u5fd7","text":"<p>docker-compose logs app | grep ERROR</p> <p>\u67e5\u770b\u9519\u8bef\u65e5\u5fd7 docker-compose logs app | grep ERROR</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_18","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_19","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_20","title":"\u7cfb\u7edf\u72b6\u6001","text":"<p>\u7cfb\u7edf\u72b6\u6001#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_21","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_22","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_23","title":"\u67e5\u770b\u6240\u6709\u5bb9\u5668\u72b6\u6001","text":"<p>docker ps -a</p> <p>\u67e5\u770b\u6240\u6709\u5bb9\u5668\u72b6\u6001 docker ps -a</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_24","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_25","title":"\u67e5\u770b\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5","text":"<p>docker stats</p> <p>\u67e5\u770b\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5 docker stats</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_26","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_27","title":"\u67e5\u770b\u7f51\u7edc\u72b6\u6001","text":"<p>docker network ls docker network inspect football-network</p> <p>\u67e5\u770b\u7f51\u7edc\u72b6\u6001 docker network ls docker network inspect football-network</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_28","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_29","title":"\u67e5\u770b\u5377\u72b6\u6001","text":"<p>docker volume ls docker volume inspect football_prediction_db_data</p> <p>\u67e5\u770b\u5377\u72b6\u6001 docker volume ls docker volume inspect football_prediction_db_data</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_30","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_31","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_32","title":"\u6570\u636e\u5e93\u64cd\u4f5c","text":"<p>\u6570\u636e\u5e93\u64cd\u4f5c#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_33","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_34","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_35","title":"\u8fde\u63a5\u5230\u6570\u636e\u5e93","text":"<p>docker exec -it football_prediction_db psql -U football_user -d football_prediction_dev</p> <p>\u8fde\u63a5\u5230\u6570\u636e\u5e93 docker exec -it football_prediction_db psql -U football_user -d football_prediction_dev</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_36","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_37","title":"\u6570\u636e\u5e93\u5907\u4efd","text":"<p>docker exec football_prediction_db pg_dump -U football_user -d football_prediction_dev &gt; backup.sql</p> <p>\u6570\u636e\u5e93\u5907\u4efd docker exec football_prediction_db pg_dump -U football_user -d football_prediction_dev &gt; backup.sql</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_38","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_39","title":"\u6570\u636e\u5e93\u6062\u590d","text":"<p>docker exec -i football_prediction_db psql -U football_user -d football_prediction_dev &lt; backup.sql</p> <p>\u6570\u636e\u5e93\u6062\u590d docker exec -i football_prediction_db psql -U football_user -d football_prediction_dev &lt; backup.sql</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_40","title":"Part 06","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_06/#_41","title":"=============================================================================","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/","title":"Part 07","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_1","title":"\u7f13\u5b58\u64cd\u4f5c","text":"<p>\u7f13\u5b58\u64cd\u4f5c#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_2","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_3","title":"Part 07","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#redis","title":"\u8fde\u63a5\u5230Redis","text":"<p>docker exec -it football_prediction_redis redis-cli</p> <p>\u8fde\u63a5\u5230Redis docker exec -it football_prediction_redis redis-cli</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_4","title":"Part 07","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_5","title":"\u67e5\u770b\u7f13\u5b58\u7edf\u8ba1","text":"<p>docker exec football_prediction_redis redis-cli info</p> <p>\u67e5\u770b\u7f13\u5b58\u7edf\u8ba1 docker exec football_prediction_redis redis-cli info</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_6","title":"Part 07","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_7","title":"\u6e05\u7a7a\u7f13\u5b58","text":"<p>docker exec football_prediction_redis redis-cli flushdb</p> <p>\u6e05\u7a7a\u7f13\u5b58 docker exec football_prediction_redis redis-cli flushdb</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_8","title":"Part 07","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_9","title":"=============================================================================","text":"<p>=============================================================================#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_10","title":"\u76d1\u63a7\u547d\u4ee4","text":"<p>\u76d1\u63a7\u547d\u4ee4#</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_11","title":"=============================================================================","text":"<p>=============================================================================</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_12","title":"Part 07","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#prometheus","title":"\u67e5\u770bPrometheus\u76ee\u6807\u72b6\u6001","text":"<p>curl -s http://localhost:9090/api/v1/targets | jq</p> <p>\u67e5\u770bPrometheus\u76ee\u6807\u72b6\u6001 curl -s http://localhost:9090/api/v1/targets | jq</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_13","title":"Part 07","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_14","title":"\u67e5\u770b\u544a\u8b66\u72b6\u6001","text":"<p>curl -s http://localhost:9093/api/v1/alerts | jq</p> <p>\u67e5\u770b\u544a\u8b66\u72b6\u6001 curl -s http://localhost:9093/api/v1/alerts | jq</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_15","title":"Part 07","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#prometheus_1","title":"\u91cd\u8f7dPrometheus\u914d\u7f6e","text":"<p>curl -X POST http://localhost:9090/-/reload</p> <p>\u91cd\u8f7dPrometheus\u914d\u7f6e curl -X POST http://localhost:9090/-/reload</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_16","title":"Part 07","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#alertmanager","title":"\u91cd\u8f7dAlertManager\u914d\u7f6e","text":"<p>curl -X POST http://localhost:9093/-/reload <pre><code>#### \ud83d\udd04 \u6269\u7f29\u5bb9\u547d\u4ee4\n\n```bash\n\u91cd\u8f7dAlertManager\u914d\u7f6e\ncurl -X POST http://localhost:9093/-/reload\n</code></pre></p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_17","title":"\ud83d\udd04 \u6269\u7f29\u5bb9\u547d\u4ee4","text":"<pre><code>#=============================================================================\n=============================================================================#\n#Docker Compose \u6269\u7f29\u5bb9\nDocker Compose \u6269\u7f29\u5bb9#\n#=============================================================================\n\n=============================================================================\n#\n#\u6269\u5bb9\u5e94\u7528\u670d\u52a1\ndocker-compose up -d --scale app=3\n\n\u6269\u5bb9\u5e94\u7528\u670d\u52a1\ndocker-compose up -d --scale app=3\n#\n#\u6269\u5bb9\u5de5\u4f5c\u8282\u70b9\ndocker-compose up -d --scale celery-worker=2\n\n\u6269\u5bb9\u5de5\u4f5c\u8282\u70b9\ndocker-compose up -d --scale celery-worker=2\n#\n#\u7f29\u5bb9\u670d\u52a1\ndocker-compose up -d --scale app=1\n\n\u7f29\u5bb9\u670d\u52a1\ndocker-compose up -d --scale app=1\n#\n#\u67e5\u770b\u6269\u5bb9\u72b6\u6001\ndocker-compose ps\n\n\u67e5\u770b\u6269\u5bb9\u72b6\u6001\ndocker-compose ps\n#\n#=============================================================================\n=============================================================================#\n#Kubernetes \u6269\u7f29\u5bb9\nKubernetes \u6269\u7f29\u5bb9#\n#=============================================================================\n\n=============================================================================\n#\n#\u6c34\u5e73\u6269\u5bb9\u5e94\u7528\nkubectl autoscale deployment football-prediction --min=2 --max=10 --cpu-percent=70\n\n\u6c34\u5e73\u6269\u5bb9\u5e94\u7528\nkubectl autoscale deployment football-prediction --min=2 --max=10 --cpu-percent=70\n#\n#\u624b\u52a8\u6269\u5bb9\nkubectl scale deployment football-prediction --replicas=5\n\n\u624b\u52a8\u6269\u5bb9\nkubectl scale deployment football-prediction --replicas=5\n#\n#\u67e5\u770b\u6269\u5bb9\u72b6\u6001\nkubectl get hpa\nkubectl get deployments\n\n\u67e5\u770b\u6269\u5bb9\u72b6\u6001\nkubectl get hpa\nkubectl get deployments\n#\n#=============================================================================\n=============================================================================#\n#\u8d1f\u8f7d\u6d4b\u8bd5\u6269\u5bb9\n\u8d1f\u8f7d\u6d4b\u8bd5\u6269\u5bb9#\n#=============================================================================\n\n=============================================================================\n#\n#\u542f\u52a8\u8d1f\u8f7d\u6d4b\u8bd5\nkubectl apply -f k8s/loadtest/locust-deployment.yaml\n\n\u542f\u52a8\u8d1f\u8f7d\u6d4b\u8bd5\nkubectl apply -f k8s/loadtest/locust-deployment.yaml\n#\n#\u76d1\u63a7\u6269\u5bb9\u6548\u679c\nkubectl get hpa -w\nkubectl get pods -w\n\n\u76d1\u63a7\u6269\u5bb9\u6548\u679c\nkubectl get hpa -w\nkubectl get pods -w\n#\n#\u505c\u6b62\u8d1f\u8f7d\u6d4b\u8bd5\nkubectl delete deployment locust\n</code></pre> <p>\u505c\u6b62\u8d1f\u8f7d\u6d4b\u8bd5 kubectl delete deployment locust <pre><code>###\n###C. \u8054\u7cfb\u4eba/\u8d23\u4efb\u4eba\u6e05\u5355\n\n| \u89d2\u8272 | \u59d3\u540d | \u8054\u7cfb\u65b9\u5f0f | \u804c\u8d23\u8303\u56f4 |\n|------|------|---------|---------|\n| **\u6280\u672f\u8d1f\u8d23\u4eba** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u6280\u672f\u51b3\u7b56\u548c\u67b6\u6784\u8bbe\u8ba1 |\n| **\u8fd0\u7ef4\u8d1f\u8d23\u4eba** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u751f\u4ea7\u73af\u5883\u90e8\u7f72\u548c\u7ef4\u62a4 |\n| **\u5f00\u53d1\u8d1f\u8d23\u4eba** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u5e94\u7528\u5f00\u53d1\u548cbug\u4fee\u590d |\n| **\u6570\u636e\u5e93\u7ba1\u7406\u5458** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u6570\u636e\u5e93\u7ba1\u7406\u548c\u4f18\u5316 |\n| **\u5b89\u5168\u8d1f\u8d23\u4eba** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u5b89\u5168\u914d\u7f6e\u548c\u5ba1\u8ba1 |\n| **\u6d4b\u8bd5\u8d1f\u8d23\u4eba** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u6d4b\u8bd5\u548c\u8d28\u91cf\u4fdd\u8bc1 |\n\nC. \u8054\u7cfb\u4eba/\u8d23\u4efb\u4eba\u6e05\u5355\n\n| \u89d2\u8272 | \u59d3\u540d | \u8054\u7cfb\u65b9\u5f0f | \u804c\u8d23\u8303\u56f4 |\n|------|------|---------|---------|\n| **\u6280\u672f\u8d1f\u8d23\u4eba** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u6280\u672f\u51b3\u7b56\u548c\u67b6\u6784\u8bbe\u8ba1 |\n| **\u8fd0\u7ef4\u8d1f\u8d23\u4eba** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u751f\u4ea7\u73af\u5883\u90e8\u7f72\u548c\u7ef4\u62a4 |\n| **\u5f00\u53d1\u8d1f\u8d23\u4eba** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u5e94\u7528\u5f00\u53d1\u548cbug\u4fee\u590d |\n| **\u6570\u636e\u5e93\u7ba1\u7406\u5458** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u6570\u636e\u5e93\u7ba1\u7406\u548c\u4f18\u5316 |\n| **\u5b89\u5168\u8d1f\u8d23\u4eba** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u5b89\u5168\u914d\u7f6e\u548c\u5ba1\u8ba1 |\n| **\u6d4b\u8bd5\u8d1f\u8d23\u4eba** | [\u5f85\u586b\u5199] | [\u5f85\u586b\u5199] | \u6d4b\u8bd5\u548c\u8d28\u91cf\u4fdd\u8bc1 |\n###\n###D. \u90e8\u7f72\u68c0\u67e5\u6e05\u5355\u6a21\u677f\n\n```markdown\nD. \u90e8\u7f72\u68c0\u67e5\u6e05\u5355\u6a21\u677f\n\n```markdown#\n#\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u90e8\u7f72\u68c0\u67e5\u6e05\u5355\n\n\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u90e8\u7f72\u68c0\u67e5\u6e05\u5355\n##\n##\u90e8\u7f72\u524d\u51c6\u5907\n- [ ] \u4ee3\u7801\u5df2\u5408\u5e76\u81f3\u4e3b\u5206\u652f\n- [ ] CI/CD\u6d41\u7a0b\u901a\u8fc7\n- [ ] \u73af\u5883\u53d8\u91cf\u914d\u7f6e\u5b8c\u6210\n- [ ] \u6570\u636e\u5e93\u5907\u4efd\u5df2\u521b\u5efa\n- [ ] \u7248\u672c\u53f7\u5df2\u786e\u8ba4\n\n\u90e8\u7f72\u524d\u51c6\u5907\n- [ ] \u4ee3\u7801\u5df2\u5408\u5e76\u81f3\u4e3b\u5206\u652f\n- [ ] CI/CD\u6d41\u7a0b\u901a\u8fc7\n- [ ] \u73af\u5883\u53d8\u91cf\u914d\u7f6e\u5b8c\u6210\n- [ ] \u6570\u636e\u5e93\u5907\u4efd\u5df2\u521b\u5efa\n- [ ] \u7248\u672c\u53f7\u5df2\u786e\u8ba4\n##\n##\u90e8\u7f72\u8fc7\u7a0b\n- [ ] \u57fa\u7840\u8bbe\u65bd\u670d\u52a1\u542f\u52a8\n- [ ] \u6570\u636e\u5e93\u670d\u52a1\u542f\u52a8\n- [ ] \u6d88\u606f\u961f\u5217\u542f\u52a8\n- [ ] \u5e94\u7528\u670d\u52a1\u542f\u52a8\n- [ ] \u76d1\u63a7\u670d\u52a1\u542f\u52a8\n\n\u90e8\u7f72\u8fc7\u7a0b\n- [ ] \u57fa\u7840\u8bbe\u65bd\u670d\u52a1\u542f\u52a8\n- [ ] \u6570\u636e\u5e93\u670d\u52a1\u542f\u52a8\n- [ ] \u6d88\u606f\u961f\u5217\u542f\u52a8\n- [ ] \u5e94\u7528\u670d\u52a1\u542f\u52a8\n- [ ] \u76d1\u63a7\u670d\u52a1\u542f\u52a8\n##\n##\u90e8\u7f72\u540e\u9a8c\u8bc1\n- [ ] \u670d\u52a1\u5065\u5eb7\u68c0\u67e5\n- [ ] \u529f\u80fd\u6d4b\u8bd5\u901a\u8fc7\n- [ ] \u6027\u80fd\u6d4b\u8bd5\u901a\u8fc7\n- [ ] \u76d1\u63a7\u544a\u8b66\u6b63\u5e38\n- [ ] \u65e5\u5fd7\u68c0\u67e5\u6b63\u5e38\n\n\u90e8\u7f72\u540e\u9a8c\u8bc1\n- [ ] \u670d\u52a1\u5065\u5eb7\u68c0\u67e5\n- [ ] \u529f\u80fd\u6d4b\u8bd5\u901a\u8fc7\n- [ ] \u6027\u80fd\u6d4b\u8bd5\u901a\u8fc7\n- [ ] \u76d1\u63a7\u544a\u8b66\u6b63\u5e38\n- [ ] \u65e5\u5fd7\u68c0\u67e5\u6b63\u5e38\n##\n##\u56de\u6eda\u51c6\u5907\n- [ ] \u56de\u6eda\u811a\u672c\u5df2\u51c6\u5907\n- [ ] \u5907\u4efd\u6570\u636e\u53ef\u7528\n- [ ] \u56de\u6eda\u9a8c\u8bc1\u6b65\u9aa4\u660e\u786e\n\n\u56de\u6eda\u51c6\u5907\n- [ ] \u56de\u6eda\u811a\u672c\u5df2\u51c6\u5907\n- [ ] \u5907\u4efd\u6570\u636e\u53ef\u7528\n- [ ] \u56de\u6eda\u9a8c\u8bc1\u6b65\u9aa4\u660e\u786e\n##\n##\u90e8\u7f72\u5b8c\u6210\u786e\u8ba4\n- [ ] \u90e8\u7f72\u62a5\u544a\u5df2\u751f\u6210\n- [ ] \u76f8\u5173\u4eba\u5458\u5df2\u901a\u77e5\n- [ ] \u76d1\u63a7\u544a\u8b66\u5df2\u8bbe\u7f6e\n- [ ] \u6587\u6863\u5df2\u66f4\u65b0\n</code></pre></p> <p>\u90e8\u7f72\u5b8c\u6210\u786e\u8ba4 - [ ] \u90e8\u7f72\u62a5\u544a\u5df2\u751f\u6210 - [ ] \u76f8\u5173\u4eba\u5458\u5df2\u901a\u77e5 - [ ] \u76d1\u63a7\u544a\u8b66\u5df2\u8bbe\u7f6e - [ ] \u6587\u6863\u5df2\u66f4\u65b0 ```</p>"},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_18","title":"Part 07","text":""},{"location":"how-to/PRODUCTION_DEPLOYMENT_GUIDE_parts/part_07/#_19","title":"\ud83d\udcde \u7d27\u6025\u8054\u7cfb\u65b9\u5f0f","text":"<p>\u5728\u90e8\u7f72\u8fc7\u7a0b\u4e2d\u9047\u5230\u7d27\u6025\u95ee\u9898\u65f6\uff0c\u8bf7\u8054\u7cfb\uff1a</p> <ul> <li>\u6280\u672f\u652f\u6301\u70ed\u7ebf: [\u5f85\u586b\u5199]</li> <li>\u8fd0\u7ef4\u503c\u73ed\u7535\u8bdd: [\u5f85\u586b\u5199]</li> <li>\u9879\u76ee\u7ba1\u7406: [\u5f85\u586b\u5199]</li> <li>\u5b89\u5168\u4e8b\u4ef6: [\u5f85\u586b\u5199]</li> </ul> <p>\u6587\u6863\u7248\u672c: v1.0 \u6700\u540e\u66f4\u65b0: 2025-09-25 \u7ef4\u62a4\u4eba\u5458: \u7cfb\u7edf\u8fd0\u7ef4\u56e2\u961f</p> <p>\u672c\u624b\u518c\u4e3a\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u7684\u6807\u51c6\u64cd\u4f5c\u6307\u5357\uff0c\u8bf7\u4e25\u683c\u6309\u7167\u6b65\u9aa4\u6267\u884c\u3002\u5982\u6709\u7591\u95ee\uff0c\u8bf7\u53ca\u65f6\u8054\u7cfb\u76f8\u5173\u8d1f\u8d23\u4eba\u3002</p> <p>\ud83d\udcde \u7d27\u6025\u8054\u7cfb\u65b9\u5f0f</p> <p>\u5728\u90e8\u7f72\u8fc7\u7a0b\u4e2d\u9047\u5230\u7d27\u6025\u95ee\u9898\u65f6\uff0c\u8bf7\u8054\u7cfb\uff1a</p> <ul> <li>\u6280\u672f\u652f\u6301\u70ed\u7ebf: [\u5f85\u586b\u5199]</li> <li>\u8fd0\u7ef4\u503c\u73ed\u7535\u8bdd: [\u5f85\u586b\u5199]</li> <li>\u9879\u76ee\u7ba1\u7406: [\u5f85\u586b\u5199]</li> <li>\u5b89\u5168\u4e8b\u4ef6: [\u5f85\u586b\u5199]</li> </ul> <p>\u6587\u6863\u7248\u672c: v1.0 \u6700\u540e\u66f4\u65b0: 2025-09-25 \u7ef4\u62a4\u4eba\u5458: \u7cfb\u7edf\u8fd0\u7ef4\u56e2\u961f</p> <p>\u672c\u624b\u518c\u4e3a\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u751f\u4ea7\u90e8\u7f72\u7684\u6807\u51c6\u64cd\u4f5c\u6307\u5357\uff0c\u8bf7\u4e25\u683c\u6309\u7167\u6b65\u9aa4\u6267\u884c\u3002\u5982\u6709\u7591\u95ee\uff0c\u8bf7\u53ca\u65f6\u8054\u7cfb\u76f8\u5173\u8d1f\u8d23\u4eba\u3002</p>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/","title":"\ud83d\ude80 \u4f18\u5316\u540e\u7684\u9879\u76ee\u5feb\u901f\u5f00\u59cb\u6307\u5357","text":"<p>\u672c\u6307\u5357\u5e2e\u52a9\u60a8\u5feb\u901f\u4e0a\u624b\u4f18\u5316\u540e\u7684\u9879\u76ee\u914d\u7f6e</p>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_2","title":"\ud83d\udccb \u4f18\u5316\u4eae\u70b9\u4e00\u89c8","text":"<p>\u2705 \u5de5\u5177\u94fe\u7b80\u5316: ruff + mypy\uff08\u66ff\u4ee3 black/isort/flake8\uff09 \u2705 \u8986\u76d6\u7387\u7edf\u4e00: CI(80%) / Dev(60%) / Min(50%) \u2705 Docker \u4f18\u5316: BuildKit \u7f13\u5b58\uff0c\u6784\u5efa\u63d0\u901f 30-50% \u2705 \u914d\u7f6e\u89c4\u8303: \u82f1\u6587\u5de5\u4f5c\u6d41\u540d\uff0c\u5b8c\u5584\u7684 .env.example</p>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#3","title":"\ud83c\udfc3 \u5feb\u901f\u4e0a\u624b\uff083\u5206\u949f\uff09","text":""},{"location":"improvements/OPTIMIZATION_QUICKSTART/#1","title":"1\ufe0f\u20e3 \u521d\u59cb\u5316\u73af\u5883","text":"<pre><code># \u6e05\u7406\u65e7\u73af\u5883\uff08\u53ef\u9009\uff0c\u63a8\u8350\uff09\nmake clean-env\n\n# \u5b89\u88c5\u4f9d\u8d56\uff08\u4f7f\u7528\u4f18\u5316\u540e\u7684\u914d\u7f6e\uff09\nmake install\n\n# \u9a8c\u8bc1\u73af\u5883\nmake env-check\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#2","title":"2\ufe0f\u20e3 \u914d\u7f6e\u73af\u5883\u53d8\u91cf","text":"<pre><code># \u590d\u5236\u73af\u5883\u53d8\u91cf\u6a21\u677f\ncp .env.example .env\n\n# \u7f16\u8f91\u914d\u7f6e\uff08\u586b\u5165\u5b9e\u9645\u503c\uff09\nvim .env\n# \u6216\u4f7f\u7528\u4f60\u559c\u6b22\u7684\u7f16\u8f91\u5668\nnano .env\n\n# \u9a8c\u8bc1\u914d\u7f6e\nmake check-env\n</code></pre> <p>\u6700\u5c0f\u5fc5\u9700\u914d\u7f6e:</p> <pre><code>DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/football_prediction_dev\nREDIS_URL=redis://:redis_password@localhost:6379/0\nSECRET_KEY=your-secret-key-here-please-change-this\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#3_1","title":"3\ufe0f\u20e3 \u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1","text":"<pre><code># \u5feb\u901f\u6d4b\u8bd5\uff08\u5f00\u53d1\u73af\u5883\uff0c60% \u8986\u76d6\u7387\uff09\nmake coverage-local\n\n# \u5b8c\u6574\u6d4b\u8bd5\uff08CI \u6807\u51c6\uff0c80% \u8986\u76d6\u7387\uff09\nmake coverage-ci\n\n# \u67e5\u770b\u8986\u76d6\u7387\u62a5\u544a\nopen htmlcov/index.html  # macOS\n# \u6216\nxdg-open htmlcov/index.html  # Linux\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_3","title":"\ud83d\udd27 \u65b0\u7684\u5f00\u53d1\u5de5\u4f5c\u6d41","text":""},{"location":"improvements/OPTIMIZATION_QUICKSTART/#ruff","title":"\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5\uff08\u4f7f\u7528 Ruff\uff09","text":"<pre><code># \u8fd0\u884c Lint\uff08ruff + mypy\uff09\nmake lint\n\n# \u81ea\u52a8\u683c\u5f0f\u5316\u4ee3\u7801\nmake fmt\n\n# \u5b8c\u6574\u8d28\u91cf\u68c0\u67e5\uff08lint + fmt + test\uff09\nmake quality\n</code></pre> <p>Ruff \u4f18\u52bf:</p> <ul> <li>\u26a1 \u901f\u5ea6: \u6bd4 Black \u5feb 10-100 \u500d</li> <li>\ud83c\udfaf \u4e00\u4f53\u5316: \u66ff\u4ee3 flake8 + isort + black</li> <li>\ud83d\udd04 \u81ea\u52a8\u4fee\u590d: <code>--fix</code> \u6807\u5fd7\u81ea\u52a8\u4fee\u590d\u95ee\u9898</li> </ul>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_4","title":"\u8986\u76d6\u7387\u6d4b\u8bd5\uff08\u7edf\u4e00\u9608\u503c\uff09","text":"<pre><code># CI \u73af\u5883\uff0880% \u9608\u503c\uff09\nmake coverage-ci\n\n# \u5f00\u53d1\u73af\u5883\uff0860% \u9608\u503c\uff09\nmake coverage-local\n\n# \u81ea\u5b9a\u4e49\u9608\u503c\nCOVERAGE_THRESHOLD=70 make coverage\n\n# \u67e5\u770b\u8986\u76d6\u7387\u8d8b\u52bf\nmake coverage-dashboard\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#docker-buildkit","title":"Docker \u5f00\u53d1\uff08\u542f\u7528 BuildKit\uff09","text":"<pre><code># \u65b9\u6cd51: \u4e34\u65f6\u542f\u7528\nDOCKER_BUILDKIT=1 docker-compose build\n\n# \u65b9\u6cd52: \u6c38\u4e45\u542f\u7528\uff08\u63a8\u8350\uff09\necho 'export DOCKER_BUILDKIT=1' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n\n# \u6784\u5efa\u5e76\u542f\u52a8\nmake up\n\n# \u67e5\u770b\u65e5\u5fd7\nmake logs\n</code></pre> <p>BuildKit \u4f18\u52bf:</p> <pre><code>\u9996\u6b21\u6784\u5efa: 2-3 \u5206\u949f\n\u91cd\u590d\u6784\u5efa\uff08\u6709\u7f13\u5b58\uff09: 30-60 \u79d2\uff08\u63d0\u901f 70%\uff09\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_5","title":"\ud83d\udcca \u8986\u76d6\u7387\u9608\u503c\u8bf4\u660e","text":"\u73af\u5883 \u9608\u503c \u547d\u4ee4 \u4f7f\u7528\u573a\u666f CI 80% <code>make coverage-ci</code> \u63d0\u4ea4\u4ee3\u7801\u524d\u3001CI/CD \u6d41\u7a0b Dev 60% <code>make coverage-local</code> \u672c\u5730\u5f00\u53d1\u3001\u5feb\u901f\u8fed\u4ee3 Min 50% <code>COVERAGE_THRESHOLD_MIN=50</code> \u6700\u4f4e\u8981\u6c42\u3001\u7d27\u6025\u4fee\u590d"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_6","title":"\u81ea\u5b9a\u4e49\u9608\u503c","text":"<pre><code># \u4e34\u65f6\u8986\u76d6 CI \u9608\u503c\u4e3a 85%\nCOVERAGE_THRESHOLD_CI=85 make coverage-ci\n\n# \u4e34\u65f6\u8986\u76d6\u5f00\u53d1\u9608\u503c\u4e3a 55%\nCOVERAGE_THRESHOLD_DEV=55 make coverage-local\n\n# \u5728 ci-verify.sh \u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u9608\u503c\nCOVERAGE_THRESHOLD=75 ./ci-verify.sh\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_7","title":"\ud83c\udfaf \u5e38\u7528\u547d\u4ee4\u901f\u67e5","text":""},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_8","title":"\u73af\u5883\u7ba1\u7406","text":"<pre><code>make venv           # \u521b\u5efa\u865a\u62df\u73af\u5883\nmake install        # \u5b89\u88c5\u4f9d\u8d56\nmake env-check      # \u68c0\u67e5\u73af\u5883\u5065\u5eb7\nmake lock-deps      # \u9501\u5b9a\u4f9d\u8d56\u7248\u672c\nmake clean-env      # \u6e05\u7406\u73af\u5883\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_9","title":"\u4ee3\u7801\u8d28\u91cf","text":"<pre><code>make lint           # Lint\uff08ruff + mypy\uff09\nmake fmt            # \u683c\u5f0f\u5316\uff08ruff format\uff09\nmake quality        # \u5b8c\u6574\u8d28\u91cf\u68c0\u67e5\nmake prepush        # \u63d0\u4ea4\u524d\u9a8c\u8bc1\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_10","title":"\u6d4b\u8bd5","text":"<pre><code>make test           # \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\nmake test-quick     # \u5feb\u901f\u6d4b\u8bd5\uff08\u6392\u9664\u6162\u901f\uff09\nmake coverage-ci    # CI \u8986\u76d6\u7387\uff0880%\uff09\nmake coverage-local # \u5f00\u53d1\u8986\u76d6\u7387\uff0860%\uff09\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#docker","title":"Docker","text":"<pre><code>make up             # \u542f\u52a8\u670d\u52a1\nmake down           # \u505c\u6b62\u670d\u52a1\nmake logs           # \u67e5\u770b\u65e5\u5fd7\nmake deploy         # \u90e8\u7f72\uff08\u5e26 git-sha \u6807\u7b7e\uff09\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#cicd","title":"CI/CD","text":"<pre><code>make ci             # CI \u6a21\u62df\nmake prepush        # \u63d0\u4ea4\u524d\u5b8c\u6574\u9a8c\u8bc1\n./ci-verify.sh      # \u672c\u5730 CI \u9a8c\u8bc1\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_11","title":"\ud83d\udd0d \u6545\u969c\u6392\u9664","text":""},{"location":"improvements/OPTIMIZATION_QUICKSTART/#1-ruff","title":"\u95ee\u98981: Ruff \u547d\u4ee4\u627e\u4e0d\u5230","text":"<p>\u75c7\u72b6:</p> <pre><code>make lint\nruff: command not found\n</code></pre> <p>\u89e3\u51b3:</p> <pre><code># \u91cd\u65b0\u5b89\u88c5\u4f9d\u8d56\nmake clean-env\nmake install\n\n# \u6216\u624b\u52a8\u5b89\u88c5 ruff\nsource .venv/bin/activate\npip install ruff\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#2-docker","title":"\u95ee\u98982: Docker \u6784\u5efa\u7f13\u5b58\u672a\u751f\u6548","text":"<p>\u75c7\u72b6: \u6bcf\u6b21\u6784\u5efa\u90fd\u5f88\u6162\uff0c\u6ca1\u6709\u4f7f\u7528\u7f13\u5b58</p> <p>\u89e3\u51b3:</p> <pre><code># \u68c0\u67e5 Docker \u7248\u672c\uff08\u9700\u8981 &gt;= 20.10\uff09\ndocker --version\n\n# \u542f\u7528 BuildKit\nexport DOCKER_BUILDKIT=1\n\n# \u6216\u5728 daemon.json \u4e2d\u6c38\u4e45\u542f\u7528\nsudo vim /etc/docker/daemon.json\n{\n  \"features\": {\n    \"buildkit\": true\n  }\n}\nsudo systemctl restart docker\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#3_2","title":"\u95ee\u98983: \u8986\u76d6\u7387\u9608\u503c\u5931\u8d25","text":"<p>\u75c7\u72b6:</p> <pre><code>FAILED: coverage &lt; 80%\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848:</p> <ol> <li>\u5f00\u53d1\u73af\u5883\u4f7f\u7528\u8f83\u4f4e\u9608\u503c:</li> </ol> <pre><code>make coverage-local  # 60% \u9608\u503c\n</code></pre> <ol> <li>\u67e5\u770b\u672a\u8986\u76d6\u7684\u4ee3\u7801:</li> </ol> <pre><code>make coverage\nopen htmlcov/index.html\n</code></pre> <ol> <li>\u4e34\u65f6\u964d\u4f4e\u9608\u503c\uff08\u7d27\u6025\u60c5\u51b5\uff09:</li> </ol> <pre><code>COVERAGE_THRESHOLD=70 make coverage\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#4-github-actions","title":"\u95ee\u98984: GitHub Actions \u5de5\u4f5c\u6d41\u672a\u89e6\u53d1","text":"<p>\u75c7\u72b6: \u91cd\u547d\u540d\u540e\u5de5\u4f5c\u6d41\u4e0d\u6267\u884c</p> <p>\u89e3\u51b3: \u68c0\u67e5\u5206\u652f\u4fdd\u62a4\u89c4\u5219\u548c\u5de5\u4f5c\u6d41\u5f15\u7528</p> <pre><code># \u68c0\u67e5 .github/workflows/ \u4e2d\u7684\u6587\u4ef6\u540d\nls -la .github/workflows/*.yml\n\n# \u786e\u4fdd\u5f15\u7528\u66f4\u65b0\uff08\u5982\u679c\u6709\u8de8\u6587\u4ef6\u5f15\u7528\uff09\ngrep -r \"CI\u6d41\u6c34\u7ebf\" .github/\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_12","title":"\ud83d\udcda \u6df1\u5165\u5b66\u4e60","text":""},{"location":"improvements/OPTIMIZATION_QUICKSTART/#ruff_1","title":"Ruff \u4f7f\u7528\u6587\u6863","text":"<pre><code># \u67e5\u770b\u6240\u6709\u89c4\u5219\nruff rule --all\n\n# \u68c0\u67e5\u7279\u5b9a\u6587\u4ef6\nruff check src/main.py\n\n# \u81ea\u52a8\u4fee\u590d\nruff check --fix src/\n\n# \u683c\u5f0f\u5316\nruff format src/\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_13","title":"\u8986\u76d6\u7387\u914d\u7f6e","text":"<p>\u67e5\u770b <code>pytest.ini</code> \u4e86\u89e3\u8be6\u7ec6\u914d\u7f6e:</p> <pre><code>[coverage:run]\nsource = src\nomit = */tests/*, */legacy/*\n\n[coverage:report]\nprecision = 2\nshow_missing = True\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#docker-buildkit_1","title":"Docker BuildKit","text":"<p>\u4e86\u89e3\u66f4\u591a\u7f13\u5b58\u9009\u9879:</p> <pre><code># \u7f13\u5b58\u6302\u8f7d\uff08pip\uff09\nRUN --mount=type=cache,target=/root/.cache/pip \\\n    pip install -r requirements.lock\n\n# \u7f13\u5b58\u6302\u8f7d\uff08apt\uff09\nRUN --mount=type=cache,target=/var/cache/apt \\\n    apt-get update &amp;&amp; apt-get install -y curl\n</code></pre>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_14","title":"\ud83c\udf93 \u63a8\u8350\u9605\u8bfb","text":"<ol> <li>Ruff \u5b98\u65b9\u6587\u6863: https://docs.astral.sh/ruff/</li> <li>Docker BuildKit: https://docs.docker.com/build/buildkit/</li> <li>pytest-cov \u6587\u6863: https://pytest-cov.readthedocs.io/</li> <li>\u9879\u76ee\u4f18\u5316\u603b\u7ed3: \u67e5\u770b <code>OPTIMIZATION_SUMMARY.md</code></li> </ol>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_15","title":"\u2705 \u9a8c\u8bc1\u6e05\u5355","text":"<p>\u5728\u5f00\u59cb\u5f00\u53d1\u524d\uff0c\u786e\u4fdd\u4ee5\u4e0b\u6b65\u9aa4\u5df2\u5b8c\u6210\uff1a</p> <ul> <li> \u5df2\u5b89\u88c5\u4f9d\u8d56 (<code>make install</code>)</li> <li> \u5df2\u914d\u7f6e <code>.env</code> \u6587\u4ef6</li> <li> \u73af\u5883\u68c0\u67e5\u901a\u8fc7 (<code>make env-check</code>)</li> <li> \u80fd\u8fd0\u884c\u6d4b\u8bd5 (<code>make test-quick</code>)</li> <li> \u80fd\u8fd0\u884c lint (<code>make lint</code>)</li> <li> Docker \u670d\u52a1\u6b63\u5e38 (<code>make up</code>)</li> <li> \u5df2\u542f\u7528 BuildKit (<code>export DOCKER_BUILDKIT=1</code>)</li> </ul>"},{"location":"improvements/OPTIMIZATION_QUICKSTART/#_16","title":"\ud83d\ude80 \u4e0b\u4e00\u6b65","text":"<ol> <li>\u5f00\u59cb\u5f00\u53d1: <code>make context</code> \u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587</li> <li>\u63d0\u4ea4\u524d\u9a8c\u8bc1: <code>make prepush</code></li> <li>\u672c\u5730 CI \u9a8c\u8bc1: <code>./ci-verify.sh</code></li> <li>\u67e5\u770b\u6240\u6709\u547d\u4ee4: <code>make help</code></li> </ol> <p>\u795d\u5f00\u53d1\u6109\u5feb\uff01 \ud83c\udf89</p> <p>\u5982\u6709\u95ee\u9898\uff0c\u8bf7\u67e5\u770b\uff1a</p> <ul> <li>\ud83d\udcd6 <code>OPTIMIZATION_SUMMARY.md</code> - \u8be6\u7ec6\u4f18\u5316\u62a5\u544a</li> <li>\ud83d\udcd6 <code>README.md</code> - \u9879\u76ee\u8bf4\u660e</li> <li>\ud83d\udcd6 <code>Makefile</code> - \u6240\u6709\u53ef\u7528\u547d\u4ee4\uff08<code>make help</code>\uff09</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/","title":"Quality Improvement Plan","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#executive-summary","title":"\ud83d\udccb Executive Summary","text":"<p>This document outlines the comprehensive quality improvement strategy for the Football Prediction project, implementing Phase 6: Long-term Optimization initiatives. The plan establishes clear quality targets, monitoring mechanisms, and continuous improvement processes.</p>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#quality-targets-by-module","title":"\ud83c\udfaf Quality Targets by Module","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#zero-tolerance-standards","title":"Zero Tolerance Standards","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#core-production-modules","title":"Core Production Modules","text":"Module Ruff Target MyPy Target Priority Status <code>src/services/</code> 0 errors 0 errors \ud83d\udd34 Critical \u2705 Achieved (Phase 4) <code>src/api/</code> &lt; 100 errors 0 errors \ud83d\udd34 Critical \ud83d\udfe1 In Progress <code>src/monitoring/</code> &lt; 100 errors 0 errors \ud83d\udfe1 High \ud83d\udfe1 In Progress <code>src/database/</code> &lt; 50 errors 0 errors \ud83d\udfe1 High \ud83d\udfe1 In Progress"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#test-modules","title":"Test Modules","text":"Module Ruff Target MyPy Target Priority Status <code>tests/unit/</code> &lt; 500 errors 0 errors \ud83d\udfe1 High \ud83d\udfe1 In Progress <code>tests/integration/</code> &lt; 100 errors 0 errors \ud83d\udfe1 High \ud83d\udfe1 In Progress <code>tests/e2e/</code> &lt; 50 errors 0 errors \ud83d\udfe2 Medium \u2705 Achieved (Phase 3)"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#quality-gate-thresholds","title":"Quality Gate Thresholds","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#ci-quality-gates","title":"CI Quality Gates","text":"<pre><code>Quality Gates:\n  - Ruff Total Errors: &lt; 1000\n  - MyPy Errors: 0\n  - Test Pass Rate: \u226595%\n  - Coverage: \u226580% (CI), \u226560% (local)\n</code></pre>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#module-level-gates","title":"Module-level Gates","text":"<pre><code>Module Gates:\n  src/services/:\n    ruff_errors: 0\n    mypy_errors: 0\n\n  src/api/:\n    ruff_errors: &lt; 100\n    mypy_errors: 0\n\n  src/monitoring/:\n    ruff_errors: &lt; 100\n    mypy_errors: 0\n\n  tests/unit/:\n    ruff_errors: &lt; 500\n    mypy_errors: 0\n</code></pre>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#monitoring-and-measurement","title":"\ud83d\udcca Monitoring and Measurement","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#daily-quality-trends","title":"Daily Quality Trends","text":"<ul> <li>Frequency: Daily at 02:00 UTC</li> <li>Tool: <code>scripts/collect_quality_trends.py</code></li> <li>Output: <code>docs/_reports/RUFF_TREND_YYYYMMDD.md</code></li> <li>Metrics:</li> <li>Ruff error count by module</li> <li>MyPy type errors</li> <li>Test pass rates</li> <li>Coverage trends</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#weekly-quality-reviews","title":"Weekly Quality Reviews","text":"<ul> <li>Frequency: Every Monday</li> <li>Review Items:</li> <li>Trend analysis from daily reports</li> <li>Gate threshold compliance</li> <li>Improvement progress</li> <li>Blocker identification</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#monthly-quality-reports","title":"Monthly Quality Reports","text":"<ul> <li>Frequency: First day of each month</li> <li>Content:</li> <li>Monthly trend summary</li> <li>Target achievement status</li> <li>Improvement recommendations</li> <li>Resource allocation planning</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#quarterly-sprint-mechanism","title":"\ud83d\uddd3\ufe0f Quarterly Sprint Mechanism","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#sprint-schedule-updated-2025-09-30","title":"Sprint Schedule (Updated 2025-09-30)","text":"Quarter Duration Focus Areas Deliverables Status Q1 2024 Jan-Mar Core module cleanup services/ \u2192 0 errors \u2705 Complete Q2 2024 Apr-Jun API and monitoring api/, monitoring/ \u2192 &lt; 100 errors \u2705 Complete Q3 2024 Jul-Sep Test suite quality tests/ \u2192 target levels \u2705 Complete Q4 2024 Oct-Dec Global optimization All targets achieved \ud83d\udfe1 In Progress Q1 2025 Jan-Mar Syntax error cleanup Reduce syntax errors to &lt; 10,000 \ud83d\udccb Planned Q2 2025 Apr-Jun Type checking recovery MyPy fully functional \ud83d\udccb Planned Q3 2025 Jul-Sep Quality consistency Zero new technical debt \ud83d\udccb Planned Q4 2025 Oct-Dec Self-healing system Automated quality maintenance \ud83d\udccb Planned"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#current-sprint-status-q4-2024-global-optimization","title":"Current Sprint Status: Q4 2024 Global Optimization","text":"<p>Start Date: 2025-09-30 Target Completion: 2025-12-31</p>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#sprint-goals-based-on-ruff_trend_reviewmd-analysis","title":"Sprint Goals (Based on RUFF_TREND_REVIEW.md analysis)","text":"<ol> <li>Priority 1: Reduce syntax errors from 52,413 to &lt; 10,000</li> <li>Priority 2: Restore MyPy type checking functionality</li> <li>Priority 3: Clear syntax errors in core business modules</li> </ol>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#sprint-backlog","title":"Sprint Backlog","text":"<ul> <li> Focus on src/ directory syntax error cleanup (Priority 1)</li> <li> Fix critical test files blocking test collection (Priority 2)</li> <li> Unblock MyPy by fixing syntax errors in key modules (Priority 3)</li> <li> Implement daily trend monitoring (Phase 6 system)</li> <li> Execute weekly quality reviews</li> <li> Prepare Q1 2025 sprint planning</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#sprint-process","title":"Sprint Process","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#1-planning-phase-first-week","title":"1. Planning Phase (First week)","text":"<ul> <li>Activities:</li> <li>Review current quality metrics</li> <li>Identify top priority issues</li> <li>Set sprint-specific targets</li> <li> <p>Allocate resources</p> </li> <li> <p>Deliverables:</p> </li> <li>Sprint plan document</li> <li>Updated quality targets</li> <li>Resource assignment</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#2-execution-phase-weeks-2-11","title":"2. Execution Phase (Weeks 2-11)","text":"<ul> <li>Activities:</li> <li>Daily quality monitoring</li> <li>Focused cleanup sessions</li> <li>Progress tracking</li> <li> <p>Issue resolution</p> </li> <li> <p>Tools:</p> </li> <li><code>make prepush</code> for local validation</li> <li>CI quality gates for automated checking</li> <li>Trend reports for monitoring</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#3-review-phase-week-12","title":"3. Review Phase (Week 12)","text":"<ul> <li>Activities:</li> <li>Comprehensive quality assessment</li> <li>Target achievement evaluation</li> <li>Lessons learned documentation</li> <li> <p>Next quarter planning</p> </li> <li> <p>Deliverables:</p> </li> <li>Quarterly report (<code>docs/_reports/QUALITY_QUARTERLY_YYYYQX.md</code>)</li> <li>Updated improvement plan</li> <li>Success metrics</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#quarterly-report-template","title":"Quarterly Report Template","text":"<pre><code># Quality Quarterly Report - {Year} Q{Quarter}\n\n## Executive Summary\n- Period: {Start Date} - {End Date}\n- Overall Status: {Status}\n- Key Achievements: {Achievements}\n\n## Target Achievement\n| Module | Target | Actual | Status |\n|--------|--------|--------|---------|\n| src/services/ | 0 errors | {Actual} | {Status} |\n| src/api/ | &lt; 100 errors | {Actual} | {Status} |\n| ... | ... | ... | ... |\n\n## Trend Analysis\n- Quality improvement: {Percentage}%\n- Error reduction: {Number} errors\n- Test coverage: {Percentage}%\n\n## Key Initiatives\n1. {Initiative 1}\n2. {Initiative 2}\n3. ...\n\n## Next Quarter Focus\n- Priority 1: {Focus Area 1}\n- Priority 2: {Focus Area 2}\n- Priority 3: {Focus Area 3}\n</code></pre>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#implementation-strategy","title":"\ud83d\ude80 Implementation Strategy","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#phase-1-foundation-weeks-1-4","title":"Phase 1: Foundation (Weeks 1-4)","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#objectives","title":"Objectives","text":"<ul> <li>Establish monitoring infrastructure</li> <li>Implement daily trend collection</li> <li>Set up quality gates</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#actions","title":"Actions","text":"<ol> <li>Monitoring Setup</li> <li>Deploy <code>scripts/collect_quality_trends.py</code></li> <li>Configure CI nightly job</li> <li> <p>Initialize trend tracking</p> </li> <li> <p>Gate Implementation</p> </li> <li>Add module-level quality gates to CI</li> <li>Implement pre-push hook enforcement</li> <li> <p>Create threshold breach alerts</p> </li> <li> <p>Documentation</p> </li> <li>Complete quality improvement plan</li> <li>Establish reporting templates</li> <li>Create process documentation</li> </ol>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#phase-2-target-achievement-weeks-5-8","title":"Phase 2: Target Achievement (Weeks 5-8)","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#objectives_1","title":"Objectives","text":"<ul> <li>Meet zero tolerance targets for core modules</li> <li>Reduce error counts across all modules</li> <li>Maintain 95%+ test pass rate</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#actions_1","title":"Actions","text":"<ol> <li>Core Module Focus</li> <li><code>src/services/</code> \u2192 0 Ruff errors</li> <li><code>src/api/</code> \u2192 &lt; 100 Ruff errors</li> <li> <p><code>src/monitoring/</code> \u2192 &lt; 100 Ruff errors</p> </li> <li> <p>Test Suite Enhancement</p> </li> <li><code>tests/unit/</code> \u2192 &lt; 500 Ruff errors</li> <li>Improve test coverage</li> <li> <p>Fix failing tests</p> </li> <li> <p>Continuous Monitoring</p> </li> <li>Daily trend analysis</li> <li>Weekly progress reviews</li> <li>Monthly status reports</li> </ol>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#phase-3-optimization-weeks-9-12","title":"Phase 3: Optimization (Weeks 9-12)","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#objectives_2","title":"Objectives","text":"<ul> <li>Achieve all quality targets</li> <li>Establish sustainable quality processes</li> <li>Prepare for next quarter</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#actions_2","title":"Actions","text":"<ol> <li>Final Cleanup</li> <li>Address remaining issues</li> <li>Optimize test performance</li> <li> <p>Enhance monitoring capabilities</p> </li> <li> <p>Process Optimization</p> </li> <li>Refine quality gates</li> <li>Improve reporting mechanisms</li> <li> <p>Document best practices</p> </li> <li> <p>Quarter Review</p> </li> <li>Comprehensive assessment</li> <li>Success metrics evaluation</li> <li>Next quarter planning</li> </ol>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#success-metrics","title":"\ud83d\udcc8 Success Metrics","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#leading-indicators","title":"Leading Indicators","text":"<ul> <li>Daily Error Reduction: Target 5% reduction per week</li> <li>Trend Consistency: Maintain downward error trends</li> <li>Gate Compliance: 100% quality gate pass rate</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#lagging-indicators","title":"Lagging Indicators","text":"<ul> <li>Target Achievement: 100% of module targets met</li> <li>Quality Score: Overall project quality rating</li> <li>Development Velocity: Maintain/improve development speed</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#quality-score-calculation","title":"Quality Score Calculation","text":"<pre><code>Quality Score = (Ruff Score * 0.4) + (MyPy Score * 0.3) + (Test Score * 0.3)\n\nWhere:\n- Ruff Score = 100 - (current_errors / target_errors * 100)\n- MyPy Score = 100 - (mypy_errors * 10)\n- Test Score = pass_rate\n</code></pre>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#tooling-and-automation","title":"\ud83d\udd27 Tooling and Automation","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#quality-monitoring-tools","title":"Quality Monitoring Tools","text":"<ol> <li>Daily Trends: <code>scripts/collect_quality_trends.py</code></li> <li>CI Gates: GitHub Actions quality checks</li> <li>Local Validation: <code>make prepush</code> command</li> <li>Trend Analysis: Automated report generation</li> </ol>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#automation-scripts","title":"Automation Scripts","text":"<pre><code># Daily quality check\nmake prepush\n\n# Trend collection\npython scripts/collect_quality_trends.py\n\n# Module-specific validation\nruff check src/services/ --statistics\nmypy src/services/ --no-error-summary\npytest tests/unit/services/ -q\n</code></pre>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#integration-points","title":"Integration Points","text":"<ul> <li>GitHub Actions: CI/CD pipeline integration</li> <li>Local Development: Pre-commit hooks</li> <li>Project Management: Kanban board updates</li> <li>Documentation: Automated report generation</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#continuous-improvement","title":"\ud83c\udfaf Continuous Improvement","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#feedback-loops","title":"Feedback Loops","text":"<ol> <li>Daily: Automated trend reports</li> <li>Weekly: Team quality reviews</li> <li>Monthly: Management status updates</li> <li>Quarterly: Strategic planning sessions</li> </ol>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#process-improvements","title":"Process Improvements","text":"<ul> <li>Tool Enhancement: Regular tool updates and optimizations</li> <li>Threshold Adjustment: Dynamic target refinement</li> <li>Process Optimization: Workflow improvements</li> <li>Training: Team skill development</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#knowledge-management","title":"Knowledge Management","text":"<ul> <li>Documentation: Continuous process documentation</li> <li>Best Practices: Shared coding standards</li> <li>Lessons Learned: Regular retrospectives</li> <li>Knowledge Sharing: Team presentations</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#governance-and-responsibilities","title":"\ud83d\udcde Governance and Responsibilities","text":""},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#quality-team","title":"Quality Team","text":"<ul> <li>Quality Lead: Overall quality strategy</li> <li>Module Owners: Specific module quality</li> <li>Development Team: Code quality implementation</li> <li>DevOps: CI/CD and monitoring</li> </ul>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#review-process","title":"Review Process","text":"<ol> <li>Daily: Automated quality checks</li> <li>Weekly: Team quality stand-up</li> <li>Monthly: Quality steering committee</li> <li>Quarterly: Executive quality review</li> </ol>"},{"location":"improvements/QUALITY_IMPROVEMENT_PLAN/#escalation-process","title":"Escalation Process","text":"<ol> <li>Blocker Issues: Immediate team response</li> <li>Threshold Breach: Quality lead notification</li> <li>Critical Degradation: Management escalation</li> <li>Crisis Management: Emergency response plan</li> </ol> <p>Document Version: 1.0 Last Updated: 2025-09-30 Next Review: 2025-10-30 Owner: Quality Team</p> <p>Related Documents:</p> <ul> <li>TASK_KANBAN.md - Project status tracking</li> <li>QUALITY_GUARDRAIL.md - Quality gate configuration</li> <li>RUFF_TREND_*.md - Daily quality trend reports</li> </ul>"},{"location":"improvements/improvement_summary_phase1_2/","title":"\u6280\u672f\u503a\u52a1\u6539\u8fdb\u603b\u7ed3\u62a5\u544a\uff08\u7b2c\u4e00\u9636\u6bb5\u548c\u7b2c\u4e8c\u9636\u6bb5\uff09","text":"<p>\u6267\u884c\u65e5\u671f: 2025-10-12 \u6539\u8fdb\u8303\u56f4: \u7b2c\u4e00\u9636\u6bb5\uff08\u7d27\u6025\u4fee\u590d\uff09\u548c\u7b2c\u4e8c\u9636\u6bb5\uff08\u914d\u7f6e\u4f18\u5316\uff09</p>"},{"location":"improvements/improvement_summary_phase1_2/#_2","title":"\ud83d\udcca \u6267\u884c\u6982\u51b5","text":""},{"location":"improvements/improvement_summary_phase1_2/#_3","title":"\u5b8c\u6210\u7684\u4efb\u52a1","text":"\u4efb\u52a1ID \u4efb\u52a1\u540d\u79f0 \u72b6\u6001 \u8017\u65f6 \u8d1f\u8d23\u4eba 1.1 \u4fee\u590dCORS\u5b89\u5168\u914d\u7f6e \u2705 \u5b8c\u6210 2\u5c0f\u65f6 Claude 1.2 \u6e05\u7406\u9057\u7559\u4ee3\u7801\u76ee\u5f55 \u2705 \u5b8c\u6210 4\u5c0f\u65f6 Claude 1.3 \u5220\u9664print\u8bed\u53e5 \u2705 \u5b8c\u6210 8\u5c0f\u65f6 Claude 2.1 \u7b80\u5316\u4f9d\u8d56\u7ba1\u7406 \u2705 \u5b8c\u6210 6\u5c0f\u65f6 Claude 2.2 \u7edf\u4e00Docker\u914d\u7f6e \u2705 \u5b8c\u6210 6\u5c0f\u65f6 Claude <p>\u603b\u8ba1: 5\u4e2a\u4efb\u52a1\uff0c26\u5c0f\u65f6\uff0c\u5df2\u5b8c\u6210100%</p>"},{"location":"improvements/improvement_summary_phase1_2/#_4","title":"\ud83c\udfaf \u6210\u679c\u8be6\u8ff0","text":""},{"location":"improvements/improvement_summary_phase1_2/#11-cors","title":"1.1 \u4fee\u590dCORS\u5b89\u5168\u914d\u7f6e \u2705","text":"<p>\u95ee\u9898: CORS\u914d\u7f6e\u5206\u6563\uff0c\u5b58\u5728\u5b89\u5168\u98ce\u9669</p> <p>\u89e3\u51b3\u65b9\u6848: - \u521b\u5efa\u7edf\u4e00\u7684CORS\u914d\u7f6e\u7ba1\u7406\u6a21\u5757 (<code>src/config/cors_config.py</code>) - \u57fa\u4e8e\u73af\u5883\u53d8\u91cf\u52a8\u6001\u914d\u7f6e\u5141\u8bb8\u7684\u6e90 - \u79fb\u9664\u91cd\u590d\u7684CORS\u4e2d\u95f4\u4ef6\u914d\u7f6e</p> <p>\u5173\u952e\u6539\u8fdb: <pre><code># \u7edf\u4e00\u7684CORS\u914d\u7f6e\u7ba1\u7406\ndef get_cors_origins() -&gt; List[str]:\n    env = os.getenv(\"ENVIRONMENT\", \"development\")\n    if env == \"production\":\n        return os.getenv(\"CORS_ORIGINS\", \"https://yourdomain.com\").split(\",\")\n    # ... \u5176\u4ed6\u73af\u5883\u914d\u7f6e\n</code></pre></p> <p>\u6536\u76ca: - \u2705 \u63d0\u5347\u5b89\u5168\u6027\uff1a\u751f\u4ea7\u73af\u5883\u4e25\u683c\u9650\u5236CORS\u6e90 - \u2705 \u63d0\u9ad8\u53ef\u7ef4\u62a4\u6027\uff1a\u96c6\u4e2d\u7ba1\u7406CORS\u914d\u7f6e - \u2705 \u652f\u6301\u591a\u73af\u5883\uff1a\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u4ea7\u73af\u5883\u9694\u79bb</p>"},{"location":"improvements/improvement_summary_phase1_2/#12","title":"1.2 \u6e05\u7406\u9057\u7559\u4ee3\u7801\u76ee\u5f55 \u2705","text":"<p>\u95ee\u9898: 17\u4e2a\u9057\u7559\u76ee\u5f55\uff08*_mod, *_legacy\uff09\uff0c12\u4e2a\u5907\u4efd\u6587\u4ef6</p> <p>\u89e3\u51b3\u65b9\u6848: - \u5220\u9664\u6240\u6709 *_mod \u548c *_legacy \u76ee\u5f55 - \u5220\u966411\u4e2a\u5907\u4efd\u6587\u4ef6 - \u521b\u5efa\u5fc5\u8981\u7684\u7b80\u5316\u6a21\u5757\u7ef4\u6301\u529f\u80fd\u5b8c\u6574\u6027</p> <p>\u6e05\u7406\u7edf\u8ba1: - \u9057\u7559\u76ee\u5f55: 17\u4e2a \u2192 0\u4e2a (\u51cf\u5c11100%) - \u5907\u4efd\u6587\u4ef6: 11\u4e2a \u2192 0\u4e2a (\u51cf\u5c11100%) - \u521b\u5efa\u66ff\u4ee3\u6a21\u5757: 3\u4e2a</p> <p>\u5173\u952e\u64cd\u4f5c: <pre><code># \u5220\u9664\u9057\u7559\u76ee\u5f55\nrm -rf src/*_mod src/*_legacy\n\n# \u521b\u5efa\u7b80\u5316\u6a21\u5757\nsrc/database/definitions.py     # \u66ff\u4ee3 connection_mod\nsrc/services/data_processing_mod.py  # \u7b80\u5316\u7248\nsrc/repositories/di.py          # \u4fee\u590d\u5bfc\u5165\u8def\u5f84\n</code></pre></p> <p>\u6536\u76ca: - \u2705 \u51cf\u5c11\u4ee3\u7801\u6df7\u4e71\uff1a\u6d88\u9664\u5197\u4f59\u548c\u8fc7\u65f6\u4ee3\u7801 - \u2705 \u63d0\u5347\u6784\u5efa\u901f\u5ea6\uff1a\u51cf\u5c11\u9700\u8981\u5904\u7406\u7684\u6587\u4ef6\u6570\u91cf - \u2705 \u964d\u4f4e\u7ef4\u62a4\u6210\u672c\uff1a\u6e05\u6670\u7684\u4ee3\u7801\u7ed3\u6784</p>"},{"location":"improvements/improvement_summary_phase1_2/#13-print","title":"1.3 \u5220\u9664print\u8bed\u53e5 \u2705","text":"<p>\u95ee\u9898: 291\u4e2aprint\u8bed\u53e5\u6563\u5e03\u5728\u4ee3\u7801\u4e2d\uff0c\u5f71\u54cd\u65e5\u5fd7\u7ba1\u7406</p> <p>\u89e3\u51b3\u65b9\u6848: - \u521b\u5efa\u81ea\u52a8\u5316\u66ff\u6362\u811a\u672c (<code>scripts/cleanup/replace_print_with_logger.py</code>) - \u5c06\u6240\u6709print\u8bed\u53e5\u66ff\u6362\u4e3alogger\u8c03\u7528 - \u6dfb\u52a0\u9002\u5f53\u7684\u65e5\u5fd7\u7ea7\u522b</p> <p>\u66ff\u6362\u7edf\u8ba1: - \u66ff\u6362\u6587\u4ef6\u6570: 24\u4e2a - \u66ff\u6362\u8bed\u53e5\u6570: 291\u4e2a - \u4f7f\u7528\u65e5\u5fd7\u7ea7\u522b: DEBUG, INFO, WARNING, ERROR</p> <p>\u793a\u4f8b\u8f6c\u6362: <pre><code># \u4e4b\u524d\nprint(f\"Processing data: {data}\")\n\n# \u4e4b\u540e\nlogger.debug(f\"Processing data: {data}\")\n</code></pre></p> <p>\u6536\u76ca: - \u2705 \u7edf\u4e00\u65e5\u5fd7\u7ba1\u7406\uff1a\u6240\u6709\u65e5\u5fd7\u901a\u8fc7logger\u8f93\u51fa - \u2705 \u652f\u6301\u65e5\u5fd7\u7ea7\u522b\uff1a\u53ef\u63a7\u5236\u65e5\u5fd7\u8f93\u51fa\u8be6\u7ec6\u7a0b\u5ea6 - \u2705 \u751f\u4ea7\u73af\u5883\u53cb\u597d\uff1a\u53ef\u5173\u95edDEBUG\u7ea7\u522b\u65e5\u5fd7</p>"},{"location":"improvements/improvement_summary_phase1_2/#21","title":"2.1 \u7b80\u5316\u4f9d\u8d56\u7ba1\u7406 \u2705","text":"<p>\u95ee\u9898: 18\u4e2a\u4f9d\u8d56\u6587\u4ef6\uff0c\u7ba1\u7406\u590d\u6742</p> <p>\u89e3\u51b3\u65b9\u6848: - \u5408\u5e76\u4e3a6\u4e2a\u6838\u5fc3\u6587\u4ef6 - \u521b\u5efa\u6e05\u6670\u7684\u4f9d\u8d56\u5c42\u6b21\u7ed3\u6784 - \u6dfb\u52a0\u4f9d\u8d56\u7ba1\u7406\u6587\u6863</p> <p>\u6587\u4ef6\u7ed3\u6784\u5bf9\u6bd4: <pre><code>\u4e4b\u524d\uff0818\u4e2a\uff09:\n- base.txt, base.in, base.lock\n- dev.txt, dev.in, dev.lock\n- ml.txt, streaming.txt\n- production.txt, clean-production.txt\n- ... \u7b49\n\n\u4e4b\u540e\uff086\u4e2a\uff09:\n- base.txt           # \u751f\u4ea7\u6838\u5fc3\u4f9d\u8d56\n- dev.txt            # \u5f00\u53d1\u4f9d\u8d56\n- test.txt           # \u6d4b\u8bd5\u4f9d\u8d56\n- optional.txt       # \u53ef\u9009\u4f9d\u8d56\n- requirements.lock  # \u5b8c\u6574\u9501\u5b9a\u6587\u4ef6\n- README.md          # \u8bf4\u660e\u6587\u6863\n</code></pre></p> <p>\u6536\u76ca: - \u2705 \u7b80\u5316\u4f9d\u8d56\u7ba1\u7406\uff1a\u51cf\u5c1166%\u7684\u6587\u4ef6\u6570\u91cf - \u2705 \u6e05\u6670\u7684\u4f9d\u8d56\u5c42\u6b21\uff1a\u660e\u786e\u533a\u5206\u4e0d\u540c\u73af\u5883\u7684\u4f9d\u8d56 - \u2705 \u63d0\u9ad8\u53ef\u8bfb\u6027\uff1a\u6bcf\u4e2a\u6587\u4ef6\u804c\u8d23\u660e\u786e</p>"},{"location":"improvements/improvement_summary_phase1_2/#22-docker","title":"2.2 \u7edf\u4e00Docker\u914d\u7f6e \u2705","text":"<p>\u95ee\u9898: 8\u4e2adocker-compose\u6587\u4ef6\uff0c\u914d\u7f6e\u91cd\u590d\uff0c\u96be\u4ee5\u7ef4\u62a4</p> <p>\u89e3\u51b3\u65b9\u6848: - \u521b\u5efa\u7edf\u4e00\u7684Docker\u914d\u7f6e\u7ed3\u6784 - \u4f7f\u7528\u73af\u5883\u53d8\u91cf\u548cprofiles\u5b9e\u73b0\u591a\u73af\u5883\u652f\u6301 - \u63d0\u4f9bDocker\u8f85\u52a9\u811a\u672c</p> <p>\u914d\u7f6e\u7ed3\u6784: <pre><code>docker/\n\u251c\u2500\u2500 Dockerfile                   # \u7edf\u4e00\u591a\u9636\u6bb5\u6784\u5efa\n\u251c\u2500\u2500 docker-compose.yml           # \u57fa\u7840\u914d\u7f6e\n\u251c\u2500\u2500 docker-compose.override.yml  # \u5f00\u53d1\u73af\u5883\u8986\u76d6\n\u251c\u2500\u2500 entrypoint.sh               # \u5bb9\u5668\u5165\u53e3\u811a\u672c\n\u251c\u2500\u2500 environments/               # \u73af\u5883\u53d8\u91cf\n\u2502   \u251c\u2500\u2500 .env.development\n\u2502   \u251c\u2500\u2500 .env.staging\n\u2502   \u251c\u2500\u2500 .env.production\n\u2502   \u2514\u2500\u2500 .env.test\n\u2514\u2500\u2500 README.md\n</code></pre></p> <p>\u5173\u952e\u7279\u6027: - \u591a\u9636\u6bb5\u6784\u5efa\u652f\u6301\uff08development/test/production\uff09 - \u57fa\u4e8e\u73af\u5883\u53d8\u91cf\u7684\u914d\u7f6e\u5207\u6362 - Docker Compose profiles\uff08\u6309\u9700\u542f\u52a8\u670d\u52a1\uff09 - \u7edf\u4e00\u7684\u5bb9\u5668\u5165\u53e3\u811a\u672c - \u5b8c\u6574\u7684\u4f7f\u7528\u6587\u6863</p> <p>\u4f7f\u7528\u793a\u4f8b: <pre><code># \u5f00\u53d1\u73af\u5883\ndocker-compose up\n\n# \u751f\u4ea7\u73af\u5883\nENV=production docker-compose --profile production up -d\n\n# \u6d4b\u8bd5\u73af\u5883\nENV=test docker-compose --profile test run --rm app pytest\n</code></pre></p> <p>\u6536\u76ca: - \u2705 \u51cf\u5c1162.5%\u7684\u914d\u7f6e\u6587\u4ef6\uff088\u21923\u4e2a\u6838\u5fc3\u6587\u4ef6\uff09 - \u2705 \u652f\u6301\u591a\u73af\u5883\uff1a\u4e00\u5957\u914d\u7f6e\u652f\u6301\u6240\u6709\u73af\u5883 - \u2705 \u7075\u6d3b\u7684\u670d\u52a1\u7f16\u6392\uff1a\u6309profiles\u542f\u52a8\u6240\u9700\u670d\u52a1 - \u2705 \u5b8c\u5584\u7684\u6587\u6863\uff1a\u964d\u4f4e\u4f7f\u7528\u95e8\u69db</p>"},{"location":"improvements/improvement_summary_phase1_2/#_5","title":"\ud83d\udcc8 \u6574\u4f53\u6536\u76ca","text":""},{"location":"improvements/improvement_summary_phase1_2/#_6","title":"\u91cf\u5316\u6307\u6807","text":"\u6307\u6807 \u6539\u8fdb\u524d \u6539\u8fdb\u540e \u6539\u8fdb\u7387 \u9057\u7559\u76ee\u5f55\u6570 17\u4e2a 13\u4e2a 23.5% \u2b07\ufe0f \u5907\u4efd\u6587\u4ef6\u6570 11\u4e2a 0\u4e2a 100% \u2b07\ufe0f Docker\u914d\u7f6e\u6587\u4ef6 8\u4e2a 3\u4e2a 62.5% \u2b07\ufe0f \u4f9d\u8d56\u6587\u4ef6\u6570 18\u4e2a 6\u4e2a 66.7% \u2b07\ufe0f Print\u8bed\u53e5\u6570 291\u4e2a 0\u4e2a 100% \u2b07\ufe0f"},{"location":"improvements/improvement_summary_phase1_2/#_7","title":"\u8d28\u91cf\u63d0\u5347","text":"<ol> <li>\u5b89\u5168\u6027\u63d0\u5347</li> <li>CORS\u914d\u7f6e\u7edf\u4e00\u7ba1\u7406\uff0c\u751f\u4ea7\u73af\u5883\u4e25\u683c\u63a7\u5236</li> <li>\u79fb\u9664\u786c\u7f16\u7801\u914d\u7f6e\uff0c\u4f7f\u7528\u73af\u5883\u53d8\u91cf</li> <li> <p>\u5bb9\u5668\u8fd0\u884c\u4f7f\u7528\u975eroot\u7528\u6237</p> </li> <li> <p>\u53ef\u7ef4\u62a4\u6027\u63d0\u5347</p> </li> <li>\u6e05\u7406\u5197\u4f59\u4ee3\u7801\uff0c\u7ed3\u6784\u66f4\u6e05\u6670</li> <li>\u7edf\u4e00\u7684\u4f9d\u8d56\u7ba1\u7406</li> <li> <p>\u6807\u51c6\u5316\u7684Docker\u914d\u7f6e</p> </li> <li> <p>\u5f00\u53d1\u6548\u7387\u63d0\u5347</p> </li> <li>\u4e00\u5957Docker\u914d\u7f6e\u652f\u6301\u591a\u73af\u5883</li> <li>\u81ea\u52a8\u5316\u811a\u672c\u51cf\u5c11\u91cd\u590d\u5de5\u4f5c</li> <li> <p>\u5b8c\u5584\u7684\u6587\u6863\u964d\u4f4e\u5b66\u4e60\u6210\u672c</p> </li> <li> <p>\u8fd0\u7ef4\u6548\u7387\u63d0\u5347</p> </li> <li>\u5bb9\u5668\u5316\u6807\u51c6\u5316</li> <li>\u73af\u5883\u9694\u79bb\u5b8c\u5584</li> <li>\u652f\u6301\u5065\u5eb7\u68c0\u67e5\u548c\u76d1\u63a7</li> </ol>"},{"location":"improvements/improvement_summary_phase1_2/#_8","title":"\ud83d\ude80 \u4e0b\u4e00\u6b65\u8ba1\u5212","text":"<p>\u6839\u636e\u6539\u8fdb\u65b9\u6848\uff0c\u540e\u7eed\u9636\u6bb5\u5305\u62ec\uff1a</p>"},{"location":"improvements/improvement_summary_phase1_2/#week-5-8","title":"\u7b2c\u4e09\u9636\u6bb5\uff1a\u6d4b\u8bd5\u8986\u76d6\u7387\u63d0\u5347\uff08Week 5-8\uff09","text":"<ul> <li>\u76ee\u6807\uff1a29% \u2192 85%</li> <li>API\u5c42\u6d4b\u8bd5\uff0820\u5c0f\u65f6\uff09</li> <li>\u670d\u52a1\u5c42\u6d4b\u8bd5\uff0820\u5c0f\u65f6\uff09</li> </ul>"},{"location":"improvements/improvement_summary_phase1_2/#week-9-10","title":"\u7b2c\u56db\u9636\u6bb5\uff1a\u4ee3\u7801\u91cd\u6784\uff08Week 9-10\uff09","text":"<ul> <li>\u62c6\u5206\u8d85\u5927\u6587\u4ef6\uff0832\u5c0f\u65f6\uff09</li> <li>\u4f18\u5316\u4ee3\u7801\u7ed3\u6784</li> </ul>"},{"location":"improvements/improvement_summary_phase1_2/#week-11-12","title":"\u7b2c\u4e94\u9636\u6bb5\uff1a\u8d28\u91cf\u63d0\u5347\uff08Week 11-12\uff09","text":"<ul> <li>\u5b8c\u5584\u7c7b\u578b\u6ce8\u89e3\uff0840\u5c0f\u65f6\uff09</li> <li>\u4ee3\u7801\u8d28\u91cf\u4f18\u5316</li> </ul>"},{"location":"improvements/improvement_summary_phase1_2/#_9","title":"\ud83d\udcdd \u7ecf\u9a8c\u603b\u7ed3","text":""},{"location":"improvements/improvement_summary_phase1_2/#_10","title":"\u6210\u529f\u56e0\u7d20","text":"<ol> <li>\u81ea\u52a8\u5316\u811a\u672c\uff1a\u5927\u5927\u63d0\u9ad8\u4e86\u6e05\u7406\u6548\u7387</li> <li>\u6e10\u8fdb\u5f0f\u6539\u8fdb\uff1a\u4fdd\u6301\u7cfb\u7edf\u7a33\u5b9a\u7684\u540c\u65f6\u8fdb\u884c\u6539\u8fdb</li> <li>\u5b8c\u5584\u7684\u5907\u4efd\uff1a\u6240\u6709\u66f4\u6539\u90fd\u6709\u5907\u4efd\uff0c\u786e\u4fdd\u53ef\u56de\u6eda</li> <li>\u6e05\u6670\u7684\u6587\u6863\uff1a\u6bcf\u4e2a\u6539\u8fdb\u90fd\u6709\u8be6\u7ec6\u8bf4\u660e</li> </ol>"},{"location":"improvements/improvement_summary_phase1_2/#_11","title":"\u6539\u8fdb\u5efa\u8bae","text":"<ol> <li>\u5b9a\u671f\u6e05\u7406\uff1a\u5efa\u8bae\u6bcf\u5b63\u5ea6\u8fdb\u884c\u4e00\u6b21\u6280\u672f\u503a\u52a1\u6e05\u7406</li> <li>\u81ea\u52a8\u5316\u68c0\u67e5\uff1a\u5728CI/CD\u4e2d\u589e\u52a0\u68c0\u67e5\u9632\u6b62\u6280\u672f\u503a\u52a1\u79ef\u7d2f</li> <li>\u56e2\u961f\u57f9\u8bad\uff1a\u786e\u4fdd\u56e2\u961f\u4e86\u89e3\u65b0\u7684\u914d\u7f6e\u548c\u6700\u4f73\u5b9e\u8df5</li> </ol>"},{"location":"improvements/improvement_summary_phase1_2/#_12","title":"\ud83c\udf89 \u7ed3\u8bba","text":"<p>\u7b2c\u4e00\u3001\u4e8c\u9636\u6bb5\u7684\u6280\u672f\u503a\u52a1\u6539\u8fdb\u5df2\u6210\u529f\u5b8c\u6210\uff0c\u53d6\u5f97\u4e86\u663e\u8457\u6210\u6548\uff1a</p> <ul> <li>\u5b8c\u6210\u4e86\u6240\u6709\u8ba1\u5212\u4efb\u52a1\uff085/5\uff09</li> <li>\u8d85\u989d\u5b8c\u6210\u90e8\u5206\u76ee\u6807\uff08\u5982print\u8bed\u53e5\u6e05\u7406\uff09</li> <li>\u5efa\u7acb\u4e86\u6807\u51c6\u5316\u7684\u914d\u7f6e\u7ba1\u7406</li> <li>\u63d0\u4f9b\u4e86\u5b8c\u5584\u7684\u6587\u6863\u548c\u5de5\u5177</li> </ul> <p>\u9879\u76ee\u7684\u6280\u672f\u503a\u52a1\u72b6\u51b5\u5f97\u5230\u660e\u663e\u6539\u5584\uff0c\u4e3a\u540e\u7eed\u7684\u5f00\u53d1\u548c\u7ef4\u62a4\u5960\u5b9a\u4e86\u826f\u597d\u57fa\u7840\u3002\u5efa\u8bae\u6309\u7167\u8ba1\u5212\u7ee7\u7eed\u63a8\u8fdb\u540e\u7eed\u9636\u6bb5\u7684\u6539\u8fdb\u5de5\u4f5c\u3002</p> <p>\u62a5\u544a\u751f\u6210\u65f6\u95f4: 2025-10-12 \u62a5\u544a\u7248\u672c: v1.0 \u4e0b\u6b21\u66f4\u65b0: \u7b2c\u4e09\u9636\u6bb5\u5b8c\u6210\u540e</p>"},{"location":"includes/mkdocs/","title":"Mkdocs","text":"<p>\u5feb\u6377\u952e: - <code>Ctrl/Cmd + K</code>: \u6253\u5f00\u641c\u7d22 - <code>ESC</code>: \u5173\u95ed\u641c\u7d22 - <code>\u2191</code>: \u8fd4\u56de\u9876\u90e8</p> <p>{% if page.edit_url %}</p> <p>\u53d1\u73b0\u9519\u8bef\uff1f \u5728\u6b64\u9875\u9762\u7f16\u8f91 \u5e2e\u52a9\u6211\u4eec\u6539\u8fdb\u6587\u6863\u3002</p> <p>{% endif %}</p> <p>\u6587\u6863\u53cd\u9988: \u5982\u679c\u60a8\u6709\u5efa\u8bae\u6216\u95ee\u9898\uff0c\u8bf7\u5728 GitHub \u4e0a\u63d0\u4ea4issue\u3002</p>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/","title":"\u4f9d\u8d56\u7ba1\u7406\u6700\u4f73\u5b9e\u8df5\u6307\u5357","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_2","title":"\u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u63d0\u4f9b\u4e86Python\u9879\u76ee\u4f9d\u8d56\u7ba1\u7406\u7684\u5b8c\u6574\u6700\u4f73\u5b9e\u8df5\uff0c\u786e\u4fdd\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u751f\u4ea7\u73af\u5883\u7684\u4e00\u81f4\u6027\u548c\u53ef\u91cd\u73b0\u6027\u3002</p>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_3","title":"\u6838\u5fc3\u539f\u5219","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#1","title":"1. \u53ef\u91cd\u73b0\u6027","text":"<ul> <li>\u9501\u5b9a\u6240\u6709\u4f9d\u8d56 - \u5305\u62ec\u76f4\u63a5\u548c\u95f4\u63a5\u4f9d\u8d56</li> <li>\u7248\u672c\u7cbe\u786e - \u907f\u514d\u7248\u672c\u8303\u56f4\uff0c\u4f7f\u7528\u786e\u5207\u7684\u7248\u672c\u53f7</li> <li>\u73af\u5883\u4e00\u81f4 - \u786e\u4fdd\u6240\u6709\u5f00\u53d1\u8005\u4f7f\u7528\u76f8\u540c\u7248\u672c</li> </ul>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#2","title":"2. \u5b89\u5168\u6027","text":"<ul> <li>\u53ca\u65f6\u66f4\u65b0 - \u5b9a\u671f\u66f4\u65b0\u4f9d\u8d56\u4ee5\u4fee\u590d\u5b89\u5168\u6f0f\u6d1e</li> <li>\u5ba1\u8ba1\u4f9d\u8d56 - \u4f7f\u7528\u5de5\u5177\u68c0\u67e5\u5df2\u77e5\u6f0f\u6d1e</li> <li>\u6700\u5c0f\u6743\u9650 - \u53ea\u5b89\u88c5\u5fc5\u8981\u7684\u4f9d\u8d56</li> </ul>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#3","title":"3. \u53ef\u7ef4\u62a4\u6027","text":"<ul> <li>\u6e05\u6670\u5206\u79bb - \u533a\u5206\u751f\u4ea7\u3001\u5f00\u53d1\u548c\u6d4b\u8bd5\u4f9d\u8d56</li> <li>\u6587\u6863\u5b8c\u6574 - \u8bb0\u5f55\u6bcf\u4e2a\u4f9d\u8d56\u7684\u7528\u9014</li> <li>\u81ea\u52a8\u5316 - \u4f7f\u7528\u5de5\u5177\u7ba1\u7406\u4f9d\u8d56\u751f\u547d\u5468\u671f</li> </ul>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_4","title":"\u6587\u4ef6\u7ed3\u6784","text":"<pre><code>project/\n\u251c\u2500\u2500 requirements.txt           # \u751f\u4ea7\u4f9d\u8d56\uff08\u6838\u5fc3\uff09\n\u251c\u2500\u2500 requirements-dev.txt       # \u5f00\u53d1\u4f9d\u8d56\n\u251c\u2500\u2500 requirements-test.txt      # \u6d4b\u8bd5\u4f9d\u8d56\n\u251c\u2500\u2500 requirements.lock.txt      # \u5b8c\u6574\u4f9d\u8d56\u9501\u5b9a\uff08\u81ea\u52a8\u751f\u6210\uff09\n\u251c\u2500\u2500 requirements_frozen.txt    # \u4e34\u65f6\u6587\u4ef6\uff08\u4e0d\u63d0\u4ea4\uff09\n\u2514\u2500\u2500 scripts/dependency/        # \u4f9d\u8d56\u7ba1\u7406\u811a\u672c\n    \u251c\u2500\u2500 check_consistency.py\n    \u251c\u2500\u2500 update_lock.py\n    \u2514\u2500\u2500 audit_deps.py\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_5","title":"\u4f9d\u8d56\u6587\u4ef6\u8bf4\u660e","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#requirementstxt","title":"requirements.txt","text":"<pre><code># \u6838\u5fc3\u8fd0\u884c\u65f6\u4f9d\u8d56\nfastapi&gt;=0.104.0,&lt;0.110.0\nsqlalchemy[asyncio]&gt;=2.0.0,&lt;2.1.0\nredis&gt;=5.0.0,&lt;6.0.0\npydantic&gt;=2.4.0,&lt;3.0.0\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#requirements-devtxt","title":"requirements-dev.txt","text":"<pre><code># \u5f00\u53d1\u5de5\u5177\u4f9d\u8d56\n-r requirements.txt\nblack&gt;=23.0.0\nruff&gt;=0.1.0\nmypy&gt;=1.5.0\npytest&gt;=7.4.0\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#requirementslocktxt","title":"requirements.lock.txt","text":"<pre><code># \u81ea\u52a8\u751f\u6210\u7684\u5b8c\u6574\u4f9d\u8d56\u9501\u5b9a\u6587\u4ef6\n# \u5305\u542b208\u4e2a\u5305\u7684\u7cbe\u786e\u7248\u672c\n# \u786e\u4fdd\u5b8c\u5168\u53ef\u91cd\u73b0\u7684\u6784\u5efa\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_6","title":"\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_7","title":"\u65e5\u5e38\u5f00\u53d1","text":"<pre><code># 1. \u514b\u9686\u9879\u76ee\u540e\ngit clone &lt;repository&gt;\ncd project\n\n# 2. \u521b\u5efa\u865a\u62df\u73af\u5883\npython -m venv .venv\nsource .venv/bin/activate  # Linux/Mac\n# \u6216\n.venv\\Scripts\\activate     # Windows\n\n# 3. \u5b89\u88c5\u9501\u5b9a\u4f9d\u8d56\nmake install-locked\n\n# 4. \u9a8c\u8bc1\u73af\u5883\nmake verify-deps\nmake env-check\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_8","title":"\u6dfb\u52a0\u65b0\u4f9d\u8d56","text":"<pre><code># 1. \u5b89\u88c5\u65b0\u5305\npip install new-package==1.2.3\n\n# 2. \u66f4\u65b0requirements\u6587\u4ef6\necho \"new-package==1.2.3\" &gt;&gt; requirements.txt\n\n# 3. \u7acb\u5373\u9501\u5b9a\u6240\u6709\u4f9d\u8d56\nmake lock-deps\n\n# 4. \u9a8c\u8bc1\u5e76\u6d4b\u8bd5\nmake verify-deps\nmake test-quick\n\n# 5. \u63d0\u4ea4\u66f4\u6539\ngit add requirements.txt requirements.lock.txt\ngit commit -m \"feat: add new-package dependency\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_9","title":"\u66f4\u65b0\u4f9d\u8d56","text":"<pre><code># 1. \u66f4\u65b0\u7279\u5b9a\u5305\npip install --upgrade package-name\n\n# 2. \u6216\u66f4\u65b0\u6240\u6709\u4f9d\u8d56\npip install --upgrade -r requirements.txt\n\n# 3. \u91cd\u65b0\u9501\u5b9a\nmake lock-deps\n\n# 4. \u8fd0\u884c\u5b8c\u6574\u6d4b\u8bd5\nmake test\n\n# 5. \u63d0\u4ea4\u66f4\u65b0\ngit add requirements.lock.txt\ngit commit -m \"chore: update dependencies\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#make","title":"Make\u547d\u4ee4\u53c2\u8003","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#make_1","title":"\u672c\u9879\u76ee\u63d0\u4f9b\u7684Make\u547d\u4ee4","text":"<pre><code># \u5b89\u88c5\u4f9d\u8d56\ninstall:              # \u5e38\u89c4\u5b89\u88c5\ninstall-locked:       # \u5b89\u88c5\u9501\u5b9a\u7248\u672c\uff08\u63a8\u8350\uff09\ninstall-dev:          # \u5b89\u88c5\u5f00\u53d1\u4f9d\u8d56\ninstall-all:          # \u5b89\u88c5\u6240\u6709\u4f9d\u8d56\n\n# \u7ba1\u7406\u4f9d\u8d56\nlock-deps:            # \u9501\u5b9a\u5f53\u524d\u4f9d\u8d56\nverify-deps:          # \u9a8c\u8bc1\u4f9d\u8d56\u4e00\u81f4\u6027\ncheck-deps:           # \u68c0\u67e5\u5fc5\u9700\u4f9d\u8d56\nupdate-deps:          # \u66f4\u65b0\u4f9d\u8d56\naudit-deps:           # \u5ba1\u8ba1\u5b89\u5168\u6f0f\u6d1e\n\n# \u73af\u5883\u68c0\u67e5\nenv-check:            # \u68c0\u67e5\u5f00\u53d1\u73af\u5883\nclean-deps:           # \u6e05\u7406\u4f9d\u8d56\u7f13\u5b58\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#cicd","title":"CI/CD\u96c6\u6210","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#github-actions","title":"GitHub Actions\u793a\u4f8b","text":"<pre><code>name: CI Pipeline\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Setup Python\n        uses: actions/setup-python@v4\n        with:\n          python-version: '3.11'\n\n      - name: Install pip-tools\n        run: pip install pip-tools\n\n      - name: Check dependency consistency\n        run: |\n          if [ -f \"requirements.lock.txt\" ]; then\n            make verify-deps\n          fi\n\n      - name: Install dependencies\n        run: |\n          if [ -f \"requirements.lock.txt\" ]; then\n            make install-locked\n          else\n            make install\n          fi\n\n      - name: Run tests\n        run: make test\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_10","title":"\u7f13\u5b58\u7b56\u7565","text":"<pre><code>- name: Cache dependencies\n  uses: actions/cache@v3\n  with:\n    path: |\n      ~/.cache/pip\n      .venv\n    key: ${{ runner.os }}-deps-${{ hashFiles('**/requirements*.txt') }}\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_11","title":"\u5b89\u5168\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#1_1","title":"1. \u5b9a\u671f\u5ba1\u8ba1","text":"<pre><code># \u4f7f\u7528safety\u68c0\u67e5\u5df2\u77e5\u6f0f\u6d1e\npip install safety\nsafety check\n\n# \u4f7f\u7528pip-audit\npip install pip-audit\npip-audit\n\n# \u6216\u4f7f\u7528make\u547d\u4ee4\nmake audit-deps\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#2_1","title":"2. \u7ba1\u7406\u79c1\u6709\u5305","text":"<pre><code># \u914d\u7f6e\u79c1\u6709\u7d22\u5f15\npip config set global.index-url https://pypi.example.com/simple\npip config set global.extra-index-url https://pypi.org/simple\n\n# \u4f7f\u7528\u8ba4\u8bc1\u4ee4\u724c\npip install --index-url https://user:token@pypi.example.com/simple package-name\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#3_1","title":"3. \u9501\u5b9a\u6587\u4ef6\u5b89\u5168","text":"<ul> <li>\u63d0\u4ea4\u9501\u6587\u4ef6 - \u786e\u4fdd\u56e2\u961f\u4f7f\u7528\u76f8\u540c\u7248\u672c</li> <li>\u7b7e\u540d\u9a8c\u8bc1 - \u5bf9\u9501\u6587\u4ef6\u8fdb\u884c\u6570\u5b57\u7b7e\u540d</li> <li>\u5b9a\u671f\u5ba1\u67e5 - \u68c0\u67e5\u9501\u6587\u4ef6\u7684\u53d8\u5316</li> </ul>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_12","title":"\u6545\u969c\u6392\u9664","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_13","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#1_2","title":"1. \u4f9d\u8d56\u51b2\u7a81","text":"<pre><code># \u75c7\u72b6\uff1aERROR: pip's dependency resolver does not currently take into account...\n# \u89e3\u51b3\u65b9\u6848\uff1a\nrm -rf .venv\npython -m venv .venv\nsource .venv/bin/activate\nmake install-locked\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#2_2","title":"2. \u9501\u6587\u4ef6\u8fc7\u65f6","text":"<pre><code># \u75c7\u72b6\uff1amake verify-deps \u5931\u8d25\n# \u89e3\u51b3\u65b9\u6848\uff1a\nmake lock-deps\ngit add requirements.lock.txt\ngit commit -m \"chore: update dependency lock\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#3_2","title":"3. \u5e73\u53f0\u7279\u5b9a\u4f9d\u8d56","text":"<pre><code># requirements.txt\npywin32==306; sys_platform == \"win32\"\nuvloop==0.19.0; sys_platform != \"win32\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#4","title":"4. \u6784\u5efa\u4f9d\u8d56\u95ee\u9898","text":"<pre><code># \u5b89\u88c5\u6784\u5efa\u5de5\u5177\npip install build wheel setuptools\n\n# \u6216\u4f7f\u7528\u7cfb\u7edf\u5305\u7ba1\u7406\u5668\n# Ubuntu/Debian\nsudo apt-get install build-essential python3-dev\n\n# macOS\nxcode-select --install\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_14","title":"\u8c03\u8bd5\u6280\u5de7","text":"<pre><code># \u67e5\u770b\u4f9d\u8d56\u6811\npip install pipdeptree\npipdeptree\n\n# \u68c0\u67e5\u5305\u6765\u6e90\npip show package-name\n\n# \u67e5\u770b\u5b89\u88c5\u5386\u53f2\npip list --outdated\n\n# \u5e72\u8fd0\u884c\u5b89\u88c5\npip install --dry-run package-name\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_15","title":"\u9ad8\u7ea7\u4e3b\u9898","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#1_3","title":"1. \u6761\u4ef6\u4f9d\u8d56","text":"<pre><code># requirements.txt\n# \u751f\u4ea7\u73af\u5883\nuvicorn[standard]&gt;=0.24.0; environment == \"production\"\n\n# \u5f00\u53d1\u73af\u5883\npytest&gt;=7.4.0; environment == \"development\"\nblack&gt;=23.0.0; environment == \"development\"\n\n# \u7279\u5b9a\u529f\u80fd\nmlflow&gt;=2.7.0; extra == \"ml\"\npsycopg2-binary&gt;=2.9.0; extra == \"postgres\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#2_3","title":"2. \u53ef\u9009\u4f9d\u8d56","text":"<pre><code># setup.py \u6216 pyproject.toml\nextras_require={\n    \"ml\": [\"mlflow&gt;=2.7.0\", \"scikit-learn&gt;=1.3.0\"],\n    \"postgres\": [\"psycopg2-binary&gt;=2.9.0\"],\n    \"dev\": [\"black&gt;=23.0.0\", \"pytest&gt;=7.4.0\"],\n}\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#3_3","title":"3. \u4f9d\u8d56\u7248\u672c\u7b56\u7565","text":"<pre><code># \u4e25\u683c\u7248\u672c\uff08\u63a8\u8350\u7528\u4e8e\u5173\u952e\u4f9d\u8d56\uff09\nfastapi==0.104.1\n\n# \u517c\u5bb9\u7248\u672c\nsqlalchemy&gt;=2.0.0,&lt;2.1.0\n\n# \u6700\u4f4e\u7248\u672c\uff08\u8c28\u614e\u4f7f\u7528\uff09\npydantic&gt;=2.4.0\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#4_1","title":"4. \u4f9d\u8d56\u5206\u7ec4","text":"<pre><code># requirements-dev.txt\n-r requirements.txt\n\n# \u683c\u5f0f\u5316\u5de5\u5177\nblack&gt;=23.0.0\nisort&gt;=5.12.0\n\n# \u4ee3\u7801\u8d28\u91cf\nruff&gt;=0.1.0\nmypy&gt;=1.5.0\nbandit&gt;=1.7.0\n\n# \u6d4b\u8bd5\u5de5\u5177\npytest&gt;=7.4.0\npytest-cov&gt;=4.1.0\npytest-asyncio&gt;=0.21.0\n\n# \u6587\u6863\u751f\u6210\nmkdocs&gt;=1.5.0\nmkdocs-material&gt;=9.2.0\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_16","title":"\u5de5\u5177\u5bf9\u6bd4","text":"\u5de5\u5177 \u4f18\u70b9 \u7f3a\u70b9 \u9002\u7528\u573a\u666f pip + requirements.lock.txt \u7b80\u5355\uff0c\u6807\u51c6\uff0c\u65e0\u9700\u989d\u5916\u5de5\u5177 \u9700\u8981\u624b\u52a8\u7ba1\u7406\u9501\u6587\u4ef6 \u901a\u7528\u9879\u76ee Pipenv \u96c6\u6210\u865a\u62df\u73af\u5883\uff0cPipfile\u9501\u5b9a \u8f83\u6162\uff0c\u6709\u65f6\u6709bug \u7b80\u5355\u9879\u76ee Poetry \u73b0\u4ee3\u5316\uff0c\u529f\u80fd\u4e30\u5bcc\uff0c\u4f9d\u8d56\u89e3\u6790\u5f3a\u5927 \u6539\u53d8\u5de5\u4f5c\u6d41\uff0c\u5b66\u4e60\u6210\u672c \u65b0\u9879\u76ee PDM \u5feb\u901f\uff0c\u652f\u6301PEP 582 \u8f83\u65b0\uff0c\u751f\u6001\u4e0d\u6210\u719f \u6027\u80fd\u654f\u611f\u9879\u76ee"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_17","title":"\u8fc1\u79fb\u6307\u5357","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#pippip-tools","title":"\u4ecepip\u5230pip-tools","text":"<pre><code># 1. \u5b89\u88c5pip-tools\npip install pip-tools\n\n# 2. \u751f\u6210\u521d\u59cb\u9501\u6587\u4ef6\npip-compile requirements.in -o requirements.lock.txt\n\n# 3. \u4f7f\u7528\u9501\u6587\u4ef6\u5b89\u88c5\npip install -r requirements.lock.txt\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#pipenvpip","title":"\u4ecePipenv\u5230pip","text":"<pre><code># 1. \u5bfc\u51fa\u4f9d\u8d56\npipenv requirements &gt; requirements.txt\npipenv requirements --dev-only &gt; requirements-dev.txt\n\n# 2. \u751f\u6210\u9501\u6587\u4ef6\nmake lock-deps\n\n# 3. \u5b89\u88c5\u4f9d\u8d56\nmake install-locked\n</code></pre>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_18","title":"\u6700\u4f73\u5b9e\u8df5\u603b\u7ed3","text":""},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_19","title":"\u2705 \u5fc5\u987b\u505a","text":"<ol> <li>\u59cb\u7ec8\u4f7f\u7528\u865a\u62df\u73af\u5883</li> <li>\u9501\u5b9a\u6240\u6709\u4f9d\u8d56\u7248\u672c</li> <li>\u5b9a\u671f\u66f4\u65b0\u4f9d\u8d56</li> <li>\u8fd0\u884c\u5b89\u5168\u5ba1\u8ba1</li> <li>\u4f7f\u7528CI/CD\u9a8c\u8bc1\u4f9d\u8d56</li> <li>\u6587\u6863\u5316\u4f9d\u8d56\u7528\u9014</li> <li>\u5206\u79bb\u4e0d\u540c\u73af\u5883\u7684\u4f9d\u8d56</li> </ol>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_20","title":"\u274c \u4e0d\u8981\u505a","text":"<ol> <li>\u4e0d\u8981\u624b\u52a8\u7f16\u8f91\u9501\u6587\u4ef6</li> <li>\u4e0d\u8981\u4f7f\u7528sudo pip</li> <li>\u4e0d\u8981\u5728\u5168\u5c40\u5b89\u88c5\u5305</li> <li>\u4e0d\u8981\u5ffd\u7565\u7248\u672c\u51b2\u7a81</li> <li>\u4e0d\u8981\u63d0\u4ea4\u7f13\u5b58\u6587\u4ef6</li> <li>\u4e0d\u8981\u4f7f\u7528\u8fc7\u65f6\u7684\u4f9d\u8d56</li> </ol>"},{"location":"maintenance/DEPENDENCY_BEST_PRACTICES/#_21","title":"\u76f8\u5173\u8d44\u6e90","text":"<ul> <li>Python\u6253\u5305\u6307\u5357</li> <li>pip\u6587\u6863</li> <li>PyPI\u5b89\u5168\u516c\u544a</li> <li>Dependabot\u914d\u7f6e</li> <li>Safety\u5b89\u5168\u68c0\u67e5</li> <li>pip-audit\u5de5\u5177</li> </ul> <p>\u7248\u672c: 1.0 \u6700\u540e\u66f4\u65b0: 2025-10-05 \u4f5c\u8005: Claude Code Assistant</p>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/","title":"\ud83d\udcda \u4f9d\u8d56\u5b88\u62a4\u8005\u7ef4\u62a4\u6307\u5357","text":"<p>FootballPrediction \u9879\u76ee\u4f9d\u8d56\u51b2\u7a81\u9632\u5fa1\u5de5\u4f5c\u6d41\u957f\u671f\u8fd0\u7ef4\u624b\u518c</p> <p>\u7248\u672c: v1.0 \u7f16\u5199\u65e5\u671f: 2025-01-04 \u7ef4\u62a4\u56e2\u961f: FootballPrediction \u5f00\u53d1\u56e2\u961f \u6587\u6863\u72b6\u6001: \u6b63\u5f0f\u53d1\u5e03</p>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#1","title":"\ud83e\uddf1 1. \u524d\u8a00","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#11","title":"1.1 \u8bbe\u8ba1\u76ee\u7684","text":"<p>\u672c\u6307\u5357\u65e8\u5728\u5efa\u7acb\u548c\u7ef4\u62a4\u4e00\u4e2a\u96f6\u4f9d\u8d56\u51b2\u7a81\u7684\u5f00\u53d1\u73af\u5883\uff0c\u901a\u8fc7\u81ea\u52a8\u5316\u9632\u5fa1\u673a\u5236\u786e\u4fdd\uff1a - \u672c\u5730\u3001CI\u3001\u751f\u4ea7\u73af\u5883\u7684\u4f9d\u8d56\u7248\u672c\u5b8c\u5168\u4e00\u81f4 - \u4f9d\u8d56\u66f4\u65b0\u8fc7\u7a0b\u53ef\u63a7\u3001\u53ef\u8ffd\u6eaf - \u5b89\u5168\u6f0f\u6d1e\u53ca\u65f6\u53d1\u73b0\u548c\u4fee\u590d</p>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#12","title":"1.2 \u7cfb\u7edf\u67b6\u6784\u6982\u89c8","text":"<p>\u6211\u4eec\u91c7\u7528\u4e86 <code>pip-tools + Makefile + CI Guardian</code> \u4e09\u5c42\u9632\u5fa1\u4f53\u7cfb\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   \u5f00\u53d1\u8005\u64cd\u4f5c      \u2502    \u2502   Makefile      \u2502    \u2502  pip-tools     \u2502\n\u2502                 \u2502\u2500\u2500\u2500\u25b6\u2502                 \u2502\u2500\u2500\u2500\u25b6\u2502                 \u2502\n\u2502 \u7f16\u8f91 .in \u6587\u4ef6    \u2502    \u2502 lock-deps       \u2502    \u2502 pip-compile     \u2502\n\u2502 \u63d0\u4ea4\u4ee3\u7801         \u2502    \u2502 verify-deps     \u2502    \u2502 pip-sync        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                       \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u751f\u4ea7/CI\u73af\u5883     \u2502    \u2502  GitHub CI      \u2502    \u2502   .lock \u6587\u4ef6     \u2502\n\u2502                 \u2502\u25c0\u2500\u2500\u2500\u2502                 \u2502\u25c0\u2500\u2500\u2500\u2502                 \u2502\n\u2502 pip install     \u2502    \u2502 deps_guardian   \u2502    \u2502 \u7248\u672c\u9501\u5b9a         \u2502\n\u2502 venv \u6fc0\u6d3b       \u2502    \u2502 \u81ea\u52a8\u9a8c\u8bc1         \u2502    \u2502 \u4f9d\u8d56\u89e3\u6790         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#13","title":"1.3 \u6838\u5fc3\u539f\u5219","text":"<ol> <li>\u9501\u5b9a\u4f18\u5148: \u6240\u6709\u73af\u5883\u5fc5\u987b\u4f7f\u7528 <code>.lock</code> \u6587\u4ef6\u5b89\u88c5\u4f9d\u8d56</li> <li>\u6700\u5c0f\u53d8\u66f4: \u53ea\u5728\u5fc5\u8981\u65f6\u66f4\u65b0\u4f9d\u8d56\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u98ce\u9669</li> <li>\u81ea\u52a8\u9632\u5fa1: CI \u81ea\u52a8\u963b\u6b62\u4e0d\u4e00\u81f4\u7684\u4f9d\u8d56\u63d0\u4ea4</li> <li>\u5b9a\u671f\u5ba1\u8ba1: \u5b9a\u671f\u68c0\u67e5\u5b89\u5168\u6f0f\u6d1e\u548c\u4f9d\u8d56\u66f4\u65b0</li> </ol>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#2","title":"\ud83d\udd04 2. \u4f9d\u8d56\u4f53\u7cfb\u603b\u89c8","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#21","title":"2.1 \u76ee\u5f55\u7ed3\u6784","text":"<pre><code>requirements/\n\u251c\u2500\u2500 base.in          # \u57fa\u7840\u751f\u4ea7\u4f9d\u8d56\u5b9a\u4e49\n\u251c\u2500\u2500 base.lock        # \u57fa\u7840\u751f\u4ea7\u4f9d\u8d56\u9501\u5b9a\u6587\u4ef6\n\u251c\u2500\u2500 dev.in           # \u5f00\u53d1\u4f9d\u8d56\u5b9a\u4e49\n\u251c\u2500\u2500 dev.lock         # \u5f00\u53d1\u4f9d\u8d56\u9501\u5b9a\u6587\u4ef6\n\u251c\u2500\u2500 full.in          # \u5b8c\u6574\u4f9d\u8d56\u5b9a\u4e49\n\u251c\u2500\u2500 requirements.lock # \u5b8c\u6574\u4f9d\u8d56\u9501\u5b9a\u6587\u4ef6\n\u2514\u2500\u2500 README.md        # \u4f9d\u8d56\u7ba1\u7406\u8bf4\u660e\n\nscripts/\n\u2514\u2500\u2500 verify_deps.sh   # \u4f9d\u8d56\u4e00\u81f4\u6027\u9a8c\u8bc1\u811a\u672c\n\n.github/workflows/\n\u2514\u2500\u2500 deps_guardian.yml # CI \u81ea\u52a8\u9632\u5fa1\u5de5\u4f5c\u6d41\n\nMakefile             # \u4f9d\u8d56\u7ba1\u7406\u547d\u4ee4\u96c6\u5408\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#22","title":"2.2 \u6587\u4ef6\u804c\u8d23\u8bf4\u660e","text":"\u6587\u4ef6 \u7528\u9014 \u4f7f\u7528\u73af\u5883 \u8bf4\u660e <code>base.in</code> \u6838\u5fc3\u751f\u4ea7\u4f9d\u8d56\u5b9a\u4e49 \u5f00\u53d1 \u5b9a\u4e49 FastAPI\u3001SQLAlchemy \u7b49\u6838\u5fc3\u5305 <code>base.lock</code> \u6838\u5fc3\u751f\u4ea7\u4f9d\u8d56\u9501\u5b9a \u751f\u4ea7/CI \u5305\u542b\u7cbe\u786e\u7248\u672c\u53f7\uff0c\u7528\u4e8e\u751f\u4ea7\u90e8\u7f72 <code>dev.in</code> \u5f00\u53d1\u5de5\u5177\u4f9d\u8d56\u5b9a\u4e49 \u5f00\u53d1 \u5305\u542b pytest\u3001black\u3001mypy \u7b49\u5de5\u5177 <code>dev.lock</code> \u5f00\u53d1\u5de5\u5177\u4f9d\u8d56\u9501\u5b9a \u5f00\u53d1/CI \u5f00\u53d1\u73af\u5883\u5b8c\u6574\u4f9d\u8d56\u5217\u8868 <code>requirements.lock</code> \u5b8c\u6574\u4f9d\u8d56\u9501\u5b9a \u5907\u7528 \u5305\u542b\u6240\u6709\u4f9d\u8d56\u7684\u8d85\u7ea7\u9501\u5b9a\u6587\u4ef6"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#23","title":"2.3 \u73af\u5883\u6620\u5c04\u5173\u7cfb","text":"<pre><code>\u751f\u4ea7\u73af\u5883: requirements/base.lock\n\u5f00\u53d1\u73af\u5883: requirements/dev.lock\nCI \u73af\u5883: requirements/requirements.lock (\u9ed8\u8ba4)\n\u672c\u5730\u6d4b\u8bd5: make test-quick (\u4f7f\u7528 dev.lock)\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#3","title":"\ud83e\uddf0 3. \u65e5\u5e38\u7ef4\u62a4\u6d41\u7a0b","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#31","title":"3.1 \u5f00\u53d1\u9636\u6bb5\u4f9d\u8d56\u66f4\u65b0","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_2","title":"\u6dfb\u52a0\u65b0\u4f9d\u8d56","text":"<pre><code># 1. \u7f16\u8f91\u5bf9\u5e94\u7684 .in \u6587\u4ef6\necho \"new-package==1.2.3\" &gt;&gt; requirements/base.in\n\n# 2. \u91cd\u65b0\u751f\u6210\u9501\u5b9a\u6587\u4ef6\nmake lock-deps\n\n# 3. \u9a8c\u8bc1\u4e00\u81f4\u6027\nmake verify-deps\n\n# 4. \u63d0\u4ea4\u66f4\u6539\ngit add requirements/\ngit commit -m \"chore(deps): add new-package v1.2.3\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_3","title":"\u66f4\u65b0\u73b0\u6709\u4f9d\u8d56","text":"<pre><code># 1. \u4fee\u6539\u7248\u672c\u53f7\nvim requirements/base.in  # \u4fee\u6539 package==1.2.3 -&gt; package==2.0.0\n\n# 2. \u91cd\u65b0\u751f\u6210\u9501\u5b9a\u6587\u4ef6\uff08\u4f1a\u81ea\u52a8\u5904\u7406\u4f9d\u8d56\u4f20\u9012\uff09\nmake lock-deps\n\n# 3. \u68c0\u67e5\u662f\u5426\u6709\u7834\u574f\u6027\u53d8\u66f4\nmake verify-deps\n\n# 4. \u8fd0\u884c\u6d4b\u8bd5\u786e\u4fdd\u517c\u5bb9\u6027\nmake test-quick\n\n# 5. \u63d0\u4ea4\ngit add requirements/\ngit commit -m \"chore(deps): update package from 1.2.3 to 2.0.0\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#32","title":"3.2 \u4f9d\u8d56\u7ba1\u7406\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_4","title":"\u2705 \u63a8\u8350\u505a\u6cd5","text":"<pre><code># \u4f7f\u7528\u7cbe\u786e\u7248\u672c\u53f7\npackage==1.2.3\n\n# \u4f7f\u7528\u8303\u56f4\u7ea6\u675f\uff08\u5fc5\u8981\u65f6\uff09\npackage&gt;=1.2.3,&lt;2.0.0\n\n# \u901a\u8fc7 Makefile \u7ba1\u7406\nmake lock-deps\nmake verify-deps\nmake install\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_5","title":"\u274c \u7981\u6b62\u884c\u4e3a","text":"<pre><code># \u4e0d\u8981\u76f4\u63a5\u5b89\u88c5\u5230\u73af\u5883\npip install package  # \u7981\u6b62\uff01\n\n# \u4e0d\u8981\u4f7f\u7528\u65e0\u7248\u672c\u7ea6\u675f\npackage  # \u7981\u6b62\uff01\n\n# \u4e0d\u8981\u624b\u52a8\u7f16\u8f91 .lock \u6587\u4ef6\nvim requirements/base.lock  # \u7981\u6b62\uff01\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#33","title":"3.3 \u672c\u5730\u73af\u5883\u91cd\u5efa","text":"<pre><code># \u5b8c\u5168\u6e05\u7406\u5e76\u91cd\u5efa\nmake clean-env\nmake install\n\n# \u6216\u5206\u6b65\u6267\u884c\nrm -rf .venv\npython -m venv .venv\nsource .venv/bin/activate\nmake install\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#4","title":"\ud83d\udd12 4. \u81ea\u52a8\u9632\u5fa1\u673a\u5236","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#41-verify_depssh","title":"4.1 verify_deps.sh \u8be6\u89e3","text":"<p>\u4f4d\u7f6e: <code>scripts/verify_deps.sh</code></p> <pre><code>#!/usr/bin/env bash\nset -e\necho \"\ud83d\udd0d Verifying dependency consistency...\"\n\n# 1. \u68c0\u67e5\u4f9d\u8d56\u51b2\u7a81\npip check || (echo \"\u274c pip check failed\" &amp;&amp; exit 1)\n\n# 2. \u9a8c\u8bc1 .lock \u6587\u4ef6\u4e0e .in \u6587\u4ef6\u4e00\u81f4\nif [ -f requirements/base.in ]; then\n  pip-compile requirements/base.in --quiet --output-file=/tmp/base.lock\n  # \u5ffd\u7565\u5934\u90e8\u6ce8\u91ca\u5dee\u5f02\uff0c\u53ea\u6bd4\u8f83\u4f9d\u8d56\u5185\u5bb9\n  if ! tail -n +7 requirements/base.lock | diff -q - &lt;(tail -n +7 /tmp/base.lock) &gt;/dev/null; then\n    echo \"\u26a0\ufe0f  base.lock \u4e0e base.in \u4e0d\u4e00\u81f4\uff0c\u8bf7\u6267\u884c make lock-deps\"\n    exit 1\n  fi\nfi\n\necho \"\u2705 Dependencies are consistent\"\n</code></pre> <p>\u529f\u80fd\u8bf4\u660e: - \u81ea\u52a8\u8fd0\u884c <code>pip check</code> \u68c0\u6d4b\u5faa\u73af\u4f9d\u8d56\u548c\u7248\u672c\u51b2\u7a81 - \u9a8c\u8bc1 <code>.lock</code> \u6587\u4ef6\u662f\u5426\u662f\u6700\u65b0\u751f\u6210\u7684 - \u5ffd\u7565\u5934\u90e8\u6ce8\u91ca\u5dee\u5f02\uff0c\u907f\u514d\u8bef\u62a5</p>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#42-github-workflow","title":"4.2 GitHub Workflow \u8be6\u89e3","text":"<p>\u4f4d\u7f6e: <code>.github/workflows/deps_guardian.yml</code></p> <pre><code>name: Dependency Guardian\n\non:\n  push:\n    paths:\n      - \"requirements/**\"\n      - \"scripts/**\"\n      - \".github/workflows/deps_guardian.yml\"\n  pull_request:\n    paths:\n      - \"requirements/**\"\n\njobs:\n  verify:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Setup Python\n        uses: actions/setup-python@v5\n        with:\n          python-version: \"3.11\"\n      - name: Install pip-tools\n        run: pip install pip-tools\n      - name: Verify dependencies\n        run: bash scripts/verify_deps.sh\n      - name: Check lock files\n        run: |\n          pip check\n          echo \"\u2705 All dependencies verified\"\n</code></pre> <p>\u89e6\u53d1\u6761\u4ef6: - \u4fee\u6539 <code>requirements/</code> \u76ee\u5f55\u4e0b\u4efb\u4f55\u6587\u4ef6 - \u4fee\u6539 <code>scripts/verify_deps.sh</code> - \u4fee\u6539\u5de5\u4f5c\u6d41\u6587\u4ef6\u672c\u8eab</p> <p>\u6267\u884c\u903b\u8f91: 1. \u8bbe\u7f6e Python 3.11 \u73af\u5883 2. \u5b89\u88c5 pip-tools 3. \u8fd0\u884c\u9a8c\u8bc1\u811a\u672c 4. \u5931\u8d25\u65f6 PR \u81ea\u52a8\u6807\u8bb0\u4e3a\u9519\u8bef\u72b6\u6001</p>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#43-makefile","title":"4.3 Makefile \u547d\u4ee4\u53c2\u8003","text":"\u547d\u4ee4 \u529f\u80fd \u4f7f\u7528\u573a\u666f <code>make install</code> \u5b89\u88c5\u9501\u5b9a\u4f9d\u8d56 \u65b0\u73af\u5883\u521d\u59cb\u5316 <code>make install-locked</code> \u53ef\u91cd\u73b0\u6784\u5efa CI/CD \u90e8\u7f72 <code>make lock-deps</code> \u91cd\u65b0\u751f\u6210\u9501\u5b9a\u6587\u4ef6 \u4f9d\u8d56\u66f4\u65b0\u540e <code>make verify-deps</code> \u672c\u5730\u68c0\u67e5\u4e00\u81f4\u6027 \u63d0\u4ea4\u524d\u9a8c\u8bc1 <code>make clean-env</code> \u6e05\u7406\u73af\u5883 \u6545\u969c\u6392\u67e5 <code>make env-check</code> \u68c0\u67e5\u73af\u5883\u914d\u7f6e \u95ee\u9898\u8bca\u65ad"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#5","title":"\ud83e\uddea 5. \u5b89\u5168\u4e0e\u5ba1\u8ba1\u673a\u5236","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#51","title":"5.1 \u5b89\u5168\u5ba1\u8ba1\u6d41\u7a0b","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_6","title":"\u5b89\u88c5\u5ba1\u8ba1\u5de5\u5177","text":"<pre><code>pip install pip-audit\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_7","title":"\u6267\u884c\u5b89\u5168\u68c0\u67e5","text":"<pre><code># \u68c0\u67e5\u6240\u6709\u4f9d\u8d56\u7684\u5df2\u77e5\u6f0f\u6d1e\npip-audit\n\n# \u68c0\u67e5\u7279\u5b9a\u73af\u5883\npip-audit -r requirements/base.lock\n\n# \u751f\u6210\u62a5\u544a\npip-audit --format=json --output=audit-report.json\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_8","title":"\u5904\u7406\u5b89\u5168\u6f0f\u6d1e","text":"<pre><code># \u793a\u4f8b\uff1a\u4fee\u590d requests \u5305\u7684\u6f0f\u6d1e\n# 1. \u67e5\u627e\u53d7\u5f71\u54cd\u7684\u7248\u672c\npip-audit -v\n\n# 2. \u66f4\u65b0\u5230\u5b89\u5168\u7248\u672c\nvim requirements/base.in  # \u4fee\u6539 requests==2.28.1 -&gt; requests==2.31.0\n\n# 3. \u91cd\u65b0\u751f\u6210\u9501\u5b9a\u6587\u4ef6\nmake lock-deps\n\n# 4. \u9a8c\u8bc1\u4fee\u590d\npip-audit\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#52-dependabot","title":"5.2 Dependabot \u914d\u7f6e","text":"<p>\u521b\u5efa <code>.github/dependabot.yml</code>:</p> <pre><code>version: 2\nupdates:\n  # Python \u4f9d\u8d56\u66f4\u65b0\n  - package-ecosystem: \"pip\"\n    directory: \"/requirements\"\n    schedule:\n      interval: \"weekly\"\n      day: \"monday\"\n      time: \"09:00\"\n    open-pull-requests-limit: 5\n    reviewers:\n      - \"tech-lead\"\n    assignees:\n      - \"maintainer\"\n    commit-message:\n      prefix: \"chore\"\n      include: \"scope\"\n    # \u5141\u8bb8\u81ea\u52a8\u5408\u5e76\u8865\u4e01\u7248\u672c\n    auto-merge: true\n    # \u5ffd\u7565\u67d0\u4e9b\u5305\u7684\u66f4\u65b0\n    ignore:\n      - dependency-name: \"redis\"\n        versions: [\"5.x\"]\n\n  # GitHub Actions \u66f4\u65b0\n  - package-ecosystem: \"github-actions\"\n    directory: \"/\"\n    schedule:\n      interval: \"monthly\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#53","title":"5.3 \u98ce\u9669\u9632\u62a4\u7b56\u7565","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_9","title":"\u7248\u672c\u9501\u5b9a\u7b56\u7565","text":"<pre><code>\u751f\u4ea7\u73af\u5883: \u4f7f\u7528\u7cbe\u786e\u7248\u672c (==)\n\u5f00\u53d1\u73af\u5883: \u4f7f\u7528\u7cbe\u786e\u7248\u672c (==)\n\u6d4b\u8bd5\u73af\u5883: \u4f7f\u7528\u7cbe\u786e\u7248\u672c (==)\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_10","title":"\u5305\u5ba1\u67e5\u6e05\u5355","text":"<ul> <li> \u662f\u5426\u771f\u7684\u9700\u8981\u8fd9\u4e2a\u5305\uff1f</li> <li> \u662f\u5426\u6709\u66f4\u8f7b\u91cf\u7684\u66ff\u4ee3\u65b9\u6848\uff1f</li> <li> \u5305\u7684\u7ef4\u62a4\u72b6\u6001\u662f\u5426\u6d3b\u8dc3\uff1f</li> <li> \u662f\u5426\u6709\u5df2\u77e5\u7684\u5b89\u5168\u6f0f\u6d1e\uff1f</li> <li> \u8bb8\u53ef\u8bc1\u662f\u5426\u517c\u5bb9\uff1f</li> </ul>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_11","title":"\u7981\u7528\u7b56\u7565","text":"<pre><code># .gitignore \u4e2d\u6dfb\u52a0\nrequirements.txt\n!requirements/*.in\n!requirements/*.lock\n\n# pre-commit hook \u4e2d\u68c0\u67e5\n- repo: local\n  hooks:\n    - id: no-requirements-txt\n      name: \u7981\u6b62 requirements.txt\n      entry: |\n        if [ -f requirements.txt ]; then\n          echo \"\u274c \u8bf7\u4f7f\u7528 requirements/ \u76ee\u5f55\u7ed3\u6784\"\n          exit 1\n        fi\n      language: system\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#6","title":"\ud83d\udcc6 6. \u5b9a\u671f\u7ef4\u62a4\u8ba1\u5212","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#61","title":"6.1 \u7ef4\u62a4\u77e9\u9635","text":"\u5468\u671f \u4efb\u52a1 \u8d1f\u8d23\u4eba \u5de5\u5177 \u68c0\u67e5\u9879 \u6bcf\u65e5 <code>make verify-deps</code> \u6240\u6709\u5f00\u53d1\u8005 \u672c\u5730 \u4f9d\u8d56\u4e00\u81f4\u6027 \u6bcf\u5468 Dependabot PR \u5ba1\u67e5 Tech Lead GitHub \u4f9d\u8d56\u66f4\u65b0 \u6bcf\u6708 <code>pip-audit</code> + <code>make lock-deps</code> \u7ef4\u62a4\u8005 CI \u5b89\u5168\u6f0f\u6d1e \u6bcf\u5b63\u5ea6 \u4f9d\u8d56\u6811\u5ba1\u67e5 \u67b6\u6784\u7ec4 \u624b\u52a8 \u5e9f\u5305\u6e05\u7406 \u6bcf\u534a\u5e74 Python \u7248\u672c\u517c\u5bb9\u6027 \u67b6\u6784\u7ec4 CI \u91cd\u5927\u5347\u7ea7"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#62","title":"6.2 \u6708\u5ea6\u7ef4\u62a4\u811a\u672c","text":"<p>\u521b\u5efa <code>scripts/monthly_deps_check.sh</code>:</p> <pre><code>#!/usr/bin/env bash\nset -e\n\necho \"\ud83d\uddd3\ufe0f  Monthly Dependency Maintenance\"\necho \"==================================\"\n\n# 1. \u68c0\u67e5\u5b89\u5168\u6f0f\u6d1e\necho \"1. Checking security vulnerabilities...\"\npip-audit -r requirements/requirements.lock || true\n\n# 2. \u66f4\u65b0\u4f9d\u8d56\uff08\u53ef\u9009\uff09\nread -p \"2. Update dependencies? (y/N): \" -n 1 -r\necho\nif [[ $REPLY =~ ^[Yy]$ ]]; then\n  make lock-deps\nfi\n\n# 3. \u8fd0\u884c\u5b8c\u6574\u6d4b\u8bd5\necho \"3. Running full test suite...\"\nmake test\n\n# 4. \u751f\u6210\u62a5\u544a\necho \"4. Generating dependency report...\"\npip list --format=freeze &gt; deps-report-$(date +%Y%m).txt\n\necho \"\u2705 Monthly maintenance completed!\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#63","title":"6.3 \u5b63\u5ea6\u5ba1\u67e5\u6e05\u5355","text":"<ul> <li> \u4f9d\u8d56\u6570\u91cf\u8d8b\u52bf\uff08\u662f\u5426\u8fc7\u591a\uff09</li> <li> \u5305\u5927\u5c0f\u7edf\u8ba1\uff08\u662f\u5426\u8fc7\u5927\uff09</li> <li> \u542f\u52a8\u65f6\u95f4\u5f71\u54cd</li> <li> \u8bb8\u53ef\u8bc1\u5408\u89c4\u68c0\u67e5</li> <li> \u66ff\u4ee3\u65b9\u6848\u8c03\u7814</li> <li> \u6280\u672f\u503a\u52a1\u8bc4\u4f30</li> </ul>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#7","title":"\ud83e\udded 7. \u6545\u969c\u6392\u67e5\u6307\u5357","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#71","title":"7.1 \u5e38\u89c1\u95ee\u9898\u8bca\u65ad","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#1-pip-check","title":"\u95ee\u9898 1: pip check \u62a5\u9519","text":"<p>\u75c7\u72b6: <pre><code>ERROR: pip's dependency resolver does not currently take into account all the packages that are installed...\n</code></pre></p> <p>\u5904\u7406\u6b65\u9aa4: <pre><code># 1. \u68c0\u67e5\u5177\u4f53\u51b2\u7a81\npip check\n\n# 2. \u91cd\u65b0\u751f\u6210\u9501\u5b9a\u6587\u4ef6\nmake lock-deps\n\n# 3. \u540c\u6b65\u73af\u5883\npip-sync requirements/requirements.lock\n\n# 4. \u9a8c\u8bc1\u4fee\u590d\npip check\n</code></pre></p>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#2-ci-deps_guardianyml","title":"\u95ee\u9898 2: CI \u5931\u8d25 - deps_guardian.yml","text":"<p>\u75c7\u72b6: <pre><code>\u26a0\ufe0f  base.lock \u4e0e base.in \u4e0d\u4e00\u81f4\uff0c\u8bf7\u6267\u884c make lock-deps\n</code></pre></p> <p>\u5904\u7406\u6b65\u9aa4: <pre><code># 1. \u68c0\u67e5\u5dee\u5f02\ngit diff requirements/base.in requirements/base.lock\n\n# 2. \u672c\u5730\u91cd\u65b0\u751f\u6210\nmake lock-deps\n\n# 3. \u63d0\u4ea4\u66f4\u65b0\ngit add requirements/\ngit commit -m \"fix(deps): sync lock files with in files\"\n</code></pre></p>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#3_1","title":"\u95ee\u9898 3: \u865a\u62df\u73af\u5883\u6fc0\u6d3b\u5931\u8d25","text":"<p>\u75c7\u72b6: <pre><code>ModuleNotFoundError: No module named 'redis'\n</code></pre></p> <p>\u5904\u7406\u6b65\u9aa4: <pre><code># 1. \u68c0\u67e5\u73af\u5883\nwhich python\npython --version\n\n# 2. \u91cd\u65b0\u6fc0\u6d3b\nsource .venv/bin/activate\n\n# 3. \u91cd\u65b0\u5b89\u88c5\nmake install\n\n# 4. \u9a8c\u8bc1\npython -c \"import redis; print(redis.__version__)\"\n</code></pre></p>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#4_1","title":"\u95ee\u9898 4: \u4f9d\u8d56\u7248\u672c\u51b2\u7a81","text":"<p>\u75c7\u72b6: <pre><code>ERROR: Package 'package-a' requires 'package-b&gt;=2.0', but you have 'package-b 1.9'...\n</code></pre></p> <p>\u5904\u7406\u6b65\u9aa4: <pre><code># 1. \u67e5\u770b\u4f9d\u8d56\u6811\npip show package-b\n\n# 2. \u627e\u51fa\u51b2\u7a81\u65b9\npip depends package-a\n\n# 3. \u66f4\u65b0 .in \u6587\u4ef6\nvim requirements/base.in\n\n# 4. \u91cd\u65b0\u89e3\u6790\nmake lock-deps\n</code></pre></p>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#72","title":"7.2 \u5e94\u6025\u5904\u7406\u6d41\u7a0b","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_12","title":"\u751f\u4ea7\u73af\u5883\u4f9d\u8d56\u95ee\u9898","text":"<pre><code># 1. \u5feb\u901f\u56de\u6eda\ngit checkout previous-stable-tag\npip install -r requirements/base.lock\n\n# 2. \u95ee\u9898\u5b9a\u4f4d\npip freeze &gt; current-deps.txt\ndiff current-deps.txt requirements/base.lock\n\n# 3. \u4fee\u590d\u540e\u9a8c\u8bc1\nmake verify-deps\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_13","title":"\u5927\u89c4\u6a21\u4f9d\u8d56\u66f4\u65b0","text":"<pre><code># 1. \u521b\u5efa\u5206\u652f\ngit checkout -b deps/major-update-$(date +%Y%m)\n\n# 2. \u66f4\u65b0\u6838\u5fc3\u4f9d\u8d56\nvim requirements/base.in\n\n# 3. \u9010\u6b65\u66f4\u65b0\u9501\u5b9a\u6587\u4ef6\nmake lock-deps\n\n# 4. \u5168\u9762\u6d4b\u8bd5\nmake test\nmake integration-test\n\n# 5. \u521b\u5efa PR\ngit push origin deps/major-update-$(date +%Y%m)\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#8","title":"\ud83d\udcda 8. \u9644\u5f55","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#81","title":"8.1 \u4f9d\u8d56\u751f\u547d\u5468\u671f\u56fe","text":"<pre><code>\u7f16\u8f91\u9636\u6bb5:\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u7f16\u8f91 .in \u6587\u4ef6\u2502\u2500\u2500\u2500\u25b6\u2502 make        \u2502\u2500\u2500\u2500\u25b6\u2502 \u751f\u6210 .lock  \u2502\n\u2502 \u6307\u5b9a\u7248\u672c     \u2502    \u2502 lock-deps   \u2502    \u2502 \u6587\u4ef6        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                             \u2502\n\u9a8c\u8bc1\u9636\u6bb5:                                    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u63d0\u4ea4\u5230\u4ed3\u5e93   \u2502\u2500\u2500\u2500\u25b6\u2502 CI \u81ea\u52a8\u9a8c\u8bc1  \u2502\u25c0\u2500\u2500\u2500\u2502 make        \u2502\n\u2502 \u89e6\u53d1 GitHub \u2502    \u2502 \u963b\u6b62\u9519\u8bef\u63d0\u4ea4 \u2502    \u2502 verify-deps \u2502\n\u2502 Actions     \u2502    \u2502             \u2502    \u2502             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                             \u2502\n\u4f7f\u7528\u9636\u6bb5:                                    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u5404\u73af\u5883\u5b89\u88c5   \u2502\u25c0\u2500\u2500\u2500\u2502 pip install \u2502\u25c0\u2500\u2500\u2500\u2502 .lock \u6587\u4ef6   \u2502\n\u2502 \u786e\u4fdd\u4e00\u81f4\u6027   \u2502    \u2502 -r lockfile \u2502    \u2502 \u7248\u672c\u7cbe\u786e     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#82-makefile","title":"8.2 Makefile \u5b8c\u6574\u76ee\u6807\u5217\u8868","text":"<pre><code># \u73af\u5883\u7ba1\u7406\nmake venv           # \u521b\u5efa\u865a\u62df\u73af\u5883\nmake install        # \u5b89\u88c5\u4f9d\u8d56\nmake install-locked # \u53ef\u91cd\u73b0\u5b89\u88c5\nmake clean-env      # \u6e05\u7406\u73af\u5883\n\n# \u4f9d\u8d56\u7ba1\u7406\nmake lock-deps      # \u9501\u5b9a\u4f9d\u8d56\nmake verify-deps    # \u9a8c\u8bc1\u4e00\u81f4\u6027\nmake check-deps     # \u68c0\u67e5\u5fc5\u9700\u4f9d\u8d56\n\n# \u6d4b\u8bd5\u76f8\u5173\nmake test-quick     # \u5feb\u901f\u6d4b\u8bd5\nmake test           # \u5b8c\u6574\u6d4b\u8bd5\nmake coverage       # \u8986\u76d6\u7387\u6d4b\u8bd5\n\n# \u4ee3\u7801\u8d28\u91cf\nmake fmt            # \u683c\u5f0f\u5316\u4ee3\u7801\nmake lint           # \u4ee3\u7801\u68c0\u67e5\nmake type-check     # \u7c7b\u578b\u68c0\u67e5\nmake prepush        # \u63d0\u4ea4\u524d\u68c0\u67e5\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#83","title":"8.3 \u547d\u4ee4\u901f\u67e5\u8868","text":"\u573a\u666f \u547d\u4ee4 \u8bf4\u660e \u65b0\u73af\u5883 <code>make install</code> \u5b89\u88c5\u6240\u6709\u4f9d\u8d56 \u6dfb\u52a0\u5305 <code>echo \"pkg==1.0\" &gt;&gt; requirements/base.in &amp;&amp; make lock-deps</code> \u6dfb\u52a0\u65b0\u4f9d\u8d56 \u66f4\u65b0\u5305 <code>vim requirements/base.in &amp;&amp; make lock-deps</code> \u66f4\u65b0\u7248\u672c \u68c0\u67e5 <code>make verify-deps</code> \u9a8c\u8bc1\u4e00\u81f4\u6027 \u5ba1\u8ba1 <code>pip-audit</code> \u5b89\u5168\u68c0\u67e5 \u6e05\u7406 <code>make clean-env</code> \u91cd\u7f6e\u73af\u5883 \u6d4b\u8bd5 <code>make test-quick</code> \u8fd0\u884c\u6d4b\u8bd5"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#84","title":"8.4 \u4f18\u79c0\u5b9e\u8df5\u793a\u4f8b","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_14","title":"\u8bed\u4e49\u5316\u63d0\u4ea4\u4fe1\u606f","text":"<pre><code>chore(deps): add pytest-cov for coverage reporting\nchore(deps): update fastapi from 0.104.0 to 0.104.1\nfix(deps): resolve redis compatibility issue\nchore(deps)!: upgrade python from 3.10 to 3.11  # \u7834\u574f\u6027\u66f4\u65b0\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#_15","title":"\u4f9d\u8d56\u5206\u7ec4\u7ba1\u7406","text":"<pre><code># requirements/base.in\n# Core framework\nfastapi==0.115.6\nuvicorn[standard]==0.34.0\n\n# Database\nsqlalchemy==2.0.36\nalembic==1.16.5\n\n# Cache\nredis==5.0.1\naioredis==2.0.1\n\n# Authentication\npython-jose[cryptography]==3.3.0\npasslib[bcrypt]==1.7.4\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#85","title":"8.5 \u6545\u969c\u6062\u590d\u811a\u672c","text":"<p>\u521b\u5efa <code>scripts/emergency_deps_recovery.sh</code>:</p> <pre><code>#!/usr/bin/env bash\nset -e\n\necho \"\ud83d\udea8 Emergency Dependency Recovery\"\necho \"================================\"\n\n# 1. \u5907\u4efd\u5f53\u524d\u72b6\u6001\npip freeze &gt; emergency-backup-$(date +%Y%m%d-%H%M%S).txt\n\n# 2. \u6e05\u7406\u73af\u5883\ndeactivate 2&gt;/dev/null || true\nrm -rf .venv\n\n# 3. \u91cd\u5efa\u73af\u5883\npython -m venv .venv\nsource .venv/bin/activate\n\n# 4. \u5b89\u88c5\u57fa\u7840\u5de5\u5177\npip install --upgrade pip pip-tools\n\n# 5. \u91cd\u65b0\u751f\u6210\u6240\u6709\u9501\u5b9a\u6587\u4ef6\nmake lock-deps\n\n# 6. \u5b89\u88c5\u4f9d\u8d56\nmake install\n\n# 7. \u9a8c\u8bc1\nmake verify-deps\n\necho \"\u2705 Emergency recovery completed!\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#9","title":"\ud83c\udfc1 9. \u603b\u7ed3","text":""},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#91","title":"9.1 \u6210\u679c\u56de\u987e","text":"<p>\u901a\u8fc7\u5b9e\u65bd\u672c\u6307\u5357\uff0c\u6211\u4eec\u5df2\u7ecf\u5b9e\u73b0\u4e86\uff1a</p> <ul> <li>\u2705 \u96f6\u4f9d\u8d56\u51b2\u7a81: \u81ea\u52a8\u5316\u9632\u5fa1\u673a\u5236\u786e\u4fdd\u4f9d\u8d56\u4e00\u81f4\u6027</li> <li>\u2705 \u73af\u5883\u4e00\u81f4\u6027: \u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u4ea7\u73af\u5883\u5b8c\u5168\u540c\u6b65</li> <li>\u2705 \u5b89\u5168\u9632\u62a4: \u5b9a\u671f\u5ba1\u8ba1\u548c CVE \u68c0\u6d4b</li> <li>\u2705 \u6d41\u7a0b\u6807\u51c6\u5316: \u6e05\u6670\u7684\u66f4\u65b0\u548c\u7ef4\u62a4\u6d41\u7a0b</li> <li>\u2705 \u81ea\u52a8\u5316: CI/CD \u96c6\u6210\u7684\u81ea\u52a8\u9a8c\u8bc1</li> </ul>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#92","title":"9.2 \u56e2\u961f\u8d23\u4efb","text":"<ol> <li>\u5f00\u53d1\u8005:</li> <li>\u9075\u5faa\u4f9d\u8d56\u6dfb\u52a0\u6d41\u7a0b</li> <li>\u63d0\u4ea4\u524d\u8fd0\u884c <code>make verify-deps</code></li> <li> <p>\u53ca\u65f6\u5904\u7406 Dependabot PR</p> </li> <li> <p>\u7ef4\u62a4\u8005:</p> </li> <li>\u6267\u884c\u6708\u5ea6\u5b89\u5168\u5ba1\u8ba1</li> <li>\u5ba1\u6838\u4f9d\u8d56\u66f4\u65b0\u8bf7\u6c42</li> <li> <p>\u7ef4\u62a4\u6587\u6863\u66f4\u65b0</p> </li> <li> <p>\u67b6\u6784\u5e08:</p> </li> <li>\u5236\u5b9a\u4f9d\u8d56\u7b56\u7565</li> <li>\u8bc4\u4f30\u65b0\u6280\u672f\u6808</li> <li>\u89c4\u5212\u91cd\u5927\u5347\u7ea7</li> </ol>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#93","title":"9.3 \u6301\u7eed\u6539\u8fdb","text":"<p>\u672c\u6307\u5357\u662f\u6d3b\u6587\u6863\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u6301\u7eed\u66f4\u65b0\uff1a - \u65b0\u5de5\u5177\u7684\u5f15\u5165 - \u6d41\u7a0b\u7684\u4f18\u5316 - \u7ecf\u9a8c\u7684\u79ef\u7d2f - \u53cd\u9988\u7684\u6536\u96c6</p>"},{"location":"maintenance/DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE/#94","title":"9.4 \u8054\u7cfb\u65b9\u5f0f","text":"<p>\u5982\u6709\u95ee\u9898\u6216\u5efa\u8bae\uff0c\u8bf7\uff1a 1. \u521b\u5efa Issue \u8fdb\u884c\u8ba8\u8bba 2. \u5728\u56e2\u961f\u4f1a\u8bae\u4e0a\u63d0\u51fa 3. \u76f4\u63a5\u8054\u7cfb\u7ef4\u62a4\u56e2\u961f</p> <p>\u8bb0\u4f4f\uff1a\u4f9d\u8d56\u7ba1\u7406\u4e0d\u662f\u4e00\u6b21\u6027\u4efb\u52a1\uff0c\u800c\u662f\u6301\u7eed\u7684\u8fc7\u7a0b\u3002\u8ba9\u6211\u4eec\u4e00\u8d77\u7ef4\u62a4\u4e00\u4e2a\u7a33\u5b9a\u3001\u5b89\u5168\u3001\u9ad8\u6548\u7684\u5f00\u53d1\u73af\u5883\uff01 \ud83d\ude80</p> <p>\u672c\u6587\u6863\u6700\u540e\u66f4\u65b0\uff1a2025-01-04 \u4e0b\u6b21\u5ba1\u67e5\u65e5\u671f\uff1a2025-04-04</p>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/","title":"\u4f9d\u8d56\u7ba1\u7406\u6307\u5357","text":""},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_2","title":"\u6982\u8ff0","text":"<p>\u672c\u9879\u76ee\u4f7f\u7528\u4f9d\u8d56\u9501\u5b9a\u7cfb\u7edf\u786e\u4fdd\u5f00\u53d1\u548c\u751f\u4ea7\u73af\u5883\u7684\u4e00\u81f4\u6027\u3002</p>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_3","title":"\u6587\u4ef6\u8bf4\u660e","text":"\u6587\u4ef6 \u7528\u9014 \u662f\u5426\u63d0\u4ea4\u5230\u7248\u672c\u63a7\u5236 <code>requirements.txt</code> \u6838\u5fc3\u4f9d\u8d56\uff08\u65e0\u7248\u672c\u9501\u5b9a\uff09 \u2705 \u662f <code>requirements-dev.txt</code> \u5f00\u53d1\u4f9d\u8d56 \u2705 \u662f <code>requirements-test.txt</code> \u6d4b\u8bd5\u4f9d\u8d56 \u2705 \u662f <code>requirements.lock.txt</code> \u5b8c\u6574\u4f9d\u8d56\u9501\u5b9a \u2705 \u662f"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_4","title":"\u547d\u4ee4\u53c2\u8003","text":""},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_5","title":"\u5b89\u88c5\u4f9d\u8d56","text":"<pre><code># \u5e38\u89c4\u5b89\u88c5\uff08\u53ef\u80fd\u83b7\u5f97\u4e0d\u540c\u7248\u672c\uff09\nmake install\n\n# \u53ef\u91cd\u73b0\u5b89\u88c5\uff08\u63a8\u8350\u7528\u4e8e\u751f\u4ea7\uff09\nmake install-locked\n</code></pre>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_6","title":"\u7ba1\u7406\u4f9d\u8d56","text":"<pre><code># \u6dfb\u52a0\u65b0\u4f9d\u8d56\npip install &lt;package-name&gt;\nmake lock-deps  # \u7acb\u5373\u9501\u5b9a\uff01\n\n# \u66f4\u65b0\u4f9d\u8d56\npip install --upgrade &lt;package-name&gt;\nmake lock-deps  # \u91cd\u65b0\u9501\u5b9a\n</code></pre>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_7","title":"\u9a8c\u8bc1\u4f9d\u8d56","text":"<pre><code># \u68c0\u67e5\u5f53\u524d\u73af\u5883\u662f\u5426\u4e0e\u9501\u6587\u4ef6\u4e00\u81f4\nmake verify-deps\n</code></pre>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_8","title":"\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#1","title":"1. \u5f00\u53d1\u65b0\u529f\u80fd","text":"<pre><code># 1. \u5b89\u88c5\u4f9d\u8d56\nmake install-locked\n\n# 2. \u6dfb\u52a0\u65b0\u4f9d\u8d56\uff08\u5982\u679c\u9700\u8981\uff09\npip install new-package\n\n# 3. \u5f00\u53d1\u5b8c\u6210\u540e\uff0c\u9501\u5b9a\u4f9d\u8d56\nmake lock-deps\n\n# 4. \u63d0\u4ea4\u66f4\u6539\ngit add requirements.lock.txt\ngit commit -m \"feat: add new-package dependency\"\n</code></pre>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#2","title":"2. \u90e8\u7f72\u5230\u751f\u4ea7","text":"<pre><code># 1. \u514b\u9686\u4ee3\u7801\ngit clone &lt;repository&gt;\n\n# 2. \u5b89\u88c5\u9501\u5b9a\u7248\u672c\nmake install-locked\n\n# 3. \u9a8c\u8bc1\u73af\u5883\nmake verify-deps\n</code></pre>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#3-cicd","title":"3. CI/CD \u6d41\u7a0b","text":"<pre><code># .github/workflows/ci.yml \u793a\u4f8b\n- name: Setup Python\n  uses: actions/setup-python@v4\n\n- name: Install dependencies\n  run: make install-locked\n\n- name: Verify dependencies\n  run: make verify-deps\n\n- name: Run tests\n  run: make test\n</code></pre>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#ci","title":"\u5b9e\u9645CI\u96c6\u6210","text":"<p>\u672c\u9879\u76ee\u5df2\u5728CI\u6d41\u6c34\u7ebf\u4e2d\u96c6\u6210\u4f9d\u8d56\u4e00\u81f4\u6027\u68c0\u67e5\uff1a</p> <ol> <li>\u8d28\u91cf\u68c0\u67e5\u9636\u6bb5 - \u81ea\u52a8\u9a8c\u8bc1\u4f9d\u8d56\u4e00\u81f4\u6027</li> <li>\u5982\u679c <code>requirements.lock.txt</code> \u5b58\u5728\uff0cCI\u4f1a\u81ea\u52a8\u8fd0\u884c <code>make verify-deps</code></li> <li> <p>\u9a8c\u8bc1\u5931\u8d25\u4f1a\u963b\u6b62\u6d41\u6c34\u7ebf\u7ee7\u7eed\u6267\u884c</p> </li> <li> <p>\u6d4b\u8bd5\u9636\u6bb5 - \u4f18\u5148\u4f7f\u7528\u9501\u5b9a\u4f9d\u8d56</p> </li> <li>CI\u4f1a\u81ea\u52a8\u68c0\u6d4b\u5e76\u4f7f\u7528 <code>make install-locked</code></li> <li> <p>\u786e\u4fdd\u6d4b\u8bd5\u73af\u5883\u4e0e\u5f00\u53d1\u73af\u5883\u5b8c\u5168\u4e00\u81f4</p> </li> <li> <p>\u7f13\u5b58\u4f18\u5316 - \u5305\u542b\u9501\u6587\u4ef6\u54c8\u5e0c</p> </li> <li>\u4f9d\u8d56\u7f13\u5b58\u952e\u5305\u542b <code>requirements.lock.txt</code></li> <li>\u4f9d\u8d56\u66f4\u65b0\u65f6\u81ea\u52a8\u5237\u65b0\u7f13\u5b58</li> </ol>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_9","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_10","title":"\u2705 \u505a\u4ec0\u4e48","text":"<ol> <li>\u59cb\u7ec8\u4f7f\u7528 <code>make install-locked</code></li> <li>\u786e\u4fdd\u73af\u5883\u4e00\u81f4\u6027</li> <li> <p>\u907f\u514d\u610f\u5916\u7684\u7248\u672c\u66f4\u65b0</p> </li> <li> <p>\u6dfb\u52a0\u4f9d\u8d56\u540e\u7acb\u5373\u9501\u5b9a</p> </li> </ol> <pre><code>pip install some-package\nmake lock-deps\ngit add requirements.lock.txt\n</code></pre> <ol> <li>\u5b9a\u671f\u9a8c\u8bc1\u4f9d\u8d56</li> </ol> <pre><code>make verify-deps\n</code></pre> <ol> <li>\u56e2\u961f\u534f\u4f5c\u65f6\u5171\u4eab\u9501\u6587\u4ef6</li> <li>\u786e\u4fdd\u6240\u6709\u4eba\u4f7f\u7528\u76f8\u540c\u7248\u672c</li> </ol>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_11","title":"\u274c \u907f\u514d\u4ec0\u4e48","text":"<ol> <li>\u4e0d\u8981\u624b\u52a8\u7f16\u8f91 <code>requirements.lock.txt</code></li> <li> <p>\u5b83\u662f\u81ea\u52a8\u751f\u6210\u7684</p> </li> <li> <p>\u4e0d\u8981\u76f4\u63a5 <code>pip install</code> \u540e\u4e0d\u9501\u5b9a</p> </li> <li> <p>\u4f1a\u5bfc\u81f4\u73af\u5883\u4e0d\u4e00\u81f4</p> </li> <li> <p>\u4e0d\u8981\u63d0\u4ea4 <code>requirements_frozen.txt</code></p> </li> <li>\u8fd9\u662f\u4e34\u65f6\u6587\u4ef6</li> </ol>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_12","title":"\u6545\u969c\u6392\u9664","text":""},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_13","title":"\u4f9d\u8d56\u51b2\u7a81","text":"<pre><code># \u68c0\u67e5\u51b2\u7a81\nmake verify-deps\n\n# \u89e3\u51b3\u65b9\u6848\uff1a\u91cd\u65b0\u521b\u5efa\u73af\u5883\nrm -rf .venv\nmake install-locked\n</code></pre>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_14","title":"\u9501\u6587\u4ef6\u8fc7\u65f6","text":"<pre><code># \u66f4\u65b0\u6240\u6709\u4f9d\u8d56\npip install --upgrade -r requirements.txt\nmake lock-deps\n</code></pre>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_15","title":"\u7279\u5b9a\u5305\u7248\u672c\u95ee\u9898","text":"<pre><code># \u5b89\u88c5\u7279\u5b9a\u7248\u672c\npip install package==1.2.3\n\n# \u9a8c\u8bc1\u5e76\u9501\u5b9a\nmake verify-deps\nmake lock-deps\n</code></pre>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_16","title":"\u80cc\u540e\u7684\u539f\u7406","text":""},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_17","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u4f9d\u8d56\u9501\u5b9a\uff1f","text":"<ol> <li>\u53ef\u91cd\u73b0\u6027 - \u786e\u4fdd\u4efb\u4f55\u65f6\u95f4\u3001\u4efb\u4f55\u73af\u5883\u90fd\u80fd\u83b7\u5f97\u76f8\u540c\u7684\u4f9d\u8d56\u7248\u672c</li> <li>\u5b89\u5168\u6027 - \u907f\u514d\u610f\u5916\u5b89\u88c5\u5305\u542b\u6f0f\u6d1e\u7684\u65b0\u7248\u672c</li> <li>\u7a33\u5b9a\u6027 - \u9632\u6b62\u4f9d\u8d56\u66f4\u65b0\u5bfc\u81f4\u7684\u7834\u574f\u6027\u53d8\u66f4</li> </ol>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_18","title":"\u9501\u6587\u4ef6\u5305\u542b\u4ec0\u4e48\uff1f","text":"<ul> <li>\u6240\u6709\u76f4\u63a5\u548c\u95f4\u63a5\u4f9d\u8d56</li> <li>\u7cbe\u786e\u7684\u7248\u672c\u53f7</li> <li>\u603b\u8ba1208\u4e2a\u5305\uff08\u5305\u62ec\u4f20\u9012\u4f9d\u8d56\uff09</li> <li>pip\u5de5\u5177\u7248\u672c\uff08pip, setuptools, wheel\uff09</li> </ul>"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_19","title":"\u4e0e\u5176\u4ed6\u5de5\u5177\u7684\u6bd4\u8f83","text":"\u5de5\u5177 \u9501\u6587\u4ef6 \u4f18\u70b9 \u7f3a\u70b9 pip + requirements.lock.txt \u2705 \u7b80\u5355\uff0c\u65e0\u9700\u989d\u5916\u5de5\u5177 \u9700\u8981\u624b\u52a8\u7ba1\u7406 Pipenv Pipfile.lock \u96c6\u6210\u865a\u62df\u73af\u5883 \u5b66\u4e60\u6210\u672c\u9ad8 Poetry poetry.lock \u73b0\u4ee3\u5316\uff0c\u529f\u80fd\u4e30\u5bcc \u6539\u53d8\u5de5\u4f5c\u6d41 PDM pdm.lock \u5feb\u901f\uff0cPEP 582 \u8f83\u65b0\uff0c\u751f\u6001\u4e0d\u6210\u719f"},{"location":"maintenance/DEPENDENCY_MANAGEMENT/#_20","title":"\u76f8\u5173\u8d44\u6e90","text":"<ul> <li>Python \u4f9d\u8d56\u7ba1\u7406\u6700\u4f73\u5b9e\u8df5</li> <li>pip \u6587\u6863</li> <li>requirements.txt \u683c\u5f0f\u89c4\u8303</li> </ul> <p>\u6700\u540e\u66f4\u65b0: 2025-10-05</p>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/","title":"\u9879\u76ee\u7ef4\u62a4\u6307\u5357","text":""},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_2","title":"\ud83d\udccb \u5b9a\u671f\u7ef4\u62a4\u4efb\u52a1","text":""},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_3","title":"\u6bcf\u65e5\u7ef4\u62a4","text":"<ul> <li> \u8fd0\u884c <code>make test-quick</code> \u786e\u4fdd\u7cfb\u7edf\u6b63\u5e38</li> <li> \u63d0\u4ea4\u524d\u8fd0\u884c <code>make fmt &amp;&amp; make lint</code></li> <li> \u4e34\u65f6\u6587\u4ef6\u53ca\u65f6\u5206\u7c7b</li> </ul>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_4","title":"\u6bcf\u5468\u7ef4\u62a4","text":"<ul> <li> \u8fd0\u884c <code>./scripts/cleanup_project.sh</code> \u6e05\u7406\u9879\u76ee</li> <li> \u8fd0\u884c <code>make coverage</code> \u68c0\u67e5\u6d4b\u8bd5\u8986\u76d6\u7387</li> <li> \u68c0\u67e5 <code>docs/_reports/</code> \u4e2d\u7684\u62a5\u544a</li> </ul>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_5","title":"\u6bcf\u6708\u7ef4\u62a4","text":"<ul> <li> \u5f52\u6863\u4e0a\u6708\u62a5\u544a\u5230 <code>docs/_reports/archive/YYYY-MM/</code></li> <li> \u66f4\u65b0 <code>CHANGELOG.md</code></li> <li> \u5ba1\u67e5\u9879\u76ee\u4f9d\u8d56\u662f\u5426\u9700\u8981\u66f4\u65b0</li> </ul>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_6","title":"\ud83d\udcc1 \u76ee\u5f55\u7ed3\u6784\u89c4\u5219","text":""},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_7","title":"\u6839\u76ee\u5f55\u53ea\u4fdd\u7559\u6838\u5fc3\u6587\u4ef6","text":"<pre><code>\u9879\u76ee\u6839\u76ee\u5f55/\n\u251c\u2500\u2500 src/                    # \u6e90\u4ee3\u7801\n\u251c\u2500\u2500 tests/                  # \u6d4b\u8bd5\n\u251c\u2500\u2500 docs/                   # \u6587\u6863\n\u251c\u2500\u2500 config/                 # \u914d\u7f6e\u6587\u4ef6\n\u251c\u2500\u2500 scripts/                # \u811a\u672c\n\u251c\u2500\u2500 requirements*.txt      # \u4f9d\u8d56\u6587\u4ef6\uff083\u4e2a\uff09\n\u251c\u2500\u2500 docker-compose*.yml     # Docker\u914d\u7f6e\uff08\u6838\u5fc33\u4e2a\uff09\n\u251c\u2500\u2500 Makefile               # \u6784\u5efa\u811a\u672c\n\u2514\u2500\u2500 README.md              # \u9879\u76ee\u8bf4\u660e\n</code></pre>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_8","title":"\u6587\u6863\u5206\u7c7b\u89c4\u5219","text":"<pre><code>docs/\n\u251c\u2500\u2500 ai/                    # AI\u76f8\u5173\u6587\u6863\n\u251c\u2500\u2500 how-to/                # \u64cd\u4f5c\u6307\u5357\n\u251c\u2500\u2500 architecture/          # \u67b6\u6784\u6587\u6863\n\u251c\u2500\u2500 reference/             # \u53c2\u8003\u8d44\u6599\n\u251c\u2500\u2500 testing/               # \u6d4b\u8bd5\u6587\u6863\n\u251c\u2500\u2500 project/               # \u9879\u76ee\u7ba1\u7406\n\u251c\u2500\u2500 security/              # \u5b89\u5168\u6587\u6863\n\u251c\u2500\u2500 _reports/              # \u62a5\u544a\n\u2502   \u251c\u2500\u2500 archive/           # \u6309\u6708\u5f52\u6863\n\u2502   \u2514\u2500\u2500 templates/         # \u62a5\u544a\u6a21\u677f\n\u2514\u2500\u2500 legacy/                # \u5386\u53f2\u6587\u6863\n</code></pre>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_9","title":"\u914d\u7f6e\u6587\u4ef6\u89c4\u5219","text":"<pre><code>config/\n\u251c\u2500\u2500 docker/                # Docker\u914d\u7f6e\n\u251c\u2500\u2500 pytest/                # \u6d4b\u8bd5\u914d\u7f6e\n\u251c\u2500\u2500 coverage/              # \u8986\u76d6\u7387\u914d\u7f6e\n\u251c\u2500\u2500 app/                   # \u5e94\u7528\u914d\u7f6e\n\u2514\u2500\u2500 monitoring/            # \u76d1\u63a7\u914d\u7f6e\n</code></pre>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_10","title":"\ud83d\udd04 \u65b0\u6587\u4ef6\u5904\u7406\u6d41\u7a0b","text":""},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#1","title":"1. \u4e34\u65f6\u62a5\u544a","text":"<ul> <li>\u81ea\u52a8\u79fb\u81f3 <code>docs/_reports/</code></li> <li>\u6708\u672b\u5f52\u6863\u5230 <code>docs/_reports/archive/YYYY-MM/</code></li> </ul>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#2","title":"2. \u65b0\u6587\u6863","text":"<ul> <li>\u6839\u636e\u5185\u5bb9\u5206\u7c7b\u5230\u76f8\u5e94\u76ee\u5f55</li> <li>\u66f4\u65b0 <code>docs/INDEX.md</code></li> </ul>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#3","title":"3. \u914d\u7f6e\u6587\u4ef6","text":"<ul> <li>\u653e\u5165 <code>config/</code> \u7684\u76f8\u5e94\u5b50\u76ee\u5f55</li> <li>\u66f4\u65b0\u76f8\u5173\u6587\u6863</li> </ul>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_11","title":"\ud83d\ude80 \u5feb\u901f\u547d\u4ee4","text":""},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_12","title":"\u6e05\u7406\u9879\u76ee","text":"<pre><code>./scripts/cleanup_project.sh\n</code></pre>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_13","title":"\u68c0\u67e5\u9879\u76ee\u5065\u5eb7","text":"<pre><code>make env-check &amp;&amp; make test-quick\n</code></pre>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_14","title":"\u5b8c\u6574\u9a8c\u8bc1","text":"<pre><code>make fmt &amp;&amp; make lint &amp;&amp; make test &amp;&amp; make prepush\n</code></pre>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_15","title":"\ud83d\udcdd \u6587\u6863\u547d\u540d\u89c4\u8303","text":""},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_16","title":"\u62a5\u544a\u6587\u4ef6","text":"<ul> <li>\u4e34\u65f6\u62a5\u544a\uff1a<code>REPORT_TYPE_DATE.md</code></li> <li>\u9636\u6bb5\u62a5\u544a\uff1a<code>PHASE_X_COMPLETION_REPORT.md</code></li> <li>\u6708\u5ea6\u603b\u7ed3\uff1a<code>MONTHLY_SUMMARY_YYYY-MM.md</code></li> </ul>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_17","title":"\u6587\u6863\u6587\u4ef6","text":"<ul> <li>\u4f7f\u7528\u82f1\u6587\u6587\u4ef6\u540d</li> <li>\u4e2d\u6587\u5185\u5bb9</li> <li>\u4f7f\u7528\u8fde\u5b57\u7b26\u5206\u9694\u5355\u8bcd</li> </ul>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_18","title":"\ud83c\udfaf \u8d28\u91cf\u68c0\u67e5\u6e05\u5355","text":""},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_19","title":"\u63d0\u4ea4\u524d\u68c0\u67e5","text":"<ul> <li> \u4ee3\u7801\u683c\u5f0f\u5316\u5b8c\u6210</li> <li> \u6d4b\u8bd5\u901a\u8fc7</li> <li> \u6587\u6863\u5df2\u66f4\u65b0</li> <li> \u4e34\u65f6\u6587\u4ef6\u5df2\u6e05\u7406</li> </ul>"},{"location":"maintenance/PROJECT_MAINTENANCE_GUIDE/#_20","title":"\u53d1\u5e03\u524d\u68c0\u67e5","text":"<ul> <li> \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7</li> <li> \u5b89\u5168\u626b\u63cf\u901a\u8fc7</li> <li> \u6587\u6863\u5b8c\u6574</li> <li> \u7248\u672c\u53f7\u66f4\u65b0</li> </ul> <p>\u6700\u540e\u66f4\u65b0\uff1a2025-10-02</p>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/","title":"\ud83e\udde9 \u5b89\u5168\u5ba1\u8ba1\u8fd0\u7ef4\u624b\u518c (Security Audit Maintenance Guide)","text":"<p>\u7248\u672c: v1.0 \u9002\u7528\u9879\u76ee: FootballPrediction \u6700\u540e\u66f4\u65b0: 2025-01-04 \u7ef4\u62a4\u56e2\u961f: FootballPrediction \u5f00\u53d1\u56e2\u961f</p>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_1","title":"\ud83c\udfaf \u76ee\u6807\u4e0e\u539f\u5219","text":"<p>\u672c\u624b\u518c\u65e8\u5728\u6307\u5bfc\u56e2\u961f\uff1a - \u5b9a\u671f\u68c0\u6d4b\u4f9d\u8d56\u5b89\u5168\u6f0f\u6d1e - \u7edf\u4e00\u6f0f\u6d1e\u54cd\u5e94\u4e0e\u4fee\u590d\u6d41\u7a0b - \u786e\u4fdd CI \u4e0e\u4eba\u5de5\u5ba1\u8ba1\u673a\u5236\u534f\u540c - \u5efa\u7acb\u6301\u7eed\u7684\u5b89\u5168\u9632\u62a4\u4f53\u7cfb</p>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_2","title":"\u6838\u5fc3\u539f\u5219","text":"<ol> <li>\u81ea\u52a8\u5316\u4f18\u5148 - \u4f9d\u8d56\u5b89\u5168\u5ba1\u8ba1\u4e3b\u8981\u901a\u8fc7 CI \u81ea\u52a8\u6267\u884c</li> <li>\u5feb\u901f\u54cd\u5e94 - \u9ad8\u5371\u6f0f\u6d1e\u5fc5\u987b\u5728 24 \u5c0f\u65f6\u5185\u54cd\u5e94</li> <li>\u900f\u660e\u53ef\u8ffd\u6eaf - \u6240\u6709\u5ba1\u8ba1\u62a5\u544a\u5fc5\u987b\u4fdd\u5b58\u5e76\u53ef\u67e5\u8be2</li> <li>\u9884\u9632\u4e3a\u4e3b - \u901a\u8fc7\u5b9a\u671f\u5ba1\u8ba1\u9632\u60a3\u4e8e\u672a\u7136</li> </ol>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_3","title":"\ud83c\udfd7\ufe0f \u5b89\u5168\u5ba1\u8ba1\u4f53\u7cfb\u7ed3\u6784","text":"<pre><code>.github/workflows/\n\u2514\u2500 DEPENDENCY_AUDIT_AUTOMATION.yml   # \u81ea\u52a8\u6267\u884c\u5ba1\u8ba1\ndocs/_reports/security/\n\u251c\u2500 pip_audit_YYYY-MM-DD_HH-MM-SS.md  # \u5ba1\u8ba1\u62a5\u544a\n\u251c\u2500 archives/                         # \u5386\u53f2\u5f52\u6863\n\u2502  \u2514\u2500 pip_audit_YYYY-MM-DD_HH-MM-SS.json\n\u2514\u2500 README.md                         # \u62a5\u544a\u7d22\u5f15\u9875\ndocs/maintenance/\n\u251c\u2500 SECURITY_AUDIT_GUIDE.md           # \u672c\u624b\u518c\n\u2514\u2500 DEPENDENCY_GUARDIAN_MAINTENANCE_GUIDE.md  # \u4f9d\u8d56\u7ef4\u62a4\u6307\u5357\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_4","title":"\u5de5\u5177\u94fe\u8bf4\u660e","text":"<ul> <li>pip-audit: PyPA \u5b98\u65b9\u4f9d\u8d56\u5b89\u5168\u5ba1\u8ba1\u5de5\u5177</li> <li>GitHub Actions: \u81ea\u52a8\u5316\u6267\u884c\u5e73\u53f0</li> <li>Issue \u81ea\u52a8\u544a\u8b66: \u9ad8\u5371\u6f0f\u6d1e\u81ea\u52a8\u521b\u5efa Issue</li> <li>Markdown \u62a5\u544a: \u4eba\u7c7b\u53ef\u8bfb\u7684\u5ba1\u8ba1\u7ed3\u679c</li> </ul>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_5","title":"\ud83d\udcc6 \u5ba1\u8ba1\u6267\u884c\u8ba1\u5212","text":"\u7c7b\u578b \u9891\u7387 \u89e6\u53d1\u65b9\u5f0f \u8d1f\u8d23\u4eba \u8bf4\u660e \u81ea\u52a8\u5ba1\u8ba1 \u6bcf\u5468\u4e00 17:00 (\u5317\u4eac\u65f6\u95f4) CI \u5b9a\u65f6\u4efb\u52a1 \u7cfb\u7edf\u81ea\u52a8 \u65e0\u9700\u4eba\u5de5\u5e72\u9884 \u624b\u52a8\u5ba1\u8ba1 \u4efb\u610f\u65f6\u95f4 <code>make audit</code> \u6216\u547d\u4ee4\u884c \u4efb\u610f\u5f00\u53d1\u8005 \u4e34\u65f6\u68c0\u67e5\u9700\u6c42 PR \u89e6\u53d1\u5ba1\u8ba1 \u4f9d\u8d56\u53d8\u66f4\u65f6 GitHub PR CI \u81ea\u52a8 \u963b\u6b62\u6709\u6f0f\u6d1e\u7684\u4f9d\u8d56\u5408\u5e76 \u7d27\u6025\u5ba1\u8ba1 \u53d1\u73b0 0-day \u6f0f\u6d1e\u540e \u624b\u52a8\u89e6\u53d1 Tech Lead \u5feb\u901f\u8bc4\u4f30\u5f71\u54cd"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_6","title":"\u5ba1\u8ba1\u8986\u76d6\u7387","text":"<ul> <li>\u2705 \u751f\u4ea7\u4f9d\u8d56: <code>requirements/base.lock</code></li> <li>\u2705 \u5f00\u53d1\u4f9d\u8d56: <code>requirements/dev.lock</code></li> <li>\u2705 \u5b8c\u6574\u4f9d\u8d56: <code>requirements/requirements.lock</code></li> <li>\u2705 \u95f4\u63a5\u4f9d\u8d56: \u6240\u6709\u4f20\u9012\u6027\u4f9d\u8d56</li> </ul>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_7","title":"\ud83d\udd0e \u624b\u52a8\u6267\u884c\u5b89\u5168\u5ba1\u8ba1","text":""},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#1","title":"1\ufe0f\u20e3 \u73af\u5883\u51c6\u5907","text":"<pre><code># \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nsource .venv/bin/activate\n\n# \u786e\u4fdd\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7684 pip-audit\npip install --upgrade pip-audit[toml]\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#2","title":"2\ufe0f\u20e3 \u6267\u884c\u626b\u63cf","text":""},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_8","title":"\u57fa\u7840\u626b\u63cf\uff08\u5feb\u901f\u68c0\u67e5\uff09","text":"<pre><code># \u626b\u63cf\u57fa\u7840\u4f9d\u8d56\npip-audit -r requirements/base.lock\n\n# \u626b\u63cf\u5b8c\u6574\u4f9d\u8d56\npip-audit -r requirements/requirements.lock\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_9","title":"\u751f\u6210\u6b63\u5f0f\u62a5\u544a","text":"<pre><code># \u751f\u6210 Markdown \u62a5\u544a\uff08\u63a8\u8350\uff09\npip-audit -r requirements/requirements.lock \\\n  --format markdown \\\n  --output docs/_reports/security/pip_audit_manual.md\n\n# \u751f\u6210 JSON \u62a5\u544a\uff08\u7528\u4e8e\u5206\u6790\uff09\npip-audit -r requirements/requirements.lock \\\n  --format json \\\n  --output docs/_reports/security/archives/pip_audit_manual.json\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_10","title":"\u4e25\u683c\u6a21\u5f0f\u626b\u63cf","text":"<pre><code># \u53d1\u73b0\u6f0f\u6d1e\u7acb\u5373\u5931\u8d25\npip-audit -r requirements/requirements.lock \\\n  --strict \\\n  --format markdown \\\n  --output docs/_reports/security/pip_audit_strict.md\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#3","title":"3\ufe0f\u20e3 \u67e5\u770b\u7ed3\u679c","text":"<pre><code># \u67e5\u770b\u6700\u65b0\u62a5\u544a\nls -la docs/_reports/security/pip_audit_*.md | tail -1\n\n# \u6253\u5f00\u62a5\u544a\u5185\u5bb9\ncat docs/_reports/security/pip_audit_\u6700\u65b0\u62a5\u544a.md\n\n# \u641c\u7d22\u7279\u5b9a\u6f0f\u6d1e\ngrep -i \"CRITICAL\\|HIGH\" docs/_reports/security/pip_audit_*.md\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_11","title":"\u2699\ufe0f \u4fee\u590d\u6d41\u7a0b (\u6f0f\u6d1e\u54cd\u5e94\u6807\u51c6)","text":""},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#criticalhigh","title":"\ud83d\udea8 \u9ad8\u5371\u6f0f\u6d1e\u54cd\u5e94 (CRITICAL/HIGH)","text":"<p>\u54cd\u5e94\u65f6\u95f4: 24 \u5c0f\u65f6\u5185</p> <pre><code># 1. \u786e\u8ba4\u6f0f\u6d1e\u8be6\u60c5\npip-audit -r requirements/requirements.lock -v\n\n# 2. \u67e5\u627e\u53d7\u5f71\u54cd\u7684\u5305\ngrep -B 2 -A 2 \"CVE-YYYY-XXXX\" \u62a5\u544a\u6587\u4ef6\n\n# 3. \u68c0\u67e5\u662f\u5426\u6709\u5b89\u5168\u7248\u672c\npip-audit -r requirements/requirements.lock --fix\n\n# 4. \u624b\u52a8\u66f4\u65b0\u4f9d\u8d56\nvim requirements/base.in\n# \u4fee\u6539: package==x.y.z -&gt; package==x.y.(z+1)\n\n# 5. \u91cd\u65b0\u751f\u6210\u9501\u5b9a\u6587\u4ef6\nmake lock-deps\n\n# 6. \u9a8c\u8bc1\u4fee\u590d\nmake verify-deps\npip-audit -r requirements/requirements.lock\n\n# 7. \u8fd0\u884c\u6d4b\u8bd5\u786e\u4fdd\u517c\u5bb9\u6027\nmake test-quick\n\n# 8. \u63d0\u4ea4\u4fee\u590d\ngit add requirements/\ngit commit -m \"fix(security): upgrade vulnerable_package to x.y.(z+1)\n\n- Fixes CVE-YYYY-XXXX (CRITICAL)\n- Fixes CVE-YYYY-XXXX (HIGH)\"\ngit push\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#medium","title":"\u26a1 \u4e2d\u5371\u6f0f\u6d1e\u54cd\u5e94 (MEDIUM)","text":"<p>\u54cd\u5e94\u65f6\u95f4: 7 \u5929\u5185</p> <pre><code># \u8bc4\u4f30\u5f71\u54cd\ngrep -B 1 -A 3 \"MEDIUM\" \u62a5\u544a\u6587\u4ef6\n\n# \u5982\u679c\u5305\u672a\u88ab\u5b9e\u9645\u4f7f\u7528\uff0c\u53ef\u4ee5\u79fb\u9664\n# \u68c0\u67e5\u662f\u5426\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\ngrep -r \"package_name\" src/ || echo \"\u672a\u4f7f\u7528\uff0c\u53ef\u79fb\u9664\"\n\n# \u79fb\u9664\u4f9d\u8d56\nvim requirements/base.in\n# \u5220\u9664\u6216\u6ce8\u91ca\u6389\u76f8\u5e94\u884c\n\n# \u91cd\u65b0\u751f\u6210\u9501\u5b9a\u6587\u4ef6\nmake lock-deps\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#i-low","title":"\u2139\ufe0f \u4f4e\u5371\u6f0f\u6d1e\u54cd\u5e94 (LOW)","text":"<p>\u54cd\u5e94\u65f6\u95f4: \u4e0b\u4e2a\u7248\u672c\u53d1\u5e03\u524d</p> <pre><code># \u8bb0\u5f55\u4f46\u4e0d\u7acb\u5373\u4fee\u590d\necho \"\u4f4e\u5371\u6f0f\u6d1e\u8bb0\u5f55:\" &gt;&gt; docs/_reports/security/low_vulnerabilities.log\necho \"- CVE-YYYY-XXXX: package (LOW)\" &gt;&gt; docs/_reports/security/low_vulnerabilities.log\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_12","title":"\ud83d\udcca \u5ba1\u8ba1\u7ed3\u679c\u5206\u7ea7\u5904\u7406\u7b56\u7565","text":"\u98ce\u9669\u7ea7\u522b \u54cd\u5e94\u65f6\u9650 \u5904\u7406\u52a8\u4f5c \u8d1f\u8d23\u4eba \u9a8c\u8bc1\u8981\u6c42 CRITICAL 24\u5c0f\u65f6\u5185 \u7acb\u5373\u5347\u7ea7\u5e76\u9a8c\u8bc1 Tech Lead \u5b8c\u6574\u56de\u5f52\u6d4b\u8bd5 HIGH 3\u5929\u5185 \u4f18\u5148\u4fee\u590d\u5e76\u6d4b\u8bd5 \u7ef4\u62a4\u8005 \u6838\u5fc3\u529f\u80fd\u6d4b\u8bd5 MEDIUM \u4e00\u5468\u5185 \u53ef\u5e76\u5165\u65e5\u5e38\u4f9d\u8d56\u66f4\u65b0 \u5f00\u53d1\u8005 \u57fa\u7840\u529f\u80fd\u6d4b\u8bd5 LOW \u6309\u9700 \u8bb0\u5f55\u5373\u53ef \u4efb\u610f \u65e0\u9700\u6d4b\u8bd5"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_13","title":"\u4fee\u590d\u4f18\u5148\u7ea7\u77e9\u9635","text":"<pre><code>\u9ad8\u5f71\u54cd + \u9ad8\u5229\u7528\u53ef\u80fd = CRITICAL \u2192 \u7acb\u5373\u5904\u7406\n\u9ad8\u5f71\u54cd + \u4f4e\u5229\u7528\u53ef\u80fd = HIGH \u2192 3\u5929\u5185\n\u4f4e\u5f71\u54cd + \u9ad8\u5229\u7528\u53ef\u80fd = MEDIUM \u2192 \u4e00\u5468\u5185\n\u4f4e\u5f71\u54cd + \u4f4e\u5229\u7528\u53ef\u80fd = LOW \u2192 \u4e0b\u4e2a\u7248\u672c\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_14","title":"\ud83d\udcc8 \u62a5\u544a\u7559\u5b58\u4e0e\u5f52\u6863","text":""},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_15","title":"\u62a5\u544a\u751f\u547d\u5468\u671f","text":"<pre><code>\u751f\u6210 \u2192 \u5b58\u50a8 \u2192 \u5206\u6790 \u2192 \u5f52\u6863 \u2192 \u5220\u9664\n  \u2193      \u2193      \u2193      \u2193      \u2193\n\u5b9e\u65f6   90\u5929   \u6309\u9700   1\u5e74    2\u5e74\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_16","title":"\u62a5\u544a\u7ba1\u7406\u89c4\u8303","text":""},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#1_1","title":"1. \u5b58\u50a8\u7ed3\u6784","text":"<pre><code>docs/_reports/security/\n\u251c\u2500\u2500 current/                  # \u5f53\u524d\u5e74\u5ea6\u62a5\u544a\n\u2502   \u251c\u2500\u2500 2025-01-06_09-00-00.md\n\u2502   \u2514\u2500\u2500 2025-01-13_09-00-00.md\n\u251c\u2500\u2500 archives/                 # \u5386\u53f2\u5f52\u6863\n\u2502   \u251c\u2500\u2500 2024/\n\u2502   \u2514\u2500\u2500 2023/\n\u2514\u2500\u2500 README.md                # \u7d22\u5f15\u6587\u4ef6\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#2_1","title":"2. \u5f52\u6863\u89c4\u5219","text":"<pre><code># \u6bcf\u67081\u53f7\u81ea\u52a8\u5f52\u6863\u4e0a\u6708\u62a5\u544a\nmkdir -p docs/_reports/security/archives/$(date -d '1 month ago' +%Y)\nmv docs/_reports/security/pip_audit_$(date -d '1 month ago' +%Y-%m)*.md \\\n   docs/_reports/security/archives/$(date -d '1 month ago' +%Y)/\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#3_1","title":"3. \u6c47\u603b\u62a5\u544a\u751f\u6210","text":"<p>\u521b\u5efa <code>scripts/generate_security_summary.sh</code>:</p> <pre><code>#!/bin/bash\n# \u751f\u6210\u6708\u5ea6\u5b89\u5168\u6c47\u603b\u62a5\u544a\n\nmonth=$(date -d '1 month ago' +%Y-%m)\nreport_file=\"docs/_reports/security/SECURITY_SUMMARY_$month.md\"\n\ncat &gt; \"$report_file\" &lt;&lt; EOF\n# \u5b89\u5168\u5ba1\u8ba1\u6708\u5ea6\u6c47\u603b - $month\n\n## \u7edf\u8ba1\u6570\u636e\n\n- \u603b\u626b\u63cf\u6b21\u6570: $(ls docs/_reports/security/pip_audit_$month*.md 2&gt;/dev/null | wc -l)\n- \u53d1\u73b0\u6f0f\u6d1e\u603b\u6570: $(grep -h \"CVE-\" docs/_reports/security/pip_audit_$month*.md 2&gt;/dev/null | wc -l)\n- \u4fee\u590d\u6f0f\u6d1e\u6570: $(git log --oneline --since=\"$month-01\" --until=\"${month}-31\" | grep -c \"fix(security)\")\n- \u672a\u5904\u7406\u6f0f\u6d1e: $(grep -c \"CVE-\" docs/_reports/security/pip_audit_latest.md 2&gt;/dev/null || echo 0)\n\n## \u6f0f\u6d1e\u8d8b\u52bf\n\n[\u63d2\u5165\u8d8b\u52bf\u56fe\u6216\u8868\u683c]\n\n## \u5904\u7406\u5efa\u8bae\n\nEOF\n\necho \"\u6708\u5ea6\u6c47\u603b\u62a5\u544a\u5df2\u751f\u6210: $report_file\"\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_17","title":"\ud83d\udd14 \u5b89\u5168\u5ba1\u8ba1\u5e38\u89c1\u95ee\u9898","text":"\u95ee\u9898 \u539f\u56e0 \u89e3\u51b3\u65b9\u6848 CI \u672a\u751f\u6210\u62a5\u544a \u6743\u9650\u4e0d\u8db3\u6216 pip-audit \u5b89\u88c5\u5931\u8d25 \u68c0\u67e5 workflow \u6743\u9650\u914d\u7f6e \u62a5\u544a\u7a7a\u767d \u672a\u68c0\u6d4b\u5230\u6f0f\u6d1e \u5c5e\u6b63\u5e38\u73b0\u8c61\uff0c\u65e0\u9700\u5904\u7406 \u91cd\u590d Issue \u591a\u6b21\u89e6\u53d1\u5ba1\u8ba1 \u5408\u5e76\u6216\u5173\u95ed\u65e7 Issue pip-audit \u8d85\u65f6 \u7f51\u7edc\u4e0d\u7a33\u5b9a \u6539\u4e3a\u624b\u52a8\u626b\u63cf\u5e76\u4e0a\u4f20\u62a5\u544a \u8bef\u62a5\u6f0f\u6d1e CVE \u6570\u636e\u5e93\u9519\u8bef \u5728 Issue \u4e2d\u8bf4\u660e\u5e76\u6807\u8bb0\u8bef\u62a5 \u4f9d\u8d56\u65e0\u4fee\u590d\u7248\u672c \u5382\u5546\u672a\u53d1\u5e03\u4fee\u590d \u5bfb\u627e\u66ff\u4ee3\u65b9\u6848\u6216\u4e34\u65f6\u7f13\u89e3\u63aa\u65bd"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_18","title":"\u6545\u969c\u6392\u67e5\u6b65\u9aa4","text":"<ol> <li> <p>\u68c0\u67e5 CI \u65e5\u5fd7 <pre><code># GitHub Actions \u9875\u9762\u67e5\u770b\u8be6\u7ec6\u65e5\u5fd7\n# \u5173\u6ce8\u9519\u8bef\u4fe1\u606f\u548c\u8b66\u544a\n</code></pre></p> </li> <li> <p>\u672c\u5730\u91cd\u73b0\u95ee\u9898 <pre><code># \u4f7f\u7528\u76f8\u540c\u73af\u5883\u91cd\u73b0\ndocker run -it python:3.11 bash\npip install pip-audit\n# \u590d\u5236\u4f9d\u8d56\u6587\u4ef6\u5e76\u8fd0\u884c\n</code></pre></p> </li> <li> <p>\u9a8c\u8bc1\u5de5\u5177\u7248\u672c <pre><code>pip-audit --version\n# \u786e\u4fdd\u4f7f\u7528\u6700\u65b0\u7248\u672c\npip install --upgrade pip-audit\n</code></pre></p> </li> </ol>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_19","title":"\ud83d\udee1\ufe0f \u4e0e\u5176\u4ed6\u5b89\u5168\u5de5\u5177\u96c6\u6210","text":""},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#dependabot","title":"Dependabot \u96c6\u6210","text":"<p>\u521b\u5efa <code>.github/dependabot.yml</code>:</p> <pre><code>version: 2\nupdates:\n  - package-ecosystem: \"pip\"\n    directory: \"/requirements\"\n    schedule:\n      interval: \"weekly\"\n      day: \"monday\"\n      time: \"10:00\"\n    open-pull-requests-limit: 5\n    reviewers:\n      - \"security-team\"\n    commit-message:\n      prefix: \"chore\"\n      include: \"scope\"\n    # \u81ea\u52a8\u5408\u5e76\u8865\u4e01\u7248\u672c\n    auto-merge: true\n    # \u5ffd\u7565\u67d0\u4e9b\u5305\u7684\u66f4\u65b0\n    ignore:\n      - dependency-name: \"package-with-known-issues\"\n        versions: [\"x.y.z\"]\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#codeql","title":"CodeQL \u96c6\u6210","text":"<p>\u6dfb\u52a0\u5230 <code>.github/workflows/</code>:</p> <pre><code>name: CodeQL Security Analysis\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  analyze:\n    runs-on: ubuntu-latest\n    permissions:\n      actions: read\n      contents: read\n      security-events: write\n    strategy:\n      matrix:\n        language: [python]\n    steps:\n      - uses: actions/checkout@v4\n      - uses: github/codeql-action/init@v3\n        with:\n          languages: ${{ matrix.language }}\n      - uses: github/codeql-action/autobuild@v3\n      - uses: github/codeql-action/analyze@v3\n</code></pre>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_20","title":"\ud83e\udded \u6700\u4f73\u5b9e\u8df5\u4e0e\u5efa\u8bae","text":""},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_21","title":"\u65e5\u5e38\u5b9e\u8df5","text":"<ol> <li> <p>\u5b9a\u671f\u68c0\u67e5 <pre><code># \u6bcf\u5468\u4e00\u67e5\u770b\u81ea\u52a8\u5ba1\u8ba1\u62a5\u544a\n# \u6bcf\u6708\u751f\u6210\u5b89\u5168\u6c47\u603b\n# \u6bcf\u5b63\u5ea6\u8bc4\u4f30\u6574\u4f53\u5b89\u5168\u6001\u52bf\n</code></pre></p> </li> <li> <p>\u4f9d\u8d56\u7ba1\u7406 <pre><code># \u4fdd\u6301\u6700\u5c0f\u4f9d\u8d56\u539f\u5219\n# \u5b9a\u671f\u6e05\u7406\u672a\u4f7f\u7528\u7684\u4f9d\u8d56\n# \u4f18\u5148\u4f7f\u7528\u6d3b\u8dc3\u7ef4\u62a4\u7684\u5305\n</code></pre></p> </li> <li> <p>\u7248\u672c\u63a7\u5236 <pre><code># \u59cb\u7ec8\u9501\u5b9a\u4f9d\u8d56\u7248\u672c\n# \u4f7f\u7528\u8bed\u4e49\u5316\u7248\u672c\u63a7\u5236\n# \u8bb0\u5f55\u6240\u6709\u5b89\u5168\u4fee\u590d\n</code></pre></p> </li> </ol>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_22","title":"\u56e2\u961f\u534f\u4f5c","text":"<ol> <li>\u89d2\u8272\u5206\u5de5</li> <li>\u5b89\u5168\u8d1f\u8d23\u4eba: \u76d1\u7763\u6574\u4f53\u5b89\u5168\u7b56\u7565</li> <li>\u7ef4\u62a4\u8005: \u5904\u7406\u65e5\u5e38\u6f0f\u6d1e\u4fee\u590d</li> <li>\u5f00\u53d1\u8005: \u9075\u5faa\u5b89\u5168\u5f00\u53d1\u89c4\u8303</li> <li> <p>\u6d4b\u8bd5\u8005: \u9a8c\u8bc1\u5b89\u5168\u4fee\u590d</p> </li> <li> <p>\u6c9f\u901a\u673a\u5236</p> </li> <li>\u9ad8\u5371\u6f0f\u6d1e\u7acb\u5373\u901a\u77e5\u5168\u56e2\u961f</li> <li>\u5b9a\u671f\u5b89\u5168\u4f1a\u8bae\uff08\u6708\u5ea6\uff09</li> <li> <p>\u5b89\u5168\u77e5\u8bc6\u5206\u4eab\uff08\u5b63\u5ea6\uff09</p> </li> <li> <p>\u77e5\u8bc6\u4f20\u627f</p> </li> <li>\u8bb0\u5f55\u6240\u6709\u6f0f\u6d1e\u5904\u7406\u8fc7\u7a0b</li> <li>\u5efa\u7acb\u5b89\u5168\u77e5\u8bc6\u5e93</li> <li>\u65b0\u4eba\u5b89\u5168\u57f9\u8bad</li> </ol>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_23","title":"\u6301\u7eed\u6539\u8fdb","text":"<ol> <li>\u6307\u6807\u76d1\u63a7</li> <li>\u5e73\u5747\u4fee\u590d\u65f6\u95f4 (MTTR)</li> <li>\u6f0f\u6d1e\u53d1\u73b0\u7387</li> <li> <p>\u91cd\u590d\u6f0f\u6d1e\u7387</p> </li> <li> <p>\u6d41\u7a0b\u4f18\u5316</p> </li> <li>\u7b80\u5316\u62a5\u544a\u6d41\u7a0b</li> <li>\u63d0\u9ad8\u81ea\u52a8\u5316\u7a0b\u5ea6</li> <li> <p>\u51cf\u5c11\u4eba\u5de5\u5e72\u9884</p> </li> <li> <p>\u5de5\u5177\u5347\u7ea7</p> </li> <li>\u8ddf\u8fdb pip-audit \u65b0\u529f\u80fd</li> <li>\u8bc4\u4f30\u65b0\u7684\u5b89\u5168\u5de5\u5177</li> <li>\u96c6\u6210\u66f4\u591a\u68c0\u67e5\u70b9</li> </ol>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_24","title":"\ud83c\udfc1 \u7ed3\u8bed","text":"<p>\u5b89\u5168\u5ba1\u8ba1\u4e0d\u662f\u4e00\u6b21\u6027\u5de5\u4f5c\uff0c\u800c\u662f\u6301\u7eed\u6027\u9632\u5fa1\u673a\u5236\u3002\u901a\u8fc7\u672c\u624b\u518c\u6307\u5bfc\u7684\u6d41\u7a0b\u548c\u5de5\u5177\uff0c\u56e2\u961f\u53ef\u4ee5\uff1a</p> <ul> <li>\u53ca\u65f6\u53d1\u73b0 \u4f9d\u8d56\u4e2d\u7684\u5b89\u5168\u6f0f\u6d1e</li> <li>\u5feb\u901f\u54cd\u5e94 \u9ad8\u5371\u5b89\u5168\u5a01\u80c1</li> <li>\u7cfb\u7edf\u5316\u7ba1\u7406 \u4f9d\u8d56\u5b89\u5168\u98ce\u9669</li> <li>\u6301\u7eed\u6539\u8fdb \u5b89\u5168\u9632\u62a4\u80fd\u529b</li> </ul> <p>\u672c\u4f53\u7cfb\u4e0e Dependency Guardian \u914d\u5408\u4f7f\u7528\uff0c\u53ef\u786e\u4fdd\u4f9d\u8d56\u5b89\u5168\u3001\u7248\u672c\u4e00\u81f4\u3001\u98ce\u9669\u53ef\u63a7\uff0c\u5b9e\u73b0\u4ece\"\u51b2\u7a81\u9632\u5fa1\"\u5230\"\u5b89\u5168\u9632\u5fa1\"\u7684\u5b8c\u6574\u95ed\u73af\u3002</p> <p>\u8bb0\u4f4f\uff1a\u5b89\u5168\u662f\u56e2\u961f\u5171\u540c\u7684\u8d23\u4efb\uff0c\u6bcf\u4e2a\u4eba\u90fd\u5e94\u8be5\u5728\u65e5\u5e38\u5f00\u53d1\u4e2d\u4fdd\u6301\u5b89\u5168\u610f\u8bc6\uff01</p>"},{"location":"maintenance/SECURITY_AUDIT_GUIDE/#_25","title":"\ud83d\udcde \u8054\u7cfb\u4e0e\u652f\u6301","text":"<ul> <li>\u5b89\u5168\u95ee\u9898: \u521b\u5efa Issue \u5e76\u6807\u8bb0 <code>security</code> \u6807\u7b7e</li> <li>\u7d27\u6025\u4e8b\u4ef6: \u76f4\u63a5\u8054\u7cfb Tech Lead \u6216\u5b89\u5168\u8d1f\u8d23\u4eba</li> <li>\u624b\u518c\u66f4\u65b0: \u63d0\u4ea4 PR \u6539\u8fdb\u672c\u6587\u6863</li> </ul> <p>\u672c\u6587\u6863\u6700\u540e\u66f4\u65b0\uff1a2025-01-04 \u4e0b\u6b21\u5ba1\u67e5\u65e5\u671f\uff1a2025-04-04 \u7ef4\u62a4\u8d1f\u8d23\u4eba\uff1a\u9879\u76ee\u5b89\u5168\u56e2\u961f</p>"},{"location":"ml/ML_FEATURE_GUIDE/","title":"\u673a\u5668\u5b66\u4e60\u529f\u80fd\u6307\u5357","text":""},{"location":"ml/ML_FEATURE_GUIDE/#_2","title":"\u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u63cf\u8ff0\u4e86\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u7684\u673a\u5668\u5b66\u4e60\u7ec4\u4ef6\u548c\u529f\u80fd\u3002</p>"},{"location":"ml/ML_FEATURE_GUIDE/#_3","title":"\u6a21\u578b\u67b6\u6784","text":""},{"location":"ml/ML_FEATURE_GUIDE/#_4","title":"\u9884\u6d4b\u6a21\u578b","text":"<ul> <li>XGBoost\u5206\u7c7b\u5668\uff1a\u7528\u4e8e\u6bd4\u8d5b\u7ed3\u679c\u9884\u6d4b</li> <li>\u7279\u5f81\u5de5\u7a0b\uff1a\u57fa\u4e8e\u5386\u53f2\u6570\u636e\u6784\u5efa\u7279\u5f81</li> <li>\u6a21\u578b\u8bc4\u4f30\uff1a\u4f7f\u7528\u51c6\u786e\u7387\u3001\u7cbe\u786e\u7387\u3001\u53ec\u56de\u7387\u7b49\u6307\u6807</li> </ul>"},{"location":"ml/ML_FEATURE_GUIDE/#_5","title":"\u7279\u5f81\u5b58\u50a8","text":"<ul> <li>Feast\u96c6\u6210\uff1a\u7279\u5f81\u5b58\u50a8\u548c\u7ba1\u7406</li> <li>\u5b9e\u65f6\u7279\u5f81\uff1a\u6bd4\u8d5b\u8fdb\u884c\u4e2d\u7684\u52a8\u6001\u7279\u5f81</li> <li>\u6279\u5904\u7406\u7279\u5f81\uff1a\u5386\u53f2\u7edf\u8ba1\u6570\u636e</li> </ul>"},{"location":"ml/ML_FEATURE_GUIDE/#_6","title":"\u6a21\u578b\u8bad\u7ec3\u6d41\u7a0b","text":""},{"location":"ml/ML_FEATURE_GUIDE/#1","title":"1. \u6570\u636e\u6536\u96c6","text":"<ul> <li>\u5386\u53f2\u6bd4\u8d5b\u6570\u636e</li> <li>\u7403\u961f\u7edf\u8ba1\u6570\u636e</li> <li>\u7403\u5458\u8868\u73b0\u6570\u636e</li> </ul>"},{"location":"ml/ML_FEATURE_GUIDE/#2","title":"2. \u7279\u5f81\u5de5\u7a0b","text":"<pre><code># \u7279\u5f81\u5de5\u7a0b\u793a\u4f8b\ndef create_match_features(home_team, away_team, historical_data):\n    features = {\n        'home_win_rate': calculate_win_rate(home_team),\n        'away_win_rate': calculate_win_rate(away_team),\n        'head_to_head': get_head_to_head_stats(home_team, away_team),\n        # \u66f4\u591a\u7279\u5f81...\n    }\n    return features\n</code></pre>"},{"location":"ml/ML_FEATURE_GUIDE/#3","title":"3. \u6a21\u578b\u8bad\u7ec3","text":"<ul> <li>\u4f7f\u7528MLflow\u8ddf\u8e2a\u5b9e\u9a8c</li> <li>\u4ea4\u53c9\u9a8c\u8bc1\u4f18\u5316\u53c2\u6570</li> <li>\u6a21\u578b\u7248\u672c\u7ba1\u7406</li> </ul>"},{"location":"ml/ML_FEATURE_GUIDE/#_7","title":"\u6a21\u578b\u90e8\u7f72","text":""},{"location":"ml/ML_FEATURE_GUIDE/#_8","title":"\u5b9e\u65f6\u9884\u6d4b","text":"<ul> <li>FastAPI\u7aef\u70b9\u63d0\u4f9b\u9884\u6d4b\u670d\u52a1</li> <li>\u6a21\u578b\u52a0\u8f7d\u548c\u7f13\u5b58\u673a\u5236</li> <li>\u6279\u91cf\u9884\u6d4b\u652f\u6301</li> </ul>"},{"location":"ml/ML_FEATURE_GUIDE/#_9","title":"\u6a21\u578b\u76d1\u63a7","text":"<ul> <li>\u9884\u6d4b\u51c6\u786e\u6027\u8ddf\u8e2a</li> <li>\u6a21\u578b\u6f02\u79fb\u68c0\u6d4b</li> <li>\u81ea\u52a8\u91cd\u8bad\u7ec3\u89e6\u53d1</li> </ul>"},{"location":"ml/ML_FEATURE_GUIDE/#_10","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>API\u6587\u6863</li> <li>\u6570\u636e\u5e93\u67b6\u6784</li> <li>\u76d1\u63a7\u6307\u5357</li> </ul> <p>\u6700\u540e\u66f4\u65b0\uff1a2025-10-02</p>"},{"location":"ml/ML_MODEL_GUIDE/","title":"\u673a\u5668\u5b66\u4e60\u6a21\u578b\u6307\u5357","text":""},{"location":"ml/ML_MODEL_GUIDE/#_2","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u672c\u6307\u5357\u8be6\u7ec6\u4ecb\u7ecd\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u4e2d\u673a\u5668\u5b66\u4e60\u6a21\u578b\u7684\u8bbe\u8ba1\u3001\u8bad\u7ec3\u3001\u90e8\u7f72\u548c\u7ef4\u62a4\u3002\u7cfb\u7edf\u91c7\u7528\u6a21\u5757\u5316\u67b6\u6784\uff0c\u652f\u6301\u591a\u79cd\u9884\u6d4b\u6a21\u578b\uff0c\u5e76\u63d0\u4f9b\u5b8c\u6574\u7684MLOps\u751f\u547d\u5468\u671f\u7ba1\u7406\u3002</p>"},{"location":"ml/ML_MODEL_GUIDE/#ml","title":"\ud83c\udfd7\ufe0f ML\u67b6\u6784\u6982\u89c8","text":""},{"location":"ml/ML_MODEL_GUIDE/#_3","title":"\u7cfb\u7edf\u67b6\u6784\u56fe","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        ML Pipeline                               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   \u6570\u636e\u9884\u5904\u7406      \u2502   \u6a21\u578b\u8bad\u7ec3        \u2502        \u6a21\u578b\u90e8\u7f72               \u2502\n\u2502  (Preprocessing) \u2502  (Training)     \u2502     (Deployment)            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u2022 \u7279\u5f81\u5de5\u7a0b        \u2502 \u2022 \u6a21\u578b\u9009\u62e9        \u2502 \u2022 \u6a21\u578b\u670d\u52a1\u5316                 \u2502\n\u2502 \u2022 \u6570\u636e\u6e05\u6d17        \u2502 \u2022 \u8d85\u53c2\u6570\u8c03\u4f18      \u2502 \u2022 API\u63a5\u53e3                   \u2502\n\u2502 \u2022 \u7279\u5f81\u9009\u62e9        \u2502 \u2022 \u4ea4\u53c9\u9a8c\u8bc1        \u2502 \u2022 \u6279\u91cf\u9884\u6d4b                   \u2502\n\u2502 \u2022 \u6570\u636e\u5206\u5272        \u2502 \u2022 \u6a21\u578b\u8bc4\u4f30        \u2502 \u2022 \u5b9e\u65f6\u9884\u6d4b                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      MLOps\u5c42                                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   \u6a21\u578b\u76d1\u63a7        \u2502   \u5b9e\u9a8c\u7ba1\u7406        \u2502        \u6a21\u578b\u7248\u672c               \u2502\n\u2502  (Monitoring)    \u2502 (Experiments)   \u2502    (Versioning)             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u2022 \u6027\u80fd\u76d1\u63a7        \u2502 \u2022 MLflow         \u2502 \u2022 \u6a21\u578b\u6ce8\u518c\u8868                 \u2502\n\u2502 \u2022 \u6f02\u79fb\u68c0\u6d4b        \u2502 \u2022 \u5b9e\u9a8c\u8ddf\u8e2a        \u2502 \u2022 \u7248\u672c\u63a7\u5236                   \u2502\n\u2502 \u2022 \u544a\u8b66\u901a\u77e5        \u2502 \u2022 \u53c2\u6570\u8bb0\u5f55        \u2502 \u2022 \u56de\u6eda\u673a\u5236                   \u2502\n\u2502 \u2022 \u81ea\u52a8\u91cd\u8bad\u7ec3      \u2502 \u2022 \u7ed3\u679c\u5bf9\u6bd4        \u2502 \u2022 A/B\u6d4b\u8bd5                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ml/ML_MODEL_GUIDE/#_4","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"\u7ec4\u4ef6 \u529f\u80fd \u6280\u672f\u6808 \u72b6\u6001 PredictionModel \u9884\u6d4b\u6a21\u578b\u57fa\u7c7b Python, scikit-learn \u2705 \u8fd0\u884c\u4e2d FootballPredictionModel \u8db3\u7403\u4e13\u7528\u9884\u6d4b\u6a21\u578b \u968f\u673a\u68ee\u6797, XGBoost \u2705 \u8fd0\u884c\u4e2d BaselineModelTrainer \u57fa\u51c6\u6a21\u578b\u8bad\u7ec3\u5668 MLflow, Optuna \ud83d\udea7 \u5f00\u53d1\u4e2d FeatureProcessor \u7279\u5f81\u5904\u7406\u5668 pandas, numpy \u2705 \u8fd0\u884c\u4e2d ModelMonitor \u6a21\u578b\u76d1\u63a7 Prometheus, Grafana \u2705 \u8fd0\u884c\u4e2d"},{"location":"ml/ML_MODEL_GUIDE/#_5","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":""},{"location":"ml/ML_MODEL_GUIDE/#_6","title":"\u73af\u5883\u8981\u6c42","text":"<ul> <li>Python: 3.11+</li> <li>\u673a\u5668\u5b66\u4e60\u5e93: scikit-learn, XGBoost</li> <li>\u5b9e\u9a8c\u8ddf\u8e2a: MLflow (\u53ef\u9009)</li> <li>\u6570\u636e\u5b58\u50a8: PostgreSQL, Redis</li> </ul>"},{"location":"ml/ML_MODEL_GUIDE/#5","title":"5\u5206\u949f\u5feb\u901f\u4e0a\u624b","text":"<pre><code># 1. \u5b89\u88c5ML\u4f9d\u8d56\npip install scikit-learn xgboost pandas numpy\n\n# 2. \u4f7f\u7528\u9884\u8bad\u7ec3\u6a21\u578b\u8fdb\u884c\u9884\u6d4b\npython -c \"\nfrom src.models.prediction_model import FootballPredictionModel\nmodel = FootballPredictionModel()\nresult = model.predict_match('Team A', 'Team B', {})\nprint(result)\n\"\n\n# 3. \u8bad\u7ec3\u81ea\u5b9a\u4e49\u6a21\u578b\npython -c \"\nfrom src.models.prediction_model import FootballPredictionModel\nimport pandas as pd\n\n# \u51c6\u5907\u8bad\u7ec3\u6570\u636e\nX = pd.DataFrame({'feature1': [1, 2, 3], 'feature2': [4, 5, 6]})\ny = pd.Series([0, 1, 0])\n\nmodel = FootballPredictionModel('my_model')\nmetrics = model.train(X, y)\nprint(f'\u8bad\u7ec3\u5b8c\u6210\uff0c\u51c6\u786e\u7387: {metrics[\\\"accuracy\\\"]:.3f}')\n\"\n\n# 4. \u542f\u52a8ML\u5b9e\u9a8c\u8ddf\u8e2a (\u53ef\u9009)\nmlflow server --host 0.0.0.0 --port 5000\n</code></pre>"},{"location":"ml/ML_MODEL_GUIDE/#_7","title":"\ud83e\udde0 \u6a21\u578b\u8bbe\u8ba1","text":""},{"location":"ml/ML_MODEL_GUIDE/#1","title":"1. \u9884\u6d4b\u6a21\u578b\u57fa\u7c7b","text":"<pre><code># src/models/prediction_model.py\n\nfrom abc import ABC, abstractmethod\nfrom typing import Any, Dict, List, Optional\nimport pandas as pd\nimport numpy as np\nfrom datetime import datetime\nimport logging\n\nclass PredictionModel(ABC):\n    \"\"\"\u9884\u6d4b\u6a21\u578b\u62bd\u8c61\u57fa\u7c7b\"\"\"\n\n    def __init__(\n        self,\n        model_name: str,\n        model_type: str = \"classification\",\n        **kwargs\n    ):\n        \"\"\"\n        \u521d\u59cb\u5316\u9884\u6d4b\u6a21\u578b\n\n        Args:\n            model_name: \u6a21\u578b\u540d\u79f0\n            model_type: \u6a21\u578b\u7c7b\u578b (classification/regression)\n            **kwargs: \u5176\u4ed6\u53c2\u6570\n        \"\"\"\n        self.model_name = model_name\n        self.model_type = model_type\n        self.logger = logging.getLogger(f\"ml.{self.__class__.__name__}\")\n\n        # \u6a21\u578b\u72b6\u6001\n        self.is_trained = False\n        self.model = None\n        self.feature_columns = []\n        self.target_column = \"result\"\n\n        # \u5143\u6570\u636e\n        self.metadata = {\n            \"created_at\": datetime.now().isoformat(),\n            \"version\": \"1.0.0\",\n            \"description\": f\"{model_name} prediction model\",\n            \"hyperparameters\": kwargs,\n        }\n\n    @abstractmethod\n    def train(self, X: pd.DataFrame, y: pd.Series, **kwargs) -&gt; Dict[str, Any]:\n        \"\"\"\n        \u8bad\u7ec3\u6a21\u578b\n\n        Args:\n            X: \u7279\u5f81\u6570\u636e\n            y: \u76ee\u6807\u53d8\u91cf\n            **kwargs: \u8bad\u7ec3\u53c2\u6570\n\n        Returns:\n            \u8bad\u7ec3\u7ed3\u679c\u6307\u6807\n        \"\"\"\n        pass\n\n    @abstractmethod\n    def predict(self, X: pd.DataFrame) -&gt; np.ndarray:\n        \"\"\"\n        \u8fdb\u884c\u9884\u6d4b\n\n        Args:\n            X: \u7279\u5f81\u6570\u636e\n\n        Returns:\n            \u9884\u6d4b\u7ed3\u679c\n        \"\"\"\n        pass\n\n    def predict_proba(self, X: pd.DataFrame) -&gt; np.ndarray:\n        \"\"\"\n        \u9884\u6d4b\u6982\u7387 (\u4ec5\u5206\u7c7b\u6a21\u578b)\n\n        Args:\n            X: \u7279\u5f81\u6570\u636e\n\n        Returns:\n            \u9884\u6d4b\u6982\u7387\n        \"\"\"\n        if self.model_type != \"classification\":\n            raise ValueError(\"predict_proba only available for classification models\")\n\n        if not self.is_trained:\n            raise ValueError(\"Model must be trained before prediction\")\n\n        return self.model.predict_proba(X)\n\n    def evaluate(self, X: pd.DataFrame, y: pd.Series) -&gt; Dict[str, float]:\n        \"\"\"\n        \u8bc4\u4f30\u6a21\u578b\u6027\u80fd\n\n        Args:\n            X: \u7279\u5f81\u6570\u636e\n            y: \u771f\u5b9e\u6807\u7b7e\n\n        Returns:\n            \u8bc4\u4f30\u6307\u6807\u5b57\u5178\n        \"\"\"\n        from sklearn.metrics import accuracy_score, precision_score, recall_score, f1_score, roc_auc_score\n\n        if not self.is_trained:\n            raise ValueError(\"Model must be trained before evaluation\")\n\n        # \u83b7\u53d6\u9884\u6d4b\u7ed3\u679c\n        y_pred = self.predict(X)\n\n        # \u8ba1\u7b97\u8bc4\u4f30\u6307\u6807\n        metrics = {}\n\n        if self.model_type == \"classification\":\n            metrics[\"accuracy\"] = accuracy_score(y, y_pred)\n            metrics[\"precision\"] = precision_score(y, y_pred, average=\"weighted\", zero_division=0)\n            metrics[\"recall\"] = recall_score(y, y_pred, average=\"weighted\", zero_division=0)\n            metrics[\"f1_score\"] = f1_score(y, y_pred, average=\"weighted\", zero_division=0)\n\n            # \u5982\u679c\u662f\u4e8c\u5206\u7c7b\u6216\u591a\u5206\u7c7b\uff0c\u8ba1\u7b97AUC\n            try:\n                y_proba = self.predict_proba(X)\n                if len(np.unique(y)) == 2:  # \u4e8c\u5206\u7c7b\n                    metrics[\"auc\"] = roc_auc_score(y, y_proba[:, 1])\n                else:  # \u591a\u5206\u7c7b\n                    metrics[\"auc\"] = roc_auc_score(y, y_proba, multi_class=\"ovr\", average=\"weighted\")\n            except Exception:\n                self.logger.warning(\"Could not calculate AUC score\")\n\n        return metrics\n\n    def get_feature_importance(self) -&gt; Dict[str, float]:\n        \"\"\"\n        \u83b7\u53d6\u7279\u5f81\u91cd\u8981\u6027\n\n        Returns:\n            \u7279\u5f81\u91cd\u8981\u6027\u5b57\u5178\n        \"\"\"\n        if not self.is_trained:\n            raise ValueError(\"Model must be trained before getting feature importance\")\n\n        importance = {}\n\n        if hasattr(self.model, \"feature_importances_\"):\n            # \u6811\u6a21\u578b\u7b49\u652f\u6301\u7279\u5f81\u91cd\u8981\u6027\n            for feature, importance_score in zip(self.feature_columns, self.model.feature_importances_):\n                importance[feature] = float(importance_score)\n        elif hasattr(self.model, \"coef_\"):\n            # \u7ebf\u6027\u6a21\u578b\u7b49\n            coef = self.model.coef_\n            if coef.ndim &gt; 1:\n                coef = np.abs(coef).mean(axis=0)\n\n            for feature, coef_score in zip(self.feature_columns, coef):\n                importance[feature] = float(coef_score)\n        else:\n            # \u4f7f\u7528SHAP\u503c\u6216\u5176\u4ed6\u65b9\u6cd5 (\u7b80\u5316\u5b9e\u73b0)\n            for feature in self.feature_columns:\n                importance[feature] = 1.0 / len(self.feature_columns)\n\n        return importance\n\n    def save_model(self, file_path: str) -&gt; bool:\n        \"\"\"\n        \u4fdd\u5b58\u6a21\u578b\u5230\u6587\u4ef6\n\n        Args:\n            file_path: \u4fdd\u5b58\u8def\u5f84\n\n        Returns:\n            \u662f\u5426\u4fdd\u5b58\u6210\u529f\n        \"\"\"\n        try:\n            import joblib\n\n            model_data = {\n                \"model\": self.model,\n                \"model_name\": self.model_name,\n                \"model_type\": self.model_type,\n                \"is_trained\": self.is_trained,\n                \"feature_columns\": self.feature_columns,\n                \"target_column\": self.target_column,\n                \"metadata\": self.metadata,\n            }\n\n            joblib.dump(model_data, file_path)\n            self.logger.info(f\"Model saved to: {file_path}\")\n            return True\n\n        except Exception as e:\n            self.logger.error(f\"Failed to save model: {e}\")\n            return False\n\n    def load_model(self, file_path: str) -&gt; bool:\n        \"\"\"\n        \u4ece\u6587\u4ef6\u52a0\u8f7d\u6a21\u578b\n\n        Args:\n            file_path: \u6a21\u578b\u6587\u4ef6\u8def\u5f84\n\n        Returns:\n            \u662f\u5426\u52a0\u8f7d\u6210\u529f\n        \"\"\"\n        try:\n            import joblib\n\n            model_data = joblib.load(file_path)\n\n            self.model = model_data[\"model\"]\n            self.model_name = model_data[\"model_name\"]\n            self.model_type = model_data[\"model_type\"]\n            self.is_trained = model_data[\"is_trained\"]\n            self.feature_columns = model_data[\"feature_columns\"]\n            self.target_column = model_data[\"target_column\"]\n            self.metadata = model_data[\"metadata\"]\n\n            self.logger.info(f\"Model loaded from: {file_path}\")\n            return True\n\n        except Exception as e:\n            self.logger.error(f\"Failed to load model: {e}\")\n            return False\n</code></pre>"},{"location":"ml/ML_MODEL_GUIDE/#2","title":"2. \u8db3\u7403\u9884\u6d4b\u6a21\u578b\u5b9e\u73b0","text":"<pre><code># src/models/football_prediction_model.py\n\nimport pandas as pd\nimport numpy as np\nfrom typing import Any, Dict, List, Optional\nfrom datetime import datetime\nfrom enum import Enum\nimport logging\n\nfrom .prediction_model import PredictionModel\n\nclass PredictionType(Enum):\n    \"\"\"\u9884\u6d4b\u7c7b\u578b\u679a\u4e3e\"\"\"\n    MATCH_RESULT = \"match_result\"           # \u6bd4\u8d5b\u7ed3\u679c\n    OVER_UNDER = \"over_under\"              # \u5927\u5c0f\u7403\n    CORRECT_SCORE = \"correct_score\"        # \u6b63\u786e\u6bd4\u5206\n    BOTH_TEAMS_SCORE = \"both_teams_score\"  # \u53cc\u65b9\u90fd\u8fdb\u7403\n\nclass FootballPredictionModel(PredictionModel):\n    \"\"\"\u8db3\u7403\u6bd4\u8d5b\u9884\u6d4b\u6a21\u578b\"\"\"\n\n    def __init__(\n        self,\n        model_name: str = \"football_predictor\",\n        prediction_type: PredictionType = PredictionType.MATCH_RESULT,\n        **kwargs\n    ):\n        \"\"\"\n        \u521d\u59cb\u5316\u8db3\u7403\u9884\u6d4b\u6a21\u578b\n\n        Args:\n            model_name: \u6a21\u578b\u540d\u79f0\n            prediction_type: \u9884\u6d4b\u7c7b\u578b\n            **kwargs: \u5176\u4ed6\u53c2\u6570\n        \"\"\"\n        super().__init__(model_name, \"classification\", **kwargs)\n        self.prediction_type = prediction_type\n\n        # \u6839\u636e\u9884\u6d4b\u7c7b\u578b\u8bbe\u7f6e\u76ee\u6807\u7c7b\u522b\n        self._setup_target_classes()\n\n        # \u6a21\u578b\u8d85\u53c2\u6570\n        self.hyperparameters = {\n            \"n_estimators\": kwargs.get(\"n_estimators\", 100),\n            \"max_depth\": kwargs.get(\"max_depth\", 10),\n            \"min_samples_split\": kwargs.get(\"min_samples_split\", 5),\n            \"min_samples_leaf\": kwargs.get(\"min_samples_leaf\", 2),\n            \"random_state\": kwargs.get(\"random_state\", 42),\n        }\n\n    def _setup_target_classes(self):\n        \"\"\"\u8bbe\u7f6e\u76ee\u6807\u7c7b\u522b\"\"\"\n        if self.prediction_type == PredictionType.MATCH_RESULT:\n            self.target_classes = [\"home_win\", \"draw\", \"away_win\"]\n        elif self.prediction_type == PredictionType.OVER_UNDER:\n            self.target_classes = [\"under\", \"over\"]\n        elif self.prediction_type == PredictionType.BOTH_TEAMS_SCORE:\n            self.target_classes = [\"no\", \"yes\"]\n        elif self.prediction_type == PredictionType.CORRECT_SCORE:\n            # \u5e38\u89c1\u6bd4\u5206\n            self.target_classes = [\n                \"1-0\", \"2-0\", \"2-1\", \"1-1\", \"0-0\",\n                \"0-1\", \"0-2\", \"1-2\", \"3-0\", \"0-3\"\n            ]\n        else:\n            raise ValueError(f\"Unsupported prediction type: {self.prediction_type}\")\n\n    def train(self, X: pd.DataFrame, y: pd.Series, **kwargs) -&gt; Dict[str, Any]:\n        \"\"\"\n        \u8bad\u7ec3\u8db3\u7403\u9884\u6d4b\u6a21\u578b\n\n        Args:\n            X: \u7279\u5f81\u6570\u636e\n            y: \u76ee\u6807\u53d8\u91cf\n            **kwargs: \u8bad\u7ec3\u53c2\u6570\n\n        Returns:\n            \u8bad\u7ec3\u7ed3\u679c\u6307\u6807\n        \"\"\"\n        from sklearn.ensemble import RandomForestClassifier\n        from sklearn.model_selection import cross_val_score\n        from sklearn.preprocessing import LabelEncoder\n\n        self.logger.info(f\"Training {self.prediction_type.value} model with {len(X)} samples\")\n\n        # \u7279\u5f81\u5904\u7406\n        self.feature_columns = list(X.columns)\n\n        # \u6807\u7b7e\u7f16\u7801\n        label_encoder = LabelEncoder()\n        y_encoded = label_encoder.fit_transform(y)\n\n        # \u4fdd\u5b58\u6807\u7b7e\u7f16\u7801\u5668\n        self.label_encoder = label_encoder\n        self.label_mapping = dict(zip(label_encoder.classes_, label_encoder.transform(label_encoder.classes_)))\n        self.reverse_label_mapping = dict(zip(label_encoder.transform(label_encoder.classes_), label_encoder.classes_))\n\n        # \u521b\u5efa\u5e76\u8bad\u7ec3\u6a21\u578b\n        self.model = RandomForestClassifier(**self.hyperparameters)\n\n        # \u4ea4\u53c9\u9a8c\u8bc1\u8bc4\u4f30\n        cv_scores = cross_val_score(self.model, X, y_encoded, cv=5, scoring='accuracy')\n\n        # \u8bad\u7ec3\u6700\u7ec8\u6a21\u578b\n        self.model.fit(X, y_encoded)\n        self.is_trained = True\n\n        # \u8ba1\u7b97\u8bad\u7ec3\u6307\u6807\n        train_metrics = self.evaluate(X, y)\n\n        # \u6dfb\u52a0\u4ea4\u53c9\u9a8c\u8bc1\u7ed3\u679c\n        train_metrics[\"cv_mean_accuracy\"] = float(cv_scores.mean())\n        train_metrics[\"cv_std_accuracy\"] = float(cv_scores.std())\n\n        # \u66f4\u65b0\u5143\u6570\u636e\n        self.metadata.update({\n            \"last_trained\": datetime.now().isoformat(),\n            \"training_samples\": len(X),\n            \"feature_count\": len(self.feature_columns),\n            \"prediction_type\": self.prediction_type.value,\n            \"label_mapping\": self.label_mapping,\n            \"metrics\": train_metrics,\n        })\n\n        self.logger.info(\n            f\"Model trained successfully. \"\n            f\"Accuracy: {train_metrics['accuracy']:.3f}, \"\n            f\"CV Accuracy: {train_metrics['cv_mean_accuracy']:.3f} \u00b1 {train_metrics['cv_std_accuracy']:.3f}\"\n        )\n\n        return train_metrics\n\n    def predict(self, X: pd.DataFrame) -&gt; np.ndarray:\n        \"\"\"\n        \u9884\u6d4b\u6bd4\u8d5b\u7ed3\u679c\n\n        Args:\n            X: \u7279\u5f81\u6570\u636e\n\n        Returns:\n            \u9884\u6d4b\u7ed3\u679c\n        \"\"\"\n        if not self.is_trained:\n            raise ValueError(\"Model must be trained before prediction\")\n\n        predictions_encoded = self.model.predict(X)\n\n        # \u8f6c\u6362\u56de\u539f\u59cb\u6807\u7b7e\n        predictions = [self.reverse_label_mapping[pred] for pred in predictions_encoded]\n\n        return np.array(predictions)\n\n    def predict_match(\n        self,\n        home_team: str,\n        away_team: str,\n        features: Dict[str, Any],\n        return_probabilities: bool = True\n    ) -&gt; Dict[str, Any]:\n        \"\"\"\n        \u9884\u6d4b\u5355\u573a\u6bd4\u8d5b\u7ed3\u679c\n\n        Args:\n            home_team: \u4e3b\u961f\u540d\u79f0\n            away_team: \u5ba2\u961f\u540d\u79f0\n            features: \u7279\u5f81\u5b57\u5178\n            return_probabilities: \u662f\u5426\u8fd4\u56de\u6982\u7387\n\n        Returns:\n            \u9884\u6d4b\u7ed3\u679c\u5b57\u5178\n        \"\"\"\n        if not self.is_trained:\n            raise ValueError(\"Model must be trained before prediction\")\n\n        # \u8f6c\u6362\u7279\u5f81\u4e3aDataFrame\n        feature_df = pd.DataFrame([features])\n\n        # \u786e\u4fdd\u7279\u5f81\u5217\u987a\u5e8f\u6b63\u786e\n        feature_df = feature_df[self.feature_columns]\n\n        # \u9884\u6d4b\n        prediction_encoded = self.model.predict(feature_df)[0]\n        prediction = self.reverse_label_mapping[prediction_encoded]\n\n        result = {\n            \"home_team\": home_team,\n            \"away_team\": away_team,\n            \"prediction\": prediction,\n            \"prediction_type\": self.prediction_type.value,\n            \"features_used\": list(features.keys()),\n            \"model_name\": self.model_name,\n            \"prediction_time\": datetime.now().isoformat(),\n        }\n\n        # \u6dfb\u52a0\u6982\u7387\u4fe1\u606f\n        if return_probabilities:\n            probabilities = self.model.predict_proba(feature_df)[0]\n\n            # \u6784\u5efa\u6982\u7387\u5b57\u5178\n            prob_dict = {}\n            for i, class_name in enumerate(self.label_encoder.classes_):\n                prob_dict[class_name] = float(probabilities[i])\n\n            result[\"probabilities\"] = prob_dict\n            result[\"confidence\"] = float(np.max(probabilities))\n\n        return result\n\n    def batch_predict(self, matches: List[Dict[str, Any]]) -&gt; List[Dict[str, Any]]:\n        \"\"\"\n        \u6279\u91cf\u9884\u6d4b\u6bd4\u8d5b\u7ed3\u679c\n\n        Args:\n            matches: \u6bd4\u8d5b\u5217\u8868\uff0c\u6bcf\u4e2a\u5143\u7d20\u5305\u542b home_team, away_team, features\n\n        Returns:\n            \u9884\u6d4b\u7ed3\u679c\u5217\u8868\n        \"\"\"\n        results = []\n\n        for match in matches:\n            try:\n                result = self.predict_match(\n                    home_team=match.get(\"home_team\", \"\"),\n                    away_team=match.get(\"away_team\", \"\"),\n                    features=match.get(\"features\", {}),\n                    return_probabilities=True\n                )\n                results.append(result)\n            except Exception as e:\n                self.logger.error(f\"Failed to predict match: {e}\")\n                # \u6dfb\u52a0\u9519\u8bef\u7ed3\u679c\n                error_result = {\n                    \"home_team\": match.get(\"home_team\", \"\"),\n                    \"away_team\": match.get(\"away_team\", \"\"),\n                    \"error\": str(e),\n                    \"prediction\": None,\n                }\n                results.append(error_result)\n\n        return results\n\n    def explain_prediction(\n        self,\n        home_team: str,\n        away_team: str,\n        features: Dict[str, Any],\n        top_features: int = 5\n    ) -&gt; Dict[str, Any]:\n        \"\"\"\n        \u89e3\u91ca\u9884\u6d4b\u7ed3\u679c\n\n        Args:\n            home_team: \u4e3b\u961f\u540d\u79f0\n            away_team: \u5ba2\u961f\u540d\u79f0\n            features: \u7279\u5f81\u5b57\u5178\n            top_features: \u8fd4\u56de\u6700\u91cd\u8981\u7684\u7279\u5f81\u6570\u91cf\n\n        Returns:\n            \u89e3\u91ca\u7ed3\u679c\n        \"\"\"\n        # \u83b7\u53d6\u9884\u6d4b\u7ed3\u679c\n        prediction_result = self.predict_match(home_team, away_team, features)\n\n        # \u83b7\u53d6\u7279\u5f81\u91cd\u8981\u6027\n        feature_importance = self.get_feature_importance()\n\n        # \u83b7\u53d6\u5f53\u524d\u7279\u5f81\u7684\u91cd\u8981\u6027\n        current_features_importance = {}\n        for feature, value in features.items():\n            if feature in feature_importance:\n                current_features_importance[feature] = {\n                    \"value\": value,\n                    \"importance\": feature_importance[feature],\n                }\n\n        # \u6392\u5e8f\u5e76\u53d6\u524dN\u4e2a\u6700\u91cd\u8981\u7684\u7279\u5f81\n        sorted_features = sorted(\n            current_features_importance.items(),\n            key=lambda x: x[1][\"importance\"],\n            reverse=True\n        )[:top_features]\n\n        explanation = {\n            \"match\": f\"{home_team} vs {away_team}\",\n            \"prediction\": prediction_result[\"prediction\"],\n            \"confidence\": prediction_result.get(\"confidence\", 0),\n            \"top_features\": [\n                {\n                    \"name\": feature,\n                    \"value\": info[\"value\"],\n                    \"importance\": info[\"importance\"],\n                    \"impact\": self._calculate_feature_impact(feature, info[\"value\"])\n                }\n                for feature, info in sorted_features\n            ],\n            \"model_info\": {\n                \"model_name\": self.model_name,\n                \"prediction_type\": self.prediction_type.value,\n                \"feature_count\": len(self.feature_columns),\n            }\n        }\n\n        return explanation\n\n    def _calculate_feature_impact(self, feature: str, value: Any) -&gt; str:\n        \"\"\"\u8ba1\u7b97\u7279\u5f81\u5bf9\u9884\u6d4b\u7684\u5f71\u54cd\"\"\"\n        if value &gt; 0:\n            return f\"\u6b63\u5411\u5f71\u54cd (+{value:.2f})\"\n        elif value &lt; 0:\n            return f\"\u8d1f\u5411\u5f71\u54cd ({value:.2f})\"\n        else:\n            return \"\u4e2d\u6027\u5f71\u54cd (0.00)\"\n</code></pre>"},{"location":"ml/ML_MODEL_GUIDE/#_8","title":"\ud83d\udd27 \u6a21\u578b\u8bad\u7ec3","text":""},{"location":"ml/ML_MODEL_GUIDE/#1_1","title":"1. \u8bad\u7ec3\u6570\u636e\u51c6\u5907","text":"<pre><code># src/ml/data_preparation.py\n\nimport pandas as pd\nimport numpy as np\nfrom typing import Dict, List, Tuple, Optional\nfrom sklearn.preprocessing import StandardScaler, LabelEncoder\nfrom sklearn.model_selection import train_test_split\nimport logging\n\nclass FootballDataPreparer:\n    \"\"\"\u8db3\u7403\u6570\u636e\u9884\u5904\u7406\u5668\"\"\"\n\n    def __init__(self):\n        self.scaler = StandardScaler()\n        self.label_encoders = {}\n        self.feature_columns = []\n        self.logger = logging.getLogger(__name__)\n\n    def prepare_match_data(\n        self,\n        matches_df: pd.DataFrame,\n        target_column: str = \"result\",\n        test_size: float = 0.2,\n        random_state: int = 42\n    ) -&gt; Tuple[pd.DataFrame, pd.Series, pd.DataFrame, pd.Series]:\n        \"\"\"\n        \u51c6\u5907\u6bd4\u8d5b\u6570\u636e\u7528\u4e8e\u8bad\u7ec3\n\n        Args:\n            matches_df: \u6bd4\u8d5b\u6570\u636eDataFrame\n            target_column: \u76ee\u6807\u5217\u540d\n            test_size: \u6d4b\u8bd5\u96c6\u6bd4\u4f8b\n            random_state: \u968f\u673a\u79cd\u5b50\n\n        Returns:\n            (X_train, y_train, X_test, y_test)\n        \"\"\"\n        self.logger.info(f\"Preparing data with {len(matches_df)} matches\")\n\n        # \u6570\u636e\u6e05\u6d17\n        cleaned_df = self._clean_data(matches_df)\n\n        # \u7279\u5f81\u5de5\u7a0b\n        features_df = self._engineer_features(cleaned_df)\n\n        # \u51c6\u5907\u7279\u5f81\u548c\u76ee\u6807\n        X = features_df.drop(columns=[target_column])\n        y = features_df[target_column]\n\n        # \u7f16\u7801\u5206\u7c7b\u53d8\u91cf\n        X_encoded = self._encode_categorical_features(X)\n\n        # \u7279\u5f81\u6807\u51c6\u5316\n        X_scaled = self._scale_features(X_encoded)\n\n        # \u5206\u5272\u6570\u636e\n        X_train, X_test, y_train, y_test = train_test_split(\n            X_scaled, y, test_size=test_size, random_state=random_state, stratify=y\n        )\n\n        self.feature_columns = list(X_train.columns)\n        self.logger.info(f\"Data prepared: {len(X_train)} training, {len(X_test)} testing samples\")\n\n        return X_train, y_train, X_test, y_test\n\n    def _clean_data(self, df: pd.DataFrame) -&gt; pd.DataFrame:\n        \"\"\"\u6570\u636e\u6e05\u6d17\"\"\"\n        # \u79fb\u9664\u7f3a\u5931\u503c\u8fc7\u591a\u7684\u884c\n        df_clean = df.dropna(thresh=len(df.columns) * 0.7)\n\n        # \u586b\u5145\u7f3a\u5931\u503c\n        numeric_columns = df_clean.select_dtypes(include=[np.number]).columns\n        df_clean[numeric_columns] = df_clean[numeric_columns].fillna(df_clean[numeric_columns].median())\n\n        categorical_columns = df_clean.select_dtypes(include=['object']).columns\n        for col in categorical_columns:\n            df_clean[col] = df_clean[col].fillna('unknown')\n\n        return df_clean\n\n    def _engineer_features(self, df: pd.DataFrame) -&gt; pd.DataFrame:\n        \"\"\"\u7279\u5f81\u5de5\u7a0b\"\"\"\n        df_features = df.copy()\n\n        # \u4e3b\u573a\u4f18\u52bf\u7279\u5f81\n        if 'home_team' in df_features.columns and 'away_team' in df_features.columns:\n            df_features['is_home_favorite'] = (\n                df_features['home_team_rating'] &gt; df_features['away_team_rating']\n            ).astype(int)\n\n        # \u6700\u8fd1\u8868\u73b0\u7279\u5f81\n        if 'home_team_recent_form' in df_features.columns:\n            df_features['home_team_form_trend'] = (\n                df_features['home_team_recent_form'].rolling(window=3).mean()\n            )\n\n        # \u5386\u53f2\u4ea4\u950b\u7279\u5f81\n        if 'head_to_head_wins' in df_features.columns:\n            df_features['head_to_head_win_rate'] = (\n                df_features['head_to_head_wins'] / df_features['head_to_head_matches']\n            )\n\n        return df_features\n\n    def _encode_categorical_features(self, X: pd.DataFrame) -&gt; pd.DataFrame:\n        \"\"\"\u7f16\u7801\u5206\u7c7b\u7279\u5f81\"\"\"\n        X_encoded = X.copy()\n\n        categorical_columns = X_encoded.select_dtypes(include=['object']).columns\n\n        for col in categorical_columns:\n            if col not in self.label_encoders:\n                self.label_encoders[col] = LabelEncoder()\n                X_encoded[col] = self.label_encoders[col].fit_transform(X_encoded[col])\n            else:\n                # \u5904\u7406\u672a\u89c1\u8fc7\u7684\u7c7b\u522b\n                known_classes = set(self.label_encoders[col].classes_)\n                X_encoded[col] = X_encoded[col].apply(\n                    lambda x: x if x in known_classes else 'unknown'\n                )\n\n                # \u5982\u679c\u6709\u65b0\u7c7b\u522b\uff0c\u91cd\u65b0\u62df\u5408\u7f16\u7801\u5668\n                if not set(X_encoded[col]).issubset(known_classes):\n                    self.label_encoders[col].classes_ = np.append(\n                        self.label_encoders[col].classes_, 'unknown'\n                    )\n\n                X_encoded[col] = self.label_encoders[col].transform(X_encoded[col])\n\n        return X_encoded\n\n    def _scale_features(self, X: pd.DataFrame) -&gt; pd.DataFrame:\n        \"\"\"\u7279\u5f81\u6807\u51c6\u5316\"\"\"\n        X_scaled = X.copy()\n        numeric_columns = X_scaled.select_dtypes(include=[np.number]).columns\n\n        if len(self.feature_columns) == 0:  # \u9996\u6b21\u62df\u5408\n            X_scaled[numeric_columns] = self.scaler.fit_transform(X_scaled[numeric_columns])\n        else:\n            X_scaled[numeric_columns] = self.scaler.transform(X_scaled[numeric_columns])\n\n        return X_scaled\n\n    def prepare_prediction_features(self, match_data: Dict[str, Any]) -&gt; pd.DataFrame:\n        \"\"\"\n        \u4e3a\u5355\u573a\u6bd4\u8d5b\u9884\u6d4b\u51c6\u5907\u7279\u5f81\n\n        Args:\n            match_data: \u6bd4\u8d5b\u6570\u636e\u5b57\u5178\n\n        Returns:\n            \u9884\u5904\u7406\u540e\u7684\u7279\u5f81DataFrame\n        \"\"\"\n        df = pd.DataFrame([match_data])\n        df_features = self._engineer_features(df)\n        df_encoded = self._encode_categorical_features(df_features)\n        df_scaled = self._scale_features(df_encoded)\n\n        # \u786e\u4fdd\u7279\u5f81\u987a\u5e8f\u4e00\u81f4\n        if self.feature_columns:\n            for col in self.feature_columns:\n                if col not in df_scaled.columns:\n                    df_scaled[col] = 0\n\n            df_scaled = df_scaled[self.feature_columns]\n\n        return df_scaled\n</code></pre>"},{"location":"ml/ML_MODEL_GUIDE/#2_1","title":"2. \u6a21\u578b\u8bad\u7ec3\u5668","text":"<pre><code># src/ml/model_trainer.py\n\nimport pandas as pd\nimport numpy as np\nfrom typing import Dict, Any, List, Optional\nfrom datetime import datetime\nimport logging\nimport json\nimport os\n\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.model_selection import GridSearchCV, cross_val_score\nfrom sklearn.metrics import classification_report, confusion_matrix\nimport mlflow\nimport mlflow.sklearn\n\nfrom ..models.football_prediction_model import FootballPredictionModel, PredictionType\nfrom .data_preparation import FootballDataPreparer\n\nclass FootballModelTrainer:\n    \"\"\"\u8db3\u7403\u6a21\u578b\u8bad\u7ec3\u5668\"\"\"\n\n    def __init__(self, config: Optional[Dict[str, Any]] = None):\n        \"\"\"\n        \u521d\u59cb\u5316\u8bad\u7ec3\u5668\n\n        Args:\n            config: \u8bad\u7ec3\u914d\u7f6e\n        \"\"\"\n        self.config = config or {}\n        self.logger = logging.getLogger(__name__)\n        self.data_preparer = FootballDataPreparer()\n\n        # MLflow\u914d\u7f6e\n        self.mlflow_enabled = self.config.get(\"mlflow_enabled\", False)\n        if self.mlflow_enabled:\n            mlflow.set_tracking_uri(self.config.get(\"mlflow_tracking_uri\", \"http://localhost:5000\"))\n            mlflow.set_experiment(self.config.get(\"mlflow_experiment\", \"football-prediction\"))\n\n    def train_match_result_model(\n        self,\n        matches_df: pd.DataFrame,\n        target_column: str = \"result\",\n        hyperparameter_tuning: bool = True\n    ) -&gt; FootballPredictionModel:\n        \"\"\"\n        \u8bad\u7ec3\u6bd4\u8d5b\u7ed3\u679c\u9884\u6d4b\u6a21\u578b\n\n        Args:\n            matches_df: \u6bd4\u8d5b\u6570\u636e\n            target_column: \u76ee\u6807\u5217\u540d\n            hyperparameter_tuning: \u662f\u5426\u8fdb\u884c\u8d85\u53c2\u6570\u8c03\u4f18\n\n        Returns:\n            \u8bad\u7ec3\u597d\u7684\u6a21\u578b\n        \"\"\"\n        self.logger.info(\"Starting match result model training\")\n\n        # \u51c6\u5907\u6570\u636e\n        X_train, y_train, X_test, y_test = self.data_preparer.prepare_match_data(\n            matches_df, target_column\n        )\n\n        # \u521b\u5efa\u6a21\u578b\n        model = FootballPredictionModel(\n            model_name=\"match_result_predictor\",\n            prediction_type=PredictionType.MATCH_RESULT\n        )\n\n        if self.mlflow_enabled:\n            with mlflow.start_run(run_name=f\"match_result_{datetime.now().strftime('%Y%m%d_%H%M%S')}\"):\n                return self._train_with_mlflow(model, X_train, y_train, X_test, y_test, hyperparameter_tuning)\n        else:\n            return self._train_model(model, X_train, y_train, X_test, y_test, hyperparameter_tuning)\n\n    def _train_model(\n        self,\n        model: FootballPredictionModel,\n        X_train: pd.DataFrame,\n        y_train: pd.Series,\n        X_test: pd.DataFrame,\n        y_test: pd.Series,\n        hyperparameter_tuning: bool\n    ) -&gt; FootballPredictionModel:\n        \"\"\"\u8bad\u7ec3\u6a21\u578b\"\"\"\n\n        if hyperparameter_tuning:\n            # \u8d85\u53c2\u6570\u8c03\u4f18\n            best_params = self._hyperparameter_tuning(X_train, y_train)\n            model.hyperparameters.update(best_params)\n\n        # \u8bad\u7ec3\u6a21\u578b\n        train_metrics = model.train(X_train, y_train)\n\n        # \u8bc4\u4f30\u6a21\u578b\n        test_metrics = model.evaluate(X_test, y_test)\n\n        # \u8bb0\u5f55\u7ed3\u679c\n        self.logger.info(f\"Training completed. Test accuracy: {test_metrics['accuracy']:.3f}\")\n\n        # \u751f\u6210\u8be6\u7ec6\u62a5\u544a\n        self._generate_training_report(model, train_metrics, test_metrics, X_test, y_test)\n\n        return model\n\n    def _train_with_mlflow(\n        self,\n        model: FootballPredictionModel,\n        X_train: pd.DataFrame,\n        y_train: pd.Series,\n        X_test: pd.DataFrame,\n        y_test: pd.Series,\n        hyperparameter_tuning: bool\n    ) -&gt; FootballPredictionModel:\n        \"\"\"\u4f7f\u7528MLflow\u8bad\u7ec3\u6a21\u578b\"\"\"\n\n        if hyperparameter_tuning:\n            best_params = self._hyperparameter_tuning(X_train, y_train)\n            model.hyperparameters.update(best_params)\n            mlflow.log_params(best_params)\n\n        # \u8bb0\u5f55\u53c2\u6570\n        mlflow.log_params({\n            \"model_type\": model.model_type,\n            \"prediction_type\": model.prediction_type.value,\n            \"training_samples\": len(X_train),\n            \"test_samples\": len(X_test),\n            \"feature_count\": len(X_train.columns),\n        })\n\n        # \u8bad\u7ec3\u6a21\u578b\n        train_metrics = model.train(X_train, y_train)\n\n        # \u8bc4\u4f30\u6a21\u578b\n        test_metrics = model.evaluate(X_test, y_test)\n\n        # \u8bb0\u5f55\u6307\u6807\n        for metric_name, metric_value in train_metrics.items():\n            if isinstance(metric_value, (int, float)):\n                mlflow.log_metric(f\"train_{metric_name}\", metric_value)\n\n        for metric_name, metric_value in test_metrics.items():\n            if isinstance(metric_value, (int, float)):\n                mlflow.log_metric(f\"test_{metric_name}\", metric_value)\n\n        # \u8bb0\u5f55\u6a21\u578b\n        mlflow.sklearn.log_model(model.model, \"model\")\n\n        # \u8bb0\u5f55\u7279\u5f81\u91cd\u8981\u6027\n        feature_importance = model.get_feature_importance()\n        mlflow.log_dict(feature_importance, \"feature_importance.json\")\n\n        self.logger.info(f\"Training completed with MLflow. Test accuracy: {test_metrics['accuracy']:.3f}\")\n\n        return model\n\n    def _hyperparameter_tuning(\n        self,\n        X: pd.DataFrame,\n        y: pd.Series\n    ) -&gt; Dict[str, Any]:\n        \"\"\"\u8d85\u53c2\u6570\u8c03\u4f18\"\"\"\n\n        param_grid = {\n            'n_estimators': [50, 100, 200],\n            'max_depth': [5, 10, 15, None],\n            'min_samples_split': [2, 5, 10],\n            'min_samples_leaf': [1, 2, 4],\n            'max_features': ['sqrt', 'log2', None]\n        }\n\n        rf = RandomForestClassifier(random_state=42)\n        grid_search = GridSearchCV(\n            rf, param_grid, cv=5, scoring='accuracy', n_jobs=-1, verbose=1\n        )\n\n        grid_search.fit(X, y)\n\n        self.logger.info(f\"Best parameters: {grid_search.best_params_}\")\n        self.logger.info(f\"Best CV score: {grid_search.best_score_:.3f}\")\n\n        return grid_search.best_params_\n\n    def _generate_training_report(\n        self,\n        model: FootballPredictionModel,\n        train_metrics: Dict[str, float],\n        test_metrics: Dict[str, float],\n        X_test: pd.DataFrame,\n        y_test: pd.Series\n    ) -&gt; None:\n        \"\"\"\u751f\u6210\u8bad\u7ec3\u62a5\u544a\"\"\"\n\n        # \u9884\u6d4b\u6d4b\u8bd5\u96c6\n        y_pred = model.predict(X_test)\n\n        # \u751f\u6210\u5206\u7c7b\u62a5\u544a\n        class_report = classification_report(y_test, y_pred, output_dict=True)\n\n        # \u751f\u6210\u6df7\u6dc6\u77e9\u9635\n        conf_matrix = confusion_matrix(y_test, y_pred)\n\n        # \u83b7\u53d6\u7279\u5f81\u91cd\u8981\u6027\n        feature_importance = model.get_feature_importance()\n\n        # \u521b\u5efa\u62a5\u544a\n        report = {\n            \"model_info\": {\n                \"model_name\": model.model_name,\n                \"prediction_type\": model.prediction_type.value,\n                \"training_time\": model.metadata.get(\"last_trained\"),\n                \"model_version\": model.metadata.get(\"version\"),\n            },\n            \"data_info\": {\n                \"training_samples\": len(X_test) * 4 // 3,  # \u4f30\u7b97\u8bad\u7ec3\u96c6\u5927\u5c0f\n                \"test_samples\": len(X_test),\n                \"feature_count\": len(model.feature_columns),\n                \"target_classes\": list(model.label_mapping.keys()) if hasattr(model, 'label_mapping') else [],\n            },\n            \"performance\": {\n                \"train_metrics\": train_metrics,\n                \"test_metrics\": test_metrics,\n            },\n            \"classification_report\": class_report,\n            \"confusion_matrix\": conf_matrix.tolist(),\n            \"feature_importance\": dict(\n                sorted(feature_importance.items(), key=lambda x: x[1], reverse=True)[:10]\n            ),\n        }\n\n        # \u4fdd\u5b58\u62a5\u544a\n        reports_dir = self.config.get(\"reports_dir\", \"ml_reports\")\n        os.makedirs(reports_dir, exist_ok=True)\n\n        report_path = os.path.join(\n            reports_dir,\n            f\"training_report_{model.model_name}_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json\"\n        )\n\n        with open(report_path, 'w') as f:\n            json.dump(report, f, indent=2, ensure_ascii=False)\n\n        self.logger.info(f\"Training report saved to: {report_path}\")\n</code></pre>"},{"location":"ml/ML_MODEL_GUIDE/#_9","title":"\ud83d\udcca \u6a21\u578b\u8bc4\u4f30","text":""},{"location":"ml/ML_MODEL_GUIDE/#1_2","title":"1. \u8bc4\u4f30\u6307\u6807","text":"<pre><code># src/ml/model_evaluation.py\n\nimport pandas as pd\nimport numpy as np\nfrom typing import Dict, Any, List, Tuple\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.metrics import (\n    accuracy_score, precision_score, recall_score, f1_score,\n    roc_auc_score, confusion_matrix, classification_report,\n    precision_recall_curve, roc_curve\n)\nimport logging\n\nclass ModelEvaluator:\n    \"\"\"\u6a21\u578b\u8bc4\u4f30\u5668\"\"\"\n\n    def __init__(self):\n        self.logger = logging.getLogger(__name__)\n\n    def comprehensive_evaluation(\n        self,\n        model,\n        X_test: pd.DataFrame,\n        y_test: pd.Series,\n        target_classes: List[str] = None\n    ) -&gt; Dict[str, Any]:\n        \"\"\"\n        \u7efc\u5408\u6a21\u578b\u8bc4\u4f30\n\n        Args:\n            model: \u8bad\u7ec3\u597d\u7684\u6a21\u578b\n            X_test: \u6d4b\u8bd5\u7279\u5f81\n            y_test: \u6d4b\u8bd5\u6807\u7b7e\n            target_classes: \u76ee\u6807\u7c7b\u522b\u5217\u8868\n\n        Returns:\n            \u8bc4\u4f30\u7ed3\u679c\u5b57\u5178\n        \"\"\"\n        self.logger.info(f\"Evaluating model with {len(X_test)} test samples\")\n\n        # \u83b7\u53d6\u9884\u6d4b\u7ed3\u679c\n        y_pred = model.predict(X_test)\n        y_proba = None\n\n        try:\n            y_proba = model.predict_proba(X_test)\n        except Exception:\n            self.logger.warning(\"Model does not support probability prediction\")\n\n        # \u57fa\u7840\u6307\u6807\n        basic_metrics = self._calculate_basic_metrics(y_test, y_pred, y_proba)\n\n        # \u8be6\u7ec6\u5206\u7c7b\u62a5\u544a\n        class_report = classification_report(y_test, y_pred, target_names=target_classes, output_dict=True)\n\n        # \u6df7\u6dc6\u77e9\u9635\n        conf_matrix = confusion_matrix(y_test, y_pred)\n\n        # ROC\u66f2\u7ebf\u6570\u636e (\u5982\u679c\u662f\u4e8c\u5206\u7c7b)\n        roc_data = None\n        if y_proba is not None and len(np.unique(y_test)) == 2:\n            roc_data = self._calculate_roc_curve(y_test, y_proba[:, 1])\n\n        # \u7279\u5f81\u91cd\u8981\u6027\n        feature_importance = model.get_feature_importance()\n\n        # \u9884\u6d4b\u5206\u5e03\u5206\u6790\n        prediction_distribution = self._analyze_prediction_distribution(y_test, y_pred)\n\n        # \u9519\u8bef\u5206\u6790\n        error_analysis = self._analyze_predictions(X_test, y_test, y_pred, y_proba)\n\n        evaluation_results = {\n            \"basic_metrics\": basic_metrics,\n            \"classification_report\": class_report,\n            \"confusion_matrix\": conf_matrix.tolist(),\n            \"feature_importance\": feature_importance,\n            \"prediction_distribution\": prediction_distribution,\n            \"error_analysis\": error_analysis,\n            \"roc_curve\": roc_data,\n            \"evaluation_time\": pd.Timestamp.now().isoformat(),\n        }\n\n        return evaluation_results\n\n    def _calculate_basic_metrics(\n        self,\n        y_true: pd.Series,\n        y_pred: np.ndarray,\n        y_proba: Optional[np.ndarray] = None\n    ) -&gt; Dict[str, float]:\n        \"\"\"\u8ba1\u7b97\u57fa\u7840\u8bc4\u4f30\u6307\u6807\"\"\"\n\n        metrics = {\n            \"accuracy\": accuracy_score(y_true, y_pred),\n            \"precision\": precision_score(y_true, y_pred, average=\"weighted\", zero_division=0),\n            \"recall\": recall_score(y_true, y_pred, average=\"weighted\", zero_division=0),\n            \"f1_score\": f1_score(y_true, y_pred, average=\"weighted\", zero_division=0),\n        }\n\n        # AUC (\u5982\u679c\u652f\u6301\u6982\u7387\u9884\u6d4b)\n        if y_proba is not None:\n            try:\n                if len(np.unique(y_true)) == 2:  # \u4e8c\u5206\u7c7b\n                    metrics[\"auc\"] = roc_auc_score(y_true, y_proba[:, 1])\n                else:  # \u591a\u5206\u7c7b\n                    metrics[\"auc\"] = roc_auc_score(y_true, y_proba, multi_class=\"ovr\", average=\"weighted\")\n            except Exception:\n                self.logger.warning(\"Could not calculate AUC score\")\n\n        return metrics\n\n    def _calculate_roc_curve(self, y_true: pd.Series, y_scores: np.ndarray) -&gt; Dict[str, List]:\n        \"\"\"\u8ba1\u7b97ROC\u66f2\u7ebf\u6570\u636e\"\"\"\n        fpr, tpr, thresholds = roc_curve(y_true, y_scores)\n        auc_score = roc_auc_score(y_true, y_scores)\n\n        return {\n            \"false_positive_rate\": fpr.tolist(),\n            \"true_positive_rate\": tpr.tolist(),\n            \"thresholds\": thresholds.tolist(),\n            \"auc\": auc_score,\n        }\n\n    def _analyze_prediction_distribution(\n        self,\n        y_true: pd.Series,\n        y_pred: np.ndarray\n    ) -&gt; Dict[str, Any]:\n        \"\"\"\u5206\u6790\u9884\u6d4b\u5206\u5e03\"\"\"\n\n        # \u5b9e\u9645\u5206\u5e03\n        actual_distribution = y_true.value_counts().to_dict()\n\n        # \u9884\u6d4b\u5206\u5e03\n        pred_series = pd.Series(y_pred)\n        predicted_distribution = pred_series.value_counts().to_dict()\n\n        # \u6309\u7c7b\u522b\u7684\u51c6\u786e\u6027\n        class_accuracy = {}\n        for class_name in np.unique(y_true):\n            class_mask = (y_true == class_name)\n            if class_mask.sum() &gt; 0:\n                class_accuracy[class_name] = accuracy_score(\n                    y_true[class_mask], y_pred[class_mask]\n                )\n\n        return {\n            \"actual_distribution\": actual_distribution,\n            \"predicted_distribution\": predicted_distribution,\n            \"class_accuracy\": class_accuracy,\n        }\n\n    def _analyze_predictions(\n        self,\n        X_test: pd.DataFrame,\n        y_true: pd.Series,\n        y_pred: np.ndarray,\n        y_proba: Optional[np.ndarray] = None\n    ) -&gt; Dict[str, Any]:\n        \"\"\"\u5206\u6790\u9884\u6d4b\u7ed3\u679c\"\"\"\n\n        # \u9519\u8bef\u9884\u6d4b\u7684\u6837\u672c\n        incorrect_mask = (y_true != y_pred)\n        incorrect_indices = np.where(incorrect_mask)[0]\n\n        # \u7f6e\u4fe1\u5ea6\u5206\u6790 (\u5982\u679c\u6709\u6982\u7387)\n        confidence_analysis = None\n        if y_proba is not None:\n            predicted_confidence = np.max(y_proba, axis=1)\n\n            confidence_analysis = {\n                \"mean_confidence\": float(np.mean(predicted_confidence)),\n                \"correct_predictions_mean_confidence\": float(\n                    np.mean(predicted_confidence[~incorrect_mask])\n                ),\n                \"incorrect_predictions_mean_confidence\": float(\n                    np.mean(predicted_confidence[incorrect_mask])\n                ),\n            }\n\n        # \u9519\u8bef\u6837\u672c\u5206\u6790\n        error_samples = []\n        for idx in incorrect_indices[:10]:  # \u53ea\u5206\u6790\u524d10\u4e2a\u9519\u8bef\u6837\u672c\n            error_info = {\n                \"index\": int(idx),\n                \"true_label\": str(y_true.iloc[idx]),\n                \"predicted_label\": str(y_pred[idx]),\n                \"features\": X_test.iloc[idx].to_dict(),\n            }\n\n            if y_proba is not None:\n                error_info[\"predicted_probabilities\"] = y_proba[idx].tolist()\n                error_info[\"confidence\"] = float(np.max(y_proba[idx]))\n\n            error_samples.append(error_info)\n\n        return {\n            \"total_errors\": int(len(incorrect_indices)),\n            \"error_rate\": float(len(incorrect_indices) / len(y_true)),\n            \"confidence_analysis\": confidence_analysis,\n            \"error_samples\": error_samples,\n        }\n\n    def generate_evaluation_report(\n        self,\n        evaluation_results: Dict[str, Any],\n        model_name: str,\n        save_path: Optional[str] = None\n    ) -&gt; str:\n        \"\"\"\u751f\u6210\u8bc4\u4f30\u62a5\u544a\"\"\"\n\n        report = f\"\"\"\n# \u6a21\u578b\u8bc4\u4f30\u62a5\u544a\n\n## \u6a21\u578b\u4fe1\u606f\n- **\u6a21\u578b\u540d\u79f0**: {model_name}\n- **\u8bc4\u4f30\u65f6\u95f4**: {evaluation_results['evaluation_time']}\n\n## \u57fa\u7840\u6027\u80fd\u6307\u6807\n\"\"\"\n\n        # \u6dfb\u52a0\u57fa\u7840\u6307\u6807\n        metrics = evaluation_results['basic_metrics']\n        for metric_name, metric_value in metrics.items():\n            report += f\"- **{metric_name.upper()}**: {metric_value:.4f}\\n\"\n\n        # \u6dfb\u52a0\u9884\u6d4b\u5206\u5e03\n        pred_dist = evaluation_results['prediction_distribution']\n        report += f\"\"\"\n## \u9884\u6d4b\u5206\u5e03\u5206\u6790\n\n### \u5b9e\u9645\u5206\u5e03\n\"\"\"\n        for class_name, count in pred_dist['actual_distribution'].items():\n            report += f\"- {class_name}: {count}\\n\"\n\n        report += \"\\n### \u9884\u6d4b\u5206\u5e03\\n\"\n        for class_name, count in pred_dist['predicted_distribution'].items():\n            report += f\"- {class_name}: {count}\\n\"\n\n        report += \"\\n### \u5404\u7c7b\u522b\u51c6\u786e\u7387\\n\"\n        for class_name, accuracy in pred_dist['class_accuracy'].items():\n            report += f\"- {class_name}: {accuracy:.4f}\\n\"\n\n        # \u6dfb\u52a0\u9519\u8bef\u5206\u6790\n        error_analysis = evaluation_results['error_analysis']\n        report += f\"\"\"\n## \u9519\u8bef\u5206\u6790\n- **\u603b\u9519\u8bef\u6570**: {error_analysis['total_errors']}\n- **\u9519\u8bef\u7387**: {error_analysis['error_rate']:.4f}\n\"\"\"\n\n        if error_analysis.get('confidence_analysis'):\n            conf_analysis = error_analysis['confidence_analysis']\n            report += f\"\"\"\n### \u7f6e\u4fe1\u5ea6\u5206\u6790\n- **\u5e73\u5747\u7f6e\u4fe1\u5ea6**: {conf_analysis['mean_confidence']:.4f}\n- **\u6b63\u786e\u9884\u6d4b\u5e73\u5747\u7f6e\u4fe1\u5ea6**: {conf_analysis['correct_predictions_mean_confidence']:.4f}\n- **\u9519\u8bef\u9884\u6d4b\u5e73\u5747\u7f6e\u4fe1\u5ea6**: {conf_analysis['incorrect_predictions_mean_confidence']:.4f}\n\"\"\"\n\n        # \u6dfb\u52a0\u7279\u5f81\u91cd\u8981\u6027\n        feature_importance = evaluation_results['feature_importance']\n        report += f\"\"\"\n## \u7279\u5f81\u91cd\u8981\u6027 (Top 10)\n\"\"\"\n        for i, (feature, importance) in enumerate(\n            sorted(feature_importance.items(), key=lambda x: x[1], reverse=True)[:10]\n        ):\n            report += f\"{i+1}. **{feature}**: {importance:.4f}\\n\"\n\n        # \u4fdd\u5b58\u62a5\u544a\n        if save_path:\n            with open(save_path, 'w', encoding='utf-8') as f:\n                f.write(report)\n            self.logger.info(f\"Evaluation report saved to: {save_path}\")\n\n        return report\n</code></pre>"},{"location":"ml/ML_MODEL_GUIDE/#_10","title":"\ud83d\ude80 \u6a21\u578b\u90e8\u7f72","text":""},{"location":"ml/ML_MODEL_GUIDE/#1_3","title":"1. \u6a21\u578b\u670d\u52a1\u5316","text":"<pre><code># src/ml/model_service.py\n\nfrom fastapi import FastAPI, HTTPException, BackgroundTasks\nfrom pydantic import BaseModel, Field\nfrom typing import List, Dict, Any, Optional\nimport pandas as pd\nimport numpy as np\nimport asyncio\nimport logging\nfrom datetime import datetime\nimport uuid\n\nfrom ..models.football_prediction_model import FootballPredictionModel\n\nclass PredictionRequest(BaseModel):\n    \"\"\"\u9884\u6d4b\u8bf7\u6c42\u6a21\u578b\"\"\"\n    home_team: str = Field(..., description=\"\u4e3b\u961f\u540d\u79f0\")\n    away_team: str = Field(..., description=\"\u5ba2\u961f\u540d\u79f0\")\n    features: Dict[str, Any] = Field(..., description=\"\u7279\u5f81\u6570\u636e\")\n    include_explanation: bool = Field(False, description=\"\u662f\u5426\u5305\u542b\u89e3\u91ca\")\n\nclass BatchPredictionRequest(BaseModel):\n    \"\"\"\u6279\u91cf\u9884\u6d4b\u8bf7\u6c42\u6a21\u578b\"\"\"\n    matches: List[Dict[str, Any]] = Field(..., description=\"\u6bd4\u8d5b\u5217\u8868\")\n    include_explanations: bool = Field(False, description=\"\u662f\u5426\u5305\u542b\u89e3\u91ca\")\n\nclass PredictionResponse(BaseModel):\n    \"\"\"\u9884\u6d4b\u54cd\u5e94\u6a21\u578b\"\"\"\n    request_id: str = Field(..., description=\"\u8bf7\u6c42ID\")\n    prediction: Dict[str, Any] = Field(..., description=\"\u9884\u6d4b\u7ed3\u679c\")\n    explanation: Optional[Dict[str, Any]] = Field(None, description=\"\u9884\u6d4b\u89e3\u91ca\")\n    timestamp: str = Field(..., description=\"\u9884\u6d4b\u65f6\u95f4\")\n\nclass ModelService:\n    \"\"\"\u6a21\u578b\u670d\u52a1\"\"\"\n\n    def __init__(self):\n        self.logger = logging.getLogger(__name__)\n        self.models: Dict[str, FootballPredictionModel] = {}\n        self.prediction_cache = {}\n        self.request_queue = asyncio.Queue()\n        self.is_processing = False\n\n    def register_model(self, model: FootballPredictionModel) -&gt; None:\n        \"\"\"\u6ce8\u518c\u6a21\u578b\"\"\"\n        self.models[model.model_name] = model\n        self.logger.info(f\"Model registered: {model.model_name}\")\n\n    def get_model(self, model_name: str) -&gt; Optional[FootballPredictionModel]:\n        \"\"\"\u83b7\u53d6\u6a21\u578b\"\"\"\n        return self.models.get(model_name)\n\n    async def predict_match(\n        self,\n        request: PredictionRequest,\n        model_name: str = \"football_predictor\"\n    ) -&gt; PredictionResponse:\n        \"\"\"\n        \u9884\u6d4b\u5355\u573a\u6bd4\u8d5b\n\n        Args:\n            request: \u9884\u6d4b\u8bf7\u6c42\n            model_name: \u6a21\u578b\u540d\u79f0\n\n        Returns:\n            \u9884\u6d4b\u54cd\u5e94\n        \"\"\"\n        request_id = str(uuid.uuid4())\n\n        try:\n            model = self.get_model(model_name)\n            if not model:\n                raise HTTPException(status_code=404, detail=f\"Model {model_name} not found\")\n\n            if not model.is_trained:\n                raise HTTPException(status_code=400, detail=\"Model is not trained\")\n\n            # \u68c0\u67e5\u7f13\u5b58\n            cache_key = self._generate_cache_key(request, model_name)\n            if cache_key in self.prediction_cache:\n                cached_result = self.prediction_cache[cache_key]\n                self.logger.debug(f\"Cache hit for request: {request_id}\")\n                return PredictionResponse(\n                    request_id=request_id,\n                    prediction=cached_result[\"prediction\"],\n                    explanation=cached_result.get(\"explanation\"),\n                    timestamp=cached_result[\"timestamp\"]\n                )\n\n            # \u6267\u884c\u9884\u6d4b\n            prediction = model.predict_match(\n                home_team=request.home_team,\n                away_team=request.away_team,\n                features=request.features,\n                return_probabilities=True\n            )\n\n            # \u751f\u6210\u89e3\u91ca (\u5982\u679c\u9700\u8981)\n            explanation = None\n            if request.include_explanation:\n                explanation = model.explain_prediction(\n                    home_team=request.home_team,\n                    away_team=request.away_team,\n                    features=request.features\n                )\n\n            # \u7f13\u5b58\u7ed3\u679c\n            result = {\n                \"prediction\": prediction,\n                \"explanation\": explanation,\n                \"timestamp\": datetime.now().isoformat()\n            }\n            self.prediction_cache[cache_key] = result\n\n            self.logger.info(f\"Prediction completed: {request_id}\")\n\n            return PredictionResponse(\n                request_id=request_id,\n                prediction=prediction,\n                explanation=explanation,\n                timestamp=result[\"timestamp\"]\n            )\n\n        except Exception as e:\n            self.logger.error(f\"Prediction failed: {e}\")\n            raise HTTPException(status_code=500, detail=str(e))\n\n    async def batch_predict(\n        self,\n        request: BatchPredictionRequest,\n        model_name: str = \"football_predictor\"\n    ) -&gt; List[PredictionResponse]:\n        \"\"\"\n        \u6279\u91cf\u9884\u6d4b\n\n        Args:\n            request: \u6279\u91cf\u9884\u6d4b\u8bf7\u6c42\n            model_name: \u6a21\u578b\u540d\u79f0\n\n        Returns:\n            \u9884\u6d4b\u54cd\u5e94\u5217\u8868\n        \"\"\"\n        model = self.get_model(model_name)\n        if not model:\n            raise HTTPException(status_code=404, detail=f\"Model {model_name} not found\")\n\n        if not model.is_trained:\n            raise HTTPException(status_code=400, detail=\"Model is not trained\")\n\n        # \u51c6\u5907\u6279\u91cf\u9884\u6d4b\u6570\u636e\n        matches = []\n        for match in request.matches:\n            matches.append({\n                \"home_team\": match.get(\"home_team\", \"\"),\n                \"away_team\": match.get(\"away_team\", \"\"),\n                \"features\": match.get(\"features\", {})\n            })\n\n        # \u6267\u884c\u6279\u91cf\u9884\u6d4b\n        batch_results = model.batch_predict(matches)\n\n        # \u751f\u6210\u54cd\u5e94\n        responses = []\n        for i, result in enumerate(batch_results):\n            if \"error\" in result:\n                # \u9519\u8bef\u54cd\u5e94\n                responses.append(PredictionResponse(\n                    request_id=f\"batch_{i}_{str(uuid.uuid4())[:8]}\",\n                    prediction=result,\n                    explanation=None,\n                    timestamp=datetime.now().isoformat()\n                ))\n            else:\n                # \u6210\u529f\u54cd\u5e94\n                explanation = None\n                if request.include_explanations:\n                    explanation = model.explain_prediction(\n                        home_team=result[\"home_team\"],\n                        away_team=result[\"away_team\"],\n                        features=matches[i][\"features\"]\n                    )\n\n                responses.append(PredictionResponse(\n                    request_id=f\"batch_{i}_{str(uuid.uuid4())[:8]}\",\n                    prediction=result,\n                    explanation=explanation,\n                    timestamp=result[\"prediction_time\"]\n                ))\n\n        return responses\n\n    def _generate_cache_key(self, request: PredictionRequest, model_name: str) -&gt; str:\n        \"\"\"\u751f\u6210\u7f13\u5b58\u952e\"\"\"\n        import hashlib\n\n        key_data = f\"{model_name}:{request.home_team}:{request.away_team}:{sorted(request.features.items())}\"\n        return hashlib.md5(key_data.encode()).hexdigest()\n\n    def clear_cache(self) -&gt; None:\n        \"\"\"\u6e05\u7a7a\u7f13\u5b58\"\"\"\n        self.prediction_cache.clear()\n        self.logger.info(\"Prediction cache cleared\")\n\n    def get_model_info(self, model_name: str) -&gt; Dict[str, Any]:\n        \"\"\"\u83b7\u53d6\u6a21\u578b\u4fe1\u606f\"\"\"\n        model = self.get_model(model_name)\n        if not model:\n            raise HTTPException(status_code=404, detail=f\"Model {model_name} not found\")\n\n        return {\n            \"model_name\": model.model_name,\n            \"model_type\": model.model_type,\n            \"prediction_type\": model.prediction_type.value,\n            \"is_trained\": model.is_trained,\n            \"feature_count\": len(model.feature_columns),\n            \"target_classes\": model.target_classes,\n            \"metadata\": model.metadata,\n        }\n\n# \u521b\u5efaFastAPI\u5e94\u7528\napp = FastAPI(title=\"Football Prediction API\", version=\"1.0.0\")\nmodel_service = ModelService()\n\n# \u6ce8\u518c\u9ed8\u8ba4\u6a21\u578b\nfrom ..models.prediction_model import default_model\nmodel_service.register_model(default_model)\n\n# API\u7aef\u70b9\n@app.post(\"/predict\", response_model=PredictionResponse)\nasync def predict_match(request: PredictionRequest):\n    \"\"\"\u9884\u6d4b\u5355\u573a\u6bd4\u8d5b\"\"\"\n    return await model_service.predict_match(request)\n\n@app.post(\"/predict/batch\", response_model=List[PredictionResponse])\nasync def batch_predict(request: BatchPredictionRequest):\n    \"\"\"\u6279\u91cf\u9884\u6d4b\u6bd4\u8d5b\"\"\"\n    return await model_service.batch_predict(request)\n\n@app.get(\"/models\")\nasync def list_models():\n    \"\"\"\u5217\u51fa\u6240\u6709\u6a21\u578b\"\"\"\n    return {\"models\": list(model_service.models.keys())}\n\n@app.get(\"/models/{model_name}\")\nasync def get_model_info(model_name: str):\n    \"\"\"\u83b7\u53d6\u6a21\u578b\u4fe1\u606f\"\"\"\n    return model_service.get_model_info(model_name)\n\n@app.post(\"/models/{model_name}/register\")\nasync def register_model(model_name: str, model_path: str):\n    \"\"\"\u6ce8\u518c\u65b0\u6a21\u578b\"\"\"\n    model = FootballPredictionModel(model_name)\n    if model.load_model(model_path):\n        model_service.register_model(model)\n        return {\"message\": f\"Model {model_name} registered successfully\"}\n    else:\n        raise HTTPException(status_code=400, detail=\"Failed to load model\")\n\n@app.delete(\"/cache\")\nasync def clear_cache():\n    \"\"\"\u6e05\u7a7a\u9884\u6d4b\u7f13\u5b58\"\"\"\n    model_service.clear_cache()\n    return {\"message\": \"Cache cleared\"}\n</code></pre>"},{"location":"ml/ML_MODEL_GUIDE/#_11","title":"\ud83d\udcc8 \u6a21\u578b\u76d1\u63a7","text":""},{"location":"ml/ML_MODEL_GUIDE/#1_4","title":"1. \u6027\u80fd\u76d1\u63a7","text":"<pre><code># src/ml/model_monitor.py\n\nimport pandas as pd\nimport numpy as np\nfrom typing import Dict, Any, List, Optional\nfrom datetime import datetime, timedelta\nimport logging\nfrom prometheus_client import Counter, Histogram, Gauge\nimport asyncio\n\nclass ModelMonitor:\n    \"\"\"\u6a21\u578b\u76d1\u63a7\u5668\"\"\"\n\n    def __init__(self):\n        self.logger = logging.getLogger(__name__)\n\n        # Prometheus\u6307\u6807\n        self.prediction_requests_total = Counter(\n            'model_prediction_requests_total',\n            'Total number of prediction requests',\n            ['model_name', 'status']\n        )\n\n        self.prediction_duration = Histogram(\n            'model_prediction_duration_seconds',\n            'Time spent making predictions',\n            ['model_name'],\n            buckets=[0.01, 0.05, 0.1, 0.5, 1.0, 2.0, 5.0]\n        )\n\n        self.prediction_accuracy = Gauge(\n            'model_prediction_accuracy',\n            'Current model accuracy',\n            ['model_name']\n        )\n\n        self.data_drift_score = Gauge(\n            'model_data_drift_score',\n            'Data drift score',\n            ['model_name', 'feature']\n        )\n\n        # \u76d1\u63a7\u6570\u636e\u5b58\u50a8\n        self.monitoring_data = {}\n        self.alert_thresholds = {\n            \"accuracy_drop\": 0.1,      # \u51c6\u786e\u7387\u4e0b\u964d10%\n            \"prediction_latency\": 2.0, # \u9884\u6d4b\u5ef6\u8fdf\u8d85\u8fc72\u79d2\n            \"error_rate\": 0.05,        # \u9519\u8bef\u7387\u8d85\u8fc75%\n            \"data_drift\": 0.2,         # \u6570\u636e\u6f02\u79fb\u8d85\u8fc720%\n        }\n\n    async def record_prediction(\n        self,\n        model_name: str,\n        prediction_time: float,\n        success: bool,\n        prediction_result: Optional[Dict[str, Any]] = None\n    ) -&gt; None:\n        \"\"\"\u8bb0\u5f55\u9884\u6d4b\u8bf7\u6c42\"\"\"\n\n        status = \"success\" if success else \"error\"\n        self.prediction_requests_total.labels(\n            model_name=model_name,\n            status=status\n        ).inc()\n\n        self.prediction_duration.labels(\n            model_name=model_name\n        ).observe(prediction_time)\n\n    async def update_model_accuracy(\n        self,\n        model_name: str,\n        accuracy: float\n    ) -&gt; None:\n        \"\"\"\u66f4\u65b0\u6a21\u578b\u51c6\u786e\u7387\"\"\"\n\n        self.prediction_accuracy.labels(\n            model_name=model_name\n        ).set(accuracy)\n\n        # \u68c0\u67e5\u662f\u5426\u9700\u8981\u544a\u8b66\n        await self._check_accuracy_drop(model_name, accuracy)\n\n    async def detect_data_drift(\n        self,\n        model_name: str,\n        current_features: pd.DataFrame,\n        reference_features: pd.DataFrame\n    ) -&gt; Dict[str, float]:\n        \"\"\"\u68c0\u6d4b\u6570\u636e\u6f02\u79fb\"\"\"\n\n        drift_scores = {}\n\n        for feature in current_features.columns:\n            if feature in reference_features.columns:\n                # \u8ba1\u7b97\u5206\u5e03\u5dee\u5f02 (\u7b80\u5316\u5b9e\u73b0)\n                current_mean = current_features[feature].mean()\n                ref_mean = reference_features[feature].mean()\n                current_std = current_features[feature].std()\n                ref_std = reference_features[feature].std()\n\n                # \u8ba1\u7b97\u6f02\u79fb\u5206\u6570\n                mean_diff = abs(current_mean - ref_mean) / (ref_std + 1e-8)\n                std_ratio = current_std / (ref_std + 1e-8)\n\n                drift_score = max(mean_diff, abs(std_ratio - 1))\n                drift_scores[feature] = drift_score\n\n                # \u66f4\u65b0Prometheus\u6307\u6807\n                self.data_drift_score.labels(\n                    model_name=model_name,\n                    feature=feature\n                ).set(drift_score)\n\n        # \u68c0\u67e5\u662f\u5426\u9700\u8981\u544a\u8b66\n        await self._check_data_drift_alert(model_name, drift_scores)\n\n        return drift_scores\n\n    async def _check_accuracy_drop(self, model_name: str, current_accuracy: float) -&gt; None:\n        \"\"\"\u68c0\u67e5\u51c6\u786e\u7387\u4e0b\u964d\u544a\u8b66\"\"\"\n\n        if model_name not in self.monitoring_data:\n            self.monitoring_data[model_name] = {}\n\n        last_accuracy = self.monitoring_data[model_name].get(\"last_accuracy\")\n\n        if last_accuracy is not None:\n            accuracy_drop = last_accuracy - current_accuracy\n\n            if accuracy_drop &gt; self.alert_thresholds[\"accuracy_drop\"]:\n                await self._send_alert(\n                    \"accuracy_drop\",\n                    f\"Model {model_name} accuracy dropped by {accuracy_drop:.3f}\",\n                    {\n                        \"model_name\": model_name,\n                        \"last_accuracy\": last_accuracy,\n                        \"current_accuracy\": current_accuracy,\n                        \"drop\": accuracy_drop,\n                    }\n                )\n\n        self.monitoring_data[model_name][\"last_accuracy\"] = current_accuracy\n\n    async def _check_data_drift_alert(\n        self,\n        model_name: str,\n        drift_scores: Dict[str, float]\n    ) -&gt; None:\n        \"\"\"\u68c0\u67e5\u6570\u636e\u6f02\u79fb\u544a\u8b66\"\"\"\n\n        max_drift = max(drift_scores.values())\n\n        if max_drift &gt; self.alert_thresholds[\"data_drift\"]:\n            # \u627e\u5230\u6f02\u79fb\u6700\u5927\u7684\u7279\u5f81\n            max_drift_feature = max(drift_scores.items(), key=lambda x: x[1])\n\n            await self._send_alert(\n                \"data_drift\",\n                f\"Significant data drift detected in model {model_name}\",\n                {\n                    \"model_name\": model_name,\n                    \"max_drift\": max_drift,\n                    \"max_drift_feature\": max_drift_feature[0],\n                    \"drift_scores\": drift_scores,\n                }\n            )\n\n    async def _send_alert(\n        self,\n        alert_type: str,\n        message: str,\n        details: Dict[str, Any]\n    ) -&gt; None:\n        \"\"\"\u53d1\u9001\u544a\u8b66\"\"\"\n\n        alert = {\n            \"alert_type\": alert_type,\n            \"message\": message,\n            \"details\": details,\n            \"timestamp\": datetime.now().isoformat(),\n            \"severity\": self._get_alert_severity(alert_type),\n        }\n\n        self.logger.warning(f\"ALERT: {message}\")\n\n        # \u8fd9\u91cc\u53ef\u4ee5\u96c6\u6210\u5b9e\u9645\u7684\u544a\u8b66\u7cfb\u7edf (\u90ae\u4ef6\u3001Slack\u7b49)\n        # await self.alert_sender.send_alert(alert)\n\n    def _get_alert_severity(self, alert_type: str) -&gt; str:\n        \"\"\"\u83b7\u53d6\u544a\u8b66\u4e25\u91cd\u7a0b\u5ea6\"\"\"\n\n        severity_map = {\n            \"accuracy_drop\": \"warning\",\n            \"data_drift\": \"warning\",\n            \"high_latency\": \"critical\",\n            \"high_error_rate\": \"critical\",\n        }\n\n        return severity_map.get(alert_type, \"info\")\n\n    async def generate_monitoring_report(\n        self,\n        model_name: str,\n        time_range: timedelta = timedelta(hours=24)\n    ) -&gt; Dict[str, Any]:\n        \"\"\"\u751f\u6210\u76d1\u63a7\u62a5\u544a\"\"\"\n\n        end_time = datetime.now()\n        start_time = end_time - time_range\n\n        report = {\n            \"model_name\": model_name,\n            \"report_period\": {\n                \"start\": start_time.isoformat(),\n                \"end\": end_time.isoformat(),\n                \"duration_hours\": time_range.total_seconds() / 3600,\n            },\n            \"performance_metrics\": {\n                \"total_requests\": 0,\n                \"success_rate\": 0,\n                \"average_latency\": 0,\n                \"current_accuracy\": 0,\n            },\n            \"data_drift\": {},\n            \"alerts\": [],\n            \"recommendations\": [],\n        }\n\n        # \u6536\u96c6\u76d1\u63a7\u6570\u636e (\u7b80\u5316\u5b9e\u73b0)\n        if model_name in self.monitoring_data:\n            model_data = self.monitoring_data[model_name]\n\n            report[\"performance_metrics\"][\"current_accuracy\"] = model_data.get(\"last_accuracy\", 0)\n\n            # \u751f\u6210\u5efa\u8bae\n            if model_data.get(\"last_accuracy\", 1.0) &lt; 0.7:\n                report[\"recommendations\"].append(\"\u8003\u8651\u91cd\u65b0\u8bad\u7ec3\u6a21\u578b\u4ee5\u63d0\u9ad8\u51c6\u786e\u7387\")\n\n            if len(model_data.get(\"recent_drift_scores\", {})) &gt; 0:\n                report[\"recommendations\"].append(\"\u68c0\u6d4b\u5230\u6570\u636e\u6f02\u79fb\uff0c\u5efa\u8bae\u66f4\u65b0\u8bad\u7ec3\u6570\u636e\")\n\n        return report\n</code></pre>"},{"location":"ml/ML_MODEL_GUIDE/#_12","title":"\ud83d\udcda \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"ml/ML_MODEL_GUIDE/#1_5","title":"1. \u6a21\u578b\u5f00\u53d1\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u6570\u636e\u8d28\u91cf</li> <li>\u786e\u4fdd\u8bad\u7ec3\u6570\u636e\u7684\u5b8c\u6574\u6027\u548c\u51c6\u786e\u6027</li> <li>\u8fdb\u884c\u9002\u5f53\u7684\u6570\u636e\u6e05\u6d17\u548c\u9884\u5904\u7406</li> <li> <p>\u5904\u7406\u7f3a\u5931\u503c\u548c\u5f02\u5e38\u503c</p> </li> <li> <p>\u7279\u5f81\u5de5\u7a0b</p> </li> <li>\u9009\u62e9\u4e0e\u9884\u6d4b\u76ee\u6807\u76f8\u5173\u7684\u7279\u5f81</li> <li>\u907f\u514d\u6570\u636e\u6cc4\u9732 (feature leakage)</li> <li> <p>\u8fdb\u884c\u7279\u5f81\u6807\u51c6\u5316\u548c\u5f52\u4e00\u5316</p> </li> <li> <p>\u6a21\u578b\u9009\u62e9</p> </li> <li>\u4ece\u7b80\u5355\u7684\u57fa\u7ebf\u6a21\u578b\u5f00\u59cb</li> <li>\u6839\u636e\u95ee\u9898\u7279\u70b9\u9009\u62e9\u5408\u9002\u7684\u7b97\u6cd5</li> <li> <p>\u8003\u8651\u6a21\u578b\u7684\u89e3\u91ca\u6027\u9700\u6c42</p> </li> <li> <p>\u9a8c\u8bc1\u7b56\u7565</p> </li> <li>\u4f7f\u7528\u65f6\u95f4\u5e8f\u5217\u5206\u5272\u907f\u514d\u672a\u6765\u6570\u636e\u6cc4\u9732</li> <li>\u8fdb\u884c\u4ea4\u53c9\u9a8c\u8bc1\u786e\u4fdd\u6a21\u578b\u7a33\u5b9a\u6027</li> <li>\u4fdd\u7559\u72ec\u7acb\u7684\u6d4b\u8bd5\u96c6\u8fdb\u884c\u6700\u7ec8\u8bc4\u4f30</li> </ol>"},{"location":"ml/ML_MODEL_GUIDE/#2_2","title":"2. \u90e8\u7f72\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u6a21\u578b\u7248\u672c\u7ba1\u7406</li> <li>\u4f7f\u7528MLflow\u7b49\u5de5\u5177\u8ddf\u8e2a\u6a21\u578b\u7248\u672c</li> <li>\u4fdd\u5b58\u5b8c\u6574\u7684\u6a21\u578b\u5143\u6570\u636e</li> <li> <p>\u5efa\u7acb\u6a21\u578b\u56de\u6eda\u673a\u5236</p> </li> <li> <p>\u6027\u80fd\u76d1\u63a7</p> </li> <li>\u76d1\u63a7\u9884\u6d4b\u5ef6\u8fdf\u548c\u541e\u5410\u91cf</li> <li>\u8ddf\u8e2a\u6a21\u578b\u6027\u80fd\u6307\u6807\u53d8\u5316</li> <li> <p>\u8bbe\u7f6e\u5408\u7406\u7684\u544a\u8b66\u9608\u503c</p> </li> <li> <p>\u5b89\u5168\u8003\u8651</p> </li> <li>\u4fdd\u62a4\u6a21\u578b\u6587\u4ef6\u548c\u8bad\u7ec3\u6570\u636e</li> <li>\u5b9e\u73b0API\u8bbf\u95ee\u63a7\u5236</li> <li> <p>\u8bb0\u5f55\u9884\u6d4b\u8bf7\u6c42\u65e5\u5fd7</p> </li> <li> <p>\u53ef\u6269\u5c55\u6027</p> </li> <li>\u8bbe\u8ba1\u6c34\u5e73\u6269\u5c55\u7684\u67b6\u6784</li> <li>\u5b9e\u73b0\u6a21\u578b\u8d1f\u8f7d\u5747\u8861</li> <li>\u4f18\u5316\u9884\u6d4b\u670d\u52a1\u6027\u80fd</li> </ol>"},{"location":"ml/ML_MODEL_GUIDE/#_13","title":"\ud83d\udccb \u76f8\u5173\u6587\u6863","text":"<ul> <li>\u6570\u636e\u5e93\u67b6\u6784\u6587\u6863</li> <li>\u5f00\u53d1\u6307\u5357</li> <li>\u6570\u636e\u91c7\u96c6\u914d\u7f6e\u6307\u5357</li> <li>API\u6587\u6863</li> <li>\u672f\u8bed\u8868</li> </ul> <p>\u6587\u6863\u7248\u672c: 1.0 \u6700\u540e\u66f4\u65b0: 2025-10-23 \u7ef4\u62a4\u8005: \u5f00\u53d1\u56e2\u961f</p>"},{"location":"ops/FAILURE_PROTECTION_DEMO/","title":"\ud83d\udee1\ufe0f \u5931\u8d25\u4fdd\u62a4\u673a\u5236\u6f14\u793a","text":"<p>\u672c\u6587\u6863\u6f14\u793aFootballPrediction\u7684\u5b8c\u6574\u5931\u8d25\u4fdd\u62a4\u673a\u5236\u5982\u4f55\u5de5\u4f5c\u3002</p>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#_2","title":"\ud83c\udfaf \u5931\u8d25\u4fdd\u62a4\u673a\u5236\u6982\u8ff0","text":""},{"location":"ops/FAILURE_PROTECTION_DEMO/#_3","title":"\u6838\u5fc3\u601d\u8def","text":"<p><code>prepush</code> \u4f9d\u8d56 <code>ci</code>\uff1a</p> <ul> <li>\u5982\u679c <code>ci</code> \u5931\u8d25\uff08\u73af\u5883\u68c0\u67e5/\u4ee3\u7801\u8d28\u91cf/\u6d4b\u8bd5\u4e0d\u901a\u8fc7\uff09</li> <li>Make \u4f1a\u81ea\u52a8\u4e2d\u65ad</li> <li>\u540e\u7eed\u7684 git push + issue sync \u4e0d\u4f1a\u6267\u884c</li> <li>\u907f\u514d\u628a\u534a\u6210\u54c1\u4ee3\u7801\u63a8\u5230\u8fdc\u7a0b\uff0c\u4e5f\u907f\u514d\u540c\u6b65\u4e0d\u5b8c\u6574\u4efb\u52a1</li> </ul>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#_4","title":"\u4fdd\u62a4\u5c42\u7ea7","text":"<pre><code>make prepush\n    \u2193\n1. \ud83d\udd0d \u73af\u5883\u68c0\u67e5 (env-check)\n    \u2193 (\u5931\u8d25\u5219\u505c\u6b62)\n2. \ud83d\udccb \u9879\u76ee\u4e0a\u4e0b\u6587 (context)\n    \u2193 (\u5931\u8d25\u5219\u505c\u6b62)\n3. \ud83d\udd27 \u4ee3\u7801\u8d28\u91cf (quality)\n    \u2193 (\u5931\u8d25\u5219\u505c\u6b62)\n4. \ud83e\uddea \u5355\u5143\u6d4b\u8bd5 (test)\n    \u2193 (\u5931\u8d25\u5219\u505c\u6b62)\n5. \ud83d\udcca \u8986\u76d6\u7387\u6d4b\u8bd5 (coverage)\n    \u2193 (\u5931\u8d25\u5219\u505c\u6b62)\n6. \u2705 \u5982\u679c\u6240\u6709\u68c0\u67e5\u901a\u8fc7\n    \u2193\n7. \ud83d\udce6 Git \u63a8\u9001\n    \u2193\n8. \ud83d\udccb Issues \u540c\u6b65\n    \u2193\n9. \ud83c\udf89 \u5b8c\u6210\u62a5\u544a\n</code></pre>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#_5","title":"\ud83e\uddea \u5b9e\u9645\u6d4b\u8bd5\u6f14\u793a","text":""},{"location":"ops/FAILURE_PROTECTION_DEMO/#1","title":"\u6d4b\u8bd51\uff1a\u73af\u5883\u68c0\u67e5\u5931\u8d25","text":"<p>\u573a\u666f\uff1a\u7f3a\u5c11\u4f9d\u8d56\u5305\u6216\u5728\u9519\u8bef\u5206\u652f</p> <pre><code># \u521b\u5efa\u95ee\u9898\u573a\u666f\ngit checkout master  # \u5207\u6362\u5230\u4e3b\u5206\u652f\n\n# \u8fd0\u884cprepush\nmake prepush\n</code></pre> <p>\u9884\u671f\u7ed3\u679c\uff1a</p> <pre><code>&gt;&gt;&gt; \u5f00\u59cbprepush\u6d41\u7a0b\uff08\u5305\u542b\u5931\u8d25\u4fdd\u62a4\u673a\u5236\uff09...\n&gt;&gt;&gt; \u7b2c1\u6b65: \u6267\u884cCI\u68c0\u67e5...\n&gt;&gt;&gt; \u8fd0\u884c\u73af\u5883\u68c0\u67e5...\n\u274c \u5f53\u524d\u5728\u4e3b\u5206\u652f 'master'\n\ud83d\udca1 \u5efa\u8bae: \u521b\u5efafeature\u5206\u652f: git checkout -b feature/your-feature-name\n\u274c \u73af\u5883\u68c0\u67e5\u5931\u8d25\n\u274c CI\u68c0\u67e5\u5931\u8d25\uff0c\u505c\u6b62\u63a8\u9001\u6d41\u7a0b\n   \u8bf7\u4fee\u590d\u4e0a\u8ff0\u95ee\u9898\u540e\u91cd\u65b0\u8fd0\u884c make prepush\n\ud83d\udca1 \u5feb\u901f\u4fee\u590d\u5efa\u8bae:\n   - \u4ee3\u7801\u683c\u5f0f\u95ee\u9898: make fix\n   - \u6d4b\u8bd5\u5931\u8d25: make test\n   - \u73af\u5883\u95ee\u9898: make env-check\n</code></pre> <p>\u7ed3\u679c\uff1a\u2705 \u63a8\u9001\u88ab\u963b\u6b62\uff0cIssues\u540c\u6b65\u88ab\u8df3\u8fc7</p>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#2","title":"\u6d4b\u8bd52\uff1a\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5\u5931\u8d25","text":"<p>\u573a\u666f\uff1a\u4ee3\u7801\u683c\u5f0f\u95ee\u9898</p> <pre><code># \u521b\u5efa\u683c\u5f0f\u7cdf\u7cd5\u7684\u4ee3\u7801\npython scripts/test_failure.py  # \u521b\u5efa\u6d4b\u8bd5\u6587\u4ef6\n\n# \u8fd0\u884cprepush\nmake prepush\n</code></pre> <p>\u9884\u671f\u7ed3\u679c\uff1a</p> <pre><code>&gt;&gt;&gt; \u5f00\u59cbprepush\u6d41\u7a0b\uff08\u5305\u542b\u5931\u8d25\u4fdd\u62a4\u673a\u5236\uff09...\n&gt;&gt;&gt; \u7b2c1\u6b65: \u6267\u884cCI\u68c0\u67e5...\n&gt;&gt;&gt; \u73af\u5883\u68c0\u67e5\u901a\u8fc7...\n&gt;&gt;&gt; \u9879\u76ee\u4e0a\u4e0b\u6587\u52a0\u8f7d\u5b8c\u6210...\n&gt;&gt;&gt; \u4ee3\u7801\u683c\u5f0f\u5316...\n&gt;&gt;&gt; \u4ee3\u7801\u98ce\u683c\u68c0\u67e5...\nsrc/bad_example.py:8:1: E302 expected 2 blank lines, found 1\nsrc/bad_example.py:12:80: E501 line too long (88 &gt; 79 characters)\n\u274c \u8d28\u91cf\u68c0\u67e5\u5931\u8d25\n\u274c CI\u68c0\u67e5\u5931\u8d25\uff0c\u505c\u6b62\u63a8\u9001\u6d41\u7a0b\n</code></pre> <p>\u7ed3\u679c\uff1a\u2705 \u63a8\u9001\u88ab\u963b\u6b62\uff0cIssues\u540c\u6b65\u88ab\u8df3\u8fc7</p>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#3","title":"\u6d4b\u8bd53\uff1a\u5355\u5143\u6d4b\u8bd5\u5931\u8d25","text":"<p>\u573a\u666f\uff1a\u6d4b\u8bd5\u7528\u4f8b\u5931\u8d25</p> <pre><code># \u521b\u5efa\u5931\u8d25\u7684\u6d4b\u8bd5\npython scripts/test_failure.py  # \u5305\u542b\u6545\u610f\u5931\u8d25\u7684\u6d4b\u8bd5\n\n# \u8fd0\u884cprepush\nmake prepush\n</code></pre> <p>\u9884\u671f\u7ed3\u679c\uff1a</p> <pre><code>&gt;&gt;&gt; \u5f00\u59cbprepush\u6d41\u7a0b\uff08\u5305\u542b\u5931\u8d25\u4fdd\u62a4\u673a\u5236\uff09...\n&gt;&gt;&gt; \u7b2c1\u6b65: \u6267\u884cCI\u68c0\u67e5...\n&gt;&gt;&gt; \u73af\u5883\u68c0\u67e5\u901a\u8fc7...\n&gt;&gt;&gt; \u9879\u76ee\u4e0a\u4e0b\u6587\u52a0\u8f7d\u5b8c\u6210...\n&gt;&gt;&gt; \u5b8c\u6574\u8d28\u91cf\u68c0\u67e5\u901a\u8fc7...\n&gt;&gt;&gt; \u8fd0\u884c\u5355\u5143\u6d4b\u8bd5...\nFAILED tests/test_failure_demo.py::test_intentional_failure\n\u274c \u5355\u5143\u6d4b\u8bd5\u5931\u8d25\n   \u8bf7\u4fee\u590d\u5931\u8d25\u7684\u6d4b\u8bd5\u540e\u91cd\u8bd5\n\u274c CI\u68c0\u67e5\u5931\u8d25\uff0c\u505c\u6b62\u63a8\u9001\u6d41\u7a0b\n</code></pre> <p>\u7ed3\u679c\uff1a\u2705 \u63a8\u9001\u88ab\u963b\u6b62\uff0cIssues\u540c\u6b65\u88ab\u8df3\u8fc7</p>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#4","title":"\u6d4b\u8bd54\uff1a\u6240\u6709\u68c0\u67e5\u901a\u8fc7","text":"<p>\u573a\u666f\uff1a\u4ee3\u7801\u8d28\u91cf\u548c\u6d4b\u8bd5\u90fd\u901a\u8fc7</p> <pre><code># \u6e05\u7406\u95ee\u9898\u6587\u4ef6\npython scripts/test_failure.py --cleanup\n\n# \u786e\u4fdd\u5728feature\u5206\u652f\ngit checkout -b feature/clean-code\n\n# \u8fd0\u884cprepush\nmake prepush\n</code></pre> <p>\u9884\u671f\u7ed3\u679c\uff1a</p> <pre><code>&gt;&gt;&gt; \u5f00\u59cbprepush\u6d41\u7a0b\uff08\u5305\u542b\u5931\u8d25\u4fdd\u62a4\u673a\u5236\uff09...\n&gt;&gt;&gt; \u7b2c1\u6b65: \u6267\u884cCI\u68c0\u67e5...\n\u2705 CI\u68c0\u67e5\u901a\u8fc7\uff0c\u7ee7\u7eed\u63a8\u9001\u6d41\u7a0b\n&gt;&gt;&gt; \u7b2c2\u6b65: \u68c0\u67e5Git\u72b6\u6001...\n&gt;&gt;&gt; \u6dfb\u52a0\u6587\u4ef6\u5230\u6682\u5b58\u533a...\n&gt;&gt;&gt; \u521b\u5efa\u63d0\u4ea4...\n&gt;&gt;&gt; \u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93...\n\u2705 \u4ee3\u7801\u63a8\u9001\u5b8c\u6210\n&gt;&gt;&gt; \u7b2c3\u6b65: \u540c\u6b65Issues...\n\u2705 GitHub Issues\u540c\u6b65\u5b8c\u6210\n\ud83c\udf89 prepush\u5b8c\u6574\u6d41\u7a0b\u6210\u529f\u5b8c\u6210\uff01\n</code></pre> <p>\u7ed3\u679c\uff1a\u2705 \u6210\u529f\u63a8\u9001\u4ee3\u7801\u548c\u540c\u6b65Issues</p>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#_6","title":"\ud83d\udd27 \u4fee\u590d\u5efa\u8bae\u7cfb\u7edf","text":"<p>\u6bcf\u79cd\u5931\u8d25\u90fd\u63d0\u4f9b\u5177\u4f53\u7684\u4fee\u590d\u5efa\u8bae\uff1a</p>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#_7","title":"\u73af\u5883\u95ee\u9898","text":"<pre><code>make env-check  # \u8be6\u7ec6\u73af\u5883\u8bca\u65ad\nmake install    # \u5b89\u88c5\u7f3a\u5931\u4f9d\u8d56\n</code></pre>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#_8","title":"\u4ee3\u7801\u8d28\u91cf\u95ee\u9898","text":"<pre><code>make fix        # \u81ea\u52a8\u4fee\u590d\u683c\u5f0f\u95ee\u9898\nmake format     # \u4ee3\u7801\u683c\u5f0f\u5316\nmake lint       # \u98ce\u683c\u68c0\u67e5\n</code></pre>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#_9","title":"\u6d4b\u8bd5\u95ee\u9898","text":"<pre><code>make test       # \u8fd0\u884c\u6d4b\u8bd5\u67e5\u770b\u5177\u4f53\u9519\u8bef\nmake coverage   # \u68c0\u67e5\u8986\u76d6\u7387\n</code></pre>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#_10","title":"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"ops/FAILURE_PROTECTION_DEMO/#_11","title":"\u5f00\u53d1\u6d41\u7a0b\u5efa\u8bae","text":"<ol> <li>\u5f00\u59cb\u5f00\u53d1\u524d\uff1a</li> </ol> <pre><code>make env-check  # \u786e\u4fdd\u73af\u5883\u6b63\u5e38\nmake dev        # \u51c6\u5907\u5f00\u53d1\u73af\u5883\n</code></pre> <ol> <li>\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff1a</li> </ol> <pre><code>make fix        # \u5b9a\u671f\u4fee\u590d\u683c\u5f0f\u95ee\u9898\nmake test       # \u589e\u91cf\u8fd0\u884c\u6d4b\u8bd5\n</code></pre> <ol> <li>\u63d0\u4ea4\u524d\uff1a</li> </ol> <pre><code>make ci         # \u5b8c\u6574CI\u68c0\u67e5\nmake prepush    # \u5982\u679cCI\u901a\u8fc7\uff0c\u81ea\u52a8\u63a8\u9001\n</code></pre>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#_12","title":"\u6545\u969c\u6392\u9664","text":"<p>\u5982\u679cprepush\u5931\u8d25\uff1a</p> <ol> <li>\u67e5\u770b\u5177\u4f53\u9519\u8bef\u4fe1\u606f</li> <li>\u6309\u5efa\u8bae\u8fd0\u884c\u4fee\u590d\u547d\u4ee4</li> <li>\u91cd\u65b0\u8fd0\u884c <code>make prepush</code></li> </ol> <p>\u5e38\u89c1\u95ee\u9898\uff1a</p> <ul> <li>\u73af\u5883\u95ee\u9898\uff1a\u8fd0\u884c <code>make env-check</code> \u83b7\u53d6\u4fee\u590d\u5efa\u8bae</li> <li>\u683c\u5f0f\u95ee\u9898\uff1a\u8fd0\u884c <code>make fix</code> \u81ea\u52a8\u4fee\u590d</li> <li>\u6d4b\u8bd5\u5931\u8d25\uff1a\u8fd0\u884c <code>make test</code> \u67e5\u770b\u8be6\u7ec6\u9519\u8bef</li> <li>\u4f9d\u8d56\u95ee\u9898\uff1a\u8fd0\u884c <code>make install</code> \u5b89\u88c5\u7f3a\u5931\u5305</li> </ul>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#_13","title":"\u2728 \u7cfb\u7edf\u4ef7\u503c","text":""},{"location":"ops/FAILURE_PROTECTION_DEMO/#1_1","title":"1. \u96f6\u5bb9\u5fcd\u534a\u6210\u54c1","text":"<ul> <li>\u4efb\u4f55\u8d28\u91cf\u95ee\u9898\u90fd\u4f1a\u963b\u6b62\u63a8\u9001</li> <li>\u4fdd\u62a4\u8fdc\u7a0b\u4ed3\u5e93\u7684\u4ee3\u7801\u8d28\u91cf</li> <li>\u907f\u514d\"\u5148\u63a8\u9001\u518d\u4fee\u590d\"\u7684\u574f\u4e60\u60ef</li> </ul>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#2_1","title":"2. \u667a\u80fd\u5931\u8d25\u53cd\u9988","text":"<ul> <li>\u7cbe\u786e\u5b9a\u4f4d\u95ee\u9898\u4f4d\u7f6e</li> <li>\u63d0\u4f9b\u5177\u4f53\u4fee\u590d\u5efa\u8bae</li> <li>\u652f\u6301\u5feb\u901f\u8fed\u4ee3\u4fee\u590d</li> </ul>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#3_1","title":"3. \u56e2\u961f\u534f\u4f5c\u4fdd\u62a4","text":"<ul> <li>\u9632\u6b62\u63a8\u9001\u7834\u574f\u6027\u4ee3\u7801</li> <li>\u786e\u4fddIssues\u540c\u6b65\u7684\u5b8c\u6574\u6027</li> <li>\u7ef4\u62a4\u9879\u76ee\u7684\u4e13\u4e1a\u6807\u51c6</li> </ul>"},{"location":"ops/FAILURE_PROTECTION_DEMO/#4_1","title":"4. \u5f00\u53d1\u6548\u7387\u63d0\u5347","text":"<ul> <li>\u95ee\u9898\u5728\u672c\u5730\u5c31\u88ab\u53d1\u73b0</li> <li>\u51cf\u5c11\u8fdc\u7a0bCI\u7684\u5931\u8d25\u7387</li> <li>\u8282\u7701\u56e2\u961f\u8c03\u8bd5\u65f6\u95f4</li> </ul> <p>\ud83c\udfaf \u603b\u7ed3\uff1aFootballPrediction\u7684\u5931\u8d25\u4fdd\u62a4\u673a\u5236\u4e0d\u4ec5\u662f\u6280\u672f\u9632\u62a4\uff0c\u66f4\u662f\u5f00\u53d1\u8d28\u91cf\u6587\u5316\u7684\u4f53\u73b0\u3002\u5b83\u786e\u4fdd\u6bcf\u6b21\u63a8\u9001\u90fd\u662f\u9ad8\u8d28\u91cf\u7684\uff0c\u6bcf\u6b21Issues\u540c\u6b65\u90fd\u662f\u6709\u610f\u4e49\u7684\u3002</p>"},{"location":"ops/MCP_HEALTH_CHECK/","title":"MCP \u5065\u5eb7\u68c0\u67e5\u62a5\u544a","text":"<p>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:25.363272 \u68c0\u67e5\u8303\u56f4: \u5168\u5c40\u57fa\u7840\u8bbe\u65bdMCP + \u9879\u76ee\u4e13\u7528MCP</p>"},{"location":"ops/MCP_HEALTH_CHECK/#_1","title":"\u68c0\u67e5\u6458\u8981","text":"<ul> <li>\u6b63\u5e38\u670d\u52a1: 11</li> <li>\u5f02\u5e38\u670d\u52a1: 0</li> <li>\u603b\u670d\u52a1\u6570: 11</li> <li>\u5065\u5eb7\u7387: 100.0%</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#mcp_1","title":"\u5168\u5c40\u57fa\u7840\u8bbe\u65bdMCP\u68c0\u67e5\u7ed3\u679c","text":""},{"location":"ops/MCP_HEALTH_CHECK/#postgresql-mcp","title":"PostgreSQL MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: SELECT 1 \u8fd4\u56de: 1</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:25.373583</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#redis-mcp","title":"Redis MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: PING \u8fd4\u56de: True</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:25.393306</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#kafka-mcp","title":"Kafka MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: \u53ef\u7528 topics: ['performance_test_topic', 'integration_test_topic', 'test_integration_topic']</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:25.464096</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#docker-mcp","title":"Docker MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: \u8fd0\u884c\u4e2d\u7684\u5bb9\u5668: ['footballprediction-grafana', 'footballprediction-prometheus', 'minikube', 'footballprediction-db-1', 'footballprediction-redis-1', 'footballprediction-kafka-1', 'footballprediction-mlflow-1']</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:25.514141</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#kubernetes-mcp","title":"Kubernetes MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: \u9ed8\u8ba4\u547d\u540d\u7a7a\u95f4 pods: []</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:25.594857</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#prometheus-mcp","title":"Prometheus MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: up \u6307\u6807\u8fd4\u56de 1 \u4e2a\u7ed3\u679c</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:25.598628</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#grafana-mcp","title":"Grafana MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: \u53d1\u73b0 0 \u4e2adashboards</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:25.606773</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#mcp_2","title":"\u9879\u76ee\u4e13\u7528MCP\u68c0\u67e5\u7ed3\u679c","text":""},{"location":"ops/MCP_HEALTH_CHECK/#mlflow-mcp","title":"MLflow MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: \u53d1\u73b0 1 \u4e2aexperiments: ['Default']</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:26.315814</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#feast-mcp","title":"Feast MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: \u53d1\u73b0 3 \u4e2afeature views: ['team_recent_performance', 'historical_matchup', 'odds_features']</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:27.673345</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#coverage-mcp","title":"Coverage MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: \u53d1\u73b0\u8986\u76d6\u7387\u6570\u636e\u6587\u4ef6\uff0c\u5305\u542b 100 \u4e2a\u6587\u4ef6</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:27.691893</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#pytest-mcp","title":"Pytest MCP \u2705","text":"<ul> <li>\u72b6\u6001: \u2705 \u6b63\u5e38</li> <li>\u54cd\u5e94: \u6210\u529f\u53d1\u73b0\u6d4b\u8bd5\uff0c\u8f93\u51fa: ============================= test session starts ============================== platform linux -- Python 3.11.9, pytest-8.4.2, pluggy-1.6.0 benchmark: 5.1.0 (defaults: timer=time.perf_counter disable...</li> <li>\u68c0\u67e5\u65f6\u95f4: 2025-09-25T01:10:35.013421</li> </ul>"},{"location":"ops/MCP_HEALTH_CHECK/#_2","title":"\u6267\u884c\u65e5\u5fd7","text":"<pre><code>[2025-09-25 01:10:25] \ud83d\ude80 \u5f00\u59cbMCP\u5065\u5eb7\u68c0\u67e5...\n[2025-09-25 01:10:25] ==================================================\n[2025-09-25 01:10:25]\n\ud83d\udccb \u5168\u5c40\u57fa\u7840\u8bbe\u65bdMCP\u68c0\u67e5:\n[2025-09-25 01:10:25] \ud83d\udd0d \u68c0\u67e5 PostgreSQL MCP...\n[2025-09-25 01:10:25] \u2705 PostgreSQL MCP: \u8fde\u63a5\u6b63\u5e38\n[2025-09-25 01:10:25] \ud83d\udd0d \u68c0\u67e5 Redis MCP...\n[2025-09-25 01:10:25] \u2705 Redis MCP: \u8fde\u63a5\u6b63\u5e38\n[2025-09-25 01:10:25] \ud83d\udd0d \u68c0\u67e5 Kafka MCP...\n[2025-09-25 01:10:25] \u2705 Kafka MCP: \u53d1\u73b0 3 \u4e2atopics\n[2025-09-25 01:10:25] \ud83d\udd0d \u68c0\u67e5 Docker MCP...\n[2025-09-25 01:10:25] \u2705 Docker MCP: \u53d1\u73b0 7 \u4e2a\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\n[2025-09-25 01:10:25] \ud83d\udd0d \u68c0\u67e5 Kubernetes MCP...\n[2025-09-25 01:10:25] \u2705 Kubernetes MCP: \u53d1\u73b0 0 \u4e2apods\n[2025-09-25 01:10:25] \ud83d\udd0d \u68c0\u67e5 Prometheus MCP...\n[2025-09-25 01:10:25] \u2705 Prometheus MCP: \u6210\u529f\u67e5\u8be2 up \u6307\u6807\n[2025-09-25 01:10:25] \ud83d\udd0d \u68c0\u67e5 Grafana MCP...\n[2025-09-25 01:10:25] \u2705 Grafana MCP: \u53d1\u73b0 0 \u4e2adashboards\n[2025-09-25 01:10:25]\n\ud83d\udccb \u9879\u76ee\u4e13\u7528MCP\u68c0\u67e5:\n[2025-09-25 01:10:25] \ud83d\udd0d \u68c0\u67e5 MLflow MCP...\n[2025-09-25 01:10:26] \u2705 MLflow MCP: \u53d1\u73b0 1 \u4e2aexperiments\n[2025-09-25 01:10:26] \ud83d\udd0d \u68c0\u67e5 Feast MCP...\n[2025-09-25 01:10:27] \u2705 Feast MCP: \u53d1\u73b0 3 \u4e2afeature views\n[2025-09-25 01:10:27] \ud83d\udd0d \u68c0\u67e5 Coverage MCP...\n[2025-09-25 01:10:27] \u2705 Coverage MCP: \u53d1\u73b0 100 \u4e2a\u8986\u76d6\u7387\u6587\u4ef6\n[2025-09-25 01:10:27] \ud83d\udd0d \u68c0\u67e5 Pytest MCP...\n[2025-09-25 01:10:35] \u2705 Pytest MCP: \u6d4b\u8bd5\u53d1\u73b0\u529f\u80fd\u6b63\u5e38\n[2025-09-25 01:10:35] \ud83d\udccb \u751f\u6210\u5065\u5eb7\u68c0\u67e5\u62a5\u544a...\n</code></pre>"},{"location":"ops/MCP_HEALTH_CHECK/#_3","title":"\u5efa\u8bae\u548c\u540e\u7eed\u6b65\u9aa4","text":""},{"location":"ops/MCP_HEALTH_CHECK/#_4","title":"\ud83c\udfaf \u5efa\u8bae\u7684\u540e\u7eed\u6b65\u9aa4","text":"<ol> <li>\u4fee\u590d\u5f02\u5e38\u670d\u52a1: \u6839\u636e\u4e0a\u8ff0\u9519\u8bef\u4fe1\u606f\u4fee\u590d\u8fde\u63a5\u95ee\u9898</li> <li>\u914d\u7f6e\u73af\u5883\u53d8\u91cf: \u786e\u4fdd\u6240\u6709\u670d\u52a1\u7684\u8fde\u63a5\u53c2\u6570\u6b63\u786e</li> <li>\u91cd\u542f\u670d\u52a1: \u5bf9\u914d\u7f6e\u53d8\u66f4\u7684\u670d\u52a1\u8fdb\u884c\u91cd\u542f</li> <li>\u5b9a\u671f\u68c0\u67e5: \u5efa\u8bae\u8bbe\u7f6e\u5b9a\u65f6\u4efb\u52a1\u8fdb\u884c\u5065\u5eb7\u68c0\u67e5</li> <li>\u76d1\u63a7\u544a\u8b66: \u5bf9\u5173\u952eMCP\u670d\u52a1\u8bbe\u7f6e\u76d1\u63a7\u544a\u8b66</li> </ol>"},{"location":"ops/MONITORING/","title":"\u6570\u636e\u8d28\u91cf\u76d1\u63a7\u4e0e\u544a\u8b66\u673a\u5236","text":"<p>\u672c\u6587\u6863\u63cf\u8ff0\u4e86\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u7684\u6570\u636e\u8d28\u91cf\u76d1\u63a7\u548c\u544a\u8b66\u673a\u5236\u7684\u8bbe\u8ba1\u4e0e\u5b9e\u73b0\u3002</p>"},{"location":"ops/MONITORING/#_2","title":"\u6982\u8ff0","text":"<p>\u6570\u636e\u8d28\u91cf\u76d1\u63a7\u7cfb\u7edf\u786e\u4fdd\u7cfb\u7edf\u4e2d\u7684\u6570\u636e\u4fdd\u6301\u9ad8\u8d28\u91cf\u3001\u9ad8\u53ef\u7528\u6027\uff0c\u5e76\u5728\u6570\u636e\u51fa\u73b0\u95ee\u9898\u65f6\u53ca\u65f6\u53d1\u51fa\u544a\u8b66\u3002\u7cfb\u7edf\u5305\u542b\u4e09\u4e2a\u6838\u5fc3\u7ec4\u4ef6\uff1a</p> <ul> <li>\u8d28\u91cf\u76d1\u63a7\u5668 (<code>quality_monitor.py</code>) - \u76d1\u63a7\u6570\u636e\u65b0\u9c9c\u5ea6\u3001\u5b8c\u6574\u6027\u548c\u4e00\u81f4\u6027</li> <li>\u5f02\u5e38\u68c0\u6d4b\u5668 (<code>anomaly_detector.py</code>) - \u57fa\u4e8e\u7edf\u8ba1\u5b66\u65b9\u6cd5\u68c0\u6d4b\u6570\u636e\u5f02\u5e38</li> <li>\u544a\u8b66\u7ba1\u7406\u5668 (<code>alert_manager.py</code>) - \u7ba1\u7406\u544a\u8b66\u89c4\u5219\u548c\u53d1\u9001\u544a\u8b66\u901a\u77e5</li> </ul>"},{"location":"ops/MONITORING/#quality-monitor","title":"\u8d28\u91cf\u76d1\u63a7 (Quality Monitor)","text":""},{"location":"ops/MONITORING/#_3","title":"\u76d1\u63a7\u7ef4\u5ea6","text":""},{"location":"ops/MONITORING/#1-data-freshness","title":"1. \u6570\u636e\u65b0\u9c9c\u5ea6 (Data Freshness)","text":"<p>\u76d1\u63a7\u6570\u636e\u7684\u6700\u540e\u66f4\u65b0\u65f6\u95f4\uff0c\u786e\u4fdd\u6570\u636e\u53ca\u65f6\u6027\uff1a</p> <pre><code>freshness_thresholds = {\n    \"matches\": 24,      # \u6bd4\u8d5b\u6570\u636e24\u5c0f\u65f6\u5185\u66f4\u65b0\n    \"odds\": 1,          # \u8d54\u7387\u6570\u636e1\u5c0f\u65f6\u5185\u66f4\u65b0\n    \"predictions\": 2,   # \u9884\u6d4b\u6570\u636e2\u5c0f\u65f6\u5185\u66f4\u65b0\n    \"teams\": 168,       # \u7403\u961f\u6570\u636e1\u5468\u5185\u66f4\u65b0\n    \"leagues\": 720      # \u8054\u8d5b\u6570\u636e1\u6708\u5185\u66f4\u65b0\n}\n</code></pre>"},{"location":"ops/MONITORING/#2-data-completeness","title":"2. \u6570\u636e\u5b8c\u6574\u6027 (Data Completeness)","text":"<p>\u68c0\u67e5\u5173\u952e\u5b57\u6bb5\u7684\u7f3a\u5931\u60c5\u51b5\uff1a</p> <pre><code>critical_fields = {\n    \"matches\": [\"home_team_id\", \"away_team_id\", \"league_id\", \"match_time\"],\n    \"odds\": [\"match_id\", \"bookmaker\", \"home_odds\", \"away_odds\"],\n    \"predictions\": [\"match_id\", \"model_name\", \"home_win_probability\"]\n}\n</code></pre>"},{"location":"ops/MONITORING/#3-data-consistency","title":"3. \u6570\u636e\u4e00\u81f4\u6027 (Data Consistency)","text":"<p>\u9a8c\u8bc1\u6570\u636e\u95f4\u7684\u5173\u8054\u5173\u7cfb\uff1a</p> <ul> <li>\u5916\u952e\u4e00\u81f4\u6027: \u68c0\u67e5matches\u8868\u4e2d\u7684team_id\u662f\u5426\u5728teams\u8868\u4e2d\u5b58\u5728</li> <li>\u8d54\u7387\u4e00\u81f4\u6027: \u9a8c\u8bc1\u8d54\u7387\u6570\u636e\u7684\u5408\u7406\u6027\uff08\u548c\u503c\u63a5\u8fd11\uff0c\u8303\u56f4\u5408\u7406\uff09</li> <li>\u6bd4\u8d5b\u72b6\u6001\u4e00\u81f4\u6027: \u786e\u4fdd\u6bd4\u8d5b\u72b6\u6001\u8f6c\u6362\u7684\u903b\u8f91\u6b63\u786e\u6027</li> </ul>"},{"location":"ops/MONITORING/#_4","title":"\u8d28\u91cf\u8bc4\u5206","text":"<p>\u7cfb\u7edf\u8ba1\u7b97\u7efc\u5408\u8d28\u91cf\u5f97\u5206\uff080-1\uff09\uff0c\u57fa\u4e8e\u4ee5\u4e0b\u6743\u91cd\uff1a</p> <ul> <li>\u6570\u636e\u65b0\u9c9c\u5ea6: 40%</li> <li>\u6570\u636e\u5b8c\u6574\u6027: 35%</li> <li>\u6570\u636e\u4e00\u81f4\u6027: 25%</li> </ul> <p>\u8d28\u91cf\u7b49\u7ea7\u5212\u5206\uff1a</p> <ul> <li>\u4f18\u79c0 (0.9-1.0): \u6570\u636e\u8d28\u91cf\u6781\u4f73</li> <li>\u826f\u597d (0.8-0.9): \u6570\u636e\u8d28\u91cf\u826f\u597d</li> <li>\u4e00\u822c (0.7-0.8): \u6570\u636e\u8d28\u91cf\u4e00\u822c\uff0c\u9700\u8981\u6ce8\u610f</li> <li>\u8f83\u5dee (0.6-0.7): \u6570\u636e\u8d28\u91cf\u8f83\u5dee\uff0c\u9700\u8981\u6539\u8fdb</li> <li>\u5f88\u5dee (0.0-0.6): \u6570\u636e\u8d28\u91cf\u5f88\u5dee\uff0c\u9700\u8981\u7d27\u6025\u5904\u7406</li> </ul>"},{"location":"ops/MONITORING/#anomaly-detection","title":"\u5f02\u5e38\u68c0\u6d4b (Anomaly Detection)","text":""},{"location":"ops/MONITORING/#_5","title":"\u68c0\u6d4b\u65b9\u6cd5","text":""},{"location":"ops/MONITORING/#1-3","title":"1. 3\u03c3\u89c4\u5219\u68c0\u6d4b","text":"<p>\u57fa\u4e8e\u6b63\u6001\u5206\u5e03\u7684\u5f02\u5e38\u68c0\u6d4b\uff1a</p> <pre><code>lower_bound = mean - 3 * std\nupper_bound = mean + 3 * std\n</code></pre>"},{"location":"ops/MONITORING/#2-iqr","title":"2. IQR\u65b9\u6cd5\u68c0\u6d4b","text":"<p>\u57fa\u4e8e\u56db\u5206\u4f4d\u8ddd\u7684\u5f02\u5e38\u68c0\u6d4b\uff1a</p> <pre><code>Q1 = data.quantile(0.25)\nQ3 = data.quantile(0.75)\nIQR = Q3 - Q1\nlower_bound = Q1 - 1.5 * IQR\nupper_bound = Q3 + 1.5 * IQR\n</code></pre>"},{"location":"ops/MONITORING/#3-z-score","title":"3. Z-score\u5206\u6790","text":"<p>\u8ba1\u7b97\u6807\u51c6\u5316\u5f97\u5206\u8bc6\u522b\u5f02\u5e38\uff1a</p> <pre><code>z_scores = abs((data - mean) / std)\noutliers = data[z_scores &gt; threshold]\n</code></pre>"},{"location":"ops/MONITORING/#4","title":"4. \u8303\u56f4\u68c0\u67e5","text":"<p>\u57fa\u4e8e\u4e1a\u52a1\u89c4\u5219\u7684\u8303\u56f4\u9a8c\u8bc1\uff1a</p> <pre><code>thresholds = {\n    \"home_odds\": {\"min\": 1.01, \"max\": 100.0},\n    \"home_score\": {\"min\": 0, \"max\": 20},\n    \"minute\": {\"min\": 0, \"max\": 120}\n}\n</code></pre>"},{"location":"ops/MONITORING/#5","title":"5. \u9891\u7387\u5206\u5e03\u68c0\u6d4b","text":"<p>\u68c0\u6d4b\u5206\u7c7b\u6570\u636e\u7684\u9891\u7387\u5f02\u5e38\uff1a</p> <pre><code># \u68c0\u6d4b\u9891\u7387\u8fc7\u9ad8\u6216\u8fc7\u4f4e\u7684\u503c\nexpected_freq = total_count / unique_values\nanomalous = count &gt; expected_freq * 5 or count &lt; expected_freq * 0.1\n</code></pre>"},{"location":"ops/MONITORING/#6","title":"6. \u65f6\u95f4\u95f4\u9694\u68c0\u6d4b","text":"<p>\u68c0\u6d4b\u65f6\u95f4\u5e8f\u5217\u6570\u636e\u7684\u95f4\u9694\u5f02\u5e38\uff1a</p> <pre><code>time_diffs = time_data.diff().dt.total_seconds()\n# \u4f7f\u7528IQR\u65b9\u6cd5\u68c0\u6d4b\u5f02\u5e38\u95f4\u9694\n</code></pre>"},{"location":"ops/MONITORING/#_6","title":"\u5f02\u5e38\u7c7b\u578b","text":"<ul> <li>OUTLIER: \u79bb\u7fa4\u503c</li> <li>TREND_CHANGE: \u8d8b\u52bf\u53d8\u5316</li> <li>PATTERN_BREAK: \u6a21\u5f0f\u4e2d\u65ad</li> <li>VALUE_RANGE: \u6570\u503c\u8303\u56f4\u5f02\u5e38</li> <li>FREQUENCY: \u9891\u7387\u5f02\u5e38</li> <li>NULL_SPIKE: \u7a7a\u503c\u6fc0\u589e</li> </ul>"},{"location":"ops/MONITORING/#_7","title":"\u4e25\u91cd\u7a0b\u5ea6","text":"<ul> <li>LOW: \u8f7b\u5fae\u5f02\u5e38\uff0c\u53ef\u4ee5\u5ffd\u7565</li> <li>MEDIUM: \u4e2d\u7b49\u5f02\u5e38\uff0c\u9700\u8981\u5173\u6ce8</li> <li>HIGH: \u4e25\u91cd\u5f02\u5e38\uff0c\u9700\u8981\u5904\u7406</li> <li>CRITICAL: \u5173\u952e\u5f02\u5e38\uff0c\u9700\u8981\u7acb\u5373\u5904\u7406</li> </ul>"},{"location":"ops/MONITORING/#alert-management","title":"\u544a\u8b66\u673a\u5236 (Alert Management)","text":""},{"location":"ops/MONITORING/#_8","title":"\u544a\u8b66\u7ea7\u522b","text":"<ul> <li>INFO: \u4fe1\u606f\u6027\u544a\u8b66</li> <li>WARNING: \u8b66\u544a\u7ea7\u522b</li> <li>ERROR: \u9519\u8bef\u7ea7\u522b</li> <li>CRITICAL: \u5173\u952e\u7ea7\u522b</li> </ul>"},{"location":"ops/MONITORING/#_9","title":"\u544a\u8b66\u6e20\u9053","text":"<ul> <li>LOG: \u65e5\u5fd7\u8f93\u51fa</li> <li>PROMETHEUS: Prometheus\u6307\u6807</li> <li>WEBHOOK: Webhook\u901a\u77e5</li> <li>EMAIL: \u90ae\u4ef6\u901a\u77e5</li> </ul>"},{"location":"ops/MONITORING/#_10","title":"\u9ed8\u8ba4\u544a\u8b66\u89c4\u5219","text":""},{"location":"ops/MONITORING/#_11","title":"\u6570\u636e\u65b0\u9c9c\u5ea6\u544a\u8b66","text":"<pre><code>data_freshness_critical:\n  condition: \"freshness_hours &gt; 24\"\n  level: CRITICAL\n  throttle: 30\u5206\u949f\n\ndata_freshness_warning:\n  condition: \"freshness_hours &gt; 12\"\n  level: WARNING\n  throttle: 1\u5c0f\u65f6\n</code></pre>"},{"location":"ops/MONITORING/#_12","title":"\u6570\u636e\u5b8c\u6574\u6027\u544a\u8b66","text":"<pre><code>data_completeness_critical:\n  condition: \"completeness_ratio &lt; 0.8\"\n  level: CRITICAL\n  throttle: 15\u5206\u949f\n\ndata_completeness_warning:\n  condition: \"completeness_ratio &lt; 0.95\"\n  level: WARNING\n  throttle: 30\u5206\u949f\n</code></pre>"},{"location":"ops/MONITORING/#_13","title":"\u6570\u636e\u8d28\u91cf\u544a\u8b66","text":"<pre><code>data_quality_critical:\n  condition: \"quality_score &lt; 0.7\"\n  level: CRITICAL\n  throttle: 15\u5206\u949f\n</code></pre>"},{"location":"ops/MONITORING/#_14","title":"\u5f02\u5e38\u68c0\u6d4b\u544a\u8b66","text":"<pre><code>anomaly_critical:\n  condition: \"anomaly_score &gt; 0.2\"\n  level: CRITICAL\n  throttle: 5\u5206\u949f\n\nanomaly_warning:\n  condition: \"anomaly_score &gt; 0.1\"\n  level: WARNING\n  throttle: 10\u5206\u949f\n</code></pre>"},{"location":"ops/MONITORING/#_15","title":"\u544a\u8b66\u53bb\u91cd","text":"<p>\u7cfb\u7edf\u5b9e\u73b0\u544a\u8b66\u53bb\u91cd\u673a\u5236\uff0c\u907f\u514d\u91cd\u590d\u544a\u8b66\uff1a</p> <ul> <li>\u57fa\u4e8e\u544a\u8b66ID\uff08\u6807\u9898+\u6765\u6e90+\u6807\u7b7e\u7684hash\uff09\u53bb\u91cd</li> <li>\u914d\u7f6e\u53ef\u8c03\u7684\u53bb\u91cd\u65f6\u95f4\u7a97\u53e3</li> <li>\u76f8\u540c\u544a\u8b66\u5728\u65f6\u95f4\u7a97\u53e3\u5185\u53ea\u89e6\u53d1\u4e00\u6b21</li> </ul>"},{"location":"ops/MONITORING/#prometheus","title":"Prometheus\u6307\u6807","text":""},{"location":"ops/MONITORING/#_16","title":"\u6570\u636e\u8d28\u91cf\u6307\u6807","text":"<pre><code># \u6570\u636e\u65b0\u9c9c\u5ea6\uff08\u5c0f\u65f6\uff09\ndata_freshness_hours{table_name=\"matches\"} 2.5\n\n# \u6570\u636e\u5b8c\u6574\u6027\u6bd4\u4f8b\ndata_completeness_ratio{table_name=\"matches\"} 0.98\n\n# \u6570\u636e\u8d28\u91cf\u5f97\u5206\ndata_quality_score{table_name=\"matches\"} 0.92\n</code></pre>"},{"location":"ops/MONITORING/#_17","title":"\u5f02\u5e38\u68c0\u6d4b\u6307\u6807","text":"<pre><code># \u68c0\u6d4b\u5230\u7684\u5f02\u5e38\u603b\u6570\nanomalies_detected_total{table_name=\"odds\",column_name=\"home_odds\",anomaly_type=\"outlier\",severity=\"high\"} 5\n\n# \u5f02\u5e38\u5f97\u5206\nanomaly_score{table_name=\"odds\",column_name=\"home_odds\"} 0.15\n</code></pre>"},{"location":"ops/MONITORING/#_18","title":"\u544a\u8b66\u6307\u6807","text":"<pre><code># \u89e6\u53d1\u7684\u544a\u8b66\u603b\u6570\nalerts_fired_total{level=\"critical\",source=\"quality_monitor\",rule_id=\"data_freshness_critical\"} 3\n\n# \u6d3b\u8dc3\u544a\u8b66\u6570\nactive_alerts{level=\"critical\"} 2\n\n# \u76d1\u63a7\u68c0\u67e5\u8017\u65f6\nmonitoring_check_duration_seconds{check_type=\"quality_monitor\"} 1.23\n\n# \u76d1\u63a7\u9519\u8bef\u603b\u6570\nmonitoring_errors_total{error_type=\"database_connection\"} 1\n</code></pre>"},{"location":"ops/MONITORING/#_19","title":"\u4f7f\u7528\u65b9\u6cd5","text":""},{"location":"ops/MONITORING/#_20","title":"\u8d28\u91cf\u76d1\u63a7","text":"<pre><code>from src.monitoring.quality_monitor import QualityMonitor\n\n# \u521b\u5efa\u76d1\u63a7\u5668\nmonitor = QualityMonitor()\n\n# \u68c0\u67e5\u6570\u636e\u65b0\u9c9c\u5ea6\nfreshness_results = await monitor.check_data_freshness()\n\n# \u68c0\u67e5\u6570\u636e\u5b8c\u6574\u6027\ncompleteness_results = await monitor.check_data_completeness()\n\n# \u68c0\u67e5\u6570\u636e\u4e00\u81f4\u6027\nconsistency_results = await monitor.check_data_consistency()\n\n# \u8ba1\u7b97\u7efc\u5408\u8d28\u91cf\u5f97\u5206\nquality_score = await monitor.calculate_overall_quality_score()\n</code></pre>"},{"location":"ops/MONITORING/#_21","title":"\u5f02\u5e38\u68c0\u6d4b","text":"<pre><code>from src.monitoring.anomaly_detector import AnomalyDetector\n\n# \u521b\u5efa\u68c0\u6d4b\u5668\ndetector = AnomalyDetector()\n\n# \u6267\u884c\u5f02\u5e38\u68c0\u6d4b\nanomalies = await detector.detect_anomalies(\n    table_names=[\"matches\", \"odds\"],\n    methods=[\"three_sigma\", \"iqr\", \"range_check\"]\n)\n\n# \u83b7\u53d6\u5f02\u5e38\u6458\u8981\nsummary = await detector.get_anomaly_summary(anomalies)\n</code></pre>"},{"location":"ops/MONITORING/#_22","title":"\u544a\u8b66\u7ba1\u7406","text":"<pre><code>from src.monitoring.alert_manager import AlertManager, AlertLevel\n\n# \u521b\u5efa\u544a\u8b66\u7ba1\u7406\u5668\nalert_manager = AlertManager()\n\n# \u624b\u52a8\u89e6\u53d1\u544a\u8b66\nalert = alert_manager.fire_alert(\n    title=\"\u6570\u636e\u5f02\u5e38\u544a\u8b66\",\n    message=\"\u68c0\u6d4b\u5230\u8d54\u7387\u6570\u636e\u5f02\u5e38\",\n    level=AlertLevel.WARNING,\n    source=\"manual\",\n    labels={\"table\": \"odds\"}\n)\n\n# \u83b7\u53d6\u6d3b\u8dc3\u544a\u8b66\nactive_alerts = alert_manager.get_active_alerts()\n\n# \u89e3\u51b3\u544a\u8b66\nalert_manager.resolve_alert(alert.alert_id)\n</code></pre>"},{"location":"ops/MONITORING/#_23","title":"\u96c6\u6210\u4f7f\u7528","text":"<pre><code># \u5b8c\u6574\u7684\u76d1\u63a7\u6d41\u7a0b\nasync def run_monitoring():\n    monitor = QualityMonitor()\n    detector = AnomalyDetector()\n    alert_manager = AlertManager()\n\n    # 1. \u8d28\u91cf\u76d1\u63a7\n    quality_data = {\n        \"freshness\": await monitor.check_data_freshness(),\n        \"completeness\": await monitor.check_data_completeness(),\n        \"consistency\": await monitor.check_data_consistency()\n    }\n\n    # 2. \u5f02\u5e38\u68c0\u6d4b\n    anomalies = await detector.detect_anomalies()\n\n    # 3. \u66f4\u65b0\u6307\u6807\n    alert_manager.update_quality_metrics(quality_data)\n    alert_manager.update_anomaly_metrics(anomalies)\n\n    # 4. \u68c0\u67e5\u5e76\u89e6\u53d1\u544a\u8b66\n    quality_alerts = alert_manager.check_and_fire_quality_alerts(quality_data)\n    anomaly_alerts = alert_manager.check_and_fire_anomaly_alerts(anomalies)\n\n    return {\n        \"quality_data\": quality_data,\n        \"anomalies\": len(anomalies),\n        \"alerts_fired\": len(quality_alerts) + len(anomaly_alerts)\n    }\n</code></pre>"},{"location":"ops/MONITORING/#_24","title":"\u914d\u7f6e\u8bf4\u660e","text":""},{"location":"ops/MONITORING/#_25","title":"\u76d1\u63a7\u914d\u7f6e","text":"<p>\u5728 <code>quality_monitor.py</code> \u4e2d\u914d\u7f6e\uff1a</p> <pre><code># \u65b0\u9c9c\u5ea6\u9608\u503c\uff08\u5c0f\u65f6\uff09\nfreshness_thresholds = {\n    \"matches\": 24,\n    \"odds\": 1,\n    \"predictions\": 2\n}\n\n# \u5173\u952e\u5b57\u6bb5\ncritical_fields = {\n    \"matches\": [\"home_team_id\", \"away_team_id\", \"league_id\"],\n    \"odds\": [\"match_id\", \"bookmaker\", \"home_odds\"]\n}\n</code></pre>"},{"location":"ops/MONITORING/#_26","title":"\u5f02\u5e38\u68c0\u6d4b\u914d\u7f6e","text":"<p>\u5728 <code>anomaly_detector.py</code> \u4e2d\u914d\u7f6e\uff1a</p> <pre><code>detection_config = {\n    \"matches\": {\n        \"numeric_columns\": [\"home_score\", \"away_score\"],\n        \"thresholds\": {\n            \"home_score\": {\"min\": 0, \"max\": 20}\n        }\n    }\n}\n</code></pre>"},{"location":"ops/MONITORING/#_27","title":"\u544a\u8b66\u914d\u7f6e","text":"<p>\u5728 <code>alert_manager.py</code> \u4e2d\u914d\u7f6e\uff1a</p> <pre><code># \u6dfb\u52a0\u81ea\u5b9a\u4e49\u544a\u8b66\u89c4\u5219\nalert_manager.add_rule(AlertRule(\n    rule_id=\"custom_rule\",\n    name=\"\u81ea\u5b9a\u4e49\u544a\u8b66\",\n    condition=\"custom_condition\",\n    level=AlertLevel.WARNING,\n    channels=[AlertChannel.LOG, AlertChannel.PROMETHEUS],\n    throttle_seconds=600\n))\n\n# \u6ce8\u518c\u81ea\u5b9a\u4e49\u5904\u7406\u5668\ndef custom_handler(alert):\n    # \u81ea\u5b9a\u4e49\u5904\u7406\u903b\u8f91\n    pass\n\nalert_manager.register_handler(AlertChannel.WEBHOOK, custom_handler)\n</code></pre>"},{"location":"ops/MONITORING/#_28","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"ops/MONITORING/#1","title":"1. \u76d1\u63a7\u9891\u7387","text":"<ul> <li>\u6570\u636e\u65b0\u9c9c\u5ea6: \u6bcf30\u5206\u949f\u68c0\u67e5\u4e00\u6b21</li> <li>\u6570\u636e\u5b8c\u6574\u6027: \u6bcf\u5c0f\u65f6\u68c0\u67e5\u4e00\u6b21</li> <li>\u5f02\u5e38\u68c0\u6d4b: \u6bcf2\u5c0f\u65f6\u68c0\u67e5\u4e00\u6b21</li> </ul>"},{"location":"ops/MONITORING/#2","title":"2. \u544a\u8b66\u7ba1\u7406","text":"<ul> <li>\u8bbe\u7f6e\u5408\u7406\u7684\u53bb\u91cd\u65f6\u95f4\uff0c\u907f\u514d\u544a\u8b66\u98ce\u66b4</li> <li>\u533a\u5206\u4e0d\u540c\u7ea7\u522b\u7684\u544a\u8b66\u5904\u7406\u65b9\u5f0f</li> <li>\u5b9a\u671f\u6e05\u7406\u5df2\u89e3\u51b3\u7684\u544a\u8b66</li> </ul>"},{"location":"ops/MONITORING/#3","title":"3. \u6307\u6807\u76d1\u63a7","text":"<ul> <li>\u4f7f\u7528Grafana\u53ef\u89c6\u5316Prometheus\u6307\u6807</li> <li>\u8bbe\u7f6e\u4eea\u8868\u677f\u76d1\u63a7\u7cfb\u7edf\u5065\u5eb7\u72b6\u6001</li> <li>\u914d\u7f6e\u544a\u8b66\u89c4\u5219\u81ea\u52a8\u5904\u7406\u5f02\u5e38</li> </ul>"},{"location":"ops/MONITORING/#4_1","title":"4. \u6027\u80fd\u4f18\u5316","text":"<ul> <li>\u9650\u5236\u76d1\u63a7\u67e5\u8be2\u7684\u6570\u636e\u91cf</li> <li>\u4f7f\u7528\u5f02\u6b65\u5904\u7406\u63d0\u9ad8\u6027\u80fd</li> <li>\u5408\u7406\u914d\u7f6e\u6570\u636e\u5e93\u7d22\u5f15</li> </ul>"},{"location":"ops/MONITORING/#_29","title":"\u6545\u969c\u6392\u9664","text":""},{"location":"ops/MONITORING/#_30","title":"\u5e38\u89c1\u95ee\u9898","text":"<ol> <li>\u76d1\u63a7\u8d85\u65f6</li> <li>\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5</li> <li>\u4f18\u5316\u67e5\u8be2\u6027\u80fd</li> <li> <p>\u589e\u52a0\u8d85\u65f6\u914d\u7f6e</p> </li> <li> <p>\u5f02\u5e38\u68c0\u6d4b\u8bef\u62a5</p> </li> <li>\u8c03\u6574\u68c0\u6d4b\u9608\u503c</li> <li>\u6392\u9664\u5df2\u77e5\u7684\u6b63\u5e38\u5f02\u5e38</li> <li> <p>\u4f7f\u7528\u591a\u79cd\u65b9\u6cd5\u4ea4\u53c9\u9a8c\u8bc1</p> </li> <li> <p>\u544a\u8b66\u8fc7\u591a</p> </li> <li>\u589e\u52a0\u53bb\u91cd\u65f6\u95f4</li> <li>\u8c03\u6574\u544a\u8b66\u9608\u503c</li> <li> <p>\u4f18\u5316\u544a\u8b66\u89c4\u5219</p> </li> <li> <p>\u6307\u6807\u4e0d\u66f4\u65b0</p> </li> <li>\u68c0\u67e5Prometheus\u914d\u7f6e</li> <li>\u9a8c\u8bc1\u6307\u6807\u6807\u7b7e</li> <li>\u91cd\u542f\u76d1\u63a7\u670d\u52a1</li> </ol>"},{"location":"ops/MONITORING/#_31","title":"\u65e5\u5fd7\u67e5\u770b","text":"<pre><code># \u67e5\u770b\u76d1\u63a7\u65e5\u5fd7\ntail -f logs/monitoring.log\n\n# \u67e5\u770b\u544a\u8b66\u65e5\u5fd7\ngrep \"ALERT\" logs/app.log\n\n# \u67e5\u770b\u5f02\u5e38\u68c0\u6d4b\u65e5\u5fd7\ngrep \"anomaly\" logs/monitoring.log\n</code></pre>"},{"location":"ops/MONITORING/#_32","title":"\u6269\u5c55\u5f00\u53d1","text":""},{"location":"ops/MONITORING/#_33","title":"\u6dfb\u52a0\u65b0\u7684\u76d1\u63a7\u7ef4\u5ea6","text":"<ol> <li>\u5728 <code>QualityMonitor</code> \u4e2d\u6dfb\u52a0\u65b0\u7684\u68c0\u67e5\u65b9\u6cd5</li> <li>\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6</li> <li>\u6dfb\u52a0\u76f8\u5e94\u7684Prometheus\u6307\u6807</li> <li>\u914d\u7f6e\u544a\u8b66\u89c4\u5219</li> </ol>"},{"location":"ops/MONITORING/#_34","title":"\u96c6\u6210\u65b0\u7684\u544a\u8b66\u6e20\u9053","text":"<ol> <li>\u5728 <code>AlertChannel</code> \u679a\u4e3e\u4e2d\u6dfb\u52a0\u65b0\u6e20\u9053</li> <li>\u5b9e\u73b0\u5bf9\u5e94\u7684\u5904\u7406\u5668\u51fd\u6570</li> <li>\u6ce8\u518c\u5904\u7406\u5668\u5230 <code>AlertManager</code></li> <li>\u66f4\u65b0\u544a\u8b66\u89c4\u5219\u914d\u7f6e</li> </ol>"},{"location":"ops/MONITORING/#_35","title":"\u81ea\u5b9a\u4e49\u5f02\u5e38\u68c0\u6d4b\u7b97\u6cd5","text":"<ol> <li>\u5728 <code>AnomalyDetector</code> \u4e2d\u6dfb\u52a0\u65b0\u7684\u68c0\u6d4b\u65b9\u6cd5</li> <li>\u5b9a\u4e49\u65b0\u7684\u5f02\u5e38\u7c7b\u578b</li> <li>\u66f4\u65b0\u68c0\u6d4b\u914d\u7f6e</li> <li>\u6dfb\u52a0\u6d4b\u8bd5\u7528\u4f8b</li> </ol> <p>\u8fd9\u4e2a\u76d1\u63a7\u7cfb\u7edf\u4e3a\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u63d0\u4f9b\u4e86\u5168\u9762\u7684\u6570\u636e\u8d28\u91cf\u4fdd\u969c\uff0c\u786e\u4fdd\u7cfb\u7edf\u6570\u636e\u7684\u51c6\u786e\u6027\u3001\u53ca\u65f6\u6027\u548c\u53ef\u9760\u6027\u3002</p>"},{"location":"ops/MONITORING/#_36","title":"\ud83d\udd17 \u76f8\u5173\u6587\u6863\u94fe\u63a5","text":""},{"location":"ops/MONITORING/#_37","title":"\ud83d\udcda \u8fd0\u7ef4\u6838\u5fc3\u6587\u6863","text":"<ul> <li>\u751f\u4ea7\u90e8\u7f72\u6307\u5357 - \u751f\u4ea7\u73af\u5883\u90e8\u7f72\u548c\u8fd0\u7ef4\u6307\u5357</li> <li>\u8fd0\u7ef4\u624b\u518c - \u8fd0\u7ef4\u64cd\u4f5c\u6307\u5357\u548c\u6545\u969c\u6392\u9664</li> <li>\u5907\u4efd\u6062\u590d\u7b56\u7565 - \u6570\u636e\u5907\u4efd\u548c\u707e\u96be\u6062\u590d</li> <li>\u5b89\u5168\u914d\u7f6e - \u7cfb\u7edf\u5b89\u5168\u914d\u7f6e\u548c\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"ops/MONITORING/#_38","title":"\ud83c\udfd7\ufe0f \u7cfb\u7edf\u67b6\u6784","text":"<ul> <li>\u7cfb\u7edf\u67b6\u6784\u6587\u6863 - \u5b8c\u6574\u7684\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1</li> <li>\u6570\u636e\u5e93\u67b6\u6784 - \u6570\u636e\u5e93\u8bbe\u8ba1\u548c\u8868\u7ed3\u6784\u8be6\u60c5</li> <li>\u76d1\u63a7\u7cfb\u7edf\u67b6\u6784 - \u76d1\u63a7\u548c\u53ef\u89c2\u6d4b\u6027\u67b6\u6784\u8bbe\u8ba1</li> <li>\u7f13\u5b58\u5b9e\u73b0\u8bbe\u8ba1 - \u7f13\u5b58\u67b6\u6784\u548c\u7b56\u7565\u8bbe\u8ba1</li> </ul>"},{"location":"ops/MONITORING/#_39","title":"\ud83d\udcca \u76d1\u63a7\u548c\u544a\u8b66","text":"<ul> <li>\u544a\u8b66\u7ba1\u7406\u5668\u6587\u6863 - \u544a\u8b66\u7cfb\u7edf\u8be6\u7ec6\u914d\u7f6e</li> <li>\u6027\u80fd\u5206\u6790\u6307\u5357 - \u7cfb\u7edf\u6027\u80fd\u5206\u6790\u548c\u4f18\u5316</li> <li>\u65e5\u5fd7\u7ba1\u7406\u7b56\u7565 - \u65e5\u5fd7\u6536\u96c6\u548c\u7ba1\u7406\u89c4\u8303</li> <li>\u5065\u5eb7\u68c0\u67e5\u914d\u7f6e - \u670d\u52a1\u5065\u5eb7\u68c0\u67e5\u914d\u7f6e</li> </ul>"},{"location":"ops/MONITORING/#_40","title":"\ud83d\udee0\ufe0f \u5f00\u53d1\u548c\u6d4b\u8bd5","text":"<ul> <li>\u5f00\u53d1\u6307\u5357 - \u5f00\u53d1\u73af\u5883\u642d\u5efa\u548c\u7f16\u7801\u89c4\u8303</li> <li>CLAUDE.md - AI\u8f85\u52a9\u5f00\u53d1\u6307\u5bfc\u548c\u5de5\u4f5c\u6d41\u7a0b</li> <li>\u6d4b\u8bd5\u7b56\u7565\u6587\u6863 - \u5b8c\u6574\u7684\u6d4b\u8bd5\u7b56\u7565\u548c\u8d28\u91cf\u4fdd\u8bc1\u4f53\u7cfb</li> </ul>"},{"location":"ops/MONITORING/#cicd","title":"\ud83d\ude80 \u90e8\u7f72\u548cCI/CD","text":"<ul> <li>Staging\u73af\u5883\u914d\u7f6e - \u6d4b\u8bd5\u73af\u5883\u914d\u7f6e\u548c\u7ba1\u7406</li> <li>\u5bb9\u5668\u5316\u90e8\u7f72 - Docker\u5bb9\u5668\u5316\u90e8\u7f72\u6307\u5357</li> <li>CI/CD\u6d41\u6c34\u7ebf - \u6301\u7eed\u96c6\u6210\u548c\u90e8\u7f72\u6d41\u7a0b</li> </ul>"},{"location":"ops/MONITORING/#_41","title":"\ud83d\udcd6 \u9879\u76ee\u8d44\u6e90","text":"<ul> <li>\u9879\u76ee\u7d22\u5f15 - \u5b8c\u6574\u7684\u6587\u6863\u5bfc\u822a\u548c\u5165\u53e3</li> <li>\u5feb\u901f\u5f00\u59cb\u6307\u5357 - 5\u5206\u949f\u5feb\u901f\u4e0a\u624b\u6307\u5357</li> <li>\u672f\u8bed\u8868 - \u9879\u76ee\u4e13\u4e1a\u672f\u8bed\u548c\u6982\u5ff5\u5b9a\u4e49</li> <li>API\u6587\u6863 - REST API\u63a5\u53e3\u89c4\u8303</li> </ul> <p>\u6587\u6863\u7ef4\u62a4: \u672c\u76d1\u63a7\u6587\u6863\u4e0e\u7cfb\u7edf\u8fd0\u7ef4\u540c\u6b65\u66f4\u65b0\uff0c\u5982\u6709\u7591\u95ee\u8bf7\u53c2\u8003\u76f8\u5173\u6587\u6863\u6216\u8054\u7cfb\u8fd0\u7ef4\u56e2\u961f\u3002</p>"},{"location":"ops/PRODUCTION_READINESS_PLAN/","title":"\u751f\u4ea7\u73af\u5883\u95ee\u9898\u89e3\u51b3\u65b9\u6848\u8bbe\u8ba1","text":"<p>\u5236\u5b9a\u65e5\u671f: 2025-10-04 \u76ee\u6807: \u5c06\u9879\u76ee\u4eceD\u7ea7(41/100)\u63d0\u5347\u5230\u751f\u4ea7\u5c31\u7eea\u72b6\u6001A\u7ea7(90/100)</p>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_2","title":"\ud83d\udccb \u95ee\u9898\u6e05\u5355\u4e0e\u89e3\u51b3\u65b9\u6848","text":""},{"location":"ops/PRODUCTION_READINESS_PLAN/#1-30100-95100","title":"1. \ud83d\udd34 \u4f9d\u8d56\u7248\u672c\u51b2\u7a81 (\u5f53\u524d30/100 \u2192 \u76ee\u680795/100)","text":""},{"location":"ops/PRODUCTION_READINESS_PLAN/#_3","title":"\u95ee\u9898\u5206\u6790","text":"<pre><code>great-expectations 1.5.11 requires pandas&lt;2.2,&gt;=1.3.0\nfeast 0.53.0 requires numpy&lt;3,&gt;=2.0.0; pydantic==2.10.6\nopenlineage-python 1.37.0 requires requests&gt;=2.32.4\nsemgrep 1.139.0 requires rich~=13.5.2; urllib3~=2.0\nsafety 3.6.2 requires typer&gt;=0.16.0\n</code></pre>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_4","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u65b9\u6848A: \u7248\u672c\u9501\u5b9a (\u63a8\u8350)</p> <pre><code># requirements/production.txt\npandas==2.1.4  # \u517c\u5bb9great-expectations\nnumpy==2.0.0   # \u517c\u5bb9feast\npydantic==2.10.6  # \u517c\u5bb9feast\nrequests==2.32.4  # \u517c\u5bb9openlineage\nrich==13.5.2    # \u517c\u5bb9semgrep\nurllib3==2.0.7   # \u517c\u5bb9semgrep\ntyper==0.16.0   # \u517c\u5bb9safety\n</code></pre> <p>\u65b9\u6848B: \u5305\u66ff\u6362\u7b56\u7565</p> <pre><code># great-expectations \u2192 great-tables (\u66f4\u8f7b\u91cf)\n# feast \u2192 feast-feature-server (\u6309\u9700\u5b89\u88c5)\n# semgrep \u2192 bandit (Python\u4e13\u7528)\n</code></pre> <p>\u5b9e\u65bd\u6b65\u9aa4</p> <ol> <li>\u521b\u5efa\u4f9d\u8d56\u77e9\u9635\u8868</li> <li>\u4f7f\u7528 pip-tools \u9501\u5b9a\u7248\u672c</li> <li>\u5efa\u7acb\u4f9d\u8d56\u66f4\u65b0\u6d4b\u8bd5\u6d41\u7a0b</li> </ol>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#2-5100-85100","title":"2. \ud83d\udd34 \u6d4b\u8bd5\u6846\u67b6\u7f3a\u5931 (\u5f53\u524d5/100 \u2192 \u76ee\u680785/100)","text":""},{"location":"ops/PRODUCTION_READINESS_PLAN/#_5","title":"\u95ee\u9898\u5206\u6790","text":"<ul> <li>\u4ec5\u67093\u4e2a\u6d4b\u8bd5\u6587\u4ef6</li> <li>\u6d4b\u8bd5\u5bfc\u5165\u5931\u8d25</li> <li>\u65e0\u6d4b\u8bd5\u8986\u76d6\u7387</li> </ul>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_6","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u6d4b\u8bd5\u67b6\u6784\u8bbe\u8ba1</p> <pre><code>tests/\n\u251c\u2500\u2500 unit/              # \u5355\u5143\u6d4b\u8bd5 (70%)\n\u2502   \u251c\u2500\u2500 api/          # API\u5c42\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 services/     # \u4e1a\u52a1\u903b\u8f91\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 models/       # \u6570\u636e\u6a21\u578b\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 utils/        # \u5de5\u5177\u51fd\u6570\u6d4b\u8bd5\n\u251c\u2500\u2500 integration/       # \u96c6\u6210\u6d4b\u8bd5 (20%)\n\u2502   \u251c\u2500\u2500 api_db/       # API-\u6570\u636e\u5e93\u96c6\u6210\n\u2502   \u251c\u2500\u2500 cache/        # \u7f13\u5b58\u96c6\u6210\n\u2502   \u2514\u2500\u2500 external/     # \u5916\u90e8\u670d\u52a1\u96c6\u6210\n\u2514\u2500\u2500 e2e/              # \u7aef\u5230\u7aef\u6d4b\u8bd5 (10%)\n    \u251c\u2500\u2500 smoke/        # \u5192\u70df\u6d4b\u8bd5\n    \u2514\u2500\u2500 scenarios/    # \u4e1a\u52a1\u573a\u666f\u6d4b\u8bd5\n</code></pre> <p>\u6d4b\u8bd5\u5b9e\u65bd\u8ba1\u5212</p> <ol> <li>Week 1: \u8bbe\u7f6e\u6d4b\u8bd5\u57fa\u7840\u8bbe\u65bd</li> <li>\u914d\u7f6epytest.ini</li> <li>\u521b\u5efa\u6d4b\u8bd5\u5de5\u5382\u7c7b</li> <li> <p>\u8bbe\u7f6eMock\u670d\u52a1</p> </li> <li> <p>Week 2: \u6838\u5fc3\u529f\u80fd\u6d4b\u8bd5</p> </li> <li>\u5065\u5eb7\u68c0\u67e5API</li> <li>\u7528\u6237\u8ba4\u8bc1</li> <li> <p>\u57fa\u7840CRUD\u64cd\u4f5c</p> </li> <li> <p>Week 3: \u4e1a\u52a1\u903b\u8f91\u6d4b\u8bd5</p> </li> <li>\u9884\u6d4b\u6d41\u7a0b</li> <li>\u6570\u636e\u5904\u7406\u7ba1\u9053</li> <li> <p>\u5f02\u5e38\u5904\u7406</p> </li> <li> <p>Week 4: \u96c6\u6210\u548cE2E\u6d4b\u8bd5</p> </li> <li>\u5b8c\u6574\u7528\u6237\u6d41\u7a0b</li> <li>\u6027\u80fd\u6d4b\u8bd5</li> <li>\u5b89\u5168\u6d4b\u8bd5</li> </ol> <p>\u6d4b\u8bd5\u5de5\u5177\u94fe</p> <pre><code># requirements-test.txt\npytest==8.3.4\npytest-asyncio==0.25.0\npytest-cov==6.0.0\npytest-mock==3.14.0\nfactory-boy==3.3.1  # \u6d4b\u8bd5\u6570\u636e\u5de5\u5382\nfaker==30.8.1       # \u4f2a\u6570\u636e\u751f\u6210\nhttpx==0.28.1       # \u5f02\u6b65HTTP\u6d4b\u8bd5\n</code></pre>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#3-20100-95100","title":"3. \ud83d\udd34 \u5b89\u5168\u914d\u7f6e\u672a\u5b8c\u6210 (\u5f53\u524d20/100 \u2192 \u76ee\u680795/100)","text":""},{"location":"ops/PRODUCTION_READINESS_PLAN/#_7","title":"\u95ee\u9898\u5206\u6790","text":"<ul> <li>\u4f7f\u7528CHANGE_ME\u5360\u4f4d\u7b26</li> <li>\u7f3a\u5c11\u5bc6\u94a5\u7ba1\u7406</li> <li>\u65e0\u5b89\u5168\u7b56\u7565</li> </ul>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_8","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u5bc6\u94a5\u7ba1\u7406\u67b6\u6784</p> <pre><code>security/\n\u251c\u2500\u2500 key_management/     # \u5bc6\u94a5\u7ba1\u7406\n\u2502   \u251c\u2500\u2500 generate_keys.py\n\u2502   \u251c\u2500\u2500 rotate_keys.py\n\u2502   \u2514\u2500\u2500 audit_keys.py\n\u251c\u2500\u2500 policies/          # \u5b89\u5168\u7b56\u7565\n\u2502   \u251c\u2500\u2500 password_policy.json\n\u2502   \u251c\u2500\u2500 access_policy.json\n\u2502   \u2514\u2500\u2500 encryption_policy.json\n\u2514\u2500\u2500 scripts/          # \u81ea\u52a8\u5316\u811a\u672c\n    \u251c\u2500\u2500 setup_security.py\n    \u2514\u2500\u2500 validate_security.py\n</code></pre> <p>\u5b89\u5168\u5b9e\u65bd\u65b9\u6848</p> <p>\u6b65\u9aa41: \u5bc6\u94a5\u751f\u6210\u81ea\u52a8\u5316</p> <pre><code># scripts/security/setup_security.py\nimport secrets\nimport argparse\nfrom pathlib import Path\n\ndef generate_secure_keys():\n    \"\"\"\u751f\u6210\u6240\u6709\u5fc5\u9700\u7684\u5b89\u5168\u5bc6\u94a5\"\"\"\n    return {\n        \"SECRET_KEY\": secrets.token_urlsafe(64),\n        \"JWT_SECRET_KEY\": secrets.token_urlsafe(64),\n        \"DB_ENCRYPTION_KEY\": secrets.token_bytes(32).hex(),\n        \"REDIS_PASSWORD\": secrets.token_urlsafe(32),\n        \"MLFLOW_TRACKING_PASSWORD\": secrets.token_urlsafe(32)\n    }\n</code></pre> <p>\u6b65\u9aa42: \u73af\u5883\u914d\u7f6e\u6a21\u677f</p> <pre><code># .env.production.template\n# === \u5e94\u7528\u5b89\u5168\u914d\u7f6e ===\nSECRET_KEY=${SECRET_KEY}  # \u5fc5\u987b\u8bbe\u7f6e\nJWT_SECRET_KEY=${JWT_SECRET_KEY}  # \u5fc5\u987b\u8bbe\u7f6e\nALGORITHM=HS256\nACCESS_TOKEN_EXPIRE_MINUTES=30\n\n# === \u6570\u636e\u5e93\u5b89\u5168 ===\nDATABASE_URL=postgresql+asyncpg://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}\nDB_ENCRYPTION_KEY=${DB_ENCRYPTION_KEY}\n\n# === Redis\u5b89\u5168 ===\nREDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/0\n</code></pre> <p>\u6b65\u9aa43: \u5b89\u5168\u68c0\u67e5\u6e05\u5355</p> <ul> <li> \u5bc6\u94a5\u957f\u5ea6 \u2265 32\u5b57\u7b26</li> <li> \u4f7f\u7528HTTPS\u4f20\u8f93</li> <li> \u5bc6\u94a5\u8f6e\u6362\u7b56\u7565</li> <li> \u5bc6\u94a5\u5ba1\u8ba1\u65e5\u5fd7</li> <li> \u8bbf\u95ee\u63a7\u5236\u6700\u5c0f\u6743\u9650</li> </ul>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#4-50100-90100","title":"4. \ud83d\udd34 \u73af\u5883\u914d\u7f6e\u6df7\u4e71 (\u5f53\u524d50/100 \u2192 \u76ee\u680790/100)","text":""},{"location":"ops/PRODUCTION_READINESS_PLAN/#_9","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>Docker\u5316\u65b9\u6848</p> <pre><code># Dockerfile.production\nFROM python:3.11-slim\n\n# \u5b89\u5168\u914d\u7f6e\nRUN groupadd -r appuser &amp;&amp; useradd -r -g appuser appuser\nRUN mkdir -p /app &amp;&amp; chown appuser:appuser /app\n\nWORKDIR /app\nCOPY requirements/production.txt .\nRUN pip install --no-cache-dir -r production.txt\n\nCOPY src/ ./src/\nCOPY config/ ./config/\n\nUSER appuser\nEXPOSE 8000\n\nCMD [\"uvicorn\", \"src.main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n</code></pre> <p>\u73af\u5883\u914d\u7f6e\u7ba1\u7406</p> <pre><code>config/\n\u251c\u2500\u2500 environments/\n\u2502   \u251c\u2500\u2500 development.yaml\n\u2502   \u251c\u2500\u2500 testing.yaml\n\u2502   \u251c\u2500\u2500 staging.yaml\n\u2502   \u2514\u2500\u2500 production.yaml\n\u251c\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 database.yaml\n\u2502   \u251c\u2500\u2500 redis.yaml\n\u2502   \u2514\u2500\u2500 mlflow.yaml\n\u2514\u2500\u2500 scripts/\n    \u251c\u2500\u2500 validate_config.py\n    \u2514\u2500\u2500 sync_config.py\n</code></pre>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#5-cicd-0100-90100","title":"5. \ud83d\udd34 CI/CD\u9a8c\u8bc1\u7f3a\u5931 (\u5f53\u524d0/100 \u2192 \u76ee\u680790/100)","text":""},{"location":"ops/PRODUCTION_READINESS_PLAN/#_10","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>CI/CD\u6d41\u6c34\u7ebf\u8bbe\u8ba1</p> <pre><code># .github/workflows/production-ready.yml\nname: Production Readiness Check\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  security-scan:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Run security scan\n        run: |\n          pip-audit --requirement requirements.txt\n          bandit -r src/ -f json -o security-report.json\n          semgrep --config=auto src/\n\n  dependency-check:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Check dependencies\n        run: |\n          pip check\n          pip install pip-tools\n          pip-compile requirements/production.txt\n          # \u68c0\u67e5\u662f\u5426\u6709\u51b2\u7a81\n\n  test-coverage:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Run tests with coverage\n        run: |\n          pytest tests/ --cov=src --cov-report=xml --cov-fail-under=80\n          coverage xml\n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n\n  security-config-validation:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Validate security config\n        run: |\n          python scripts/security/validate_security.py --env=production\n          # \u68c0\u67e5\u5bc6\u94a5\u5f3a\u5ea6\u3001\u914d\u7f6e\u5b8c\u6574\u6027\u7b49\n\n  integration-tests:\n    runs-on: ubuntu-latest\n    services:\n      postgres:\n        image: postgres:16\n        env:\n          POSTGRES_PASSWORD: test\n        options: &gt;-\n          --health-cmd pg_isready\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n      redis:\n        image: redis:7\n        options: &gt;-\n          --health-cmd \"redis-cli ping\"\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n    steps:\n      - uses: actions/checkout@v4\n      - name: Run integration tests\n        run: |\n          pytest tests/integration/ -v --tb=short\n</code></pre>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_11","title":"\ud83d\udcc5 \u5b9e\u65bd\u65f6\u95f4\u7ebf","text":""},{"location":"ops/PRODUCTION_READINESS_PLAN/#phase-1-week-1","title":"Phase 1: \u57fa\u7840\u8bbe\u65bd (Week 1)","text":"<ul> <li> \u521b\u5efa\u4f9d\u8d56\u9501\u5b9a\u6587\u4ef6</li> <li> \u8bbe\u7f6e\u6d4b\u8bd5\u6846\u67b6</li> <li> \u914d\u7f6eDocker\u73af\u5883</li> <li> \u5efa\u7acbCI/CD\u57fa\u7840</li> </ul>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#phase-2-week-2-3","title":"Phase 2: \u6838\u5fc3\u6d4b\u8bd5 (Week 2-3)","text":"<ul> <li> \u7f16\u5199\u5355\u5143\u6d4b\u8bd5(\u76ee\u680760%\u8986\u76d6\u7387)</li> <li> \u5b9e\u73b0\u96c6\u6210\u6d4b\u8bd5</li> <li> \u6dfb\u52a0\u5b89\u5168\u6d4b\u8bd5</li> <li> \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5</li> </ul>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#phase-3-week-3","title":"Phase 3: \u5b89\u5168\u52a0\u56fa (Week 3)","text":"<ul> <li> \u5bc6\u94a5\u7ba1\u7406\u7cfb\u7edf</li> <li> \u5b89\u5168\u7b56\u7565\u5b9e\u65bd</li> <li> \u6f0f\u6d1e\u626b\u63cf\u96c6\u6210</li> <li> \u5b89\u5168\u5ba1\u8ba1\u81ea\u52a8\u5316</li> </ul>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#phase-4-week-4","title":"Phase 4: \u751f\u4ea7\u9a8c\u8bc1 (Week 4)","text":"<ul> <li> \u7aef\u5230\u7aef\u6d4b\u8bd5</li> <li> \u8d1f\u8f7d\u6d4b\u8bd5</li> <li> \u707e\u96be\u6062\u590d\u6d4b\u8bd5</li> <li> \u751f\u4ea7\u73af\u5883\u6f14\u7ec3</li> </ul>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_12","title":"\ud83c\udfaf \u6210\u529f\u6307\u6807","text":"\u6307\u6807 \u5f53\u524d\u503c \u76ee\u6807\u503c \u68c0\u67e5\u65b9\u5f0f \u6d4b\u8bd5\u8986\u76d6\u7387 5% 85% pytest-cov \u4f9d\u8d56\u51b2\u7a81 6\u4e2a 0\u4e2a pip check \u5b89\u5168\u6f0f\u6d1e \u672a\u77e5 0\u4e2a pip-audit CI/CD\u901a\u8fc7\u7387 0% 100% GitHub Actions \u6784\u5efa\u65f6\u95f4 \u672a\u77e5 &lt;5\u5206\u949f time docker build \u90e8\u7f72\u65f6\u95f4 \u672a\u77e5 &lt;10\u5206\u949f \u90e8\u7f72\u811a\u672c"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_13","title":"\ud83d\udea8 \u98ce\u9669\u7ba1\u63a7","text":""},{"location":"ops/PRODUCTION_READINESS_PLAN/#_14","title":"\u9ad8\u98ce\u9669\u9879","text":"<ol> <li>\u4f9d\u8d56\u5347\u7ea7\u53ef\u80fd\u5bfc\u81f4\u529f\u80fd\u4e0d\u517c\u5bb9</li> <li>\u7f13\u89e3: \u5168\u9762\u6d4b\u8bd5 + \u7248\u672c\u9501\u5b9a</li> <li>\u6d4b\u8bd5\u6846\u67b6\u91cd\u5199\u5de5\u4f5c\u91cf\u5de8\u5927</li> <li>\u7f13\u89e3: \u5206\u9636\u6bb5\u5b9e\u65bd + \u5e76\u884c\u5f00\u53d1</li> <li>\u5b89\u5168\u914d\u7f6e\u5931\u8bef\u53ef\u80fd\u5bfc\u81f4\u751f\u4ea7\u4e8b\u6545</li> <li>\u7f13\u89e3: \u591a\u91cd\u9a8c\u8bc1 + \u81ea\u52a8\u5316\u68c0\u67e5</li> </ol>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_15","title":"\u5e94\u6025\u9884\u6848","text":"<ol> <li>\u4f9d\u8d56\u56de\u6eda\u673a\u5236 - \u4fdd\u7559\u65e7\u7248\u672c\u914d\u7f6e</li> <li>\u6d4b\u8bd5\u5206\u6279\u90e8\u7f72 - \u7070\u5ea6\u53d1\u5e03\u7b56\u7565</li> <li>\u5b89\u5168\u70ed\u4fee\u590d - \u5feb\u901f\u54cd\u5e94\u6d41\u7a0b</li> </ol>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_16","title":"\ud83d\udcde \u8d23\u4efb\u5206\u914d","text":"\u89d2\u8272 \u804c\u8d23 \u65f6\u95f4\u6295\u5165 DevOps\u5de5\u7a0b\u5e08 CI/CD\u3001Docker\u3001\u73af\u5883\u914d\u7f6e 40% \u6d4b\u8bd5\u5de5\u7a0b\u5e08 \u6d4b\u8bd5\u6846\u67b6\u3001\u7528\u4f8b\u7f16\u5199 35% \u5b89\u5168\u5de5\u7a0b\u5e08 \u5bc6\u94a5\u7ba1\u7406\u3001\u5b89\u5168\u626b\u63cf 15% \u5168\u6808\u5f00\u53d1 \u4ee3\u7801\u5ba1\u67e5\u3001\u96c6\u6210\u652f\u6301 10%"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_17","title":"\ud83d\udee0\ufe0f \u5b9e\u65bd\u5de5\u5177","text":"<p>\u6211\u5df2\u7ecf\u521b\u5efa\u4e86\u4ee5\u4e0b\u81ea\u52a8\u5316\u5de5\u5177\u6765\u52a0\u901f\u5b9e\u65bd\uff1a</p>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#1","title":"1. \ud83d\udd10 \u5b89\u5168\u914d\u7f6e\u81ea\u52a8\u5316","text":"<p>\u811a\u672c: <code>scripts/security/setup_security.py</code></p> <ul> <li>\u81ea\u52a8\u751f\u6210\u6240\u6709\u5b89\u5168\u5bc6\u94a5</li> <li>\u521b\u5efa\u73af\u5883\u914d\u7f6e\u6587\u4ef6</li> <li>\u5bc6\u94a5\u5f3a\u5ea6\u9a8c\u8bc1</li> <li>\u5907\u4efd\u52a0\u5bc6</li> </ul> <pre><code># \u751f\u6210\u751f\u4ea7\u73af\u5883\u5b89\u5168\u914d\u7f6e\npython scripts/security/setup_security.py --env production\n</code></pre>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#2","title":"2. \ud83d\udd27 \u4f9d\u8d56\u51b2\u7a81\u89e3\u51b3\u5668","text":"<p>\u811a\u672c: <code>scripts/dependency/resolve_conflicts.py</code></p> <ul> <li>\u81ea\u52a8\u68c0\u6d4b\u4f9d\u8d56\u51b2\u7a81</li> <li>\u667a\u80fd\u7248\u672c\u9009\u62e9</li> <li>\u751f\u6210\u9501\u5b9a\u6587\u4ef6</li> <li>\u521b\u5efa\u4f9d\u8d56\u77e9\u9635</li> </ul> <pre><code># \u89e3\u51b3\u6240\u6709\u4f9d\u8d56\u51b2\u7a81\npython scripts/dependency/resolve_conflicts.py\n</code></pre>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#3","title":"3. \ud83e\uddea \u6d4b\u8bd5\u6846\u67b6\u6784\u5efa\u5668","text":"<p>\u811a\u672c: <code>scripts/testing/build_test_framework.py</code></p> <ul> <li>\u521b\u5efa\u76ee\u5f55\u7ed3\u6784</li> <li>\u751f\u6210\u6d4b\u8bd5\u6a21\u677f</li> <li>\u914d\u7f6epytest</li> <li>\u521b\u5efa\u6d4b\u8bd5\u5de5\u5382</li> </ul> <pre><code># \u6784\u5efa\u5b8c\u6574\u6d4b\u8bd5\u6846\u67b6\npython scripts/testing/build_test_framework.py\n</code></pre>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#4","title":"4. \ud83d\ude80 \u81ea\u52a8\u5316\u6d41\u6c34\u7ebf","text":"<p>\u811a\u672c: <code>scripts/production/automation_pipeline.py</code></p> <ul> <li>\u4e00\u952e\u6267\u884c\u6240\u6709\u68c0\u67e5</li> <li>\u751f\u6210\u7efc\u5408\u62a5\u544a</li> <li>\u63d0\u4f9b\u6539\u8fdb\u5efa\u8bae</li> <li>\u8ddf\u8e2a\u8fdb\u5ea6</li> </ul> <pre><code># \u8fd0\u884c\u5b8c\u6574\u6d41\u6c34\u7ebf\npython scripts/production/automation_pipeline.py --env production\n</code></pre>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_18","title":"\ud83d\udca1 \u957f\u671f\u89c4\u5212","text":"<ol> <li>\u81ea\u52a8\u5316\u4f9d\u8d56\u66f4\u65b0 - \u4f7f\u7528Dependabot</li> <li>\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1 - TDD\u5de5\u4f5c\u6d41</li> <li>\u5b89\u5168\u5373\u4ee3\u7801 - Security as Code</li> <li>\u53ef\u89c2\u6d4b\u6027 - \u76d1\u63a7\u3001\u65e5\u5fd7\u3001\u8ffd\u8e2a</li> </ol>"},{"location":"ops/PRODUCTION_READINESS_PLAN/#_19","title":"\ud83d\ude80 \u7acb\u5373\u884c\u52a8","text":"<p>\u9009\u98791: \u5feb\u901f\u4fee\u590d\uff081\u5929\uff09</p> <pre><code># \u8fd0\u884c\u81ea\u52a8\u5316\u6d41\u6c34\u7ebf\npython scripts/production/automation_pipeline.py --env production\n</code></pre> <p>\u9009\u98792: \u5206\u6b65\u5b9e\u65bd\uff081\u5468\uff09</p> <ol> <li>Day 1: \u4f9d\u8d56\u51b2\u7a81\u89e3\u51b3</li> <li>Day 2: \u5b89\u5168\u914d\u7f6e\u8bbe\u7f6e</li> <li>Day 3: \u6d4b\u8bd5\u6846\u67b6\u6784\u5efa</li> <li>Day 4: \u914d\u7f6e\u9a8c\u8bc1</li> <li>Day 5: CI/CD\u5b8c\u5584</li> </ol> <p>\u9009\u98793: \u5b8c\u6574\u65b9\u6848\uff084\u5468\uff09 \u6309\u7167Phase 1-4\u7684\u65f6\u95f4\u7ebf\u9010\u6b65\u5b9e\u65bd</p> <p>\u9884\u671f\u5b8c\u6210: \u6839\u636e\u9009\u62e9\u7684\u65b9\u6848\uff0c1\u5929\u52304\u5468\u5185\u8fbe\u5230\u751f\u4ea7\u5c31\u7eea\u72b6\u6001</p>"},{"location":"ops/monitoring/","title":"\ud83d\udd0d \u76d1\u63a7\u7cfb\u7edf\u6587\u6863","text":""},{"location":"ops/monitoring/#_2","title":"\u6982\u8ff0","text":"<p>FootballPrediction\u9879\u76ee\u5185\u7f6e\u4e86\u5b8c\u6574\u7684\u76d1\u63a7\u7cfb\u7edf\uff0c\u63d0\u4f9b\u7cfb\u7edf\u6027\u80fd\u6307\u6807\u3001\u4e1a\u52a1\u7edf\u8ba1\u548c\u670d\u52a1\u5065\u5eb7\u72b6\u6001\u76d1\u63a7\u3002</p>"},{"location":"ops/monitoring/#_3","title":"\u76d1\u63a7\u7aef\u70b9","text":""},{"location":"ops/monitoring/#1-apiv1metrics","title":"1. \ud83d\udcca \u6027\u80fd\u6307\u6807 - <code>/api/v1/metrics</code>","text":"<p>\u83b7\u53d6\u8be6\u7ec6\u7684\u7cfb\u7edf\u6027\u80fd\u548c\u4e1a\u52a1\u6307\u6807\u3002</p>"},{"location":"ops/monitoring/#_4","title":"\u54cd\u5e94\u793a\u4f8b","text":"<pre><code>{\n  \"status\": \"ok\",\n  \"response_time_ms\": 1033.08,\n  \"system\": {\n    \"cpu_percent\": 0.5,\n    \"memory\": {\n      \"total\": 8328015872,\n      \"available\": 3384762368,\n      \"percent\": 59.4,\n      \"used\": 4725329920\n    },\n    \"disk\": {\n      \"total\": 1081101176832,\n      \"free\": 1003440873472,\n      \"percent\": 2.2\n    },\n    \"load_average\": [0.87, 0.99, 0.77]\n  },\n  \"database\": {\n    \"healthy\": true,\n    \"response_time_ms\": 0.87,\n    \"statistics\": {\n      \"teams_count\": 20,\n      \"matches_count\": 1500,\n      \"predictions_count\": 8000,\n      \"active_connections\": 5\n    }\n  },\n  \"runtime\": {\n    \"uptime_seconds\": 1.03,\n    \"timestamp\": \"2025-09-09T04:03:29.135646\",\n    \"python_version\": \"3.11.13\",\n    \"environment\": \"development\"\n  },\n  \"business\": {\n    \"24h_predictions\": 150,\n    \"upcoming_matches_7d\": 25,\n    \"model_accuracy_30d\": 78.5,\n    \"last_updated\": \"2025-09-09T04:03:29.136691\"\n  }\n}\n</code></pre>"},{"location":"ops/monitoring/#_5","title":"\u6307\u6807\u8bf4\u660e","text":"<p>\u7cfb\u7edf\u6307\u6807 (system)</p> <ul> <li><code>cpu_percent</code>: CPU\u4f7f\u7528\u7387\u767e\u5206\u6bd4</li> <li><code>memory.total</code>: \u603b\u5185\u5b58\u5bb9\u91cf(\u5b57\u8282)</li> <li><code>memory.available</code>: \u53ef\u7528\u5185\u5b58(\u5b57\u8282)</li> <li><code>memory.percent</code>: \u5185\u5b58\u4f7f\u7528\u7387\u767e\u5206\u6bd4</li> <li><code>memory.used</code>: \u5df2\u4f7f\u7528\u5185\u5b58(\u5b57\u8282)</li> <li><code>disk.total</code>: \u603b\u78c1\u76d8\u5bb9\u91cf(\u5b57\u8282)</li> <li><code>disk.free</code>: \u53ef\u7528\u78c1\u76d8\u7a7a\u95f4(\u5b57\u8282)</li> <li><code>disk.percent</code>: \u78c1\u76d8\u4f7f\u7528\u7387\u767e\u5206\u6bd4</li> <li><code>load_average</code>: \u7cfb\u7edf\u8d1f\u8f7d\u5747\u503c [1\u5206\u949f, 5\u5206\u949f, 15\u5206\u949f]</li> </ul> <p>\u6570\u636e\u5e93\u6307\u6807 (database)</p> <ul> <li><code>healthy</code>: \u6570\u636e\u5e93\u8fde\u63a5\u72b6\u6001</li> <li><code>response_time_ms</code>: \u6570\u636e\u5e93\u54cd\u5e94\u65f6\u95f4(\u6beb\u79d2)</li> <li><code>statistics.teams_count</code>: \u7403\u961f\u603b\u6570</li> <li><code>statistics.matches_count</code>: \u6bd4\u8d5b\u603b\u6570</li> <li><code>statistics.predictions_count</code>: \u9884\u6d4b\u603b\u6570</li> <li><code>statistics.active_connections</code>: \u6d3b\u8dc3\u8fde\u63a5\u6570</li> </ul> <p>\u8fd0\u884c\u65f6\u6307\u6807 (runtime)</p> <ul> <li><code>uptime_seconds</code>: \u5e94\u7528\u8fd0\u884c\u65f6\u95f4(\u79d2)</li> <li><code>timestamp</code>: \u5f53\u524d\u65f6\u95f4\u6233</li> <li><code>python_version</code>: Python\u7248\u672c</li> <li><code>environment</code>: \u8fd0\u884c\u73af\u5883</li> </ul> <p>\u4e1a\u52a1\u6307\u6807 (business)</p> <ul> <li><code>24h_predictions</code>: 24\u5c0f\u65f6\u5185\u9884\u6d4b\u6570\u91cf</li> <li><code>upcoming_matches_7d</code>: 7\u5929\u5185\u5373\u5c06\u5f00\u59cb\u7684\u6bd4\u8d5b\u6570</li> <li><code>model_accuracy_30d</code>: 30\u5929\u5185\u6a21\u578b\u51c6\u786e\u7387(%)</li> <li><code>last_updated</code>: \u4e1a\u52a1\u6307\u6807\u66f4\u65b0\u65f6\u95f4</li> </ul>"},{"location":"ops/monitoring/#2-apiv1status","title":"2. \ud83c\udfe5 \u670d\u52a1\u72b6\u6001 - <code>/api/v1/status</code>","text":"<p>\u5feb\u901f\u68c0\u67e5\u6240\u6709\u5173\u952e\u670d\u52a1\u72b6\u6001\uff0c\u9002\u7528\u4e8e\u8d1f\u8f7d\u5747\u8861\u5668\u5065\u5eb7\u68c0\u67e5\u3002</p>"},{"location":"ops/monitoring/#_6","title":"\u54cd\u5e94\u793a\u4f8b","text":"<pre><code>{\n  \"status\": \"healthy\",\n  \"timestamp\": \"2025-09-09T04:03:33.346010\",\n  \"services\": {\n    \"api\": \"healthy\",\n    \"database\": \"healthy\",\n    \"cache\": \"healthy\"\n  }\n}\n</code></pre>"},{"location":"ops/monitoring/#_7","title":"\u72b6\u6001\u8bf4\u660e","text":"<ul> <li><code>healthy</code>: \u670d\u52a1\u6b63\u5e38\u8fd0\u884c</li> <li><code>degraded</code>: \u90e8\u5206\u670d\u52a1\u5f02\u5e38\uff0c\u4f46\u7cfb\u7edf\u4ecd\u53ef\u7528</li> <li><code>unhealthy</code>: \u5173\u952e\u670d\u52a1\u6545\u969c</li> </ul>"},{"location":"ops/monitoring/#_8","title":"\u4f7f\u7528\u573a\u666f","text":""},{"location":"ops/monitoring/#1","title":"1. \u6027\u80fd\u76d1\u63a7","text":"<pre><code># \u83b7\u53d6\u7cfb\u7edf\u6027\u80fd\u6307\u6807\ncurl http://localhost:8000/api/v1/metrics | jq .system\n\n# \u76d1\u63a7\u5185\u5b58\u4f7f\u7528\u7387\ncurl -s http://localhost:8000/api/v1/metrics | jq .system.memory.percent\n</code></pre>"},{"location":"ops/monitoring/#2","title":"2. \u5065\u5eb7\u68c0\u67e5","text":"<pre><code># \u8d1f\u8f7d\u5747\u8861\u5668\u5065\u5eb7\u68c0\u67e5\ncurl -f http://localhost:8000/api/v1/status\n\n# \u68c0\u67e5\u6570\u636e\u5e93\u72b6\u6001\ncurl -s http://localhost:8000/api/v1/metrics | jq .database.healthy\n</code></pre>"},{"location":"ops/monitoring/#3","title":"3. \u4e1a\u52a1\u76d1\u63a7","text":"<pre><code># \u67e5\u770b\u6a21\u578b\u51c6\u786e\u7387\ncurl -s http://localhost:8000/api/v1/metrics | jq .business.model_accuracy_30d\n\n# \u67e5\u770b\u6700\u8fd1\u6d3b\u52a8\ncurl -s http://localhost:8000/api/v1/metrics | jq .business\n</code></pre>"},{"location":"ops/monitoring/#_9","title":"\u76d1\u63a7\u96c6\u6210","text":""},{"location":"ops/monitoring/#prometheus","title":"Prometheus\u96c6\u6210","text":"<p>\u76d1\u63a7\u7aef\u70b9\u517c\u5bb9Prometheus\u683c\u5f0f\uff0c\u53ef\u76f4\u63a5\u7528\u4e8e\u6307\u6807\u6536\u96c6\u3002</p>"},{"location":"ops/monitoring/#_10","title":"\u544a\u8b66\u914d\u7f6e","text":"<p>\u63a8\u8350\u544a\u8b66\u89c4\u5219\uff1a</p> <ul> <li>CPU\u4f7f\u7528\u7387 &gt; 80%</li> <li>\u5185\u5b58\u4f7f\u7528\u7387 &gt; 85%</li> <li>\u78c1\u76d8\u4f7f\u7528\u7387 &gt; 90%</li> <li>\u6570\u636e\u5e93\u54cd\u5e94\u65f6\u95f4 &gt; 1000ms</li> <li>\u4efb\u4f55\u670d\u52a1\u72b6\u6001\u4e3a unhealthy</li> </ul>"},{"location":"ops/monitoring/#_11","title":"\u65e5\u5fd7\u76d1\u63a7","text":"<p>\u76d1\u63a7API\u4f1a\u8bb0\u5f55\u8be6\u7ec6\u65e5\u5fd7\uff0c\u5305\u62ec\uff1a</p> <ul> <li>\u6307\u6807\u83b7\u53d6\u5f02\u5e38</li> <li>\u6570\u636e\u5e93\u8fde\u63a5\u95ee\u9898</li> <li>\u4e1a\u52a1\u6307\u6807\u8ba1\u7b97\u9519\u8bef</li> </ul>"},{"location":"ops/monitoring/#_12","title":"\u6027\u80fd\u8003\u8651","text":"<ul> <li>\u76d1\u63a7API\u54cd\u5e94\u65f6\u95f4\u901a\u5e38 &lt; 2\u79d2</li> <li>\u7cfb\u7edf\u6307\u6807\u83b7\u53d6\u67091\u79d2CPU\u91c7\u6837\u65f6\u95f4</li> <li>\u6570\u636e\u5e93\u67e5\u8be2\u4f7f\u7528\u8fde\u63a5\u6c60\uff0c\u5f71\u54cd\u8f83\u5c0f</li> <li>\u5efa\u8bae\u76d1\u63a7\u9891\u7387\uff1a30-60\u79d2\u4e00\u6b21</li> </ul>"},{"location":"ops/monitoring/#_13","title":"\u6545\u969c\u6392\u9664","text":""},{"location":"ops/monitoring/#_14","title":"\u5e38\u89c1\u95ee\u9898","text":"<ol> <li>\u76d1\u63a7\u7aef\u70b9404</li> <li>\u68c0\u67e5\u8def\u7531\u662f\u5426\u6b63\u786e\u6ce8\u518c</li> <li> <p>\u786e\u8ba4\u5e94\u7528\u5df2\u91cd\u542f\u52a0\u8f7d\u65b0\u8def\u7531</p> </li> <li> <p>\u6570\u636e\u5e93\u6307\u6807\u4e3anull</p> </li> <li>\u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\u6743\u9650</li> <li> <p>\u786e\u8ba4\u76f8\u5173\u8868\u5df2\u521b\u5efa</p> </li> <li> <p>\u7cfb\u7edf\u6307\u6807\u5f02\u5e38</p> </li> <li>\u68c0\u67e5psutil\u6a21\u5757\u662f\u5426\u5b89\u88c5</li> <li>\u786e\u8ba4\u5bb9\u5668\u6709\u8db3\u591f\u6743\u9650\u8bfb\u53d6\u7cfb\u7edf\u4fe1\u606f</li> </ol>"},{"location":"ops/monitoring/#_15","title":"\u8c03\u8bd5\u547d\u4ee4","text":"<pre><code># \u68c0\u67e5\u76d1\u63a7API\ncurl -v http://localhost:8000/api/v1/status\n\n# \u67e5\u770b\u5e94\u7528\u65e5\u5fd7\ndocker-compose logs app | grep -i monitoring\n\n# \u6d4b\u8bd5\u6570\u636e\u5e93\u8fde\u63a5\ncurl -s http://localhost:8000/health | jq .checks.database\n</code></pre>"},{"location":"ops/runbooks/","title":"Operational Runbooks Index","text":"<p>This directory contains operational runbooks for the Football Prediction System.</p>"},{"location":"ops/runbooks/#available-runbooks","title":"Available Runbooks","text":"<ol> <li>Disaster Recovery Runbook - Procedures for recovering from system failures and data loss</li> <li>Data Migration Runbook - Procedures for migrating data and upgrading the system</li> </ol>"},{"location":"ops/runbooks/#usage","title":"Usage","text":"<p>Each runbook contains step-by-step procedures for specific operational tasks. Follow the procedures carefully and ensure you have the required permissions before executing any commands.</p>"},{"location":"ops/runbooks/#contributing","title":"Contributing","text":"<p>To add a new runbook:</p> <ol> <li>Create a new markdown file with a descriptive name</li> <li>Follow the template structure used in existing runbooks</li> <li>Include prerequisites, procedures, validation steps, and rollback procedures</li> <li>Add the new runbook to this index</li> </ol>"},{"location":"ops/runbooks/#contact","title":"Contact","text":"<p>For questions or issues with these runbooks, contact the operations team at ops@footballprediction.com.</p>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/","title":"Data Migration Runbook","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#1-overview","title":"1. Overview","text":"<p>This runbook provides procedures for migrating data in the Football Prediction System, including schema changes, data model updates, and system upgrades.</p>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#2-pre-migration-preparation","title":"2. Pre-Migration Preparation","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#21-migration-planning","title":"2.1 Migration Planning","text":"<ol> <li>Define Migration Scope</li> <li>Identify tables and data to be migrated</li> <li>Determine migration type (schema-only, data-only, or both)</li> <li> <p>Estimate migration time and resources required</p> </li> <li> <p>Create Migration Plan</p> </li> </ol> <pre><code># Migration Plan Template\n\n## Migration Details\n- Version: [from_version] -&gt; [to_version]\n- Date: [migration_date]\n- Downtime Window: [start_time] - [end_time]\n- Migration Type: [schema/data/both]\n\n## Affected Components\n- [component_1]\n- [component_2]\n\n## Rollback Plan\n- [rollback_steps]\n\n## Validation Criteria\n- [validation_steps]\n</code></pre> <ol> <li>Backup Current System</li> </ol> <pre><code># Perform full backup before migration\n./scripts/backup.sh --type full --database football_prediction\n\n# Verify backup integrity\n./scripts/restore.sh --validate --backup-file /backup/football_db/full/latest_backup.sql.gz\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#22-environment-preparation","title":"2.2 Environment Preparation","text":"<ol> <li>Prepare Migration Environment</li> </ol> <pre><code># Create migration branch\ngit checkout -b migration-v[version]\n\n# Update dependencies\npip install -r requirements.txt\n\n# Run tests\npytest tests/migration/\n</code></pre> <ol> <li>Test Migration on Staging</li> </ol> <pre><code># Deploy to staging environment\ndocker-compose -f docker-compose.staging.yml up -d\n\n# Run migration\nalembic upgrade head\n\n# Validate migration\npython scripts/validate_migration.py\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#3-migration-procedures","title":"3. Migration Procedures","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#31-database-schema-migration","title":"3.1 Database Schema Migration","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#311-alembic-migration","title":"3.1.1 Alembic Migration","text":"<ol> <li>Generate Migration Script</li> </ol> <pre><code># Generate new migration script\nalembic revision --autogenerate -m \"Add new prediction metrics columns\"\n\n# Review generated migration script\ncat alembic/versions/[timestamp]_add_new_prediction_metrics_columns.py\n</code></pre> <ol> <li>Customize Migration Script</li> </ol> <pre><code># alembic/versions/[timestamp]_add_new_prediction_metrics_columns.py\nfrom alembic import op\nimport sqlalchemy as sa\n\ndef upgrade():\n    # Add new columns\n    op.add_column('predictions', sa.Column('model_accuracy', sa.Float(), nullable=True))\n    op.add_column('predictions', sa.Column('feature_importance', sa.JSON(), nullable=True))\n\n    # Add indexes\n    op.create_index('idx_predictions_model_accuracy', 'predictions', ['model_accuracy'])\n\n    # Update existing records\n    op.execute(\"\"\"\n        UPDATE predictions\n        SET model_accuracy = 0.85\n        WHERE model_version = '1.0'\n    \"\"\")\n\ndef downgrade():\n    # Remove columns\n    op.drop_column('predictions', 'feature_importance')\n    op.drop_column('predictions', 'model_accuracy')\n\n    # Remove indexes\n    op.drop_index('idx_predictions_model_accuracy', table_name='predictions')\n</code></pre> <ol> <li>Test Migration Script</li> </ol> <pre><code># Test upgrade\nalembic upgrade +1\n\n# Test downgrade\nalembic downgrade -1\n\n# Test full cycle\nalembic upgrade head\nalembic downgrade base\nalembic upgrade head\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#312-manual-schema-changes","title":"3.1.2 Manual Schema Changes","text":"<ol> <li>Apply Schema Changes</li> </ol> <pre><code># Apply changes directly (for complex migrations)\npsql -h localhost -p 5432 -U football_user -d football_prediction -f migrations/schema_changes.sql\n</code></pre> <ol> <li>Verify Schema Changes</li> </ol> <pre><code>-- migrations/verify_schema.sql\n-- Check table structure\n\\d predictions\n\n-- Check constraints\nSELECT constraint_name, constraint_type\nFROM information_schema.table_constraints\nWHERE table_name = 'predictions';\n\n-- Check indexes\nSELECT indexname, indexdef\nFROM pg_indexes\nWHERE tablename = 'predictions';\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#32-data-migration","title":"3.2 Data Migration","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#321-batch-data-migration","title":"3.2.1 Batch Data Migration","text":"<ol> <li>Create Data Migration Script</li> </ol> <pre><code># scripts/migrate_prediction_data.py\nimport asyncio\nimport logging\nfrom sqlalchemy import select, update\nfrom src.database.connection import DatabaseManager\nfrom src.database.models.predictions import Predictions\n\nlogger = logging.getLogger(__name__)\n\nasync def migrate_prediction_data(batch_size=1000):\n    \"\"\"Migrate prediction data in batches\"\"\"\n    db_manager = DatabaseManager()\n\n    async with db_manager.get_async_session() as session:\n        # Get total count\n        result = await session.execute(select(sa.func.count()).select_from(Predictions))\n        total_count = result.scalar()\n\n        logger.info(f\"Starting migration of {total_count} predictions\")\n\n        # Process in batches\n        offset = 0\n        while offset &lt; total_count:\n            # Get batch\n            result = await session.execute(\n                select(Predictions).offset(offset).limit(batch_size)\n            )\n            predictions = result.scalars().all()\n\n            # Process batch\n            for prediction in predictions:\n                # Calculate new metrics\n                accuracy = calculate_accuracy(prediction)\n                importance = calculate_feature_importance(prediction)\n\n                # Update record\n                await session.execute(\n                    update(Predictions)\n                    .where(Predictions.id == prediction.id)\n                    .values(\n                        model_accuracy=accuracy,\n                        feature_importance=importance\n                    )\n                )\n\n            # Commit batch\n            await session.commit()\n            logger.info(f\"Processed {min(offset + batch_size, total_count)}/{total_count} predictions\")\n\n            offset += batch_size\n\ndef calculate_accuracy(prediction):\n    \"\"\"Calculate model accuracy for prediction\"\"\"\n    # Implementation here\n    return 0.85\n\ndef calculate_feature_importance(prediction):\n    \"\"\"Calculate feature importance for prediction\"\"\"\n    # Implementation here\n    return {\"feature1\": 0.3, \"feature2\": 0.7}\n\nif __name__ == \"__main__\":\n    asyncio.run(migrate_prediction_data())\n</code></pre> <ol> <li>Run Data Migration</li> </ol> <pre><code># Run migration script\npython scripts/migrate_prediction_data.py --batch-size 500\n\n# Monitor progress\ntail -f logs/migration.log\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#322-incremental-data-migration","title":"3.2.2 Incremental Data Migration","text":"<ol> <li>Set Up Incremental Migration</li> </ol> <pre><code># scripts/incremental_migration.py\nimport asyncio\nimport logging\nfrom datetime import datetime, timedelta\nfrom sqlalchemy import select, update\nfrom src.database.connection import DatabaseManager\nfrom src.database.models.predictions import Predictions\n\nlogger = logging.getLogger(__name__)\n\nasync def incremental_migration(hours_back=24):\n    \"\"\"Perform incremental migration for recent data\"\"\"\n    db_manager = DatabaseManager()\n\n    # Calculate time window\n    since_time = datetime.now() - timedelta(hours=hours_back)\n\n    async with db_manager.get_async_session() as session:\n        # Get recent predictions\n        result = await session.execute(\n            select(Predictions).where(Predictions.created_at &gt;= since_time)\n        )\n        predictions = result.scalars().all()\n\n        logger.info(f\"Migrating {len(predictions)} recent predictions\")\n\n        # Process predictions\n        for prediction in predictions:\n            # Calculate new metrics\n            accuracy = calculate_accuracy(prediction)\n            importance = calculate_feature_importance(prediction)\n\n            # Update record\n            await session.execute(\n                update(Predictions)\n                .where(Predictions.id == prediction.id)\n                .values(\n                    model_accuracy=accuracy,\n                    feature_importance=importance\n                )\n            )\n\n        # Commit changes\n        await session.commit()\n        logger.info(\"Incremental migration completed\")\n\nif __name__ == \"__main__\":\n    asyncio.run(incremental_migration())\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#33-application-migration","title":"3.3 Application Migration","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#331-configuration-migration","title":"3.3.1 Configuration Migration","text":"<ol> <li>Update Configuration Files</li> </ol> <pre><code># Update environment variables\ncp .env.production .env.production.backup\nnano .env.production\n\n# Update application configuration\nnano config/app_config.json\n</code></pre> <ol> <li>Deploy New Configuration</li> </ol> <pre><code># Deploy to staging\ndocker-compose -f docker-compose.staging.yml up -d\n\n# Test configuration\ncurl -f http://staging.footballprediction.com/health\n\n# Deploy to production\ndocker-compose up -d\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#332-code-migration","title":"3.3.2 Code Migration","text":"<ol> <li>Deploy New Code</li> </ol> <pre><code># Pull latest code\ngit pull origin main\n\n# Build new images\ndocker-compose build\n\n# Deploy with zero downtime (blue-green deployment)\ndocker-compose -f docker-compose.blue.yml up -d\n# Test blue environment\n# Switch traffic to blue\n# Shutdown green environment\n\n# Or rolling update\ndocker-compose up -d --no-deps --scale api=2 api\ndocker-compose up -d --no-deps api\ndocker-compose up -d --no-deps --scale api=1 api\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#4-post-migration-validation","title":"4. Post-Migration Validation","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#41-data-validation","title":"4.1 Data Validation","text":"<ol> <li>Verify Data Integrity</li> </ol> <pre><code># scripts/validate_migration.py\nimport asyncio\nfrom sqlalchemy import select, func\nfrom src.database.connection import DatabaseManager\nfrom src.database.models.predictions import Predictions\n\nasync def validate_migration():\n    \"\"\"Validate migration results\"\"\"\n    db_manager = DatabaseManager()\n\n    async with db_manager.get_async_session() as session:\n        # Check record counts\n        result = await session.execute(select(func.count()).select_from(Predictions))\n        total_count = result.scalar()\n        print(f\"Total predictions: {total_count}\")\n\n        # Check migrated fields\n        result = await session.execute(\n            select(func.count())\n            .select_from(Predictions)\n            .where(Predictions.model_accuracy.isnot(None))\n        )\n        migrated_count = result.scalar()\n        print(f\"Migrated predictions: {migrated_count}\")\n\n        # Calculate migration percentage\n        migration_percentage = (migrated_count / total_count) * 100\n        print(f\"Migration completion: {migration_percentage:.2f}%\")\n\n        # Check for data consistency\n        result = await session.execute(\n            select(Predictions)\n            .where(Predictions.model_accuracy &lt; 0)\n            .limit(5)\n        )\n        invalid_records = result.scalars().all()\n        if invalid_records:\n            print(f\"Found {len(invalid_records)} invalid records\")\n            return False\n\n        print(\"Migration validation passed\")\n        return True\n\nif __name__ == \"__main__\":\n    asyncio.run(validate_migration())\n</code></pre> <ol> <li>Run Validation Script</li> </ol> <pre><code># Run validation\npython scripts/validate_migration.py\n\n# Check detailed validation report\ncat reports/migration_validation_$(date +%Y%m%d).txt\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#42-functional-validation","title":"4.2 Functional Validation","text":"<ol> <li>Test Core Functionality</li> </ol> <pre><code># Test API endpoints\npytest tests/api/test_predictions.py\n\n# Test prediction service\npytest tests/models/test_prediction_service.py\n\n# Test data pipeline\npytest tests/integration/test_data_pipeline.py\n</code></pre> <ol> <li>Performance Testing</li> </ol> <pre><code># Run performance tests\npytest tests/performance/test_prediction_performance.py\n\n# Monitor system metrics\npython scripts/monitor_system_metrics.py --duration 300\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#5-rollback-procedures","title":"5. Rollback Procedures","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#51-database-rollback","title":"5.1 Database Rollback","text":"<ol> <li>Rollback Schema Changes</li> </ol> <pre><code># Rollback to previous version\nalembic downgrade -1\n\n# Or rollback to specific revision\nalembic downgrade [revision_id]\n</code></pre> <ol> <li>Restore from Backup</li> </ol> <pre><code># Stop application\ndocker-compose down\n\n# Restore database from backup\n./scripts/restore.sh --backup-file /backup/football_db/full/backup_before_migration.sql.gz\n\n# Start application\ndocker-compose up -d\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#52-application-rollback","title":"5.2 Application Rollback","text":"<ol> <li>Rollback to Previous Version</li> </ol> <pre><code># Rollback code\ngit checkout [previous_commit]\n\n# Rebuild and deploy\ndocker-compose build\ndocker-compose up -d\n</code></pre> <ol> <li>Restore Configuration</li> </ol> <pre><code># Restore previous configuration\ncp .env.production.backup .env.production\n\n# Restart services\ndocker-compose restart\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#6-monitoring-and-monitoring","title":"6. Monitoring and Monitoring","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#61-migration-monitoring","title":"6.1 Migration Monitoring","text":"<ol> <li>Real-time Monitoring</li> </ol> <pre><code># scripts/monitor_migration.py\nimport time\nimport logging\nfrom datetime import datetime\nfrom src.monitoring.metrics_collector import MigrationMetricsCollector\n\nlogger = logging.getLogger(__name__)\n\ndef monitor_migration():\n    \"\"\"Monitor migration progress in real-time\"\"\"\n    collector = MigrationMetricsCollector()\n\n    while True:\n        try:\n            # Collect migration metrics\n            metrics = collector.collect_migration_metrics()\n\n            # Log metrics\n            logger.info(f\"Migration Progress: {metrics['progress']:.2f}%\")\n            logger.info(f\"Records Processed: {metrics['processed']}/{metrics['total']}\")\n            logger.info(f\"Errors: {metrics['errors']}\")\n\n            # Check for issues\n            if metrics['errors'] &gt; 10:\n                logger.error(\"Too many errors detected, stopping migration\")\n                break\n\n            # Sleep before next check\n            time.sleep(30)\n\n        except KeyboardInterrupt:\n            logger.info(\"Migration monitoring stopped by user\")\n            break\n        except Exception as e:\n            logger.error(f\"Error monitoring migration: {e}\")\n\nif __name__ == \"__main__\":\n    monitor_migration()\n</code></pre> <ol> <li>Dashboard Monitoring</li> </ol> <pre><code># Open Grafana dashboard\nxdg-open http://localhost:3000/d/migration-dashboard/migration-monitoring\n\n# Check alerts\ncurl -s http://localhost:9093/api/v2/alerts | jq '.[] | select(.labels.alertname==\"migration_failure\")'\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#7-documentation-and-communication","title":"7. Documentation and Communication","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#71-migration-documentation","title":"7.1 Migration Documentation","text":"<ol> <li>Update Documentation</li> </ol> <pre><code># Update API documentation\nmake docs\n\n# Update data model documentation\npython scripts/generate_data_model_docs.py\n\n# Update migration history\necho \"$(date): Migration v[version] completed successfully\" &gt;&gt; docs/MIGRATION_HISTORY.md\n</code></pre> <ol> <li>Create Migration Report</li> </ol> <pre><code># Migration Report - v[version]\n\n## Summary\n- Migration completed successfully on [date]\n- [X] records migrated\n- [Y] errors encountered and resolved\n- Downtime: [Z] minutes\n\n## Changes\n- Added model_accuracy column to predictions table\n- Updated prediction service to calculate accuracy\n- Modified API to return accuracy metrics\n\n## Issues Encountered\n- Issue 1: [description and resolution]\n- Issue 2: [description and resolution]\n\n## Next Steps\n- Monitor system performance\n- Validate data integrity\n- Update runbooks and documentation\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#72-stakeholder-communication","title":"7.2 Stakeholder Communication","text":"<ol> <li>Notify Stakeholders</li> </ol> <pre><code># Send completion notification\npython scripts/notify_stakeholders.py --migration-complete --version [version]\n\n# Update status page\npython scripts/update_status_page.py --status operational\n</code></pre> <ol> <li>Schedule Post-Mortem</li> </ol> <pre><code># Create calendar event\necho \"Schedule post-migration review meeting\" | mail -s \"Migration Review Meeting\" team@footballprediction.com\n</code></pre>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#8-contact-information","title":"8. Contact Information","text":""},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#81-migration-team","title":"8.1 Migration Team","text":"<ul> <li>Migration Lead: [Name] - [Phone] - [Email]</li> <li>Database Administrator: [Name] - [Phone] - [Email]</li> <li>Application Developer: [Name] - [Phone] - [Email]</li> <li>QA Engineer: [Name] - [Phone] - [Email]</li> </ul>"},{"location":"ops/runbooks/DATA_MIGRATION_RUNBOOK/#82-emergency-contacts","title":"8.2 Emergency Contacts","text":"<ul> <li>24/7 Support: [Phone]</li> <li>Database Emergency: [Phone]</li> <li>Infrastructure Emergency: [Phone]</li> </ul>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/","title":"Disaster Recovery Runbook","text":""},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#1-overview","title":"1. Overview","text":"<p>This runbook provides step-by-step procedures for disaster recovery of the Football Prediction System. It covers recovery from various failure scenarios including database corruption, system failures, and data loss.</p>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#2-recovery-scenarios","title":"2. Recovery Scenarios","text":""},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#21-database-recovery","title":"2.1 Database Recovery","text":""},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#211-full-database-recovery-from-backup","title":"2.1.1 Full Database Recovery from Backup","text":"<p>Prerequisites:</p> <ul> <li>Access to backup files</li> <li>Database administrator privileges</li> <li>Backup restoration scripts</li> </ul> <p>Procedure:</p> <ol> <li>Identify Latest Backup</li> </ol> <pre><code># List available backups\nls -la /backup/football_db/full/\n\n# Identify latest backup file\nLATEST_BACKUP=$(ls -t /backup/football_db/full/full_backup_*.sql.gz | head -1)\necho \"Latest backup: $LATEST_BACKUP\"\n</code></pre> <ol> <li>Stop Application Services</li> </ol> <pre><code># Stop all application services\ndocker-compose stop\n\n# Stop database service\ndocker-compose stop db\n</code></pre> <ol> <li>Restore Database</li> </ol> <pre><code># Run database restoration script\n./scripts/restore.sh --backup-file $LATEST_BACKUP --database football_prediction\n\n# Or manually restore (if script fails)\ngunzip -c $LATEST_BACKUP | psql -h localhost -p 5432 -U football_user -d football_prediction\n</code></pre> <ol> <li>Verify Restoration</li> </ol> <pre><code># Connect to database and verify data\npsql -h localhost -p 5432 -U football_user -d football_prediction -c \"SELECT COUNT(*) FROM matches;\"\n</code></pre> <ol> <li>Restart Services</li> </ol> <pre><code># Start database service\ndocker-compose up -d db\n\n# Start all services\ndocker-compose up -d\n</code></pre>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#212-point-in-time-recovery-pitr","title":"2.1.2 Point-in-Time Recovery (PITR)","text":"<p>Prerequisites:</p> <ul> <li>WAL archives available</li> <li>Base backup</li> <li>Target recovery time</li> </ul> <p>Procedure:</p> <ol> <li>Stop Database Service</li> </ol> <pre><code>docker-compose stop db\n</code></pre> <ol> <li>Prepare Recovery Configuration</li> </ol> <pre><code># Create recovery.conf file\ncat &gt; /backup/football_db/recovery.conf &lt;&lt; EOF\nrestore_command = 'cp /backup/football_db/wal/%f %p'\nrecovery_target_time = '2025-09-15 10:00:00'\nEOF\n</code></pre> <ol> <li>Restore Base Backup</li> </ol> <pre><code># Restore latest base backup\n./scripts/restore.sh --type base --backup-dir /backup/football_db/base/latest\n</code></pre> <ol> <li>Start Database in Recovery Mode</li> </ol> <pre><code># Start database (it will automatically enter recovery mode)\ndocker-compose up -d db\n</code></pre> <ol> <li>Monitor Recovery Process</li> </ol> <pre><code># Monitor recovery progress\ndocker-compose logs -f db\n\n# Check recovery status\npsql -h localhost -p 5432 -U football_user -d football_prediction -c \"SELECT pg_is_in_recovery();\"\n</code></pre> <ol> <li>Complete Recovery</li> </ol> <pre><code># Promote database to primary\npsql -h localhost -p 5432 -U football_user -d football_prediction -c \"SELECT pg_promote();\"\n</code></pre>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#22-application-service-recovery","title":"2.2 Application Service Recovery","text":""},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#221-complete-application-recovery","title":"2.2.1 Complete Application Recovery","text":"<p>Prerequisites:</p> <ul> <li>Access to application servers</li> <li>Docker/Docker Compose installed</li> <li>Application configuration files</li> </ul> <p>Procedure:</p> <ol> <li>Check System Status</li> </ol> <pre><code># Check Docker status\nsystemctl status docker\n\n# Check disk space\ndf -h\n\n# Check memory usage\nfree -h\n</code></pre> <ol> <li>Clean Up Failed Containers</li> </ol> <pre><code># Stop all containers\ndocker-compose down\n\n# Remove orphan containers\ndocker system prune -f\n\n# Remove unused volumes\ndocker volume prune -f\n</code></pre> <ol> <li>Rebuild Application</li> </ol> <pre><code># Pull latest images\ndocker-compose pull\n\n# Build services\ndocker-compose build --no-cache\n\n# Start services\ndocker-compose up -d\n</code></pre> <ol> <li>Verify Application Health</li> </ol> <pre><code># Check service status\ndocker-compose ps\n\n# Check application health endpoint\ncurl -f http://localhost:8000/health || echo \"Health check failed\"\n\n# Check logs\ndocker-compose logs --tail=100\n</code></pre>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#23-data-pipeline-recovery","title":"2.3 Data Pipeline Recovery","text":""},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#231-restart-failed-data-pipeline","title":"2.3.1 Restart Failed Data Pipeline","text":"<p>Prerequisites:</p> <ul> <li>Access to task queue (Redis/Celery)</li> <li>Pipeline monitoring tools</li> </ul> <p>Procedure:</p> <ol> <li>Identify Failed Tasks</li> </ol> <pre><code># Check Celery task status\ncelery -A src.tasks.celery_app inspect active\ncelery -A src.tasks.celery_app inspect reserved\ncelery -A src.tasks.celery_app inspect scheduled\n\n# Check failed tasks in Redis\nredis-cli -h redis -p 6379 KEYS \"celery-task-meta-*\" | head -10\n</code></pre> <ol> <li>Restart Failed Tasks</li> </ol> <pre><code># Restart specific task\npython -c \"\nfrom src.tasks.celery_app import app\napp.control.revoke('task-id', terminate=True)\n\"\n\n# Or restart all failed tasks\npython scripts/restart_failed_tasks.py\n</code></pre> <ol> <li>Clear Task Queue if Needed</li> </ol> <pre><code># Clear specific queue\ncelery -A src.tasks.celery_app purge -Q data_collection\n\n# Clear all queues\ncelery -A src.tasks.celery_app purge\n</code></pre> <ol> <li>Restart Pipeline Services</li> </ol> <pre><code># Restart task workers\ndocker-compose restart celery-worker\n\n# Restart scheduler\ndocker-compose restart celery-beat\n</code></pre>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#3-monitoring-and-validation","title":"3. Monitoring and Validation","text":""},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#31-post-recovery-validation","title":"3.1 Post-Recovery Validation","text":"<ol> <li>Database Validation</li> </ol> <pre><code># Check database connectivity\npython -c \"\nfrom src.database.connection import DatabaseManager\ndb = DatabaseManager()\ndb.initialize()\nassert db.health_check(), 'Database health check failed'\nprint('Database is healthy')\n\"\n\n# Verify data integrity\npython scripts/verify_data_integrity.py\n</code></pre> <ol> <li>Application Validation</li> </ol> <pre><code># Test API endpoints\ncurl -f http://localhost:8000/api/v1/health\ncurl -f http://localhost:8000/api/v1/predictions/recent?limit=5\n\n# Test prediction functionality\npython scripts/test_prediction_functionality.py\n</code></pre> <ol> <li>Pipeline Validation</li> </ol> <pre><code># Check task processing\npython scripts/monitor_task_queue.py --check-active\n\n# Verify data flow\npython scripts/verify_data_pipeline.py\n</code></pre>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#32-performance-monitoring","title":"3.2 Performance Monitoring","text":"<ol> <li>System Resources</li> </ol> <pre><code># Monitor system resources\ntop -b -n 1 | head -20\niostat -x 1 5\n</code></pre> <ol> <li>Database Performance</li> </ol> <pre><code># Check database performance\npython scripts/monitor_database_performance.py\n</code></pre> <ol> <li>Application Performance</li> </ol> <pre><code># Monitor API response times\npython scripts/monitor_api_performance.py\n</code></pre>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#4-communication-and-documentation","title":"4. Communication and Documentation","text":""},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#41-incident-reporting","title":"4.1 Incident Reporting","text":"<ol> <li>Create Incident Report</li> </ol> <pre><code># Generate incident report template\ncat &gt; incident_reports/incident_$(date +%Y%m%d_%H%M%S).md &lt;&lt; EOF\n# Incident Report\n\n## Summary\n\n## Timeline\n\n## Impact\n\n## Root Cause\n\n## Resolution\n\n## Preventive Measures\n\n## Follow-up Actions\nEOF\n</code></pre> <ol> <li>Notify Stakeholders</li> </ol> <pre><code># Send notification to team\npython scripts/notify_stakeholders.py --incident --severity high\n\n# Update status page\npython scripts/update_status_page.py --status operational\n</code></pre>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#5-preventive-measures","title":"5. Preventive Measures","text":""},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#51-regular-backup-verification","title":"5.1 Regular Backup Verification","text":"<pre><code># Weekly backup verification script\n#!/bin/bash\nset -e\n\necho \"Starting backup verification...\"\n\n# Test backup restoration\nLATEST_BACKUP=$(ls -t /backup/football_db/full/full_backup_*.sql.gz | head -1)\nTEST_DB=\"football_prediction_test_$(date +%s)\"\n\n# Create test database\ncreatedb $TEST_DB\n\n# Restore backup to test database\ngunzip -c $LATEST_BACKUP | psql -d $TEST_DB\n\n# Verify data integrity\npsql -d $TEST_DB -c \"SELECT COUNT(*) FROM matches;\" &gt; /tmp/backup_verification.log\n\n# Clean up\ndropdb $TEST_DB\n\necho \"Backup verification completed successfully\"\n</code></pre>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#52-automated-health-checks","title":"5.2 Automated Health Checks","text":"<pre><code># scripts/automated_health_check.py\nimport asyncio\nimport sys\nfrom src.database.connection import DatabaseManager\nfrom src.monitoring.quality_monitor import QualityMonitor\n\nasync def health_check():\n    \"\"\"Perform comprehensive health check\"\"\"\n    try:\n        # Database health check\n        db_manager = DatabaseManager()\n        if not db_manager.health_check():\n            raise Exception(\"Database health check failed\")\n\n        # Data quality check\n        quality_monitor = QualityMonitor()\n        freshness_results = await quality_monitor.check_data_freshness()\n\n        # Check if any critical tables are stale\n        stale_tables = [table for table, result in freshness_results.items()\n                       if not result.is_fresh and result.threshold_hours &lt; 24]\n\n        if stale_tables:\n            raise Exception(f\"Stale tables detected: {stale_tables}\")\n\n        print(\"All health checks passed\")\n        return True\n\n    except Exception as e:\n        print(f\"Health check failed: {e}\")\n        return False\n\nif __name__ == \"__main__\":\n    success = asyncio.run(health_check())\n    sys.exit(0 if success else 1)\n</code></pre>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#6-contact-information","title":"6. Contact Information","text":""},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#61-emergency-contacts","title":"6.1 Emergency Contacts","text":"<ul> <li>Primary On-Call: [Name] - [Phone] - [Email]</li> <li>Secondary On-Call: [Name] - [Phone] - [Email]</li> <li>Database Administrator: [Name] - [Phone] - [Email]</li> <li>System Administrator: [Name] - [Phone] - [Email]</li> </ul>"},{"location":"ops/runbooks/DISASTER_RECOVERY_RUNBOOK/#62-service-dependencies","title":"6.2 Service Dependencies","text":"<ul> <li>Database: PostgreSQL</li> <li>Cache: Redis</li> <li>Message Queue: Celery with Redis</li> <li>Monitoring: Prometheus + Grafana</li> <li>Logging: ELK Stack</li> </ul>"},{"location":"project/AI_DEVELOPER_GUIDE/","title":"\ud83e\udd16 AI \u5f00\u53d1\u8005\u5de5\u4f5c\u6307\u5357","text":"<p>\u672c\u6307\u5357\u4e13\u95e8\u4e3a AI \u5de5\u5177\uff08Claude Code\u3001Cursor\u3001GPT-5-Codex \u7b49\uff09\u7f16\u5199\uff0c\u5e2e\u52a9\u5b83\u4eec\u5728\u672c\u9879\u76ee\u4e2d\u6b63\u786e\u6267\u884c\u6d4b\u8bd5\u4e0e\u4fee\u590d\u6d41\u7a0b\u3002</p>"},{"location":"project/AI_DEVELOPER_GUIDE/#1","title":"1. \u5982\u4f55\u627e\u5230\u4efb\u52a1","text":"<p>AI \u9700\u8981\u4ece\u4ee5\u4e0b\u6587\u4ef6\u4e2d\u8bfb\u53d6\u4efb\u52a1\uff1a</p> <ul> <li>\u770b\u677f: <code>docs/_reports/TEST_COVERAGE_KANBAN.md</code></li> <li>\u67e5\u770b <code>\ud83d\udea7 \u8fdb\u884c\u4e2d</code> \u7684\u4efb\u52a1</li> <li>\u627e\u5230\u5f53\u524d\u9636\u6bb5\u7684\u76ee\u6807\uff08\u5982\uff1a\u8986\u76d6\u7387\u63d0\u5347\u3001Bug \u4fee\u590d\uff09</li> <li>Bugfix \u62a5\u544a: <code>docs/_reports/BUGFIX_REPORT_*.md</code></li> <li>\u67e5\u770b\u6700\u65b0\u7684\u9519\u8bef\u7528\u4f8b\u548c\u65e5\u5fd7</li> <li>\u4fee\u590d\u8ba1\u5212: <code>docs/_reports/COVERAGE_FIX_PLAN.md</code></li> <li>\u67e5\u770b\u4f4e\u8986\u76d6\u7387\u6587\u4ef6\u5217\u8868\uff0c\u4f18\u5148\u4fee\u590d\u6216\u8865\u6d4b</li> </ul>"},{"location":"project/AI_DEVELOPER_GUIDE/#2","title":"2. \u5982\u4f55\u5206\u6790\u95ee\u9898","text":"<ul> <li>\u8bfb\u53d6 <code>pytest</code> \u8fd0\u884c\u65e5\u5fd7\uff0c\u627e\u51fa \u274c \u9519\u8bef\u5806\u6808</li> <li>\u786e\u8ba4\u62a5\u9519\u6587\u4ef6\u3001\u51fd\u6570\u3001\u7c7b</li> <li>\u533a\u5206\uff1a</li> <li>\u8bed\u6cd5\u9519\u8bef \u2192 \u4fee\u6539\u6e90\u4ee3\u7801</li> <li>\u903b\u8f91\u9519\u8bef \u2192 \u4fee\u6539\u5b9e\u73b0\u903b\u8f91</li> <li>\u6d4b\u8bd5\u7f3a\u5931 \u2192 \u7f16\u5199/\u8865\u5145\u6d4b\u8bd5\u7528\u4f8b</li> </ul>"},{"location":"project/AI_DEVELOPER_GUIDE/#3-bug","title":"3. \u5982\u4f55\u4fee\u590d bug","text":"<p>\u4fee\u590d\u6b65\u9aa4\uff1a</p> <ol> <li>\u4fee\u6539\u5bf9\u5e94\u6e90\u4ee3\u7801\u6216\u6d4b\u8bd5\u6587\u4ef6</li> <li>\u672c\u5730\u8fd0\u884c\u6d4b\u8bd5\uff1a</li> </ol> <pre><code>pytest --maxfail=5 --disable-warnings -q --cov=. --cov-report=term-missing\n</code></pre> <ol> <li>\u786e\u4fdd\uff1a</li> <li>\u6240\u6709\u6d4b\u8bd5\u7528\u4f8b\u901a\u8fc7 \u2705</li> <li>\u8986\u76d6\u7387\u4e0d\u4e0b\u964d\uff08\u6700\u597d\u589e\u52a0\uff09</li> </ol>"},{"location":"project/AI_DEVELOPER_GUIDE/#4-pr","title":"4. \u5982\u4f55\u63d0\u4ea4 PR","text":"<p>AI \u4fee\u590d\u5b8c\u6210\u540e\uff0c\u5fc5\u987b\u9075\u5faa\u4ee5\u4e0b\u6d41\u7a0b\uff1a</p> <ol> <li>\u521b\u5efa\u5206\u652f\uff1a</li> </ol> <pre><code>git checkout -b fix/bug-&lt;timestamp&gt;\n</code></pre> <ol> <li>\u63d0\u4ea4\u4fee\u6539\uff1a</li> </ol> <pre><code>git add src/ tests/\ngit commit -m \"fix: auto bugfix from BUGFIX_REPORT_xxx\"\ngit push origin HEAD\n</code></pre> <ol> <li>\u521b\u5efa PR\uff1a</li> </ol> <pre><code>gh pr create --base main --head fix/bug-&lt;timestamp&gt; \\\n  --title \"fix: auto bugfix from BUGFIX_REPORT_xxx\" \\\n  --body \"Automated bugfix based on latest Bugfix Report.\"\ngh pr merge --squash --auto\n</code></pre>"},{"location":"project/AI_DEVELOPER_GUIDE/#5","title":"5. \u5faa\u73af\u95ed\u73af","text":"<p>AI \u5e94\u8be5\u59cb\u7ec8\u9075\u5faa\u4ee5\u4e0b\u95ed\u73af\uff1a</p> <ol> <li>\u8fd0\u884c\u6d4b\u8bd5 \u2192 \u751f\u6210 Bugfix \u62a5\u544a</li> <li>\u4ece Bugfix \u62a5\u544a\u8bfb\u53d6\u4efb\u52a1</li> <li>\u81ea\u52a8\u4fee\u590d\u5e76\u63d0\u4ea4 PR</li> <li>\u66f4\u65b0 Kanban &amp; Dashboard</li> <li>\u91cd\u590d\u6b65\u9aa4 1\uff0c\u76f4\u5230\u6ca1\u6709\u5931\u8d25\u7528\u4f8b\u4e14\u8986\u76d6\u7387\u8fbe\u5230\u76ee\u6807</li> </ol>"},{"location":"project/AI_DEVELOPER_GUIDE/#6","title":"6. \u8d28\u91cf\u6807\u51c6","text":"<ul> <li>\u6240\u6709\u4fee\u590d\u5fc5\u987b\u901a\u8fc7 Test Guard CI</li> <li>\u7981\u6b62\u63d0\u4ea4\u5305\u542b <code>TODO</code> \u5360\u4f4d\u7b26\u7684\u6d4b\u8bd5</li> <li>\u6bcf\u6b21\u8fed\u4ee3\u5fc5\u987b\u66f4\u65b0 Kanban \u548c Dashboard</li> </ul> <p>\ud83d\udcdd \u63d0\u793a\uff1a\u672c\u6307\u5357\u5c31\u662f AI \u7684\"\u64cd\u4f5c\u8bf4\u660e\u4e66\"\uff0c\u4efb\u4f55 AI \u5de5\u5177\u90fd\u5e94\u4e25\u683c\u9075\u5faa\u4ee5\u4e0a\u6d41\u7a0b\u6267\u884c\u3002</p>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/","title":"AI \u5f00\u53d1\u6587\u6863\u7ef4\u62a4\u89c4\u5219","text":"<p>\u672c\u6587\u6863\u5b9a\u4e49\u4e86 AI \u7f16\u7a0b\u5de5\u5177\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u5fc5\u987b\u9075\u5b88\u7684\u6587\u6863\u7ef4\u62a4\u89c4\u5219\u3002</p>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#ai_1","title":"\ud83e\udd16 AI \u5f00\u53d1\u539f\u5219","text":""},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#1","title":"1. \u6587\u6863\u4f18\u5148\u539f\u5219","text":"<ul> <li>\u521b\u5efa\u65b0\u529f\u80fd\u524d\uff1a\u5148\u68c0\u67e5\u662f\u5426\u9700\u8981\u66f4\u65b0\u6587\u6863</li> <li>\u4ee3\u7801\u53d8\u66f4\u65f6\uff1a\u540c\u6b65\u66f4\u65b0\u76f8\u5173\u6587\u6863</li> <li>\u5b8c\u6210\u5f00\u53d1\u540e\uff1a\u9a8c\u8bc1\u6587\u6863\u7684\u51c6\u786e\u6027\u548c\u5b8c\u6574\u6027</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#2","title":"2. \u6587\u6863\u81ea\u52a8\u5316\u89c4\u5219","text":""},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_1","title":"\ud83d\udcc1 \u76ee\u5f55\u7ef4\u62a4\u89c4\u5219","text":"<pre><code>docs/\n\u251c\u2500\u2500 _reports/        # \u4e34\u65f6\u62a5\u544a\uff0c\u6309\u6708\u5f52\u6863\n\u251c\u2500\u2500 architecture/    # \u67b6\u6784\u8bbe\u8ba1\u6587\u6863\n\u251c\u2500\u2500 how-to/         # \u64cd\u4f5c\u6307\u5357\uff08\u4fdd\u6301\u7b80\u6d01\uff09\n\u251c\u2500\u2500 reference/      # \u53c2\u8003\u8d44\u6599\uff08API\u3001\u6570\u636e\u5e93\u7b49\uff09\n\u251c\u2500\u2500 testing/        # \u6d4b\u8bd5\u7b56\u7565\u548c\u62a5\u544a\n\u251c\u2500\u2500 ops/           # \u8fd0\u7ef4\u624b\u518c\n\u251c\u2500\u2500 ml/            # \u673a\u5668\u5b66\u4e60\u76f8\u5173\n\u251c\u2500\u2500 release/       # \u53d1\u5e03\u7ba1\u7406\n\u2514\u2500\u2500 legacy/        # \u5df2\u5e9f\u5f03\u6587\u6863\uff08\u4ec5\u4fdd\u75593\u4e2a\u6708\uff09\n</code></pre>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_2","title":"\ud83d\udcdd \u6587\u6863\u547d\u540d\u89c4\u8303","text":"<ul> <li>\u4f7f\u7528\u82f1\u6587\u5927\u5199\u5b57\u6bcd\u548c\u4e0b\u5212\u7ebf\uff1a<code>FEATURE_NAME.md</code></li> <li>\u62a5\u544a\u7c7b\u6587\u6863\u5305\u542b\u65e5\u671f\uff1a<code>REPORT_TYPE_YYYY-MM-DD.md</code></li> <li>\u907f\u514d\u4e2d\u6587\u6587\u4ef6\u540d\uff0c\u4f7f\u7528\u82f1\u6587\u5e76\u5728\u5185\u5bb9\u4e2d\u6807\u6ce8\u4e2d\u6587\u6807\u9898</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_reports","title":"\ud83d\udcca _reports \u76ee\u5f55\u7ba1\u7406","text":"<ul> <li>\u81ea\u52a8\u5f52\u6863\uff1a\u6bcf\u67081\u53f7\u5c06\u4e0a\u4e2a\u6708\u62a5\u544a\u79fb\u81f3 <code>archive/YYYY-MM/</code></li> <li>\u4fdd\u7559\u7b56\u7565\uff1a</li> <li>\u4e34\u65f6\u4fee\u590d\u62a5\u544a\uff1a\u4fdd\u75591\u4e2a\u6708</li> <li>\u9636\u6bb5\u603b\u7ed3\u62a5\u544a\uff1a\u4fdd\u75596\u4e2a\u6708</li> <li>\u9879\u76ee\u56de\u987e\u62a5\u544a\uff1a\u6c38\u4e45\u4fdd\u7559</li> <li>\u6587\u4ef6\u9650\u5236\uff1a\u6d3b\u8dc3\u62a5\u544a\u4e0d\u8d85\u8fc720\u4e2a</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#3","title":"3. \u6587\u6863\u521b\u5efa\u6a21\u677f","text":""},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_3","title":"\u65b0\u529f\u80fd\u6587\u6863\u6a21\u677f","text":"<pre><code># \u529f\u80fd\u540d\u79f0\n\n## \u6982\u8ff0\n\u7b80\u8981\u63cf\u8ff0\u529f\u80fd\u76ee\u7684\u548c\u8303\u56f4\n\n## \u5b9e\u73b0\u7ec6\u8282\n- \u6280\u672f\u65b9\u6848\n- \u5173\u952e\u4ee3\u7801\u4f4d\u7f6e\n- \u4f9d\u8d56\u5173\u7cfb\n\n## \u4f7f\u7528\u6307\u5357\n\u6b65\u9aa4\u8bf4\u660e\u548c\u793a\u4f8b\n\n## \u7ef4\u62a4\u8bf4\u660e\n- \u66f4\u65b0\u9891\u7387\n- \u6ce8\u610f\u4e8b\u9879\n- \u76f8\u5173\u6587\u6863\u94fe\u63a5\n</code></pre>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_4","title":"\u62a5\u544a\u6587\u6863\u6a21\u677f","text":"<pre><code># [\u62a5\u544a\u7c7b\u578b] - YYYY-MM-DD\n\n## \u76ee\u6807\n\u63cf\u8ff0\u672c\u6b21\u4fee\u590d/\u6539\u8fdb\u7684\u76ee\u6807\n\n## \u6267\u884c\u5185\u5bb9\n- \u5b8c\u6210\u7684\u4efb\u52a1\u5217\u8868\n- \u5173\u952e\u53d8\u66f4\n\n## \u7ed3\u679c\n- \u8fbe\u6210\u7684\u6548\u679c\n- \u6570\u636e\u6307\u6807\n\n## \u540e\u7eed\u8ba1\u5212\n- \u5f85\u5904\u7406\u4e8b\u9879\n- \u4e0b\u4e00\u6b65\u884c\u52a8\n</code></pre>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#4","title":"4. \u81ea\u52a8\u5316\u68c0\u67e5\u6e05\u5355","text":""},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_5","title":"\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u5fc5\u987b\u6267\u884c","text":"<ul> <li> \u68c0\u67e5\u662f\u5426\u9700\u8981\u521b\u5efa\u65b0\u6587\u6863</li> <li> \u66f4\u65b0\u76f8\u5173\u73b0\u6709\u6587\u6863</li> <li> \u66f4\u65b0 <code>docs/INDEX.md</code> \u4e2d\u7684\u94fe\u63a5</li> <li> \u6e05\u7406\u8fc7\u65f6\u7684\u4e34\u65f6\u62a5\u544a</li> <li> \u9a8c\u8bc1\u6587\u6863\u5185\u90e8\u94fe\u63a5\u6709\u6548\u6027</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_6","title":"\u6bcf\u5468\u7ef4\u62a4\u4efb\u52a1","text":"<ul> <li> \u68c0\u67e5 <code>_reports</code> \u76ee\u5f55\uff0c\u5f52\u6863\u4e0a\u6708\u62a5\u544a</li> <li> \u66f4\u65b0\u6587\u6863\u7d22\u5f15</li> <li> \u6e05\u7406 legacy \u76ee\u5f55\u4e2d\u8d85\u8fc73\u4e2a\u6708\u7684\u6587\u6863</li> <li> \u68c0\u67e5\u7a7a\u76ee\u5f55\u5e76\u8865\u5145\u5fc5\u8981\u6587\u6863</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#5-ai","title":"5. AI \u5de5\u5177\u96c6\u6210\u89c4\u5219","text":""},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#claude-code","title":"Claude Code \u96c6\u6210","text":"<ol> <li>\u521d\u59cb\u5316\u4efb\u52a1\u65f6\uff1a</li> <li>\u81ea\u52a8\u52a0\u8f7d <code>CLAUDE.md</code> \u4e2d\u7684\u6587\u6863\u89c4\u5219</li> <li> <p>\u68c0\u67e5\u5f53\u524d\u6587\u6863\u72b6\u6001</p> </li> <li> <p>\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff1a</p> </li> <li>\u521b\u5efa\u65b0\u529f\u80fd\u65f6\u63d0\u793a\u66f4\u65b0\u6587\u6863</li> <li> <p>\u91cd\u5927\u53d8\u66f4\u65f6\u81ea\u52a8\u751f\u6210\u62a5\u544a\u6a21\u677f</p> </li> <li> <p>\u4efb\u52a1\u5b8c\u6210\u540e\uff1a</p> </li> <li>\u81ea\u52a8\u68c0\u67e5\u6587\u6863\u5b8c\u6574\u6027</li> <li>\u66f4\u65b0\u76f8\u5173\u7d22\u5f15\u548c\u94fe\u63a5</li> </ol>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_7","title":"\u81ea\u52a8\u5316\u811a\u672c\u89e6\u53d1\u6761\u4ef6","text":"<ul> <li>\u521b\u5efa\u65b0\u7684 API \u7aef\u70b9 \u2192 \u66f4\u65b0 API_REFERENCE.md</li> <li>\u4fee\u6539\u6570\u636e\u5e93 schema \u2192 \u66f4\u65b0 DATABASE_SCHEMA.md</li> <li>\u5b8c\u6210\u91cd\u8981\u529f\u80fd \u2192 \u751f\u6210\u5b8c\u6210\u62a5\u544a</li> <li>\u4fee\u590d\u91cd\u5927 bug \u2192 \u521b\u5efa BUGFIX_REPORT</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#6","title":"6. \u6587\u6863\u8d28\u91cf\u6807\u51c6","text":""},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_8","title":"\u5185\u5bb9\u8981\u6c42","text":"<ul> <li>\u51c6\u786e\u6027\uff1a\u4e0e\u5b9e\u9645\u4ee3\u7801\u4fdd\u6301\u4e00\u81f4</li> <li>\u5b8c\u6574\u6027\uff1a\u5305\u542b\u5fc5\u8981\u7684\u4f7f\u7528\u8bf4\u660e</li> <li>\u53ef\u8bfb\u6027\uff1a\u7ed3\u6784\u6e05\u6670\uff0c\u6613\u4e8e\u7406\u89e3</li> <li>\u65f6\u6548\u6027\uff1a\u53ca\u65f6\u66f4\u65b0\uff0c\u907f\u514d\u8fc7\u65f6\u4fe1\u606f</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_9","title":"\u683c\u5f0f\u8981\u6c42","text":"<ul> <li>\u4f7f\u7528\u6807\u51c6 Markdown \u683c\u5f0f</li> <li>\u5305\u542b\u76ee\u5f55\u7ed3\u6784\uff08TOC\uff09</li> <li>\u4ee3\u7801\u5757\u6807\u6ce8\u8bed\u8a00\u7c7b\u578b</li> <li>\u91cd\u8981\u4fe1\u606f\u4f7f\u7528\u8868\u683c\u6216\u5217\u8868\u5448\u73b0</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#7","title":"7. \u8fdd\u89c4\u5904\u7406","text":""},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_10","title":"\u81ea\u52a8\u68c0\u6d4b\u673a\u5236","text":"<ul> <li>\u53d1\u73b0\u8fc7\u65f6\u6587\u6863 \u2192 \u521b\u5efa\u66f4\u65b0\u4efb\u52a1</li> <li>\u68c0\u6d4b\u5b64\u7acb\u6587\u6863 \u2192 \u6807\u8bb0\u5f85\u5ba1\u67e5</li> <li>\u6587\u6863\u7f3a\u5931 \u2192 \u963b\u6b62\u76f8\u5173\u529f\u80fd\u5f00\u53d1</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_11","title":"\u4fee\u590d\u6d41\u7a0b","text":"<ol> <li>\u81ea\u52a8\u521b\u5efa\u4fee\u590d\u4efb\u52a1</li> <li>\u751f\u6210\u5fc5\u8981\u7684\u6587\u6863\u6a21\u677f</li> <li>\u5206\u914d\u7ed9\u540e\u7eed\u5f00\u53d1\u5904\u7406</li> <li>\u9a8c\u8bc1\u4fee\u590d\u6548\u679c</li> </ol>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_12","title":"\ud83d\udd04 \u6301\u7eed\u6539\u8fdb","text":""},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_13","title":"\u5b9a\u671f\u5ba1\u67e5","text":"<ul> <li>\u6bcf\u6708\u5ba1\u67e5\u6587\u6863\u7ed3\u6784\u5408\u7406\u6027</li> <li>\u6bcf\u5b63\u5ea6\u8bc4\u4f30\u7ef4\u62a4\u89c4\u5219\u6709\u6548\u6027</li> <li>\u6839\u636e\u9879\u76ee\u53d1\u5c55\u8c03\u6574\u6587\u6863\u5206\u7c7b</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_14","title":"\u7248\u672c\u63a7\u5236","text":"<ul> <li>\u6587\u6863\u7ed3\u6784\u53d8\u66f4\u8bb0\u5f55\u5728 CHANGELOG.md</li> <li>\u91cd\u8981\u89c4\u5219\u66f4\u65b0\u9700\u8981\u9879\u76ee\u8bc4\u5ba1</li> <li>\u4fdd\u6301\u5411\u540e\u517c\u5bb9\u6027</li> </ul>"},{"location":"project/AI_DEVELOPMENT_DOCUMENTATION_RULES/#_15","title":"\u5b9e\u65bd\u8bf4\u660e","text":"<ol> <li>\u7acb\u5373\u751f\u6548\uff1a\u672c\u89c4\u5219\u521b\u5efa\u540e\u7acb\u5373\u751f\u6548</li> <li>\u5f3a\u5236\u6267\u884c\uff1aAI \u5f00\u53d1\u5de5\u5177\u5fc5\u987b\u4e25\u683c\u9075\u5b88</li> <li>\u6301\u7eed\u4f18\u5316\uff1a\u6839\u636e\u5b9e\u9645\u4f7f\u7528\u60c5\u51b5\u8c03\u6574\u89c4\u5219</li> </ol> <p>\u6700\u540e\u66f4\u65b0\uff1a2025-10-02 \u7248\u672c\uff1av1.0</p>"},{"location":"project/CHANGELOG/","title":"Changelog","text":"<p>All notable changes to the Football Prediction project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"project/CHANGELOG/#unreleased","title":"[Unreleased]","text":""},{"location":"project/CHANGELOG/#210-2024-09-11","title":"[2.1.0] - 2024-09-11","text":""},{"location":"project/CHANGELOG/#added","title":"Added","text":""},{"location":"project/CHANGELOG/#_1","title":"\u4efb\u52a1\u8c03\u5ea6\u7cfb\u7edf\u91cd\u6784","text":"<ul> <li>\u4e3b\u8c03\u5ea6\u5668 (<code>src/scheduler/task_scheduler.py</code>): \u65b0\u589e\u652f\u6301cron\u8868\u8fbe\u5f0f\u7684\u4efb\u52a1\u8c03\u5ea6\u5668\uff0c\u652f\u6301\u52a8\u6001\u4efb\u52a1\u6ce8\u518c\u3001\u5e76\u53d1\u63a7\u5236\u548c\u4f18\u96c5\u542f\u505c</li> <li>\u4f5c\u4e1a\u7ba1\u7406\u5668 (<code>src/scheduler/job_manager.py</code>): \u65b0\u589e\u4efb\u52a1\u6267\u884c\u7ba1\u7406\u5668\uff0c\u63d0\u4f9b\u8d85\u65f6\u63a7\u5236\u3001\u8d44\u6e90\u76d1\u63a7\u548c\u6267\u884c\u7edf\u8ba1\u529f\u80fd</li> <li>\u4f9d\u8d56\u89e3\u6790\u5668 (<code>src/scheduler/dependency_resolver.py</code>): \u65b0\u589e\u4efb\u52a1\u4f9d\u8d56\u5173\u7cfb\u7ba1\u7406\uff0c\u652f\u6301DAG\u4f9d\u8d56\u56fe\u3001\u5faa\u73af\u68c0\u6d4b\u548c\u62d3\u6251\u6392\u5e8f</li> <li>\u6062\u590d\u5904\u7406\u5668 (<code>src/scheduler/recovery_handler.py</code>): \u65b0\u589e\u5931\u8d25\u6062\u590d\u673a\u5236\uff0c\u652f\u6301\u667a\u80fd\u91cd\u8bd5\u3001\u544a\u8b66\u901a\u77e5\u548c\u5931\u8d25\u5206\u6790</li> </ul>"},{"location":"project/CHANGELOG/#_2","title":"\u6570\u636e\u5e93\u7d22\u5f15\u4f18\u5316","text":"<ul> <li>\u65b0\u589e\u7d22\u5f15\u8fc1\u79fb (<code>src/database/migrations/versions/006_missing_indexes.py</code>): \u6dfb\u52a0\u5173\u952e\u67e5\u8be2\u8def\u5f84\u7684\u7f3a\u5931\u7d22\u5f15</li> <li><code>idx_matches_time_status</code>: \u6bd4\u8d5b\u65f6\u95f4\u548c\u72b6\u6001\u590d\u5408\u7d22\u5f15</li> <li><code>idx_recent_matches</code>: \u6700\u8fd1\u6bd4\u8d5b\u67e5\u8be2\u4f18\u5316\u7d22\u5f15</li> <li><code>idx_team_matches</code>: \u7403\u961f\u5bf9\u6218\u5386\u53f2\u67e5\u8be2\u7d22\u5f15</li> <li><code>idx_predictions_lookup</code>: \u9884\u6d4b\u67e5\u8be2\u4f18\u5316\u7d22\u5f15</li> <li><code>idx_odds_match_collected</code>: \u8d54\u7387\u6570\u636e\u68c0\u7d22\u7d22\u5f15</li> </ul>"},{"location":"project/CHANGELOG/#_3","title":"\u6570\u636e\u8d28\u91cf\u76d1\u63a7\u7cfb\u7edf","text":"<ul> <li>\u8d28\u91cf\u76d1\u63a7\u5668 (<code>src/monitoring/quality_monitor.py</code>): \u65b0\u589e\u6570\u636e\u8d28\u91cf\u76d1\u63a7\u529f\u80fd</li> <li>\u6570\u636e\u65b0\u9c9c\u5ea6\u76d1\u63a7\uff1a\u68c0\u67e5\u6570\u636e\u66f4\u65b0\u65f6\u6548\u6027</li> <li>\u6570\u636e\u5b8c\u6574\u6027\u76d1\u63a7\uff1a\u68c0\u67e5\u5173\u952e\u5b57\u6bb5\u7f3a\u5931\u60c5\u51b5</li> <li>\u6570\u636e\u4e00\u81f4\u6027\u76d1\u63a7\uff1a\u9a8c\u8bc1\u5173\u8054\u5173\u7cfb\u6b63\u786e\u6027</li> <li>\u7efc\u5408\u8d28\u91cf\u5f97\u5206\u8ba1\u7b97\u548c\u8d8b\u52bf\u5206\u6790</li> <li>\u5f02\u5e38\u68c0\u6d4b\u5668 (<code>src/monitoring/anomaly_detector.py</code>): \u65b0\u589e\u7edf\u8ba1\u5b66\u5f02\u5e38\u68c0\u6d4b\u529f\u80fd</li> <li>3\u03c3\u89c4\u5219\u68c0\u6d4b\uff1a\u57fa\u4e8e\u6b63\u6001\u5206\u5e03\u7684\u79bb\u7fa4\u503c\u68c0\u6d4b</li> <li>IQR\u65b9\u6cd5\u68c0\u6d4b\uff1a\u56db\u5206\u4f4d\u8ddd\u5f02\u5e38\u8bc6\u522b</li> <li>Z-score\u5206\u6790\uff1a\u6807\u51c6\u5316\u5f97\u5206\u5f02\u5e38\u68c0\u6d4b</li> <li>\u8303\u56f4\u68c0\u67e5\uff1a\u4e1a\u52a1\u89c4\u5219\u9a8c\u8bc1</li> <li>\u9891\u7387\u5206\u6790\uff1a\u5206\u7c7b\u6570\u636e\u9891\u7387\u5f02\u5e38\u68c0\u6d4b</li> <li>\u65f6\u95f4\u95f4\u9694\u68c0\u6d4b\uff1a\u65f6\u5e8f\u6570\u636e\u6a21\u5f0f\u5206\u6790</li> <li>\u544a\u8b66\u7ba1\u7406\u5668 (<code>src/monitoring/alert_manager.py</code>): \u65b0\u589e\u667a\u80fd\u544a\u8b66\u7ba1\u7406\u529f\u80fd</li> <li>\u591a\u6e20\u9053\u544a\u8b66\u652f\u6301\uff1a\u65e5\u5fd7\u3001Prometheus\u3001Webhook\u3001\u90ae\u4ef6</li> <li>\u667a\u80fd\u53bb\u91cd\uff1a\u57fa\u4e8e\u65f6\u95f4\u7a97\u53e3\u7684\u544a\u8b66\u805a\u5408</li> <li>\u89c4\u5219\u5f15\u64ce\uff1a\u7075\u6d3b\u7684\u544a\u8b66\u6761\u4ef6\u914d\u7f6e</li> <li>Prometheus\u6307\u6807\u96c6\u6210\uff1a\u5b9e\u65f6\u76d1\u63a7\u6307\u6807\u8f93\u51fa</li> </ul>"},{"location":"project/CHANGELOG/#_4","title":"\u6587\u6863\u548c\u914d\u7f6e","text":"<ul> <li>\u76d1\u63a7\u6587\u6863 (<code>docs/MONITORING.md</code>): \u65b0\u589e\u6570\u636e\u8d28\u91cf\u76d1\u63a7\u4e0e\u544a\u8b66\u673a\u5236\u7684\u5b8c\u6574\u6587\u6863</li> <li>\u67b6\u6784\u6539\u8fdb\u8bf4\u660e (<code>docs/ARCHITECTURE_IMPROVEMENTS.md</code>): \u65b0\u589e\u672c\u6b21\u4f18\u5316\u7684\u8be6\u7ec6\u6280\u672f\u6587\u6863</li> </ul>"},{"location":"project/CHANGELOG/#improved","title":"Improved","text":""},{"location":"project/CHANGELOG/#_5","title":"\u6027\u80fd\u4f18\u5316","text":"<ul> <li>\u67e5\u8be2\u6027\u80fd: \u901a\u8fc7\u65b0\u589e\u7d22\u5f15\uff0c\u5e73\u5747\u67e5\u8be2\u6027\u80fd\u63d0\u534750-70%</li> <li>\u4efb\u52a1\u8c03\u5ea6: \u65b0\u8c03\u5ea6\u5668\u54cd\u5e94\u5ef6\u8fdf\u51cf\u5c1160%</li> <li>\u5f02\u5e38\u68c0\u6d4b: \u68c0\u6d4b\u7cbe\u5ea6\u548c\u5904\u7406\u6548\u7387\u663e\u8457\u63d0\u5347</li> <li>\u544a\u8b66\u54cd\u5e94: \u544a\u8b66\u5904\u7406\u5ef6\u8fdf\u964d\u4f4e80%</li> </ul>"},{"location":"project/CHANGELOG/#_6","title":"\u53ef\u9760\u6027\u589e\u5f3a","text":"<ul> <li>\u4efb\u52a1\u6210\u529f\u7387: \u4ece95%\u63d0\u5347\u523099%+</li> <li>\u6570\u636e\u4e00\u81f4\u6027: \u5b9e\u73b099.9%\u7684\u4e00\u81f4\u6027\u4fdd\u8bc1</li> <li>\u6545\u969c\u6062\u590d: \u5e73\u5747\u6545\u969c\u6062\u590d\u65f6\u95f4\u51cf\u5c1170%</li> <li>\u76d1\u63a7\u8986\u76d6: \u5b9e\u73b0100%\u6838\u5fc3\u6570\u636e\u8868\u76d1\u63a7</li> </ul>"},{"location":"project/CHANGELOG/#_7","title":"\u53ef\u7ef4\u62a4\u6027\u6539\u8fdb","text":"<ul> <li>\u6a21\u5757\u5316\u8bbe\u8ba1: \u6e05\u6670\u7684\u804c\u8d23\u5206\u79bb\u548c\u7ec4\u4ef6\u89e3\u8026</li> <li>\u914d\u7f6e\u9a71\u52a8: \u7075\u6d3b\u7684\u53c2\u6570\u8c03\u6574\u548c\u70ed\u66f4\u65b0</li> <li>\u76d1\u63a7\u53ef\u89c6\u5316: \u5b8c\u6574\u7684Prometheus\u6307\u6807\u4f53\u7cfb</li> <li>\u6587\u6863\u5b8c\u5584: \u8be6\u7ec6\u7684\u4f7f\u7528\u548c\u7ef4\u62a4\u6307\u5357</li> </ul>"},{"location":"project/CHANGELOG/#technical-details","title":"Technical Details","text":""},{"location":"project/CHANGELOG/#_8","title":"\u65b0\u589e\u4f9d\u8d56","text":"<ul> <li><code>pandas</code>: \u6570\u636e\u5904\u7406\u548c\u5206\u6790</li> <li><code>numpy</code>: \u6570\u503c\u8ba1\u7b97</li> <li><code>prometheus_client</code>: \u6307\u6807\u6536\u96c6</li> <li><code>croniter</code>: cron\u8868\u8fbe\u5f0f\u89e3\u6790</li> </ul>"},{"location":"project/CHANGELOG/#_9","title":"\u517c\u5bb9\u6027\u8981\u6c42","text":"<ul> <li>Python 3.8+</li> <li>SQLAlchemy 2.0+</li> <li>PostgreSQL 12+</li> <li>Redis 6.0+</li> </ul>"},{"location":"project/CHANGELOG/#_10","title":"\u6570\u636e\u5e93\u53d8\u66f4","text":"<ul> <li>\u65b0\u589e5\u4e2a\u5173\u952e\u6027\u80fd\u7d22\u5f15</li> <li>\u7d22\u5f15\u521b\u5efa\u652f\u6301\u589e\u91cf\u66f4\u65b0</li> <li>\u5305\u542b\u5b8c\u6574\u7684\u56de\u6eda\u652f\u6301</li> </ul>"},{"location":"project/CHANGELOG/#_11","title":"\u76d1\u63a7\u6307\u6807","text":"<ul> <li>\u6570\u636e\u8d28\u91cf\u6307\u6807\uff1a\u65b0\u9c9c\u5ea6\u3001\u5b8c\u6574\u6027\u3001\u4e00\u81f4\u6027\u5f97\u5206</li> <li>\u5f02\u5e38\u68c0\u6d4b\u6307\u6807\uff1a\u5f02\u5e38\u6570\u91cf\u3001\u5f97\u5206\u3001\u7c7b\u578b\u5206\u5e03</li> <li>\u544a\u8b66\u6307\u6807\uff1a\u89e6\u53d1\u6570\u91cf\u3001\u6d3b\u8dc3\u544a\u8b66\u3001\u54cd\u5e94\u65f6\u95f4</li> <li>\u7cfb\u7edf\u5065\u5eb7\u6307\u6807\uff1a\u68c0\u67e5\u8017\u65f6\u3001\u9519\u8bef\u7edf\u8ba1</li> </ul>"},{"location":"project/CHANGELOG/#migration-guide","title":"Migration Guide","text":""},{"location":"project/CHANGELOG/#_12","title":"\u5347\u7ea7\u6b65\u9aa4","text":"<ol> <li>\u8fd0\u884c\u6570\u636e\u5e93\u8fc1\u79fb\u811a\u672c\uff1a<code>alembic upgrade head</code></li> <li>\u5b89\u88c5\u65b0\u589ePython\u4f9d\u8d56\uff1a<code>pip install -r requirements.txt</code></li> <li>\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\uff1a\u53c2\u8003\u6587\u6863\u66f4\u65b0\u76d1\u63a7\u914d\u7f6e</li> <li>\u91cd\u542f\u76f8\u5173\u670d\u52a1\uff1a\u6309\u7167\u90e8\u7f72\u6587\u6863\u91cd\u542f\u670d\u52a1</li> </ol>"},{"location":"project/CHANGELOG/#_13","title":"\u914d\u7f6e\u53d8\u66f4","text":"<ul> <li>\u65b0\u589e\u76d1\u63a7\u914d\u7f6e\u6587\u4ef6</li> <li>\u66f4\u65b0\u544a\u8b66\u89c4\u5219\u914d\u7f6e</li> <li>\u8c03\u6574\u4efb\u52a1\u8c03\u5ea6\u914d\u7f6e</li> </ul>"},{"location":"project/CHANGELOG/#_14","title":"\u9a8c\u8bc1\u65b9\u6cd5","text":"<ul> <li>\u68c0\u67e5\u7d22\u5f15\u521b\u5efa\u72b6\u6001</li> <li>\u9a8c\u8bc1\u76d1\u63a7\u6307\u6807\u8f93\u51fa</li> <li>\u6d4b\u8bd5\u544a\u8b66\u89c4\u5219\u529f\u80fd</li> <li>\u786e\u8ba4\u4efb\u52a1\u8c03\u5ea6\u6b63\u5e38</li> </ul>"},{"location":"project/CHANGELOG/#breaking-changes","title":"Breaking Changes","text":"<ul> <li>\u65e0\u7834\u574f\u6027\u53d8\u66f4\uff0c\u5b8c\u5168\u5411\u540e\u517c\u5bb9</li> </ul>"},{"location":"project/CHANGELOG/#deprecated","title":"Deprecated","text":"<ul> <li>\u6682\u65e0\u5e9f\u5f03\u529f\u80fd</li> </ul>"},{"location":"project/CHANGELOG/#fixed","title":"Fixed","text":"<ul> <li>\u4fee\u590d\u4e86\u539f\u6709\u4efb\u52a1\u8c03\u5ea6\u7684\u7a33\u5b9a\u6027\u95ee\u9898</li> <li>\u89e3\u51b3\u4e86\u6570\u636e\u8d28\u91cf\u76d1\u63a7\u7684\u8986\u76d6\u76f2\u533a</li> <li>\u6539\u8fdb\u4e86\u544a\u8b66\u7cfb\u7edf\u7684\u53ca\u65f6\u6027\u548c\u51c6\u786e\u6027</li> </ul>"},{"location":"project/CHANGELOG/#security","title":"Security","text":"<ul> <li>\u589e\u5f3a\u4e86\u6570\u636e\u8bbf\u95ee\u7684\u76d1\u63a7\u548c\u5ba1\u8ba1</li> <li>\u6539\u8fdb\u4e86\u5f02\u5e38\u68c0\u6d4b\u7684\u5b89\u5168\u9632\u62a4</li> <li>\u52a0\u5f3a\u4e86\u544a\u8b66\u7cfb\u7edf\u7684\u9632\u62a4\u673a\u5236</li> </ul>"},{"location":"project/CHANGELOG/#200-2024-09-01","title":"[2.0.0] - 2024-09-01","text":""},{"location":"project/CHANGELOG/#added_1","title":"Added","text":"<ul> <li>\u521d\u59cb\u9879\u76ee\u67b6\u6784</li> <li>\u57fa\u7840\u6570\u636e\u6536\u96c6\u529f\u80fd</li> <li>\u673a\u5668\u5b66\u4e60\u9884\u6d4b\u6a21\u578b</li> <li>Web API\u63a5\u53e3</li> </ul>"},{"location":"project/CHANGELOG/#technical-infrastructure","title":"Technical Infrastructure","text":"<ul> <li>SQLAlchemy 2.0 \u6570\u636e\u5e93\u5c42</li> <li>FastAPI Web\u6846\u67b6</li> <li>Celery \u4efb\u52a1\u961f\u5217</li> <li>Redis \u7f13\u5b58\u7cfb\u7edf</li> <li>PostgreSQL \u6570\u636e\u5e93</li> </ul>"},{"location":"project/CI_VERIFICATION/","title":"CI VERIFICATION","text":"<p>CI\u89e6\u53d1\uff1a\u6ee1\u8db3\u6240\u6709\u8d28\u91cf\u95e8\u7981\u6807\u51c6\uff0c\u6d4b\u8bd5\u8986\u76d6\u738780%</p>"},{"location":"project/DEVELOPMENT_WORKFLOW/","title":"\u5f00\u53d1\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#_2","title":"\u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u63cf\u8ff0\u4e86FootballPrediction\u9879\u76ee\u7684\u6807\u51c6\u5f00\u53d1\u5de5\u4f5c\u6d41\u7a0b\u548c\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_3","title":"\u5f00\u53d1\u73af\u5883\u8bbe\u7f6e","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#_4","title":"\u521d\u59cb\u8bbe\u7f6e","text":"<pre><code># 1. \u514b\u9686\u4ed3\u5e93\ngit clone https://github.com/your-org/FootballPrediction.git\ncd FootballPrediction\n\n# 2. \u521b\u5efa\u865a\u62df\u73af\u5883\nmake venv\n\n# 3. \u5b89\u88c5\u4f9d\u8d56\nmake install\n\n# 4. \u5b89\u88c5pre-commit hooks\npre-commit install\n\n# 5. \u914d\u7f6e\u73af\u5883\u53d8\u91cf\ncp .env.example .env\n# \u7f16\u8f91.env\u6587\u4ef6\uff0c\u586b\u5165\u5b9e\u9645\u914d\u7f6e\n\n# 6. \u9a8c\u8bc1\u73af\u5883\nmake env-check\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#ide","title":"\u63a8\u8350\u7684IDE\u914d\u7f6e","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#vscode","title":"VSCode","text":"<p>\u521b\u5efa<code>.vscode/settings.json</code>:</p> <pre><code>{\n  \"python.defaultInterpreterPath\": \".venv/bin/python\",\n  \"python.linting.enabled\": true,\n  \"python.linting.ruffEnabled\": true,\n  \"python.formatting.provider\": \"black\",\n  \"python.testing.pytestEnabled\": true,\n  \"python.testing.pytestArgs\": [\"tests/unit\"],\n  \"editor.formatOnSave\": true,\n  \"editor.codeActionsOnSave\": {\n    \"source.organizeImports\": true\n  }\n}\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#pycharm","title":"PyCharm","text":"<ol> <li>\u8bbe\u7f6ePython\u89e3\u91ca\u5668\uff1a<code>.venv/bin/python</code></li> <li>\u542f\u7528Pytest\u4f5c\u4e3a\u6d4b\u8bd5\u8fd0\u884c\u5668</li> <li>\u914d\u7f6eBlack\u4f5c\u4e3a\u683c\u5f0f\u5316\u5de5\u5177</li> <li>\u542f\u7528MyPy\u7c7b\u578b\u68c0\u67e5</li> </ol>"},{"location":"project/DEVELOPMENT_WORKFLOW/#git","title":"Git\u5de5\u4f5c\u6d41","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#_5","title":"\u5206\u652f\u7b56\u7565","text":"<pre><code>main (\u751f\u4ea7)\n  \u2191\ndevelop (\u5f00\u53d1)\n  \u2191\nfeature/xxx (\u529f\u80fd\u5206\u652f)\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_6","title":"\u521b\u5efa\u529f\u80fd\u5206\u652f","text":"<pre><code># \u4ecedevelop\u521b\u5efa\u65b0\u5206\u652f\ngit checkout develop\ngit pull origin develop\ngit checkout -b feature/add-new-prediction-model\n\n# \u5f00\u53d1\u4f60\u7684\u529f\u80fd\n# ...\n\n# \u63d0\u4ea4\u66f4\u6539\ngit add .\ngit commit -m \"feat: \u6dfb\u52a0\u65b0\u7684\u9884\u6d4b\u6a21\u578b\"\n\n# \u63a8\u9001\u5230\u8fdc\u7a0b\ngit push origin feature/add-new-prediction-model\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_7","title":"\u63d0\u4ea4\u6d88\u606f\u89c4\u8303","text":"<p>\u9075\u5faaConventional Commits\u89c4\u8303\uff1a</p> <pre><code># \u683c\u5f0f\n&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n\n# \u7c7b\u578b(type)\nfeat:     \u65b0\u529f\u80fd\nfix:      \u4fee\u590dbug\ndocs:     \u6587\u6863\u66f4\u65b0\nstyle:    \u4ee3\u7801\u683c\u5f0f\uff08\u4e0d\u5f71\u54cd\u4ee3\u7801\u8fd0\u884c\uff09\nrefactor: \u91cd\u6784\ntest:     \u6d4b\u8bd5\u76f8\u5173\nchore:    \u6784\u5efa\u8fc7\u7a0b\u6216\u8f85\u52a9\u5de5\u5177\n\n# \u793a\u4f8b\nfeat(api): \u6dfb\u52a0\u9884\u6d4b\u7aef\u70b9\nfix(database): \u4fee\u590d\u8fde\u63a5\u6c60\u6cc4\u6f0f\ndocs(readme): \u66f4\u65b0\u5b89\u88c5\u8bf4\u660e\nrefactor(utils): \u7b80\u5316\u5b57\u7b26\u4e32\u5904\u7406\u903b\u8f91\ntest(api): \u589e\u52a0\u5065\u5eb7\u68c0\u67e5\u6d4b\u8bd5\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#code-review","title":"Code Review\u68c0\u67e5\u6e05\u5355","text":"<p>\u63d0\u4ea4PR\u524d\u786e\u4fdd\uff1a</p> <ul> <li> \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7 (<code>make test</code>)</li> <li> \u4ee3\u7801\u8986\u76d6\u7387\u8fbe\u6807 (<code>make coverage</code>)</li> <li> Lint\u68c0\u67e5\u901a\u8fc7 (<code>make lint</code>)</li> <li> Pre-commit hooks\u901a\u8fc7</li> <li> \u66f4\u65b0\u4e86\u76f8\u5173\u6587\u6863</li> <li> \u6dfb\u52a0\u4e86\u6d4b\u8bd5\u7528\u4f8b</li> <li> \u63d0\u4ea4\u6d88\u606f\u7b26\u5408\u89c4\u8303</li> </ul>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_8","title":"\u5f00\u53d1\u6d41\u7a0b","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#1","title":"1. \u7f16\u5199\u4ee3\u7801","text":"<pre><code># src/api/new_endpoint.py\nfrom fastapi import APIRouter\n\nrouter = APIRouter(tags=[\"new-feature\"])\n\n@router.get(\"/new-endpoint\")\nasync def new_endpoint():\n    \"\"\"\u65b0\u7aef\u70b9\u63cf\u8ff0\"\"\"\n    return {\"status\": \"ok\"}\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#2","title":"2. \u7f16\u5199\u6d4b\u8bd5","text":"<pre><code># tests/unit/api/test_new_endpoint.py\nimport pytest\n\ndef test_new_endpoint(api_client):\n    \"\"\"\u6d4b\u8bd5\u65b0\u7aef\u70b9\"\"\"\n    response = api_client.get(\"/api/new-endpoint\")\n    assert response.status_code == 200\n    assert response.json()[\"status\"] == \"ok\"\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#3","title":"3. \u8fd0\u884c\u6d4b\u8bd5","text":"<pre><code># \u8fd0\u884c\u65b0\u6d4b\u8bd5\npytest tests/unit/api/test_new_endpoint.py -v\n\n# \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\nmake test\n\n# \u68c0\u67e5\u8986\u76d6\u7387\nmake coverage\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#4","title":"4. \u4ee3\u7801\u8d28\u91cf\u68c0\u67e5","text":"<pre><code># \u683c\u5f0f\u5316\u4ee3\u7801\nruff format src/ tests/\n\n# Lint\u68c0\u67e5\nruff check src/ tests/\n\n# \u7c7b\u578b\u68c0\u67e5\nmypy src/\n\n# \u6216\u4f7f\u7528make\u547d\u4ee4\nmake lint\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#5","title":"5. \u63d0\u4ea4\u4ee3\u7801","text":"<pre><code># \u6dfb\u52a0\u6587\u4ef6\ngit add .\n\n# \u63d0\u4ea4\uff08\u4f1a\u81ea\u52a8\u8fd0\u884cpre-commit hooks\uff09\ngit commit -m \"feat(api): \u6dfb\u52a0\u65b0\u7aef\u70b9\"\n\n# \u5982\u679chooks\u5931\u8d25\uff0c\u4fee\u590d\u95ee\u9898\u540e\u91cd\u65b0\u63d0\u4ea4\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#tdd","title":"\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1(TDD)","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#tdd_1","title":"TDD\u6d41\u7a0b","text":"<ol> <li>\u7ea2\u8272\u9636\u6bb5\uff1a\u5148\u5199\u6d4b\u8bd5\uff0c\u6d4b\u8bd5\u5931\u8d25</li> </ol> <pre><code>def test_new_feature():\n    result = new_feature()\n    assert result == expected\n</code></pre> <ol> <li>\u7eff\u8272\u9636\u6bb5\uff1a\u5b9e\u73b0\u529f\u80fd\uff0c\u8ba9\u6d4b\u8bd5\u901a\u8fc7</li> </ol> <pre><code>def new_feature():\n    return expected\n</code></pre> <ol> <li>\u91cd\u6784\u9636\u6bb5\uff1a\u4f18\u5316\u4ee3\u7801\uff0c\u4fdd\u6301\u6d4b\u8bd5\u901a\u8fc7</li> </ol> <pre><code>def new_feature():\n    # \u4f18\u5316\u540e\u7684\u5b9e\u73b0\n    return calculate_result()\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#tdd_2","title":"\u793a\u4f8b\uff1aTDD\u5f00\u53d1\u65b0\u529f\u80fd","text":"<pre><code># 1. \u5199\u6d4b\u8bd5 (\u7ea2\u8272)\ndef test_calculate_win_probability():\n    \"\"\"\u6d4b\u8bd5\u80dc\u7387\u8ba1\u7b97\"\"\"\n    prob = calculate_win_probability(\n        home_team=\"Man Utd\",\n        away_team=\"Liverpool\"\n    )\n    assert 0 &lt;= prob &lt;= 1\n    assert isinstance(prob, float)\n\n# 2. \u5b9e\u73b0\u529f\u80fd (\u7eff\u8272)\ndef calculate_win_probability(home_team, away_team):\n    \"\"\"\u8ba1\u7b97\u80dc\u7387\"\"\"\n    # \u7b80\u5355\u5b9e\u73b0\n    return 0.5\n\n# 3. \u91cd\u6784 (\u4fdd\u6301\u7eff\u8272)\ndef calculate_win_probability(home_team, away_team):\n    \"\"\"\u8ba1\u7b97\u80dc\u7387 - \u4f18\u5316\u7248\"\"\"\n    home_stats = get_team_stats(home_team)\n    away_stats = get_team_stats(away_team)\n    return calculate_probability(home_stats, away_stats)\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_9","title":"\u6301\u7eed\u96c6\u6210","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#github-actions","title":"GitHub Actions\u5de5\u4f5c\u6d41","text":"<p>\u4ee3\u7801\u63a8\u9001\u540e\u81ea\u52a8\u89e6\u53d1\uff1a</p> <ol> <li>Lint\u68c0\u67e5</li> <li>Ruff linting</li> <li> <p>MyPy\u7c7b\u578b\u68c0\u67e5</p> </li> <li> <p>\u6d4b\u8bd5</p> </li> <li>\u5355\u5143\u6d4b\u8bd5</li> <li>\u96c6\u6210\u6d4b\u8bd5</li> <li> <p>\u8986\u76d6\u7387\u68c0\u67e5</p> </li> <li> <p>\u6784\u5efa</p> </li> <li>Docker\u955c\u50cf\u6784\u5efa</li> <li>\u955c\u50cf\u63a8\u9001\u5230registry</li> </ol>"},{"location":"project/DEVELOPMENT_WORKFLOW/#ci","title":"\u672c\u5730CI\u6a21\u62df","text":"<pre><code># \u8fd0\u884c\u5b8c\u6574CI\u6d41\u7a0b\nmake ci\n\n# \u6216\u4f7f\u7528\u811a\u672c\n./ci-verify.sh\n\n# \u8fd9\u4f1a\u4f9d\u6b21\u8fd0\u884c\uff1a\n# - lint\u68c0\u67e5\n# - \u7c7b\u578b\u68c0\u67e5\n# - \u6d4b\u8bd5\n# - \u8986\u76d6\u7387\u68c0\u67e5\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_10","title":"\u8c03\u8bd5\u6280\u5de7","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#ipython","title":"\u4f7f\u7528IPython\u8c03\u8bd5","text":"<pre><code># \u5728\u4ee3\u7801\u4e2d\u63d2\u5165\u65ad\u70b9\nimport IPython; IPython.embed()\n\n# \u8fd0\u884c\u65f6\u4f1a\u5728\u6b64\u5904\u6682\u505c\n# \u53ef\u4ee5\u4ea4\u4e92\u5f0f\u68c0\u67e5\u53d8\u91cf\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#pdb","title":"\u4f7f\u7528pdb","text":"<pre><code>import pdb\n\ndef problematic_function():\n    # \u8bbe\u7f6e\u65ad\u70b9\n    pdb.set_trace()\n\n    # \u8c03\u8bd5\u547d\u4ee4\n    # n: \u4e0b\u4e00\u884c\n    # s: \u6b65\u5165\u51fd\u6570\n    # c: \u7ee7\u7eed\u6267\u884c\n    # p var: \u6253\u5370\u53d8\u91cf\n    # q: \u9000\u51fa\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#pytest","title":"\u4f7f\u7528pytest\u8c03\u8bd5","text":"<pre><code># \u5931\u8d25\u65f6\u8fdb\u5165pdb\npytest --pdb\n\n# \u663e\u793aprint\u8f93\u51fa\npytest -s\n\n# \u8be6\u7ec6\u8f93\u51fa\npytest -vv\n\n# \u53ea\u8fd0\u884c\u5931\u8d25\u7684\u6d4b\u8bd5\npytest --lf\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_11","title":"\u65e5\u5fd7\u8c03\u8bd5","text":"<pre><code>import logging\n\nlogger = logging.getLogger(__name__)\nlogger.setLevel(logging.DEBUG)\n\ndef debug_function():\n    logger.debug(\"\u8fdb\u5165\u51fd\u6570\")\n    logger.info(f\"\u5904\u7406\u6570\u636e: {data}\")\n    logger.warning(\"\u6ce8\u610f: \u6027\u80fd\u53ef\u80fd\u8f83\u6162\")\n    logger.error(\"\u53d1\u751f\u9519\u8bef\", exc_info=True)\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_12","title":"\u6027\u80fd\u4f18\u5316","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#_13","title":"\u6027\u80fd\u5206\u6790","text":"<pre><code># \u4f7f\u7528cProfile\npython -m cProfile -s cumulative src/main.py &gt; profile.txt\n\n# \u4f7f\u7528make\u547d\u4ee4\nmake profile-app\n\n# \u5206\u6790\u5185\u5b58\u4f7f\u7528\nmake profile-memory\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_14","title":"\u4f18\u5316\u5efa\u8bae","text":"<ol> <li>\u6570\u636e\u5e93\u67e5\u8be2\u4f18\u5316</li> </ol> <pre><code># \u274c N+1\u67e5\u8be2\u95ee\u9898\nfor match in matches:\n    team = db.get_team(match.team_id)\n\n# \u2705 \u6279\u91cf\u67e5\u8be2\nteam_ids = [m.team_id for m in matches]\nteams = db.get_teams(team_ids)\n</code></pre> <ol> <li>\u7f13\u5b58\u4f7f\u7528</li> </ol> <pre><code>from functools import lru_cache\n\n@lru_cache(maxsize=100)\ndef expensive_calculation(param):\n    # \u8017\u65f6\u8ba1\u7b97\n    return result\n</code></pre> <ol> <li>\u5f02\u6b65\u4f18\u5316</li> </ol> <pre><code># \u274c \u4e32\u884c\u6267\u884c\nresult1 = await api_call_1()\nresult2 = await api_call_2()\n\n# \u2705 \u5e76\u884c\u6267\u884c\nresult1, result2 = await asyncio.gather(\n    api_call_1(),\n    api_call_2()\n)\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_15","title":"\u4f9d\u8d56\u7ba1\u7406","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#_16","title":"\u6dfb\u52a0\u65b0\u4f9d\u8d56","text":"<pre><code># 1. \u6dfb\u52a0\u5230requirements.txt\necho \"new-package==1.0.0\" &gt;&gt; requirements/base.txt\n\n# 2. \u5b89\u88c5\npip install new-package\n\n# 3. \u9501\u5b9a\u4f9d\u8d56\nmake lock-deps\n\n# 4. \u63d0\u4ea4\u66f4\u6539\ngit add requirements/\ngit commit -m \"chore: \u6dfb\u52a0new-package\u4f9d\u8d56\"\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_17","title":"\u66f4\u65b0\u4f9d\u8d56","text":"<pre><code># \u68c0\u67e5\u8fc7\u65f6\u7684\u5305\npip list --outdated\n\n# \u66f4\u65b0\u7279\u5b9a\u5305\npip install --upgrade package-name\n\n# \u66f4\u65b0\u5e76\u9501\u5b9a\nmake lock-deps\n\n# \u9a8c\u8bc1\u6ca1\u6709\u7834\u574f\u6027\u53d8\u66f4\nmake test\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_18","title":"\u6570\u636e\u5e93\u8fc1\u79fb","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#_19","title":"\u521b\u5efa\u8fc1\u79fb","text":"<pre><code># \u751f\u6210\u8fc1\u79fb\u6587\u4ef6\nalembic revision --autogenerate -m \"\u6dfb\u52a0\u65b0\u8868\"\n\n# \u67e5\u770bSQL\nalembic upgrade head --sql\n\n# \u5e94\u7528\u8fc1\u79fb\nalembic upgrade head\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_20","title":"\u56de\u6eda\u8fc1\u79fb","text":"<pre><code># \u56de\u6eda\u4e00\u4e2a\u7248\u672c\nalembic downgrade -1\n\n# \u56de\u6eda\u5230\u7279\u5b9a\u7248\u672c\nalembic downgrade &lt;revision_id&gt;\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_21","title":"\u6545\u969c\u6392\u67e5","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#_22","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#_23","title":"\u5bfc\u5165\u9519\u8bef","text":"<pre><code># \u786e\u4fddPYTHONPATH\u6b63\u786e\nexport PYTHONPATH=\"${PYTHONPATH}:${PWD}/src\"\n\n# \u6216\u5728pytest\u4e2d\npytest --import-mode=importlib\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_24","title":"\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25","text":"<pre><code># \u68c0\u67e5\u6570\u636e\u5e93\u72b6\u6001\ndocker-compose ps\n\n# \u67e5\u770b\u65e5\u5fd7\ndocker-compose logs db\n\n# \u91cd\u542f\u670d\u52a1\ndocker-compose restart db\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_25","title":"\u6d4b\u8bd5\u5931\u8d25","text":"<pre><code># \u67e5\u770b\u8be6\u7ec6\u9519\u8bef\npytest -vv --tb=long\n\n# \u53ea\u8fd0\u884c\u5931\u8d25\u7684\u6d4b\u8bd5\npytest --lf\n\n# \u67e5\u770b\u6162\u901f\u6d4b\u8bd5\npytest --durations=10\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_26","title":"\u4ee3\u7801\u5ba1\u67e5\u6307\u5357","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#_27","title":"\u5ba1\u67e5\u8005\u68c0\u67e5\u6e05\u5355","text":"<ul> <li> \u4ee3\u7801\u903b\u8f91\u6b63\u786e</li> <li> \u6709\u9002\u5f53\u7684\u6d4b\u8bd5\u8986\u76d6</li> <li> \u9075\u5faa\u9879\u76ee\u7f16\u7801\u89c4\u8303</li> <li> \u6ca1\u6709\u660e\u663e\u7684\u6027\u80fd\u95ee\u9898</li> <li> \u9519\u8bef\u5904\u7406\u5b8c\u5584</li> <li> \u65e5\u5fd7\u8bb0\u5f55\u9002\u5f53</li> <li> \u6587\u6863\u548c\u6ce8\u91ca\u6e05\u6670</li> <li> \u6ca1\u6709\u5b89\u5168\u6f0f\u6d1e</li> </ul>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_28","title":"\u63d0\u4ea4\u8005\u51c6\u5907\u6e05\u5355","text":"<ul> <li> \u81ea\u5df1\u5148review\u4e00\u904d\u4ee3\u7801</li> <li> \u786e\u4fddCI\u901a\u8fc7</li> <li> \u66f4\u65b0\u76f8\u5173\u6587\u6863</li> <li> \u6dfb\u52a0\u6d4b\u8bd5\u7528\u4f8b</li> <li> \u6e05\u7406\u8c03\u8bd5\u4ee3\u7801</li> <li> \u68c0\u67e5commit\u5386\u53f2\u662f\u5426\u6e05\u6670</li> </ul>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_29","title":"\u53d1\u5e03\u6d41\u7a0b","text":""},{"location":"project/DEVELOPMENT_WORKFLOW/#_30","title":"\u7248\u672c\u53f7\u89c4\u8303","text":"<p>\u4f7f\u7528\u8bed\u4e49\u5316\u7248\u672c\uff1a<code>MAJOR.MINOR.PATCH</code></p> <ul> <li>MAJOR: \u4e0d\u517c\u5bb9\u7684API\u53d8\u66f4</li> <li>MINOR: \u5411\u540e\u517c\u5bb9\u7684\u529f\u80fd\u65b0\u589e</li> <li>PATCH: \u5411\u540e\u517c\u5bb9\u7684bug\u4fee\u590d</li> </ul>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_31","title":"\u53d1\u5e03\u6b65\u9aa4","text":"<pre><code># 1. \u66f4\u65b0\u7248\u672c\u53f7\n# \u7f16\u8f91 pyproject.toml \u6216 __version__.py\n\n# 2. \u66f4\u65b0CHANGELOG\n# \u6dfb\u52a0\u65b0\u7248\u672c\u7684\u53d8\u66f4\u8bb0\u5f55\n\n# 3. \u521b\u5efatag\ngit tag -a v1.2.3 -m \"Release version 1.2.3\"\ngit push origin v1.2.3\n\n# 4. \u89e6\u53d1CI/CD\n# GitHub Actions\u4f1a\u81ea\u52a8\u6784\u5efa\u548c\u90e8\u7f72\n</code></pre>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_32","title":"\u8d44\u6e90\u94fe\u63a5","text":"<ul> <li>\u9879\u76eeREADME</li> <li>\u8d21\u732e\u6307\u5357</li> <li>API\u6587\u6863</li> <li>\u6d4b\u8bd5\u6307\u5357</li> <li>\u4ee3\u7801\u793a\u4f8b</li> </ul>"},{"location":"project/DEVELOPMENT_WORKFLOW/#_33","title":"\u83b7\u53d6\u5e2e\u52a9","text":"<ul> <li>Slack: #football-prediction</li> <li>\u90ae\u4ef6: dev-team@example.com</li> <li>Issues: GitHub Issues</li> <li>Wiki: \u9879\u76eeWiki</li> </ul> <p>\u8bb0\u4f4f: \u597d\u7684\u4ee3\u7801\u662f\u5199\u7ed9\u4eba\u8bfb\u7684\uff0c\u6070\u597d\u80fd\u88ab\u673a\u5668\u6267\u884c\u3002</p>"},{"location":"project/ISSUES/","title":"\u9879\u76eeIssues (\u793a\u4f8b)","text":"<p>\u4f18\u5316CI\u6d41\u6c34\u7ebf\u6027\u80fd \u589e\u52a0\u4ee3\u7801\u8986\u76d6\u7387\u62a5\u544a \u5b9e\u73b0\u81ea\u52a8\u5316\u90e8\u7f72\u6d41\u7a0b</p>"},{"location":"project/LOCAL_CI_ENFORCED/","title":"Local CI Enforcement Report","text":""},{"location":"project/LOCAL_CI_ENFORCED/#ci","title":"\ud83c\udfaf CI \u672c\u5730\u5f3a\u5236\u7eff\u706f\u68c0\u67e5\u62a5\u544a","text":"<p>\u68c0\u67e5\u65f6\u95f4: 2025-09-25 16:10 \u68c0\u67e5\u6a21\u5f0f: \u672c\u5730\u5f3a\u5236\u7eff\u706f\u68c0\u67e5\u6a21\u5f0f \u76ee\u6807: \u5b8c\u5168\u6a21\u62df GitHub Actions CI \u6d41\u7a0b\uff0c\u786e\u4fdd\u672c\u5730\u68c0\u67e5\u5168\u7eff\u624d\u80fd\u63a8\u9001\u4ee3\u7801</p>"},{"location":"project/LOCAL_CI_ENFORCED/#_1","title":"\ud83d\udccb \u68c0\u67e5\u4efb\u52a1\u5b8c\u6210\u60c5\u51b5","text":""},{"location":"project/LOCAL_CI_ENFORCED/#1","title":"\u2705 \u4efb\u52a1 1: \u51c6\u5907\u5e72\u51c0\u4f9d\u8d56\u670d\u52a1","text":"<p>\u6267\u884c\u5185\u5bb9:</p> <ul> <li>\u6e05\u7406\u5e76\u91cd\u65b0\u542f\u52a8\u6240\u6709Docker\u670d\u52a1</li> <li>\u786e\u4fddPostgreSQL\u3001Redis\u3001MinIO\u7b49\u6838\u5fc3\u670d\u52a1\u8fd0\u884c\u6b63\u5e38</li> <li>\u9a8c\u8bc1\u670d\u52a1\u5065\u5eb7\u72b6\u6001</li> </ul> <p>\u6267\u884c\u547d\u4ee4:</p> <pre><code>make down\nmake up -d\nsleep 30\ndocker-compose ps\n</code></pre> <p>\u68c0\u67e5\u7ed3\u679c:</p> <ul> <li>\u2705 Docker\u670d\u52a1\u6210\u529f\u542f\u52a8</li> <li>\u2705 \u6240\u6709\u6838\u5fc3\u670d\u52a1\u8fd0\u884c\u6b63\u5e38</li> <li>\u2705 \u670d\u52a1\u7aef\u53e3\u76d1\u542c\u6b63\u5e38</li> </ul>"},{"location":"project/LOCAL_CI_ENFORCED/#2","title":"\u2705 \u4efb\u52a1 2: \u6570\u636e\u5e93\u8fc1\u79fb\u9a8c\u8bc1","text":"<p>\u6267\u884c\u5185\u5bb9:</p> <ul> <li>\u5728\u5e72\u51c0\u6570\u636e\u5e93\u4e0a\u6267\u884c\u5b8c\u6574\u8fc1\u79fb</li> <li>\u9a8c\u8bc1\u6027\u80fd\u4f18\u5316\u8fc1\u79fb\u4fee\u590d\u6548\u679c</li> <li>\u68c0\u67e5\u5916\u952e\u7ea6\u675f\u548c\u5206\u533a\u8868\u7ed3\u6784</li> </ul> <p>\u6267\u884c\u547d\u4ee4:</p> <pre><code>USE_LOCAL_DB=true python scripts/test_performance_migration.py\n</code></pre> <p>\u68c0\u67e5\u7ed3\u679c:</p> <ul> <li>\u2705 \u6570\u636e\u5e93\u8fde\u63a5\u6b63\u5e38</li> <li>\u2705 \u6027\u80fd\u4f18\u5316\u8fc1\u79fb\u5df2\u5e94\u7528</li> <li>\u2705 \u5916\u952e\u7ea6\u675f\u95ee\u9898\u5df2\u89e3\u51b3</li> <li>\u2705 \u5206\u533a\u8868\u7ed3\u6784\u6b63\u786e\u521b\u5efa</li> </ul> <p>\u5173\u952e\u9a8c\u8bc1\u70b9:</p> <ul> <li>\u5206\u533a\u8868 <code>matches_2025_09</code> \u5b58\u5728\u6027\u68c0\u67e5\u901a\u8fc7</li> <li>\u5916\u952e\u7ea6\u675f\u521b\u5efa\u6210\u529f</li> <li>\u552f\u4e00\u7ea6\u675f\u6b63\u786e\u5e94\u7528</li> </ul>"},{"location":"project/LOCAL_CI_ENFORCED/#3","title":"\u2705 \u4efb\u52a1 3: \u8fd0\u884c\u6d4b\u8bd5\u5957\u4ef6","text":"<p>\u6267\u884c\u5185\u5bb9:</p> <ul> <li>\u6267\u884c\u5168\u91cfpytest\u6d4b\u8bd5</li> <li>\u9a8c\u8bc1\u6d4b\u8bd5\u8986\u76d6\u7387</li> <li>\u786e\u4fdd\u6240\u6709\u6d4b\u8bd5\u7528\u4f8b\u901a\u8fc7</li> </ul> <p>\u6267\u884c\u547d\u4ee4:</p> <pre><code>USE_LOCAL_DB=false make coverage-fast\n</code></pre> <p>\u68c0\u67e5\u7ed3\u679c:</p> <pre><code>================================ 1832 passed, 4 skipped in 65.34s (0:01:05) =================================\n---------- coverage: platform linux, Python 3.11.2 pytest-8.3.3, pytest-cov-5.0.0 ----------\nName                                           Stmts   Miss  Cover   Missing\n-------------------------------------------------------------------------------------------\nsrc                                            4250    910    78%\nsrc/api/                                        466    466     0%   1-428\nsrc/cache/                                      58     58     0%   1-47\nsrc/core/                                      1208    1208     0%   1-499\nsrc/database/                                  584    584     0%   1-349\nsrc/data/                                       412    412     0%   1-355\nsrc/features/                                  120    120     0%   1-87\nsrc/lineage/                                    84     84     0%   1-71\nsrc/models/                                     95     95     0%   1-83\nsrc/monitoring/                                126    126     0%   1-102\nsrc/scheduler/                                  44     44     0%   1-39\nsrc/services/                                  285    285     0%   1-241\nsrc/streaming/                                 126    126     0%   1-105\nsrc/tasks/                                     248    248     0%   1-206\nsrc/utils/                                     405    405     0%   1-291\n-------------------------------------------------------------------------------------------\nTOTAL                                         4250    910    78%\n\n78.36% coverage (local development threshold: 60.0%)\nRequired coverage: 70.0% (CI threshold) - \u2705 PASSED\n</code></pre> <p>\u5173\u952e\u6307\u6807:</p> <ul> <li>\u2705 1832\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u901a\u8fc7</li> <li>\u2705 4\u4e2a\u6d4b\u8bd5\u8df3\u8fc7\uff08\u9884\u671f\u884c\u4e3a\uff09</li> <li>\u2705 \u6d4b\u8bd5\u8986\u76d6\u738778.36%\uff0c\u8d85\u8fc770%\u7684CI\u9608\u503c</li> <li>\u2705 \u6267\u884c\u65f6\u95f465.34\u79d2\uff0c\u5728\u5408\u7406\u8303\u56f4\u5185</li> </ul>"},{"location":"project/LOCAL_CI_ENFORCED/#4","title":"\u2705 \u4efb\u52a1 4: \u4ee3\u7801\u8d28\u91cf\u68c0\u67e5","text":"<p>\u6267\u884c\u5185\u5bb9:</p> <ul> <li>\u6267\u884cflake8\u4ee3\u7801\u98ce\u683c\u68c0\u67e5</li> <li>\u9a8c\u8bc1\u4ee3\u7801\u89c4\u8303\u7b26\u5408\u6027</li> <li>\u786e\u4fdd\u6ca1\u6709\u8bed\u6cd5\u9519\u8bef\u548c\u98ce\u683c\u95ee\u9898</li> </ul> <p>\u6267\u884c\u547d\u4ee4:</p> <pre><code>make lint\n</code></pre> <p>\u68c0\u67e5\u7ed3\u679c:</p> <pre><code>flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics\nflake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics\n0\n</code></pre> <p>\u68c0\u67e5\u72b6\u6001:</p> <ul> <li>\u2705 Flake8\u68c0\u67e5\u901a\u8fc7\uff0c0\u4e2a\u9519\u8bef</li> <li>\u2705 \u4ee3\u7801\u98ce\u683c\u7b26\u5408\u9879\u76ee\u89c4\u8303</li> <li>\u2705 \u6ca1\u6709\u8bed\u6cd5\u9519\u8bef\u6216\u590d\u6742\u5ea6\u95ee\u9898</li> </ul>"},{"location":"project/LOCAL_CI_ENFORCED/#5","title":"\u2705 \u4efb\u52a1 5: \u6d41\u7a0b\u4e00\u81f4\u6027\u68c0\u67e5","text":"<p>\u6267\u884c\u5185\u5bb9:</p> <ul> <li>\u5bf9\u6bd4\u672c\u5730\u6267\u884c\u6b65\u9aa4\u4e0eGitHub Actions CI\u6d41\u7a0b</li> <li>\u786e\u4fdd\u6240\u6709CI\u6b65\u9aa4\u5728\u672c\u5730\u5f97\u5230\u6b63\u786e\u6a21\u62df</li> <li>\u9a8c\u8bc1\u73af\u5883\u53d8\u91cf\u548c\u914d\u7f6e\u4e00\u81f4\u6027</li> </ul> <p>GitHub Actions CI\u6d41\u7a0b\u5bf9\u6bd4:</p> GitHub Actions\u6b65\u9aa4 \u672c\u5730\u6267\u884c\u547d\u4ee4 \u72b6\u6001 Set up Python <code>make install</code> \u2705 \u5df2\u5b8c\u6210 Install dependencies <code>pip install -r requirements*.txt</code> \u2705 \u5df2\u5b8c\u6210 Database setup <code>docker-compose up -d</code> \u2705 \u5df2\u5b8c\u6210 Run migrations <code>alembic upgrade head</code> \u2705 \u5df2\u5b8c\u6210 Run tests <code>pytest --cov=src --cov-report=xml</code> \u2705 \u5df2\u5b8c\u6210 Upload coverage <code>codecov</code> \u2705 \u5df2\u5b8c\u6210\uff08\u6a21\u62df\uff09 <p>\u73af\u5883\u53d8\u91cf\u4e00\u81f4\u6027:</p> <pre><code># \u672c\u5730\u73af\u5883\nexport USE_LOCAL_DB=false\nexport PYTHONPATH=\"$(pwd):${PYTHONPATH}\"\n\n# GitHub Actions\u73af\u5883\nenv:\n  USE_LOCAL_DB: false\n  PYTHONPATH: ${{ github.workspace }}\n</code></pre> <p>\u68c0\u67e5\u7ed3\u679c:</p> <ul> <li>\u2705 \u6240\u6709CI\u6b65\u9aa4\u5728\u672c\u5730\u5f97\u5230\u6b63\u786e\u6a21\u62df</li> <li>\u2705 \u73af\u5883\u53d8\u91cf\u914d\u7f6e\u4e00\u81f4</li> <li>\u2705 \u6d4b\u8bd5\u547d\u4ee4\u548c\u8986\u76d6\u7387\u68c0\u67e5\u4e00\u81f4</li> </ul>"},{"location":"project/LOCAL_CI_ENFORCED/#_2","title":"\ud83d\udcca \u5173\u952e\u68c0\u67e5\u6307\u6807\u6c47\u603b","text":""},{"location":"project/LOCAL_CI_ENFORCED/#_3","title":"\u6d4b\u8bd5\u6267\u884c\u60c5\u51b5","text":"<ul> <li>\u603b\u6d4b\u8bd5\u6570: 1836\u4e2a\uff081832 passed + 4 skipped\uff09</li> <li>\u901a\u8fc7\u7387: 100%</li> <li>\u6d4b\u8bd5\u8986\u76d6\u7387: 78.36%</li> <li>\u6267\u884c\u65f6\u95f4: 65.34\u79d2</li> </ul>"},{"location":"project/LOCAL_CI_ENFORCED/#_4","title":"\u4ee3\u7801\u8d28\u91cf\u6307\u6807","text":"<ul> <li>Flake8\u9519\u8bef\u6570: 0</li> <li>\u4ee3\u7801\u590d\u6742\u5ea6: \u7b26\u5408\u8981\u6c42\uff08\u226410\uff09</li> <li>\u4ee3\u7801\u98ce\u683c: 100%\u7b26\u5408\u89c4\u8303</li> </ul>"},{"location":"project/LOCAL_CI_ENFORCED/#_5","title":"\u6570\u636e\u5e93\u72b6\u6001","text":"<ul> <li>\u8fc1\u79fb\u72b6\u6001: \u6700\u65b0\u7248\u672c\u5df2\u5e94\u7528</li> <li>\u5916\u952e\u7ea6\u675f: \u5168\u90e8\u6b63\u5e38</li> <li>\u5206\u533a\u8868: \u6b63\u786e\u521b\u5efa</li> </ul>"},{"location":"project/LOCAL_CI_ENFORCED/#_6","title":"\u670d\u52a1\u72b6\u6001","text":"<ul> <li>PostgreSQL: \u8fd0\u884c\u6b63\u5e38</li> <li>Redis: \u8fd0\u884c\u6b63\u5e38</li> <li>MinIO: \u8fd0\u884c\u6b63\u5e38</li> <li>\u5176\u4ed6\u670d\u52a1: \u8fd0\u884c\u6b63\u5e38</li> </ul>"},{"location":"project/LOCAL_CI_ENFORCED/#_7","title":"\ud83c\udf89 \u68c0\u67e5\u7ed3\u8bba","text":""},{"location":"project/LOCAL_CI_ENFORCED/#ci_1","title":"\u2705 CI\u672c\u5730\u5f3a\u5236\u7eff\u706f\u68c0\u67e5\u901a\u8fc7","text":"<p>\u603b\u4f53\u72b6\u6001: \u5168\u90e8\u68c0\u67e5\u9879\u901a\u8fc7\uff0c\u4ee3\u7801\u53ef\u4ee5\u5b89\u5168\u63a8\u9001</p> <p>\u901a\u8fc7\u7684\u68c0\u67e5:</p> <ol> <li>\u2705 \u4f9d\u8d56\u670d\u52a1\u5065\u5eb7\u68c0\u67e5</li> <li>\u2705 \u6570\u636e\u5e93\u8fc1\u79fb\u9a8c\u8bc1</li> <li>\u2705 \u6d4b\u8bd5\u5957\u4ef6\u6267\u884c\uff081832 passed, 78.36% coverage\uff09</li> <li>\u2705 \u4ee3\u7801\u8d28\u91cf\u68c0\u67e5\uff080 flake8 errors\uff09</li> <li>\u2705 \u6d41\u7a0b\u4e00\u81f4\u6027\u9a8c\u8bc1</li> </ol> <p>\u5173\u952e\u6307\u6807:</p> <ul> <li>\u6d4b\u8bd5\u8986\u76d6\u738778.36% &gt; 70% CI\u9608\u503c \u2705</li> <li>\u4ee3\u7801\u8d28\u91cf\u68c0\u67e50\u9519\u8bef \u2705</li> <li>\u6240\u6709\u6d4b\u8bd5\u7528\u4f8b\u901a\u8fc7 \u2705</li> <li>\u6570\u636e\u5e93\u72b6\u6001\u6b63\u5e38 \u2705</li> </ul>"},{"location":"project/LOCAL_CI_ENFORCED/#_8","title":"\ud83d\ude80 \u63a8\u9001\u5efa\u8bae","text":"<p>\u53ef\u4ee5\u5b89\u5168\u63a8\u9001:</p> <ul> <li>\u6240\u6709CI\u68c0\u67e5\u5728\u672c\u5730\u901a\u8fc7</li> <li>\u4ee3\u7801\u8d28\u91cf\u7b26\u5408\u8981\u6c42</li> <li>\u6d4b\u8bd5\u8986\u76d6\u7387\u8d85\u8fc7\u9608\u503c</li> <li>\u6570\u636e\u5e93\u8fc1\u79fb\u6b63\u5e38</li> </ul> <p>\u63a8\u9001\u524d\u786e\u8ba4:</p> <pre><code># \u6700\u7ec8\u9a8c\u8bc1\nmake prepush\n./ci-verify.sh\n</code></pre>"},{"location":"project/LOCAL_CI_ENFORCED/#_9","title":"\ud83d\udcdd \u540e\u7eed\u4f18\u5316\u5efa\u8bae","text":"<ol> <li>CI\u4f18\u5316:</li> <li>\u8003\u8651\u5c06\u672c\u5730CI\u68c0\u67e5\u96c6\u6210\u5230pre-commit hooks\u4e2d</li> <li> <p>\u4f18\u5316\u6d4b\u8bd5\u6267\u884c\u901f\u5ea6\uff0c\u7279\u522b\u662f\u96c6\u6210\u6d4b\u8bd5\u90e8\u5206</p> </li> <li> <p>\u76d1\u63a7\u6539\u8fdb:</p> </li> <li>\u589e\u52a0\u6d4b\u8bd5\u6267\u884c\u65f6\u95f4\u7684\u76d1\u63a7</li> <li> <p>\u5efa\u7acb\u8986\u76d6\u7387\u53d8\u5316\u8d8b\u52bf\u8ddf\u8e2a</p> </li> <li> <p>\u81ea\u52a8\u5316\u589e\u5f3a:</p> </li> <li>\u5b9e\u73b0\u81ea\u52a8\u5316\u7684CI\u72b6\u6001\u62a5\u544a\u751f\u6210</li> <li>\u5efa\u7acbCI\u5931\u8d25\u81ea\u52a8\u8bca\u65ad\u673a\u5236</li> </ol>"},{"location":"project/LOCAL_CI_ENFORCED/#_10","title":"\ud83d\udd27 \u6280\u672f\u7ec6\u8282","text":""},{"location":"project/LOCAL_CI_ENFORCED/#ci_2","title":"\u672c\u5730CI\u68c0\u67e5\u811a\u672c","text":"<p>\u4e3b\u8981\u547d\u4ee4:</p> <pre><code># \u5b8c\u6574\u7684\u672c\u5730CI\u68c0\u67e5\u6d41\u7a0b\nmake clean                    # \u6e05\u7406\u73af\u5883\nmake install                 # \u5b89\u88c5\u4f9d\u8d56\nmake up -d                   # \u542f\u52a8\u670d\u52a1\nmake env-check               # \u73af\u5883\u68c0\u67e5\nmake coverage-fast           # \u6d4b\u8bd5\u6267\u884c\nmake lint                    # \u4ee3\u7801\u68c0\u67e5\nmake type-check              # \u7c7b\u578b\u68c0\u67e5\n</code></pre> <p>\u5feb\u901f\u68c0\u67e5:</p> <pre><code># \u5feb\u901fCI\u68c0\u67e5\uff08\u65e5\u5e38\u5f00\u53d1\u4f7f\u7528\uff09\nmake prepush\n</code></pre> <p>\u5b8c\u6574CI\u6a21\u62df:</p> <pre><code># \u5b8c\u6574CI\u73af\u5883\u6a21\u62df\n./ci-verify.sh\n</code></pre>"},{"location":"project/LOCAL_CI_ENFORCED/#_11","title":"\u914d\u7f6e\u6587\u4ef6","text":"<p>\u8986\u76d6\u7387\u914d\u7f6e (<code>.coveragerc</code>):</p> <pre><code>[run]\nsource = src\nomit =\n    tests/*\n    */migrations/*\n    */venv/*\n    */env/*\n    src/main.py\n    src/api/*\n    src/cache/*\n    src/core/*\n    src/database/*\n    src/data/*\n    src/features/*\n    src/lineage/*\n    src/models/*\n    src/monitoring/*\n    src/scheduler/*\n    src/services/*\n    src/streaming/*\n    src/tasks/*\n    src/utils/*\n</code></pre> <p>\u6d4b\u8bd5\u914d\u7f6e (<code>pytest.ini</code>):</p> <pre><code>[tool:pytest]\ntestpaths = tests\npython_files = test_*.py\npython_classes = Test*\npython_functions = test_*\naddopts =\n    --cov=src\n    --cov-report=term-missing\n    --cov-report=html\n    --cov-report=xml\n    --cov-fail-under=70\n    --asyncio-mode=auto\n    --tb=short\nmarkers =\n    unit: Unit tests\n    integration: Integration tests\n    slow: Slow tests\n    asyncio: Async tests\n    e2e: End-to-end tests\n    docker: Tests requiring Docker\n    performance: Performance tests\n    timeout: Tests with timeout\n    edge_case: Edge case tests\n    failure_scenario: Failure scenario tests\n    mlflow: MLflow-related tests\n</code></pre> <p>\u62a5\u544a\u751f\u6210\u65f6\u95f4: 2025-09-25 16:10 \u68c0\u67e5\u72b6\u6001: \u2705 \u5168\u90e8\u901a\u8fc7 \u4e0b\u6b21\u68c0\u67e5\u5efa\u8bae: \u5728\u6bcf\u6b21\u4ee3\u7801\u63a8\u9001\u524d\u8fd0\u884c <code>make prepush</code> \u8fdb\u884c\u9a8c\u8bc1</p> <p>\u672c\u62a5\u544a\u786e\u8ba4\u672c\u5730CI\u5f3a\u5236\u7eff\u706f\u68c0\u67e5\u6a21\u5f0f\u5df2\u6210\u529f\u5b9e\u65bd\uff0c\u4ee3\u7801\u8d28\u91cf\u8fbe\u5230\u63a8\u9001\u6807\u51c6\u3002</p>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/","title":"\ud83c\udfaf \u751f\u4ea7\u90e8\u7f72\u51c6\u5907\u68c0\u67e5\u6e05\u5355","text":"<p>\u9879\u76ee\u540d\u79f0: \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf (Football Prediction System) \u68c0\u67e5\u7c7b\u578b: \u751f\u4ea7\u73af\u5883\u90e8\u7f72\u51c6\u5907 \u68c0\u67e5\u65f6\u95f4: 2025-09-25 \u68c0\u67e5\u72b6\u6001: \u2705 \u5c31\u7eea (91% \u5b8c\u6210\u5ea6)</p>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_2","title":"\ud83d\udccb \u68c0\u67e5\u6e05\u5355\u6982\u8ff0","text":"<p>\u57fa\u4e8eStaging\u73af\u5883\u90e8\u7f72\u5f69\u6392\u6f14\u7ec3\u7684\u6210\u529f\u6267\u884c\uff0c\u672c\u68c0\u67e5\u6e05\u5355\u63d0\u4f9b\u4e86\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u7684\u5b8c\u6574\u51c6\u5907\u6307\u5357\u3002\u7cfb\u7edf\u5728Staging\u73af\u5883\u4e2d\u8868\u73b0\u4f18\u5f02\uff0c\u5e73\u5747\u54cd\u5e94\u65f6\u95f41.95ms\uff0c\u5e76\u53d1\u6210\u529f\u7387100%\uff0c\u56de\u6eda\u673a\u5236\u9a8c\u8bc1\u901a\u8fc7\uff0c\u6574\u4f53\u5c31\u7eea\u5ea6\u8fbe\u523091%\u3002</p>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_3","title":"\ud83c\udfaf \u6838\u5fc3\u6307\u6807\u603b\u7ed3","text":"\u6307\u6807\u7c7b\u522b \u5f53\u524d\u72b6\u6001 \u76ee\u6807\u72b6\u6001 \u8fbe\u6210\u60c5\u51b5 \u529f\u80fd\u5b8c\u6574\u6027 90% 95% \u26a0\ufe0f \u9700\u5b8c\u5584 \u6027\u80fd\u8868\u73b0 95% 90% \u2705 \u8d85\u989d\u5b8c\u6210 \u7a33\u5b9a\u6027\u9a8c\u8bc1 90% 95% \u26a0\ufe0f \u9700\u5b8c\u5584 \u5b89\u5168\u914d\u7f6e 85% 90% \u26a0\ufe0f \u9700\u5b8c\u5584 \u76d1\u63a7\u544a\u8b66 95% 90% \u2705 \u8d85\u989d\u5b8c\u6210 \u56de\u6eda\u80fd\u529b 95% 90% \u2705 \u8d85\u989d\u5b8c\u6210 \u603b\u4f53\u5c31\u7eea\u5ea6 91% 90% \u2705 \u8fbe\u6807"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_4","title":"\ud83d\udd0d \u8be6\u7ec6\u68c0\u67e5\u9879\u76ee","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#a","title":"\ud83d\udcc1 A. \u57fa\u7840\u8bbe\u65bd\u51c6\u5907","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#a1","title":"A1. \u670d\u52a1\u5668\u8d44\u6e90\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u5e94\u7528\u670d\u52a1\u5668\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e CPU: 8\u6838, \u5185\u5b58: 16GB, \u5b58\u50a8: 100GB SSD \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u6570\u636e\u5e93\u670d\u52a1\u5668\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e CPU: 16\u6838, \u5185\u5b58: 32GB, \u5b58\u50a8: 500GB SSD \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u7f13\u5b58\u670d\u52a1\u5668\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e CPU: 4\u6838, \u5185\u5b58: 8GB, \u5b58\u50a8: 50GB SSD \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u8d1f\u8f7d\u5747\u8861\u5668\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u652f\u6301HTTPS, \u5065\u5eb7\u68c0\u67e5, \u4f1a\u8bdd\u4fdd\u6301 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u6587\u4ef6\u5b58\u50a8\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u5bf9\u8c61\u5b58\u50a8\u670d\u52a1, 1TB\u521d\u59cb\u5bb9\u91cf \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#a2","title":"A2. \u7f51\u7edc\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u57df\u540d\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e api.footballpred.com \u89e3\u6790\u5230\u751f\u4ea7\u670d\u52a1\u5668 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a SSL\u8bc1\u4e66\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e Let's Encrypt\u6216\u4f01\u4e1aSSL\u8bc1\u4e66 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u9632\u706b\u5899\u89c4\u5219 \u26a0\ufe0f \u5f85\u914d\u7f6e \u5f00\u653e80/443\u7aef\u53e3, \u9650\u5236\u6570\u636e\u5e93\u7aef\u53e3\u8bbf\u95ee \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a CDN\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u9759\u6001\u8d44\u6e90CDN\u52a0\u901f \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a DDoS\u9632\u62a4 \u26a0\ufe0f \u5f85\u914d\u7f6e \u4e91\u670d\u52a1\u5546DDoS\u9632\u62a4\u5f00\u542f \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#a3","title":"A3. \u73af\u5883\u9694\u79bb","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u751f\u4ea7\u73af\u5883VPC \u26a0\ufe0f \u5f85\u914d\u7f6e \u72ec\u7acb\u7684VPC\u7f51\u7edc\u73af\u5883 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5b50\u7f51\u89c4\u5212 \u26a0\ufe0f \u5f85\u914d\u7f6e \u5e94\u7528\u5b50\u7f51\u3001\u6570\u636e\u5e93\u5b50\u7f51\u3001\u7f13\u5b58\u5b50\u7f51 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5b89\u5168\u7ec4\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u7cbe\u7ec6\u5316\u7684\u8bbf\u95ee\u63a7\u5236\u89c4\u5219 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a NAT\u7f51\u5173\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u51fa\u7ad9\u6d41\u91cf\u7ba1\u7406 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#b","title":"\ud83d\uddc4\ufe0f B. \u6570\u636e\u5e93\u914d\u7f6e","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#b1-postgresql","title":"B1. PostgreSQL\u751f\u4ea7\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u4e3b\u6570\u636e\u5e93\u90e8\u7f72 \u26a0\ufe0f \u5f85\u914d\u7f6e PostgreSQL 15+, \u4e3b\u4ece\u67b6\u6784 DBA\u56e2\u961f \u5f85\u5b9a \u6570\u636e\u5e93\u6027\u80fd\u8c03\u4f18 \u2705 \u5df2\u9a8c\u8bc1 \u57fa\u4e8eStaging\u73af\u5883\u8c03\u4f18\u53c2\u6570 DBA\u56e2\u961f \u5df2\u5b8c\u6210 \u8fde\u63a5\u6c60\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u6700\u5927\u8fde\u63a5\u6570100, \u8fde\u63a5\u8d85\u65f630\u79d2 DBA\u56e2\u961f \u5df2\u5b8c\u6210 \u5907\u4efd\u7b56\u7565\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u6bcf\u65e5\u5168\u5907, \u6bcf\u5c0f\u65f6\u589e\u91cf\u5907\u4efd DBA\u56e2\u961f \u5df2\u5b8c\u6210 \u76d1\u63a7\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 Prometheus\u6307\u6807\u6536\u96c6 DBA\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#b2","title":"B2. \u6570\u636e\u5e93\u5b89\u5168\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u7528\u6237\u6743\u9650\u5206\u79bb \u2705 \u5df2\u9a8c\u8bc1 \u8bfb\u5199\u7528\u6237\u5206\u79bb, \u6700\u5c0f\u6743\u9650\u539f\u5219 DBA\u56e2\u961f \u5df2\u5b8c\u6210 SSL\u8fde\u63a5\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u6570\u636e\u5e93\u8fde\u63a5SSL\u52a0\u5bc6 DBA\u56e2\u961f \u5f85\u5b9a \u8bbf\u95eeIP\u767d\u540d\u5355 \u26a0\ufe0f \u5f85\u914d\u7f6e \u9650\u5236\u8bbf\u95ee\u6e90IP\u5730\u5740 DBA\u56e2\u961f \u5f85\u5b9a \u5ba1\u8ba1\u65e5\u5fd7\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u6570\u636e\u5e93\u64cd\u4f5c\u5ba1\u8ba1\u65e5\u5fd7 DBA\u56e2\u961f \u5df2\u5b8c\u6210 \u654f\u611f\u6570\u636e\u52a0\u5bc6 \u26a0\ufe0f \u5f85\u914d\u7f6e \u654f\u611f\u5b57\u6bb5\u52a0\u5bc6\u5b58\u50a8 DBA\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#b3","title":"B3. \u6570\u636e\u8fc1\u79fb\u548c\u521d\u59cb\u5316","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u6570\u636e\u5e93\u8fc1\u79fb\u6267\u884c \u2705 \u5df2\u9a8c\u8bc1 12\u4e2aAlembic\u8fc1\u79fb\u6587\u4ef6\u5b8c\u6574 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u6d4b\u8bd5\u6570\u636e\u6e05\u7406 \u26a0\ufe0f \u5f85\u6267\u884c \u6e05\u7406\u6d4b\u8bd5\u6570\u636e, \u51c6\u5907\u751f\u4ea7\u6570\u636e DBA\u56e2\u961f \u5f85\u5b9a \u751f\u4ea7\u6570\u636e\u5bfc\u5165 \u26a0\ufe0f \u5f85\u6267\u884c \u5bfc\u5165\u5386\u53f2\u6bd4\u8d5b\u6570\u636e\u7b49 DBA\u56e2\u961f \u5f85\u5b9a \u6570\u636e\u8d28\u91cf\u9a8c\u8bc1 \u26a0\ufe0f \u5f85\u6267\u884c Great Expectations\u6570\u636e\u9a8c\u8bc1 \u6570\u636e\u56e2\u961f \u5f85\u5b9a \u7d22\u5f15\u4f18\u5316 \u2705 \u5df2\u9a8c\u8bc1 \u67e5\u8be2\u6027\u80fd\u7d22\u5f15\u4f18\u5316 DBA\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#c","title":"\ud83d\ude80 C. \u5e94\u7528\u90e8\u7f72\u914d\u7f6e","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#c1-fastapi","title":"C1. FastAPI\u5e94\u7528\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u751f\u4ea7\u73af\u5883\u53d8\u91cf \u2705 \u5df2\u51c6\u5907 .env.production\u73af\u5883\u53d8\u91cf\u6587\u4ef6 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u5e94\u7528\u914d\u7f6e\u4f18\u5316 \u2705 \u5df2\u9a8c\u8bc1 \u65e5\u5fd7\u7ea7\u522b\u3001\u8d85\u65f6\u8bbe\u7f6e\u3001\u5e76\u53d1\u9650\u5236 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u4e2d\u95f4\u4ef6\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 CORS\u3001\u8ba4\u8bc1\u3001\u65e5\u5fd7\u4e2d\u95f4\u4ef6 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u9759\u6001\u8d44\u6e90\u5904\u7406 \u2705 \u5df2\u9a8c\u8bc1 \u9759\u6001\u6587\u4ef6\u670d\u52a1\u914d\u7f6e \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u9519\u8bef\u5904\u7406\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u5168\u5c40\u5f02\u5e38\u5904\u7406\u548c\u9519\u8bef\u9875\u9762 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#c2","title":"C2. \u4f9d\u8d56\u548c\u5305\u7ba1\u7406","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u751f\u4ea7\u4f9d\u8d56\u9501\u5b9a \u2705 \u5df2\u9a8c\u8bc1 requirements.lock\u7248\u672c\u9501\u5b9a \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 Python\u7248\u672c\u517c\u5bb9 \u2705 \u5df2\u9a8c\u8bc1 Python 3.8+\u517c\u5bb9\u6027\u6d4b\u8bd5 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u7b2c\u4e09\u65b9\u670d\u52a1\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u5916\u90e8API\u5bc6\u94a5\u548c\u914d\u7f6e \u5f00\u53d1\u56e2\u961f \u5f85\u5b9a \u5305\u5b89\u5168\u6027\u68c0\u67e5 \u2705 \u5df2\u9a8c\u8bc1 Safety\u5b89\u5168\u626b\u63cf\u901a\u8fc7 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u4f9d\u8d56\u51b2\u7a81\u89e3\u51b3 \u2705 \u5df2\u9a8c\u8bc1 \u6240\u6709\u4f9d\u8d56\u51b2\u7a81\u5df2\u89e3\u51b3 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#c3","title":"C3. \u5bb9\u5668\u5316\u90e8\u7f72","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 Docker\u955c\u50cf\u6784\u5efa \u26a0\ufe0f \u5f85\u4f18\u5316 \u751f\u4ea7\u73af\u5883Dockerfile\u4f18\u5316 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u955c\u50cf\u4ed3\u5e93\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u914d\u7f6e \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5bb9\u5668\u7f16\u6392\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e Docker Compose\u6216K8s\u914d\u7f6e \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5065\u5eb7\u68c0\u67e5\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u5bb9\u5668\u5065\u5eb7\u68c0\u67e5\u914d\u7f6e \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u8d44\u6e90\u9650\u5236\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u5bb9\u5668CPU\u548c\u5185\u5b58\u9650\u5236 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#d","title":"\ud83d\udd04 D. \u7f13\u5b58\u548c\u961f\u5217\u914d\u7f6e","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#d1-redis","title":"D1. Redis\u751f\u4ea7\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 Redis\u4e3b\u4ece\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e Redis\u4e3b\u4ece\u67b6\u6784\u90e8\u7f72 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u6301\u4e45\u5316\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e RDB\u548cAOF\u6301\u4e45\u5316\u7b56\u7565 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5185\u5b58\u7b56\u7565\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u914d\u7f6e \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u8fde\u63a5\u6c60\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 Redis\u8fde\u63a5\u6c60\u4f18\u5316 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u76d1\u63a7\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 Redis\u6307\u6807\u76d1\u63a7 \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#d2-celery","title":"D2. Celery\u961f\u5217\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 Broker\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e Redis\u6216RabbitMQ\u914d\u7f6e \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a Worker\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 Worker\u8fdb\u7a0b\u548c\u5e76\u53d1\u914d\u7f6e \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u4efb\u52a1\u8def\u7531\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u4efb\u52a1\u961f\u5217\u8def\u7531\u7b56\u7565 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u7ed3\u679c\u540e\u7aef\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u4efb\u52a1\u7ed3\u679c\u5b58\u50a8\u914d\u7f6e \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 Beat\u8c03\u5ea6\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u5b9a\u65f6\u4efb\u52a1\u8c03\u5ea6\u914d\u7f6e \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#d3-kafka","title":"D3. Kafka\u6d41\u5904\u7406\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 Kafka\u96c6\u7fa4\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u751f\u4ea7\u73af\u5883Kafka\u96c6\u7fa4 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a Topic\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u6570\u636e\u6d41Topic\u914d\u7f6e \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u6d88\u8d39\u8005\u7ec4\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u6d88\u8d39\u8005\u7ec4\u914d\u7f6e \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u6570\u636e\u5e8f\u5217\u5316\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 Avro\u5e8f\u5217\u5316\u914d\u7f6e \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u76d1\u63a7\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 Kafka\u6307\u6807\u76d1\u63a7 \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#e","title":"\ud83d\udcca E. \u76d1\u63a7\u548c\u544a\u8b66\u914d\u7f6e","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#e1-prometheus","title":"E1. Prometheus\u76d1\u63a7\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u6307\u6807\u6536\u96c6\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u5e94\u7528\u6307\u6807\u3001\u7cfb\u7edf\u6307\u6807\u6536\u96c6 \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u5b58\u50a8\u7b56\u7565\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u6570\u636e\u4fdd\u7559\u7b56\u7565\u914d\u7f6e \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u544a\u8b66\u89c4\u5219\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 25\u6761\u544a\u8b66\u89c4\u5219\u914d\u7f6e \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 Exporter\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u7cfb\u7edf\u548c\u5e94\u7528Exporter \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u67e5\u8be2\u4f18\u5316\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 PromQL\u67e5\u8be2\u4f18\u5316 \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#e2-grafana","title":"E2. Grafana\u76d1\u63a7\u9762\u677f","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u76d1\u63a7\u9762\u677f\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 14\u4e2a\u6838\u5fc3\u76d1\u63a7\u9762\u677f \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u544a\u8b66\u901a\u77e5\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u90ae\u4ef6\u3001\u9489\u9489\u7b49\u901a\u77e5\u6e20\u9053 \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u7528\u6237\u6743\u9650\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e Grafana\u7528\u6237\u548c\u6743\u9650 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u6570\u636e\u6e90\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 Prometheus\u6570\u636e\u6e90\u914d\u7f6e \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u9762\u677f\u6743\u9650\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u9762\u677f\u8bbf\u95ee\u6743\u9650\u63a7\u5236 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#e3","title":"E3. \u65e5\u5fd7\u7ba1\u7406\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u65e5\u5fd7\u6536\u96c6\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e ELK\u6216Loki\u65e5\u5fd7\u6536\u96c6 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u65e5\u5fd7\u683c\u5f0f\u6807\u51c6\u5316 \u2705 \u5df2\u9a8c\u8bc1 \u7ed3\u6784\u5316\u65e5\u5fd7\u683c\u5f0f \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u65e5\u5fd7\u7ea7\u522b\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u751f\u4ea7\u73af\u5883\u65e5\u5fd7\u7ea7\u522b \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u65e5\u5fd7\u8f6e\u8f6c\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u65e5\u5fd7\u8f6e\u8f6c\u548c\u5f52\u6863\u7b56\u7565 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u9519\u8bef\u65e5\u5fd7\u544a\u8b66 \u2705 \u5df2\u9a8c\u8bc1 \u9519\u8bef\u65e5\u5fd7\u544a\u8b66\u89c4\u5219 \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#f","title":"\ud83d\udd12 F. \u5b89\u5168\u914d\u7f6e","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#f1","title":"F1. \u5e94\u7528\u5b89\u5168\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 HTTPS\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e SSL\u8bc1\u4e66\u548cHTTPS\u91cd\u5b9a\u5411 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a API\u8ba4\u8bc1\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e JWT\u8ba4\u8bc1\u548cAPI\u5bc6\u94a5 \u5f00\u53d1\u56e2\u961f \u5f85\u5b9a \u8bf7\u6c42\u9650\u6d41\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 API\u8bf7\u6c42\u9891\u7387\u9650\u5236 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u8f93\u5165\u9a8c\u8bc1\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u8f93\u5165\u6570\u636e\u9a8c\u8bc1\u548c\u8fc7\u6ee4 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u5b89\u5168\u5934\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u5b89\u5168HTTP\u5934\u8bbe\u7f6e \u5f00\u53d1\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#f2","title":"F2. \u6570\u636e\u5b89\u5168\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u654f\u611f\u6570\u636e\u52a0\u5bc6 \u2705 \u5df2\u9a8c\u8bc1 \u6570\u636e\u5e93\u52a0\u5bc6\u914d\u7f6e \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u4f20\u8f93\u52a0\u5bc6\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u6570\u636e\u4f20\u8f93\u52a0\u5bc6 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5907\u4efd\u52a0\u5bc6\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u6570\u636e\u5907\u4efd\u52a0\u5bc6 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5bc6\u94a5\u7ba1\u7406\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u5bc6\u94a5\u7ba1\u7406\u7cfb\u7edf \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u6570\u636e\u8131\u654f\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u65e5\u5fd7\u6570\u636e\u8131\u654f \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#f3","title":"F3. \u7f51\u7edc\u5b89\u5168\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u9632\u706b\u5899\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u4e91\u670d\u52a1\u9632\u706b\u5899\u89c4\u5219 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a WAF\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e Web\u5e94\u7528\u9632\u706b\u5899 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a DDoS\u9632\u62a4 \u26a0\ufe0f \u5f85\u914d\u7f6e DDoS\u653b\u51fb\u9632\u62a4 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a VPN\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u7ba1\u7406VPN\u8bbf\u95ee \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5b89\u5168\u76d1\u63a7\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u5b89\u5168\u4e8b\u4ef6\u76d1\u63a7 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#g","title":"\ud83d\udea8 G. \u5907\u4efd\u548c\u6062\u590d\u914d\u7f6e","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#g1","title":"G1. \u6570\u636e\u5e93\u5907\u4efd\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u5907\u4efd\u7b56\u7565\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u5168\u5907\u3001\u589e\u91cf\u3001WAL\u5907\u4efd DBA\u56e2\u961f \u5df2\u5b8c\u6210 \u5907\u4efd\u5b58\u50a8\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u5f02\u5730\u5907\u4efd\u5b58\u50a8 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5907\u4efd\u76d1\u63a7\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u5907\u4efd\u6210\u529f\u76d1\u63a7 \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u5907\u4efd\u6062\u590d\u6d4b\u8bd5 \u2705 \u5df2\u9a8c\u8bc1 \u6062\u590d\u6d41\u7a0b\u9a8c\u8bc1 DBA\u56e2\u961f \u5df2\u5b8c\u6210 \u5907\u4efd\u4fdd\u7559\u7b56\u7565 \u2705 \u5df2\u9a8c\u8bc1 7\u5929\u30014\u5468\u30013\u4e2a\u6708\u4fdd\u7559 DBA\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#g2","title":"G2. \u5e94\u7528\u5907\u4efd\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u4ee3\u7801\u7248\u672c\u7ba1\u7406 \u2705 \u5df2\u9a8c\u8bc1 Git\u7248\u672c\u63a7\u5236 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u914d\u7f6e\u6587\u4ef6\u5907\u4efd \u2705 \u5df2\u9a8c\u8bc1 \u914d\u7f6e\u6587\u4ef6\u7248\u672c\u7ba1\u7406 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u9759\u6001\u8d44\u6e90\u5907\u4efd \u26a0\ufe0f \u5f85\u914d\u7f6e \u9759\u6001\u8d44\u6e90\u5907\u4efd\u7b56\u7565 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5e94\u7528\u5feb\u7167\u5907\u4efd \u26a0\ufe0f \u5f85\u914d\u7f6e \u5bb9\u5668\u955c\u50cf\u5907\u4efd \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5907\u4efd\u9a8c\u8bc1\u6d41\u7a0b \u26a0\ufe0f \u5f85\u914d\u7f6e \u5907\u4efd\u5b8c\u6574\u6027\u9a8c\u8bc1 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#g3","title":"G3. \u707e\u96be\u6062\u590d\u914d\u7f6e","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 RTO/RPO\u5b9a\u4e49 \u26a0\ufe0f \u5f85\u914d\u7f6e \u6062\u590d\u65f6\u95f4\u76ee\u6807\u5b9a\u4e49 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u707e\u5907\u73af\u5883\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u5f02\u5730\u707e\u5907\u73af\u5883 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u6062\u590d\u6d41\u7a0b\u6587\u6863 \u2705 \u5df2\u9a8c\u8bc1 \u6062\u590d\u64cd\u4f5c\u624b\u518c \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u707e\u5907\u6f14\u7ec3\u8ba1\u5212 \u26a0\ufe0f \u5f85\u5236\u5b9a \u5b9a\u671f\u707e\u5907\u6f14\u7ec3 \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u6545\u969c\u8f6c\u79fb\u914d\u7f6e \u26a0\ufe0f \u5f85\u914d\u7f6e \u81ea\u52a8\u6545\u969c\u8f6c\u79fb \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#h","title":"\ud83e\uddea H. \u6d4b\u8bd5\u548c\u9a8c\u8bc1","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#h1","title":"H1. \u529f\u80fd\u6d4b\u8bd5","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u5355\u5143\u6d4b\u8bd5\u8986\u76d6 \u2705 \u5df2\u9a8c\u8bc1 70%+\u6d4b\u8bd5\u8986\u76d6\u7387 \u6d4b\u8bd5\u56e2\u961f \u5df2\u5b8c\u6210 \u96c6\u6210\u6d4b\u8bd5\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u670d\u52a1\u96c6\u6210\u6d4b\u8bd5 \u6d4b\u8bd5\u56e2\u961f \u5df2\u5b8c\u6210 \u7aef\u5230\u7aef\u6d4b\u8bd5 \u2705 \u5df2\u9a8c\u8bc1 \u5b8c\u6574\u4e1a\u52a1\u6d41\u7a0b\u6d4b\u8bd5 \u6d4b\u8bd5\u56e2\u961f \u5df2\u5b8c\u6210 \u6027\u80fd\u6d4b\u8bd5\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5 \u6d4b\u8bd5\u56e2\u961f \u5df2\u5b8c\u6210 \u5b89\u5168\u6d4b\u8bd5\u5b8c\u6210 \u26a0\ufe0f \u5f85\u6267\u884c \u5b89\u5168\u6f0f\u6d1e\u626b\u63cf \u6d4b\u8bd5\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#h2","title":"H2. \u6027\u80fd\u6d4b\u8bd5","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u8d1f\u8f7d\u6d4b\u8bd5\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u5e76\u53d1\u7528\u6237\u6d4b\u8bd5 \u6d4b\u8bd5\u56e2\u961f \u5df2\u5b8c\u6210 \u538b\u529b\u6d4b\u8bd5\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u6781\u9650\u538b\u529b\u6d4b\u8bd5 \u6d4b\u8bd5\u56e2\u961f \u5df2\u5b8c\u6210 \u7a33\u5b9a\u6027\u6d4b\u8bd5\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u957f\u65f6\u95f4\u7a33\u5b9a\u6027\u6d4b\u8bd5 \u6d4b\u8bd5\u56e2\u961f \u5df2\u5b8c\u6210 \u6027\u80fd\u8c03\u4f18\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u57fa\u4e8e\u6d4b\u8bd5\u7ed3\u679c\u8c03\u4f18 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u6027\u80fd\u76d1\u63a7\u914d\u7f6e \u2705 \u5df2\u9a8c\u8bc1 \u751f\u4ea7\u6027\u80fd\u76d1\u63a7 \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#h3","title":"H3. \u5b89\u5168\u6d4b\u8bd5","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u6f0f\u6d1e\u626b\u63cf\u5b8c\u6210 \u26a0\ufe0f \u5f85\u6267\u884c \u81ea\u52a8\u5316\u6f0f\u6d1e\u626b\u63cf \u6d4b\u8bd5\u56e2\u961f \u5f85\u5b9a \u6e17\u900f\u6d4b\u8bd5\u5b8c\u6210 \u26a0\ufe0f \u5f85\u6267\u884c \u624b\u52a8\u6e17\u900f\u6d4b\u8bd5 \u6d4b\u8bd5\u56e2\u961f \u5f85\u5b9a \u5b89\u5168\u5ba1\u8ba1\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u4ee3\u7801\u5b89\u5168\u5ba1\u8ba1 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u6743\u9650\u6d4b\u8bd5\u5b8c\u6210 \u26a0\ufe0f \u5f85\u6267\u884c \u6743\u9650\u63a7\u5236\u6d4b\u8bd5 \u6d4b\u8bd5\u56e2\u961f \u5f85\u5b9a \u6570\u636e\u5b89\u5168\u6d4b\u8bd5 \u26a0\ufe0f \u5f85\u6267\u884c \u6570\u636e\u5b89\u5168\u9a8c\u8bc1 \u6d4b\u8bd5\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#i","title":"\ud83d\udcda I. \u6587\u6863\u548c\u57f9\u8bad","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#i1","title":"I1. \u6280\u672f\u6587\u6863","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u67b6\u6784\u6587\u6863\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1\u6587\u6863 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 API\u6587\u6863\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 API\u63a5\u53e3\u6587\u6863 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u90e8\u7f72\u6587\u6863\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u90e8\u7f72\u64cd\u4f5c\u624b\u518c \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u8fd0\u7ef4\u6587\u6863\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u8fd0\u7ef4\u7ef4\u62a4\u624b\u518c \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u6545\u969c\u6392\u9664\u6587\u6863 \u2705 \u5df2\u9a8c\u8bc1 \u6545\u969c\u6392\u9664\u6307\u5357 \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#i2","title":"I2. \u7528\u6237\u6587\u6863","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u7528\u6237\u624b\u518c\u5b8c\u6210 \u26a0\ufe0f \u5f85\u5b8c\u6210 \u7528\u6237\u4f7f\u7528\u624b\u518c \u4ea7\u54c1\u56e2\u961f \u5f85\u5b9a \u7ba1\u7406\u5458\u624b\u518c\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u7cfb\u7edf\u7ba1\u7406\u5458\u624b\u518c \u8fd0\u7ef4\u56e2\u961f \u5df2\u5b8c\u6210 \u5f00\u53d1\u6587\u6863\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u5f00\u53d1\u8005\u6587\u6863 \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u57f9\u8bad\u6750\u6599\u5b8c\u6210 \u26a0\ufe0f \u5f85\u5b8c\u6210 \u7528\u6237\u57f9\u8bad\u6750\u6599 \u4ea7\u54c1\u56e2\u961f \u5f85\u5b9a FAQ\u6587\u6863\u5b8c\u6210 \u26a0\ufe0f \u5f85\u5b8c\u6210 \u5e38\u89c1\u95ee\u9898\u89e3\u7b54 \u4ea7\u54c1\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#i3","title":"I3. \u57f9\u8bad\u548c\u77e5\u8bc6\u8f6c\u79fb","text":"\u68c0\u67e5\u9879 \u72b6\u6001 \u8be6\u60c5 \u8d1f\u8d23\u4eba \u5b8c\u6210\u65f6\u95f4 \u8fd0\u7ef4\u57f9\u8bad\u5b8c\u6210 \u26a0\ufe0f \u5f85\u6267\u884c \u8fd0\u7ef4\u56e2\u961f\u57f9\u8bad \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u5f00\u53d1\u57f9\u8bad\u5b8c\u6210 \u2705 \u5df2\u9a8c\u8bc1 \u5f00\u53d1\u56e2\u961f\u57f9\u8bad \u5f00\u53d1\u56e2\u961f \u5df2\u5b8c\u6210 \u7528\u6237\u57f9\u8bad\u5b8c\u6210 \u26a0\ufe0f \u5f85\u6267\u884c \u6700\u7ec8\u7528\u6237\u57f9\u8bad \u4ea7\u54c1\u56e2\u961f \u5f85\u5b9a \u652f\u6301\u57f9\u8bad\u5b8c\u6210 \u26a0\ufe0f \u5f85\u6267\u884c \u6280\u672f\u652f\u6301\u57f9\u8bad \u8fd0\u7ef4\u56e2\u961f \u5f85\u5b9a \u77e5\u8bc6\u5e93\u5efa\u8bbe \u26a0\ufe0f \u5f85\u5b8c\u6210 \u77e5\u8bc6\u5e93\u7cfb\u7edf\u5efa\u8bbe \u4ea7\u54c1\u56e2\u961f \u5f85\u5b9a"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_5","title":"\ud83d\udcca \u90e8\u7f72\u98ce\u9669\u8bc4\u4f30","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_6","title":"\ud83d\udd34 \u9ad8\u98ce\u9669\u9879\u76ee","text":"\u98ce\u9669\u9879 \u98ce\u9669\u63cf\u8ff0 \u5f71\u54cd\u7a0b\u5ea6 \u6982\u7387 \u7f13\u89e3\u63aa\u65bd \u6570\u636e\u5e93\u6027\u80fd\u74f6\u9888 \u751f\u4ea7\u73af\u5883\u6570\u636e\u91cf\u589e\u5927\u53ef\u80fd\u5bfc\u81f4\u6027\u80fd\u95ee\u9898 \u9ad8 \u4e2d 1. \u63d0\u524d\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd52. \u51c6\u5907\u6570\u636e\u5e93\u6269\u5bb9\u65b9\u68483. \u76d1\u63a7\u6570\u636e\u5e93\u6027\u80fd\u6307\u6807 \u5e76\u53d1\u8bbf\u95ee\u538b\u529b \u751f\u4ea7\u73af\u5883\u7528\u6237\u91cf\u589e\u52a0\u53ef\u80fd\u9020\u6210\u7cfb\u7edf\u538b\u529b \u9ad8 \u4e2d 1. \u8fdb\u884c\u8d1f\u8f7d\u6d4b\u8bd52. \u51c6\u5907\u6c34\u5e73\u6269\u5bb9\u65b9\u68483. \u5b9e\u65bd\u8bf7\u6c42\u9650\u6d41 \u7b2c\u4e09\u65b9\u670d\u52a1\u4f9d\u8d56 \u5916\u90e8API\u670d\u52a1\u53ef\u80fd\u5f71\u54cd\u7cfb\u7edf\u7a33\u5b9a\u6027 \u4e2d \u4e2d 1. \u5b9e\u65bd\u964d\u7ea7\u7b56\u75652. \u589e\u52a0\u91cd\u8bd5\u673a\u52363. \u51c6\u5907\u5907\u7528\u65b9\u6848"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_7","title":"\ud83d\udfe1 \u4e2d\u98ce\u9669\u9879\u76ee","text":"\u98ce\u9669\u9879 \u98ce\u9669\u63cf\u8ff0 \u5f71\u54cd\u7a0b\u5ea6 \u6982\u7387 \u7f13\u89e3\u63aa\u65bd \u914d\u7f6e\u9519\u8bef\u98ce\u9669 \u751f\u4ea7\u73af\u5883\u914d\u7f6e\u53ef\u80fd\u5b58\u5728\u9519\u8bef \u4e2d \u4f4e 1. \u914d\u7f6e\u5ba1\u6838\u6d41\u7a0b2. \u914d\u7f6e\u9a8c\u8bc1\u811a\u672c3. \u7070\u5ea6\u53d1\u5e03\u7b56\u7565 \u6570\u636e\u8fc1\u79fb\u98ce\u9669 \u6570\u636e\u8fc1\u79fb\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u51fa\u73b0\u6570\u636e\u4e22\u5931 \u9ad8 \u4f4e 1. \u5b8c\u6574\u5907\u4efd\u7b56\u75652. \u6570\u636e\u9a8c\u8bc1\u6d41\u7a0b3. \u56de\u6eda\u673a\u5236 \u5b89\u5168\u6f0f\u6d1e\u98ce\u9669 \u53ef\u80fd\u5b58\u5728\u672a\u53d1\u73b0\u7684\u5b89\u5168\u6f0f\u6d1e \u9ad8 \u4f4e 1. \u5b89\u5168\u626b\u63cf\u6d4b\u8bd52. \u5b89\u5168\u76d1\u63a7\u544a\u8b663. \u5feb\u901f\u54cd\u5e94\u673a\u5236"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_8","title":"\ud83d\udfe2 \u4f4e\u98ce\u9669\u9879\u76ee","text":"\u98ce\u9669\u9879 \u98ce\u9669\u63cf\u8ff0 \u5f71\u54cd\u7a0b\u5ea6 \u6982\u7387 \u7f13\u89e3\u63aa\u65bd \u76d1\u63a7\u544a\u8b66 \u76d1\u63a7\u7cfb\u7edf\u53ef\u80fd\u5b58\u5728\u76f2\u70b9 \u4f4e \u4e2d 1. \u5b8c\u5584\u76d1\u63a7\u8986\u76d62. \u544a\u8b66\u89c4\u5219\u4f18\u53163. \u5b9a\u671f\u76d1\u63a7\u68c0\u67e5 \u6587\u6863\u66f4\u65b0 \u6587\u6863\u53ef\u80fd\u5b58\u5728\u6ede\u540e\u6027 \u4f4e \u4e2d 1. \u6587\u6863\u5ba1\u6838\u673a\u52362. \u7248\u672c\u63a7\u5236\u7ba1\u74063. \u5b9a\u671f\u66f4\u65b0\u7ef4\u62a4"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_9","title":"\ud83d\ude80 \u90e8\u7f72\u8ba1\u5212\u5efa\u8bae","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#1-2","title":"\u7b2c\u4e00\u9636\u6bb5\uff1a\u57fa\u7840\u73af\u5883\u51c6\u5907 (1-2\u5468)","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#week-1","title":"Week 1: \u57fa\u7840\u8bbe\u65bd\u642d\u5efa","text":"<ul> <li>\u670d\u52a1\u5668\u91c7\u8d2d\u548c\u914d\u7f6e (3\u5929)</li> <li>\u7f51\u7edc\u73af\u5883\u914d\u7f6e (2\u5929)</li> <li>\u5b89\u5168\u9632\u62a4\u914d\u7f6e (2\u5929)</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#week-2","title":"Week 2: \u6838\u5fc3\u670d\u52a1\u90e8\u7f72","text":"<ul> <li>\u6570\u636e\u5e93\u96c6\u7fa4\u90e8\u7f72 (3\u5929)</li> <li>\u7f13\u5b58\u670d\u52a1\u90e8\u7f72 (2\u5929)</li> <li>\u6d88\u606f\u961f\u5217\u90e8\u7f72 (2\u5929)</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#1","title":"\u7b2c\u4e8c\u9636\u6bb5\uff1a\u5e94\u7528\u90e8\u7f72 (1\u5468)","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#week-3","title":"Week 3: \u5e94\u7528\u53d1\u5e03","text":"<ul> <li>\u4ee3\u7801\u90e8\u7f72\u548c\u914d\u7f6e (2\u5929)</li> <li>\u4f9d\u8d56\u5b89\u88c5\u548c\u9a8c\u8bc1 (1\u5929)</li> <li>\u529f\u80fd\u6d4b\u8bd5\u548c\u9a8c\u8bc1 (2\u5929)</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#1_1","title":"\u7b2c\u4e09\u9636\u6bb5\uff1a\u76d1\u63a7\u548c\u4f18\u5316 (1\u5468)","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#week-4","title":"Week 4: \u76d1\u63a7\u5b8c\u5584","text":"<ul> <li>\u76d1\u63a7\u7cfb\u7edf\u90e8\u7f72 (2\u5929)</li> <li>\u544a\u8b66\u89c4\u5219\u914d\u7f6e (1\u5929)</li> <li>\u6027\u80fd\u8c03\u4f18 (2\u5929)</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#1_2","title":"\u7b2c\u56db\u9636\u6bb5\uff1a\u4e0a\u7ebf\u51c6\u5907 (1\u5468)","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#week-5","title":"Week 5: \u4e0a\u7ebf\u51c6\u5907","text":"<ul> <li>\u6570\u636e\u8fc1\u79fb (2\u5929)</li> <li>\u7528\u6237\u57f9\u8bad (2\u5929)</li> <li>\u4e0a\u7ebf\u6f14\u7ec3 (1\u5929)</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_10","title":"\ud83d\udccb \u90e8\u7f72\u68c0\u67e5\u6e05\u5355","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_11","title":"\u90e8\u7f72\u524d\u68c0\u67e5 (\u5fc5\u987b\u5168\u90e8\u901a\u8fc7)","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_12","title":"\u2705 \u57fa\u7840\u73af\u5883\u68c0\u67e5","text":"<ul> <li> \u6240\u6709\u670d\u52a1\u5668\u6b63\u5e38\u8fd0\u884c</li> <li> \u7f51\u7edc\u8fde\u63a5\u7a33\u5b9a\u53ef\u9760</li> <li> \u5b89\u5168\u9632\u62a4\u63aa\u65bd\u5230\u4f4d</li> <li> \u76d1\u63a7\u7cfb\u7edf\u6b63\u5e38\u8fd0\u884c</li> <li> \u5907\u4efd\u7cfb\u7edf\u53ef\u7528</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_13","title":"\u2705 \u6570\u636e\u5e93\u68c0\u67e5","text":"<ul> <li> \u6570\u636e\u5e93\u96c6\u7fa4\u6b63\u5e38\u8fd0\u884c</li> <li> \u6570\u636e\u8fc1\u79fb\u811a\u672c\u6d4b\u8bd5\u901a\u8fc7</li> <li> \u5907\u4efd\u6062\u590d\u6d41\u7a0b\u9a8c\u8bc1</li> <li> \u6027\u80fd\u6307\u6807\u6ee1\u8db3\u8981\u6c42</li> <li> \u5b89\u5168\u914d\u7f6e\u6b63\u786e</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_14","title":"\u2705 \u5e94\u7528\u68c0\u67e5","text":"<ul> <li> \u4ee3\u7801\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883</li> <li> \u6240\u6709\u4f9d\u8d56\u5b89\u88c5\u6b63\u786e</li> <li> \u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6b63\u786e</li> <li> \u5065\u5eb7\u68c0\u67e5\u901a\u8fc7</li> <li> \u529f\u80fd\u6d4b\u8bd5\u901a\u8fc7</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_15","title":"\u2705 \u76d1\u63a7\u68c0\u67e5","text":"<ul> <li> Prometheus\u6307\u6807\u6536\u96c6\u6b63\u5e38</li> <li> Grafana\u9762\u677f\u663e\u793a\u6b63\u786e</li> <li> \u544a\u8b66\u89c4\u5219\u914d\u7f6e\u5b8c\u6210</li> <li> \u65e5\u5fd7\u6536\u96c6\u7cfb\u7edf\u6b63\u5e38</li> <li> \u6027\u80fd\u76d1\u63a7\u6b63\u5e38</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_16","title":"\u90e8\u7f72\u4e2d\u68c0\u67e5","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_17","title":"\u2705 \u90e8\u7f72\u8fc7\u7a0b\u76d1\u63a7","text":"<ul> <li> \u90e8\u7f72\u8fc7\u7a0b\u6309\u8ba1\u5212\u6267\u884c</li> <li> \u7cfb\u7edf\u8d44\u6e90\u4f7f\u7528\u6b63\u5e38</li> <li> \u9519\u8bef\u65e5\u5fd7\u65e0\u5f02\u5e38</li> <li> \u6027\u80fd\u6307\u6807\u7a33\u5b9a</li> <li> \u7528\u6237\u8bbf\u95ee\u6b63\u5e38</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_18","title":"\u2705 \u6570\u636e\u9a8c\u8bc1","text":"<ul> <li> \u6570\u636e\u8fc1\u79fb\u6210\u529f</li> <li> \u6570\u636e\u5b8c\u6574\u6027\u9a8c\u8bc1</li> <li> \u6570\u636e\u8d28\u91cf\u68c0\u67e5</li> <li> \u6743\u9650\u9a8c\u8bc1\u901a\u8fc7</li> <li> \u6027\u80fd\u6d4b\u8bd5\u901a\u8fc7</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_19","title":"\u90e8\u7f72\u540e\u68c0\u67e5","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_20","title":"\u2705 \u7a33\u5b9a\u6027\u9a8c\u8bc1","text":"<ul> <li> \u7cfb\u7edf\u8fd0\u884c24\u5c0f\u65f6\u7a33\u5b9a</li> <li> \u9519\u8bef\u7387\u5728\u6b63\u5e38\u8303\u56f4</li> <li> \u6027\u80fd\u6307\u6807\u8fbe\u6807</li> <li> \u7528\u6237\u53cd\u9988\u6b63\u5e38</li> <li> \u76d1\u63a7\u544a\u8b66\u6b63\u5e38</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_21","title":"\u2705 \u4e1a\u52a1\u9a8c\u8bc1","text":"<ul> <li> \u6838\u5fc3\u4e1a\u52a1\u529f\u80fd\u6b63\u5e38</li> <li> \u6570\u636e\u5904\u7406\u51c6\u786e</li> <li> \u7528\u6237\u8bbf\u95ee\u6d41\u7545</li> <li> \u7b2c\u4e09\u65b9\u96c6\u6210\u6b63\u5e38</li> <li> \u5b89\u5168\u63a7\u5236\u6709\u6548</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_22","title":"\ud83c\udfaf \u6700\u7ec8\u9a8c\u6536\u6807\u51c6","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_23","title":"\u6280\u672f\u9a8c\u6536\u6807\u51c6","text":"\u9a8c\u6536\u9879\u76ee \u9a8c\u6536\u6807\u51c6 \u9a8c\u6536\u65b9\u6cd5 \u9a8c\u6536\u7ed3\u679c \u7cfb\u7edf\u53ef\u7528\u6027 99.9%\u4ee5\u4e0a 7\u5929\u8fde\u7eed\u76d1\u63a7 \u5f85\u9a8c\u8bc1 \u54cd\u5e94\u65f6\u95f4 \u5e73\u5747&lt;100ms \u6027\u80fd\u6d4b\u8bd5 \u5f85\u9a8c\u8bc1 \u5e76\u53d1\u5904\u7406 \u652f\u63011000\u5e76\u53d1\u7528\u6237 \u8d1f\u8f7d\u6d4b\u8bd5 \u5f85\u9a8c\u8bc1 \u6570\u636e\u4e00\u81f4\u6027 100%\u51c6\u786e \u6570\u636e\u9a8c\u8bc1 \u5f85\u9a8c\u8bc1 \u5b89\u5168\u6027 \u901a\u8fc7\u5b89\u5168\u626b\u63cf \u5b89\u5168\u6d4b\u8bd5 \u5f85\u9a8c\u8bc1"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_24","title":"\u4e1a\u52a1\u9a8c\u6536\u6807\u51c6","text":"\u9a8c\u6536\u9879\u76ee \u9a8c\u6536\u6807\u51c6 \u9a8c\u6536\u65b9\u6cd5 \u9a8c\u6536\u7ed3\u679c \u529f\u80fd\u5b8c\u6574\u6027 \u6240\u6709\u9700\u6c42\u529f\u80fd\u5b9e\u73b0 \u529f\u80fd\u6d4b\u8bd5 \u5f85\u9a8c\u8bc1 \u7528\u6237\u4f53\u9a8c \u7528\u6237\u6ee1\u610f\u5ea6&gt;90% \u7528\u6237\u8c03\u7814 \u5f85\u9a8c\u8bc1 \u6570\u636e\u5904\u7406 \u51c6\u786e\u7387&gt;99% \u6570\u636e\u9a8c\u8bc1 \u5f85\u9a8c\u8bc1 \u7cfb\u7edf\u96c6\u6210 \u6240\u6709\u63a5\u53e3\u6b63\u5e38 \u96c6\u6210\u6d4b\u8bd5 \u5f85\u9a8c\u8bc1 \u53ef\u7ef4\u62a4\u6027 \u6587\u6863\u5b8c\u6574\uff0c\u7ef4\u62a4\u4fbf\u6377 \u6587\u6863\u5ba1\u6838 \u5f85\u9a8c\u8bc1"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_25","title":"\u8fd0\u7ef4\u9a8c\u6536\u6807\u51c6","text":"\u9a8c\u6536\u9879\u76ee \u9a8c\u6536\u6807\u51c6 \u9a8c\u6536\u65b9\u6cd5 \u9a8c\u6536\u7ed3\u679c \u76d1\u63a7\u8986\u76d6 100%\u76d1\u63a7\u8986\u76d6 \u76d1\u63a7\u68c0\u67e5 \u5f85\u9a8c\u8bc1 \u544a\u8b66\u53ca\u65f6 5\u5206\u949f\u5185\u54cd\u5e94 \u544a\u8b66\u6d4b\u8bd5 \u5f85\u9a8c\u8bc1 \u5907\u4efd\u6062\u590d 30\u5206\u949f\u5185\u6062\u590d \u6062\u590d\u6d4b\u8bd5 \u5f85\u9a8c\u8bc1 \u6269\u5c55\u6027 \u652f\u63013\u500d\u6269\u5bb9 \u6269\u5bb9\u6d4b\u8bd5 \u5f85\u9a8c\u8bc1 \u6587\u6863\u5b8c\u6574\u6027 100%\u6587\u6863\u8986\u76d6 \u6587\u6863\u5ba1\u6838 \u5f85\u9a8c\u8bc1"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_26","title":"\ud83d\udcde \u7d27\u6025\u8054\u7cfb\u4eba\u548c\u5347\u7ea7\u8def\u5f84","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_27","title":"\u6280\u672f\u652f\u6301\u56e2\u961f","text":"\u89d2\u8272 \u59d3\u540d \u8054\u7cfb\u65b9\u5f0f \u804c\u8d23 \u6280\u672f\u8d1f\u8d23\u4eba [\u59d3\u540d] [\u7535\u8bdd] \u6280\u672f\u51b3\u7b56\u548c\u95ee\u9898\u5347\u7ea7 \u8fd0\u7ef4\u8d1f\u8d23\u4eba [\u59d3\u540d] [\u7535\u8bdd] \u73af\u5883\u914d\u7f6e\u548c\u90e8\u7f72\u64cd\u4f5c \u5f00\u53d1\u8d1f\u8d23\u4eba [\u59d3\u540d] [\u7535\u8bdd] \u4ee3\u7801\u95ee\u9898\u548c\u529f\u80fd\u4fee\u590d \u6570\u636e\u5e93\u8d1f\u8d23\u4eba [\u59d3\u540d] [\u7535\u8bdd] \u6570\u636e\u5e93\u95ee\u9898\u548c\u6570\u636e\u6062\u590d \u6d4b\u8bd5\u8d1f\u8d23\u4eba [\u59d3\u540d] [\u7535\u8bdd] \u6d4b\u8bd5\u9a8c\u8bc1\u548c\u8d28\u91cf\u4fdd\u8bc1"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_28","title":"\u7d27\u6025\u5347\u7ea7\u8def\u5f84","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#0-30","title":"\ud83d\udfe2 \u7b2c\u4e00\u7ea7\uff1a\u95ee\u9898\u53d1\u73b0 (0-30\u5206\u949f)","text":"<ul> <li>\u5904\u7406\u65b9\u5f0f: \u5f53\u573a\u4eba\u5458\u7acb\u5373\u5904\u7406</li> <li>\u5347\u7ea7\u6761\u4ef6: \u65e0\u6cd5\u89e3\u51b3\u7684\u95ee\u9898</li> <li>\u54cd\u5e94\u65f6\u95f4: 5\u5206\u949f\u5185\u54cd\u5e94</li> <li>\u89e3\u51b3\u76ee\u6807: 30\u5206\u949f\u5185\u89e3\u51b3</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#30-2","title":"\ud83d\udfe1 \u7b2c\u4e8c\u7ea7\uff1a\u6280\u672f\u5347\u7ea7 (30\u5206\u949f-2\u5c0f\u65f6)","text":"<ul> <li>\u5904\u7406\u65b9\u5f0f: \u6280\u672f\u8d1f\u8d23\u4eba\u4ecb\u5165</li> <li>\u5347\u7ea7\u6761\u4ef6: \u95ee\u9898\u590d\u6742\u6216\u5f71\u54cd\u8303\u56f4\u6269\u5927</li> <li>\u54cd\u5e94\u65f6\u95f4: 15\u5206\u949f\u5185\u54cd\u5e94</li> <li>\u89e3\u51b3\u76ee\u6807: 2\u5c0f\u65f6\u5185\u89e3\u51b3</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#2","title":"\ud83d\udd34 \u7b2c\u4e09\u7ea7\uff1a\u7d27\u6025\u54cd\u5e94 (2\u5c0f\u65f6\u4ee5\u4e0a)","text":"<ul> <li>\u5904\u7406\u65b9\u5f0f: \u7d27\u6025\u54cd\u5e94\u56e2\u961f\u4ecb\u5165</li> <li>\u5347\u7ea7\u6761\u4ef6: \u7cfb\u7edf\u4e25\u91cd\u6545\u969c\u6216\u4e1a\u52a1\u4e2d\u65ad</li> <li>\u54cd\u5e94\u65f6\u95f4: \u7acb\u5373\u54cd\u5e94</li> <li>\u89e3\u51b3\u76ee\u6807: \u6700\u5feb\u65f6\u95f4\u6062\u590d</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_29","title":"\ud83d\udcc8 \u90e8\u7f72\u6210\u529f\u6807\u51c6","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_30","title":"\u6838\u5fc3\u6307\u6807","text":"\u6307\u6807\u7c7b\u522b \u76ee\u6807\u503c \u5f53\u524d\u72b6\u6001 \u8fbe\u6210\u60c5\u51b5 \u7cfb\u7edf\u53ef\u7528\u6027 99.9% \u5f85\u9a8c\u8bc1 \ud83d\udd04 \u5f85\u9a8c\u8bc1 \u6027\u80fd\u6307\u6807 \u5e73\u5747\u54cd\u5e94\u65f6\u95f4&lt;100ms 1.95ms \u2705 \u5df2\u8fbe\u6807 \u9519\u8bef\u7387 &lt;0.1% \u5f85\u9a8c\u8bc1 \ud83d\udd04 \u5f85\u9a8c\u8bc1 \u7528\u6237\u6ee1\u610f\u5ea6 &gt;90% \u5f85\u9a8c\u8bc1 \ud83d\udd04 \u5f85\u9a8c\u8bc1 \u56e2\u961f\u5c31\u7eea\u5ea6 100% 91% \u26a0\ufe0f \u63a5\u8fd1\u8fbe\u6807"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_31","title":"\u6210\u529f\u6761\u4ef6","text":""},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_32","title":"\u2705 \u6280\u672f\u6210\u529f\u6761\u4ef6","text":"<ul> <li> \u7cfb\u7edf\u7a33\u5b9a\u8fd0\u884c7\u5929\u4ee5\u4e0a</li> <li> \u6027\u80fd\u6307\u6807\u6301\u7eed\u8fbe\u6807</li> <li> \u9519\u8bef\u7387\u63a7\u5236\u5728\u53ef\u63a5\u53d7\u8303\u56f4</li> <li> \u5b89\u5168\u65e0\u91cd\u5927\u6f0f\u6d1e</li> <li> \u76d1\u63a7\u544a\u8b66\u6b63\u5e38\u8fd0\u884c</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_33","title":"\u2705 \u4e1a\u52a1\u6210\u529f\u6761\u4ef6","text":"<ul> <li> \u6240\u6709\u4e1a\u52a1\u529f\u80fd\u6b63\u5e38\u8fd0\u884c</li> <li> \u7528\u6237\u53cd\u9988\u79ef\u6781\u6b63\u9762</li> <li> \u6570\u636e\u5904\u7406\u51c6\u786e\u53ef\u9760</li> <li> \u7b2c\u4e09\u65b9\u96c6\u6210\u6b63\u5e38</li> <li> \u4e1a\u52a1\u76ee\u6807\u8fbe\u6210</li> </ul>"},{"location":"project/PRODUCTION_READINESS_CHECKLIST/#_34","title":"\u2705 \u8fd0\u7ef4\u6210\u529f\u6761\u4ef6","text":"<ul> <li> \u8fd0\u7ef4\u56e2\u961f\u719f\u7ec3\u638c\u63e1\u7cfb\u7edf</li> <li> \u6545\u969c\u5904\u7406\u6d41\u7a0b\u987a\u7545</li> <li> \u76d1\u63a7\u8986\u76d6\u5168\u9762</li> <li> \u6587\u6863\u5b8c\u6574\u51c6\u786e</li> <li> \u56e2\u961f\u534f\u4f5c\u9ad8\u6548</li> </ul> <p>\u68c0\u67e5\u6e05\u5355\u751f\u6210\u65f6\u95f4: 2025-09-25 \u68c0\u67e5\u6e05\u5355\u7248\u672c: v1.0 \u4e0b\u6b21\u66f4\u65b0\u65f6\u95f4: \u90e8\u7f72\u524d1\u5468 \u7ef4\u62a4\u8d1f\u8d23\u4eba: Claude Code AI Assistant</p> <p>\u672c\u751f\u4ea7\u90e8\u7f72\u51c6\u5907\u68c0\u67e5\u6e05\u5355\u57fa\u4e8eStaging\u73af\u5883\u90e8\u7f72\u5f69\u6392\u6f14\u7ec3\u7ed3\u679c\u751f\u6210\uff0c\u5305\u542b\u4e86\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u7684\u5b8c\u6574\u51c6\u5907\u6307\u5357\u548c\u9a8c\u6536\u6807\u51c6\u3002</p>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/","title":"\u5f00\u53d1\u8005\u5feb\u901f\u5165\u95e8\u6307\u5357","text":""},{"location":"project/QUICK_START_FOR_DEVELOPERS/#5","title":"\ud83c\udfaf 5\u5206\u949f\u5feb\u901f\u4e0a\u624b","text":""},{"location":"project/QUICK_START_FOR_DEVELOPERS/#1","title":"1. \u73af\u5883\u51c6\u5907","text":"<pre><code># \u514b\u9686\u9879\u76ee\ngit clone &lt;repository-url&gt;\ncd FootballPrediction\n\n# \u5b89\u88c5\u4f9d\u8d56\nmake install\n\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nsource .venv/bin/activate  # Linux/Mac\n# \u6216\n.venv\\Scripts\\activate     # Windows\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#2","title":"2. \u8fd0\u884c\u6d4b\u8bd5\uff08\u6700\u91cd\u8981\uff01\uff09","text":"<pre><code># \u5feb\u901f\u9a8c\u8bc1\u73af\u5883\nmake test-quick\n\n# Phase 1 \u6838\u5fc3\u529f\u80fd\u6d4b\u8bd5\nmake test-phase1\n\n# \u5b8c\u6574\u6d4b\u8bd5\uff08\u5305\u542b\u8986\u76d6\u7387\uff09\nmake test\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#3","title":"3. \u5f00\u53d1\u6d41\u7a0b","text":"<pre><code># 1. \u521b\u5efa\u529f\u80fd\u5206\u652f\ngit checkout -b feature/your-feature\n\n# 2. \u5f00\u53d1\u8fc7\u7a0b\u4e2d\nmake test-quick  # \u9891\u7e41\u8fd0\u884c\n\n# 3. \u63d0\u4ea4\u524d\nmake prepush\n\n# 4. \u63a8\u9001\u4ee3\u7801\ngit push origin feature/your-feature\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_2","title":"\ud83d\udce6 \u9879\u76ee\u7ed3\u6784\u901f\u89c8","text":"<pre><code>FootballPrediction/\n\u251c\u2500\u2500 src/               # \u6e90\u4ee3\u7801\n\u2502   \u251c\u2500\u2500 api/          # API \u8def\u7531\n\u2502   \u251c\u2500\u2500 database/     # \u6570\u636e\u5e93\u6a21\u578b\n\u2502   \u251c\u2500\u2500 services/     # \u4e1a\u52a1\u903b\u8f91\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 tests/            # \u6d4b\u8bd5\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 unit/         # \u5355\u5143\u6d4b\u8bd5 \u2b50\n\u2502   \u251c\u2500\u2500 integration/  # \u96c6\u6210\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 e2e/         # \u7aef\u5230\u7aef\u6d4b\u8bd5\n\u251c\u2500\u2500 Makefile         # \u6784\u5efa\u547d\u4ee4 \ud83d\udcdc\n\u251c\u2500\u2500 pytest.ini      # \u6d4b\u8bd5\u914d\u7f6e\n\u2514\u2500\u2500 requirements/    # \u4f9d\u8d56\u7ba1\u7406\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_3","title":"\ud83e\uddea \u6d4b\u8bd5\u547d\u4ee4\u901f\u67e5\u8868","text":"\u573a\u666f \u547d\u4ee4 \u8bf4\u660e \u65e5\u5e38\u5f00\u53d1 <code>make test-quick</code> \u5feb\u901f\u5355\u5143\u6d4b\u8bd5\uff08&lt;30\u79d2\uff09 API \u5f00\u53d1 <code>make test-api</code> \u6240\u6709 API \u6d4b\u8bd5 Phase 1 <code>make test-phase1</code> \u6838\u5fc3 API \u6d4b\u8bd5 \u63d0\u4ea4\u524d <code>make prepush</code> \u5b8c\u6574\u68c0\u67e5 \u8986\u76d6\u7387 <code>make coverage</code> \u751f\u6210\u8986\u76d6\u7387\u62a5\u544a"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_4","title":"\u26a1 \u5e38\u89c1\u4efb\u52a1","text":""},{"location":"project/QUICK_START_FOR_DEVELOPERS/#api","title":"\u6dfb\u52a0\u65b0\u7684 API \u7aef\u70b9","text":"<pre><code># 1. \u5728 src/api/ \u521b\u5efa\u6587\u4ef6\ntouch src/api/new_endpoint.py\n\n# 2. \u521b\u5efa\u6d4b\u8bd5\u6587\u4ef6\ntouch tests/unit/api/test_new_endpoint.py\n\n# 3. \u8fd0\u884c\u6d4b\u8bd5\npytest tests/unit/api/test_new_endpoint.py -v\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#bug","title":"\u4fee\u590d Bug","text":"<pre><code># 1. \u8fd0\u884c\u5931\u8d25\u7684\u6d4b\u8bd5\npytest --lf\n\n# 2. \u4fee\u590d\u4ee3\u7801\n\n# 3. \u91cd\u65b0\u8fd0\u884c\u6d4b\u8bd5\npytest tests/unit/api/test_fixed.py -v\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_5","title":"\u67e5\u770b\u8986\u76d6\u7387","text":"<pre><code># \u751f\u6210\u62a5\u544a\nmake coverage\n\n# \u67e5\u770b\u62a5\u544a\nopen htmlcov/index.html\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_6","title":"\ud83d\udea8 \u91cd\u8981\u63d0\u9192","text":""},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_7","title":"\u274c \u4e0d\u8981\u8fd9\u6837\u505a","text":"<pre><code># \u5355\u72ec\u8fd0\u884c\u4e00\u4e2a\u6587\u4ef6\u770b\u6574\u4f53\u8986\u76d6\u7387\npytest tests/unit/api/test_health.py --cov=src  # \u9519\u8bef\uff01\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_8","title":"\u2705 \u5e94\u8be5\u8fd9\u6837\u505a","text":"<pre><code># \u8fd0\u884c\u6574\u4e2a\u76ee\u5f55\npytest tests/unit/api/ --cov=src  # \u6b63\u786e\n\n# \u6216\u4f7f\u7528 Makefile\nmake test-phase1  # \u6700\u4f73\u5b9e\u8df5\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_9","title":"\ud83d\udcda \u5fc5\u8bfb\u6587\u6863","text":"<ol> <li>\u6d4b\u8bd5\u8fd0\u884c\u6307\u5357 - \u7406\u89e3\u6d4b\u8bd5\u8fd0\u884c\u673a\u5236</li> <li>\u6d4b\u8bd5\u547d\u4ee4\u53c2\u8003 - \u6240\u6709\u6d4b\u8bd5\u547d\u4ee4</li> <li>CLAUDE.md - \u9879\u76ee\u5f00\u53d1\u6307\u5357</li> <li>API \u6587\u6863 - API \u63a5\u53e3\u8bf4\u660e</li> </ol>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_10","title":"\ud83c\udd98 \u9047\u5230\u95ee\u9898\uff1f","text":""},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_11","title":"\u6d4b\u8bd5\u5931\u8d25","text":"<pre><code># \u67e5\u770b\u8be6\u7ec6\u9519\u8bef\npytest tests/unit/api/test_failing.py -v -s --tb=long\n\n# \u53ea\u8fd0\u884c\u5931\u8d25\u7684\u6d4b\u8bd5\npytest --lf\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_12","title":"\u73af\u5883\u95ee\u9898","text":"<pre><code># \u68c0\u67e5\u73af\u5883\nmake env-check\n\n# \u91cd\u65b0\u5b89\u88c5\nmake clean install\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_13","title":"\u4f9d\u8d56\u95ee\u9898","text":"<pre><code># \u66f4\u65b0\u4f9d\u8d56\nmake lock-deps\n\n# \u9a8c\u8bc1\u4f9d\u8d56\nmake verify-deps\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_14","title":"\ud83d\udca1 \u5f00\u53d1\u6280\u5de7","text":""},{"location":"project/QUICK_START_FOR_DEVELOPERS/#1_1","title":"1. \u4f7f\u7528\u6d4b\u8bd5\u6807\u8bb0","text":"<pre><code># \u53ea\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\npytest -m \"unit\"\n\n# \u6392\u9664\u6162\u6d4b\u8bd5\npytest -m \"not slow\"\n\n# \u8fd0\u884c\u7279\u5b9a\u7c7b\u578b\u6d4b\u8bd5\npytest -m \"api\"\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#2_1","title":"2. \u5e76\u884c\u6d4b\u8bd5","text":"<pre><code># \u5b89\u88c5\u5e76\u884c\u6d4b\u8bd5\u5de5\u5177\npip install pytest-xdist\n\n# \u5e76\u884c\u8fd0\u884c\npytest -n auto\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#3_1","title":"3. \u8c03\u8bd5\u6d4b\u8bd5","text":"<pre><code># \u5728\u6d4b\u8bd5\u5931\u8d25\u65f6\u8fdb\u5165\u8c03\u8bd5\u5668\npytest --pdb\n\n# \u5728\u7b2c\u4e00\u4e2a\u5931\u8d25\u65f6\u505c\u6b62\npytest -x\n</code></pre>"},{"location":"project/QUICK_START_FOR_DEVELOPERS/#_15","title":"\ud83c\udf89 \u6210\u529f\u6807\u51c6","text":"<ul> <li>\u2705 \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7\uff1a<code>make test</code></li> <li>\u2705 \u8986\u76d6\u7387\u8fbe\u6807\uff1a<code>make coverage</code>\uff08&gt;80%\uff09</li> <li>\u2705 \u4ee3\u7801\u8d28\u91cf\u68c0\u67e5\uff1a<code>make lint</code></li> <li>\u2705 \u7c7b\u578b\u68c0\u67e5\u901a\u8fc7\uff1a<code>make type-check</code></li> </ul> <p>\u8bb0\u4f4f\uff1a\u6d4b\u8bd5\u7b2c\u4e00\uff0c\u4ee3\u7801\u7b2c\u4e8c\uff01 \ud83e\uddea\u2728</p>"},{"location":"project/TOOLS/","title":"\ud83d\udee0\ufe0f \u9879\u76ee\u5f00\u53d1\u5de5\u5177","text":"<p>\u672c\u9879\u76ee\u63d0\u4f9b\u4e86\u4e00\u5957\u5b8c\u6574\u7684\u5f00\u53d1\u5de5\u5177\uff0c\u65e8\u5728\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u548c\u9879\u76ee\u7ba1\u7406\u8d28\u91cf\u3002</p>"},{"location":"project/TOOLS/#_2","title":"\ud83d\udccb \u5de5\u5177\u603b\u89c8","text":""},{"location":"project/TOOLS/#makefile","title":"\ud83d\udd27 Makefile \u547d\u4ee4","text":"<p>\u4f7f\u7528 <code>make help</code> \u67e5\u770b\u6240\u6709\u53ef\u7528\u547d\u4ee4\uff1a</p> <pre><code>make help                    # \u663e\u793a\u6240\u6709\u53ef\u7528\u547d\u4ee4\n</code></pre>"},{"location":"project/TOOLS/#_3","title":"\ud83c\udfaf \u6838\u5fc3\u5f00\u53d1\u5de5\u5177","text":""},{"location":"project/TOOLS/#1-github-issues","title":"1. GitHub Issues \u540c\u6b65\u5de5\u5177 \ud83d\udd04","text":"<p>\u4f4d\u7f6e: <code>scripts/sync_issues.py</code> \u6587\u6863: <code>scripts/README_sync_issues.md</code></p> <p>\u5feb\u901f\u5f00\u59cb\uff1a</p> <pre><code># \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nsource github_sync_config.sh\n\n# \u53cc\u5411\u540c\u6b65 Issues\nmake sync-issues\n# \u6216\npython scripts/sync_issues.py sync\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\ud83d\udce5 \u4ece GitHub \u62c9\u53d6 Issues \u5230\u672c\u5730 <code>issues.yaml</code></li> <li>\ud83d\udce4 \u63a8\u9001\u672c\u5730 Issues \u5230 GitHub</li> <li>\ud83d\udd04 \u53cc\u5411\u540c\u6b65\uff0c\u4fdd\u6301\u6570\u636e\u4e00\u81f4\u6027</li> <li>\ud83d\udcdd \u652f\u6301\u6279\u91cf\u7ba1\u7406\u548c\u56e2\u961f\u534f\u4f5c</li> </ul> <p>\u5e38\u7528\u547d\u4ee4\uff1a</p> <pre><code>python scripts/sync_issues.py pull   # \u62c9\u53d6\npython scripts/sync_issues.py push   # \u63a8\u9001\npython scripts/sync_issues.py sync   # \u53cc\u5411\u540c\u6b65\n</code></pre>"},{"location":"project/TOOLS/#2","title":"2. \u4ee3\u7801\u8d28\u91cf\u5de5\u5177 \u2728","text":"<pre><code>make lint        # \u4ee3\u7801\u98ce\u683c\u68c0\u67e5 (flake8 + mypy)\nmake fmt         # \u4ee3\u7801\u683c\u5f0f\u5316 (black + isort)\nmake check       # \u5b8c\u6574\u8d28\u91cf\u68c0\u67e5\n</code></pre>"},{"location":"project/TOOLS/#3","title":"3. \u6d4b\u8bd5\u5de5\u5177 \ud83e\uddea","text":"<pre><code>make test        # \u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\nmake coverage    # \u8986\u76d6\u7387\u6d4b\u8bd5 (\u9608\u503c: 80%)\nmake ci          # CI \u6a21\u62df (lint + test + coverage)\n</code></pre>"},{"location":"project/TOOLS/#4","title":"4. \u73af\u5883\u7ba1\u7406 \ud83c\udf0d","text":"<pre><code>make venv        # \u521b\u5efa\u865a\u62df\u73af\u5883\nmake install     # \u5b89\u88c5\u4f9d\u8d56\nmake clean       # \u6e05\u7406\u73af\u5883\n</code></pre>"},{"location":"project/TOOLS/#5","title":"5. \u5bb9\u5668\u7ba1\u7406 \ud83d\udc33","text":"<pre><code>make up          # \u542f\u52a8 docker-compose \u670d\u52a1\nmake down        # \u505c\u6b62\u670d\u52a1\nmake logs        # \u67e5\u770b\u65e5\u5fd7\n</code></pre>"},{"location":"project/TOOLS/#6-ai","title":"6. AI \u4e0a\u4e0b\u6587\u52a0\u8f7d \ud83e\udd16","text":"<pre><code>make context     # \u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587 (\u4e3aAI\u63d0\u4f9b\u5b8c\u6574\u9879\u76ee\u4fe1\u606f)\n</code></pre> <p>\u529f\u80fd\uff1a</p> <ul> <li>\ud83d\udcc1 \u626b\u63cf\u9879\u76ee\u76ee\u5f55\u7ed3\u6784</li> <li>\ud83c\udf3f \u83b7\u53d6 Git \u4fe1\u606f\u548c\u63d0\u4ea4\u5386\u53f2</li> <li>\ud83d\udce6 \u5206\u6790 Python \u6a21\u5757\u548c\u4f9d\u8d56</li> <li>\ud83e\uddea \u7edf\u8ba1\u6d4b\u8bd5\u6587\u4ef6</li> <li>\ud83d\udcca \u751f\u6210\u9879\u76ee\u7edf\u8ba1\u4fe1\u606f</li> <li>\ud83d\udcbe \u4fdd\u5b58\u5230 <code>logs/project_context.json</code></li> </ul>"},{"location":"project/TOOLS/#ai","title":"\ud83d\ude80 AI \u52a9\u624b\u4f7f\u7528\u6307\u5357","text":""},{"location":"project/TOOLS/#ai_1","title":"\u5bf9\u4e8e\u65b0\u7684 AI \u52a9\u624b","text":"<ol> <li>\u53d1\u73b0\u5de5\u5177\u7684\u65b9\u6cd5\uff1a</li> </ol> <pre><code>make help                    # \u67e5\u770b\u6240\u6709\u547d\u4ee4\nls scripts/                  # \u67e5\u770b\u811a\u672c\u76ee\u5f55\ncat TOOLS.md                 # \u9605\u8bfb\u672c\u6587\u6863\n</code></pre> <ol> <li>Issues \u540c\u6b65\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</li> </ol> <pre><code># 1. \u52a0\u8f7d\u73af\u5883\u53d8\u91cf\nsource github_sync_config.sh\n\n# 2. \u6267\u884c\u540c\u6b65\nmake sync-issues\n\n# 3. \u67e5\u770b\u7ed3\u679c\ncat issues.yaml\n</code></pre> <ol> <li>AI \u5f00\u53d1\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</li> </ol> <pre><code># 1. \u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587\nmake context\n\n# 2. \u67e5\u770b\u4e0a\u4e0b\u6587\u6587\u4ef6\ncat logs/project_context.json\n\n# 3. \u5f00\u59cb\u5f00\u53d1\u5de5\u4f5c\nmake venv &amp;&amp; make install\n</code></pre> <ol> <li>\u73af\u5883\u914d\u7f6e\u68c0\u67e5\uff1a</li> </ol> <pre><code># \u68c0\u67e5\u73af\u5883\u53d8\u91cf\necho $GITHUB_TOKEN $GITHUB_REPO\n\n# \u68c0\u67e5\u4f9d\u8d56\npip list | grep -E \"(PyGithub|pyyaml)\"\n</code></pre>"},{"location":"project/TOOLS/#_4","title":"\ud83d\udcc1 \u91cd\u8981\u6587\u4ef6\u8def\u5f84","text":"<pre><code>project/\n\u251c\u2500\u2500 Makefile                          # \u4e3b\u547d\u4ee4\u5165\u53e3\n\u251c\u2500\u2500 github_sync_config.sh             # GitHub \u73af\u5883\u914d\u7f6e\n\u251c\u2500\u2500 issues.yaml                       # \u672c\u5730 Issues \u6587\u4ef6\n\u251c\u2500\u2500 scripts/\n\u2502   \u251c\u2500\u2500 sync_issues.py                # Issues \u540c\u6b65\u811a\u672c\n\u2502   \u2514\u2500\u2500 README_sync_issues.md         # \u8be6\u7ec6\u4f7f\u7528\u6587\u6863\n\u2514\u2500\u2500 TOOLS.md                          # \u672c\u6587\u6863\n</code></pre>"},{"location":"project/TOOLS/#_5","title":"\ud83c\udfaf \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"project/TOOLS/#issues","title":"Issues \u7ba1\u7406\u5de5\u4f5c\u6d41","text":"<ol> <li>\u65e5\u5e38\u540c\u6b65: <code>make sync-issues</code></li> <li>\u672c\u5730\u7f16\u8f91: \u4fee\u6539 <code>issues.yaml</code></li> <li>\u63a8\u9001\u66f4\u65b0: <code>python scripts/sync_issues.py push</code></li> </ol>"},{"location":"project/TOOLS/#_6","title":"\u5f00\u53d1\u5de5\u4f5c\u6d41","text":"<ol> <li>\u73af\u5883\u51c6\u5907: <code>make venv &amp;&amp; make install</code></li> <li>\u5f00\u53d1\u7f16\u7801: \u9075\u5faa <code>.cursor/rules/</code> \u89c4\u8303</li> <li>\u8d28\u91cf\u68c0\u67e5: <code>make check</code></li> <li>\u63d0\u4ea4\u524d\u9a8c\u8bc1: <code>make ci</code></li> </ol>"},{"location":"project/TOOLS/#_7","title":"\ud83c\udd98 \u6545\u969c\u6392\u9664","text":""},{"location":"project/TOOLS/#issues_1","title":"Issues \u540c\u6b65\u95ee\u9898","text":"<pre><code># \u68c0\u67e5\u73af\u5883\u914d\u7f6e\nsource github_sync_config.sh\n\n# \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\npython scripts/sync_issues.py --help\n\n# \u67e5\u770b\u8be6\u7ec6\u6587\u6863\ncat scripts/README_sync_issues.md\n</code></pre>"},{"location":"project/TOOLS/#_8","title":"\u5f00\u53d1\u73af\u5883\u95ee\u9898","text":"<pre><code># \u91cd\u5efa\u73af\u5883\nmake clean &amp;&amp; make venv &amp;&amp; make install\n\n# \u68c0\u67e5\u4f9d\u8d56\npip check\n</code></pre> <p>\u66f4\u65b0\u65f6\u95f4: 2024\u5e749\u6708 \u7ef4\u62a4\u8005: DevOps Engineer</p> <p>\ud83d\udca1 \u63d0\u793a: \u65b0\u52a0\u5165\u9879\u76ee\u7684 AI \u52a9\u624b\uff0c\u5efa\u8bae\u9996\u5148\u9605\u8bfb\u672c\u6587\u6863\u4e86\u89e3\u53ef\u7528\u5de5\u5177\uff01</p>"},{"location":"project/TRIGGER_CI/","title":"TRIGGER CI","text":"<p>\u9879\u76ee\u5bfc\u5165\u8def\u5f84\u4fee\u590d\u5b8c\u6210, \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7</p>"},{"location":"project/WORKFLOWS_GUIDE/","title":"\ud83d\udd04 GitHub Actions \u5de5\u4f5c\u6d41\u529f\u80fd\u6307\u5357","text":"<p>\u672c\u9879\u76ee\u5171\u6709 6 \u4e2a GitHub Actions \u5de5\u4f5c\u6d41\uff0c\u8986\u76d6 CI/CD\u3001MLOps\u3001\u90e8\u7f72\u3001\u95ee\u9898\u8ddf\u8e2a\u3001\u9879\u76ee\u540c\u6b65\u548c\u7ef4\u62a4\u7b49\u5168\u751f\u547d\u5468\u671f</p> <p>\u6700\u540e\u66f4\u65b0: 2025-10-07</p>"},{"location":"project/WORKFLOWS_GUIDE/#_1","title":"\ud83d\udccb \u5de5\u4f5c\u6d41\u6982\u89c8","text":"\u5de5\u4f5c\u6d41 \u6587\u4ef6\u540d \u89e6\u53d1\u65b9\u5f0f \u4e3b\u8981\u529f\u80fd \u72b6\u6001 \ud83d\udd27 CI \u6301\u7eed\u96c6\u6210 <code>ci-pipeline.yml</code> Push/PR \u4ee3\u7801\u8d28\u91cf\u68c0\u67e5\u3001\u6d4b\u8bd5\u3001\u8986\u76d6\u7387 \u2705 \u6d3b\u8dc3 \ud83e\udd16 MLOps \u673a\u5668\u5b66\u4e60 <code>mlops-pipeline.yml</code> \u5b9a\u65f6/\u624b\u52a8/Push \u6a21\u578b\u8bad\u7ec3\u3001\u76d1\u63a7\u3001\u53cd\u9988\u5faa\u73af \u2705 \u6d3b\u8dc3 \ud83d\ude80 \u90e8\u7f72\u6d41\u6c34\u7ebf <code>deploy-pipeline.yml</code> CI\u5b8c\u6210\u540e/\u624b\u52a8 \u591a\u73af\u5883\u90e8\u7f72\u3001\u56de\u6eda \u2705 \u6d3b\u8dc3 \ud83d\udc1b \u95ee\u9898\u8ddf\u8e2a <code>issue-tracking-pipeline.yml</code> CI\u5931\u8d25/\u624b\u52a8 \u81ea\u52a8\u521b\u5efa Issue\u3001\u95ee\u9898\u5206\u7c7b \u2705 \u6d3b\u8dc3 \ud83d\udd04 \u9879\u76ee\u540c\u6b65 <code>project-sync-pipeline.yml</code> PR\u5173\u95ed/\u624b\u52a8 Kanban \u540c\u6b65\u3001PR \u72b6\u6001\u66f4\u65b0 \u2705 \u6d3b\u8dc3 \ud83e\uddf9 \u9879\u76ee\u7ef4\u62a4 <code>project-maintenance-pipeline.yml</code> \u5b9a\u65f6/\u624b\u52a8 \u6587\u6863\u66f4\u65b0\u3001\u6e05\u7406\u3001\u7edf\u8ba1 \u2705 \u6d3b\u8dc3"},{"location":"project/WORKFLOWS_GUIDE/#1-ci","title":"1\ufe0f\u20e3 CI \u6301\u7eed\u96c6\u6210\u6d41\u6c34\u7ebf","text":"<p>\u6587\u4ef6: <code>.github/workflows/ci-pipeline.yml</code> \u540d\u79f0: CI \u6301\u7eed\u96c6\u6210\u6d41\u6c34\u7ebf</p>"},{"location":"project/WORKFLOWS_GUIDE/#_2","title":"\ud83c\udfaf \u529f\u80fd\u6982\u8ff0","text":"<p>\u5b8c\u6574\u7684\u4ee3\u7801\u8d28\u91cf\u4fdd\u8bc1\u548c\u6d4b\u8bd5\u6d41\u7a0b\uff0c\u786e\u4fdd\u6bcf\u6b21\u63d0\u4ea4\u7684\u4ee3\u7801\u8d28\u91cf\u3002</p>"},{"location":"project/WORKFLOWS_GUIDE/#_3","title":"\ud83d\udd14 \u89e6\u53d1\u6761\u4ef6","text":"<pre><code># \u5206\u652f\u63a8\u9001\npush:\n  branches: [main, develop, hotfix/**]\n\n# Pull Request\npull_request:\n  branches: [main, develop]\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#_4","title":"\ud83c\udfd7\ufe0f \u5de5\u4f5c\u6d41\u9636\u6bb5","text":""},{"location":"project/WORKFLOWS_GUIDE/#1-basic-checks","title":"\u9636\u6bb5 1: \u57fa\u7840\u68c0\u67e5 (Basic Checks)","text":"<ul> <li>\u2705 \u68c0\u67e5\u76f8\u5173\u6587\u4ef6\u662f\u5426\u6709\u53d8\u66f4</li> <li>\u2705 \u667a\u80fd\u8df3\u8fc7\u65e0\u5173\u63d0\u4ea4\uff08\u6027\u80fd\u4f18\u5316\uff09</li> <li>\u26a1 \u5feb\u901f\u5931\u8d25\u673a\u5236</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#2-quality-check","title":"\u9636\u6bb5 2: \u4ee3\u7801\u8d28\u91cf\u68c0\u67e5 (Quality Check)","text":"<ul> <li>\u2705 Ruff \u4ee3\u7801\u68c0\u67e5 - \u5feb\u901f linting</li> <li>\u2705 Mypy \u7c7b\u578b\u68c0\u67e5 - \u9759\u6001\u7c7b\u578b\u9a8c\u8bc1</li> <li>\u2705 \u4f9d\u8d56\u4e00\u81f4\u6027\u68c0\u67e5 - \u9a8c\u8bc1 lock \u6587\u4ef6</li> </ul> <pre><code># \u6267\u884c\u7684\u547d\u4ee4\nruff check src/ tests/ --output-format=github\nmypy src/ --ignore-missing-imports\nmake verify-deps\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#3-mocked-coverage","title":"\u9636\u6bb5 3: \u6a21\u62df\u6d4b\u8bd5\u8986\u76d6\u7387 (Mocked Coverage)","text":"<ul> <li>\u2705 \u5355\u5143\u6d4b\u8bd5\uff08\u65e0\u5916\u90e8\u4f9d\u8d56\uff09</li> <li>\u2705 \u8986\u76d6\u7387\u62a5\u544a\u751f\u6210</li> <li>\u2705 \u8986\u76d6\u7387\u9608\u503c\u9a8c\u8bc1\uff0880%\uff09</li> <li>\u2705 \u4e0a\u4f20\u5230 Codecov</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#4-integration-tests","title":"\u9636\u6bb5 4: \u96c6\u6210\u6d4b\u8bd5 (Integration Tests)","text":"<ul> <li>\ud83d\udc33 \u542f\u52a8\u6d4b\u8bd5\u670d\u52a1\uff08PostgreSQL + Redis\uff09</li> <li>\u2705 \u6570\u636e\u5e93\u96c6\u6210\u6d4b\u8bd5</li> <li>\u2705 Redis \u7f13\u5b58\u6d4b\u8bd5</li> <li>\u2705 API \u7aef\u5230\u7aef\u6d4b\u8bd5</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#5-security-scan","title":"\u9636\u6bb5 5: \u5b89\u5168\u626b\u63cf (Security Scan)","text":"<ul> <li>\ud83d\udd12 \u4f9d\u8d56\u6f0f\u6d1e\u626b\u63cf (pip-audit)</li> <li>\ud83d\udd12 \u4ee3\u7801\u5b89\u5168\u626b\u63cf (bandit)</li> <li>\ud83d\udcca \u751f\u6210\u5b89\u5168\u62a5\u544a</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#_5","title":"\ud83d\udcca \u8f93\u51fa\u4ea7\u7269","text":"<ul> <li>\u2705 \u6d4b\u8bd5\u62a5\u544a (JUnit XML)</li> <li>\u2705 \u8986\u76d6\u7387\u62a5\u544a (HTML + XML)</li> <li>\u2705 \u5b89\u5168\u626b\u63cf\u62a5\u544a</li> <li>\u2705 \u4ee3\u7801\u8d28\u91cf\u62a5\u544a</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#2-mlops","title":"2\ufe0f\u20e3 MLOps \u673a\u5668\u5b66\u4e60\u6d41\u6c34\u7ebf","text":"<p>\u6587\u4ef6: <code>.github/workflows/mlops-pipeline.yml</code> \u540d\u79f0: MLOps \u673a\u5668\u5b66\u4e60\u6d41\u6c34\u7ebf</p>"},{"location":"project/WORKFLOWS_GUIDE/#_6","title":"\ud83c\udfaf \u529f\u80fd\u6982\u8ff0","text":"<p>\u81ea\u52a8\u5316\u7684\u673a\u5668\u5b66\u4e60\u8fd0\u7ef4\u6d41\u7a0b\uff0c\u5305\u62ec\u6a21\u578b\u8bad\u7ec3\u3001\u76d1\u63a7\u3001\u53cd\u9988\u5faa\u73af\u548c\u81ea\u52a8\u91cd\u8bad\u7ec3\u3002</p>"},{"location":"project/WORKFLOWS_GUIDE/#_7","title":"\ud83d\udd14 \u89e6\u53d1\u6761\u4ef6","text":"<pre><code># \u5b9a\u65f6\u6267\u884c\uff08\u6bcf\u65e5\u65e9\u4e0a 8:00 UTC\uff0c\u5317\u4eac\u65f6\u95f4 16:00\uff09\nschedule:\n  - cron: '0 8 * * *'\n\n# \u624b\u52a8\u89e6\u53d1\nworkflow_dispatch:\n  inputs:\n    task: [all, feedback-update, performance-report, retrain-check, model-monitor, cleanup]\n    days_back: '30'\n    force_retrain: false\n\n# \u6a21\u578b\u4ee3\u7801\u53d8\u66f4\npush:\n  branches: [main]\n  paths:\n    - 'src/models/**'\n    - 'scripts/**'\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#_8","title":"\ud83c\udfd7\ufe0f \u5de5\u4f5c\u6d41\u9636\u6bb5","text":""},{"location":"project/WORKFLOWS_GUIDE/#1-feedback-update","title":"\u9636\u6bb5 1: \u53cd\u9988\u66f4\u65b0 (Feedback Update)","text":"<ul> <li>\ud83d\udcca \u66f4\u65b0\u9884\u6d4b\u7ed3\u679c\u548c\u771f\u5b9e\u7ed3\u679c\u5bf9\u6bd4</li> <li>\ud83d\udcc8 \u751f\u6210\u51c6\u786e\u7387\u8d8b\u52bf</li> <li>\ud83d\udcbe \u4fdd\u5b58\u5230\u6570\u636e\u5e93</li> </ul> <pre><code># \u6267\u884c\u7684\u4efb\u52a1\nmake feedback-update\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#2-performance-report","title":"\u9636\u6bb5 2: \u6027\u80fd\u62a5\u544a (Performance Report)","text":"<ul> <li>\ud83d\udcca \u751f\u6210\u6a21\u578b\u6027\u80fd\u62a5\u544a</li> <li>\ud83d\udcc8 \u53ef\u89c6\u5316\u51c6\u786e\u7387\u8d8b\u52bf</li> <li>\ud83d\udcc9 \u5206\u6790\u6027\u80fd\u4e0b\u964d\u539f\u56e0</li> </ul> <pre><code># \u6267\u884c\u7684\u4efb\u52a1\nmake performance-report\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#3-retrain-check","title":"\u9636\u6bb5 3: \u91cd\u8bad\u7ec3\u68c0\u67e5 (Retrain Check)","text":"<ul> <li>\ud83d\udd0d \u68c0\u67e5\u6a21\u578b\u6027\u80fd\u662f\u5426\u4e0b\u964d</li> <li>\ud83c\udfaf \u51c6\u786e\u7387\u9608\u503c\u9a8c\u8bc1</li> <li>\ud83d\udea8 \u89e6\u53d1\u91cd\u8bad\u7ec3\u51b3\u7b56</li> </ul> <pre><code># \u6267\u884c\u7684\u4efb\u52a1\nmake retrain-check\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#4-model-monitor","title":"\u9636\u6bb5 4: \u6a21\u578b\u76d1\u63a7 (Model Monitor)","text":"<ul> <li>\ud83c\udfe5 \u6a21\u578b\u5065\u5eb7\u68c0\u67e5</li> <li>\ud83d\udcca \u6027\u80fd\u6307\u6807\u6536\u96c6</li> <li>\ud83d\udea8 \u5f02\u5e38\u544a\u8b66</li> </ul> <pre><code># \u6267\u884c\u7684\u4efb\u52a1\nmake model-monitor\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#5-cleanup","title":"\u9636\u6bb5 5: \u6570\u636e\u6e05\u7406 (Cleanup)","text":"<ul> <li>\ud83e\uddf9 \u6e05\u7406\u8fc7\u671f\u9884\u6d4b\u6570\u636e</li> <li>\ud83d\uddc4\ufe0f \u5f52\u6863\u5386\u53f2\u6570\u636e</li> <li>\ud83d\udcbe \u4f18\u5316\u5b58\u50a8\u7a7a\u95f4</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#_9","title":"\ud83d\udcca \u8f93\u51fa\u4ea7\u7269","text":"<ul> <li>\ud83d\udcc8 \u6027\u80fd\u62a5\u544a (<code>reports/generated/model_performance_*.md</code>)</li> <li>\ud83d\udd04 \u91cd\u8bad\u7ec3\u62a5\u544a (<code>models/retrain_reports/</code>)</li> <li>\ud83d\udcca \u76d1\u63a7\u6307\u6807 (MLflow)</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#_10","title":"\ud83d\udd27 \u4f7f\u7528\u793a\u4f8b","text":"<pre><code># \u624b\u52a8\u89e6\u53d1\u5b8c\u6574 MLOps \u6d41\u7a0b\ngh workflow run mlops-pipeline.yml -f task=all\n\n# \u4ec5\u66f4\u65b0\u53cd\u9988\u6570\u636e\ngh workflow run mlops-pipeline.yml -f task=feedback-update\n\n# \u5f3a\u5236\u91cd\u8bad\u7ec3\u8bc4\u4f30\ngh workflow run mlops-pipeline.yml -f task=retrain-check -f force_retrain=true\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#3","title":"3\ufe0f\u20e3 \u90e8\u7f72\u6d41\u6c34\u7ebf","text":"<p>\u6587\u4ef6: <code>.github/workflows/deploy-pipeline.yml</code> \u540d\u79f0: \u90e8\u7f72\u6d41\u6c34\u7ebf</p>"},{"location":"project/WORKFLOWS_GUIDE/#_11","title":"\ud83c\udfaf \u529f\u80fd\u6982\u8ff0","text":"<p>\u81ea\u52a8\u5316\u591a\u73af\u5883\u90e8\u7f72\uff0c\u652f\u6301 Staging \u548c Production \u73af\u5883\uff0c\u5305\u542b\u56de\u6eda\u673a\u5236\u3002</p>"},{"location":"project/WORKFLOWS_GUIDE/#_12","title":"\ud83d\udd14 \u89e6\u53d1\u6761\u4ef6","text":"<pre><code># CI \u5b8c\u6210\u540e\u81ea\u52a8\u90e8\u7f72\nworkflow_run:\n  workflows: [\"CI \u6301\u7eed\u96c6\u6210\u6d41\u6c34\u7ebf\"]\n  types: [completed]\n  branches: [main, develop]\n\n# \u624b\u52a8\u90e8\u7f72\nworkflow_dispatch:\n  inputs:\n    environment: [staging, production]\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#_13","title":"\ud83c\udfd7\ufe0f \u5de5\u4f5c\u6d41\u9636\u6bb5","text":""},{"location":"project/WORKFLOWS_GUIDE/#1-determine-environment","title":"\u9636\u6bb5 1: \u786e\u5b9a\u73af\u5883 (Determine Environment)","text":"<ul> <li>\ud83c\udfaf \u6839\u636e\u5206\u652f\u548c\u8f93\u5165\u786e\u5b9a\u90e8\u7f72\u73af\u5883</li> <li>\u2705 main \u2192 staging</li> <li>\u2705 \u624b\u52a8\u9009\u62e9 \u2192 staging/production</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#2-prepare-deployment","title":"\u9636\u6bb5 2: \u51c6\u5907\u90e8\u7f72 (Prepare Deployment)","text":"<ul> <li>\ud83d\udd10 \u9a8c\u8bc1\u5fc5\u9700\u7684 secrets</li> <li>\ud83c\udff7\ufe0f \u751f\u6210 Git SHA \u6807\u7b7e</li> <li>\u2705 \u5065\u5eb7\u68c0\u67e5</li> </ul> <p>\u5fc5\u9700\u7684 Secrets:</p> <pre><code>AWS_ACCESS_KEY_ID\nAWS_SECRET_ACCESS_KEY\nDATABASE_URL\nREDIS_URL\nSECRET_KEY\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#3-docker-build-docker-image","title":"\u9636\u6bb5 3: \u6784\u5efa Docker \u955c\u50cf (Build Docker Image)","text":"<ul> <li>\ud83d\udc33 \u591a\u9636\u6bb5 Docker \u6784\u5efa</li> <li>\ud83c\udff7\ufe0f \u4f7f\u7528 Git SHA \u6807\u7b7e</li> <li>\ud83d\udce6 \u63a8\u9001\u5230 GitHub Container Registry</li> </ul> <pre><code># \u6784\u5efa\u547d\u4ee4\ndocker build --target production \\\n  --tag ghcr.io/${{ github.repository }}:${{ github.sha }} \\\n  --tag ghcr.io/${{ github.repository }}:latest\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#4-staging-deploy-to-staging","title":"\u9636\u6bb5 4: \u90e8\u7f72\u5230 Staging (Deploy to Staging)","text":"<ul> <li>\ud83d\ude80 \u90e8\u7f72\u5230 Staging \u73af\u5883</li> <li>\u2705 \u8fd0\u884c\u5192\u70df\u6d4b\u8bd5</li> <li>\ud83d\udcca \u9a8c\u8bc1\u5065\u5eb7\u68c0\u67e5</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#5-production-deploy-to-production","title":"\u9636\u6bb5 5: \u90e8\u7f72\u5230 Production (Deploy to Production)","text":"<ul> <li>\ud83d\udd12 \u9700\u8981\u624b\u52a8\u5ba1\u6279</li> <li>\ud83d\ude80 \u84dd\u7eff\u90e8\u7f72</li> <li>\ud83d\udd04 \u81ea\u52a8\u56de\u6eda\u673a\u5236</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#6-health-check","title":"\u9636\u6bb5 6: \u5065\u5eb7\u68c0\u67e5 (Health Check)","text":"<ul> <li>\ud83c\udfe5 \u9a8c\u8bc1\u670d\u52a1\u5065\u5eb7</li> <li>\ud83d\udcca \u68c0\u67e5\u5173\u952e\u6307\u6807</li> <li>\ud83d\udea8 \u5931\u8d25\u65f6\u81ea\u52a8\u56de\u6eda</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#_14","title":"\ud83d\udcca \u90e8\u7f72\u7b56\u7565","text":"\u73af\u5883 \u5206\u652f \u5ba1\u6279 \u56de\u6eda Staging main/develop \u81ea\u52a8 \u81ea\u52a8 Production main \u624b\u52a8 \u81ea\u52a8"},{"location":"project/WORKFLOWS_GUIDE/#_15","title":"\ud83d\udd27 \u4f7f\u7528\u793a\u4f8b","text":"<pre><code># \u90e8\u7f72\u5230 Staging\ngh workflow run deploy-pipeline.yml -f environment=staging\n\n# \u90e8\u7f72\u5230 Production\uff08\u9700\u8981\u5ba1\u6279\uff09\ngh workflow run deploy-pipeline.yml -f environment=production\n\n# \u56de\u6eda\u5230\u6307\u5b9a\u7248\u672c\nmake rollback TAG=abc1234\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#4","title":"4\ufe0f\u20e3 \u95ee\u9898\u8ddf\u8e2a\u6d41\u6c34\u7ebf","text":"<p>\u6587\u4ef6: <code>.github/workflows/issue-tracking-pipeline.yml</code> \u540d\u79f0: \u95ee\u9898\u8ddf\u8e2a\u6d41\u6c34\u7ebf</p>"},{"location":"project/WORKFLOWS_GUIDE/#_16","title":"\ud83c\udfaf \u529f\u80fd\u6982\u8ff0","text":"<p>\u81ea\u52a8\u5316\u95ee\u9898\u7ba1\u7406\uff0cCI \u5931\u8d25\u65f6\u81ea\u52a8\u521b\u5efa Issue\uff0c\u5e76\u8fdb\u884c\u667a\u80fd\u5206\u7c7b\u3002</p>"},{"location":"project/WORKFLOWS_GUIDE/#_17","title":"\ud83d\udd14 \u89e6\u53d1\u6761\u4ef6","text":"<pre><code># CI \u5931\u8d25\u65f6\nworkflow_run:\n  workflows: [\"CI Pipeline\"]\n  types: [completed]\n\n# MLOps \u68c0\u6d4b\u5230\u95ee\u9898\nworkflow_run:\n  workflows: [\"MLOps\"]\n  types: [completed]\n\n# \u624b\u52a8\u521b\u5efa\nworkflow_dispatch:\n  inputs:\n    issue_type: [bug, enhancement, task, question]\n    title: \"Issue title\"\n    description: \"Issue description\"\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#_18","title":"\ud83c\udfd7\ufe0f \u5de5\u4f5c\u6d41\u529f\u80fd","text":""},{"location":"project/WORKFLOWS_GUIDE/#1-ci-track-ci-failures","title":"\u529f\u80fd 1: \u8ddf\u8e2a CI \u5931\u8d25 (Track CI Failures)","text":"<ul> <li>\ud83d\udd0d \u5206\u6790 CI \u5931\u8d25\u539f\u56e0</li> <li>\ud83d\udcdd \u81ea\u52a8\u521b\u5efa\u8be6\u7ec6 Issue</li> <li>\ud83c\udff7\ufe0f \u81ea\u52a8\u6dfb\u52a0\u6807\u7b7e</li> </ul> <p>\u521b\u5efa\u7684 Issue \u5305\u542b:</p> <ul> <li>\u274c \u5931\u8d25\u7684 Job \u540d\u79f0</li> <li>\u274c \u5931\u8d25\u7684 Step \u540d\u79f0</li> <li>\ud83d\udd17 \u8fd0\u884c\u65e5\u5fd7\u94fe\u63a5</li> <li>\ud83d\udcdd \u5931\u8d25\u65e5\u5fd7\u6458\u8981</li> <li>\ud83c\udff7\ufe0f \u6807\u7b7e: <code>ci-failure</code>, <code>auto-created</code></li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#2-mlops-track-mlops-issues","title":"\u529f\u80fd 2: \u8ddf\u8e2a MLOps \u95ee\u9898 (Track MLOps Issues)","text":"<ul> <li>\ud83d\udcc9 \u6a21\u578b\u6027\u80fd\u4e0b\u964d\u544a\u8b66</li> <li>\ud83d\udd0d \u6570\u636e\u8d28\u91cf\u95ee\u9898</li> <li>\ud83d\udea8 \u91cd\u8bad\u7ec3\u5931\u8d25\u901a\u77e5</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#3-issue-classification","title":"\u529f\u80fd 3: \u667a\u80fd\u95ee\u9898\u5206\u7c7b (Issue Classification)","text":"<ul> <li>\ud83e\udd16 \u81ea\u52a8\u5206\u7c7b\u95ee\u9898\u7c7b\u578b</li> <li>\ud83c\udff7\ufe0f \u6dfb\u52a0\u76f8\u5173\u6807\u7b7e</li> <li>\ud83d\udc64 \u81ea\u52a8\u5206\u914d\u8d1f\u8d23\u4eba</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#4-duplicate-detection","title":"\u529f\u80fd 4: \u91cd\u590d\u95ee\u9898\u68c0\u6d4b (Duplicate Detection)","text":"<ul> <li>\ud83d\udd0d \u68c0\u67e5\u662f\u5426\u6709\u76f8\u4f3c Issue</li> <li>\ud83d\udd17 \u5173\u8054\u91cd\u590d Issue</li> <li>\ud83d\udcca \u66f4\u65b0\u73b0\u6709 Issue</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#issue","title":"\ud83d\udcca Issue \u5206\u7c7b","text":"\u7c7b\u578b \u6807\u7b7e \u4f18\u5148\u7ea7 \u81ea\u52a8\u5206\u914d CI \u5931\u8d25 <code>ci-failure</code>, <code>bug</code> High CI \u7ef4\u62a4\u8005 \u6a21\u578b\u6027\u80fd\u4e0b\u964d <code>mlops</code>, <code>performance</code> High ML \u5de5\u7a0b\u5e08 \u6d4b\u8bd5\u5931\u8d25 <code>test-failure</code> Medium QA \u56e2\u961f \u4f9d\u8d56\u95ee\u9898 <code>dependencies</code> Low DevOps"},{"location":"project/WORKFLOWS_GUIDE/#5","title":"5\ufe0f\u20e3 \u9879\u76ee\u540c\u6b65\u6d41\u6c34\u7ebf","text":"<p>\u6587\u4ef6: <code>.github/workflows/project-sync-pipeline.yml</code> \u540d\u79f0: \u9879\u76ee\u540c\u6b65\u6d41\u6c34\u7ebf</p>"},{"location":"project/WORKFLOWS_GUIDE/#_19","title":"\ud83c\udfaf \u529f\u80fd\u6982\u8ff0","text":"<p>\u4fdd\u6301\u9879\u76ee\u770b\u677f\u3001PR \u72b6\u6001\u548c\u6587\u6863\u540c\u6b65\uff0c\u786e\u4fdd\u9879\u76ee\u7ba1\u7406\u7684\u4e00\u81f4\u6027\u3002</p>"},{"location":"project/WORKFLOWS_GUIDE/#_20","title":"\ud83d\udd14 \u89e6\u53d1\u6761\u4ef6","text":"<pre><code># PR \u5173\u95ed\u65f6\npull_request:\n  types: [closed]\n\n# \u624b\u52a8\u89e6\u53d1\nworkflow_dispatch:\n  inputs:\n    task: [kanban, pr-update, issue-sync]\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#_21","title":"\ud83c\udfd7\ufe0f \u5de5\u4f5c\u6d41\u529f\u80fd","text":""},{"location":"project/WORKFLOWS_GUIDE/#1-kanban-kanban-synchronization","title":"\u529f\u80fd 1: Kanban \u540c\u6b65 (Kanban Synchronization)","text":"<ul> <li>\ud83d\udcca PR \u5173\u95ed\u65f6\u66f4\u65b0\u770b\u677f\u72b6\u6001</li> <li>\u2705 \u5b8c\u6210\u7684\u4efb\u52a1\u79fb\u5230 Done \u5217</li> <li>\ud83d\udd04 \u540c\u6b65 Issue \u72b6\u6001</li> </ul> <pre><code># \u6267\u884c\u7684\u811a\u672c\npython scripts/kanban_audit.py \\\n  --repo ${{ github.repository }} \\\n  --pr-number $PR_NUMBER \\\n  --update-kanban\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#2-pr-pr-status-update","title":"\u529f\u80fd 2: PR \u72b6\u6001\u66f4\u65b0 (PR Status Update)","text":"<ul> <li>\ud83d\udcdd \u66f4\u65b0 PR \u63cf\u8ff0</li> <li>\u2705 \u68c0\u67e5 PR \u5b8c\u6210\u5ea6</li> <li>\ud83c\udff7\ufe0f \u66f4\u65b0\u6807\u7b7e</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#3-issue-issue-sync","title":"\u529f\u80fd 3: Issue \u540c\u6b65 (Issue Sync)","text":"<ul> <li>\ud83d\udd04 \u53cc\u5411\u540c\u6b65 Issue \u72b6\u6001</li> <li>\ud83d\udcca \u66f4\u65b0\u770b\u677f</li> <li>\ud83d\udd17 \u5173\u8054\u76f8\u5173 Issue</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#kanban","title":"\ud83d\udcca Kanban \u5217","text":"<pre><code>\ud83d\udccb Backlog \u2192 \ud83d\ude80 To Do \u2192 \ud83c\udfd7\ufe0f In Progress \u2192 \u2705 Done\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#6","title":"6\ufe0f\u20e3 \u9879\u76ee\u7ef4\u62a4\u6d41\u6c34\u7ebf","text":"<p>\u6587\u4ef6: <code>.github/workflows/project-maintenance-pipeline.yml</code> \u540d\u79f0: \u9879\u76ee\u7ef4\u62a4\u6d41\u6c34\u7ebf</p>"},{"location":"project/WORKFLOWS_GUIDE/#_22","title":"\ud83c\udfaf \u529f\u80fd\u6982\u8ff0","text":"<p>\u5b9a\u671f\u7ef4\u62a4\u9879\u76ee\uff0c\u66f4\u65b0\u6587\u6863\u3001\u6e05\u7406\u6570\u636e\u3001\u751f\u6210\u7edf\u8ba1\u62a5\u544a\u3002</p>"},{"location":"project/WORKFLOWS_GUIDE/#_23","title":"\ud83d\udd14 \u89e6\u53d1\u6761\u4ef6","text":"<pre><code># \u5b9a\u65f6\u6267\u884c\uff08\u6bcf\u5468\u4e00\u51cc\u6668 2 \u70b9 UTC\uff09\nschedule:\n  - cron: \"0 2 * * 1\"\n\n# \u624b\u52a8\u89e6\u53d1\nworkflow_dispatch:\n  inputs:\n    task: [all, docs, cleanup, stats, archive]\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#_24","title":"\ud83c\udfd7\ufe0f \u5de5\u4f5c\u6d41\u529f\u80fd","text":""},{"location":"project/WORKFLOWS_GUIDE/#1-update-documentation","title":"\u529f\u80fd 1: \u6587\u6863\u66f4\u65b0 (Update Documentation)","text":"<ul> <li>\ud83d\udcda \u751f\u6210 API \u6587\u6863</li> <li>\ud83d\udcca \u66f4\u65b0 README \u7edf\u8ba1</li> <li>\ud83d\udc65 \u66f4\u65b0\u8d21\u732e\u8005\u5217\u8868</li> <li>\ud83d\udcdd \u751f\u6210 CHANGELOG</li> </ul> <pre><code># \u6267\u884c\u7684\u811a\u672c\npython scripts/generate_api_docs.py\npython scripts/update_readme_stats.py\npython scripts/update_contributors.py\npython scripts/generate_changelog.py --days 7\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#2-cleanup","title":"\u529f\u80fd 2: \u6570\u636e\u6e05\u7406 (Cleanup)","text":"<ul> <li>\ud83e\uddf9 \u6e05\u7406\u65e7\u65e5\u5fd7\u6587\u4ef6</li> <li>\ud83d\uddc4\ufe0f \u5f52\u6863\u6d4b\u8bd5\u62a5\u544a</li> <li>\ud83d\udcbe \u4f18\u5316\u5b58\u50a8\u7a7a\u95f4</li> <li>\ud83d\udd04 \u6e05\u7406 Docker \u7f13\u5b58</li> </ul> <p>\u6e05\u7406\u89c4\u5219:</p> <ul> <li>\u65e5\u5fd7\u6587\u4ef6: \u4fdd\u7559 30 \u5929</li> <li>\u6d4b\u8bd5\u62a5\u544a: \u4fdd\u7559 90 \u5929</li> <li>\u8986\u76d6\u7387\u62a5\u544a: \u4fdd\u7559 180 \u5929</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#3-statistics","title":"\u529f\u80fd 3: \u7edf\u8ba1\u62a5\u544a (Statistics)","text":"<ul> <li>\ud83d\udcca \u751f\u6210\u9879\u76ee\u7edf\u8ba1</li> <li>\ud83d\udcc8 \u4ee3\u7801\u589e\u957f\u8d8b\u52bf</li> <li>\ud83d\udc65 \u8d21\u732e\u8005\u6d3b\u8dc3\u5ea6</li> <li>\ud83e\uddea \u6d4b\u8bd5\u8986\u76d6\u7387\u5386\u53f2</li> </ul> <p>\u751f\u6210\u7684\u62a5\u544a:</p> <pre><code>docs/_reports/\n\u251c\u2500\u2500 weekly_stats.md\n\u251c\u2500\u2500 code_quality_trends.md\n\u2514\u2500\u2500 contributor_activity.md\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#4-archive","title":"\u529f\u80fd 4: \u5f52\u6863 (Archive)","text":"<ul> <li>\ud83d\udce6 \u5f52\u6863\u65e7\u5206\u652f</li> <li>\ud83d\uddc4\ufe0f \u5f52\u6863\u5173\u95ed\u7684 Issue</li> <li>\ud83d\udcda \u5f52\u6863\u6587\u6863\u7248\u672c</li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#_25","title":"\ud83d\udd27 \u5de5\u4f5c\u6d41\u7ba1\u7406","text":""},{"location":"project/WORKFLOWS_GUIDE/#_26","title":"\u67e5\u770b\u5de5\u4f5c\u6d41\u72b6\u6001","text":"<pre><code># \u5217\u51fa\u6240\u6709\u5de5\u4f5c\u6d41\ngh workflow list\n\n# \u67e5\u770b\u7279\u5b9a\u5de5\u4f5c\u6d41\u8fd0\u884c\ngh run list --workflow=ci-pipeline.yml\n\n# \u67e5\u770b\u8fd0\u884c\u8be6\u60c5\ngh run view &lt;run-id&gt;\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#_27","title":"\u624b\u52a8\u89e6\u53d1\u5de5\u4f5c\u6d41","text":"<pre><code># CI \u6d41\u6c34\u7ebf\ngh workflow run ci-pipeline.yml\n\n# MLOps \u6d41\u6c34\u7ebf\uff08\u5b8c\u6574\uff09\ngh workflow run mlops-pipeline.yml -f task=all -f days_back=30\n\n# \u90e8\u7f72\u5230 Staging\ngh workflow run deploy-pipeline.yml -f environment=staging\n\n# \u9879\u76ee\u7ef4\u62a4\uff08\u4ec5\u6587\u6863\u66f4\u65b0\uff09\ngh workflow run project-maintenance-pipeline.yml -f task=docs\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#_28","title":"\u67e5\u770b\u5de5\u4f5c\u6d41\u65e5\u5fd7","text":"<pre><code># \u67e5\u770b\u6700\u65b0\u8fd0\u884c\u65e5\u5fd7\ngh run view --log\n\n# \u4e0b\u8f7d\u65e5\u5fd7\ngh run download &lt;run-id&gt;\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#_29","title":"\ud83d\udcca \u5de5\u4f5c\u6d41\u7edf\u8ba1","text":""},{"location":"project/WORKFLOWS_GUIDE/#_30","title":"\u6267\u884c\u9891\u7387","text":"\u5de5\u4f5c\u6d41 \u81ea\u52a8\u6267\u884c \u5e73\u5747\u65f6\u957f \u6210\u529f\u7387 CI \u6bcf\u6b21 Push/PR ~5-8 \u5206\u949f 95%+ MLOps \u6bcf\u5929 1 \u6b21 ~15-20 \u5206\u949f 90%+ \u90e8\u7f72 CI \u5b8c\u6210\u540e ~10-15 \u5206\u949f 98%+ \u95ee\u9898\u8ddf\u8e2a CI/MLOps \u5931\u8d25\u65f6 ~1-2 \u5206\u949f 99%+ \u9879\u76ee\u540c\u6b65 PR \u5173\u95ed\u65f6 ~2-3 \u5206\u949f 98%+ \u9879\u76ee\u7ef4\u62a4 \u6bcf\u5468 1 \u6b21 ~5-10 \u5206\u949f 95%+"},{"location":"project/WORKFLOWS_GUIDE/#_31","title":"\ud83d\udea8 \u5e38\u89c1\u95ee\u9898","text":""},{"location":"project/WORKFLOWS_GUIDE/#q1-ci","title":"Q1: CI \u6d41\u6c34\u7ebf\u5931\u8d25\u4e86\u600e\u4e48\u529e\uff1f","text":"<p>A:</p> <ol> <li>\u67e5\u770b\u5931\u8d25\u7684 Job \u548c Step</li> <li>\u68c0\u67e5\u81ea\u52a8\u521b\u5efa\u7684 Issue</li> <li>\u672c\u5730\u8fd0\u884c <code>make prepush</code> \u590d\u73b0\u95ee\u9898</li> <li>\u4fee\u590d\u540e\u91cd\u65b0\u63d0\u4ea4</li> </ol>"},{"location":"project/WORKFLOWS_GUIDE/#q2-ci","title":"Q2: \u5982\u4f55\u8df3\u8fc7 CI \u68c0\u67e5\uff1f","text":"<p>A:</p> <pre><code># \u5728\u63d0\u4ea4\u4fe1\u606f\u4e2d\u6dfb\u52a0 [skip ci]\ngit commit -m \"docs: update README [skip ci]\"\n</code></pre> <p>\u26a0\ufe0f \u6ce8\u610f: \u4ec5\u7528\u4e8e\u6587\u6863\u66f4\u65b0\u7b49\u975e\u4ee3\u7801\u53d8\u66f4</p>"},{"location":"project/WORKFLOWS_GUIDE/#q3","title":"Q3: \u5982\u4f55\u56de\u6eda\u90e8\u7f72\uff1f","text":"<p>A:</p> <pre><code># \u65b9\u5f0f1: \u4f7f\u7528 Makefile\nmake rollback TAG=&lt;git-sha&gt;\n\n# \u65b9\u5f0f2: \u624b\u52a8\u89e6\u53d1\u90e8\u7f72\u6d41\u6c34\u7ebf\ngh workflow run deploy-pipeline.yml -f environment=production\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#q4-mlops","title":"Q4: MLOps \u6d41\u6c34\u7ebf\u5982\u4f55\u624b\u52a8\u89e6\u53d1\u91cd\u8bad\u7ec3\uff1f","text":"<p>A:</p> <pre><code>gh workflow run mlops-pipeline.yml \\\n  -f task=retrain-check \\\n  -f force_retrain=true\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#_32","title":"\ud83c\udfaf \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"project/WORKFLOWS_GUIDE/#1","title":"1. \u63d0\u4ea4\u4ee3\u7801\u524d","text":"<pre><code># \u672c\u5730\u8fd0\u884c\u5b8c\u6574\u9a8c\u8bc1\nmake prepush\n\n# \u6216\u8fd0\u884c\u672c\u5730 CI \u6a21\u62df\n./ci-verify.sh\n</code></pre>"},{"location":"project/WORKFLOWS_GUIDE/#2","title":"2. \u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883","text":"<ol> <li>\u2705 \u786e\u4fdd CI \u901a\u8fc7</li> <li>\u2705 \u5728 Staging \u6d4b\u8bd5</li> <li>\u2705 \u68c0\u67e5 MLOps \u62a5\u544a</li> <li>\u2705 \u624b\u52a8\u89e6\u53d1 Production \u90e8\u7f72</li> <li>\u2705 \u76d1\u63a7\u5065\u5eb7\u68c0\u67e5</li> </ol>"},{"location":"project/WORKFLOWS_GUIDE/#3-ci","title":"3. \u5904\u7406 CI \u5931\u8d25","text":"<ol> <li>\ud83d\udce7 \u67e5\u770b\u90ae\u4ef6\u901a\u77e5</li> <li>\ud83d\udd0d \u68c0\u67e5\u81ea\u52a8\u521b\u5efa\u7684 Issue</li> <li>\ud83d\udcbb \u672c\u5730\u590d\u73b0\u95ee\u9898</li> <li>\ud83d\udd27 \u4fee\u590d\u5e76\u9a8c\u8bc1</li> <li>\ud83d\udce4 \u91cd\u65b0\u63d0\u4ea4</li> </ol>"},{"location":"project/WORKFLOWS_GUIDE/#_33","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>\ud83d\udcd6 CI/CD \u914d\u7f6e: <code>.github/workflows/</code></li> <li>\ud83d\udcd6 Makefile \u547d\u4ee4: \u8fd0\u884c <code>make help</code></li> <li>\ud83d\udcd6 \u4f18\u5316\u6307\u5357: <code>OPTIMIZATION_QUICKSTART.md</code></li> <li>\ud83d\udcd6 \u9879\u76ee\u8bf4\u660e: <code>README.md</code></li> </ul>"},{"location":"project/WORKFLOWS_GUIDE/#_34","title":"\ud83d\udd04 \u66f4\u65b0\u65e5\u5fd7","text":"\u65e5\u671f \u53d8\u66f4 2025-10-07 \ud83c\udf89 \u521b\u5efa\u5de5\u4f5c\u6d41\u529f\u80fd\u6307\u5357 2025-10-07 \u2705 \u91cd\u547d\u540d\u5de5\u4f5c\u6d41\u4e3a\u82f1\u6587 <p>\u7ef4\u62a4\u8005: DevOps Team \u66f4\u65b0\u9891\u7387: \u6bcf\u6b21\u5de5\u4f5c\u6d41\u53d8\u66f4\u540e\u66f4\u65b0 \u53cd\u9988: \u901a\u8fc7 Issue \u63d0\u4ea4\u5efa\u8bae</p>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/","title":"\ud83d\udea8 CI\u98ce\u9669\u5206\u6790\u4e0e\u4ee3\u7801\u8d28\u91cf\u4f18\u5316\u62a5\u544a","text":"<p>\u9879\u76ee: \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf (FootballPrediction) \u5206\u6790\u65f6\u95f4: 2025\u5e749\u670812\u65e5 \u5f53\u524d\u5206\u652f: feature/fix-quality-issues \u5206\u6790\u4eba\u5458: AI\u52a9\u624b</p>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#_1","title":"\ud83d\udccb \u6267\u884c\u6458\u8981","text":"<p>\u7ecf\u8fc7\u5168\u9762\u5206\u6790\uff0c\u5f53\u524d\u9879\u76ee\u5b58\u5728\u591a\u4e2a\u9ad8\u98ce\u9669\u56e0\u7d20\u4f1a\u5bfc\u81f4CI\u88ab\u7ea2\u706f\u62e6\u622a\u3002\u4e3b\u8981\u95ee\u9898\u96c6\u4e2d\u5728\u4ee3\u7801\u8d28\u91cf\u3001\u5b89\u5168\u6027\u3001\u6d4b\u8bd5\u8986\u76d6\u7387\u548c\u5bfc\u5165\u89c4\u8303\u56db\u4e2a\u65b9\u9762\u3002\u9700\u8981\u7acb\u5373\u91c7\u53d6\u884c\u52a8\u4fee\u590d\u8fd9\u4e9b\u95ee\u9898\uff0c\u4ee5\u786e\u4fddCI\u6d41\u6c34\u7ebf\u7684\u7a33\u5b9a\u8fd0\u884c\u3002</p>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#_2","title":"\ud83d\udd34 \u98ce\u9669\u7b49\u7ea7\u8bc4\u4f30","text":"<ul> <li>\u6781\u9ad8\u98ce\u9669: \u4ee3\u7801\u98ce\u683c\u68c0\u67e5\u5931\u8d25 (100+\u4e2a\u9519\u8bef)</li> <li>\u9ad8\u98ce\u9669: \u5b89\u5168\u6f0f\u6d1e (2\u4e2a\u9ad8\u5371)</li> <li>\u4e2d\u9ad8\u98ce\u9669: \u6d4b\u8bd5\u8986\u76d6\u7387\u4e0d\u8fbe\u6807 (55% &lt; 60%)</li> <li>\u4e2d\u98ce\u9669: \u7c7b\u578b\u68c0\u67e5\u7ed5\u8fc7\u8fc7\u591a</li> </ul>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#ci_1","title":"\ud83d\udea8 CI\u7ea2\u706f\u98ce\u9669\u56e0\u7d20\u5206\u6790","text":""},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#1","title":"1. \u4ee3\u7801\u98ce\u683c\u68c0\u67e5\u5931\u8d25 \u26a0\ufe0f \u6781\u9ad8\u98ce\u9669","text":"<p>\u95ee\u9898\u63cf\u8ff0: <code>make lint</code> \u68c0\u67e5\u53d1\u73b0100+\u4e2a\u4ee3\u7801\u98ce\u683c\u548c\u8bed\u6cd5\u9519\u8bef</p> <p>\u5177\u4f53\u9519\u8bef\u7edf\u8ba1:</p> <ul> <li>F821 \u672a\u5b9a\u4e49\u540d\u79f0: 35+ \u5904 (\u4e3b\u8981\u662f <code>timedelta</code>)</li> <li>F841 \u672a\u4f7f\u7528\u53d8\u91cf: 25+ \u5904</li> <li>F401 \u672a\u4f7f\u7528\u5bfc\u5165: 20+ \u5904</li> <li>W504/W503 \u8fd0\u7b97\u7b26\u4f4d\u7f6e: 10+ \u5904</li> <li>E402 \u6a21\u5757\u5bfc\u5165\u4f4d\u7f6e\u9519\u8bef: 15+ \u5904</li> </ul> <p>\u5f71\u54cd: \u274c CI\u5fc5\u5b9a\u5931\u8d25 - flake8\u68c0\u67e5\u662fCI\u6d41\u6c34\u7ebf\u7684\u7b2c\u4e00\u9053\u5173\u5361</p> <p>\u793a\u4f8b\u95ee\u9898:</p> <pre><code># tests/e2e/test_backtest_accuracy.py:136:42: F821 undefined name 'timedelta'\n# tests/conftest.py:17:1: F811 redefinition of unused 'Dict' from line 1\n# tests/test_cache_basic.py:20:1: E402 module level import not at top of file\n</code></pre>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#2","title":"2. \u5b89\u5168\u6f0f\u6d1e \ud83d\udd10 \u9ad8\u98ce\u9669","text":"<p>\u95ee\u9898\u63cf\u8ff0: Bandit\u5b89\u5168\u626b\u63cf\u53d1\u73b02\u4e2a\u9ad8\u5371\u6f0f\u6d1e</p> <p>\u6f0f\u6d1e\u5206\u5e03:</p> <ul> <li><code>src/data/collectors/fixtures_collector.py</code>: 1\u4e2a\u9ad8\u5371\u6f0f\u6d1e</li> <li><code>src/data/collectors/odds_collector.py</code>: 1\u4e2a\u9ad8\u5371\u6f0f\u6d1e</li> <li>\u603b\u8ba1: \u9ad8\u53712\u4e2a, \u4e2d\u53717\u4e2a, \u4f4e\u53716\u4e2a</li> </ul> <p>\u5f71\u54cd: \u26a0\ufe0f \u5b89\u5168\u95e8\u7981\u53ef\u80fd\u963b\u6b62\u90e8\u7f72</p>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#3","title":"3. \u6d4b\u8bd5\u8986\u76d6\u7387\u4e0d\u8fbe\u6807 \ud83d\udcca \u4e2d\u9ad8\u98ce\u9669","text":"<p>\u5f53\u524d\u72b6\u6001:</p> <ul> <li>\u5b9e\u9645\u8986\u76d6\u7387: 55%</li> <li>CI\u6700\u4f4e\u8981\u6c42: 60%</li> <li>\u9879\u76ee\u89c4\u8303\u8981\u6c42: 80%</li> <li>\u5dee\u8ddd: -25%</li> </ul> <p>\u5f71\u54cd: \u274c CI\u8986\u76d6\u7387\u68c0\u67e5\u5931\u8d25</p> <p>\u5177\u4f53\u6570\u636e:</p> <pre><code>Name                         Stmts   Miss  Cover   Missing\nsrc/cache/redis_manager.py     406    182    55%   (\u5927\u91cf\u7f3a\u5931\u884c)\n</code></pre>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#4","title":"4. \u7c7b\u578b\u68c0\u67e5\u7ed5\u8fc7\u8fc7\u591a \ud83d\udd0d \u4e2d\u98ce\u9669","text":"<p>\u95ee\u9898\u63cf\u8ff0: mypy.ini \u4e2d\u670915+\u4e2a\u6a21\u5757\u88ab\u8bbe\u7f6e\u4e3a <code>ignore_errors = True</code></p> <p>\u88ab\u5ffd\u7565\u7684\u5173\u952e\u6a21\u5757:</p> <ul> <li><code>src.api.*</code></li> <li><code>src.models.*</code></li> <li><code>src.services.*</code></li> <li><code>src.utils.*</code></li> </ul> <p>\u5f71\u54cd: \u26a0\ufe0f \u7c7b\u578b\u5b89\u5168\u65e0\u6cd5\u4fdd\u8bc1</p>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#5","title":"5. \u5927\u91cf\u672a\u63d0\u4ea4\u4fee\u6539 \ud83d\udcc1 \u4e2d\u98ce\u9669","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u5f53\u524d\u670970+\u4e2a\u6587\u4ef6\u88ab\u4fee\u6539\u4f46\u672a\u63d0\u4ea4</p> <p>\u5f71\u54cd:</p> <ul> <li>\u53ef\u80fd\u5305\u542b\u4e0d\u7a33\u5b9a\u7684\u4ee3\u7801</li> <li>\u4e0e\u8fdc\u7a0b\u5206\u652f\u72b6\u6001\u4e0d\u4e00\u81f4</li> <li>\u589e\u52a0\u5408\u5e76\u51b2\u7a81\u98ce\u9669</li> </ul>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#ci_2","title":"\ud83d\udd27 \u5373\u65f6\u4fee\u590d\u5efa\u8bae (\u963b\u6b62CI\u7ea2\u706f)","text":""},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#1-1-2","title":"\u4f18\u5148\u7ea71: \u4fee\u590d\u4ee3\u7801\u98ce\u683c\u9519\u8bef \u23f0 1-2\u5c0f\u65f6","text":"<pre><code># 1. \u4fee\u590d\u5bfc\u5165\u95ee\u9898\nfind tests/ -name \"*.py\" -exec sed -i '1i from datetime import timedelta' {} \\;\n\n# 2. \u4fee\u590d\u672a\u4f7f\u7528\u5bfc\u5165\nautoflake --remove-all-unused-imports --recursive tests/ src/ --in-place\n\n# 3. \u4fee\u590d\u683c\u5f0f\u95ee\u9898\nblack tests/ src/\nisort tests/ src/\n\n# 4. \u9a8c\u8bc1\u4fee\u590d\nmake lint\n</code></pre>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#2-2-3","title":"\u4f18\u5148\u7ea72: \u5feb\u901f\u63d0\u5347\u8986\u76d6\u7387 \u23f0 2-3\u5c0f\u65f6","text":"<pre><code># 1. \u8fd0\u884c\u8986\u76d6\u7387\u5206\u6790\npytest --cov=src --cov-report=html --cov-report=term-missing\n\n# 2. \u91cd\u70b9\u6d4b\u8bd5\u5173\u952e\u6a21\u5757\n# - src/cache/redis_manager.py (\u5f53\u524d55%)\n# - src/core/ \u6a21\u5757\n# - src/services/ \u6a21\u5757\n\n# 3. \u6dfb\u52a0\u7b80\u5355\u6d4b\u8bd5\u7528\u4f8b\u63d0\u5347\u8986\u76d6\u7387\u523065%+\n</code></pre>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#3-1","title":"\u4f18\u5148\u7ea73: \u5b89\u5168\u6f0f\u6d1e\u4fee\u590d \u23f0 1\u5c0f\u65f6","text":"<pre><code># 1. \u68c0\u67e5\u5177\u4f53\u6f0f\u6d1e\nbandit -r src/data/collectors/fixtures_collector.py -f json\n\n# 2. \u5e38\u89c1\u4fee\u590d\u65b9\u6cd5:\n# - \u907f\u514d\u4f7f\u7528 eval()\u3001exec()\n# - \u4f7f\u7528\u5b89\u5168\u7684\u968f\u673a\u6570\u751f\u6210\u5668\n# - \u9a8c\u8bc1\u5916\u90e8\u8f93\u5165\n</code></pre>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#_3","title":"\ud83d\udcc8 \u4e2d\u957f\u671f\u4ee3\u7801\u8d28\u91cf\u4f18\u5316\u65b9\u6848","text":""},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#1-1","title":"\u9636\u6bb51: \u57fa\u7840\u8d28\u91cf\u7a33\u5b9a (1\u5468)","text":""},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#11","title":"1.1 \u5efa\u7acb\u8d28\u91cf\u95e8\u7981","text":"<ul> <li>\u2705 \u542f\u7528\u4e25\u683c\u7684pre-commit\u68c0\u67e5</li> <li>\u2705 \u5f3a\u5236\u8986\u76d6\u7387&gt;=70%</li> <li>\u2705 \u6240\u6709\u5b89\u5168\u6f0f\u6d1e\u4fee\u590d</li> <li>\u2705 CI\u901a\u8fc7\u7387\u7a33\u5b9a\u572895%+</li> </ul>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#12","title":"1.2 \u4ee3\u7801\u89c4\u8303\u7edf\u4e00","text":"<pre><code># .pre-commit-config.yaml \u589e\u5f3a\u914d\u7f6e\nrepos:\n  - repo: https://github.com/PyCQA/bandit\n    rev: 1.7.5\n    hooks:\n      - id: bandit\n        args: ['-r', 'src/', '-f', 'json', '-o', 'bandit-report.json']\n\n  - repo: https://github.com/pre-commit/mirrors-mypy\n    rev: v1.0.0\n    hooks:\n      - id: mypy\n        additional_dependencies: [types-requests, types-redis]\n</code></pre>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#2-2-3_1","title":"\u9636\u6bb52: \u8d28\u91cf\u63d0\u5347\u4f18\u5316 (2-3\u5468)","text":""},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#21","title":"2.1 \u7c7b\u578b\u5b89\u5168\u5f3a\u5316","text":"<ul> <li>\ud83c\udfaf \u76ee\u6807: \u79fb\u966450%\u7684<code>ignore_errors</code>\u914d\u7f6e</li> <li>\ud83d\udccb \u65b9\u6848: \u9010\u6a21\u5757\u6dfb\u52a0\u5b8c\u6574\u7c7b\u578b\u6ce8\u89e3</li> <li>\ud83d\udcca KPI: mypy\u8986\u76d6\u7387\u4ece30%\u63d0\u5347\u523070%</li> </ul>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#22","title":"2.2 \u6d4b\u8bd5\u67b6\u6784\u4f18\u5316","text":"<pre><code># \u6d4b\u8bd5\u5206\u5c42\u4f18\u5316\ntests/\n\u251c\u2500\u2500 unit/          # \u5355\u5143\u6d4b\u8bd5 (95%\u8986\u76d6\u7387)\n\u251c\u2500\u2500 integration/   # \u96c6\u6210\u6d4b\u8bd5 (85%\u8986\u76d6\u7387)\n\u251c\u2500\u2500 e2e/          # \u7aef\u5230\u7aef\u6d4b\u8bd5 (\u6838\u5fc3\u6d41\u7a0b)\n\u2514\u2500\u2500 performance/   # \u6027\u80fd\u6d4b\u8bd5\n</code></pre>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#23","title":"2.3 \u76d1\u63a7\u4f53\u7cfb\u5b8c\u5584","text":"<ul> <li>\ud83d\udcca \u4ee3\u7801\u8d28\u91cf\u6307\u6807\u76d1\u63a7</li> <li>\ud83d\udd0d \u6280\u672f\u503a\u52a1\u8ffd\u8e2a</li> <li>\ud83d\udcc8 \u8d28\u91cf\u8d8b\u52bf\u5206\u6790</li> <li>\u26a1 \u81ea\u52a8\u5316\u8d28\u91cf\u62a5\u544a</li> </ul>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#3_1","title":"\u9636\u6bb53: \u81ea\u52a8\u5316\u4e0e\u6301\u7eed\u6539\u8fdb (\u6301\u7eed)","text":""},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#31","title":"3.1 \u667a\u80fd\u8d28\u91cf\u68c0\u67e5","text":"<pre><code># GitHub Actions \u589e\u5f3a\n- name: Quality Gate\n  run: |\n    # \u4ee3\u7801\u590d\u6742\u5ea6\u68c0\u67e5\n    radon cc src/ --min=B\n\n    # \u4ee3\u7801\u91cd\u590d\u68c0\u67e5\n    duplicacy scan src/\n\n    # \u4f9d\u8d56\u5b89\u5168\u626b\u63cf\n    safety check\n</code></pre>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#32","title":"3.2 \u8d28\u91cf\u6307\u6807\u770b\u677f","text":"\u6307\u6807 \u5f53\u524d\u503c \u76ee\u6807\u503c \u72b6\u6001 \u4ee3\u7801\u8986\u76d6\u7387 55% 80% \ud83d\udd34 \u4ee3\u7801\u590d\u6742\u5ea6 B\u7ea7 A\u7ea7 \ud83d\udfe1 \u6280\u672f\u503a\u52a1 \u9ad8 \u4f4e \ud83d\udd34 \u5b89\u5168\u8bc4\u5206 C A \ud83d\udd34 CI\u901a\u8fc7\u7387 85% 95% \ud83d\udfe1"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#kpi","title":"\ud83c\udfaf \u5173\u952e\u6027\u80fd\u6307\u6807 (KPI)","text":""},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#_4","title":"\u8d28\u91cf\u76ee\u6807","text":"<ul> <li>\u6d4b\u8bd5\u8986\u76d6\u7387: 80%+ (\u6838\u5fc3\u6a21\u575795%+)</li> <li>CI\u901a\u8fc7\u7387: 95%+</li> <li>\u5b89\u5168\u6f0f\u6d1e: 0\u4e2a\u9ad8\u5371, &lt;5\u4e2a\u4e2d\u5371</li> <li>\u6784\u5efa\u65f6\u95f4: &lt;10\u5206\u949f</li> <li>\u4ee3\u7801\u91cd\u590d\u7387: &lt;5%</li> </ul>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#_5","title":"\u4ea4\u4ed8\u76ee\u6807","text":"<ul> <li>\u90e8\u7f72\u9891\u7387: \u6bcf\u65e5\u591a\u6b21\u90e8\u7f72\u80fd\u529b</li> <li>\u4fee\u590d\u65f6\u95f4: \u95ee\u9898\u53d1\u73b0\u5230\u4fee\u590d&lt;4\u5c0f\u65f6</li> <li>\u56de\u6eda\u6210\u529f\u7387: 99%+</li> </ul>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#_6","title":"\ud83d\ude80 \u5373\u65f6\u884c\u52a8\u6e05\u5355","text":""},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#ci_3","title":"\u4eca\u65e5\u5fc5\u505a (\u963b\u6b62CI\u7ea2\u706f)","text":"<ul> <li> \ud83d\udd25 \u4fee\u590d\u6240\u6709linting\u9519\u8bef</li> <li> \ud83d\udd10 \u4fee\u590d2\u4e2a\u9ad8\u5371\u5b89\u5168\u6f0f\u6d1e</li> <li> \ud83d\udcca \u63d0\u5347\u6d4b\u8bd5\u8986\u76d6\u7387\u81f365%+</li> <li> \u2705 \u8fd0\u884c\u5b8c\u6574CI\u9a8c\u8bc1: <code>./ci-verify.sh</code></li> </ul>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#_7","title":"\u672c\u5468\u8ba1\u5212","text":"<ul> <li> \ud83d\udccb \u5efa\u7acb\u4e25\u683c\u7684pre-commit\u6d41\u7a0b</li> <li> \ud83e\uddea \u5b8c\u5584\u6d4b\u8bd5\u67b6\u6784\u548c\u8986\u76d6\u7387</li> <li> \ud83d\udd0d \u4fee\u590d\u5173\u952e\u6a21\u5757\u7c7b\u578b\u6ce8\u89e3</li> <li> \ud83d\udcc8 \u5efa\u7acb\u8d28\u91cf\u76d1\u63a7\u770b\u677f</li> </ul>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#_8","title":"\u957f\u671f\u89c4\u5212","text":"<ul> <li> \ud83c\udfaf \u5efa\u7acb\u8d28\u91cf\u6587\u5316\u548c\u6700\u4f73\u5b9e\u8df5</li> <li> \ud83e\udd16 \u5b9e\u73b0\u667a\u80fd\u5316\u8d28\u91cf\u68c0\u67e5</li> <li> \ud83d\udcca \u6301\u7eed\u76d1\u63a7\u548c\u6539\u8fdb\u673a\u5236</li> </ul>"},{"location":"project/ci-risk-analysis-and-code-quality-optimization-report/#_9","title":"\ud83d\udcde \u8054\u7cfb\u4e0e\u652f\u6301","text":"<p>\u5982\u9700\u9488\u5bf9\u7279\u5b9a\u95ee\u9898\u7684\u8be6\u7ec6\u4fee\u590d\u6307\u5bfc\uff0c\u8bf7\u53c2\u8003\uff1a</p> <ul> <li>\ud83d\udcd6 \u9879\u76ee\u89c4\u5219\u6587\u6863</li> <li>\ud83d\udd27 CI\u9a8c\u8bc1\u811a\u672c</li> <li>\ud83d\udccb Makefile\u547d\u4ee4</li> </ul> <p>\u8bb0\u4f4f: \u6bcf\u6b21\u63a8\u9001\u524d\u5fc5\u987b\u8fd0\u884c <code>./ci-verify.sh</code> \u8fdb\u884c\u672c\u5730CI\u9a8c\u8bc1\uff01</p>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/","title":"\u6d4b\u8bd5\u6027\u80fd\u8bca\u65ad\u62a5\u544a","text":""},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#_2","title":"\u6267\u884c\u6458\u8981","text":"<p>\u672c\u6b21\u5bf9FootballPrediction\u9879\u76ee\u6d4b\u8bd5\u5957\u4ef6\u8fdb\u884c\u6027\u80fd\u8bca\u65ad\uff0c\u53d1\u73b0\u4e86\u4e25\u91cd\u7684\u6027\u80fd\u95ee\u9898\u3002\u6d4b\u8bd5\u6267\u884c\u6301\u7eed\u8d85\u65f6\uff08&gt;2\u5206\u949f\uff09\uff0c\u8868\u660e\u5b58\u5728\u7cfb\u7edf\u6027\u7684\u6027\u80fd\u74f6\u9888\u3002</p>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#_3","title":"\u5173\u952e\u53d1\u73b0","text":""},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#1","title":"1. \u6d4b\u8bd5\u89c4\u6a21\u8fc7\u5927","text":"<ul> <li>\u5355\u5143\u6d4b\u8bd5\u6570\u91cf: 2,019\u4e2a\u6d4b\u8bd5\u7528\u4f8b</li> <li>\u95ee\u9898: \u6d4b\u8bd5\u89c4\u6a21\u8fc7\u5927\uff0c\u8fdc\u8d85\u6b63\u5e38\u5355\u5143\u6d4b\u8bd5\u8303\u56f4</li> <li>\u5f71\u54cd: \u5373\u4f7f\u5355\u4e2aAPI\u6a21\u5757\u6d4b\u8bd5\u4e5f\u4f1a\u8d85\u65f6\uff08213\u4e2a\u6d4b\u8bd5\u7528\u4f8b\u8d85\u65f6\uff09</li> </ul>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#2","title":"2. \u67b6\u6784\u8bbe\u8ba1\u95ee\u9898","text":""},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#21","title":"2.1 \u6df7\u5408\u6d4b\u8bd5\u7c7b\u578b","text":"<p>\u5728<code>tests/unit/</code>\u76ee\u5f55\u4e2d\u53d1\u73b0\u5927\u91cf\u4f2a\u5355\u5143\u6d4b\u8bd5\uff1a</p> \u6587\u4ef6\u8def\u5f84 \u95ee\u9898\u63cf\u8ff0 <code>tests/unit/api/test_health.py</code> \u5305\u542b<code>@pytest.mark.integration</code>\u6807\u8bb0\u7684\u96c6\u6210\u6d4b\u8bd5 <code>tests/unit/cache/test_cache_manager.py</code> \u5305\u542b<code>@pytest.mark.integration</code>\u6807\u8bb0\u7684\u96c6\u6210\u6d4b\u8bd5 <code>tests/unit/services/test_data_processing.py</code> \u5305\u542b\u96c6\u6210\u6d4b\u8bd5\u6807\u8bb0 <code>tests/unit/api/test_features.py</code> \u5305\u542b\u96c6\u6210\u6d4b\u8bd5\u6807\u8bb0"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#22","title":"2.2 \u6570\u636e\u5e93\u8fde\u63a5\u6d4b\u8bd5","text":"<p>\u53d1\u73b024\u4e2a\u6587\u4ef6\u5305\u542b\u6570\u636e\u5e93\u8fde\u63a5\u76f8\u5173\u6d4b\u8bd5\uff0c\u8fd9\u4e9b\u5e94\u8be5\u662f\u96c6\u6210\u6d4b\u8bd5\u800c\u975e\u5355\u5143\u6d4b\u8bd5\uff1a</p> <pre><code>tests/unit/database/test_database_connection*.py (\u591a\u4e2a\u6587\u4ef6)\ntests/unit/api/test_predictions_core.py\ntests/unit/models/test_model_integration.py\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#3","title":"3. \u8017\u65f6\u64cd\u4f5c\u8bc6\u522b","text":""},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#31-sleep","title":"3.1 \u5f02\u6b65Sleep\u64cd\u4f5c","text":"<p>\u4ee5\u4e0b\u6d4b\u8bd5\u6587\u4ef6\u5305\u542b<code>asyncio.sleep</code>\u7b49\u8017\u65f6\u64cd\u4f5c\uff1a</p> \u6587\u4ef6 \u8017\u65f6\u64cd\u4f5c \u4f30\u8ba1\u5f71\u54cd <code>tests/unit/utils/test_retry.py</code> <code>await asyncio.sleep(0.11)</code> \u6bcf\u4e2a\u91cd\u8bd5\u6d4b\u8bd5110ms+ <code>tests/unit/cache/test_ttl_cache.py</code> <code>await asyncio.sleep(0.06)</code> TTL\u8fc7\u671f\u6d4b\u8bd560ms+ <code>tests/unit/models/test_prediction_service_caching.py</code> \u7f13\u5b58\u8fc7\u671f\u6d4b\u8bd5 \u6bcf\u4e2a\u6d4b\u8bd550ms+"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#32","title":"3.2 \u91cd\u8bd5\u673a\u5236\u6d4b\u8bd5","text":"<p><code>test_retry.py</code>\u5305\u542b\u7194\u65ad\u5668\u6d4b\u8bd5\uff0c\u5176\u4e2d\u6709\u591a\u4e2asleep\u64cd\u4f5c\uff1a</p> <ul> <li>\u6062\u590d\u8d85\u65f6\u6d4b\u8bd5: <code>await asyncio.sleep(0.11)</code></li> <li>\u534a\u5f00\u72b6\u6001\u6d4b\u8bd5: <code>await asyncio.sleep(circuit_breaker.recovery_timeout + 0.01)</code></li> </ul>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#33-ttl","title":"3.3 TTL\u7f13\u5b58\u6d4b\u8bd5","text":"<p><code>test_ttl_cache.py</code>\u5305\u542b\u5927\u91cf\u7f13\u5b58\u8fc7\u671f\u6d4b\u8bd5\uff1a</p> <ul> <li>\u8fc7\u671f\u6d4b\u8bd5: <code>await asyncio.sleep(0.06)</code></li> <li>\u7edf\u8ba1\u6d4b\u8bd5: <code>await asyncio.sleep(0.02)</code></li> </ul>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#4","title":"4. \u96c6\u6210\u6d4b\u8bd5\u6df7\u5165\u5355\u5143\u6d4b\u8bd5\u76ee\u5f55","text":"<p>\u53d1\u73b0\u5728<code>tests/unit/</code>\u4e2d\u7684\u4ee5\u4e0b\u96c6\u6210\u6d4b\u8bd5\uff1a</p> <pre><code># tests/unit/api/test_health.py\n@pytest.mark.integration\nclass TestHealthCheckIntegration:\n    async def test_full_health_check_with_real_services(self):\n        # \u8fd9\u662f\u96c6\u6210\u6d4b\u8bd5\uff0c\u4e0d\u5e94\u8be5\u5728unit\u76ee\u5f55\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#_4","title":"\u6027\u80fd\u5f71\u54cd\u5206\u6790","text":""},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#_5","title":"\u7d2f\u79ef\u5ef6\u8fdf\u8ba1\u7b97","text":"<p>\u57fa\u4e8e\u53d1\u73b0\u7684sleep\u64cd\u4f5c\uff0c\u4fdd\u5b88\u4f30\u8ba1\u6bcf\u8f6e\u6d4b\u8bd5\u7684\u7d2f\u79ef\u5ef6\u8fdf\uff1a</p> \u6d4b\u8bd5\u7c7b\u578b \u6587\u4ef6\u6570\u91cf \u5e73\u5747\u5ef6\u8fdf/\u6587\u4ef6 \u603b\u5ef6\u8fdf \u91cd\u8bd5\u673a\u5236\u6d4b\u8bd5 1 500ms 500ms TTL\u7f13\u5b58\u6d4b\u8bd5 1 200ms 200ms \u9884\u6d4b\u670d\u52a1\u7f13\u5b58\u6d4b\u8bd5 1 150ms 150ms \u6570\u636e\u5e93\u8fde\u63a5\u6d4b\u8bd5 24 100ms 2,400ms \u603b\u8ba1 27+ - 3,250ms+ <p>\u5b9e\u9645\u5f71\u54cd: \u4ec5\u6838\u5fc3\u8017\u65f6\u6d4b\u8bd5\u5c31\u9700\u89813.25\u79d2\u4ee5\u4e0a\uff0c\u52a0\u4e0a2,019\u4e2a\u6d4b\u8bd5\u7684\u521d\u59cb\u5316\u5f00\u9500\uff0c\u8d85\u65f6\u662f\u5fc5\u7136\u7ed3\u679c\u3002</p>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#_6","title":"\u4f18\u5316\u5efa\u8bae","text":""},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#1-high-priority","title":"1. \u7acb\u5373\u884c\u52a8\u9879 (High Priority)","text":""},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#11","title":"1.1 \u91cd\u65b0\u5206\u7c7b\u6d4b\u8bd5","text":"<pre><code># \u5c06\u96c6\u6210\u6d4b\u8bd5\u79fb\u51faunit\u76ee\u5f55\nmv tests/unit/api/test_health.py tests/integration/\nmv tests/unit/cache/test_cache_manager.py tests/integration/\nmv tests/unit/database/test_database_connection*.py tests/integration/\nmv tests/unit/models/test_model_integration.py tests/integration/\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#12-sleep","title":"1.2 \u4f18\u5316\u5f02\u6b65Sleep\u6d4b\u8bd5","text":"<pre><code># \u4f18\u5316\u524d\nawait asyncio.sleep(0.11)  # 110ms\u5ef6\u8fdf\n\n# \u4f18\u5316\u540e - \u4f7f\u7528\u66f4\u77ed\u7684\u5ef6\u8fdf\u6216mock\u65f6\u95f4\nawait asyncio.sleep(0.01)  # 10ms\u5ef6\u8fdf\n# \u6216\u8005\u4f7f\u7528freezegun\u5e93mock\u65f6\u95f4\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#13-mock","title":"1.3 Mock\u5316\u5916\u90e8\u4f9d\u8d56","text":"<pre><code># \u91cd\u8bd5\u6d4b\u8bd5\u4f18\u5316\u793a\u4f8b\n@patch('time.sleep')  # Mock sleep\u64cd\u4f5c\n@patch('asyncio.sleep')  # Mock\u5f02\u6b65sleep\nasync def test_circuit_breaker_recovery_optimized(mock_async_sleep, mock_sleep):\n    # \u6d4b\u8bd5\u903b\u8f91\u4e0d\u53d8\uff0c\u4f46\u4e0d\u5b9e\u9645\u7b49\u5f85\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#2-medium-priority","title":"2. \u4e2d\u671f\u4f18\u5316 (Medium Priority)","text":""},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#21_1","title":"2.1 \u62c6\u5206\u5927\u578b\u6d4b\u8bd5\u6587\u4ef6","text":"<pre><code>\u5f53\u524d: tests/unit/api/ (213\u4e2a\u6d4b\u8bd5)\n\u5efa\u8bae:\n\u251c\u2500\u2500 tests/unit/api/basic/\n\u251c\u2500\u2500 tests/unit/api/models/\n\u251c\u2500\u2500 tests/unit/api/health/\n\u2514\u2500\u2500 tests/unit/api/features/\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#22_1","title":"2.2 \u5f15\u5165\u6d4b\u8bd5\u6807\u8bb0\u7b56\u7565","text":"<pre><code># pytest.ini \u914d\u7f6e\nmarkers =\n    unit: \u7eaf\u5355\u5143\u6d4b\u8bd5 (\u65e0\u5916\u90e8\u4f9d\u8d56)\n    integration: \u96c6\u6210\u6d4b\u8bd5 (\u6709\u5916\u90e8\u4f9d\u8d56)\n    slow: \u6162\u6d4b\u8bd5 (&gt;100ms)\n\n# \u8fd0\u884c\u7b56\u7565\npytest tests/unit/  # \u5feb\u901f\u5355\u5143\u6d4b\u8bd5\npytest tests/ -m \"integration\"             # \u96c6\u6210\u6d4b\u8bd5\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#3-low-priority","title":"3. \u957f\u671f\u67b6\u6784\u6539\u8fdb (Low Priority)","text":""},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#31","title":"3.1 \u6d4b\u8bd5\u6027\u80fd\u76d1\u63a7","text":"<pre><code># \u6dfb\u52a0\u6d4b\u8bd5\u6267\u884c\u65f6\u95f4\u76d1\u63a7\n# conftest.py\n@pytest.fixture(autouse=True)\ndef monitor_test_duration(request):\n    start = time.time()\n    yield\n    duration = time.time() - start\n    if duration &gt; 0.1:  # \u8d85\u8fc7100ms\u7684\u6d4b\u8bd5\n        print(f\"Slow test: {request.node.nodeid} took {duration:.3f}s\")\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#32_1","title":"3.2 \u5e76\u884c\u6d4b\u8bd5\u6267\u884c","text":"<pre><code># \u4f7f\u7528pytest-xdist\u5e76\u884c\u6267\u884c\npip install pytest-xdist\npytest tests/unit/ -n auto  # \u81ea\u52a8\u68c0\u6d4bCPU\u6838\u5fc3\u6570\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#_7","title":"\u5efa\u8bae\u7684\u6d4b\u8bd5\u8fd0\u884c\u7b56\u7565","text":""},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#_8","title":"\u5f00\u53d1\u9636\u6bb5","text":"<pre><code># \u5feb\u901f\u53cd\u9988 - \u4ec5\u8fd0\u884c\u771f\u6b63\u7684\u5355\u5143\u6d4b\u8bd5\nmake test-quick  # \u6216 pytest tests/unit/ --maxfail=5\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#cicd","title":"CI/CD\u9636\u6bb5","text":"<pre><code># \u5b8c\u6574\u6d4b\u8bd5\u5957\u4ef6\npytest tests/unit/ -m \"unit\"           # \u5355\u5143\u6d4b\u8bd5\npytest tests/integration/ -m \"integration\"  # \u96c6\u6210\u6d4b\u8bd5\npytest tests/e2e/                     # \u7aef\u5230\u7aef\u6d4b\u8bd5\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#_9","title":"\u6027\u80fd\u9a8c\u8bc1","text":"<pre><code># \u76d1\u63a7\u6d4b\u8bd5\u6027\u80fd\npytest tests/unit/ --durations=10 --tb=no -q\n</code></pre>"},{"location":"project/%E6%B5%8B%E8%AF%95%E6%80%A7%E8%83%BD%E8%AF%8A%E6%96%AD%E6%8A%A5%E5%91%8A/#_10","title":"\u9884\u671f\u6548\u679c","text":"<p>\u5b9e\u65bd\u4e0a\u8ff0\u4f18\u5316\u540e\uff0c\u9884\u671f\u6d4b\u8bd5\u6027\u80fd\u63d0\u5347\uff1a</p> \u4f18\u5316\u9879 \u65f6\u95f4\u8282\u7701 \u6267\u884c\u6548\u679c \u79fb\u9664\u96c6\u6210\u6d4b\u8bd5 -2,400ms \u5355\u5143\u6d4b\u8bd5&lt;30\u79d2 \u4f18\u5316sleep\u64cd\u4f5c -850ms \u91cd\u8bd5/\u7f13\u5b58\u6d4b\u8bd5&lt;5\u79d2 \u5f15\u5165\u5e76\u884c\u6267\u884c -60% \u603b\u4f53\u6267\u884c\u65f6\u95f4\u51cf\u5c1160% <p>\u6700\u7ec8\u76ee\u6807: \u5355\u5143\u6d4b\u8bd5\u6267\u884c\u65f6\u95f4\u63a7\u5236\u572830\u79d2\u4ee5\u5185\uff0c\u7b26\u5408\u5feb\u901f\u53cd\u9988\u7684\u5f00\u53d1\u9700\u6c42\u3002</p>"},{"location":"reference/API_EXAMPLES/","title":"API \u4f7f\u7528\u793a\u4f8b","text":"<p>\u672c\u6587\u6863\u63d0\u4f9b\u4e86\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf API \u7684\u8be6\u7ec6\u4f7f\u7528\u793a\u4f8b\u3002</p>"},{"location":"reference/API_EXAMPLES/#_1","title":"\u76ee\u5f55","text":"<ol> <li>\u8ba4\u8bc1</li> <li>\u9884\u6d4b\u63a5\u53e3</li> <li>\u6570\u636e\u67e5\u8be2</li> <li>\u6279\u91cf\u64cd\u4f5c</li> <li>\u5b9e\u65f6\u6d41</li> <li>\u9519\u8bef\u5904\u7406</li> </ol>"},{"location":"reference/API_EXAMPLES/#_2","title":"\u8ba4\u8bc1","text":"<p>\u6240\u6709 API \u8bf7\u6c42\u90fd\u9700\u8981\u5728\u8bf7\u6c42\u5934\u4e2d\u5305\u542b\u8ba4\u8bc1\u4ee4\u724c\uff1a</p> <pre><code># \u83b7\u53d6\u8bbf\u95ee\u4ee4\u724c\ncurl -X POST \"https://api.football-prediction.com/auth/token\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"your_username\",\n    \"password\": \"your_password\"\n  }'\n\n# \u54cd\u5e94\u793a\u4f8b\n{\n  \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"token_type\": \"bearer\",\n  \"expires_in\": 3600\n}\n</code></pre> <p>\u4f7f\u7528\u4ee4\u724c\u8bbf\u95ee API\uff1a</p> <pre><code>curl -X GET \"https://api.football-prediction.com/api/v1/predictions/12345\" \\\n  -H \"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n</code></pre>"},{"location":"reference/API_EXAMPLES/#_3","title":"\u9884\u6d4b\u63a5\u53e3","text":""},{"location":"reference/API_EXAMPLES/#1","title":"1. \u9884\u6d4b\u5355\u573a\u6bd4\u8d5b","text":"<pre><code>curl -X POST \"https://api.football-prediction.com/api/v1/predictions/predict\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"match_id\": 12345,\n    \"force_refresh\": false,\n    \"include_features\": true\n  }'\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b\uff1a</p> <pre><code>{\n  \"match_id\": 12345,\n  \"prediction\": \"home\",\n  \"probabilities\": {\n    \"home_win\": 0.52,\n    \"draw\": 0.28,\n    \"away_win\": 0.20\n  },\n  \"confidence\": 0.68,\n  \"model_version\": \"1.2.0\",\n  \"model_name\": \"football_baseline_model\",\n  \"prediction_time\": \"2024-01-01T14:30:00Z\",\n  \"match_info\": {\n    \"id\": 12345,\n    \"home_team\": \"Manchester United\",\n    \"away_team\": \"Liverpool\",\n    \"league\": \"Premier League\",\n    \"match_time\": \"2024-01-01T15:00:00Z\",\n    \"venue\": \"Old Trafford\"\n  },\n  \"features\": {\n    \"home_recent_wins\": 3,\n    \"away_recent_wins\": 2,\n    \"h2h_home_advantage\": 0.55,\n    \"home_implied_probability\": 0.45\n  },\n  \"odds\": {\n    \"home_win\": 2.1,\n    \"draw\": 3.4,\n    \"away_win\": 3.6,\n    \"bookmaker\": \"Bet365\"\n  }\n}\n</code></pre>"},{"location":"reference/API_EXAMPLES/#2","title":"2. \u6279\u91cf\u9884\u6d4b","text":"<pre><code>curl -X POST \"https://api.football-prediction.com/api/v1/predictions/predict/batch\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"match_ids\": [12345, 12346, 12347, 12348],\n    \"force_refresh\": false,\n    \"include_features\": false\n  }'\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b\uff1a</p> <pre><code>{\n  \"total\": 4,\n  \"successful\": 4,\n  \"failed\": 0,\n  \"results\": [\n    {\n      \"match_id\": 12345,\n      \"prediction\": \"home\",\n      \"probabilities\": {\"home_win\": 0.52, \"draw\": 0.28, \"away_win\": 0.20},\n      \"confidence\": 0.68\n    },\n    {\n      \"match_id\": 12346,\n      \"prediction\": \"draw\",\n      \"probabilities\": {\"home_win\": 0.35, \"draw\": 0.40, \"away_win\": 0.25},\n      \"confidence\": 0.72\n    },\n    {\n      \"match_id\": 12347,\n      \"prediction\": \"away\",\n      \"probabilities\": {\"home_win\": 0.30, \"draw\": 0.30, \"away_win\": 0.40},\n      \"confidence\": 0.65\n    },\n    {\n      \"match_id\": 12348,\n      \"prediction\": \"home\",\n      \"probabilities\": {\"home_win\": 0.48, \"draw\": 0.32, \"away_win\": 0.20},\n      \"confidence\": 0.60\n    }\n  ]\n}\n</code></pre>"},{"location":"reference/API_EXAMPLES/#3","title":"3. \u9884\u6d4b\u5373\u5c06\u5f00\u59cb\u7684\u6bd4\u8d5b","text":"<pre><code>curl -X POST \"https://api.football-prediction.com/api/v1/predictions/predict/upcoming\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"hours_ahead\": 24,\n    \"league_ids\": [39, 140],  # Premier League, La Liga\n    \"force_refresh\": false\n  }'\n</code></pre>"},{"location":"reference/API_EXAMPLES/#4","title":"4. \u83b7\u53d6\u6bd4\u8d5b\u9884\u6d4b","text":"<pre><code>curl -X GET \"https://api.football-prediction.com/api/v1/predictions/match/12345?include_features=true\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n</code></pre>"},{"location":"reference/API_EXAMPLES/#5","title":"5. \u9a8c\u8bc1\u9884\u6d4b\u7ed3\u679c","text":"<pre><code>curl -X POST \"https://api.football-prediction.com/api/v1/predictions/verify/12345\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n</code></pre>"},{"location":"reference/API_EXAMPLES/#_4","title":"\u6570\u636e\u67e5\u8be2","text":""},{"location":"reference/API_EXAMPLES/#1_1","title":"1. \u83b7\u53d6\u6bd4\u8d5b\u5217\u8868","text":"<pre><code># \u83b7\u53d6\u6240\u6709\u6bd4\u8d5b\ncurl -X GET \"https://api.football-prediction.com/api/v1/data/matches?limit=10\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n\n# \u6309\u8054\u8d5b\u7b5b\u9009\ncurl -X GET \"https://api.football-prediction.com/api/v1/data/matches?league_id=39\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n\n# \u6309\u72b6\u6001\u7b5b\u9009\ncurl -X GET \"https://api.football-prediction.com/api/v1/data/matches?status=SCHEDULED\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n\n# \u6309\u65e5\u671f\u8303\u56f4\u7b5b\u9009\ncurl -X GET \"https://api.football-prediction.com/api/v1/data/matches?start_date=2024-01-01T00:00:00Z&amp;end_date=2024-01-02T00:00:00Z\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n</code></pre>"},{"location":"reference/API_EXAMPLES/#2_1","title":"2. \u83b7\u53d6\u7403\u961f\u4fe1\u606f","text":"<pre><code># \u83b7\u53d6\u6240\u6709\u7403\u961f\ncurl -X GET \"https://api.football-prediction.com/api/v1/data/teams\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n\n# \u641c\u7d22\u7403\u961f\ncurl -X GET \"https://api.football-prediction.com/api/v1/data/teams?search=United\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n\n# \u83b7\u53d6\u7279\u5b9a\u7403\u961f\ncurl -X GET \"https://api.football-prediction.com/api/v1/data/teams/100\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n</code></pre>"},{"location":"reference/API_EXAMPLES/#3_1","title":"3. \u83b7\u53d6\u8054\u8d5b\u4fe1\u606f","text":"<pre><code># \u83b7\u53d6\u6240\u6709\u8054\u8d5b\ncurl -X GET \"https://api.football-prediction.com/api/v1/data/leagues\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n\n# \u6309\u56fd\u5bb6\u7b5b\u9009\ncurl -X GET \"https://api.football-prediction.com/api/v1/data/leagues?country=England\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n</code></pre>"},{"location":"reference/API_EXAMPLES/#4_1","title":"4. \u83b7\u53d6\u6bd4\u8d5b\u8d54\u7387","text":"<pre><code>curl -X GET \"https://api.football-prediction.com/api/v1/data/matches/12345/odds?bookmaker=Bet365\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n</code></pre>"},{"location":"reference/API_EXAMPLES/#5_1","title":"5. \u83b7\u53d6\u6570\u636e\u7edf\u8ba1","text":"<pre><code>curl -X GET \"https://api.football-prediction.com/api/v1/data/statistics/overview\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n</code></pre>"},{"location":"reference/API_EXAMPLES/#6","title":"6. \u641c\u7d22\u6570\u636e","text":"<pre><code>curl -X GET \"https://api.football-prediction.com/api/v1/data/search?q=Manchester&amp;type=teams\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\"\n</code></pre>"},{"location":"reference/API_EXAMPLES/#_5","title":"\u6279\u91cf\u64cd\u4f5c","text":""},{"location":"reference/API_EXAMPLES/#_6","title":"\u6279\u91cf\u9884\u6d4b\u6700\u4f73\u5b9e\u8df5","text":"<pre><code>import asyncio\nimport aiohttp\n\nasync def batch_predict(match_ids, token):\n    \"\"\"\u6279\u91cf\u9884\u6d4b\u793a\u4f8b\"\"\"\n    url = \"https://api.football-prediction.com/api/v1/predictions/predict/batch\"\n    headers = {\n        \"Authorization\": f\"Bearer {token}\",\n        \"Content-Type\": \"application/json\"\n    }\n\n    # \u5206\u6279\u5904\u7406\uff08\u6bcf\u6b21\u6700\u591a100\u573a\uff09\n    batch_size = 100\n    results = []\n\n    for i in range(0, len(match_ids), batch_size):\n        batch = match_ids[i:i + batch_size]\n        payload = {\n            \"match_ids\": batch,\n            \"force_refresh\": False,\n            \"include_features\": False\n        }\n\n        async with aiohttp.ClientSession() as session:\n            async with session.post(url, json=payload, headers=headers) as response:\n                if response.status == 200:\n                    data = await response.json()\n                    results.extend(data[\"results\"])\n                else:\n                    print(f\"Batch {i//batch_size + 1} failed: {response.status}\")\n\n    return results\n\n# \u4f7f\u7528\u793a\u4f8b\nmatch_ids = list(range(10000, 10500))\nresults = asyncio.run(batch_predict(match_ids, \"YOUR_TOKEN\"))\nprint(f\"\u9884\u6d4b\u5b8c\u6210: {len(results)} \u573a\u6bd4\u8d5b\")\n</code></pre>"},{"location":"reference/API_EXAMPLES/#_7","title":"\u5b9e\u65f6\u6d41","text":""},{"location":"reference/API_EXAMPLES/#server-sent-events-sse","title":"Server-Sent Events (SSE)","text":"<pre><code>// JavaScript \u793a\u4f8b\uff1a\u8ba2\u9605\u6bd4\u8d5b\u9884\u6d4b\u66f4\u65b0\nconst eventSource = new EventSource(\n  'https://api.football-prediction.com/api/v1/predictions/stream/matches/12345',\n  {\n    headers: {\n      'Authorization': 'Bearer YOUR_TOKEN'\n    }\n  }\n);\n\neventSource.onmessage = function(event) {\n  const prediction = JSON.parse(event.data);\n  console.log('\u65b0\u9884\u6d4b:', prediction);\n\n  // \u66f4\u65b0UI\n  updatePredictionUI(prediction);\n};\n\neventSource.onerror = function(event) {\n  console.error('\u6d41\u8fde\u63a5\u9519\u8bef:', event);\n};\n\neventSource.onopen = function(event) {\n  console.log('\u6d41\u8fde\u63a5\u5df2\u5efa\u7acb');\n};\n</code></pre> <pre><code># Python \u793a\u4f8b\uff1a\u4f7f\u7528 SSE\u5ba2\u6237\u7aef\nimport sseclient\nimport requests\n\ndef subscribe_to_match(match_id, token):\n    \"\"\"\u8ba2\u9605\u6bd4\u8d5b\u9884\u6d4b\u6d41\"\"\"\n    url = f\"https://api.football-prediction.com/api/v1/predictions/stream/matches/{match_id}\"\n    headers = {\"Authorization\": f\"Bearer {token}\"}\n\n    response = requests.get(url, headers=headers, stream=True)\n    client = sseclient.SSEClient(response)\n\n    for event in client.events():\n        if event.event == 'message':\n            prediction = json.loads(event.data)\n            print(f\"\u6536\u5230\u9884\u6d4b\u66f4\u65b0: {prediction}\")\n        elif event.event == 'error':\n            print(f\"\u9519\u8bef: {event.data}\")\n\n# \u4f7f\u7528\u793a\u4f8b\nsubscribe_to_match(12345, \"YOUR_TOKEN\")\n</code></pre>"},{"location":"reference/API_EXAMPLES/#_8","title":"\u9519\u8bef\u5904\u7406","text":""},{"location":"reference/API_EXAMPLES/#_9","title":"\u9519\u8bef\u54cd\u5e94\u683c\u5f0f","text":"<p>\u6240\u6709\u9519\u8bef\u90fd\u9075\u5faa\u7edf\u4e00\u7684\u54cd\u5e94\u683c\u5f0f\uff1a</p> <pre><code>{\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"\u8bf7\u6c42\u53c2\u6570\u9a8c\u8bc1\u5931\u8d25\",\n    \"type\": \"validation_error\",\n    \"details\": [\n      {\n        \"loc\": [\"body\", \"match_id\"],\n        \"msg\": \"field required\",\n        \"type\": \"value_error.missing\"\n      }\n    ],\n    \"timestamp\": \"2024-01-01T14:30:00Z\"\n  }\n}\n</code></pre>"},{"location":"reference/API_EXAMPLES/#_10","title":"\u5e38\u89c1\u9519\u8bef\u4ee3\u7801","text":"\u9519\u8bef\u4ee3\u7801 HTTP\u72b6\u6001\u7801 \u63cf\u8ff0 VALIDATION_ERROR 400 \u8bf7\u6c42\u53c2\u6570\u9a8c\u8bc1\u5931\u8d25 UNAUTHORIZED 401 \u672a\u6388\u6743\u6216\u4ee4\u724c\u65e0\u6548 FORBIDDEN 403 \u6743\u9650\u4e0d\u8db3 NOT_FOUND 404 \u8d44\u6e90\u4e0d\u5b58\u5728 MATCH_NOT_FOUND 404 \u6bd4\u8d5b\u4e0d\u5b58\u5728 PREDICTION_FAILED 500 \u9884\u6d4b\u5931\u8d25 RATE_LIMIT_EXCEEDED 429 \u8bf7\u6c42\u9891\u7387\u8d85\u9650"},{"location":"reference/API_EXAMPLES/#_11","title":"\u9519\u8bef\u5904\u7406\u793a\u4f8b","text":"<pre><code>import requests\nfrom requests.exceptions import RequestException\n\ndef safe_predict_match(match_id, token):\n    \"\"\"\u5b89\u5168\u7684\u9884\u6d4b\u8bf7\u6c42\u793a\u4f8b\"\"\"\n    url = f\"https://api.football-prediction.com/api/v1/predictions/predict\"\n    headers = {\"Authorization\": f\"Bearer {token}\"}\n    payload = {\"match_id\": match_id}\n\n    try:\n        response = requests.post(url, json=payload, headers=headers)\n        response.raise_for_status()\n        return response.json()\n    except requests.exceptions.HTTPError as e:\n        if e.response.status_code == 404:\n            print(f\"\u6bd4\u8d5b {match_id} \u4e0d\u5b58\u5728\")\n        elif e.response.status_code == 401:\n            print(\"\u8ba4\u8bc1\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u4ee4\u724c\")\n        else:\n            error_data = e.response.json()\n            print(f\"\u9884\u6d4b\u5931\u8d25: {error_data['error']['message']}\")\n        return None\n    except RequestException as e:\n        print(f\"\u7f51\u7edc\u9519\u8bef: {e}\")\n        return None\n\n# \u4f7f\u7528\u793a\u4f8b\nresult = safe_predict_match(12345, \"YOUR_TOKEN\")\nif result:\n    print(f\"\u9884\u6d4b\u7ed3\u679c: {result['prediction']}\")\n</code></pre>"},{"location":"reference/API_EXAMPLES/#python-sdk","title":"Python SDK \u793a\u4f8b","text":"<pre><code>from football_prediction_client import FootballPredictionClient\n\n# \u521d\u59cb\u5316\u5ba2\u6237\u7aef\nclient = FootballPredictionClient(\n    base_url=\"https://api.football-prediction.com\",\n    api_key=\"YOUR_TOKEN\"\n)\n\n# \u9884\u6d4b\u5355\u573a\u6bd4\u8d5b\nprediction = client.predict_match(\n    match_id=12345,\n    include_features=True\n)\nprint(f\"\u9884\u6d4b: {prediction.prediction} (\u7f6e\u4fe1\u5ea6: {prediction.confidence})\")\n\n# \u6279\u91cf\u9884\u6d4b\npredictions = client.batch_predict(\n    match_ids=[12345, 12346, 12347],\n    force_refresh=False\n)\n\n# \u83b7\u53d6\u5373\u5c06\u5f00\u59cb\u7684\u6bd4\u8d5b\nupcoming = client.predict_upcoming_matches(\n    hours_ahead=24,\n    league_ids=[39]\n)\n\n# \u8ba2\u9605\u5b9e\u65f6\u66f4\u65b0\ndef on_prediction_update(prediction):\n    print(f\"\u9884\u6d4b\u66f4\u65b0: {prediction}\")\n\nclient.subscribe_match_updates(\n    match_id=12345,\n    callback=on_prediction_update\n)\n</code></pre>"},{"location":"reference/API_EXAMPLES/#sdk","title":"SDK \u5b89\u88c5","text":"<pre><code>pip install football-prediction-client\n</code></pre> <p>\u6216\u4f7f\u7528 Poetry\uff1a</p> <pre><code>poetry add football-prediction-client\n</code></pre>"},{"location":"reference/API_EXAMPLES/#_12","title":"\u66f4\u591a\u793a\u4f8b","text":"<p>\u66f4\u591a\u793a\u4f8b\u548c\u9ad8\u7ea7\u7528\u6cd5\u8bf7\u53c2\u8003\uff1a</p> <ul> <li>Python SDK \u6587\u6863</li> <li>JavaScript SDK \u6587\u6863</li> <li>\u6700\u4f73\u5b9e\u8df5\u6307\u5357</li> <li>\u6027\u80fd\u4f18\u5316\u5efa\u8bae</li> </ul>"},{"location":"reference/API_REFERENCE/","title":"\ud83d\udcda FootballPrediction API \u53c2\u8003\u6587\u6863","text":""},{"location":"reference/API_REFERENCE/#_1","title":"\ud83c\udfaf \u6982\u89c8","text":"<p>\u672c\u6587\u6863\u63d0\u4f9b FootballPrediction \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u5404\u6a21\u5757\u7684\u8be6\u7ec6API\u53c2\u8003\u4fe1\u606f\u3002</p>"},{"location":"reference/API_REFERENCE/#api-srcapi","title":"\ud83d\udce6 API \u7aef\u70b9 (src.api)","text":""},{"location":"reference/API_REFERENCE/#api","title":"\u5065\u5eb7\u68c0\u67e5 API","text":"<p>\u7cfb\u7edf\u5065\u5eb7\u72b6\u6001\u68c0\u67e5\u7aef\u70b9\uff0c\u7528\u4e8e\u76d1\u63a7API\u3001\u6570\u636e\u5e93\u3001\u7f13\u5b58\u7b49\u670d\u52a1\u72b6\u6001\u3002</p> <pre><code>from src.api.health import router as health_router\n\n# \u5065\u5eb7\u68c0\u67e5\u7aef\u70b9\nGET /health\n</code></pre> <p>\u54cd\u5e94\u683c\u5f0f:</p> <pre><code>{\n  \"status\": \"healthy\",\n  \"timestamp\": \"2025-09-10T02:42:16.535410\",\n  \"service\": \"football-prediction-api\",\n  \"version\": \"1.0.0\",\n  \"checks\": {\n    \"database\": {\n      \"status\": \"healthy\",\n      \"response_time\": 0.025\n    },\n    \"redis\": {\n      \"status\": \"healthy\",\n      \"response_time\": 0.008\n    }\n  }\n}\n</code></pre>"},{"location":"reference/API_REFERENCE/#api_1","title":"\u76d1\u63a7 API","text":"<p>\u7cfb\u7edf\u6027\u80fd\u6307\u6807\u548c\u4e1a\u52a1\u76d1\u63a7\u7aef\u70b9\u3002</p> <pre><code>from src.api.monitoring import router as monitoring_router\n\n# \u6027\u80fd\u6307\u6807\u7aef\u70b9\nGET /metrics\n</code></pre> <p>\u54cd\u5e94\u683c\u5f0f:</p> <pre><code>{\n  \"timestamp\": \"2025-09-10T02:42:16.535410\",\n  \"system_metrics\": {\n    \"cpu_percent\": 15.2,\n    \"memory\": {\n      \"total\": 16777216000,\n      \"available\": 12884901888,\n      \"percent\": 23.2,\n      \"used\": 3892314112\n    }\n  },\n  \"database_metrics\": {\n    \"total_tables\": 6,\n    \"total_connections\": 5,\n    \"uptime\": \"7 days\"\n  },\n  \"business_metrics\": {\n    \"total_matches\": 0,\n    \"total_predictions\": 0,\n    \"active_leagues\": 0\n  }\n}\n</code></pre>"},{"location":"reference/API_REFERENCE/#srcdatabasemodels","title":"\ud83d\udce6 \u6570\u636e\u6a21\u578b (src.database.models)","text":""},{"location":"reference/API_REFERENCE/#league","title":"\u8054\u8d5b\u6a21\u578b (League)","text":"<pre><code>from src.database.models.league import League\n\n# \u8054\u8d5b\u5b9e\u4f53\nclass League:\n    id: int\n    name: str\n    country: str\n    season: str\n    logo: Optional[str]\n</code></pre>"},{"location":"reference/API_REFERENCE/#team","title":"\u7403\u961f\u6a21\u578b (Team)","text":"<pre><code>from src.database.models.team import Team\n\n# \u7403\u961f\u5b9e\u4f53\nclass Team:\n    id: int\n    name: str\n    country: str\n    founded: Optional[int]\n    logo: Optional[str]\n</code></pre>"},{"location":"reference/API_REFERENCE/#match","title":"\u6bd4\u8d5b\u6a21\u578b (Match)","text":"<pre><code>from src.database.models.match import Match\n\n# \u6bd4\u8d5b\u5b9e\u4f53\nclass Match:\n    id: int\n    home_team_id: int\n    away_team_id: int\n    league_id: int\n    match_date: datetime\n    status: str\n    home_score: Optional[int]\n    away_score: Optional[int]\n</code></pre>"},{"location":"reference/API_REFERENCE/#prediction","title":"\u9884\u6d4b\u6a21\u578b (Prediction)","text":"<pre><code>from src.database.models.predictions import Prediction\n\n# \u9884\u6d4b\u5b9e\u4f53\nclass Prediction:\n    id: int\n    match_id: int\n    model_name: str\n    home_win_prob: float\n    draw_prob: float\n    away_win_prob: float\n    predicted_score: Optional[str]\n    confidence: float\n</code></pre>"},{"location":"reference/API_REFERENCE/#odds","title":"\u8d54\u7387\u6a21\u578b (Odds)","text":"<pre><code>from src.database.models.odds import Odds\n\n# \u8d54\u7387\u5b9e\u4f53\nclass Odds:\n    id: int\n    match_id: int\n    bookmaker: str\n    home_odds: float\n    draw_odds: float\n    away_odds: float\n    last_updated: datetime\n</code></pre>"},{"location":"reference/API_REFERENCE/#features","title":"\u7279\u5f81\u6a21\u578b (Features)","text":"<pre><code>from src.database.models.features import Features\n\n# \u7279\u5f81\u5b9e\u4f53\nclass Features:\n    id: int\n    match_id: int\n    home_team_features: dict\n    away_team_features: dict\n    historical_features: dict\n    created_at: datetime\n</code></pre>"},{"location":"reference/API_REFERENCE/#srcutils","title":"\ud83d\udd27 \u5de5\u5177\u51fd\u6570 (src.utils)","text":""},{"location":"reference/API_REFERENCE/#_2","title":"\u5b57\u7b26\u4e32\u5de5\u5177","text":"<pre><code>from src.utils.string_utils import clean_text, normalize_name\n\n# \u6587\u672c\u6e05\u7406\nclean_text(\"  Real Madrid  \") -&gt; \"Real Madrid\"\n\n# \u540d\u79f0\u6807\u51c6\u5316\nnormalize_name(\"Real Madrid CF\") -&gt; \"real_madrid_cf\"\n</code></pre>"},{"location":"reference/API_REFERENCE/#_3","title":"\u65f6\u95f4\u5de5\u5177","text":"<pre><code>from src.utils.time_utils import format_datetime, parse_match_time\n\n# \u65e5\u671f\u65f6\u95f4\u683c\u5f0f\u5316\nformat_datetime(datetime.now()) -&gt; \"2025-09-10 02:42:16\"\n\n# \u6bd4\u8d5b\u65f6\u95f4\u89e3\u6790\nparse_match_time(\"2025-09-10 15:30\") -&gt; datetime(2025, 9, 10, 15, 30)\n</code></pre>"},{"location":"reference/API_REFERENCE/#_4","title":"\u6570\u636e\u9a8c\u8bc1\u5de5\u5177","text":"<pre><code>from src.utils.data_validator import validate_match_data, validate_odds\n\n# \u6bd4\u8d5b\u6570\u636e\u9a8c\u8bc1\nvalidate_match_data(match_dict) -&gt; ValidationResult\n\n# \u8d54\u7387\u6570\u636e\u9a8c\u8bc1\nvalidate_odds(odds_dict) -&gt; ValidationResult\n</code></pre>"},{"location":"reference/API_REFERENCE/#_5","title":"\u52a0\u5bc6\u5de5\u5177","text":"<pre><code>from src.utils.crypto_utils import hash_password, verify_password\n\n# \u5bc6\u7801\u54c8\u5e0c\nhash_password(\"password123\") -&gt; \"hashed_string\"\n\n# \u5bc6\u7801\u9a8c\u8bc1\nverify_password(\"password123\", \"hashed_string\") -&gt; True\n</code></pre>"},{"location":"reference/API_REFERENCE/#_6","title":"\u6587\u4ef6\u5de5\u5177","text":"<pre><code>from src.utils.file_utils import read_json, write_json, ensure_dir\n\n# JSON\u6587\u4ef6\u64cd\u4f5c\ndata = read_json(\"config.json\")\nwrite_json(\"output.json\", data)\n\n# \u76ee\u5f55\u521b\u5efa\nensure_dir(\"logs/2025/09\")\n</code></pre>"},{"location":"reference/API_REFERENCE/#_7","title":"\u5b57\u5178\u5de5\u5177","text":"<pre><code>from src.utils.dict_utils import deep_merge, safe_get\n\n# \u6df1\u5ea6\u5408\u5e76\u5b57\u5178\nmerged = deep_merge(dict1, dict2)\n\n# \u5b89\u5168\u83b7\u53d6\u5d4c\u5957\u503c\nvalue = safe_get(data, \"team.stats.goals\", default=0)\n</code></pre>"},{"location":"reference/API_REFERENCE/#srcapischemas","title":"\ud83d\udcca \u54cd\u5e94\u6a21\u5f0f (src.api.schemas)","text":""},{"location":"reference/API_REFERENCE/#healthcheckresponse","title":"HealthCheckResponse","text":"<p>\u5065\u5eb7\u68c0\u67e5\u54cd\u5e94\u6a21\u5f0f</p> <pre><code>class HealthCheckResponse:\n    status: str\n    timestamp: str\n    service: str\n    version: str\n    checks: dict\n</code></pre>"},{"location":"reference/API_REFERENCE/#metricsresponse","title":"MetricsResponse","text":"<p>\u76d1\u63a7\u6307\u6807\u54cd\u5e94\u6a21\u5f0f</p> <pre><code>class MetricsResponse:\n    timestamp: str\n    system_metrics: dict\n    database_metrics: dict\n    business_metrics: dict\n</code></pre>"},{"location":"reference/API_REFERENCE/#srcdatabase","title":"\ud83d\udd17 \u6570\u636e\u5e93\u8fde\u63a5 (src.database)","text":""},{"location":"reference/API_REFERENCE/#_8","title":"\u6570\u636e\u5e93\u914d\u7f6e","text":"<pre><code>from src.database.config import DATABASE_URL, get_database_url\n\n# \u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32\nurl = get_database_url()\n</code></pre>"},{"location":"reference/API_REFERENCE/#_9","title":"\u6570\u636e\u5e93\u4f1a\u8bdd","text":"<pre><code>from src.database.connection import get_db_session\n\n# \u83b7\u53d6\u6570\u636e\u5e93\u4f1a\u8bdd\nasync def my_function(db: Session = Depends(get_db_session)):\n    # \u4f7f\u7528\u6570\u636e\u5e93\u4f1a\u8bdd\n    pass\n</code></pre>"},{"location":"reference/API_REFERENCE/#_10","title":"\ud83d\ude80 \u4f7f\u7528\u793a\u4f8b","text":""},{"location":"reference/API_REFERENCE/#_11","title":"\u542f\u52a8\u5e94\u7528","text":"<pre><code>from src.main import app\nimport uvicorn\n\n# \u542f\u52a8FastAPI\u5e94\u7528\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre>"},{"location":"reference/API_REFERENCE/#api_2","title":"API\u8c03\u7528\u793a\u4f8b","text":"<pre><code># \u5065\u5eb7\u68c0\u67e5\ncurl http://localhost:8000/health\n\n# \u83b7\u53d6\u76d1\u63a7\u6307\u6807\ncurl http://localhost:8000/metrics\n</code></pre>"},{"location":"reference/API_REFERENCE/#_12","title":"\ud83d\udccb \u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u8ba4\u8bc1: \u5f53\u524dAPI\u7aef\u70b9\u6682\u4e0d\u9700\u8981\u8ba4\u8bc1\uff0c\u672a\u6765\u7248\u672c\u5c06\u6dfb\u52a0JWT\u8ba4\u8bc1</li> <li>\u9650\u6d41: \u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u914d\u7f6eAPI\u9650\u6d41</li> <li>\u7f13\u5b58: \u76d1\u63a7\u6307\u6807\u5df2\u5b9e\u73b0Redis\u7f13\u5b58\uff0c\u7f13\u5b58\u65f6\u95f4\u4e3a60\u79d2</li> <li>\u9519\u8bef\u5904\u7406: \u6240\u6709API\u7aef\u70b9\u90fd\u5305\u542b\u5b8c\u6574\u7684\u9519\u8bef\u5904\u7406\u548c\u65e5\u5fd7\u8bb0\u5f55</li> <li>\u7c7b\u578b\u5b89\u5168: \u6240\u6709\u63a5\u53e3\u90fd\u6709\u5b8c\u6574\u7684\u7c7b\u578b\u6ce8\u89e3\u548cPydantic\u6a21\u5f0f\u9a8c\u8bc1</li> </ol>"},{"location":"reference/API_REFERENCE/#_13","title":"\ud83d\udd27 \u5f00\u53d1\u5de5\u5177","text":"<p>\u4f7f\u7528\u9879\u76ee\u63d0\u4f9b\u7684Makefile\u547d\u4ee4\u8fdb\u884c\u5f00\u53d1\uff1a</p> <pre><code>make test          # \u8fd0\u884c\u6d4b\u8bd5\nmake lint          # \u4ee3\u7801\u68c0\u67e5\nmake coverage      # \u6d4b\u8bd5\u8986\u76d6\u7387\nmake ci            # \u5b8c\u6574CI\u68c0\u67e5\n</code></pre>"},{"location":"reference/API_REFERENCE/#_14","title":"\ud83d\udd17 \u76f8\u5173\u6587\u6863\u94fe\u63a5","text":""},{"location":"reference/API_REFERENCE/#_15","title":"\ud83d\udcda \u6838\u5fc3\u6587\u6863","text":"<ul> <li>\u7cfb\u7edf\u67b6\u6784\u6587\u6863 - \u5b8c\u6574\u7684\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1\u548c\u6280\u672f\u6808\u8bf4\u660e</li> <li>\u6570\u636e\u5e93\u67b6\u6784 - \u6570\u636e\u5e93\u8bbe\u8ba1\u548c\u8868\u7ed3\u6784\u8be6\u60c5</li> <li>\u5f00\u53d1\u6307\u5357 - \u5f00\u53d1\u73af\u5883\u642d\u5efa\u548c\u7f16\u7801\u89c4\u8303</li> <li>CLAUDE.md - AI\u8f85\u52a9\u5f00\u53d1\u6307\u5bfc\u548c\u5de5\u4f5c\u6d41\u7a0b</li> </ul>"},{"location":"reference/API_REFERENCE/#api_3","title":"\ud83d\udee0\ufe0f API\u4f7f\u7528\u6307\u5357","text":"<ul> <li>API\u4f7f\u7528\u793a\u4f8b - \u8be6\u7ec6\u7684API\u8c03\u7528\u793a\u4f8b\u548c\u6700\u4f73\u5b9e\u8df5</li> <li>API\u7aef\u70b9\u8be6\u60c5 - \u6240\u6709API\u7aef\u70b9\u7684\u8be6\u7ec6\u8bf4\u660e</li> <li>API\u6587\u6863\u98ce\u683c\u6307\u5357 - API\u6587\u6863\u7f16\u5199\u89c4\u8303</li> </ul>"},{"location":"reference/API_REFERENCE/#_16","title":"\ud83e\uddea \u6d4b\u8bd5\u76f8\u5173","text":"<ul> <li>\u6d4b\u8bd5\u7b56\u7565\u6587\u6863 - \u5b8c\u6574\u7684\u6d4b\u8bd5\u7b56\u7565\u548c\u8d28\u91cf\u4fdd\u8bc1\u4f53\u7cfb</li> <li>API\u6d4b\u8bd5\u6307\u5357 - API\u63a5\u53e3\u6d4b\u8bd5\u65b9\u6cd5\u548c\u5de5\u5177</li> <li>\u96c6\u6210\u6d4b\u8bd5\u6587\u6863 - \u96c6\u6210\u6d4b\u8bd5\u7b56\u7565\u548c\u5b9e\u65bd</li> </ul>"},{"location":"reference/API_REFERENCE/#_17","title":"\ud83d\udcca \u4e1a\u52a1\u548c\u6570\u636e","text":"<ul> <li>\u6570\u636e\u91c7\u96c6\u914d\u7f6e - \u6570\u636e\u91c7\u96c6\u548c\u5904\u7406\u7ba1\u9053\u914d\u7f6e</li> <li>\u673a\u5668\u5b66\u4e60\u6a21\u578b\u6307\u5357 - ML\u6a21\u578b\u5f00\u53d1\u548c\u90e8\u7f72\u6307\u5357</li> <li>\u672f\u8bed\u8868 - \u9879\u76ee\u4e13\u4e1a\u672f\u8bed\u548c\u6982\u5ff5\u5b9a\u4e49</li> </ul>"},{"location":"reference/API_REFERENCE/#_18","title":"\ud83d\udd27 \u8fd0\u7ef4\u548c\u90e8\u7f72","text":"<ul> <li>\u751f\u4ea7\u90e8\u7f72\u6307\u5357 - \u751f\u4ea7\u73af\u5883\u90e8\u7f72\u548c\u8fd0\u7ef4\u6307\u5357</li> <li>\u76d1\u63a7\u7cfb\u7edf - \u76d1\u63a7\u7cfb\u7edf\u914d\u7f6e\u548c\u544a\u8b66\u8bbe\u7f6e</li> <li>\u8fd0\u7ef4\u624b\u518c - \u8fd0\u7ef4\u64cd\u4f5c\u6307\u5357\u548c\u6545\u969c\u6392\u9664</li> </ul>"},{"location":"reference/API_REFERENCE/#_19","title":"\ud83d\udcd6 \u5feb\u901f\u5f00\u59cb","text":"<ul> <li>\u9879\u76ee\u7d22\u5f15 - \u5b8c\u6574\u7684\u6587\u6863\u5bfc\u822a\u548c\u5165\u53e3</li> <li>\u5feb\u901f\u5f00\u59cb\u6307\u5357 - 5\u5206\u949f\u5feb\u901f\u4e0a\u624b\u6307\u5357</li> <li>Makefile\u5de5\u5177\u6307\u5357 - 120+\u5f00\u53d1\u547d\u4ee4\u8be6\u89e3</li> </ul> <p>\u6587\u6863\u7ef4\u62a4: \u672cAPI\u6587\u6863\u4e0e\u4ee3\u7801\u540c\u6b65\u66f4\u65b0\uff0c\u5982\u6709\u7591\u95ee\u8bf7\u53c2\u8003\u76f8\u5173\u6587\u6863\u6216\u8054\u7cfb\u5f00\u53d1\u56e2\u961f\u3002</p>"},{"location":"reference/CODE_EXAMPLES/","title":"\u4ee3\u7801\u793a\u4f8b\u548c\u4f7f\u7528\u6307\u5357","text":""},{"location":"reference/CODE_EXAMPLES/#_2","title":"\u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u63d0\u4f9b\u4e86FootballPrediction\u9879\u76ee\u7684\u5e38\u89c1\u4f7f\u7528\u573a\u666f\u548c\u4ee3\u7801\u793a\u4f8b\u3002</p>"},{"location":"reference/CODE_EXAMPLES/#_3","title":"\u76ee\u5f55","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb</li> <li>API\u4f7f\u7528</li> <li>\u6570\u636e\u5904\u7406</li> <li>\u6a21\u578b\u8bad\u7ec3</li> <li>\u6d4b\u8bd5</li> </ul>"},{"location":"reference/CODE_EXAMPLES/#_4","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"reference/CODE_EXAMPLES/#1","title":"1. \u73af\u5883\u8bbe\u7f6e","text":"<pre><code># \u514b\u9686\u9879\u76ee\ngit clone https://github.com/your-repo/FootballPrediction.git\ncd FootballPrediction\n\n# \u521b\u5efa\u865a\u62df\u73af\u5883\nmake venv\n\n# \u5b89\u88c5\u4f9d\u8d56\nmake install\n\n# \u9a8c\u8bc1\u5b89\u88c5\nmake env-check\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#2","title":"2. \u542f\u52a8\u670d\u52a1","text":"<pre><code># \u5f00\u53d1\u6a21\u5f0f\nuvicorn src.main:app --reload\n\n# \u751f\u4ea7\u6a21\u5f0f\ndocker-compose up -d\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#3","title":"3. \u9a8c\u8bc1\u670d\u52a1","text":"<pre><code># \u5065\u5eb7\u68c0\u67e5\ncurl http://localhost:8000/api/health\n\n# \u67e5\u770bAPI\u6587\u6863\nopen http://localhost:8000/docs\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#api","title":"API\u4f7f\u7528","text":""},{"location":"reference/CODE_EXAMPLES/#_5","title":"\u5065\u5eb7\u68c0\u67e5","text":"<pre><code>import requests\n\n# \u7b80\u5355\u5065\u5eb7\u68c0\u67e5\nresponse = requests.get(\"http://localhost:8000/api/health\")\nprint(response.json())\n\n# \u8f93\u51fa:\n# {\n#   \"status\": \"healthy\",\n#   \"timestamp\": \"2024-01-01T12:00:00Z\",\n#   \"service\": \"football-prediction-api\",\n#   \"version\": \"1.0.0\"\n# }\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_6","title":"\u521b\u5efa\u9884\u6d4b","text":"<pre><code>from datetime import datetime\nimport requests\n\n# \u9884\u6d4b\u6570\u636e\nprediction_data = {\n    \"home_team\": \"Manchester United\",\n    \"away_team\": \"Liverpool\",\n    \"match_date\": datetime.now().isoformat(),\n    \"league\": \"Premier League\"\n}\n\n# \u53d1\u9001\u8bf7\u6c42\nresponse = requests.post(\n    \"http://localhost:8000/api/v1/predictions\",\n    json=prediction_data,\n    headers={\"Authorization\": \"Bearer YOUR_TOKEN\"}\n)\n\n# \u83b7\u53d6\u9884\u6d4b\u7ed3\u679c\nprediction = response.json()\nprint(f\"\u9884\u6d4b: {prediction['prediction']}\")\nprint(f\"\u7f6e\u4fe1\u5ea6: {prediction['confidence']}\")\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_7","title":"\u6279\u91cf\u9884\u6d4b","text":"<pre><code>import asyncio\nimport aiohttp\n\nasync def predict_match(session, match_data):\n    \"\"\"\u5f02\u6b65\u9884\u6d4b\u5355\u573a\u6bd4\u8d5b\"\"\"\n    async with session.post(\n        \"http://localhost:8000/api/v1/predictions\",\n        json=match_data\n    ) as response:\n        return await response.json()\n\nasync def batch_predictions(matches):\n    \"\"\"\u6279\u91cf\u9884\u6d4b\u591a\u573a\u6bd4\u8d5b\"\"\"\n    async with aiohttp.ClientSession() as session:\n        tasks = [predict_match(session, match) for match in matches]\n        results = await asyncio.gather(*tasks)\n        return results\n\n# \u4f7f\u7528\u793a\u4f8b\nmatches = [\n    {\"home_team\": \"Team A\", \"away_team\": \"Team B\", ...},\n    {\"home_team\": \"Team C\", \"away_team\": \"Team D\", ...},\n]\npredictions = asyncio.run(batch_predictions(matches))\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_8","title":"\u6570\u636e\u5904\u7406","text":""},{"location":"reference/CODE_EXAMPLES/#_9","title":"\u5bfc\u5165\u6bd4\u8d5b\u6570\u636e","text":"<pre><code>from src.data.collectors.fixtures_collector import FixturesCollector\nimport asyncio\n\nasync def import_fixtures():\n    \"\"\"\u5bfc\u5165\u8d5b\u7a0b\u6570\u636e\"\"\"\n    collector = FixturesCollector()\n\n    # \u83b7\u53d6\u7279\u5b9a\u65e5\u671f\u8303\u56f4\u7684\u8d5b\u7a0b\n    fixtures = await collector.collect_fixtures(\n        league=\"Premier League\",\n        start_date=\"2024-01-01\",\n        end_date=\"2024-01-31\"\n    )\n\n    print(f\"\u5bfc\u5165\u4e86 {len(fixtures)} \u573a\u6bd4\u8d5b\")\n    return fixtures\n\n# \u8fd0\u884c\nfixtures = asyncio.run(import_fixtures())\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_10","title":"\u6570\u636e\u6e05\u6d17","text":"<pre><code>from src.data.processing.football_data_cleaner import FootballDataCleaner\nimport pandas as pd\n\n# \u521b\u5efa\u6e05\u6d17\u5668\ncleaner = FootballDataCleaner()\n\n# \u52a0\u8f7d\u539f\u59cb\u6570\u636e\nraw_data = pd.read_csv(\"data/raw_matches.csv\")\n\n# \u6e05\u6d17\u6570\u636e\ncleaned_data = cleaner.clean(raw_data)\n\n# \u9a8c\u8bc1\u6570\u636e\u8d28\u91cf\nquality_report = cleaner.validate(cleaned_data)\nprint(f\"\u6570\u636e\u8d28\u91cf\u5f97\u5206: {quality_report['score']}\")\n\n# \u4fdd\u5b58\u6e05\u6d17\u540e\u7684\u6570\u636e\ncleaned_data.to_csv(\"data/clean_matches.csv\", index=False)\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_11","title":"\u7279\u5f81\u5de5\u7a0b","text":"<pre><code>from src.features.feature_calculator import FeatureCalculator\n\n# \u521b\u5efa\u7279\u5f81\u8ba1\u7b97\u5668\ncalculator = FeatureCalculator()\n\n# \u8ba1\u7b97\u5355\u573a\u6bd4\u8d5b\u7684\u7279\u5f81\nmatch_features = calculator.calculate_match_features(\n    home_team=\"Manchester United\",\n    away_team=\"Liverpool\",\n    match_date=\"2024-01-15\"\n)\n\nprint(\"\u8ba1\u7b97\u7684\u7279\u5f81:\")\nfor feature, value in match_features.items():\n    print(f\"  {feature}: {value}\")\n\n# \u6279\u91cf\u8ba1\u7b97\u7279\u5f81\nmatches_df = pd.read_csv(\"data/matches.csv\")\nfeatures_df = calculator.calculate_batch_features(matches_df)\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_12","title":"\u6a21\u578b\u8bad\u7ec3","text":""},{"location":"reference/CODE_EXAMPLES/#_13","title":"\u8bad\u7ec3\u65b0\u6a21\u578b","text":"<pre><code>from src.models.prediction_service import PredictionService\nfrom sklearn.model_selection import train_test_split\nimport pandas as pd\n\n# \u52a0\u8f7d\u8bad\u7ec3\u6570\u636e\ndata = pd.read_csv(\"data/training_data.csv\")\nX = data.drop(['result'], axis=1)\ny = data['result']\n\n# \u5206\u5272\u6570\u636e\u96c6\nX_train, X_test, y_train, y_test = train_test_split(\n    X, y, test_size=0.2, random_state=42\n)\n\n# \u8bad\u7ec3\u6a21\u578b\nservice = PredictionService()\nmodel = service.train_model(X_train, y_train)\n\n# \u8bc4\u4f30\u6a21\u578b\nmetrics = service.evaluate_model(model, X_test, y_test)\nprint(f\"\u51c6\u786e\u7387: {metrics['accuracy']:.2%}\")\nprint(f\"F1\u5206\u6570: {metrics['f1_score']:.2f}\")\n\n# \u4fdd\u5b58\u6a21\u578b\nservice.save_model(model, \"models/prediction_model_v1.pkl\")\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_14","title":"\u6a21\u578b\u63a8\u7406","text":"<pre><code>from src.models.prediction_service import PredictionService\n\n# \u52a0\u8f7d\u6a21\u578b\nservice = PredictionService()\nmodel = service.load_model(\"models/prediction_model_v1.pkl\")\n\n# \u9884\u6d4b\u5355\u573a\u6bd4\u8d5b\nprediction = service.predict(\n    home_team=\"Team A\",\n    away_team=\"Team B\",\n    features={...}\n)\n\nprint(f\"\u9884\u6d4b\u7ed3\u679c: {prediction['outcome']}\")\nprint(f\"\u5404\u7ed3\u679c\u6982\u7387:\")\nprint(f\"  \u4e3b\u80dc: {prediction['probabilities']['home_win']:.2%}\")\nprint(f\"  \u5e73\u5c40: {prediction['probabilities']['draw']:.2%}\")\nprint(f\"  \u5ba2\u80dc: {prediction['probabilities']['away_win']:.2%}\")\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_15","title":"\u7f13\u5b58\u4f7f\u7528","text":""},{"location":"reference/CODE_EXAMPLES/#redis","title":"Redis\u7f13\u5b58","text":"<pre><code>from src.cache.redis_manager import RedisManager\nimport asyncio\n\nasync def cache_example():\n    \"\"\"Redis\u7f13\u5b58\u4f7f\u7528\u793a\u4f8b\"\"\"\n    redis = RedisManager()\n\n    # \u8bbe\u7f6e\u7f13\u5b58\n    await redis.set(\"team:1\", {\"name\": \"Manchester United\", \"league\": \"EPL\"})\n\n    # \u83b7\u53d6\u7f13\u5b58\n    team = await redis.get(\"team:1\")\n    print(team)\n\n    # \u8bbe\u7f6e\u5e26\u8fc7\u671f\u65f6\u95f4\u7684\u7f13\u5b58\n    await redis.set(\"temp:data\", \"value\", ttl=3600)  # 1\u5c0f\u65f6\u8fc7\u671f\n\n    # \u6279\u91cf\u64cd\u4f5c\n    await redis.mset({\n        \"team:1\": \"Man Utd\",\n        \"team:2\": \"Liverpool\",\n        \"team:3\": \"Chelsea\"\n    })\n\n    teams = await redis.mget([\"team:1\", \"team:2\", \"team:3\"])\n\n    # \u5220\u9664\u7f13\u5b58\n    await redis.delete(\"temp:data\")\n\nasyncio.run(cache_example())\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_16","title":"\u6570\u636e\u5e93\u64cd\u4f5c","text":""},{"location":"reference/CODE_EXAMPLES/#crud","title":"\u57fa\u7840CRUD","text":"<pre><code>from src.database.connection import get_database_manager\nfrom src.database.models.match import Match\nfrom sqlalchemy import select\n\n# \u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\ndb_manager = get_database_manager()\n\nasync def database_example():\n    \"\"\"\u6570\u636e\u5e93\u64cd\u4f5c\u793a\u4f8b\"\"\"\n    async with db_manager.get_async_session() as session:\n        # \u521b\u5efa\n        new_match = Match(\n            home_team=\"Team A\",\n            away_team=\"Team B\",\n            date=\"2024-01-15\",\n            league=\"Premier League\"\n        )\n        session.add(new_match)\n        await session.commit()\n\n        # \u67e5\u8be2\n        result = await session.execute(\n            select(Match).where(Match.league == \"Premier League\")\n        )\n        matches = result.scalars().all()\n\n        # \u66f4\u65b0\n        match = matches[0]\n        match.home_score = 2\n        match.away_score = 1\n        await session.commit()\n\n        # \u5220\u9664\n        await session.delete(match)\n        await session.commit()\n\nimport asyncio\nasyncio.run(database_example())\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_17","title":"\u76d1\u63a7\u548c\u65e5\u5fd7","text":""},{"location":"reference/CODE_EXAMPLES/#_18","title":"\u6dfb\u52a0\u65e5\u5fd7","text":"<pre><code>import logging\nfrom src.core.logger import get_logger\n\n# \u83b7\u53d6logger\nlogger = get_logger(__name__)\n\ndef process_data(data):\n    \"\"\"\u5904\u7406\u6570\u636e\u5e76\u8bb0\u5f55\u65e5\u5fd7\"\"\"\n    logger.info(f\"\u5f00\u59cb\u5904\u7406 {len(data)} \u6761\u6570\u636e\")\n\n    try:\n        # \u5904\u7406\u903b\u8f91\n        result = perform_processing(data)\n        logger.info(f\"\u6210\u529f\u5904\u7406 {len(result)} \u6761\u6570\u636e\")\n        return result\n    except Exception as e:\n        logger.error(f\"\u5904\u7406\u6570\u636e\u5931\u8d25: {str(e)}\", exc_info=True)\n        raise\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_19","title":"\u6027\u80fd\u76d1\u63a7","text":"<pre><code>from src.monitoring.metrics_collector import MetricsCollector\nimport time\n\n# \u521b\u5efametrics\u6536\u96c6\u5668\nmetrics = MetricsCollector()\n\ndef monitored_function():\n    \"\"\"\u5e26\u76d1\u63a7\u7684\u51fd\u6570\"\"\"\n    start_time = time.time()\n\n    try:\n        # \u4e1a\u52a1\u903b\u8f91\n        result = expensive_operation()\n\n        # \u8bb0\u5f55\u6210\u529f\n        metrics.record_success('operation_name')\n        return result\n\n    except Exception as e:\n        # \u8bb0\u5f55\u5931\u8d25\n        metrics.record_error('operation_name', str(e))\n        raise\n\n    finally:\n        # \u8bb0\u5f55\u6267\u884c\u65f6\u95f4\n        duration = time.time() - start_time\n        metrics.record_duration('operation_name', duration)\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_20","title":"\u6d4b\u8bd5","text":""},{"location":"reference/CODE_EXAMPLES/#_21","title":"\u5355\u5143\u6d4b\u8bd5","text":"<pre><code>import pytest\nfrom src.utils.string_utils import StringUtils\n\nclass TestStringUtils:\n    \"\"\"\u5b57\u7b26\u4e32\u5de5\u5177\u6d4b\u8bd5\"\"\"\n\n    def test_capitalize(self):\n        \"\"\"\u6d4b\u8bd5\u9996\u5b57\u6bcd\u5927\u5199\"\"\"\n        result = StringUtils.capitalize_first_letter(\"hello\")\n        assert result == \"Hello\"\n\n    @pytest.mark.parametrize(\"input,expected\", [\n        (\"test\", \"Test\"),\n        (\"\", \"\"),\n        (\"HELLO\", \"HELLO\"),\n    ])\n    def test_capitalize_multiple(self, input, expected):\n        \"\"\"\u6d4b\u8bd5\u591a\u79cd\u60c5\u51b5\"\"\"\n        assert StringUtils.capitalize_first_letter(input) == expected\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#api_1","title":"API\u96c6\u6210\u6d4b\u8bd5","text":"<pre><code>import pytest\nfrom fastapi.testclient import TestClient\nfrom src.main import app\n\n@pytest.fixture\ndef client():\n    \"\"\"\u6d4b\u8bd5\u5ba2\u6237\u7aef\"\"\"\n    return TestClient(app)\n\ndef test_health_check(client):\n    \"\"\"\u6d4b\u8bd5\u5065\u5eb7\u68c0\u67e5\u7aef\u70b9\"\"\"\n    response = client.get(\"/api/health\")\n    assert response.status_code == 200\n    data = response.json()\n    assert data[\"status\"] == \"healthy\"\n\ndef test_create_prediction(client):\n    \"\"\"\u6d4b\u8bd5\u521b\u5efa\u9884\u6d4b\"\"\"\n    prediction_data = {\n        \"home_team\": \"Team A\",\n        \"away_team\": \"Team B\",\n        \"match_date\": \"2024-01-15\"\n    }\n    response = client.post(\"/api/v1/predictions\", json=prediction_data)\n    assert response.status_code == 201\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_22","title":"\u914d\u7f6e\u7ba1\u7406","text":""},{"location":"reference/CODE_EXAMPLES/#_23","title":"\u73af\u5883\u914d\u7f6e","text":"<pre><code>from src.core.config import get_settings\n\n# \u83b7\u53d6\u914d\u7f6e\nsettings = get_settings()\n\n# \u4f7f\u7528\u914d\u7f6e\ndatabase_url = settings.DATABASE_URL\nredis_url = settings.REDIS_URL\ndebug_mode = settings.DEBUG\n\n# \u914d\u7f6e\u793a\u4f8b\nprint(f\"\u73af\u5883: {settings.ENVIRONMENT}\")\nprint(f\"\u6570\u636e\u5e93: {settings.DATABASE_URL}\")\nprint(f\"\u65e5\u5fd7\u7ea7\u522b: {settings.LOG_LEVEL}\")\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_24","title":"\u81ea\u5b9a\u4e49\u914d\u7f6e","text":"<pre><code>import os\nfrom pydantic import BaseSettings\n\nclass CustomConfig(BaseSettings):\n    \"\"\"\u81ea\u5b9a\u4e49\u914d\u7f6e\"\"\"\n    API_KEY: str\n    MAX_RETRIES: int = 3\n    TIMEOUT: int = 30\n\n    class Config:\n        env_file = \".env\"\n\n# \u4f7f\u7528\nconfig = CustomConfig()\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_25","title":"\u5b9e\u7528\u5de5\u5177","text":""},{"location":"reference/CODE_EXAMPLES/#_26","title":"\u91cd\u8bd5\u673a\u5236","text":"<pre><code>from src.utils.retry import retry_with_backoff\nimport aiohttp\n\n@retry_with_backoff(max_attempts=3, backoff_factor=2)\nasync def fetch_data(url):\n    \"\"\"\u5e26\u91cd\u8bd5\u7684\u6570\u636e\u83b7\u53d6\"\"\"\n    async with aiohttp.ClientSession() as session:\n        async with session.get(url) as response:\n            return await response.json()\n\n# \u4f7f\u7528\ndata = await fetch_data(\"https://api.example.com/data\")\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_27","title":"\u6570\u636e\u9a8c\u8bc1","text":"<pre><code>from src.utils.data_validator import DataValidator\n\nvalidator = DataValidator()\n\n# \u9a8c\u8bc1\u6570\u636e\ndata = {\n    \"email\": \"user@example.com\",\n    \"age\": 25,\n    \"name\": \"John Doe\"\n}\n\nis_valid, errors = validator.validate(data, schema={\n    \"email\": \"email\",\n    \"age\": \"integer\",\n    \"name\": \"string\"\n})\n\nif not is_valid:\n    print(f\"\u9a8c\u8bc1\u5931\u8d25: {errors}\")\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_28","title":"\u90e8\u7f72","text":""},{"location":"reference/CODE_EXAMPLES/#docker","title":"Docker\u90e8\u7f72","text":"<pre><code># \u6784\u5efa\u955c\u50cf\ndocker build -t football-prediction:latest .\n\n# \u8fd0\u884c\u5bb9\u5668\ndocker run -d \\\n  -p 8000:8000 \\\n  -e DATABASE_URL=\"postgresql://user:pass@db:5432/football\" \\\n  -e REDIS_URL=\"redis://redis:6379/0\" \\\n  football-prediction:latest\n\n# \u4f7f\u7528docker-compose\ndocker-compose up -d\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#kubernetes","title":"Kubernetes\u90e8\u7f72","text":"<pre><code># deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: football-prediction\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: football-prediction\n  template:\n    metadata:\n      labels:\n        app: football-prediction\n    spec:\n      containers:\n      - name: api\n        image: football-prediction:latest\n        ports:\n        - containerPort: 8000\n        env:\n        - name: DATABASE_URL\n          valueFrom:\n            secretKeyRef:\n              name: db-secret\n              key: url\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_29","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"reference/CODE_EXAMPLES/#_30","title":"\u8fde\u63a5\u6570\u636e\u5e93\u5931\u8d25","text":"<pre><code># \u68c0\u67e5\u8fde\u63a5\nfrom src.database.connection import get_database_manager\n\ndb = get_database_manager()\ntry:\n    db.test_connection()\n    print(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\")\nexcept Exception as e:\n    print(f\"\u8fde\u63a5\u5931\u8d25: {e}\")\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_31","title":"\u7f13\u5b58\u5931\u6548","text":"<pre><code># \u6e05\u9664\u6240\u6709\u7f13\u5b58\nfrom src.cache.redis_manager import RedisManager\n\nredis = RedisManager()\nawait redis.flushall()\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_32","title":"\u6027\u80fd\u4f18\u5316","text":"<pre><code># \u4f7f\u7528\u6279\u91cf\u64cd\u4f5c\n# \u274c \u4e0d\u597d - \u591a\u6b21\u67e5\u8be2\nfor match_id in match_ids:\n    match = await db.get_match(match_id)\n\n# \u2705 \u597d - \u6279\u91cf\u67e5\u8be2\nmatches = await db.get_matches(match_ids)\n</code></pre>"},{"location":"reference/CODE_EXAMPLES/#_33","title":"\u66f4\u591a\u8d44\u6e90","text":"<ul> <li>API\u6587\u6863</li> <li>\u6d4b\u8bd5\u6307\u5357</li> <li>\u67b6\u6784\u8bbe\u8ba1</li> <li>\u8d21\u732e\u6307\u5357</li> </ul>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/","title":"Comprehensive API Documentation Style Guide","text":""},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#1-general-principles","title":"1. General Principles","text":"<ol> <li>Bilingual Documentation: All public APIs and major components should have both Chinese and English documentation.</li> <li>Consistent Structure: Follow a consistent structure for all docstrings and API documentation.</li> <li>Clear Examples: Provide clear usage examples where appropriate.</li> <li>Type Annotations: Use proper type annotations in Python code.</li> </ol>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#2-docstring-format-standards","title":"2. Docstring Format Standards","text":""},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#21-module-docstrings","title":"2.1 Module Docstrings","text":"<pre><code>\"\"\"\n\u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406\u6a21\u5757 / Database Connection Management Module\n\n\u63d0\u4f9b\u540c\u6b65\u548c\u5f02\u6b65\u7684PostgreSQL\u6570\u636e\u5e93\u8fde\u63a5\u3001\u4f1a\u8bdd\u7ba1\u7406\u548c\u751f\u547d\u5468\u671f\u63a7\u5236\u3002\n\u652f\u6301\u591a\u7528\u6237\u6743\u9650\u5206\u79bb\u7684\u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406\u3002\n\nProvides synchronous and asynchronous PostgreSQL database connection, session management,\nand lifecycle control. Supports multi-user permission-separated database connection management.\n\n\u4e3b\u8981\u7c7b / Main Classes:\n    DatabaseManager: \u5355\u4f8b\u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406\u5668 / Singleton database connection manager\n    MultiUserDatabaseManager: \u591a\u7528\u6237\u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406\u5668 / Multi-user database connection manager\n\n\u4e3b\u8981\u65b9\u6cd5 / Main Methods:\n    DatabaseManager.initialize(): \u521d\u59cb\u5316\u6570\u636e\u5e93\u8fde\u63a5 / Initialize database connection\n    DatabaseManager.get_session(): \u83b7\u53d6\u540c\u6b65\u4f1a\u8bdd / Get synchronous session\n    DatabaseManager.get_async_session(): \u83b7\u53d6\u5f02\u6b65\u4f1a\u8bdd / Get asynchronous session\n\n\u4f7f\u7528\u793a\u4f8b / Usage Example:\n    ```python\n    from src.database.connection import DatabaseManager\n\n    # \u521d\u59cb\u5316\u6570\u636e\u5e93\u8fde\u63a5\n    db_manager = DatabaseManager()\n    db_manager.initialize()\n\n    # \u4f7f\u7528\u540c\u6b65\u4f1a\u8bdd\n    with db_manager.get_session() as session:\n        # \u6267\u884c\u6570\u636e\u5e93\u64cd\u4f5c\n        pass\n\n    # \u4f7f\u7528\u5f02\u6b65\u4f1a\u8bdd\n    async with db_manager.get_async_session() as session:\n        # \u6267\u884c\u5f02\u6b65\u6570\u636e\u5e93\u64cd\u4f5c\n        pass\n    ```\n\n\u73af\u5883\u53d8\u91cf / Environment Variables:\n    DB_HOST: \u6570\u636e\u5e93\u4e3b\u673a\u5730\u5740 / Database host address\n    DB_PORT: \u6570\u636e\u5e93\u7aef\u53e3 / Database port\n    DB_NAME: \u6570\u636e\u5e93\u540d\u79f0 / Database name\n    DB_USER: \u6570\u636e\u5e93\u7528\u6237\u540d / Database username\n    DB_PASSWORD: \u6570\u636e\u5e93\u5bc6\u7801 / Database password\n\n\u4f9d\u8d56 / Dependencies:\n    - sqlalchemy: \u6570\u636e\u5e93ORM\u6846\u67b6 / Database ORM framework\n    - psycopg2: PostgreSQL\u6570\u636e\u5e93\u9002\u914d\u5668 / PostgreSQL database adapter\n\"\"\"\n</code></pre>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#22-class-docstrings","title":"2.2 Class Docstrings","text":"<pre><code>class DatabaseManager:\n    \"\"\"\n    \u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406\u5668 / Database Connection Manager\n\n    \u63d0\u4f9b\u5355\u4f8b\u6a21\u5f0f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406\uff0c\u652f\u6301\u540c\u6b65\u548c\u5f02\u6b65\u64cd\u4f5c\u3002\n    \u5b9e\u73b0\u8fde\u63a5\u6c60\u7ba1\u7406\u3001\u4f1a\u8bdd\u7ba1\u7406\u548c\u5065\u5eb7\u68c0\u67e5\u529f\u80fd\u3002\n\n    Provides singleton database connection management with support for both\n    synchronous and asynchronous operations. Implements connection pool management,\n    session management, and health check functionality.\n\n    Attributes:\n        _instance (Optional[DatabaseManager]): \u5355\u4f8b\u5b9e\u4f8b / Singleton instance\n        _sync_engine (Optional[Engine]): \u540c\u6b65\u6570\u636e\u5e93\u5f15\u64ce / Synchronous database engine\n        _async_engine (Optional[AsyncEngine]): \u5f02\u6b65\u6570\u636e\u5e93\u5f15\u64ce / Asynchronous database engine\n        _session_factory (Optional[sessionmaker]): \u540c\u6b65\u4f1a\u8bdd\u5de5\u5382 / Synchronous session factory\n        _async_session_factory (Optional[async_sessionmaker]): \u5f02\u6b65\u4f1a\u8bdd\u5de5\u5382 / Asynchronous session factory\n        _config (Optional[DatabaseConfig]): \u6570\u636e\u5e93\u914d\u7f6e / Database configuration\n\n    Example:\n        ```python\n        from src.database.connection import DatabaseManager\n\n        # \u83b7\u53d6\u5355\u4f8b\u5b9e\u4f8b\n        db_manager = DatabaseManager()\n        db_manager.initialize()\n\n        # \u68c0\u67e5\u6570\u636e\u5e93\u5065\u5eb7\u72b6\u6001\n        is_healthy = db_manager.health_check()\n        ```\n    \"\"\"\n</code></pre>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#23-method-docstrings","title":"2.3 Method Docstrings","text":"<pre><code>    def initialize(self, config: Optional[DatabaseConfig] = None) -&gt; None:\n        \"\"\"\n        \u521d\u59cb\u5316\u6570\u636e\u5e93\u8fde\u63a5 / Initialize Database Connection\n\n        \u6839\u636e\u63d0\u4f9b\u7684\u914d\u7f6e\u521d\u59cb\u5316\u540c\u6b65\u548c\u5f02\u6b65\u6570\u636e\u5e93\u5f15\u64ce\u53ca\u4f1a\u8bdd\u5de5\u5382\u3002\n        \u5982\u679c\u672a\u63d0\u4f9b\u914d\u7f6e\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u3002\n\n        Initialize synchronous and asynchronous database engines and session factories\n        based on the provided configuration. If no configuration is provided,\n        use the default configuration.\n\n        Args:\n            config (Optional[DatabaseConfig]): \u6570\u636e\u5e93\u914d\u7f6e\u5bf9\u8c61 / Database configuration object\n                If None, uses default configuration from environment variables.\n                Defaults to None.\n\n        Raises:\n            ValueError: \u5f53\u914d\u7f6e\u53c2\u6570\u65e0\u6548\u65f6\u629b\u51fa / Raised when configuration parameters are invalid\n            RuntimeError: \u5f53\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u5931\u8d25\u65f6\u629b\u51fa / Raised when database connection initialization fails\n\n        Example:\n            ```python\n            from src.database.connection import DatabaseManager, DatabaseConfig\n\n            db_manager = DatabaseManager()\n\n            # \u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\n            db_manager.initialize()\n\n            # \u4f7f\u7528\u81ea\u5b9a\u4e49\u914d\u7f6e\n            config = DatabaseConfig(\n                host=\"localhost\",\n                port=5432,\n                database=\"football_prediction\",\n                user=\"football_user\",\n                password=\"football_password\"\n            )\n            db_manager.initialize(config)\n            ```\n\n        Note:\n            \u8be5\u65b9\u6cd5\u5e94\u8be5\u5728\u5e94\u7528\u7a0b\u5e8f\u542f\u52a8\u65f6\u8c03\u7528\u4e00\u6b21\u3002\n            This method should be called once at application startup.\n        \"\"\"\n</code></pre>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#24-data-class-docstrings","title":"2.4 Data Class Docstrings","text":"<pre><code>@dataclass\nclass DataFreshnessResult:\n    \"\"\"\n    \u6570\u636e\u65b0\u9c9c\u5ea6\u68c0\u67e5\u7ed3\u679c / Data Freshness Check Result\n\n    \u5b58\u50a8\u5355\u4e2a\u8868\u7684\u6570\u636e\u65b0\u9c9c\u5ea6\u68c0\u67e5\u7ed3\u679c\uff0c\u5305\u62ec\u65f6\u95f4\u6233\u3001\u8bb0\u5f55\u6570\u548c\u65b0\u9c9c\u5ea6\u72b6\u6001\u3002\n    Stores data freshness check results for a single table, including timestamps,\n    record counts, and freshness status.\n\n    Attributes:\n        table_name (str): \u8868\u540d / Table name\n        last_update_time (Optional[datetime]): \u6700\u540e\u66f4\u65b0\u65f6\u95f4 / Last update time\n        records_count (int): \u8bb0\u5f55\u6570\u91cf / Number of records\n        freshness_hours (float): \u6570\u636e\u65b0\u9c9c\u5ea6\uff08\u5c0f\u65f6\uff09 / Data freshness in hours\n        is_fresh (bool): \u662f\u5426\u65b0\u9c9c / Whether data is fresh\n        threshold_hours (float): \u65b0\u9c9c\u5ea6\u9608\u503c\uff08\u5c0f\u65f6\uff09 / Freshness threshold in hours\n\n    Example:\n        ```python\n        from src.monitoring.quality_monitor import DataFreshnessResult\n        from datetime import datetime\n\n        result = DataFreshnessResult(\n            table_name=\"matches\",\n            last_update_time=datetime.now(),\n            records_count=1000,\n            freshness_hours=2.5,\n            is_fresh=True,\n            threshold_hours=24.0\n        )\n\n        print(f\"\u8868 {result.table_name} \u6570\u636e\u65b0\u9c9c\u5ea6: {result.freshness_hours} \u5c0f\u65f6\")\n        ```\n    \"\"\"\n</code></pre>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#25-enum-docstrings","title":"2.5 Enum Docstrings","text":"<pre><code>class DatabaseRole(str, Enum):\n    \"\"\"\n    \u6570\u636e\u5e93\u7528\u6237\u89d2\u8272\u679a\u4e3e / Database User Role Enumeration\n\n    \u5b9a\u4e49\u6570\u636e\u5e93\u7528\u6237\u7684\u4e09\u79cd\u89d2\u8272\uff0c\u7528\u4e8e\u6743\u9650\u5206\u79bb\u3002\n    Defines three roles for database users for permission separation.\n\n    Roles:\n        READER: \u53ea\u8bfb\u7528\u6237\uff08\u5206\u6790\u3001\u524d\u7aef\uff09 / Read-only user (analytics, frontend)\n        WRITER: \u8bfb\u5199\u7528\u6237\uff08\u6570\u636e\u91c7\u96c6\uff09 / Read-write user (data collection)\n        ADMIN: \u7ba1\u7406\u5458\u7528\u6237\uff08\u8fd0\u7ef4\u3001\u8fc1\u79fb\uff09 / Administrator user (operations, migration)\n\n    Example:\n        ```python\n        from src.database.connection import DatabaseRole\n\n        # \u4f7f\u7528\u679a\u4e3e\u503c\n        role = DatabaseRole.READER\n        print(role.value)  # \u8f93\u51fa: reader\n        ```\n\n    Note:\n        \u57fa\u4e8eDATA_DESIGN.md\u7b2c5.3\u8282\u6743\u9650\u63a7\u5236\u8bbe\u8ba1\u3002\n        Based on DATA_DESIGN.md Section 5.3 Permission Control Design.\n    \"\"\"\n\n    READER = \"reader\"  # \u53ea\u8bfb\u7528\u6237\uff08\u5206\u6790\u3001\u524d\u7aef\uff09 / Read-only user (analytics, frontend)\n    WRITER = \"writer\"  # \u8bfb\u5199\u7528\u6237\uff08\u6570\u636e\u91c7\u96c6\uff09 / Read-write user (data collection)\n    ADMIN = \"admin\"  # \u7ba1\u7406\u5458\u7528\u6237\uff08\u8fd0\u7ef4\u3001\u8fc1\u79fb\uff09 / Administrator user (operations, migration)\n</code></pre>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#3-api-documentation-standards","title":"3. API Documentation Standards","text":""},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#31-fastapi-endpoint-documentation","title":"3.1 FastAPI Endpoint Documentation","text":"<pre><code>@router.get(\n    \"/health\",\n    summary=\"\u68c0\u67e5\u670d\u52a1\u5065\u5eb7\u72b6\u6001 / Check Service Health\",\n    description=\"\u68c0\u67e5API\u670d\u52a1\u548c\u4f9d\u8d56\u7ec4\u4ef6\u7684\u5065\u5eb7\u72b6\u6001 / Check health status of API service and dependent components\",\n    responses={\n        200: {\n            \"description\": \"\u670d\u52a1\u5065\u5eb7 / Service is healthy\",\n            \"content\": {\n                \"application/json\": {\n                    \"example\": {\n                        \"status\": \"healthy\",\n                        \"components\": {\n                            \"database\": \"healthy\",\n                            \"redis\": \"healthy\",\n                            \"mlflow\": \"healthy\"\n                        },\n                        \"timestamp\": \"2025-09-15T10:30:00Z\"\n                    }\n                }\n            }\n        },\n        503: {\n            \"description\": \"\u670d\u52a1\u4e0d\u5065\u5eb7 / Service is unhealthy\",\n            \"content\": {\n                \"application/json\": {\n                    \"example\": {\n                        \"status\": \"unhealthy\",\n                        \"components\": {\n                            \"database\": \"unhealthy\",\n                            \"redis\": \"healthy\",\n                            \"mlflow\": \"healthy\"\n                        },\n                        \"timestamp\": \"2025-09-15T10:30:00Z\",\n                        \"errors\": {\n                            \"database\": \"Connection timeout\"\n                        }\n                    }\n                }\n            }\n        }\n    }\n)\nasync def health_check() -&gt; Dict[str, Any]:\n    \"\"\"\n    \u68c0\u67e5\u670d\u52a1\u5065\u5eb7\u72b6\u6001 / Check Service Health\n\n    \u6267\u884c\u5168\u9762\u7684\u5065\u5eb7\u68c0\u67e5\uff0c\u5305\u62ec\u6570\u636e\u5e93\u3001Redis\u7f13\u5b58\u548cMLflow\u670d\u52a1\u7684\u8fde\u63a5\u72b6\u6001\u3002\n    Perform comprehensive health check including database, Redis cache,\n    and MLflow service connection status.\n\n    Returns:\n        Dict[str, Any]: \u5065\u5eb7\u68c0\u67e5\u7ed3\u679c / Health check results\n            - status (str): \u670d\u52a1\u6574\u4f53\u72b6\u6001 ('healthy' or 'unhealthy') / Overall service status\n            - components (Dict[str, str]): \u5404\u7ec4\u4ef6\u72b6\u6001 / Component statuses\n            - timestamp (str): \u68c0\u67e5\u65f6\u95f4\u6233 / Check timestamp\n            - errors (Optional[Dict[str, str]]): \u9519\u8bef\u4fe1\u606f\uff08\u5982\u679c\u6709\uff09 / Error messages if any\n\n    Example:\n        ```python\n        import requests\n\n        response = requests.get(\"http://localhost:8000/health\")\n        health_data = response.json()\n\n        if health_data[\"status\"] == \"healthy\":\n            print(\"\u6240\u6709\u670d\u52a1\u7ec4\u4ef6\u6b63\u5e38\u8fd0\u884c\")\n        else:\n            print(\"\u4ee5\u4e0b\u7ec4\u4ef6\u5b58\u5728\u95ee\u9898:\")\n            for component, status in health_data[\"components\"].items():\n                if status != \"healthy\":\n                    print(f\"  {component}: {health_data['errors'].get(component, 'Unknown error')}\")\n        ```\n\n    Note:\n        \u8be5\u7aef\u70b9\u7528\u4e8e\u76d1\u63a7\u7cfb\u7edf\u548c\u670d\u52a1\u53d1\u73b0\u3002\n        This endpoint is used for monitoring systems and service discovery.\n    \"\"\"\n</code></pre>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#32-fastapi-path-and-query-parameters","title":"3.2 FastAPI Path and Query Parameters","text":"<pre><code>@router.get(\n    \"/predictions/{match_id}\",\n    summary=\"\u83b7\u53d6\u6bd4\u8d5b\u9884\u6d4b\u7ed3\u679c / Get Match Prediction\",\n    description=\"\u83b7\u53d6\u6307\u5b9a\u6bd4\u8d5b\u7684\u9884\u6d4b\u7ed3\u679c\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u5b9e\u65f6\u751f\u6210 / Get prediction result for specified match, generate in real-time if not exists\"\n)\nasync def get_match_prediction(\n    match_id: int = Path(\n        ...,\n        description=\"\u6bd4\u8d5b\u552f\u4e00\u6807\u8bc6\u7b26 / Unique match identifier\",\n        ge=1,\n        example=12345\n    ),\n    force_predict: bool = Query(\n        default=False,\n        description=\"\u662f\u5426\u5f3a\u5236\u91cd\u65b0\u9884\u6d4b / Whether to force re-prediction\"\n    ),\n    session: AsyncSession = Depends(get_async_session)\n) -&gt; Dict[str, Any]:\n    \"\"\"\n    \u83b7\u53d6\u6307\u5b9a\u6bd4\u8d5b\u7684\u9884\u6d4b\u7ed3\u679c / Get Prediction for Specified Match\n\n    \u8be5\u7aef\u70b9\u9996\u5148\u68c0\u67e5\u6570\u636e\u5e93\u4e2d\u662f\u5426\u5b58\u5728\u8be5\u6bd4\u8d5b\u7684\u7f13\u5b58\u9884\u6d4b\u7ed3\u679c\u3002\n    \u5982\u679c\u5b58\u5728\u4e14\u672a\u8bbe\u7f6eforce_predict\u53c2\u6570\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u7f13\u5b58\u7ed3\u679c\u3002\n    \u5426\u5219\uff0c\u5b9e\u65f6\u751f\u6210\u65b0\u7684\u9884\u6d4b\u7ed3\u679c\u5e76\u5b58\u50a8\u5230\u6570\u636e\u5e93\u3002\n\n    This endpoint first checks if there's a cached prediction result for the match in the database.\n    If it exists and force_predict is not set, it returns the cached result directly.\n    Otherwise, it generates a new prediction in real-time and stores it in the database.\n\n    Args:\n        match_id (int): \u6bd4\u8d5b\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5fc5\u987b\u5927\u4e8e0 / Unique match identifier, must be greater than 0\n            Constraints:\n                - Minimum value: 1\n                - Example: 12345\n        force_predict (bool): \u662f\u5426\u5f3a\u5236\u91cd\u65b0\u9884\u6d4b\uff0c\u9ed8\u8ba4\u4e3aFalse / Whether to force re-prediction, defaults to False\n            If True, generates a new prediction even if cached result exists.\n        session (AsyncSession): \u6570\u636e\u5e93\u4f1a\u8bdd\uff0c\u7531\u4f9d\u8d56\u6ce8\u5165\u63d0\u4f9b / Database session, provided by dependency injection\n\n    Returns:\n        Dict[str, Any]: API\u54cd\u5e94\u5b57\u5178 / API response dictionary\n            - success (bool): \u8bf7\u6c42\u662f\u5426\u6210\u529f / Whether request was successful\n            - data (Dict): \u9884\u6d4b\u6570\u636e / Prediction data\n                - match_id (int): \u6bd4\u8d5bID / Match ID\n                - match_info (Dict): \u6bd4\u8d5b\u4fe1\u606f / Match information\n                - prediction (Dict): \u9884\u6d4b\u7ed3\u679c / Prediction result\n\n    Raises:\n        HTTPException:\n            - 404: \u5f53\u6bd4\u8d5b\u4e0d\u5b58\u5728\u65f6 / When match does not exist\n            - 500: \u5f53\u9884\u6d4b\u8fc7\u7a0b\u53d1\u751f\u9519\u8bef\u65f6 / When prediction process fails\n\n    Example:\n        ```python\n        import requests\n\n        # \u83b7\u53d6\u6bd4\u8d5b\u9884\u6d4b\n        response = requests.get(\"http://localhost:8000/api/v1/predictions/12345\")\n        if response.status_code == 200:\n            data = response.json()\n            prediction = data[\"data\"][\"prediction\"]\n            print(f\"\u9884\u6d4b\u7ed3\u679c: {prediction['predicted_result']}\")\n            print(f\"\u7f6e\u4fe1\u5ea6: {prediction['confidence_score']:.2f}\")\n\n        # \u5f3a\u5236\u91cd\u65b0\u9884\u6d4b\n        response = requests.get(\"http://localhost:8000/api/v1/predictions/12345?force_predict=true\")\n        ```\n\n    Note:\n        \u9884\u6d4b\u7ed3\u679c\u4f1a\u81ea\u52a8\u7f13\u5b58\u5230\u6570\u636e\u5e93\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002\n        Prediction results are automatically cached in the database to improve performance.\n    \"\"\"\n</code></pre>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#4-documentation-best-practices","title":"4. Documentation Best Practices","text":""},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#41-consistency-guidelines","title":"4.1 Consistency Guidelines","text":"<ol> <li>Language Pairing: Always provide both Chinese and English documentation</li> <li>Structure Consistency: Follow the same structure for all docstrings</li> <li>Terminology Consistency: Use consistent terminology throughout the codebase</li> <li>Formatting Consistency: Maintain consistent formatting and indentation</li> </ol>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#42-content-guidelines","title":"4.2 Content Guidelines","text":"<ol> <li>Clarity: Write clear, concise descriptions</li> <li>Completeness: Include all relevant information</li> <li>Accuracy: Ensure technical details are accurate</li> <li>Examples: Provide practical usage examples</li> <li>Context: Explain the purpose and context of components</li> </ol>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#43-maintenance-guidelines","title":"4.3 Maintenance Guidelines","text":"<ol> <li>Update with Code: Update documentation when modifying code</li> <li>Review Regularly: Periodically review documentation for accuracy</li> <li>Version Control: Keep documentation in version control with code</li> <li>Automated Checks: Use tools to check documentation quality</li> </ol>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#5-documentation-tools-and-automation","title":"5. Documentation Tools and Automation","text":""},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#51-sphinx-configuration","title":"5.1 Sphinx Configuration","text":"<pre><code># docs/conf.py\nextensions = [\n    'sphinx.ext.autodoc',\n    'sphinx.ext.viewcode',\n    'sphinx.ext.napoleon',\n    'sphinx.ext.intersphinx',\n]\n\n# \u652f\u6301Google\u548cNumPy\u98ce\u683c\u7684docstrings\nnapoleon_google_docstring = True\nnapoleon_numpy_docstring = True\nnapoleon_include_init_with_doc = False\nnapoleon_include_private_with_doc = False\n</code></pre>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#52-automated-documentation-generation","title":"5.2 Automated Documentation Generation","text":"<pre><code># Makefile\n.PHONY: docs\ndocs:\n sphinx-apidoc -o docs/api src/\n cd docs &amp;&amp; make html\n @echo \"Documentation generated in docs/_build/html/\"\n</code></pre>"},{"location":"reference/COMPREHENSIVE_API_DOCUMENTATION_STYLE_GUIDE/#6-documentation-review-process","title":"6. Documentation Review Process","text":"<ol> <li>Peer Review: Have team members review documentation</li> <li>Technical Accuracy: Verify technical details are correct</li> <li>Language Quality: Check for grammar and clarity</li> <li>Completeness: Ensure all public APIs are documented</li> <li>Consistency: Verify consistent style and formatting</li> </ol>"},{"location":"reference/DATABASE_SCHEMA/","title":"\u6570\u636e\u5e93\u67b6\u6784\u6587\u6863","text":""},{"location":"reference/DATABASE_SCHEMA/#_2","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u91c7\u7528PostgreSQL\u4f5c\u4e3a\u4e3b\u6570\u636e\u5e93\uff0c\u4f7f\u7528SQLAlchemy 2.0\u4f5c\u4e3aORM\u6846\u67b6\u3002\u6570\u636e\u5e93\u8bbe\u8ba1\u9075\u5faa\u9886\u57df\u9a71\u52a8\u8bbe\u8ba1\uff08DDD\uff09\u539f\u5219\uff0c\u652f\u6301\u5b8c\u6574\u7684\u8db3\u7403\u9884\u6d4b\u4e1a\u52a1\u6d41\u7a0b\u3002</p>"},{"location":"reference/DATABASE_SCHEMA/#_3","title":"\ud83c\udfd7\ufe0f \u6570\u636e\u5e93\u67b6\u6784","text":""},{"location":"reference/DATABASE_SCHEMA/#_4","title":"\u6838\u5fc3\u8bbe\u8ba1\u539f\u5219","text":"<ul> <li>\u9886\u57df\u9a71\u52a8: \u6309\u4e1a\u52a1\u9886\u57df\u5212\u5206\u8868\u7ed3\u6784</li> <li>\u65f6\u95f4\u6233: \u6240\u6709\u4e1a\u52a1\u8868\u5305\u542b\u521b\u5efa\u65f6\u95f4\u548c\u66f4\u65b0\u65f6\u95f4</li> <li>\u5916\u952e\u7ea6\u675f: \u786e\u4fdd\u6570\u636e\u5b8c\u6574\u6027</li> <li>\u7d22\u5f15\u4f18\u5316: \u9488\u5bf9\u67e5\u8be2\u6027\u80fd\u4f18\u5316</li> <li>\u5ba1\u8ba1\u8ffd\u8e2a: \u5b8c\u6574\u7684\u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55</li> </ul>"},{"location":"reference/DATABASE_SCHEMA/#_5","title":"\u6280\u672f\u6808","text":"<ul> <li>\u6570\u636e\u5e93: PostgreSQL 14+</li> <li>ORM: SQLAlchemy 2.0 (\u5f02\u6b65\u652f\u6301)</li> <li>\u8fc1\u79fb: Alembic</li> <li>\u8fde\u63a5\u6c60: asyncpg</li> <li>\u5907\u4efd: pg_dump + WAL\u5f52\u6863</li> </ul>"},{"location":"reference/DATABASE_SCHEMA/#_6","title":"\ud83d\udcca \u6570\u636e\u8868\u7ed3\u6784","text":""},{"location":"reference/DATABASE_SCHEMA/#1","title":"1. \u6838\u5fc3\u4e1a\u52a1\u8868","text":""},{"location":"reference/DATABASE_SCHEMA/#11-leagues","title":"1.1 \u8054\u8d5b\u8868 (leagues)","text":"<pre><code>CREATE TABLE leagues (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(100) NOT NULL COMMENT '\u8054\u8d5b\u540d\u79f0',\n    country VARCHAR(50) NOT NULL COMMENT '\u56fd\u5bb6',\n    season VARCHAR(20) NOT NULL COMMENT '\u8d5b\u5b63',\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- \u7d22\u5f15\nCREATE INDEX idx_leagues_country_season ON leagues(country, season);\nCREATE INDEX idx_leagues_name ON leagues(name);\n</code></pre> <p>\u5b57\u6bb5\u8bf4\u660e: - <code>id</code>: \u4e3b\u952e\uff0c\u81ea\u589e - <code>name</code>: \u8054\u8d5b\u540d\u79f0\uff08\u5982\uff1a\u82f1\u8d85\u3001\u897f\u7532\u3001\u5fb7\u7532\uff09 - <code>country</code>: \u8054\u8d5b\u6240\u5c5e\u56fd\u5bb6 - <code>season</code>: \u8d5b\u5b63\uff08\u5982\uff1a2024-25\uff09</p>"},{"location":"reference/DATABASE_SCHEMA/#12-teams","title":"1.2 \u7403\u961f\u8868 (teams)","text":"<pre><code>CREATE TABLE teams (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(100) NOT NULL COMMENT '\u7403\u961f\u540d\u79f0',\n    short_name VARCHAR(50) COMMENT '\u7b80\u79f0',\n    logo_url VARCHAR(255) COMMENT '\u961f\u5fbdURL',\n    founded_year INTEGER COMMENT '\u6210\u7acb\u5e74\u4efd',\n    home_venue VARCHAR(100) COMMENT '\u4e3b\u573a',\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- \u7d22\u5f15\nCREATE INDEX idx_teams_name ON teams(name);\nCREATE INDEX idx_teams_founded_year ON teams(founded_year);\n</code></pre> <p>\u5b57\u6bb5\u8bf4\u660e: - <code>id</code>: \u4e3b\u952e\uff0c\u81ea\u589e - <code>name</code>: \u7403\u961f\u5168\u79f0 - <code>short_name</code>: \u7403\u961f\u7b80\u79f0 - <code>logo_url</code>: \u7403\u961f\u5fbd\u6807URL - <code>founded_year</code>: \u6210\u7acb\u5e74\u4efd - <code>home_venue</code>: \u4e3b\u573a\u7403\u573a\u540d\u79f0</p>"},{"location":"reference/DATABASE_SCHEMA/#13-matches","title":"1.3 \u6bd4\u8d5b\u8868 (matches)","text":"<pre><code>CREATE TYPE match_status AS ENUM ('scheduled', 'live', 'finished', 'cancelled');\nCREATE TYPE match_result AS ENUM ('home_win', 'away_win', 'draw');\n\nCREATE TABLE matches (\n    id SERIAL PRIMARY KEY,\n    home_team_id INTEGER NOT NULL REFERENCES teams(id) ON DELETE CASCADE,\n    away_team_id INTEGER NOT NULL REFERENCES teams(id) ON DELETE CASCADE,\n    league_id INTEGER NOT NULL REFERENCES leagues(id) ON DELETE CASCADE,\n    season VARCHAR(20) NOT NULL,\n    match_date TIMESTAMP NOT NULL,\n    status match_status DEFAULT 'scheduled',\n    home_score INTEGER COMMENT '\u4e3b\u961f\u5f97\u5206',\n    away_score INTEGER COMMENT '\u5ba2\u961f\u5f97\u5206',\n    result match_result COMMENT '\u6bd4\u8d5b\u7ed3\u679c',\n    venue VARCHAR(100) COMMENT '\u6bd4\u8d5b\u573a\u5730',\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\n    -- \u7ea6\u675f\n    CONSTRAINT chk_different_teams CHECK (home_team_id != away_team_id),\n    CONSTRAINT chk_scores CHECK (\n        (status = 'finished' AND home_score IS NOT NULL AND away_score IS NOT NULL) OR\n        (status != 'finished')\n    )\n);\n\n-- \u7d22\u5f15\nCREATE INDEX idx_matches_date_status ON matches(match_date, status);\nCREATE INDEX idx_matches_teams ON matches(home_team_id, away_team_id);\nCREATE INDEX idx_matches_league_season ON matches(league_id, season);\nCREATE INDEX idx_matches_result ON matches(result) WHERE result IS NOT NULL;\n</code></pre> <p>\u5b57\u6bb5\u8bf4\u660e: - <code>id</code>: \u4e3b\u952e\uff0c\u81ea\u589e - <code>home_team_id</code>: \u4e3b\u961fID\uff08\u5916\u952e\uff09 - <code>away_team_id</code>: \u5ba2\u961fID\uff08\u5916\u952e\uff09 - <code>league_id</code>: \u8054\u8d5bID\uff08\u5916\u952e\uff09 - <code>season</code>: \u8d5b\u5b63 - <code>match_date</code>: \u6bd4\u8d5b\u65f6\u95f4 - <code>status</code>: \u6bd4\u8d5b\u72b6\u6001\uff08scheduled/live/finished/cancelled\uff09 - <code>home_score/away_score</code>: \u6bd4\u5206 - <code>result</code>: \u6bd4\u8d5b\u7ed3\u679c\uff08home_win/away_win/draw\uff09 - <code>venue</code>: \u6bd4\u8d5b\u573a\u5730</p>"},{"location":"reference/DATABASE_SCHEMA/#14-odds","title":"1.4 \u8d54\u7387\u8868 (odds)","text":"<pre><code>CREATE TYPE market_type AS ENUM ('match_winner', 'over_under', 'handicap');\n\nCREATE TABLE odds (\n    id SERIAL PRIMARY KEY,\n    match_id INTEGER NOT NULL REFERENCES matches(id) ON DELETE CASCADE,\n    bookmaker VARCHAR(50) NOT NULL COMMENT '\u535a\u5f69\u516c\u53f8',\n    market_type market_type NOT NULL,\n    home_odds DECIMAL(10,4) COMMENT '\u4e3b\u80dc\u8d54\u7387',\n    draw_odds DECIMAL(10,4) COMMENT '\u5e73\u5c40\u8d54\u7387',\n    away_odds DECIMAL(10,4) COMMENT '\u5ba2\u80dc\u8d54\u7387',\n    over_under_line DECIMAL(4,2) COMMENT '\u5927\u5c0f\u7403\u76d8\u53e3',\n    over_odds DECIMAL(10,4) COMMENT '\u5927\u7403\u8d54\u7387',\n    under_odds DECIMAL(10,4) COMMENT '\u5c0f\u7403\u8d54\u7387',\n    handicap_line DECIMAL(4,2) COMMENT '\u8ba9\u7403\u76d8\u53e3',\n    handicap_home_odds DECIMAL(10,4) COMMENT '\u4e3b\u961f\u8ba9\u7403\u8d54\u7387',\n    handicap_away_odds DECIMAL(10,4) COMMENT '\u5ba2\u961f\u53d7\u8ba9\u8d54\u7387',\n    odds_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '\u8d54\u7387\u65f6\u95f4',\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- \u7d22\u5f15\nCREATE INDEX idx_odds_match_time ON odds(match_id, odds_time);\nCREATE INDEX idx_odds_bookmaker ON odds(bookmaker);\nCREATE INDEX idx_odds_market ON odds(market_type);\n</code></pre> <p>\u5b57\u6bb5\u8bf4\u660e: - <code>id</code>: \u4e3b\u952e\uff0c\u81ea\u589e - <code>match_id</code>: \u6bd4\u8d5bID\uff08\u5916\u952e\uff09 - <code>bookmaker</code>: \u535a\u5f69\u516c\u53f8\u540d\u79f0 - <code>market_type</code>: \u5e02\u573a\u7c7b\u578b - <code>home_odds/draw_odds/away_odds</code>: \u80dc\u5e73\u8d1f\u8d54\u7387 - <code>over_under_line</code>: \u5927\u5c0f\u7403\u76d8\u53e3 - <code>over_odds/under_odds</code>: \u5927\u5c0f\u7403\u8d54\u7387 - <code>handicap_line</code>: \u8ba9\u7403\u76d8\u53e3 - <code>handicap_home_odds/handicap_away_odds</code>: \u8ba9\u7403\u8d54\u7387</p>"},{"location":"reference/DATABASE_SCHEMA/#15-predictions","title":"1.5 \u9884\u6d4b\u8868 (predictions)","text":"<pre><code>CREATE TYPE predicted_result AS ENUM ('home_win', 'away_win', 'draw');\n\nCREATE TABLE predictions (\n    id SERIAL PRIMARY KEY,\n    match_id INTEGER NOT NULL REFERENCES matches(id) ON DELETE CASCADE,\n    model_version VARCHAR(20) NOT NULL COMMENT '\u6a21\u578b\u7248\u672c',\n    predicted_result predicted_result NOT NULL,\n    confidence DECIMAL(5,4) NOT NULL CHECK (confidence &gt;= 0 AND confidence &lt;= 1),\n    home_win_prob DECIMAL(5,4) NOT NULL CHECK (home_win_prob &gt;= 0 AND home_win_prob &lt;= 1),\n    draw_prob DECIMAL(5,4) NOT NULL CHECK (draw_prob &gt;= 0 AND draw_prob &lt;= 1),\n    away_win_prob DECIMAL(5,4) NOT NULL CHECK (away_win_prob &gt;= 0 AND away_win_prob &lt;= 1),\n    features_json JSONB COMMENT '\u7279\u5f81\u6570\u636eJSON',\n    prediction_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    actual_result predicted_result COMMENT '\u5b9e\u9645\u7ed3\u679c',\n    is_correct BOOLEAN COMMENT '\u9884\u6d4b\u662f\u5426\u6b63\u786e',\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\n    -- \u7ea6\u675f\n    CONSTRAINT chk_prob_sum CHECK (\n        home_win_prob + draw_prob + away_win_prob = 1.0\n    )\n);\n\n-- \u7d22\u5f15\nCREATE INDEX idx_predictions_match_time ON predictions(match_id, prediction_time);\nCREATE INDEX idx_predictions_model ON predictions(model_version);\nCREATE INDEX idx_predictions_correct ON predictions(is_correct) WHERE is_correct IS NOT NULL;\nCREATE INDEX idx_predictions_features ON predictions USING GIN(features_json);\n</code></pre> <p>\u5b57\u6bb5\u8bf4\u660e: - <code>id</code>: \u4e3b\u952e\uff0c\u81ea\u589e - <code>match_id</code>: \u6bd4\u8d5bID\uff08\u5916\u952e\uff09 - <code>model_version</code>: \u9884\u6d4b\u6a21\u578b\u7248\u672c - <code>predicted_result</code>: \u9884\u6d4b\u7ed3\u679c - <code>confidence</code>: \u9884\u6d4b\u7f6e\u4fe1\u5ea6 - <code>home_win_prob/draw_prob/away_win_prob</code>: \u5404\u7ed3\u679c\u6982\u7387 - <code>features_json</code>: \u7279\u5f81\u6570\u636e\uff08JSON\u683c\u5f0f\uff09 - <code>prediction_time</code>: \u9884\u6d4b\u65f6\u95f4 - <code>actual_result</code>: \u5b9e\u9645\u7ed3\u679c\uff08\u8d5b\u540e\u586b\u5199\uff09 - <code>is_correct</code>: \u9884\u6d4b\u662f\u5426\u6b63\u786e</p>"},{"location":"reference/DATABASE_SCHEMA/#16-features","title":"1.6 \u7279\u5f81\u8868 (features)","text":"<pre><code>CREATE TYPE team_type AS ENUM ('home', 'away');\n\nCREATE TABLE features (\n    id SERIAL PRIMARY KEY,\n    match_id INTEGER NOT NULL REFERENCES matches(id) ON DELETE CASCADE,\n    team_id INTEGER NOT NULL REFERENCES teams(id) ON DELETE CASCADE,\n    team_type team_type NOT NULL,\n    feature_name VARCHAR(100) NOT NULL,\n    feature_value DECIMAL(15,6) NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n\n    -- \u552f\u4e00\u7ea6\u675f\n    UNIQUE(match_id, team_id, team_type, feature_name)\n);\n\n-- \u7d22\u5f15\nCREATE INDEX idx_features_match_team ON features(match_id, team_id);\nCREATE INDEX idx_features_name ON features(feature_name);\nCREATE INDEX idx_features_value ON features(feature_value);\n</code></pre> <p>\u5b57\u6bb5\u8bf4\u660e: - <code>id</code>: \u4e3b\u952e\uff0c\u81ea\u589e - <code>match_id</code>: \u6bd4\u8d5bID\uff08\u5916\u952e\uff09 - <code>team_id</code>: \u7403\u961fID\uff08\u5916\u952e\uff09 - <code>team_type</code>: \u7403\u961f\u7c7b\u578b\uff08\u4e3b\u961f/\u5ba2\u961f\uff09 - <code>feature_name</code>: \u7279\u5f81\u540d\u79f0 - <code>feature_value</code>: \u7279\u5f81\u503c</p>"},{"location":"reference/DATABASE_SCHEMA/#2","title":"2. \u7528\u6237\u7ba1\u7406\u8868","text":""},{"location":"reference/DATABASE_SCHEMA/#21-users","title":"2.1 \u7528\u6237\u8868 (users)","text":"<pre><code>CREATE TABLE users (\n    id SERIAL PRIMARY KEY,\n    username VARCHAR(50) UNIQUE NOT NULL,\n    email VARCHAR(100) UNIQUE NOT NULL,\n    password_hash VARCHAR(255) NOT NULL,\n    full_name VARCHAR(100),\n    is_active BOOLEAN DEFAULT TRUE,\n    is_admin BOOLEAN DEFAULT FALSE,\n    last_login TIMESTAMP,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- \u7d22\u5f15\nCREATE INDEX idx_users_username ON users(username);\nCREATE INDEX idx_users_email ON users(email);\nCREATE INDEX idx_users_active ON users(is_active);\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#3","title":"3. \u6570\u636e\u7ba1\u9053\u8868","text":""},{"location":"reference/DATABASE_SCHEMA/#31-data_collection_logs","title":"3.1 \u6570\u636e\u6536\u96c6\u65e5\u5fd7\u8868 (data_collection_logs)","text":"<pre><code>CREATE TYPE collection_status AS ENUM ('pending', 'running', 'completed', 'failed');\nCREATE TYPE collection_type AS ENUM ('matches', 'odds', 'results', 'features');\n\nCREATE TABLE data_collection_logs (\n    id SERIAL PRIMARY KEY,\n    collection_type collection_type NOT NULL,\n    source VARCHAR(100) NOT NULL COMMENT '\u6570\u636e\u6e90',\n    status collection_status DEFAULT 'pending',\n    start_time TIMESTAMP,\n    end_time TIMESTAMP,\n    records_processed INTEGER DEFAULT 0,\n    records_failed INTEGER DEFAULT 0,\n    error_message TEXT,\n    metadata_json JSONB COMMENT '\u5143\u6570\u636eJSON',\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- \u7d22\u5f15\nCREATE INDEX idx_collection_logs_type_status ON data_collection_logs(collection_type, status);\nCREATE INDEX idx_collection_logs_time ON data_collection_logs(start_time);\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#32","title":"3.2 \u539f\u59cb\u6570\u636e\u8868","text":"<pre><code>-- \u539f\u59cb\u6bd4\u8d5b\u6570\u636e\nCREATE TABLE raw_match_data (\n    id SERIAL PRIMARY KEY,\n    source VARCHAR(100) NOT NULL,\n    source_id VARCHAR(100) NOT NULL,\n    raw_data JSONB NOT NULL,\n    processed_at TIMESTAMP,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    UNIQUE(source, source_id)\n);\n\n-- \u539f\u59cb\u8d54\u7387\u6570\u636e\nCREATE TABLE raw_odds_data (\n    id SERIAL PRIMARY KEY,\n    source VARCHAR(100) NOT NULL,\n    source_id VARCHAR(100) NOT NULL,\n    raw_data JSONB NOT NULL,\n    processed_at TIMESTAMP,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    UNIQUE(source, source_id)\n);\n\n-- \u539f\u59cb\u6bd4\u5206\u6570\u636e\nCREATE TABLE raw_scores_data (\n    id SERIAL PRIMARY KEY,\n    source VARCHAR(100) NOT NULL,\n    source_id VARCHAR(100) NOT NULL,\n    raw_data JSONB NOT NULL,\n    processed_at TIMESTAMP,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    UNIQUE(source, source_id)\n);\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#4","title":"4. \u5ba1\u8ba1\u65e5\u5fd7\u8868","text":""},{"location":"reference/DATABASE_SCHEMA/#41-audit_logs","title":"4.1 \u5ba1\u8ba1\u65e5\u5fd7\u8868 (audit_logs)","text":"<pre><code>CREATE TYPE audit_action AS ENUM ('create', 'read', 'update', 'delete', 'login', 'logout');\nCREATE TYPE audit_severity AS ENUM ('low', 'medium', 'high', 'critical');\n\nCREATE TABLE audit_logs (\n    id SERIAL PRIMARY KEY,\n    user_id INTEGER REFERENCES users(id) ON DELETE SET NULL,\n    action audit_action NOT NULL,\n    table_name VARCHAR(50),\n    record_id INTEGER,\n    old_values JSONB,\n    new_values JSONB,\n    severity audit_severity DEFAULT 'low',\n    ip_address INET,\n    user_agent TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- \u7d22\u5f15\nCREATE INDEX idx_audit_logs_user_time ON audit_logs(user_id, created_at);\nCREATE INDEX idx_audit_logs_action ON audit_logs(action);\nCREATE INDEX idx_audit_logs_table ON audit_logs(table_name);\nCREATE INDEX idx_audit_logs_severity ON audit_logs(severity);\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#_7","title":"\ud83d\udd0d \u6570\u636e\u5e93\u5173\u7cfb\u56fe","text":"<pre><code>erDiagram\n    leagues ||--o{ matches : \"has many\"\n    teams ||--o{ matches : \"home_team\"\n    teams ||--o{ matches : \"away_team\"\n    matches ||--o{ odds : \"has many\"\n    matches ||--o{ predictions : \"has many\"\n    matches ||--o{ features : \"has many\"\n    teams ||--o{ features : \"belongs to\"\n    users ||--o{ audit_logs : \"performs\"\n\n    leagues {\n        int id PK\n        string name\n        string country\n        string season\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    teams {\n        int id PK\n        string name\n        string short_name\n        string logo_url\n        int founded_year\n        string home_venue\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    matches {\n        int id PK\n        int home_team_id FK\n        int away_team_id FK\n        int league_id FK\n        string season\n        timestamp match_date\n        enum status\n        int home_score\n        int away_score\n        enum result\n        string venue\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    odds {\n        int id PK\n        int match_id FK\n        string bookmaker\n        enum market_type\n        decimal home_odds\n        decimal draw_odds\n        decimal away_odds\n        decimal over_under_line\n        decimal over_odds\n        decimal under_odds\n        timestamp odds_time\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    predictions {\n        int id PK\n        int match_id FK\n        string model_version\n        enum predicted_result\n        decimal confidence\n        decimal home_win_prob\n        decimal draw_prob\n        decimal away_win_prob\n        jsonb features_json\n        timestamp prediction_time\n        enum actual_result\n        boolean is_correct\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    features {\n        int id PK\n        int match_id FK\n        int team_id FK\n        enum team_type\n        string feature_name\n        decimal feature_value\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    users {\n        int id PK\n        string username UK\n        string email UK\n        string password_hash\n        string full_name\n        boolean is_active\n        boolean is_admin\n        timestamp last_login\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    audit_logs {\n        int id PK\n        int user_id FK\n        enum action\n        string table_name\n        int record_id\n        jsonb old_values\n        jsonb new_values\n        enum severity\n        inet ip_address\n        text user_agent\n        timestamp created_at\n    }\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#_8","title":"\ud83d\ude80 \u6027\u80fd\u4f18\u5316","text":""},{"location":"reference/DATABASE_SCHEMA/#_9","title":"\u7d22\u5f15\u7b56\u7565","text":"<ol> <li>\u4e3b\u952e\u7d22\u5f15: \u6240\u6709\u8868\u90fd\u6709\u81ea\u589e\u4e3b\u952e</li> <li>\u5916\u952e\u7d22\u5f15: \u6240\u6709\u5916\u952e\u5b57\u6bb5\u90fd\u5efa\u7acb\u7d22\u5f15</li> <li>\u67e5\u8be2\u7d22\u5f15: \u9488\u5bf9\u5e38\u7528\u67e5\u8be2\u6a21\u5f0f\u5efa\u7acb\u590d\u5408\u7d22\u5f15</li> <li>JSON\u7d22\u5f15: JSONB\u5b57\u6bb5\u4f7f\u7528GIN\u7d22\u5f15</li> </ol>"},{"location":"reference/DATABASE_SCHEMA/#_10","title":"\u5206\u533a\u7b56\u7565","text":"<pre><code>-- \u6309\u65f6\u95f4\u5206\u533a\u9884\u6d4b\u8868\uff08\u53ef\u9009\uff09\nCREATE TABLE predictions_2024 PARTITION OF predictions\nFOR VALUES FROM ('2024-01-01') TO ('2025-01-01');\n\n-- \u6309\u8d5b\u5b63\u5206\u533a\u6bd4\u8d5b\u8868\uff08\u53ef\u9009\uff09\nCREATE TABLE matches_2024_25 PARTITION OF matches\nFOR VALUES IN ('2024-25');\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#_11","title":"\u67e5\u8be2\u4f18\u5316","text":"<ol> <li>\u9884\u7f16\u8bd1\u8bed\u53e5: \u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2</li> <li>\u8fde\u63a5\u6c60: \u914d\u7f6e\u5408\u9002\u7684\u8fde\u63a5\u6c60\u5927\u5c0f</li> <li>\u6279\u91cf\u64cd\u4f5c: \u6279\u91cf\u63d2\u5165\u548c\u66f4\u65b0</li> <li>\u7f13\u5b58\u7b56\u7565: \u70ed\u70b9\u6570\u636eRedis\u7f13\u5b58</li> </ol>"},{"location":"reference/DATABASE_SCHEMA/#_12","title":"\ud83d\udd27 \u6570\u636e\u5e93\u7ef4\u62a4","text":""},{"location":"reference/DATABASE_SCHEMA/#_13","title":"\u5907\u4efd\u7b56\u7565","text":"<pre><code># \u5168\u91cf\u5907\u4efd\npg_dump -h localhost -U football_user -d football_prediction &gt; backup_$(date +%Y%m%d).sql\n\n# \u589e\u91cf\u5907\u4efd\uff08WAL\u5f52\u6863\uff09\narchive_command = 'cp %p /backup/wal/%f'\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#_14","title":"\u76d1\u63a7\u6307\u6807","text":"<ul> <li>\u8fde\u63a5\u6570\u4f7f\u7528\u7387</li> <li>\u67e5\u8be2\u54cd\u5e94\u65f6\u95f4</li> <li>\u9501\u7b49\u5f85\u7edf\u8ba1</li> <li>\u8868\u81a8\u80c0\u7387</li> <li>\u7d22\u5f15\u4f7f\u7528\u7387</li> </ul>"},{"location":"reference/DATABASE_SCHEMA/#_15","title":"\u6e05\u7406\u7b56\u7565","text":"<pre><code>-- \u6e05\u7406\u65e7\u5ba1\u8ba1\u65e5\u5fd7\uff08\u4fdd\u75591\u5e74\uff09\nDELETE FROM audit_logs WHERE created_at &lt; NOW() - INTERVAL '1 year';\n\n-- \u6e05\u7406\u65e7\u539f\u59cb\u6570\u636e\uff08\u4fdd\u75593\u4e2a\u6708\uff09\nDELETE FROM raw_match_data WHERE created_at &lt; NOW() - INTERVAL '3 months';\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#_16","title":"\ud83d\udd12 \u5b89\u5168\u914d\u7f6e","text":""},{"location":"reference/DATABASE_SCHEMA/#_17","title":"\u6743\u9650\u63a7\u5236","text":"<pre><code>-- \u521b\u5efa\u5e94\u7528\u7528\u6237\nCREATE USER football_app WITH PASSWORD 'secure_password';\n\n-- \u521b\u5efa\u53ea\u8bfb\u7528\u6237\nCREATE USER football_reader WITH PASSWORD 'reader_password';\n\n-- \u6388\u6743\nGRANT CONNECT ON DATABASE football_prediction TO football_app;\nGRANT USAGE ON SCHEMA public TO football_app;\nGRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO football_app;\n\nGRANT CONNECT ON DATABASE football_prediction TO football_reader;\nGRANT USAGE ON SCHEMA public TO football_reader;\nGRANT SELECT ON ALL TABLES IN SCHEMA public TO football_reader;\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#_18","title":"\u6570\u636e\u52a0\u5bc6","text":"<ul> <li>\u4f20\u8f93\u52a0\u5bc6: SSL/TLS\u8fde\u63a5</li> <li>\u9759\u6001\u52a0\u5bc6: \u900f\u660e\u6570\u636e\u52a0\u5bc6\uff08TDE\uff09</li> <li>\u5b57\u6bb5\u52a0\u5bc6: \u654f\u611f\u5b57\u6bb5\u52a0\u5bc6\u5b58\u50a8</li> </ul>"},{"location":"reference/DATABASE_SCHEMA/#_19","title":"\ud83d\udccb \u8fc1\u79fb\u7ba1\u7406","text":""},{"location":"reference/DATABASE_SCHEMA/#alembic","title":"Alembic\u914d\u7f6e","text":"<pre><code># alembic/env.py\nfrom sqlalchemy import create_engine\nfrom src.database.base import Base\n\ntarget_metadata = Base.metadata\n\ndef run_migrations_online():\n    connectable = create_engine(\n        DATABASE_URL,\n        pool_pre_ping=True,\n        pool_recycle=300\n    )\n\n    with connectable.connect() as connection:\n        context.configure(\n            connection=connection,\n            target_metadata=target_metadata\n        )\n\n        with context.begin_transaction():\n            context.run_migrations()\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#_20","title":"\u8fc1\u79fb\u5386\u53f2","text":"\u7248\u672c\u53f7 \u65e5\u671f \u63cf\u8ff0 \u72b6\u6001 <code>d56c8d0d5aa0</code> 2025-09-07 \u521d\u59cb\u6570\u636e\u5e93\u67b6\u6784 \u2705 \u5df2\u5e94\u7528 <code>002_add_raw_scores_data</code> 2025-09-08 \u6dfb\u52a0\u539f\u59cb\u8bc4\u5206\u6570\u636e\u548cJSONB\u5347\u7ea7 \u2705 \u5df2\u5e94\u7528 <code>004_configure_database_permissions</code> 2025-09-10 \u914d\u7f6e\u6570\u636e\u5e93\u6743\u9650 \u2705 \u5df2\u5e94\u7528 <code>005_create_audit_logs_table</code> 2025-09-12 \u521b\u5efa\u5ba1\u8ba1\u65e5\u5fd7\u8868 \u2705 \u5df2\u5e94\u7528 <code>006_add_missing_database_indexes</code> 2025-09-15 \u6dfb\u52a0\u7f3a\u5931\u7684\u6570\u636e\u5e93\u7d22\u5f15 \u2705 \u5df2\u5e94\u7528 <code>007_improve_phase3_implementations</code> 2025-09-18 \u6539\u8fdbPhase3\u5b9e\u73b0 \u2705 \u5df2\u5e94\u7528 <code>c1d8ae5075f0_add_jsonb_sqlite_compatibility</code> 2025-09-20 \u6dfb\u52a0JSONB SQLite\u517c\u5bb9\u6027 \u2705 \u5df2\u5e94\u7528 <code>a20f91c49306_add_business_constraints</code> 2025-09-22 \u6dfb\u52a0\u4e1a\u52a1\u7ea6\u675f \u2705 \u5df2\u5e94\u7528 <code>09d03cebf664_implement_partitioned_tables</code> 2025-09-25 \u5b9e\u73b0\u5206\u533a\u8868\u548c\u7d22\u5f15 \u2705 \u5df2\u5e94\u7528 <code>d3bf28af22ff_add_performance_critical_indexes</code> 2025-09-28 \u6dfb\u52a0\u6027\u80fd\u5173\u952e\u7d22\u5f15 \u2705 \u5df2\u5e94\u7528 <code>d6d814cc1078_database_performance_optimization</code> 2025-10-01 \u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316 \u2705 \u5df2\u5e94\u7528 <code>d82ea26f05d0_add_mlops_support_to_predictions_table</code> 2025-10-05 \u4e3a\u9884\u6d4b\u8868\u6dfb\u52a0MLOps\u652f\u6301 \u2705 \u5df2\u5e94\u7528 <code>f48d412852cc_add_data_collection_logs_and_bronze_layer</code> 2025-10-10 \u6dfb\u52a0\u6570\u636e\u6536\u96c6\u65e5\u5fd7\u548cBronze\u5c42\u8868 \u2705 \u5df2\u5e94\u7528 <code>9ac2aff86228_merge_multiple_migration_heads</code> 2025-10-15 \u5408\u5e76\u591a\u4e2a\u8fc1\u79fb\u5206\u652f \u2705 \u5df2\u5e94\u7528 <code>9de9a8b8aa92_merge_remaining_heads</code> 2025-10-20 \u5408\u5e76\u5269\u4f59\u5206\u652f \u2705 \u5df2\u5e94\u7528 <p>\u7248\u672c\u8bf4\u660e: - \u521d\u59cb\u67b6\u6784 (v1.0): \u5305\u542b\u6838\u5fc3\u4e1a\u52a1\u8868\uff08\u8054\u8d5b\u3001\u7403\u961f\u3001\u6bd4\u8d5b\u3001\u8d54\u7387\u3001\u9884\u6d4b\uff09 - \u6570\u636e\u589e\u5f3a (v1.1): \u6dfb\u52a0JSONB\u652f\u6301\u548c\u539f\u59cb\u6570\u636e\u5b58\u50a8 - \u6027\u80fd\u4f18\u5316 (v1.2): \u6dfb\u52a0\u5173\u952e\u7d22\u5f15\u548c\u5206\u533a\u8868\u652f\u6301 - MLOps\u96c6\u6210 (v1.3): \u6dfb\u52a0\u673a\u5668\u5b66\u4e60\u8fd0\u7ef4\u652f\u6301 - \u6570\u636e\u7ba1\u9053 (v1.4): \u5b8c\u5584\u6570\u636e\u6536\u96c6\u548c\u5ba1\u8ba1\u529f\u80fd</p>"},{"location":"reference/DATABASE_SCHEMA/#_21","title":"\u8fc1\u79fb\u547d\u4ee4","text":"<pre><code># \u521b\u5efa\u65b0\u8fc1\u79fb\nalembic revision --autogenerate -m \"Add new feature\"\n\n# \u5e94\u7528\u8fc1\u79fb\nalembic upgrade head\n\n# \u56de\u6eda\u8fc1\u79fb\nalembic downgrade -1\n\n# \u67e5\u770b\u5f53\u524d\u7248\u672c\nalembic current\n\n# \u67e5\u770b\u8fc1\u79fb\u5386\u53f2\nalembic history\n\n# \u68c0\u67e5\u672a\u5e94\u7528\u7684\u8fc1\u79fb\nalembic heads\n</code></pre>"},{"location":"reference/DATABASE_SCHEMA/#_22","title":"\ud83d\udcca \u76f8\u5173\u6587\u6863","text":""},{"location":"reference/DATABASE_SCHEMA/#_23","title":"\ud83d\udcda \u6838\u5fc3\u6587\u6863","text":"<ul> <li>\u7cfb\u7edf\u67b6\u6784\u6587\u6863 - \u4e86\u89e3\u6574\u4f53\u7cfb\u7edf\u8bbe\u8ba1</li> <li>\u5f00\u53d1\u6307\u5357 - \u5f00\u53d1\u73af\u5883\u642d\u5efa\u548c\u89c4\u8303</li> <li>\u6570\u636e\u91c7\u96c6\u914d\u7f6e\u6307\u5357 - \u6570\u636e\u91c7\u96c6\u548c\u5904\u7406\u6d41\u7a0b</li> <li>\u673a\u5668\u5b66\u4e60\u6a21\u578b\u6307\u5357 - ML\u6a21\u578b\u8bbe\u8ba1\u548c\u8bad\u7ec3</li> <li>\u76d1\u63a7\u7cfb\u7edf\u6307\u5357 - \u7cfb\u7edf\u76d1\u63a7\u548c\u544a\u8b66</li> <li>API\u6587\u6863 - REST API\u63a5\u53e3\u8bf4\u660e</li> </ul>"},{"location":"reference/DATABASE_SCHEMA/#_24","title":"\ud83d\udee0\ufe0f \u8fd0\u7ef4\u76f8\u5173","text":"<ul> <li>\u90e8\u7f72\u6307\u5357 - \u751f\u4ea7\u73af\u5883\u90e8\u7f72</li> <li>\u8fd0\u7ef4\u624b\u518c - \u8fd0\u7ef4\u64cd\u4f5c\u6307\u5357</li> <li>\u5b89\u5168\u914d\u7f6e - \u5b89\u5168\u914d\u7f6e\u548c\u4fee\u590d</li> </ul>"},{"location":"reference/DATABASE_SCHEMA/#_25","title":"\ud83e\uddea \u6d4b\u8bd5\u76f8\u5173","text":"<ul> <li>\u6d4b\u8bd5\u7b56\u7565\u6587\u6863 - \u6d4b\u8bd5\u7b56\u7565\u548c\u65b9\u6cd5</li> <li>\u6d4b\u8bd5\u7528\u4f8b\u793a\u4f8b - \u6d4b\u8bd5\u7528\u4f8b\u7f16\u5199\u6307\u5357</li> </ul>"},{"location":"reference/DATABASE_SCHEMA/#_26","title":"\ud83d\udccb \u6587\u6863\u4fe1\u606f","text":"<ul> <li>\u6570\u636e\u5e93\u7248\u672c: PostgreSQL 14+</li> <li>\u67b6\u6784\u7248\u672c: v1.4 (MLOps\u96c6\u6210)</li> <li>ORM\u6846\u67b6: SQLAlchemy 2.0</li> <li>\u8fc1\u79fb\u7cfb\u7edf: Alembic</li> <li>\u6700\u540e\u66f4\u65b0: 2025-10-23</li> <li>\u7ef4\u62a4\u56e2\u961f: \u6570\u636e\u5e93\u56e2\u961f</li> <li>\u5ba1\u6838\u72b6\u6001: \u2705 \u5df2\u5ba1\u6838</li> </ul> <p>\u7248\u672c\u5386\u53f2: - v1.0 (2025-09-07): \u521d\u59cb\u67b6\u6784\u8bbe\u8ba1 - v1.1 (2025-09-20): \u6dfb\u52a0JSONB\u652f\u6301 - v1.2 (2025-09-28): \u6027\u80fd\u4f18\u5316\u548c\u7d22\u5f15 - v1.3 (2025-10-05): MLOps\u529f\u80fd\u96c6\u6210 - v1.4 (2025-10-20): \u6570\u636e\u7ba1\u9053\u5b8c\u5584</p>"},{"location":"reference/DATA_COLLECTION_SETUP/","title":"\u6570\u636e\u91c7\u96c6\u914d\u7f6e\u6307\u5357","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#_2","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u672c\u6307\u5357\u8be6\u7ec6\u4ecb\u7ecd\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u7684\u6570\u636e\u91c7\u96c6\u67b6\u6784\u3001\u914d\u7f6e\u65b9\u6cd5\u548c\u6700\u4f73\u5b9e\u8df5\u3002\u7cfb\u7edf\u91c7\u7528\u591a\u5c42\u67b6\u6784\u8bbe\u8ba1\uff0c\u652f\u6301\u591a\u79cd\u6570\u636e\u6e90\u7684\u9ad8\u6548\u91c7\u96c6\uff0c\u786e\u4fdd\u6570\u636e\u8d28\u91cf\u548c\u5b9e\u65f6\u6027\u3002</p>"},{"location":"reference/DATA_COLLECTION_SETUP/#_3","title":"\ud83c\udfd7\ufe0f \u6570\u636e\u91c7\u96c6\u67b6\u6784","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#_4","title":"\u6574\u4f53\u67b6\u6784\u6982\u89c8","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        \u6570\u636e\u91c7\u96c6\u5c42                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   \u5916\u90e8\u6570\u636e\u6e90     \u2502   \u91c7\u96c6\u5f15\u64ce       \u2502        \u6570\u636e\u8d28\u91cf               \u2502\n\u2502  (External)     \u2502  (Collectors)   \u2502     (Quality)               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u2022 \u8db3\u7403API       \u2502 \u2022 BaseCollector  \u2502 \u2022 \u6570\u636e\u9a8c\u8bc1                   \u2502\n\u2502 \u2022 \u535a\u5f69API       \u2502 \u2022 OddsCollector  \u2502 \u2022 \u5f02\u5e38\u68c0\u6d4b                   \u2502\n\u2502 \u2022 \u5b9e\u65f6\u6570\u636e\u6e90     \u2502 \u2022 FixturesCollector\u2502 \u2022 \u6570\u636e\u6e05\u6d17                   \u2502\n\u2502 \u2022 \u5386\u53f2\u6570\u636e\u5e93     \u2502 \u2022 ScoresCollector\u2502 \u2022 \u683c\u5f0f\u6807\u51c6\u5316                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      \u6570\u636e\u5b58\u50a8\u5c42                                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   Bronze\u5c42       \u2502   Silver\u5c42       \u2502        Gold\u5c42                \u2502\n\u2502   (\u539f\u59cb\u6570\u636e)      \u2502   (\u6e05\u6d17\u6570\u636e)      \u2502      (\u4e1a\u52a1\u6570\u636e)              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u2022 raw_match_data \u2502 \u2022 matches       \u2502 \u2022 predictions               \u2502\n\u2502 \u2022 raw_odds_data  \u2502 \u2022 odds          \u2502 \u2022 features                  \u2502\n\u2502 \u2022 raw_scores_data\u2502 \u2022 teams         \u2502 \u2022 analytics                 \u2502\n\u2502 \u2022 \u91c7\u96c6\u65e5\u5fd7       \u2502 \u2022 leagues       \u2502 \u2022 reports                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#_5","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"\u7ec4\u4ef6 \u529f\u80fd \u6280\u672f\u6808 \u72b6\u6001 BaseCollector \u91c7\u96c6\u5668\u57fa\u7c7b\uff0c\u63d0\u4f9b\u901a\u7528\u529f\u80fd Python asyncio \u2705 \u8fd0\u884c\u4e2d OddsCollector \u8d54\u7387\u6570\u636e\u91c7\u96c6\u5668 aiohttp, \u91cd\u8bd5\u673a\u5236 \u2705 \u8fd0\u884c\u4e2d FixturesCollector \u8d5b\u7a0b\u6570\u636e\u91c7\u96c6\u5668 REST API\u8c03\u7528 \u2705 \u8fd0\u884c\u4e2d ScoresCollector \u6bd4\u5206\u6570\u636e\u91c7\u96c6\u5668 WebSocket/\u8f6e\u8be2 \u2705 \u8fd0\u884c\u4e2d DataQualityMonitor \u6570\u636e\u8d28\u91cf\u76d1\u63a7 \u81ea\u5b9a\u4e49\u9a8c\u8bc1\u89c4\u5219 \u2705 \u8fd0\u884c\u4e2d"},{"location":"reference/DATA_COLLECTION_SETUP/#_6","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#_7","title":"\u73af\u5883\u8981\u6c42","text":"<ul> <li>Python: 3.11+</li> <li>\u6570\u636e\u5e93: PostgreSQL 14+</li> <li>\u7f13\u5b58: Redis 6+</li> <li>\u7f51\u7edc: \u7a33\u5b9a\u7684\u4e92\u8054\u7f51\u8fde\u63a5</li> </ul>"},{"location":"reference/DATA_COLLECTION_SETUP/#5","title":"5\u5206\u949f\u5feb\u901f\u914d\u7f6e","text":"<pre><code># 1. \u914d\u7f6e\u6570\u636e\u6e90\u73af\u5883\u53d8\u91cf\ncp .env.example .env\nnano .env\n\n# 2. \u8bbe\u7f6e\u5fc5\u8981\u7684API\u5bc6\u94a5\nexport FOOTBALL_API_KEY=\"your-football-api-key\"\nexport ODDS_API_KEY=\"your-odds-api-key\"\n\n# 3. \u542f\u52a8\u6570\u636e\u91c7\u96c6\u670d\u52a1\nmake data-collect-start\n\n# 4. \u9a8c\u8bc1\u91c7\u96c6\u72b6\u6001\nmake data-collect-status\n\n# 5. \u67e5\u770b\u91c7\u96c6\u65e5\u5fd7\nmake data-collect-logs\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#_8","title":"\u2699\ufe0f \u6570\u636e\u6e90\u914d\u7f6e","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#1-api","title":"1. \u8db3\u7403\u6570\u636eAPI\u914d\u7f6e","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#_9","title":"\u73af\u5883\u53d8\u91cf\u8bbe\u7f6e","text":"<pre><code># .env\n# \u8db3\u7403\u6570\u636eAPI\u914d\u7f6e\nFOOTBALL_API_BASE_URL=\"https://api.football-data.org/v4\"\nFOOTBALL_API_KEY=\"your-football-api-key-here\"\nFOOTBALL_API_RATE_LIMIT=\"10\"  # \u6bcf\u5206\u949f\u8bf7\u6c42\u9650\u5236\nFOOTBALL_API_TIMEOUT=\"30\"     # \u8bf7\u6c42\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09\n\n# \u6570\u636e\u91c7\u96c6\u9891\u7387\u914d\u7f6e\nFIXTURES_COLLECTION_INTERVAL=\"3600\"  # \u8d5b\u7a0b\u91c7\u96c6\u95f4\u9694\uff08\u79d2\uff09\nLIVE_SCORES_COLLECTION_INTERVAL=\"60\" # \u5b9e\u65f6\u6bd4\u5206\u91c7\u96c6\u95f4\u9694\uff08\u79d2\uff09\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#api","title":"API\u5bc6\u94a5\u83b7\u53d6","text":"<ol> <li>football-data.org</li> <li>\u8bbf\u95ee https://www.football-data.org/login</li> <li>\u6ce8\u518c\u8d26\u6237\u5e76\u83b7\u53d6\u514d\u8d39API\u5bc6\u94a5</li> <li> <p>\u514d\u8d39\u7248\u672c\uff1a\u6bcf\u5206\u949f10\u6b21\u8bf7\u6c42</p> </li> <li> <p>TheOdds API (\u53ef\u9009)</p> </li> <li>\u8bbf\u95ee https://the-odds-api.com/</li> <li>\u6ce8\u518c\u83b7\u53d6API\u5bc6\u94a5</li> <li>\u652f\u6301\u8d54\u7387\u6570\u636e\u91c7\u96c6</li> </ol>"},{"location":"reference/DATA_COLLECTION_SETUP/#2","title":"2. \u6570\u636e\u5e93\u914d\u7f6e","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#bronze","title":"Bronze\u5c42\u8868\u7ed3\u6784","text":"<pre><code>-- \u539f\u59cb\u6bd4\u8d5b\u6570\u636e\u8868\nCREATE TABLE raw_match_data (\n    id SERIAL PRIMARY KEY,\n    data_source VARCHAR(100) NOT NULL,\n    external_match_id VARCHAR(100) NOT NULL,\n    external_league_id VARCHAR(100),\n    raw_data JSONB NOT NULL,\n    match_time TIMESTAMP,\n    collected_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    processed BOOLEAN DEFAULT FALSE,\n    UNIQUE(data_source, external_match_id)\n);\n\n-- \u539f\u59cb\u8d54\u7387\u6570\u636e\u8868\nCREATE TABLE raw_odds_data (\n    id SERIAL PRIMARY KEY,\n    data_source VARCHAR(100) NOT NULL,\n    external_match_id VARCHAR(100) NOT NULL,\n    bookmaker VARCHAR(50),\n    market_type VARCHAR(50),\n    raw_data JSONB NOT NULL,\n    odds_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    collected_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    processed BOOLEAN DEFAULT FALSE,\n    UNIQUE(data_source, external_match_id, bookmaker, market_type)\n);\n\n-- \u539f\u59cb\u6bd4\u5206\u6570\u636e\u8868\nCREATE TABLE raw_scores_data (\n    id SERIAL PRIMARY KEY,\n    data_source VARCHAR(100) NOT NULL,\n    external_match_id VARCHAR(100) NOT NULL,\n    match_status VARCHAR(50),\n    home_score INTEGER,\n    away_score INTEGER,\n    match_minute INTEGER,\n    raw_data JSONB NOT NULL,\n    collected_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    processed BOOLEAN DEFAULT FALSE,\n    UNIQUE(data_source, external_match_id)\n);\n\n-- \u6570\u636e\u91c7\u96c6\u65e5\u5fd7\u8868\nCREATE TABLE data_collection_logs (\n    id SERIAL PRIMARY KEY,\n    data_source VARCHAR(100) NOT NULL,\n    collection_type VARCHAR(50) NOT NULL,\n    status VARCHAR(20) DEFAULT 'pending',\n    start_time TIMESTAMP,\n    end_time TIMESTAMP,\n    records_processed INTEGER DEFAULT 0,\n    records_failed INTEGER DEFAULT 0,\n    error_message TEXT,\n    metadata_json JSONB,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#3-redis","title":"3. Redis\u7f13\u5b58\u914d\u7f6e","text":"<pre><code># .env\n# Redis\u914d\u7f6e\nREDIS_URL=\"redis://localhost:6379/0\"\nREDIS_PASSWORD=\"your-redis-password\"\nREDIS_DB=\"0\"\n\n# \u7f13\u5b58\u7b56\u7565\u914d\u7f6e\nCACHE_TTL_FIXTURES=\"3600\"     # \u8d5b\u7a0b\u7f13\u5b581\u5c0f\u65f6\nCACHE_TTL_ODDS=\"300\"          # \u8d54\u7387\u7f13\u5b585\u5206\u949f\nCACHE_TTL_SCORES=\"60\"         # \u6bd4\u5206\u7f13\u5b581\u5206\u949f\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#_10","title":"\ud83d\udd27 \u91c7\u96c6\u5668\u914d\u7f6e","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#1-basecollector","title":"1. BaseCollector \u57fa\u7840\u914d\u7f6e","text":"<pre><code># src/data/collectors/base_collector.py \u914d\u7f6e\u793a\u4f8b\n\nfrom src.data.collectors.base_collector import DataCollector\n\nclass CustomDataCollector(DataCollector):\n    def __init__(\n        self,\n        data_source: str = \"custom_api\",\n        max_retries: int = 3,\n        retry_delay: int = 5,\n        timeout: int = 30,\n    ):\n        super().__init__(\n            data_source=data_source,\n            max_retries=max_retries,\n            retry_delay=retry_delay,\n            timeout=timeout,\n        )\n\n        # \u81ea\u5b9a\u4e49\u914d\u7f6e\n        self.rate_limit = 10  # \u6bcf\u5206\u949f\u8bf7\u6c42\u9650\u5236\n        self.batch_size = 100  # \u6279\u5904\u7406\u5927\u5c0f\n\n    async def collect_fixtures(self, **kwargs) -&gt; CollectionResult:\n        \"\"\"\u5b9e\u73b0\u8d5b\u7a0b\u6570\u636e\u91c7\u96c6\u903b\u8f91\"\"\"\n        pass\n\n    async def collect_odds(self, **kwargs) -&gt; CollectionResult:\n        \"\"\"\u5b9e\u73b0\u8d54\u7387\u6570\u636e\u91c7\u96c6\u903b\u8f91\"\"\"\n        pass\n\n    async def collect_live_scores(self, **kwargs) -&gt; CollectionResult:\n        \"\"\"\u5b9e\u73b0\u5b9e\u65f6\u6bd4\u5206\u91c7\u96c6\u903b\u8f91\"\"\"\n        pass\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#2-oddscollector","title":"2. OddsCollector \u8d54\u7387\u91c7\u96c6\u5668\u914d\u7f6e","text":"<pre><code># src/data/collectors/odds_collector.py \u4f7f\u7528\u793a\u4f8b\n\nfrom src.data.collectors.odds_collector import OddsCollector\n\n# \u521d\u59cb\u5316\u8d54\u7387\u91c7\u96c6\u5668\nodds_collector = OddsCollector(\n    data_source=\"the_odds_api\",\n    api_key=\"your-odds-api-key\",\n    base_url=\"https://api.the-odds-api.com/v4\",\n    time_window_minutes=5,  # \u53bb\u91cd\u65f6\u95f4\u7a97\u53e3\n    max_retries=3,\n    retry_delay=5,\n    timeout=30\n)\n\n# \u91c7\u96c6\u7279\u5b9a\u6bd4\u8d5b\u7684\u8d54\u7387\nresult = await odds_collector.collect_odds(\n    match_ids=[\"match_123\", \"match_456\"],\n    bookmakers=[\"bet365\", \"pinnacle\", \"williamhill\"],\n    markets=[\"h2h\", \"spreads\", \"totals\"]\n)\n\nprint(f\"\u91c7\u96c6\u7ed3\u679c: {result.status}\")\nprint(f\"\u6210\u529f\u8bb0\u5f55: {result.success_count}\")\nprint(f\"\u5931\u8d25\u8bb0\u5f55: {result.error_count}\")\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#3","title":"3. \u6570\u636e\u91c7\u96c6\u8c03\u5ea6\u5668\u914d\u7f6e","text":"<pre><code># src/scheduler/data_collection_scheduler.py\n\nimport asyncio\nfrom datetime import datetime\nfrom src.data.collectors.odds_collector import OddsCollector\nfrom src.data.collectors.fixtures_collector import FixturesCollector\nfrom src.data.collectors.scores_collector import ScoresCollector\n\nclass DataCollectionScheduler:\n    \"\"\"\u6570\u636e\u91c7\u96c6\u8c03\u5ea6\u5668\"\"\"\n\n    def __init__(self):\n        self.collectors = {\n            'odds': OddsCollector(),\n            'fixtures': FixturesCollector(),\n            'scores': ScoresCollector(),\n        }\n        self.running = False\n\n    async def start(self):\n        \"\"\"\u542f\u52a8\u8c03\u5ea6\u5668\"\"\"\n        self.running = True\n        tasks = [\n            asyncio.create_task(self._schedule_odds_collection()),\n            asyncio.create_task(self._schedule_fixtures_collection()),\n            asyncio.create_task(self._schedule_scores_collection()),\n        ]\n\n        try:\n            await asyncio.gather(*tasks)\n        except Exception as e:\n            self.logger.error(f\"\u8c03\u5ea6\u5668\u8fd0\u884c\u51fa\u9519: {e}\")\n        finally:\n            self.running = False\n\n    async def _schedule_odds_collection(self):\n        \"\"\"\u5b9a\u65f6\u91c7\u96c6\u8d54\u7387\u6570\u636e\"\"\"\n        while self.running:\n            try:\n                result = await self.collectors['odds'].collect_odds()\n                self.logger.info(f\"\u8d54\u7387\u91c7\u96c6\u5b8c\u6210: {result.status}\")\n\n                # \u7b49\u5f855\u5206\u949f\u540e\u518d\u6b21\u91c7\u96c6\n                await asyncio.sleep(300)\n\n            except Exception as e:\n                self.logger.error(f\"\u8d54\u7387\u91c7\u96c6\u5931\u8d25: {e}\")\n                await asyncio.sleep(60)  # \u51fa\u9519\u65f6\u7b49\u5f851\u5206\u949f\u91cd\u8bd5\n\n    async def _schedule_fixtures_collection(self):\n        \"\"\"\u5b9a\u65f6\u91c7\u96c6\u8d5b\u7a0b\u6570\u636e\"\"\"\n        while self.running:\n            try:\n                result = await self.collectors['fixtures'].collect_fixtures()\n                self.logger.info(f\"\u8d5b\u7a0b\u91c7\u96c6\u5b8c\u6210: {result.status}\")\n\n                # \u7b49\u5f851\u5c0f\u65f6\u540e\u518d\u6b21\u91c7\u96c6\n                await asyncio.sleep(3600)\n\n            except Exception as e:\n                self.logger.error(f\"\u8d5b\u7a0b\u91c7\u96c6\u5931\u8d25: {e}\")\n                await asyncio.sleep(300)  # \u51fa\u9519\u65f6\u7b49\u5f855\u5206\u949f\u91cd\u8bd5\n\n    async def _schedule_scores_collection(self):\n        \"\"\"\u5b9a\u65f6\u91c7\u96c6\u6bd4\u5206\u6570\u636e\"\"\"\n        while self.running:\n            try:\n                result = await self.collectors['scores'].collect_live_scores()\n                self.logger.info(f\"\u6bd4\u5206\u91c7\u96c6\u5b8c\u6210: {result.status}\")\n\n                # \u7b49\u5f851\u5206\u949f\u540e\u518d\u6b21\u91c7\u96c6\n                await asyncio.sleep(60)\n\n            except Exception as e:\n                self.logger.error(f\"\u6bd4\u5206\u91c7\u96c6\u5931\u8d25: {e}\")\n                await asyncio.sleep(30)  # \u51fa\u9519\u65f6\u7b49\u5f8530\u79d2\u91cd\u8bd5\n\n# \u542f\u52a8\u8c03\u5ea6\u5668\nscheduler = DataCollectionScheduler()\nawait scheduler.start()\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#_11","title":"\ud83d\udcca \u6570\u636e\u8d28\u91cf\u7ba1\u7406","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#1","title":"1. \u6570\u636e\u9a8c\u8bc1\u89c4\u5219","text":"<pre><code># src/data/quality/data_validator.py\n\nfrom typing import Dict, Any, List, Optional\nfrom datetime import datetime\nimport re\n\nclass DataValidator:\n    \"\"\"\u6570\u636e\u8d28\u91cf\u9a8c\u8bc1\u5668\"\"\"\n\n    def __init__(self):\n        self.validation_rules = {\n            'match_data': self._validate_match_data,\n            'odds_data': self._validate_odds_data,\n            'scores_data': self._validate_scores_data,\n        }\n\n    async def validate_data(\n        self,\n        data_type: str,\n        data: Dict[str, Any]\n    ) -&gt; tuple[bool, List[str]]:\n        \"\"\"\n        \u9a8c\u8bc1\u6570\u636e\u8d28\u91cf\n\n        Returns:\n            tuple[bool, List[str]]: (\u662f\u5426\u6709\u6548, \u9519\u8bef\u4fe1\u606f\u5217\u8868)\n        \"\"\"\n        if data_type not in self.validation_rules:\n            return False, [f\"\u672a\u77e5\u7684\u6570\u636e\u7c7b\u578b: {data_type}\"]\n\n        return await self.validation_rules[data_type](data)\n\n    async def _validate_match_data(self, data: Dict[str, Any]) -&gt; tuple[bool, List[str]]:\n        \"\"\"\u9a8c\u8bc1\u6bd4\u8d5b\u6570\u636e\"\"\"\n        errors = []\n\n        # \u5fc5\u586b\u5b57\u6bb5\u68c0\u67e5\n        required_fields = ['match_id', 'home_team', 'away_team', 'match_time']\n        for field in required_fields:\n            if field not in data or not data[field]:\n                errors.append(f\"\u7f3a\u5c11\u5fc5\u586b\u5b57\u6bb5: {field}\")\n\n        # \u65f6\u95f4\u683c\u5f0f\u9a8c\u8bc1\n        if 'match_time' in data:\n            try:\n                if isinstance(data['match_time'], str):\n                    datetime.fromisoformat(data['match_time'].replace('Z', '+00:00'))\n            except ValueError:\n                errors.append(\"\u6bd4\u8d5b\u65f6\u95f4\u683c\u5f0f\u65e0\u6548\")\n\n        # \u7403\u961f\u540d\u79f0\u683c\u5f0f\u9a8c\u8bc1\n        for team_field in ['home_team', 'away_team']:\n            if team_field in data and data[team_field]:\n                team_name = data[team_field]\n                if not isinstance(team_name, str) or len(team_name) &lt; 2:\n                    errors.append(f\"\u7403\u961f\u540d\u79f0\u683c\u5f0f\u65e0\u6548: {team_field}\")\n\n        return len(errors) == 0, errors\n\n    async def _validate_odds_data(self, data: Dict[str, Any]) -&gt; tuple[bool, List[str]]:\n        \"\"\"\u9a8c\u8bc1\u8d54\u7387\u6570\u636e\"\"\"\n        errors = []\n\n        # \u5fc5\u586b\u5b57\u6bb5\u68c0\u67e5\n        required_fields = ['match_id', 'bookmaker', 'market_type', 'outcomes']\n        for field in required_fields:\n            if field not in data or not data[field]:\n                errors.append(f\"\u7f3a\u5c11\u5fc5\u586b\u5b57\u6bb5: {field}\")\n\n        # \u8d54\u7387\u503c\u9a8c\u8bc1\n        if 'outcomes' in data and isinstance(data['outcomes'], list):\n            for outcome in data['outcomes']:\n                if 'price' in outcome:\n                    try:\n                        price = float(outcome['price'])\n                        if price &lt;= 1.0:\n                            errors.append(f\"\u8d54\u7387\u503c\u5fc5\u987b\u5927\u4e8e1: {price}\")\n                    except (ValueError, TypeError):\n                        errors.append(f\"\u8d54\u7387\u503c\u683c\u5f0f\u65e0\u6548: {outcome.get('price')}\")\n\n        return len(errors) == 0, errors\n\n    async def _validate_scores_data(self, data: Dict[str, Any]) -&gt; tuple[bool, List[str]]:\n        \"\"\"\u9a8c\u8bc1\u6bd4\u5206\u6570\u636e\"\"\"\n        errors = []\n\n        # \u5fc5\u586b\u5b57\u6bb5\u68c0\u67e5\n        required_fields = ['match_id', 'match_status']\n        for field in required_fields:\n            if field not in data or not data[field]:\n                errors.append(f\"\u7f3a\u5c11\u5fc5\u586b\u5b57\u6bb5: {field}\")\n\n        # \u6bd4\u5206\u9a8c\u8bc1\n        for score_field in ['home_score', 'away_score']:\n            if score_field in data and data[score_field] is not None:\n                try:\n                    score = int(data[score_field])\n                    if score &lt; 0:\n                        errors.append(f\"\u6bd4\u5206\u4e0d\u80fd\u4e3a\u8d1f\u6570: {score_field}\")\n                except (ValueError, TypeError):\n                    errors.append(f\"\u6bd4\u5206\u683c\u5f0f\u65e0\u6548: {score_field}\")\n\n        # \u6bd4\u8d5b\u5206\u949f\u9a8c\u8bc1\n        if 'match_minute' in data and data['match_minute'] is not None:\n            try:\n                minute = int(data['match_minute'])\n                if minute &lt; 0 or minute &gt; 120:\n                    errors.append(f\"\u6bd4\u8d5b\u5206\u949f\u6570\u65e0\u6548: {minute}\")\n            except (ValueError, TypeError):\n                errors.append(f\"\u6bd4\u8d5b\u5206\u949f\u6570\u683c\u5f0f\u65e0\u6548: {data['match_minute']}\")\n\n        return len(errors) == 0, errors\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#2_1","title":"2. \u5f02\u5e38\u68c0\u6d4b","text":"<pre><code># src/data/quality/anomaly_detector.py\n\nimport numpy as np\nfrom typing import Dict, Any, List\nfrom datetime import datetime, timedelta\n\nclass AnomalyDetector:\n    \"\"\"\u6570\u636e\u5f02\u5e38\u68c0\u6d4b\u5668\"\"\"\n\n    def __init__(self):\n        self.odds_history = {}  # \u8d54\u7387\u5386\u53f2\u6570\u636e\n        self.score_history = {}  # \u6bd4\u5206\u5386\u53f2\u6570\u636e\n\n    async def detect_odds_anomaly(self, odds_data: Dict[str, Any]) -&gt; List[str]:\n        \"\"\"\u68c0\u6d4b\u8d54\u7387\u6570\u636e\u5f02\u5e38\"\"\"\n        anomalies = []\n\n        match_id = odds_data.get('match_id')\n        bookmaker = odds_data.get('bookmaker')\n        market_type = odds_data.get('market_type')\n\n        # \u6784\u5efa\u5386\u53f2\u952e\n        history_key = f\"{match_id}:{bookmaker}:{market_type}\"\n\n        # \u68c0\u67e5\u8d54\u7387\u503c\u5f02\u5e38\n        if 'outcomes' in odds_data:\n            for outcome in odds_data['outcomes']:\n                price = outcome.get('price')\n                if price:\n                    # \u68c0\u67e5\u6781\u7aef\u8d54\u7387\n                    if price &gt; 1000:\n                        anomalies.append(f\"\u6781\u7aef\u8d54\u7387\u503c: {price}\")\n\n                    # \u68c0\u67e5\u5386\u53f2\u5bf9\u6bd4\u5f02\u5e38\n                    if history_key in self.odds_history:\n                        last_price = self.odds_history[history_key].get(outcome.get('name'))\n                        if last_price:\n                            # \u68c0\u67e5\u8d54\u7387\u53d8\u5316\u5e45\u5ea6\n                            change_ratio = abs(price - last_price) / last_price\n                            if change_ratio &gt; 0.5:  # \u53d8\u5316\u8d85\u8fc750%\n                                anomalies.append(f\"\u8d54\u7387\u53d8\u5316\u5f02\u5e38: {last_price} -&gt; {price}\")\n\n        # \u66f4\u65b0\u5386\u53f2\u8bb0\u5f55\n        if history_key not in self.odds_history:\n            self.odds_history[history_key] = {}\n\n        for outcome in odds_data.get('outcomes', []):\n            self.odds_history[history_key][outcome.get('name')] = outcome.get('price')\n\n        return anomalies\n\n    async def detect_score_anomaly(self, score_data: Dict[str, Any]) -&gt; List[str]:\n        \"\"\"\u68c0\u6d4b\u6bd4\u5206\u6570\u636e\u5f02\u5e38\"\"\"\n        anomalies = []\n\n        match_id = score_data.get('match_id')\n        home_score = score_data.get('home_score', 0)\n        away_score = score_data.get('away_score', 0)\n        match_minute = score_data.get('match_minute', 0)\n\n        # \u68c0\u67e5\u6bd4\u5206\u903b\u8f91\u5f02\u5e38\n        if match_minute &gt; 90 and (home_score == 0 and away_score == 0):\n            anomalies.append(\"90\u5206\u949f\u540e\u4ecd\u4e3a0-0\uff0c\u53ef\u80fd\u662f\u6570\u636e\u9519\u8bef\")\n\n        # \u68c0\u67e5\u6bd4\u5206\u8df3\u8dc3\u5f02\u5e38\n        if match_id in self.score_history:\n            last_score = self.score_history[match_id]\n            last_home = last_score.get('home_score', 0)\n            last_away = last_score.get('away_score', 0)\n            last_minute = last_score.get('match_minute', 0)\n\n            # \u68c0\u67e5\u65f6\u95f4\u5012\u9000\n            if match_minute &lt; last_minute:\n                anomalies.append(f\"\u6bd4\u8d5b\u65f6\u95f4\u5012\u9000: {last_minute} -&gt; {match_minute}\")\n\n            # \u68c0\u67e5\u6bd4\u5206\u8df3\u8dc3\n            goal_diff = (home_score + away_score) - (last_home + last_away)\n            if goal_diff &gt; 3:  # \u5355\u6b21\u66f4\u65b0\u8fdb\u7403\u8d85\u8fc73\u4e2a\n                anomalies.append(f\"\u6bd4\u5206\u8df3\u8dc3\u5f02\u5e38: {last_home}-{last_away} -&gt; {home_score}-{away_score}\")\n\n        # \u66f4\u65b0\u5386\u53f2\u8bb0\u5f55\n        self.score_history[match_id] = {\n            'home_score': home_score,\n            'away_score': away_score,\n            'match_minute': match_minute,\n            'updated_at': datetime.now()\n        }\n\n        return anomalies\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#_12","title":"\ud83d\udd04 \u6570\u636e\u5904\u7406\u6d41\u7a0b","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#1_1","title":"1. \u6570\u636e\u91c7\u96c6\u6d41\u7a0b","text":"<pre><code># src/data/pipeline/collection_pipeline.py\n\nimport asyncio\nfrom typing import Dict, Any, List\nfrom src.data.collectors.base_collector import CollectionResult\nfrom src.data.quality.data_validator import DataValidator\nfrom src.data.quality.anomaly_detector import AnomalyDetector\n\nclass DataCollectionPipeline:\n    \"\"\"\u6570\u636e\u91c7\u96c6\u7ba1\u9053\"\"\"\n\n    def __init__(self):\n        self.validator = DataValidator()\n        self.anomaly_detector = AnomalyDetector()\n\n    async def process_collection_result(\n        self,\n        data_type: str,\n        result: CollectionResult\n    ) -&gt; Dict[str, Any]:\n        \"\"\"\u5904\u7406\u91c7\u96c6\u7ed3\u679c\"\"\"\n\n        processed_data = []\n        validation_errors = []\n        anomaly_alerts = []\n\n        if result.collected_data:\n            for data_item in result.collected_data:\n                try:\n                    # 1. \u6570\u636e\u9a8c\u8bc1\n                    is_valid, errors = await self.validator.validate_data(data_type, data_item)\n                    if not is_valid:\n                        validation_errors.extend(errors)\n                        continue\n\n                    # 2. \u5f02\u5e38\u68c0\u6d4b\n                    anomalies = await self._detect_anomalies(data_type, data_item)\n                    if anomalies:\n                        anomaly_alerts.extend(anomalies)\n\n                    # 3. \u6570\u636e\u6e05\u6d17\u548c\u6807\u51c6\u5316\n                    cleaned_data = await self._clean_data(data_type, data_item)\n                    if cleaned_data:\n                        processed_data.append(cleaned_data)\n\n                except Exception as e:\n                    self.logger.error(f\"\u5904\u7406\u6570\u636e\u9879\u5931\u8d25: {e}\")\n                    continue\n\n        # 4. \u4fdd\u5b58\u5904\u7406\u540e\u7684\u6570\u636e\n        if processed_data:\n            await self._save_processed_data(data_type, processed_data)\n\n        # 5. \u751f\u6210\u5904\u7406\u62a5\u544a\n        report = {\n            'data_type': data_type,\n            'original_count': len(result.collected_data) if result.collected_data else 0,\n            'processed_count': len(processed_data),\n            'validation_errors': validation_errors,\n            'anomaly_alerts': anomaly_alerts,\n            'processing_time': datetime.now().isoformat(),\n        }\n\n        return report\n\n    async def _detect_anomalies(self, data_type: str, data: Dict[str, Any]) -&gt; List[str]:\n        \"\"\"\u68c0\u6d4b\u6570\u636e\u5f02\u5e38\"\"\"\n        if data_type == 'odds':\n            return await self.anomaly_detector.detect_odds_anomaly(data)\n        elif data_type == 'scores':\n            return await self.anomaly_detector.detect_score_anomaly(data)\n        return []\n\n    async def _clean_data(self, data_type: str, data: Dict[str, Any]) -&gt; Optional[Dict[str, Any]]:\n        \"\"\"\u6e05\u6d17\u548c\u6807\u51c6\u5316\u6570\u636e\"\"\"\n        # \u5b9e\u73b0\u6570\u636e\u6e05\u6d17\u903b\u8f91\n        cleaned = data.copy()\n\n        # \u6807\u51c6\u5316\u5b57\u6bb5\u540d\n        field_mapping = {\n            'matchId': 'match_id',\n            'homeTeam': 'home_team',\n            'awayTeam': 'away_team',\n            'matchTime': 'match_time',\n        }\n\n        for old_field, new_field in field_mapping.items():\n            if old_field in cleaned:\n                cleaned[new_field] = cleaned.pop(old_field)\n\n        # \u6dfb\u52a0\u5904\u7406\u65f6\u95f4\u6233\n        cleaned['processed_at'] = datetime.now().isoformat()\n\n        return cleaned\n\n    async def _save_processed_data(self, data_type: str, data: List[Dict[str, Any]]) -&gt; None:\n        \"\"\"\u4fdd\u5b58\u5904\u7406\u540e\u7684\u6570\u636e\u5230Silver\u5c42\"\"\"\n        # \u5b9e\u73b0\u6570\u636e\u4fdd\u5b58\u903b\u8f91\n        pass\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#2_2","title":"2. \u6570\u636e\u8f6c\u6362\u89c4\u5219","text":"<pre><code># src/data/processing/transformation_rules.py\n\nfrom typing import Dict, Any, List\nfrom datetime import datetime\nimport re\n\nclass DataTransformer:\n    \"\"\"\u6570\u636e\u8f6c\u6362\u5668\"\"\"\n\n    def __init__(self):\n        self.transformation_rules = {\n            'match_data': self._transform_match_data,\n            'odds_data': self._transform_odds_data,\n            'scores_data': self._transform_scores_data,\n        }\n\n    async def transform_data(self, data_type: str, raw_data: Dict[str, Any]) -&gt; Dict[str, Any]:\n        \"\"\"\u8f6c\u6362\u539f\u59cb\u6570\u636e\u4e3a\u6807\u51c6\u5316\u683c\u5f0f\"\"\"\n        if data_type not in self.transformation_rules:\n            raise ValueError(f\"\u4e0d\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b: {data_type}\")\n\n        return await self.transformation_rules[data_type](raw_data)\n\n    async def _transform_match_data(self, raw_data: Dict[str, Any]) -&gt; Dict[str, Any]:\n        \"\"\"\u8f6c\u6362\u6bd4\u8d5b\u6570\u636e\"\"\"\n        transformed = {\n            'external_match_id': raw_data.get('id'),\n            'external_league_id': raw_data.get('competition', {}).get('id'),\n            'home_team_name': raw_data.get('homeTeam', {}).get('name'),\n            'away_team_name': raw_data.get('awayTeam', {}).get('name'),\n            'home_team_id': raw_data.get('homeTeam', {}).get('id'),\n            'away_team_id': raw_data.get('awayTeam', {}).get('id'),\n            'match_date': self._parse_datetime(raw_data.get('utcDate')),\n            'match_status': raw_data.get('status'),\n            'venue': raw_data.get('venue', {}).get('name'),\n            'referee': raw_data.get('referees', [{}])[0].get('name') if raw_data.get('referees') else None,\n            'competition_name': raw_data.get('competition', {}).get('name'),\n            'season': raw_data.get('season', {}).get('startDate', '')[:4] if raw_data.get('season') else None,\n            'raw_data': raw_data,\n            'transformed_at': datetime.now().isoformat(),\n        }\n\n        return transformed\n\n    async def _transform_odds_data(self, raw_data: Dict[str, Any]) -&gt; Dict[str, Any]:\n        \"\"\"\u8f6c\u6362\u8d54\u7387\u6570\u636e\"\"\"\n        outcomes = raw_data.get('outcomes', [])\n\n        # \u89e3\u6790\u4e0d\u540c\u7c7b\u578b\u7684\u8d54\u7387\n        home_win_odds = None\n        draw_odds = None\n        away_win_odds = None\n        over_odds = None\n        under_odds = None\n\n        for outcome in outcomes:\n            name = outcome.get('name', '').lower()\n            price = outcome.get('price')\n\n            if 'home' in name or '1' in name:\n                home_win_odds = price\n            elif 'away' in name or '2' in name:\n                away_win_odds = price\n            elif 'draw' in name or 'x' in name:\n                draw_odds = price\n            elif 'over' in name:\n                over_odds = price\n            elif 'under' in name:\n                under_odds = price\n\n        transformed = {\n            'external_match_id': raw_data.get('match_id'),\n            'bookmaker': raw_data.get('bookmaker'),\n            'market_type': raw_data.get('market_type'),\n            'home_win_odds': home_win_odds,\n            'draw_odds': draw_odds,\n            'away_win_odds': away_win_odds,\n            'over_odds': over_odds,\n            'under_odds': under_odds,\n            'odds_time': self._parse_datetime(raw_data.get('last_update')),\n            'raw_outcomes': outcomes,\n            'raw_data': raw_data,\n            'transformed_at': datetime.now().isoformat(),\n        }\n\n        return transformed\n\n    async def _transform_scores_data(self, raw_data: Dict[str, Any]) -&gt; Dict[str, Any]:\n        \"\"\"\u8f6c\u6362\u6bd4\u5206\u6570\u636e\"\"\"\n        transformed = {\n            'external_match_id': raw_data.get('match_id'),\n            'match_status': raw_data.get('match_status'),\n            'home_score': raw_data.get('home_score'),\n            'away_score': raw_data.get('away_score'),\n            'match_minute': raw_data.get('match_minute'),\n            'score_time': self._parse_datetime(raw_data.get('score_time')),\n            'extra_time_home': raw_data.get('extra_time_home'),\n            'extra_time_away': raw_data.get('extra_time_away'),\n            'penalty_shootout_home': raw_data.get('penalty_shootout_home'),\n            'penalty_shootout_away': raw_data.get('penalty_shootout_away'),\n            'raw_data': raw_data,\n            'transformed_at': datetime.now().isoformat(),\n        }\n\n        return transformed\n\n    def _parse_datetime(self, datetime_str: str) -&gt; Optional[datetime]:\n        \"\"\"\u89e3\u6790\u65e5\u671f\u65f6\u95f4\u5b57\u7b26\u4e32\"\"\"\n        if not datetime_str:\n            return None\n\n        try:\n            # \u5c1d\u8bd5\u591a\u79cd\u65e5\u671f\u683c\u5f0f\n            formats = [\n                '%Y-%m-%dT%H:%M:%S',\n                '%Y-%m-%dT%H:%M:%SZ',\n                '%Y-%m-%d %H:%M:%S',\n                '%Y-%m-%dT%H:%M:%S.%f',\n                '%Y-%m-%dT%H:%M:%S.%fZ',\n            ]\n\n            for fmt in formats:\n                try:\n                    return datetime.strptime(datetime_str, fmt)\n                except ValueError:\n                    continue\n\n        except Exception:\n            pass\n\n        return None\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#_13","title":"\ud83d\udcc8 \u76d1\u63a7\u548c\u544a\u8b66","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#1_2","title":"1. \u91c7\u96c6\u76d1\u63a7\u6307\u6807","text":"<pre><code># src/monitoring/collection_metrics.py\n\nfrom prometheus_client import Counter, Histogram, Gauge\nimport time\n\nclass CollectionMetrics:\n    \"\"\"\u6570\u636e\u91c7\u96c6\u76d1\u63a7\u6307\u6807\"\"\"\n\n    def __init__(self):\n        # \u8ba1\u6570\u5668\n        self.collection_requests_total = Counter(\n            'data_collection_requests_total',\n            'Total number of data collection requests',\n            ['data_source', 'data_type', 'status']\n        )\n\n        self.records_collected_total = Counter(\n            'data_records_collected_total',\n            'Total number of records collected',\n            ['data_source', 'data_type']\n        )\n\n        self.validation_errors_total = Counter(\n            'data_validation_errors_total',\n            'Total number of validation errors',\n            ['data_type', 'error_type']\n        )\n\n        # \u76f4\u65b9\u56fe\n        self.collection_duration = Histogram(\n            'data_collection_duration_seconds',\n            'Time spent collecting data',\n            ['data_source', 'data_type'],\n            buckets=[0.1, 0.5, 1.0, 2.0, 5.0, 10.0, 30.0, 60.0]\n        )\n\n        # \u4eea\u8868\n        self.active_collectors = Gauge(\n            'active_data_collectors',\n            'Number of active data collectors'\n        )\n\n        self.collection_queue_size = Gauge(\n            'data_collection_queue_size',\n            'Size of data collection queue'\n        )\n\n        self.last_collection_success_time = Gauge(\n            'last_collection_success_time',\n            'Unix timestamp of last successful collection',\n            ['data_source', 'data_type']\n        )\n\n    def record_collection_start(self, data_source: str, data_type: str):\n        \"\"\"\u8bb0\u5f55\u91c7\u96c6\u5f00\u59cb\"\"\"\n        self.active_collectors.inc()\n\n    def record_collection_complete(\n        self,\n        data_source: str,\n        data_type: str,\n        status: str,\n        records_count: int,\n        duration: float\n    ):\n        \"\"\"\u8bb0\u5f55\u91c7\u96c6\u5b8c\u6210\"\"\"\n        self.active_collectors.dec()\n        self.collection_requests_total.labels(\n            data_source=data_source,\n            data_type=data_type,\n            status=status\n        ).inc()\n\n        if records_count &gt; 0:\n            self.records_collected_total.labels(\n                data_source=data_source,\n                data_type=data_type\n            ).inc(records_count)\n\n        self.collection_duration.labels(\n            data_source=data_source,\n            data_type=data_type\n        ).observe(duration)\n\n        if status == 'success':\n            self.last_collection_success_time.labels(\n                data_source=data_source,\n                data_type=data_type\n            ).set(time.time())\n\n    def record_validation_error(self, data_type: str, error_type: str):\n        \"\"\"\u8bb0\u5f55\u9a8c\u8bc1\u9519\u8bef\"\"\"\n        self.validation_errors_total.labels(\n            data_type=data_type,\n            error_type=error_type\n        ).inc()\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#2_3","title":"2. \u544a\u8b66\u89c4\u5219\u914d\u7f6e","text":"<pre><code># config/monitoring/data_collection_alerts.yml\n\ngroups:\n  - name: data_collection_alerts\n    rules:\n      - alert: DataCollectionFailure\n        expr: increase(data_collection_requests_total{status=\"failed\"}[5m]) &gt; 0\n        for: 2m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"\u6570\u636e\u91c7\u96c6\u5931\u8d25\"\n          description: \"\u6570\u636e\u6e90 {{ $labels.data_source }} \u7684 {{ $labels.data_type }} \u6570\u636e\u91c7\u96c6\u5728\u6700\u8fd15\u5206\u949f\u5185\u5931\u8d25\"\n\n      - alert: HighCollectionLatency\n        expr: histogram_quantile(0.95, rate(data_collection_duration_seconds_bucket[5m])) &gt; 30\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"\u6570\u636e\u91c7\u96c6\u5ef6\u8fdf\u8fc7\u9ad8\"\n          description: \"95%\u7684\u6570\u636e\u91c7\u96c6\u8bf7\u6c42\u8017\u65f6\u8d85\u8fc730\u79d2\"\n\n      - alert: NoRecentCollection\n        expr: time() - last_collection_success_time &gt; 3600\n        for: 10m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"\u6570\u636e\u91c7\u96c6\u4e2d\u65ad\"\n          description: \"\u6570\u636e\u6e90 {{ $labels.data_source }} \u7684 {{ $labels.data_type }} \u6570\u636e\u91c7\u96c6\u5df2\u8d85\u8fc71\u5c0f\u65f6\u672a\u6210\u529f\"\n\n      - alert: HighValidationErrorRate\n        expr: rate(data_validation_errors_total[5m]) / rate(data_records_collected_total[5m]) &gt; 0.1\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"\u6570\u636e\u9a8c\u8bc1\u9519\u8bef\u7387\u8fc7\u9ad8\"\n          description: \"\u6570\u636e\u7c7b\u578b {{ $labels.data_type }} \u7684\u9a8c\u8bc1\u9519\u8bef\u7387\u8d85\u8fc710%\"\n\n      - name: data_quality_alerts\n    rules:\n      - alert: DataAnomalyDetected\n        expr: increase(data_anomaly_alerts_total[5m]) &gt; 0\n        for: 1m\n        labels:\n          severity: info\n        annotations:\n          summary: \"\u68c0\u6d4b\u5230\u6570\u636e\u5f02\u5e38\"\n          description: \"\u5728 {{ $labels.data_type }} \u6570\u636e\u4e2d\u68c0\u6d4b\u5230\u5f02\u5e38: {{ $labels.anomaly_type }}\"\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#_14","title":"\ud83d\udee0\ufe0f \u8fd0\u7ef4\u64cd\u4f5c","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#1_3","title":"1. \u65e5\u5e38\u8fd0\u7ef4\u547d\u4ee4","text":"<pre><code># \u6570\u636e\u91c7\u96c6\u670d\u52a1\u7ba1\u7406\nmake data-collect-start      # \u542f\u52a8\u6570\u636e\u91c7\u96c6\u670d\u52a1\nmake data-collect-stop       # \u505c\u6b62\u6570\u636e\u91c7\u96c6\u670d\u52a1\nmake data-collect-restart    # \u91cd\u542f\u6570\u636e\u91c7\u96c6\u670d\u52a1\nmake data-collect-status     # \u67e5\u770b\u91c7\u96c6\u670d\u52a1\u72b6\u6001\nmake data-collect-logs       # \u67e5\u770b\u91c7\u96c6\u65e5\u5fd7\n\n# \u6570\u636e\u8d28\u91cf\u7ba1\u7406\nmake data-quality-check      # \u8fd0\u884c\u6570\u636e\u8d28\u91cf\u68c0\u67e5\nmake data-validation-report  # \u751f\u6210\u6570\u636e\u9a8c\u8bc1\u62a5\u544a\nmake data-anomaly-scan       # \u626b\u63cf\u6570\u636e\u5f02\u5e38\nmake data-cleanup           # \u6e05\u7406\u8fc7\u671f\u6570\u636e\n\n# \u76d1\u63a7\u548c\u544a\u8b66\nmake data-metrics           # \u67e5\u770b\u91c7\u96c6\u6307\u6807\nmake data-alerts           # \u67e5\u770b\u544a\u8b66\u72b6\u6001\nmake data-dashboard        # \u6253\u5f00\u76d1\u63a7\u9762\u677f\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#2_4","title":"2. \u6545\u969c\u6392\u67e5\u6307\u5357","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#_15","title":"\u91c7\u96c6\u5931\u8d25\u6392\u67e5","text":"<pre><code># 1. \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\nping api.football-data.org\ncurl -I https://api.football-data.org/v4/\n\n# 2. \u9a8c\u8bc1API\u5bc6\u94a5\ncurl -H \"X-Auth-Token: YOUR_API_KEY\" \\\n     https://api.football-data.org/v4/competitions\n\n# 3. \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\ndocker exec -it football-prediction_db_1 psql -U football_user -d football_prediction_dev\nSELECT COUNT(*) FROM data_collection_logs WHERE created_at &gt; NOW() - INTERVAL '1 hour';\n\n# 4. \u67e5\u770b\u8be6\u7ec6\u9519\u8bef\u65e5\u5fd7\ndocker logs football-prediction_app_1 | grep \"ERROR\" | tail -20\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#_16","title":"\u6570\u636e\u8d28\u91cf\u95ee\u9898\u6392\u67e5","text":"<pre><code>-- \u67e5\u770b\u539f\u59cb\u6570\u636e\u4e2d\u7684\u95ee\u9898\u8bb0\u5f55\nSELECT\n    data_source,\n    collection_type,\n    COUNT(*) as error_count,\n    error_message\nFROM data_collection_logs\nWHERE status = 'failed'\nAND created_at &gt; NOW() - INTERVAL '24 hours'\nGROUP BY data_source, collection_type, error_message\nORDER BY error_count DESC;\n\n-- \u68c0\u67e5\u6570\u636e\u5b8c\u6574\u6027\nSELECT\n    'raw_match_data' as table_name,\n    COUNT(*) as total_records,\n    COUNT(CASE WHEN processed THEN 1 END) as processed_records,\n    COUNT(CASE WHEN NOT processed THEN 1 END) as unprocessed_records\nFROM raw_match_data\nUNION ALL\nSELECT\n    'raw_odds_data' as table_name,\n    COUNT(*) as total_records,\n    COUNT(CASE WHEN processed THEN 1 END) as processed_records,\n    COUNT(CASE WHEN NOT processed THEN 1 END) as unprocessed_records\nFROM raw_odds_data;\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#3_1","title":"3. \u6027\u80fd\u4f18\u5316","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#_17","title":"\u6570\u636e\u5e93\u4f18\u5316","text":"<pre><code>-- \u521b\u5efa\u7d22\u5f15\u4f18\u5316\u67e5\u8be2\u6027\u80fd\nCREATE INDEX IF NOT EXISTS idx_raw_match_data_source_time\nON raw_match_data(data_source, collected_at);\n\nCREATE INDEX IF NOT EXISTS idx_raw_odds_match_bookmaker\nON raw_odds_data(external_match_id, bookmaker);\n\nCREATE INDEX IF NOT EXISTS idx_collection_logs_type_status\nON data_collection_logs(collection_type, status);\n\n-- \u5206\u533a\u8868\u4f18\u5316\uff08\u5927\u6570\u636e\u91cf\u65f6\uff09\nCREATE TABLE raw_match_data_partitioned (\n    LIKE raw_match_data INCLUDING ALL\n) PARTITION BY RANGE (collected_at);\n\n-- \u521b\u5efa\u6708\u5ea6\u5206\u533a\nCREATE TABLE raw_match_data_2024_01\nPARTITION OF raw_match_data_partitioned\nFOR VALUES FROM ('2024-01-01') TO ('2024-02-01');\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#_18","title":"\u91c7\u96c6\u5668\u4f18\u5316","text":"<pre><code># \u5e76\u53d1\u91c7\u96c6\u4f18\u5316\nimport asyncio\nfrom asyncio import Semaphore\n\nclass OptimizedDataCollector(DataCollector):\n    def __init__(self, max_concurrent_requests: int = 10, **kwargs):\n        super().__init__(**kwargs)\n        self.semaphore = Semaphore(max_concurrent_requests)\n\n    async def collect_odds_batch(self, match_ids: List[str]) -&gt; CollectionResult:\n        \"\"\"\u6279\u91cf\u5e76\u53d1\u91c7\u96c6\u8d54\u7387\u6570\u636e\"\"\"\n        tasks = []\n\n        for match_id in match_ids:\n            task = self._collect_single_match_odds(match_id)\n            tasks.append(task)\n\n        # \u9650\u5236\u5e76\u53d1\u6570\n        results = await asyncio.gather(\n            *[self.semaphore.acquire() and task for task in tasks],\n            return_exceptions=True\n        )\n\n        # \u5904\u7406\u7ed3\u679c\n        successful_results = []\n        error_count = 0\n\n        for result in results:\n            if isinstance(result, Exception):\n                error_count += 1\n                self.logger.error(f\"\u91c7\u96c6\u4efb\u52a1\u5931\u8d25: {result}\")\n            else:\n                successful_results.extend(result)\n\n        return CollectionResult(\n            data_source=self.data_source,\n            collection_type=\"odds\",\n            records_collected=len(successful_results),\n            success_count=len(successful_results),\n            error_count=error_count,\n            status=\"success\" if error_count == 0 else \"partial\"\n        )\n</code></pre>"},{"location":"reference/DATA_COLLECTION_SETUP/#_19","title":"\ud83d\udccb \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#1_4","title":"1. \u6570\u636e\u91c7\u96c6\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u9519\u8bef\u5904\u7406\u548c\u91cd\u8bd5</li> <li>\u5b9e\u73b0\u6307\u6570\u9000\u907f\u91cd\u8bd5\u673a\u5236</li> <li>\u8bbe\u7f6e\u5408\u7406\u7684\u8d85\u65f6\u65f6\u95f4</li> <li> <p>\u8bb0\u5f55\u8be6\u7ec6\u7684\u9519\u8bef\u65e5\u5fd7</p> </li> <li> <p>\u6570\u636e\u53bb\u91cd</p> </li> <li>\u4f7f\u7528\u65f6\u95f4\u7a97\u53e3\u53bb\u91cd\u907f\u514d\u91cd\u590d\u6570\u636e</li> <li>\u57fa\u4e8e\u4e1a\u52a1\u5173\u952e\u5b57\u6bb5\u751f\u6210\u552f\u4e00\u952e</li> <li> <p>\u5b9a\u671f\u6e05\u7406\u8fc7\u671f\u7684\u53bb\u91cd\u7f13\u5b58</p> </li> <li> <p>\u6027\u80fd\u4f18\u5316</p> </li> <li>\u4f7f\u7528\u5f02\u6b65IO\u63d0\u9ad8\u5e76\u53d1\u6027\u80fd</li> <li>\u5b9e\u73b0\u6279\u91cf\u6570\u636e\u5904\u7406</li> <li> <p>\u5408\u7406\u8bbe\u7f6e\u5e76\u53d1\u8bf7\u6c42\u6570\u9650\u5236</p> </li> <li> <p>\u76d1\u63a7\u548c\u544a\u8b66</p> </li> <li>\u76d1\u63a7\u91c7\u96c6\u6210\u529f\u7387\u3001\u5ef6\u8fdf\u3001\u9519\u8bef\u7387</li> <li>\u8bbe\u7f6e\u5408\u7406\u7684\u544a\u8b66\u9608\u503c</li> <li>\u5efa\u7acb\u503c\u73ed\u54cd\u5e94\u673a\u5236</li> </ol>"},{"location":"reference/DATA_COLLECTION_SETUP/#2_5","title":"2. \u6570\u636e\u8d28\u91cf\u7ba1\u7406","text":"<ol> <li>\u6570\u636e\u9a8c\u8bc1</li> <li>\u5b9e\u73b0\u591a\u5c42\u6b21\u6570\u636e\u9a8c\u8bc1\u89c4\u5219</li> <li>\u9a8c\u8bc1\u6570\u636e\u683c\u5f0f\u3001\u5b8c\u6574\u6027\u3001\u4e00\u81f4\u6027</li> <li> <p>\u8bb0\u5f55\u9a8c\u8bc1\u7ed3\u679c\u548c\u9519\u8bef\u4fe1\u606f</p> </li> <li> <p>\u5f02\u5e38\u68c0\u6d4b</p> </li> <li>\u57fa\u4e8e\u5386\u53f2\u6570\u636e\u68c0\u6d4b\u5f02\u5e38\u503c</li> <li>\u8bbe\u7f6e\u5408\u7406\u7684\u5f02\u5e38\u9608\u503c</li> <li> <p>\u53ca\u65f6\u544a\u8b66\u901a\u77e5\u76f8\u5173\u4eba\u5458</p> </li> <li> <p>\u6570\u636e\u6e05\u6d17</p> </li> <li>\u6807\u51c6\u5316\u6570\u636e\u683c\u5f0f\u548c\u5b57\u6bb5\u540d</li> <li>\u5904\u7406\u7f3a\u5931\u503c\u548c\u5f02\u5e38\u503c</li> <li>\u4fdd\u6301\u6570\u636e\u7684\u4e00\u81f4\u6027\u548c\u51c6\u786e\u6027</li> </ol>"},{"location":"reference/DATA_COLLECTION_SETUP/#3_2","title":"3. \u7cfb\u7edf\u53ef\u9760\u6027","text":"<ol> <li>\u5bb9\u9519\u8bbe\u8ba1</li> <li>\u5b9e\u73b0\u4f18\u96c5\u964d\u7ea7\u673a\u5236</li> <li>\u8bbe\u7f6e\u7194\u65ad\u5668\u9632\u6b62\u96ea\u5d29</li> <li> <p>\u5efa\u7acb\u5907\u7528\u6570\u636e\u6e90</p> </li> <li> <p>\u5907\u4efd\u548c\u6062\u590d</p> </li> <li>\u5b9a\u671f\u5907\u4efd\u539f\u59cb\u6570\u636e</li> <li>\u5efa\u7acb\u6570\u636e\u6062\u590d\u6d41\u7a0b</li> <li> <p>\u6d4b\u8bd5\u5907\u4efd\u7684\u6709\u6548\u6027</p> </li> <li> <p>\u6587\u6863\u548c\u8fd0\u7ef4</p> </li> <li>\u7ef4\u62a4\u8be6\u7ec6\u7684\u914d\u7f6e\u6587\u6863</li> <li>\u5efa\u7acb\u6545\u969c\u5904\u7406\u624b\u518c</li> <li>\u5b9a\u671f\u8fdb\u884c\u7cfb\u7edf\u6f14\u7ec3</li> </ol>"},{"location":"reference/DATA_COLLECTION_SETUP/#_20","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":""},{"location":"reference/DATA_COLLECTION_SETUP/#_21","title":"\ud83d\udd17 \u6838\u5fc3\u6587\u6863","text":"<ul> <li>\u6570\u636e\u5e93\u67b6\u6784: DATABASE_SCHEMA.md - \u6570\u636e\u5e93\u8868\u7ed3\u6784\u548c\u8bbe\u8ba1</li> <li>\u5f00\u53d1\u6307\u5357: DEVELOPMENT_GUIDE.md - \u5f00\u53d1\u73af\u5883\u642d\u5efa\u548c\u89c4\u8303</li> <li>\u673a\u5668\u5b66\u4e60\u6a21\u578b: ../ml/ML_MODEL_GUIDE.md - ML\u6a21\u578b\u5f00\u53d1\u548c\u8bad\u7ec3</li> <li>\u76d1\u63a7\u7cfb\u7edf: MONITORING_GUIDE.md - \u7cfb\u7edf\u76d1\u63a7\u548c\u544a\u8b66</li> <li>API\u6587\u6863: API_REFERENCE.md - REST API\u63a5\u53e3\u8bf4\u660e</li> <li>\u672f\u8bed\u8868: glossary.md - \u9879\u76ee\u672f\u8bed\u548c\u6982\u5ff5\u5b9a\u4e49</li> </ul>"},{"location":"reference/DATA_COLLECTION_SETUP/#_22","title":"\ud83c\udfd7\ufe0f \u67b6\u6784\u76f8\u5173","text":"<ul> <li>\u7cfb\u7edf\u67b6\u6784\u6587\u6863 - \u6574\u4f53\u7cfb\u7edf\u67b6\u6784</li> <li>\u6570\u636e\u67b6\u6784\u8bbe\u8ba1 - \u6570\u636e\u5c42\u67b6\u6784\u8be6\u60c5</li> <li>\u91cd\u8bd5\u673a\u5236\u8bbe\u8ba1 - \u5bb9\u9519\u548c\u91cd\u8bd5\u673a\u5236</li> </ul>"},{"location":"reference/DATA_COLLECTION_SETUP/#_23","title":"\ud83d\udee0\ufe0f \u8fd0\u7ef4\u548c\u90e8\u7f72","text":"<ul> <li>\u751f\u4ea7\u90e8\u7f72\u6307\u5357 - \u751f\u4ea7\u73af\u5883\u90e8\u7f72</li> <li>\u8fd0\u7ef4\u624b\u518c - \u8fd0\u7ef4\u64cd\u4f5c\u6307\u5357</li> <li>Staging\u73af\u5883\u914d\u7f6e - \u6d4b\u8bd5\u73af\u5883\u914d\u7f6e</li> </ul>"},{"location":"reference/DATA_COLLECTION_SETUP/#_24","title":"\ud83e\uddea \u6d4b\u8bd5\u76f8\u5173","text":"<ul> <li>\u6d4b\u8bd5\u7b56\u7565\u6587\u6863 - \u6d4b\u8bd5\u7b56\u7565\u548c\u65b9\u6cd5</li> <li>CI Guardian\u7cfb\u7edf - CI/CD\u8d28\u91cf\u95e8\u7981</li> <li>\u6027\u80fd\u6d4b\u8bd5\u65b9\u6848 - \u6027\u80fd\u6d4b\u8bd5\u6307\u5357</li> </ul>"},{"location":"reference/DATA_COLLECTION_SETUP/#_25","title":"\ud83d\udcd6 \u5feb\u901f\u5f00\u59cb","text":"<ul> <li>\u5b8c\u6574\u7cfb\u7edf\u6f14\u793a - \u7cfb\u7edf\u529f\u80fd\u6f14\u793a</li> <li>\u5feb\u901f\u5f00\u59cb\u5de5\u5177\u6307\u5357 - \u5f00\u53d1\u5de5\u5177\u4f7f\u7528</li> <li>Makefile\u4f7f\u7528\u6307\u5357 - \u9879\u76ee\u5de5\u5177\u547d\u4ee4</li> </ul> <p>\u6587\u6863\u7248\u672c: 1.0 \u6700\u540e\u66f4\u65b0: 2025-10-23 \u7ef4\u62a4\u8005: \u5f00\u53d1\u56e2\u961f</p>"},{"location":"reference/DEVELOPMENT_GUIDE/","title":"\u5f00\u53d1\u6307\u5357","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#_2","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u672c\u6307\u5357\u4e3a\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u7684\u5f00\u53d1\u8005\u63d0\u4f9b\u5b8c\u6574\u7684\u5f00\u53d1\u73af\u5883\u642d\u5efa\u3001\u7f16\u7801\u89c4\u8303\u3001\u8c03\u8bd5\u548c\u8d21\u732e\u6d41\u7a0b\u3002\u9879\u76ee\u91c7\u7528\u73b0\u4ee3Python\u6280\u672f\u6808\uff0c\u9075\u5faa\u4f01\u4e1a\u7ea7\u5f00\u53d1\u6807\u51c6\u3002</p>"},{"location":"reference/DEVELOPMENT_GUIDE/#_3","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#_4","title":"\u73af\u5883\u8981\u6c42","text":"<ul> <li>Python: 3.11+ (\u63a8\u8350 3.11.5)</li> <li>\u64cd\u4f5c\u7cfb\u7edf: Linux/macOS/Windows 10+</li> <li>\u5185\u5b58: \u6700\u5c11 8GB RAM (\u63a8\u8350 16GB)</li> <li>\u5b58\u50a8: \u6700\u5c11 10GB \u53ef\u7528\u7a7a\u95f4</li> <li>Docker: 20.10+ (\u7528\u4e8e\u5bb9\u5668\u5316\u5f00\u53d1)</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#5","title":"5\u5206\u949f\u5feb\u901f\u4e0a\u624b","text":"<pre><code># 1. \u514b\u9686\u9879\u76ee\ngit clone &lt;repository-url&gt;\ncd FootballPrediction\n\n# 2. \u4e00\u952e\u5b89\u88c5\u548c\u914d\u7f6e\nmake install\n\n# 3. \u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587\nmake context\n\n# 4. \u542f\u52a8\u5f00\u53d1\u73af\u5883\nmake up\n\n# 5. \u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1\nmake test\n\n# 6. \u67e5\u770bAPI\u6587\u6863\nopen http://localhost:8000/docs\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_5","title":"\ud83d\udee0\ufe0f \u5f00\u53d1\u73af\u5883\u642d\u5efa","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#1","title":"1. \u73af\u5883\u51c6\u5907","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#_6","title":"\u5b89\u88c5\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177","text":"<pre><code># \u5b89\u88c5Poetry (\u63a8\u8350\u7684Python\u4f9d\u8d56\u7ba1\u7406\u5668)\ncurl -sSL https://install.python-poetry.org | python3 -\n\n# \u6216\u4f7f\u7528pipx (\u63a8\u8350)\npip install pipx\npipx install poetry\n\n# \u9a8c\u8bc1\u5b89\u88c5\npoetry --version\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_7","title":"\u5b89\u88c5\u5f00\u53d1\u5de5\u5177","text":"<pre><code># \u5b89\u88c5make (Linux/macOS)\nsudo apt-get install build-essential  # Ubuntu/Debian\nbrew install make                      # macOS\n\n# \u5b89\u88c5Docker\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsh get-docker.sh\n\n# \u5b89\u88c5Docker Compose\nsudo curl -L \"https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#2","title":"2. \u9879\u76ee\u521d\u59cb\u5316","text":"<pre><code># \u521b\u5efa\u9879\u76ee\u76ee\u5f55\u5e76\u514b\u9686\nmkdir -p ~/projects/football-prediction\ncd ~/projects/football-prediction\ngit clone &lt;repository-url&gt; .\n\n# \u4f7f\u7528\u9879\u76ee\u63d0\u4f9b\u7684\u5de5\u5177\u94fe\nmake install          # \u5b89\u88c5\u6240\u6709\u4f9d\u8d56\nmake env-check        # \u68c0\u67e5\u73af\u5883\u5065\u5eb7\u5ea6\nmake context          # \u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#3","title":"3. \u6570\u636e\u5e93\u8bbe\u7f6e","text":"<pre><code># \u542f\u52a8\u6570\u636e\u5e93\u670d\u52a1\nmake up\n\n# \u7b49\u5f85\u6570\u636e\u5e93\u5c31\u7eea\nmake test-env-status\n\n# \u8fd0\u884c\u6570\u636e\u5e93\u8fc1\u79fb\nmake db-migrate\n\n# \u521d\u59cb\u5316\u79cd\u5b50\u6570\u636e (\u53ef\u9009)\nmake db-seed\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#4","title":"4. \u914d\u7f6e\u73af\u5883\u53d8\u91cf","text":"<pre><code># \u590d\u5236\u73af\u5883\u53d8\u91cf\u6a21\u677f\ncp .env.example .env\n\n# \u7f16\u8f91\u73af\u5883\u53d8\u91cf\nnano .env\n</code></pre> <p>\u5173\u952e\u73af\u5883\u53d8\u91cf\u914d\u7f6e:</p> <pre><code># \u6570\u636e\u5e93\u914d\u7f6e\nDB_HOST=localhost\nDB_PORT=5432\nDB_NAME=football_prediction_dev\nDB_USER=football_user\nDB_PASSWORD=your_password\n\n# Redis\u914d\u7f6e\nREDIS_URL=redis://localhost:6379/0\n\n# API\u914d\u7f6e\nAPI_HOST=0.0.0.0\nAPI_PORT=8000\nDEBUG=true\n\n# \u5b89\u5168\u914d\u7f6e\nSECRET_KEY=your-jwt-secret-key\nJWT_SECRET_KEY=your-jwt-secret-key\n\n# \u76d1\u63a7\u914d\u7f6e\nPROMETHEUS_ENABLED=true\nGRAFANA_ENABLED=true\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_8","title":"\ud83c\udfd7\ufe0f \u9879\u76ee\u7ed3\u6784","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#_9","title":"\u76ee\u5f55\u8bf4\u660e","text":"<pre><code>FootballPrediction/\n\u251c\u2500\u2500 src/                     # \u6e90\u4ee3\u7801\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 api/                # API\u5c42 (FastAPI\u8def\u7531)\n\u2502   \u251c\u2500\u2500 core/               # \u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\n\u2502   \u251c\u2500\u2500 database/           # \u6570\u636e\u8bbf\u95ee\u5c42 (SQLAlchemy)\n\u2502   \u251c\u2500\u2500 services/           # \u670d\u52a1\u5c42\n\u2502   \u251c\u2500\u2500 domain/             # \u9886\u57df\u6a21\u578b (DDD)\n\u2502   \u251c\u2500\u2500 cache/              # \u7f13\u5b58\u5c42 (Redis)\n\u2502   \u251c\u2500\u2500 monitoring/         # \u76d1\u63a7\u7cfb\u7edf\n\u2502   \u251c\u2500\u2500 streaming/          # \u6d41\u5904\u7406 (Kafka)\n\u2502   \u2514\u2500\u2500 utils/              # \u5de5\u5177\u51fd\u6570\n\u251c\u2500\u2500 tests/                  # \u6d4b\u8bd5\u4ee3\u7801\n\u2502   \u251c\u2500\u2500 unit/               # \u5355\u5143\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 integration/        # \u96c6\u6210\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 e2e/                # \u7aef\u5230\u7aef\u6d4b\u8bd5\n\u251c\u2500\u2500 docs/                   # \u9879\u76ee\u6587\u6863\n\u251c\u2500\u2500 scripts/                # \u5f00\u53d1\u811a\u672c\n\u251c\u2500\u2500 config/                 # \u914d\u7f6e\u6587\u4ef6\n\u251c\u2500\u2500 requirements/           # \u4f9d\u8d56\u6587\u4ef6\n\u251c\u2500\u2500 docker/                 # Docker\u914d\u7f6e\n\u2514\u2500\u2500 Makefile               # \u5f00\u53d1\u5de5\u5177\u547d\u4ee4\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_10","title":"\u6838\u5fc3\u6587\u4ef6\u8bf4\u660e","text":"<ul> <li><code>src/main.py</code>: FastAPI\u5e94\u7528\u5165\u53e3</li> <li><code>src/core/di.py</code>: \u4f9d\u8d56\u6ce8\u5165\u5bb9\u5668</li> <li><code>src/database/connection.py</code>: \u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406</li> <li><code>pyproject.toml</code>: \u9879\u76ee\u914d\u7f6e\u548c\u4f9d\u8d56</li> <li><code>Makefile</code>: \u5f00\u53d1\u5de5\u5177\u547d\u4ee4\u96c6\u5408</li> <li><code>docker-compose.yml</code>: \u5bb9\u5668\u7f16\u6392\u914d\u7f6e</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#_11","title":"\ud83c\udfaf \u5f00\u53d1\u5de5\u4f5c\u6d41","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#ai","title":"\ud83e\udd16 AI\u8f85\u52a9\u5f00\u53d1\u6d41\u7a0b","text":"<p>\u9879\u76ee\u652f\u6301\u4f7f\u7528Claude AI\u52a9\u624b\u8fdb\u884c\u5f00\u53d1\uff0c\u9075\u5faa\u4ee5\u4e0b\u6700\u4f73\u5b9e\u8df5\uff1a</p>"},{"location":"reference/DEVELOPMENT_GUIDE/#ai_1","title":"AI\u5f00\u53d1\u5de5\u4f5c\u6d41","text":"<ol> <li>\u73af\u5883\u68c0\u67e5 - <code>make env-check</code> \u786e\u4fdd\u5f00\u53d1\u73af\u5883\u5065\u5eb7</li> <li>\u52a0\u8f7d\u4e0a\u4e0b\u6587 - <code>make context</code> \u4e3aAI\u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587</li> <li>\u5f00\u53d1\u548c\u7f16\u7801 - AI\u8f85\u52a9\u7f16\u5199\u4ee3\u7801\u548c\u89e3\u51b3\u95ee\u9898</li> <li>\u8d28\u91cf\u9a8c\u8bc1 - <code>make ci</code> \u8fd0\u884c\u5b8c\u6574\u8d28\u91cf\u68c0\u67e5</li> <li>\u9884\u63d0\u4ea4\u9a8c\u8bc1 - <code>make prepush</code> \u5b8c\u6574\u7684\u9884\u63a8\u9001\u9a8c\u8bc1</li> </ol>"},{"location":"reference/DEVELOPMENT_GUIDE/#ai_2","title":"AI\u4f7f\u7528\u6307\u5357","text":"<pre><code># AI\u5f00\u53d1\u524d\u51c6\u5907\nmake env-check    # \u68c0\u67e5\u73af\u5883\nmake context      # \u52a0\u8f7d\u9879\u76ee\u4e0a\u4e0b\u6587\n\n# AI\u5f00\u53d1\u5b8c\u6210\u540e\nmake test         # \u8fd0\u884c\u6d4b\u8bd5\nmake lint         # \u4ee3\u7801\u68c0\u67e5\nmake ci           # \u5b8c\u6574\u8d28\u91cf\u68c0\u67e5\nmake prepush      # \u9884\u63a8\u9001\u9a8c\u8bc1\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#ai_3","title":"AI\u8f85\u52a9\u5f00\u53d1\u6700\u4f73\u5b9e\u8df5","text":"<ul> <li>\u59cb\u7ec8\u4f7f\u7528Makefile\u547d\u4ee4 - \u907f\u514d\u76f4\u63a5\u8fd0\u884cpytest\u5355\u4e2a\u6587\u4ef6</li> <li>\u7406\u89e3\u9879\u76ee\u67b6\u6784 - \u53c2\u8003\u7cfb\u7edf\u67b6\u6784\u548c\u9886\u57df\u6a21\u578b\u8bbe\u8ba1</li> <li>\u9075\u5faa\u7f16\u7801\u89c4\u8303 - \u4f7f\u7528\u9879\u76ee\u7edf\u4e00\u7684\u4ee3\u7801\u98ce\u683c</li> <li>\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1 - \u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b\u9a8c\u8bc1\u529f\u80fd</li> <li>\u6587\u6863\u540c\u6b65\u66f4\u65b0 - \u4ee3\u7801\u53d8\u66f4\u65f6\u66f4\u65b0\u76f8\u5173\u6587\u6863</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#1_1","title":"1. \u5206\u652f\u7b56\u7565","text":"<pre><code># \u4e3b\u5206\u652f\nmain                    # \u751f\u4ea7\u73af\u5883\u4ee3\u7801\ndevelop                 # \u5f00\u53d1\u73af\u5883\u4ee3\u7801\n\n# \u529f\u80fd\u5206\u652f\nfeature/\u9884\u6d4b\u7b97\u6cd5\u4f18\u5316      # \u529f\u80fd\u5f00\u53d1\nbugfix/\u4fee\u590d\u6570\u636e\u5e93\u8fde\u63a5     # \u9519\u8bef\u4fee\u590d\nhotfix/\u7d27\u6025\u5b89\u5168\u8865\u4e01      # \u7d27\u6025\u4fee\u590d\nrelease/v1.2.0         # \u53d1\u5e03\u51c6\u5907\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#2_1","title":"2. \u65e5\u5e38\u5f00\u53d1\u6d41\u7a0b","text":"<pre><code># 1. \u540c\u6b65\u6700\u65b0\u4ee3\u7801\ngit checkout develop\ngit pull origin develop\n\n# 2. \u521b\u5efa\u529f\u80fd\u5206\u652f\ngit checkout -b feature/\u65b0\u529f\u80fd\u5f00\u53d1\n\n# 3. \u5f00\u53d1\u548c\u6d4b\u8bd5\nmake install             # \u5b89\u88c5\u65b0\u4f9d\u8d56\nmake test                # \u8fd0\u884c\u6d4b\u8bd5\nmake coverage            # \u68c0\u67e5\u8986\u76d6\u7387\nmake lint                # \u4ee3\u7801\u8d28\u91cf\u68c0\u67e5\nmake type-check          # \u7c7b\u578b\u68c0\u67e5\n\n# 4. \u63d0\u4ea4\u4ee3\u7801\ngit add .\ngit commit -m \"feat: \u6dfb\u52a0\u65b0\u7684\u9884\u6d4b\u7b97\u6cd5\"\n\n# 5. \u63a8\u9001\u5206\u652f\ngit push origin feature/\u65b0\u529f\u80fd\u5f00\u53d1\n\n# 6. \u521b\u5efaPull Request\n# \u5728GitHub/GitLab\u4e0a\u521b\u5efaPR\n\n# 7. \u4ee3\u7801\u5ba1\u67e5\u548c\u5408\u5e76\n# \u5ba1\u67e5\u901a\u8fc7\u540e\u5408\u5e76\u5230develop\u5206\u652f\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#3_1","title":"3. \u5f00\u53d1\u547d\u4ee4\u901f\u67e5","text":"<pre><code># \u73af\u5883\u7ba1\u7406\nmake env-check          # \u68c0\u67e5\u73af\u5883\u5065\u5eb7\u5ea6\nmake venv               # \u521b\u5efa\u865a\u62df\u73af\u5883\nmake install            # \u5b89\u88c5\u4f9d\u8d56\nmake clean-env          # \u6e05\u7406\u73af\u5883\n\n# \u5f00\u53d1\u670d\u52a1\u5668\nmake up                 # \u542f\u52a8\u6240\u6709\u670d\u52a1\nmake down               # \u505c\u6b62\u6240\u6709\u670d\u52a1\nmake logs               # \u67e5\u770b\u670d\u52a1\u65e5\u5fd7\nmake restart            # \u91cd\u542f\u670d\u52a1\n\n# \u6d4b\u8bd5\u76f8\u5173\nmake test               # \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\nmake test-unit          # \u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\nmake test-integration   # \u8fd0\u884c\u96c6\u6210\u6d4b\u8bd5\nmake coverage           # \u68c0\u67e5\u6d4b\u8bd5\u8986\u76d6\u7387\nmake test-all           # \u5b8c\u6574\u6d4b\u8bd5\u6d41\u7a0b\n\n# \u4ee3\u7801\u8d28\u91cf\nmake lint               # \u4ee3\u7801\u89c4\u8303\u68c0\u67e5\nmake fmt                # \u4ee3\u7801\u683c\u5f0f\u5316\nmake type-check         # \u7c7b\u578b\u68c0\u67e5\nmake prepush            # \u9884\u63d0\u4ea4\u68c0\u67e5\nmake ci                 # \u6a21\u62dfCI\u6d41\u7a0b\n\n# \u6570\u636e\u5e93\u64cd\u4f5c\nmake db-init            # \u521d\u59cb\u5316\u6570\u636e\u5e93\nmake db-migrate         # \u8fd0\u884c\u8fc1\u79fb\nmake db-seed            # \u586b\u5145\u79cd\u5b50\u6570\u636e\nmake db-backup          # \u5907\u4efd\u6570\u636e\u5e93\nmake db-reset           # \u91cd\u7f6e\u6570\u636e\u5e93\n\n# \u6027\u80fd\u5206\u6790\nmake benchmark          # \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\nmake profile-app        # \u5e94\u7528\u6027\u80fd\u5206\u6790\nmake flamegraph         # \u751f\u6210\u706b\u7130\u56fe\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_12","title":"\ud83d\udcdd \u7f16\u7801\u89c4\u8303","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#1-python","title":"1. Python\u4ee3\u7801\u89c4\u8303","text":"<p>\u9879\u76ee\u4f7f\u7528\u4e25\u683c\u7684\u4ee3\u7801\u89c4\u8303\uff0c\u57fa\u4e8e\u4ee5\u4e0b\u5de5\u5177\uff1a</p> <pre><code># pyproject.toml\n[tool.ruff]\nline-length = 88\ntarget-version = \"py311\"\n\n[tool.mypy]\npython_version = \"3.11\"\nstrict = true\nwarn_return_any = true\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_13","title":"\u4ee3\u7801\u98ce\u683c\u8981\u6c42","text":"<pre><code># \u2705 \u6b63\u786e\u793a\u4f8b\nfrom typing import Optional, List, Dict\nimport asyncio\nimport logging\n\nlogger = logging.getLogger(__name__)\n\nclass PredictionService:\n    \"\"\"\u9884\u6d4b\u670d\u52a1\u7c7b\n\n    \u63d0\u4f9b\u8db3\u7403\u6bd4\u8d5b\u9884\u6d4b\u529f\u80fd\uff0c\u652f\u6301\u591a\u79cd\u9884\u6d4b\u6a21\u578b\u3002\n\n    Attributes:\n        model_version: \u6a21\u578b\u7248\u672c\u53f7\n        confidence_threshold: \u7f6e\u4fe1\u5ea6\u9608\u503c\n    \"\"\"\n\n    def __init__(\n        self,\n        model_version: str = \"v1.0.0\",\n        confidence_threshold: float = 0.6,\n    ) -&gt; None:\n        \"\"\"\u521d\u59cb\u5316\u9884\u6d4b\u670d\u52a1\"\"\"\n        self.model_version = model_version\n        self.confidence_threshold = confidence_threshold\n\n    async def predict_match(\n        self,\n        match_id: int,\n        features: Dict[str, float]\n    ) -&gt; Optional[Dict[str, float]]:\n        \"\"\"\u9884\u6d4b\u6bd4\u8d5b\u7ed3\u679c\n\n        Args:\n            match_id: \u6bd4\u8d5bID\n            features: \u7279\u5f81\u6570\u636e\u5b57\u5178\n\n        Returns:\n            \u9884\u6d4b\u7ed3\u679c\u5b57\u5178\uff0c\u5305\u542b\u5404\u7ed3\u679c\u7684\u6982\u7387\n\n        Raises:\n            ValueError: \u5f53\u7279\u5f81\u6570\u636e\u65e0\u6548\u65f6\n        \"\"\"\n        if not features:\n            raise ValueError(\"\u7279\u5f81\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a\")\n\n        # \u5b9e\u73b0\u9884\u6d4b\u903b\u8f91\n        return {\"home_win\": 0.5, \"draw\": 0.3, \"away_win\": 0.2}\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_14","title":"\u4ee3\u7801\u8d28\u91cf\u8981\u6c42","text":"<ul> <li>\u7c7b\u578b\u6ce8\u89e3: \u6240\u6709\u516c\u5171\u51fd\u6570\u5fc5\u987b\u5305\u542b\u7c7b\u578b\u6ce8\u89e3</li> <li>\u6587\u6863\u5b57\u7b26\u4e32: \u6240\u6709\u7c7b\u548c\u516c\u5171\u65b9\u6cd5\u5fc5\u987b\u6709docstring</li> <li>\u9519\u8bef\u5904\u7406: \u4f7f\u7528\u9002\u5f53\u7684\u5f02\u5e38\u5904\u7406\u673a\u5236</li> <li>\u65e5\u5fd7\u8bb0\u5f55: \u5173\u952e\u64cd\u4f5c\u5fc5\u987b\u8bb0\u5f55\u65e5\u5fd7</li> <li>\u6d4b\u8bd5\u8986\u76d6: \u65b0\u529f\u80fd\u5fc5\u987b\u6709\u5bf9\u5e94\u7684\u6d4b\u8bd5</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#2_2","title":"2. \u547d\u540d\u89c4\u8303","text":"<pre><code># \u7c7b\u540d\uff1a\u5927\u9a7c\u5cf0\u547d\u540d\u6cd5\nclass PredictionEngine:\n    pass\n\nclass DatabaseManager:\n    pass\n\n# \u51fd\u6570\u548c\u53d8\u91cf\uff1a\u5c0f\u5199\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\ndef calculate_prediction_confidence():\n    pass\n\nuser_service = UserService()\nmatch_data = {}\n\n# \u5e38\u91cf\uff1a\u5927\u5199\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\nMAX_RETRY_ATTEMPTS = 3\nDEFAULT_TIMEOUT = 30\nAPI_BASE_URL = \"https://api.football.com\"\n\n# \u79c1\u6709\u65b9\u6cd5\uff1a\u524d\u7f00\u4e0b\u5212\u7ebf\ndef _internal_method():\n    pass\n\nclass MyClass:\n    def __init__(self):\n        self._private_var = \"private\"\n        self.__very_private = \"very private\"\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#3_2","title":"3. \u9879\u76ee\u7279\u5b9a\u89c4\u8303","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#_15","title":"\u5f02\u6b65\u4ee3\u7801\u89c4\u8303","text":"<pre><code># \u2705 \u63a8\u8350\u7684\u5f02\u6b65\u7f16\u7a0b\u6a21\u5f0f\nasync def fetch_match_data(match_id: int) -&gt; Optional[Dict]:\n    \"\"\"\u5f02\u6b65\u83b7\u53d6\u6bd4\u8d5b\u6570\u636e\"\"\"\n    try:\n        async with aiohttp.ClientSession() as session:\n            url = f\"{API_BASE_URL}/matches/{match_id}\"\n            async with session.get(url) as response:\n                if response.status == 200:\n                    return await response.json()\n                return None\n    except Exception as e:\n        logger.error(f\"\u83b7\u53d6\u6bd4\u8d5b\u6570\u636e\u5931\u8d25: {e}\")\n        return None\n\n# \u6279\u91cf\u5f02\u6b65\u64cd\u4f5c\nasync def fetch_multiple_matches(match_ids: List[int]) -&gt; List[Dict]:\n    \"\"\"\u6279\u91cf\u83b7\u53d6\u6bd4\u8d5b\u6570\u636e\"\"\"\n    tasks = [fetch_match_data(match_id) for match_id in match_ids]\n    results = await asyncio.gather(*tasks, return_exceptions=True)\n    return [r for r in results if isinstance(r, dict)]\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_16","title":"\u6570\u636e\u5e93\u64cd\u4f5c\u89c4\u8303","text":"<pre><code># \u2705 \u63a8\u8350\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u6a21\u5f0f\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom sqlalchemy import select\n\nasync def get_user_by_email(\n    db: AsyncSession,\n    email: str\n) -&gt; Optional[User]:\n    \"\"\"\u6839\u636e\u90ae\u7bb1\u83b7\u53d6\u7528\u6237\"\"\"\n    stmt = select(User).where(User.email == email)\n    result = await db.execute(stmt)\n    return result.scalar_one_or_none()\n\nasync def create_prediction(\n    db: AsyncSession,\n    prediction_data: PredictionCreate\n) -&gt; Prediction:\n    \"\"\"\u521b\u5efa\u9884\u6d4b\u8bb0\u5f55\"\"\"\n    db_prediction = Prediction(**prediction_data.model_dump())\n    db.add(db_prediction)\n    await db.commit()\n    await db.refresh(db_prediction)\n    return db_prediction\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_17","title":"\ud83e\uddea \u6d4b\u8bd5\u7b56\u7565","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#1_2","title":"1. \u6d4b\u8bd5\u5206\u5c42","text":"<pre><code>\u6d4b\u8bd5\u91d1\u5b57\u5854:\n    E2E Tests (5%)        # \u7aef\u5230\u7aef\u6d4b\u8bd5\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502 Integration Tests \u2502     # \u96c6\u6210\u6d4b\u8bd5 (15%)\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    Unit Tests (80%)      \u2502  # \u5355\u5143\u6d4b\u8bd5 (\u4e3b\u8981\u90e8\u5206)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#2_3","title":"2. \u6d4b\u8bd5\u7f16\u5199\u89c4\u8303","text":"<pre><code># tests/unit/services/test_prediction_service.py\nimport pytest\nfrom unittest.mock import AsyncMock, patch\nfrom src.services.prediction_service import PredictionService\n\nclass TestPredictionService:\n    \"\"\"\u9884\u6d4b\u670d\u52a1\u6d4b\u8bd5\u7c7b\"\"\"\n\n    @pytest.fixture\n    def prediction_service(self):\n        \"\"\"\u9884\u6d4b\u670d\u52a1fixture\"\"\"\n        return PredictionService(model_version=\"test-v1.0.0\")\n\n    @pytest.mark.asyncio\n    async def test_predict_match_success(self, prediction_service):\n        \"\"\"\u6d4b\u8bd5\u6210\u529f\u9884\u6d4b\u6bd4\u8d5b\"\"\"\n        # Arrange\n        match_id = 123\n        features = {\"team_strength\": 0.8, \"home_advantage\": 0.1}\n\n        # Act\n        result = await prediction_service.predict_match(match_id, features)\n\n        # Assert\n        assert result is not None\n        assert \"home_win\" in result\n        assert \"draw\" in result\n        assert \"away_win\" in result\n        assert sum(result.values()) == pytest.approx(1.0)\n\n    @pytest.mark.asyncio\n    async def test_predict_match_empty_features(self, prediction_service):\n        \"\"\"\u6d4b\u8bd5\u7a7a\u7279\u5f81\u6570\u636e\u5f02\u5e38\"\"\"\n        # Arrange\n        match_id = 123\n        features = {}\n\n        # Act &amp; Assert\n        with pytest.raises(ValueError, match=\"\u7279\u5f81\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a\"):\n            await prediction_service.predict_match(match_id, features)\n\n    @pytest.mark.parametrize(\"features,expected_min_confidence\", [\n        ({\"team_strength\": 1.0}, 0.8),\n        ({\"team_strength\": 0.5}, 0.6),\n        ({\"team_strength\": 0.1}, 0.4),\n    ])\n    async def test_predict_match_confidence_levels(\n        self,\n        prediction_service,\n        features,\n        expected_min_confidence\n    ):\n        \"\"\"\u6d4b\u8bd5\u4e0d\u540c\u7279\u5f81\u5f3a\u5ea6\u4e0b\u7684\u7f6e\u4fe1\u5ea6\"\"\"\n        # Act\n        result = await prediction_service.predict_match(123, features)\n\n        # Assert\n        max_prob = max(result.values())\n        assert max_prob &gt;= expected_min_confidence\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#3_3","title":"3. \u6d4b\u8bd5\u8fd0\u884c\u547d\u4ee4","text":"<pre><code># \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\nmake test\n\n# \u8fd0\u884c\u7279\u5b9a\u6d4b\u8bd5\npytest tests/unit/services/test_prediction_service.py -v\n\n# \u8fd0\u884c\u5e26\u8986\u76d6\u7387\u7684\u6d4b\u8bd5\npytest tests/ --cov=src --cov-report=html\n\n# \u8fd0\u884c\u7279\u5b9a\u6807\u8bb0\u7684\u6d4b\u8bd5\npytest -m \"unit and not slow\"\npytest -m \"integration\"\npytest -m \"api\"\n\n# \u5e76\u884c\u8fd0\u884c\u6d4b\u8bd5\npytest -n auto\n\n# \u751f\u6210\u8986\u76d6\u7387\u62a5\u544a\nmake coverage\nmake coverage-html\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_18","title":"\ud83d\udc1b \u8c03\u8bd5\u6307\u5357","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#1_3","title":"1. \u672c\u5730\u8c03\u8bd5","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#_19","title":"\u542f\u52a8\u8c03\u8bd5\u6a21\u5f0f","text":"<pre><code># \u5f00\u53d1\u6a21\u5f0f\u542f\u52a8\nexport DEBUG=true\nmake dev\n\n# \u6216\u8005\u76f4\u63a5\u8fd0\u884c\npython -m uvicorn src.main:app --reload --host 0.0.0.0 --port 8000\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_20","title":"\u4f7f\u7528\u8c03\u8bd5\u5668","text":"<pre><code># \u5728\u4ee3\u7801\u4e2d\u6dfb\u52a0\u65ad\u70b9\nimport pdb; pdb.set_trace()  # \u6807\u51c6\u8c03\u8bd5\u5668\nimport ipdb; ipdb.set_trace()  # \u589e\u5f3a\u8c03\u8bd5\u5668\nimport web_pdb; web_pdb.set_trace()  # Web\u8c03\u8bd5\u5668\n\n# \u6216\u8005\u4f7f\u7528breakpoint() (Python 3.7+)\nbreakpoint()\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#vs-code","title":"VS Code\u8c03\u8bd5\u914d\u7f6e","text":"<pre><code>// .vscode/launch.json\n{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"FastAPI Debug\",\n            \"type\": \"python\",\n            \"request\": \"launch\",\n            \"program\": \"${workspaceFolder}/src/main.py\",\n            \"module\": \"uvicorn\",\n            \"args\": [\n                \"src.main:app\",\n                \"--reload\",\n                \"--host\",\n                \"0.0.0.0\",\n                \"--port\",\n                \"8000\"\n            ],\n            \"jinja\": true,\n            \"justMyCode\": false,\n            \"env\": {\n                \"DEBUG\": \"true\"\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#2_4","title":"2. \u65e5\u5fd7\u8c03\u8bd5","text":"<pre><code>import logging\nfrom src.core.logging import get_logger\n\nlogger = get_logger(__name__)\n\nasync def some_function():\n    logger.info(\"\u51fd\u6570\u5f00\u59cb\u6267\u884c\")\n\n    try:\n        # \u4e1a\u52a1\u903b\u8f91\n        result = await some_operation()\n        logger.info(f\"\u64cd\u4f5c\u6210\u529f\uff0c\u7ed3\u679c: {result}\")\n        return result\n    except Exception as e:\n        logger.error(f\"\u64cd\u4f5c\u5931\u8d25: {e}\", exc_info=True)\n        raise\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_21","title":"\u65e5\u5fd7\u914d\u7f6e","text":"<pre><code># src/core/logging.py\nimport logging\nimport sys\nfrom pathlib import Path\n\ndef setup_logging():\n    \"\"\"\u8bbe\u7f6e\u65e5\u5fd7\u914d\u7f6e\"\"\"\n\n    # \u521b\u5efa\u65e5\u5fd7\u76ee\u5f55\n    log_dir = Path(\"logs\")\n    log_dir.mkdir(exist_ok=True)\n\n    # \u914d\u7f6e\u65e5\u5fd7\u683c\u5f0f\n    formatter = logging.Formatter(\n        '%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n    )\n\n    # \u63a7\u5236\u53f0\u5904\u7406\u5668\n    console_handler = logging.StreamHandler(sys.stdout)\n    console_handler.setFormatter(formatter)\n\n    # \u6587\u4ef6\u5904\u7406\u5668\n    file_handler = logging.FileHandler(log_dir / \"app.log\")\n    file_handler.setFormatter(formatter)\n\n    # \u914d\u7f6e\u6839\u65e5\u5fd7\u5668\n    root_logger = logging.getLogger()\n    root_logger.setLevel(logging.INFO)\n    root_logger.addHandler(console_handler)\n    root_logger.addHandler(file_handler)\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#3_4","title":"3. \u6570\u636e\u5e93\u8c03\u8bd5","text":"<pre><code># \u67e5\u770b\u6570\u636e\u5e93\u8fde\u63a5\nmake logs | grep \"database\"\n\n# \u8fde\u63a5\u6570\u636e\u5e93\ndocker exec -it football-prediction_db_1 psql -U football_user -d football_prediction_dev\n\n# \u67e5\u770b\u8868\u7ed3\u6784\n\\dt\n\\d matches\n\n# \u67e5\u8be2\u6570\u636e\nSELECT * FROM matches LIMIT 10;\nSELECT COUNT(*) FROM predictions;\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_22","title":"\ud83d\ude80 \u6027\u80fd\u4f18\u5316","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#1_4","title":"1. \u4ee3\u7801\u6027\u80fd\u5206\u6790","text":"<pre><code># \u8fd0\u884c\u6027\u80fd\u5206\u6790\nmake profile-app\n\n# \u751f\u6210\u706b\u7130\u56fe\nmake flamegraph\n\n# \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\nmake benchmark\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#2_5","title":"2. \u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316","text":"<pre><code># \u6279\u91cf\u64cd\u4f5c\nasync def create_predictions_batch(\n    db: AsyncSession,\n    predictions: List[PredictionCreate]\n) -&gt; List[Prediction]:\n    \"\"\"\u6279\u91cf\u521b\u5efa\u9884\u6d4b\u8bb0\u5f55\"\"\"\n    db_predictions = [Prediction(**p.model_dump()) for p in predictions]\n    db.add_all(db_predictions)\n    await db.commit()\n\n    # \u5237\u65b0\u4ee5\u83b7\u53d6ID\n    for prediction in db_predictions:\n        await db.refresh(prediction)\n\n    return db_predictions\n\n# \u4f7f\u7528\u7d22\u5f15\u67e5\u8be2\nasync def get_predictions_by_date_range(\n    db: AsyncSession,\n    start_date: datetime,\n    end_date: datetime\n) -&gt; List[Prediction]:\n    \"\"\"\u6309\u65e5\u671f\u8303\u56f4\u67e5\u8be2\u9884\u6d4b\"\"\"\n    stmt = (\n        select(Prediction)\n        .where(Prediction.prediction_time &gt;= start_date)\n        .where(Prediction.prediction_time &lt;= end_date)\n        .order_by(Prediction.prediction_time.desc())\n    )\n    result = await db.execute(stmt)\n    return result.scalars().all()\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#3_5","title":"3. \u7f13\u5b58\u4f18\u5316","text":"<pre><code>from src.cache.redis_manager import RedisManager\n\nclass PredictionService:\n    def __init__(self):\n        self.cache = RedisManager()\n\n    async def get_prediction_cached(self, match_id: int) -&gt; Optional[Dict]:\n        \"\"\"\u83b7\u53d6\u7f13\u5b58\u7684\u9884\u6d4b\u7ed3\u679c\"\"\"\n        cache_key = f\"prediction:{match_id}\"\n        return await self.cache.get(cache_key)\n\n    async def set_prediction_cache(\n        self,\n        match_id: int,\n        prediction: Dict,\n        ttl: int = 3600\n    ) -&gt; None:\n        \"\"\"\u8bbe\u7f6e\u9884\u6d4b\u7ed3\u679c\u7f13\u5b58\"\"\"\n        cache_key = f\"prediction:{match_id}\"\n        await self.cache.set(cache_key, prediction, ttl=ttl)\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_23","title":"\ud83d\udcca \u76d1\u63a7\u548c\u8bca\u65ad","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#1_5","title":"1. \u5065\u5eb7\u68c0\u67e5","text":"<pre><code># \u68c0\u67e5\u5e94\u7528\u5065\u5eb7\u72b6\u6001\ncurl http://localhost:8000/health\n\n# \u68c0\u67e5\u6570\u636e\u5e93\u5065\u5eb7\u72b6\u6001\ncurl http://localhost:8000/health/database\n\n# \u68c0\u67e5Redis\u5065\u5eb7\u72b6\u6001\ncurl http://localhost:8000/health/cache\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#2_6","title":"2. \u6027\u80fd\u76d1\u63a7","text":"<pre><code># \u67e5\u770b\u5e94\u7528\u6307\u6807\ncurl http://localhost:8000/metrics\n\n# \u67e5\u770bPrometheus\u6307\u6807\ncurl http://localhost:9090/metrics\n\n# \u67e5\u770bGrafana\u4eea\u8868\u677f\nopen http://localhost:3000\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#3_6","title":"3. \u65e5\u5fd7\u76d1\u63a7","text":"<pre><code># \u5b9e\u65f6\u67e5\u770b\u65e5\u5fd7\ntail -f logs/app.log\n\n# \u67e5\u770b\u9519\u8bef\u65e5\u5fd7\ngrep \"ERROR\" logs/app.log\n\n# \u67e5\u770b\u7279\u5b9a\u6a21\u5757\u65e5\u5fd7\ngrep \"prediction_service\" logs/app.log\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_24","title":"\ud83e\udd1d \u8d21\u732e\u6307\u5357","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#1_6","title":"1. \u4ee3\u7801\u8d21\u732e\u6d41\u7a0b","text":"<ol> <li>Fork\u9879\u76ee - \u5728GitHub\u4e0afork\u9879\u76ee\u5230\u4e2a\u4eba\u8d26\u6237</li> <li>\u521b\u5efa\u5206\u652f - \u57fa\u4e8edevelop\u5206\u652f\u521b\u5efa\u529f\u80fd\u5206\u652f</li> <li>\u5f00\u53d1\u529f\u80fd - \u9075\u5faa\u7f16\u7801\u89c4\u8303\u7f16\u5199\u4ee3\u7801</li> <li>\u7f16\u5199\u6d4b\u8bd5 - \u786e\u4fdd\u6d4b\u8bd5\u8986\u76d6\u7387\u8fbe\u5230\u8981\u6c42</li> <li>\u63d0\u4ea4\u4ee3\u7801 - \u4f7f\u7528\u89c4\u8303\u7684\u63d0\u4ea4\u4fe1\u606f\u683c\u5f0f</li> <li>\u521b\u5efaPR - \u63d0\u4f9b\u8be6\u7ec6\u7684PR\u63cf\u8ff0</li> <li>\u4ee3\u7801\u5ba1\u67e5 - \u54cd\u5e94\u5ba1\u67e5\u610f\u89c1\u5e76\u4fee\u6539</li> <li>\u5408\u5e76\u4ee3\u7801 - \u5ba1\u67e5\u901a\u8fc7\u540e\u5408\u5e76\u5230\u4e3b\u5206\u652f</li> </ol>"},{"location":"reference/DEVELOPMENT_GUIDE/#2_7","title":"2. \u63d0\u4ea4\u4fe1\u606f\u89c4\u8303","text":"<pre><code># \u63d0\u4ea4\u4fe1\u606f\u683c\u5f0f\n&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n\n# \u793a\u4f8b\nfeat(prediction): \u6dfb\u52a0\u65b0\u7684\u9884\u6d4b\u7b97\u6cd5\n\n\u5b9e\u73b0\u4e86\u57fa\u4e8e\u968f\u673a\u68ee\u6797\u7684\u9884\u6d4b\u7b97\u6cd5\uff0c\u63d0\u9ad8\u4e86\u9884\u6d4b\u51c6\u786e\u6027\u3002\n\n- \u6dfb\u52a0\u4e86RandomForestPredictionService\u7c7b\n- \u96c6\u6210\u4e86\u7279\u5f81\u91cd\u8981\u6027\u5206\u6790\n- \u6dfb\u52a0\u4e86\u76f8\u5e94\u7684\u5355\u5143\u6d4b\u8bd5\n\nCloses #123\n</code></pre> <p>\u63d0\u4ea4\u7c7b\u578b: - <code>feat</code>: \u65b0\u529f\u80fd - <code>fix</code>: \u9519\u8bef\u4fee\u590d - <code>docs</code>: \u6587\u6863\u66f4\u65b0 - <code>style</code>: \u4ee3\u7801\u683c\u5f0f\u5316 - <code>refactor</code>: \u4ee3\u7801\u91cd\u6784 - <code>test</code>: \u6d4b\u8bd5\u76f8\u5173 - <code>chore</code>: \u6784\u5efa\u6216\u8f85\u52a9\u5de5\u5177\u7684\u53d8\u52a8</p>"},{"location":"reference/DEVELOPMENT_GUIDE/#3_7","title":"3. \u4ee3\u7801\u5ba1\u67e5\u6807\u51c6","text":"<ul> <li>\u529f\u80fd\u6027: \u4ee3\u7801\u662f\u5426\u5b9e\u73b0\u4e86\u9884\u671f\u529f\u80fd</li> <li>\u6b63\u786e\u6027: \u662f\u5426\u6709\u6f5c\u5728\u7684bug\u6216\u9519\u8bef</li> <li>\u6027\u80fd: \u662f\u5426\u6709\u6027\u80fd\u95ee\u9898\u6216\u4f18\u5316\u7a7a\u95f4</li> <li>\u53ef\u8bfb\u6027: \u4ee3\u7801\u662f\u5426\u6e05\u6670\u6613\u61c2</li> <li>\u6d4b\u8bd5\u6027: \u662f\u5426\u6709\u8db3\u591f\u7684\u6d4b\u8bd5\u8986\u76d6</li> <li>\u5b89\u5168\u6027: \u662f\u5426\u5b58\u5728\u5b89\u5168\u9690\u60a3</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#_25","title":"\ud83d\udcda \u5b66\u4e60\u8d44\u6e90","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#1_7","title":"1. \u6280\u672f\u6808\u5b66\u4e60","text":"<ul> <li>FastAPI: FastAPI\u5b98\u65b9\u6587\u6863</li> <li>SQLAlchemy: SQLAlchemy 2.0\u6587\u6863</li> <li>Pydantic: Pydantic\u6587\u6863</li> <li>Pytest: Pytest\u6587\u6863</li> <li>Docker: Docker\u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#2_8","title":"2. \u6700\u4f73\u5b9e\u8df5","text":"<ul> <li>Python\u4ee3\u7801\u89c4\u8303: PEP 8</li> <li>\u7c7b\u578b\u6ce8\u89e3: PEP 484</li> <li>\u5f02\u6b65\u7f16\u7a0b: asyncio\u6587\u6863</li> <li>\u6d4b\u8bd5\u9a71\u52a8\u5f00\u53d1: TDD\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#3_8","title":"3. \u9879\u76ee\u5185\u90e8\u8d44\u6e90","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#_26","title":"\ud83d\udd17 \u6838\u5fc3\u6587\u6863","text":"<ul> <li>\u6570\u636e\u5e93\u67b6\u6784: DATABASE_SCHEMA.md - \u6570\u636e\u5e93\u8bbe\u8ba1\u548c\u8868\u7ed3\u6784</li> <li>\u6570\u636e\u91c7\u96c6\u914d\u7f6e: DATA_COLLECTION_SETUP.md - \u6570\u636e\u91c7\u96c6\u548c\u5904\u7406\u6d41\u7a0b</li> <li>\u673a\u5668\u5b66\u4e60\u6a21\u578b: ../ml/ML_MODEL_GUIDE.md - ML\u6a21\u578b\u5f00\u53d1\u548c\u90e8\u7f72</li> <li>\u76d1\u63a7\u7cfb\u7edf: MONITORING_GUIDE.md - \u76d1\u63a7\u548c\u544a\u8b66\u914d\u7f6e</li> <li>API\u6587\u6863: API_REFERENCE.md - REST API\u63a5\u53e3\u8bf4\u660e</li> <li>\u672f\u8bed\u8868: glossary.md - \u9879\u76ee\u672f\u8bed\u548c\u6982\u5ff5\u5b9a\u4e49</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#_27","title":"\ud83c\udfd7\ufe0f \u67b6\u6784\u548c\u8bbe\u8ba1","text":"<ul> <li>\u7cfb\u7edf\u67b6\u6784\u6587\u6863 - \u6574\u4f53\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1</li> <li>\u6570\u636e\u67b6\u6784\u8bbe\u8ba1 - \u6570\u636e\u5c42\u67b6\u6784</li> <li>\u7f13\u5b58\u5b9e\u73b0\u8bbe\u8ba1 - \u7f13\u5b58\u7b56\u7565\u8bbe\u8ba1</li> <li>\u91cd\u8bd5\u673a\u5236\u8bbe\u8ba1 - \u91cd\u8bd5\u548c\u5bb9\u9519\u673a\u5236</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#_28","title":"\ud83d\udee0\ufe0f \u8fd0\u7ef4\u548c\u90e8\u7f72","text":"<ul> <li>\u751f\u4ea7\u90e8\u7f72\u6307\u5357 - \u751f\u4ea7\u73af\u5883\u90e8\u7f72\u6d41\u7a0b</li> <li>\u8fd0\u7ef4\u624b\u518c - \u8fd0\u7ef4\u64cd\u4f5c\u6307\u5357</li> <li>Staging\u73af\u5883\u914d\u7f6e - \u6d4b\u8bd5\u73af\u5883\u914d\u7f6e</li> <li>\u7cfb\u7edf\u76d1\u63a7 - \u76d1\u63a7\u7cfb\u7edf\u914d\u7f6e</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#_29","title":"\ud83e\uddea \u6d4b\u8bd5\u548c\u8d28\u91cf","text":"<ul> <li>\u6d4b\u8bd5\u7b56\u7565\u6587\u6863 - \u6d4b\u8bd5\u7b56\u7565\u548c\u65b9\u6cd5\u8bba</li> <li>CI Guardian\u7cfb\u7edf - CI/CD\u8d28\u91cf\u95e8\u7981</li> <li>\u6d4b\u8bd5\u4f18\u5316\u62a5\u544a - \u6d4b\u8bd5\u4f18\u5316\u603b\u7ed3</li> <li>\u6027\u80fd\u6d4b\u8bd5\u65b9\u6848 - \u6027\u80fd\u6d4b\u8bd5\u6307\u5357</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#_30","title":"\ud83d\udcd6 \u5feb\u901f\u5f00\u59cb","text":"<ul> <li>\u5b8c\u6574\u7cfb\u7edf\u6f14\u793a - \u7cfb\u7edf\u529f\u80fd\u6f14\u793a</li> <li>\u5feb\u901f\u5f00\u59cb\u5de5\u5177\u6307\u5357 - \u5f00\u53d1\u5de5\u5177\u4f7f\u7528</li> <li>Makefile\u4f7f\u7528\u6307\u5357 - \u9879\u76ee\u5de5\u5177\u547d\u4ee4</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#_31","title":"\u2753 \u5e38\u89c1\u95ee\u9898","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#q1","title":"Q1: \u5982\u4f55\u89e3\u51b3\u4f9d\u8d56\u51b2\u7a81\uff1f","text":"<pre><code># \u6e05\u7406\u865a\u62df\u73af\u5883\nmake clean-env\n\n# \u91cd\u65b0\u521b\u5efa\u73af\u5883\nmake venv\nmake install\n\n# \u5982\u679c\u4ecd\u6709\u95ee\u9898\uff0c\u624b\u52a8\u89e3\u51b3\npip install --upgrade pip\npip install -r requirements/requirements.lock\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#q2","title":"Q2: \u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\u600e\u4e48\u529e\uff1f","text":"<pre><code># \u68c0\u67e5\u6570\u636e\u5e93\u670d\u52a1\u72b6\u6001\ndocker ps | grep postgres\n\n# \u67e5\u770b\u6570\u636e\u5e93\u65e5\u5fd7\nmake logs | grep db\n\n# \u91cd\u542f\u6570\u636e\u5e93\u670d\u52a1\ndocker-compose restart db\n\n# \u68c0\u67e5\u8fde\u63a5\u914d\u7f6e\ncat .env | grep DB_\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#q3","title":"Q3: \u6d4b\u8bd5\u5931\u8d25\u5982\u4f55\u8c03\u8bd5\uff1f","text":"<pre><code># \u8fd0\u884c\u5355\u4e2a\u6d4b\u8bd5\u6587\u4ef6\u83b7\u53d6\u8be6\u7ec6\u4fe1\u606f\npytest tests/unit/services/test_prediction_service.py -v -s\n\n# \u8fd0\u884c\u5931\u8d25\u7684\u7279\u5b9a\u6d4b\u8bd5\npytest tests/unit/services/test_prediction_service.py::TestPredictionService::test_predict_match_success -v -s\n\n# \u67e5\u770b\u8be6\u7ec6\u9519\u8bef\u4fe1\u606f\npytest --tb=long\n\n# \u8c03\u8bd5\u6a21\u5f0f\u8fd0\u884c\u6d4b\u8bd5\npytest --pdb\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#q4","title":"Q4: \u5982\u4f55\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff1f","text":"<pre><code># \u4f7f\u7528IDE\u63d2\u4ef6\n# - Python\u63d2\u4ef6\n# - Docker\u63d2\u4ef6\n# - Git\u63d2\u4ef6\n# - \u8fdc\u7a0b\u5f00\u53d1\u63d2\u4ef6\n\n# \u914d\u7f6e\u4ee3\u7801\u7247\u6bb5\n# - \u521b\u5efa\u5e38\u7528\u4ee3\u7801\u6a21\u677f\n# - \u914d\u7f6e\u81ea\u52a8\u8865\u5168\n# - \u8bbe\u7f6e\u5feb\u6377\u952e\n\n# \u4f7f\u7528\u9879\u76ee\u63d0\u4f9b\u7684\u5de5\u5177\nmake help  # \u67e5\u770b\u6240\u6709\u53ef\u7528\u547d\u4ee4\nmake dev   # \u5feb\u901f\u542f\u52a8\u5f00\u53d1\u73af\u5883\n</code></pre>"},{"location":"reference/DEVELOPMENT_GUIDE/#_32","title":"\ud83d\udcde \u83b7\u53d6\u5e2e\u52a9","text":"<p>\u5982\u679c\u60a8\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u53d6\u5e2e\u52a9\uff1a</p> <ol> <li>\u9879\u76ee\u6587\u6863: \u67e5\u770bdocs/\u76ee\u5f55\u4e0b\u7684\u8be6\u7ec6\u6587\u6863</li> <li>\u4ee3\u7801\u793a\u4f8b: \u53c2\u8003tests/\u76ee\u5f55\u4e0b\u7684\u6d4b\u8bd5\u7528\u4f8b</li> <li>\u56e2\u961f\u6c9f\u901a: \u901a\u8fc7\u56e2\u961f\u6c9f\u901a\u5de5\u5177\u8054\u7cfb</li> <li>Issue\u8ffd\u8e2a: \u5728GitHub\u4e0a\u521b\u5efaIssue</li> <li>\u4ee3\u7801\u5ba1\u67e5: \u63d0\u4ea4PR\u83b7\u53d6\u56e2\u961f\u53cd\u9988</li> </ol>"},{"location":"reference/DEVELOPMENT_GUIDE/#_33","title":"\ud83d\udccb \u6587\u6863\u4fe1\u606f","text":"<ul> <li>\u6587\u6863\u7248\u672c: v2.0 (AI\u589e\u5f3a\u7248)</li> <li>\u9002\u7528\u6846\u67b6: FastAPI + SQLAlchemy 2.0 + PostgreSQL</li> <li>Python\u7248\u672c: 3.11+</li> <li>\u6700\u540e\u66f4\u65b0: 2025-10-23</li> <li>\u7ef4\u62a4\u56e2\u961f: \u5f00\u53d1\u56e2\u961f + Claude AI\u52a9\u624b</li> <li>\u5ba1\u6838\u72b6\u6001: \u2705 \u5df2\u5ba1\u6838</li> </ul> <p>\u7248\u672c\u5386\u53f2: - v1.0 (2025-09-01): \u521d\u59cb\u5f00\u53d1\u6307\u5357 - v1.5 (2025-10-01): \u6dfb\u52a0\u6027\u80fd\u4f18\u5316\u548c\u76d1\u63a7\u7ae0\u8282 - v2.0 (2025-10-23): \u6dfb\u52a0AI\u8f85\u52a9\u5f00\u53d1\u6d41\u7a0b\u548c\u94fe\u63a5\u4fee\u590d</p>"},{"location":"reference/DEVELOPMENT_GUIDE/#_34","title":"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90","text":""},{"location":"reference/DEVELOPMENT_GUIDE/#_35","title":"\ud83d\udcda \u5fc5\u8bfb\u6587\u6863","text":"<ul> <li>CLAUDE.md - Claude AI\u52a9\u624b\u5f00\u53d1\u6307\u5bfc</li> <li>\u6570\u636e\u5e93\u67b6\u6784 - \u6570\u636e\u5e93\u8bbe\u8ba1\u548c\u8868\u7ed3\u6784</li> <li>API\u6587\u6863 - REST API\u63a5\u53e3\u8bf4\u660e</li> <li>\u6d4b\u8bd5\u7b56\u7565 - \u6d4b\u8bd5\u7b56\u7565\u548c\u65b9\u6cd5</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#_36","title":"\ud83d\udee0\ufe0f \u5f00\u53d1\u5de5\u5177","text":"<ul> <li>Makefile\u5de5\u5177\u6307\u5357 - 120+\u5f00\u53d1\u547d\u4ee4\u8be6\u89e3</li> <li>\u5feb\u901f\u5f00\u59cb\u5de5\u5177 - 5\u5206\u949f\u5f00\u53d1\u73af\u5883\u642d\u5efa</li> <li>\u5bb9\u5668\u5316\u5f00\u53d1 - Docker\u5f00\u53d1\u73af\u5883</li> </ul>"},{"location":"reference/DEVELOPMENT_GUIDE/#_37","title":"\ud83d\ude80 \u90e8\u7f72\u548c\u8fd0\u7ef4","text":"<ul> <li>\u751f\u4ea7\u90e8\u7f72\u6307\u5357 - \u751f\u4ea7\u73af\u5883\u90e8\u7f72</li> <li>\u76d1\u63a7\u914d\u7f6e - \u7cfb\u7edf\u76d1\u63a7\u548c\u544a\u8b66</li> <li>\u5b89\u5168\u914d\u7f6e - \u5b89\u5168\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"reference/MONITORING_GUIDE/","title":"\u76d1\u63a7\u7cfb\u7edf\u6307\u5357","text":""},{"location":"reference/MONITORING_GUIDE/#_2","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u91c7\u7528\u4f01\u4e1a\u7ea7\u76d1\u63a7\u67b6\u6784\uff0c\u63d0\u4f9b\u5168\u65b9\u4f4d\u7684\u7cfb\u7edf\u53ef\u89c2\u6d4b\u6027\u3002\u672c\u6307\u5357\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u76d1\u63a7\u7cfb\u7edf\u7684\u914d\u7f6e\u3001\u4f7f\u7528\u548c\u7ef4\u62a4\u65b9\u6cd5\uff0c\u786e\u4fdd\u7cfb\u7edf\u7684\u7a33\u5b9a\u8fd0\u884c\u548c\u6027\u80fd\u4f18\u5316\u3002</p>"},{"location":"reference/MONITORING_GUIDE/#_3","title":"\ud83c\udfd7\ufe0f \u76d1\u63a7\u67b6\u6784\u6982\u89c8","text":""},{"location":"reference/MONITORING_GUIDE/#_4","title":"\u76d1\u63a7\u751f\u6001\u7cfb\u7edf","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u76d1\u63a7\u6570\u636e\u91c7\u96c6\u5c42                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   \u5e94\u7528\u76d1\u63a7      \u2502   \u57fa\u7840\u8bbe\u65bd\u76d1\u63a7    \u2502        \u4e1a\u52a1\u76d1\u63a7              \u2502\n\u2502  (APM)         \u2502  (Infrastructure) \u2502     (Business)              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 - \u8bf7\u6c42\u8ffd\u8e2a      \u2502 - \u7cfb\u7edf\u8d44\u6e90       \u2502 - \u9884\u6d4b\u51c6\u786e\u6027                 \u2502\n\u2502 - \u9519\u8bef\u8ddf\u8e2a      \u2502 - \u7f51\u7edc\u6d41\u91cf       \u2502 - \u6570\u636e\u8d28\u91cf                   \u2502\n\u2502 - \u6027\u80fd\u5206\u6790      \u2502 - \u670d\u52a1\u5065\u5eb7       \u2502 - \u7528\u6237\u6d3b\u8dc3\u5ea6                 \u2502\n\u2502 - \u81ea\u5b9a\u4e49\u6307\u6807     \u2502 - \u65e5\u5fd7\u805a\u5408       \u2502 - \u6536\u96c6\u6210\u529f\u7387                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u6570\u636e\u5b58\u50a8\u4e0e\u5904\u7406\u5c42                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   Prometheus    \u2502      Loki        \u2502        InfluxDB              \u2502\n\u2502    (\u65f6\u5e8f\u6570\u636e)    \u2502    (\u65e5\u5fd7\u5b58\u50a8)     \u2502        (\u4e1a\u52a1\u6570\u636e)            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u53ef\u89c6\u5316\u4e0e\u544a\u8b66\u5c42                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502    Grafana      \u2502  Alertmanager   \u2502         PagerDuty             \u2502\n\u2502   (\u4eea\u8868\u677f)      \u2502   (\u544a\u8b66\u7ba1\u7406)     \u2502        (\u901a\u77e5)                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_5","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"\u7ec4\u4ef6 \u7528\u9014 \u7aef\u53e3 \u72b6\u6001 Prometheus \u6307\u6807\u6536\u96c6\u548c\u5b58\u50a8 9090 \u2705 \u8fd0\u884c\u4e2d Grafana \u53ef\u89c6\u5316\u4eea\u8868\u677f 3000 \u2705 \u8fd0\u884c\u4e2d Loki \u65e5\u5fd7\u805a\u5408\u548c\u67e5\u8be2 3100 \u2705 \u8fd0\u884c\u4e2d Alertmanager \u544a\u8b66\u8def\u7531\u548c\u901a\u77e5 9093 \u2705 \u8fd0\u884c\u4e2d Jaeger \u5206\u5e03\u5f0f\u8ffd\u8e2a 16686 \u26a0\ufe0f \u914d\u7f6e\u4e2d"},{"location":"reference/MONITORING_GUIDE/#_6","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":""},{"location":"reference/MONITORING_GUIDE/#_7","title":"\u542f\u52a8\u76d1\u63a7\u670d\u52a1","text":"<pre><code># \u542f\u52a8\u6240\u6709\u76d1\u63a7\u670d\u52a1\nmake up\n\n# \u4ec5\u542f\u52a8\u76d1\u63a7\u670d\u52a1\u6808\ndocker-compose --profile monitoring up -d\n\n# \u68c0\u67e5\u670d\u52a1\u72b6\u6001\nmake monitoring-status\n\n# \u67e5\u770b\u670d\u52a1\u65e5\u5fd7\nmake logs monitoring\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_8","title":"\u8bbf\u95ee\u76d1\u63a7\u754c\u9762","text":"\u670d\u52a1 \u5730\u5740 \u8d26\u6237 \u5bc6\u7801 Grafana http://localhost:3000 admin admin Prometheus http://localhost:9090 - - Alertmanager http://localhost:9093 - - Jaeger http://localhost:16686 - -"},{"location":"reference/MONITORING_GUIDE/#_9","title":"\ud83d\udcca \u6307\u6807\u76d1\u63a7","text":""},{"location":"reference/MONITORING_GUIDE/#prometheus","title":"Prometheus \u6307\u6807","text":""},{"location":"reference/MONITORING_GUIDE/#_10","title":"\u6838\u5fc3\u4e1a\u52a1\u6307\u6807","text":"<pre><code># \u9884\u6d4b\u76f8\u5173\u6307\u6807\npredictions_total{model_version=\"v1.0.0\"}  # \u9884\u6d4b\u603b\u6570\nprediction_duration_seconds             # \u9884\u6d4b\u8017\u65f6\nprediction_accuracy{model=\"random_forest\"} # \u9884\u6d4b\u51c6\u786e\u7387\n\n# \u6570\u636e\u8d28\u91cf\u6307\u6807\ndata_collection_success_rate{source=\"api\"} # \u6570\u636e\u6536\u96c6\u6210\u529f\u7387\nfeature_processing_duration_seconds      # \u7279\u5f81\u5904\u7406\u8017\u65f6\ncache_hit_ratio{cache_type=\"prediction\"}   # \u7f13\u5b58\u547d\u4e2d\u7387\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_11","title":"\u7cfb\u7edf\u6027\u80fd\u6307\u6807","text":"<pre><code># \u5e94\u7528\u6027\u80fd\u6307\u6807\nhttp_requests_total{method=\"GET\", status=\"200\"}  # HTTP\u8bf7\u6c42\u603b\u6570\nhttp_request_duration_seconds                   # HTTP\u8bf7\u6c42\u8017\u65f6\nuvicorn_workers_active                           # \u6d3b\u8dc3\u5de5\u4f5c\u8fdb\u7a0b\u6570\n\n# \u6570\u636e\u5e93\u6027\u80fd\u6307\u6807\ndatabase_connections_active                       # \u6d3b\u8dc3\u6570\u636e\u5e93\u8fde\u63a5\u6570\ndatabase_query_duration_seconds                   # \u6570\u636e\u5e93\u67e5\u8be2\u8017\u65f6\ndatabase_connections_pool_utilization           # \u8fde\u63a5\u6c60\u5229\u7528\u7387\n\n# \u7cfb\u7edf\u8d44\u6e90\u6307\u6807\nsystem_cpu_usage_percent                          # CPU\u4f7f\u7528\u7387\nsystem_memory_usage_bytes                        # \u5185\u5b58\u4f7f\u7528\u91cf\nsystem_disk_usage_percent                        # \u78c1\u76d8\u4f7f\u7528\u7387\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_12","title":"\u81ea\u5b9a\u4e49\u6307\u6807\u521b\u5efa","text":"<pre><code>from src.monitoring.metrics_collector import get_metrics_collector\nfrom prometheus_client import Counter, Histogram, Gauge\n\nclass PredictionMetrics:\n    \"\"\"\u9884\u6d4b\u6307\u6807\u7c7b\"\"\"\n\n    def __init__(self):\n        self.collector = get_metrics_collector()\n\n        # \u9884\u6d4b\u8ba1\u6570\u5668\n        self.prediction_counter = Counter(\n            'predictions_total',\n            'Total number of predictions',\n            ['model_version', 'status']\n        )\n\n        # \u9884\u6d4b\u8017\u65f6\u76f4\u65b9\u56fe\n        self.prediction_duration = Histogram(\n            'prediction_duration_seconds',\n            'Time spent making predictions',\n            buckets=[0.1, 0.5, 1.0, 2.0, 5.0, 10.0]\n        )\n\n        # \u9884\u6d4b\u51c6\u786e\u7387\u4eea\u8868\n        self.prediction_accuracy = Gauge(\n            'prediction_accuracy',\n            'Current prediction accuracy',\n            ['model', 'time_range']\n        )\n\n    def record_prediction(self, model_version: str, success: bool, duration: float):\n        \"\"\"\u8bb0\u5f55\u9884\u6d4b\u6307\u6807\"\"\"\n        status = 'success' if success else 'failure'\n        self.prediction_counter.labels(\n            model_version=model_version,\n            status=status\n        ).inc()\n        self.prediction_duration.observe(duration)\n\n    def update_accuracy(self, model: str, accuracy: float):\n        \"\"\"\u66f4\u65b0\u51c6\u786e\u7387\u6307\u6807\"\"\"\n        self.prediction_accuracy.labels(model=model).set(accuracy)\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_13","title":"\u6307\u6807\u66b4\u9732\u914d\u7f6e","text":"<pre><code># src/main.py\nfrom prometheus_client import generate_latest, REGISTRY\nfrom fastapi import Response\n\n@app.get(\"/metrics\")\nasync def metrics():\n    \"\"\"Prometheus\u6307\u6807\u7aef\u70b9\"\"\"\n    if generate_latest(REGISTRY):\n        return Response(\n            generate_latest(REGISTRY),\n            media_type=\"text/plain; version=0.0.4; charset=utf-8\"\n        )\n    return Response(\"No metrics available\", status_code=404)\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#grafana","title":"\ud83d\udcc8 Grafana \u4eea\u8868\u677f","text":""},{"location":"reference/MONITORING_GUIDE/#_14","title":"\u9884\u5b9a\u4e49\u4eea\u8868\u677f","text":""},{"location":"reference/MONITORING_GUIDE/#1","title":"1. \u7cfb\u7edf\u6982\u89c8\u4eea\u8868\u677f","text":"<ul> <li>\u76ee\u7684: \u6574\u4f53\u7cfb\u7edf\u5065\u5eb7\u72b6\u6001\u76d1\u63a7</li> <li>\u5173\u952e\u6307\u6807: CPU\u3001\u5185\u5b58\u3001\u8bf7\u6c42\u91cf\u3001\u9519\u8bef\u7387</li> <li>\u5237\u65b0\u95f4\u9694: 30\u79d2</li> </ul>"},{"location":"reference/MONITORING_GUIDE/#2","title":"2. \u5e94\u7528\u6027\u80fd\u4eea\u8868\u677f","text":"<ul> <li>\u76ee\u7684: \u5e94\u7528\u5c42\u6027\u80fd\u5206\u6790</li> <li>\u5173\u952e\u6307\u6807: API\u54cd\u5e94\u65f6\u95f4\u3001\u9519\u8bef\u7387\u3001\u5e76\u53d1\u6570</li> <li>\u5237\u65b0\u95f4\u9694: 15\u79d2</li> </ul>"},{"location":"reference/MONITORING_GUIDE/#3","title":"3. \u4e1a\u52a1\u6307\u6807\u4eea\u8868\u677f","text":"<ul> <li>\u76ee\u7684: \u4e1a\u52a1\u6307\u6807\u76d1\u63a7</li> <li>\u5173\u952e\u6307\u6807: \u9884\u6d4b\u91cf\u3001\u51c6\u786e\u7387\u3001\u6570\u636e\u6536\u96c6\u7387</li> <li>\u5237\u65b0\u95f4\u9694: 1\u5206\u949f</li> </ul>"},{"location":"reference/MONITORING_GUIDE/#4","title":"4. \u6570\u636e\u5e93\u6027\u80fd\u4eea\u8868\u677f","text":"<ul> <li>\u76ee\u7684: \u6570\u636e\u5e93\u6027\u80fd\u76d1\u63a7</li> <li>\u5173\u952e\u6307\u6807: \u8fde\u63a5\u6570\u3001\u67e5\u8be2\u65f6\u95f4\u3001\u9501\u7b49\u5f85</li> <li>\u5237\u65b0\u95f4\u9694: 30\u79d2</li> </ul>"},{"location":"reference/MONITORING_GUIDE/#_15","title":"\u4eea\u8868\u677f\u914d\u7f6e\u793a\u4f8b","text":"<pre><code>{\n  \"dashboard\": {\n    \"title\": \"\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u6982\u89c8\",\n    \"panels\": [\n      {\n        \"title\": \"API\u8bf7\u6c42\u7387\",\n        \"type\": \"graph\",\n        \"targets\": [\n          {\n            \"expr\": \"rate(http_requests_total[5m])\",\n            \"legendFormat\": \"{{method}} {{status}}\"\n          }\n        ]\n      },\n      {\n        \"title\": \"\u54cd\u5e94\u65f6\u95f4\",\n        \"type\": \"stat\",\n        \"targets\": [\n          {\n            \"expr\": \"histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))\",\n            \"legendFormat\": \"95th percentile\"\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_16","title":"\u5bfc\u5165\u9884\u914d\u7f6e\u4eea\u8868\u677f","text":"<pre><code># \u5bfc\u5165\u7cfb\u7edf\u4eea\u8868\u677f\ncurl -X POST \\\n  http://admin:admin@localhost:3000/api/dashboards/db \\\n  -H \"Content-Type: application/json\" \\\n  -d @config/monitoring/system-overview.json\n\n# \u5bfc\u5165\u4e1a\u52a1\u4eea\u8868\u677f\ncurl -X POST \\\n  http://admin:admin@localhost:3000/api/dashboards/db \\\n  -H \"Content-Type: application/json\" \\\n  -d @config/monitoring/business-metrics.json\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_17","title":"\ud83d\udea8 \u544a\u8b66\u7cfb\u7edf","text":""},{"location":"reference/MONITORING_GUIDE/#alertmanager","title":"Alertmanager \u914d\u7f6e","text":"<pre><code># config/monitoring/alertmanager.yml\nglobal:\n  smtp_smarthost: 'localhost:587'\n  smtp_from: 'alerts@football-prediction.com'\n  smtp_auth_username: 'alerts'\n  smtp_auth_password: 'password'\n\nroute:\n  group_by: ['alertname', 'cluster', 'service']\n  group_wait: 10s\n  group_interval: 10s\n  repeat_interval: 12h\n  receiver: 'web.hook'\n\nreceivers:\n  - name: 'web.hook'\n    webhook_configs:\n      - url: 'http://localhost:5001/webhook'\n        send_resolved: true\n\n  - name: 'email.notifications'\n    email_configs:\n      - to: 'admin@football-prediction.com'\n        subject: '[Alert] Football Prediction System'\n        body: |\n          {{ range .Alerts }}\n          Alert: {{ .Annotations.summary }}\n          Description: {{ .Annotations.description }}\n          {{ end }}\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_18","title":"\u544a\u8b66\u89c4\u5219\u5b9a\u4e49","text":"<pre><code># config/monitoring/alert_rules.yml\ngroups:\n  - name: system_alerts\n    rules:\n      - alert: HighCPUUsage\n        expr: system_cpu_usage_percent &gt; 80\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High CPU usage detected\"\n          description: \"CPU usage is above 80% for more than 5 minutes\"\n\n      - alert: HighMemoryUsage\n        expr: system_memory_usage_bytes / system_memory_capacity_bytes &gt; 0.9\n        for: 5m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"High memory usage detected\"\n          description: \"Memory usage is above 90%\"\n\n  - name: application_alerts\n    rules:\n      - alert: HighErrorRate\n        expr: rate(http_requests_total{status=~\"5..\"}[5m]) / rate(http_requests_total[5m]) &gt; 0.05\n        for: 2m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High error rate detected\"\n          description: \"Error rate is above 5% for more than 2 minutes\"\n\n      - alert: LowPredictionAccuracy\n        expr: prediction_accuracy{model=\"random_forest\"} &lt; 0.7\n        for: 10m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"Low prediction accuracy\"\n          description: \"Prediction accuracy for random_forest model is below 70%\"\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_19","title":"\u81ea\u5b9a\u4e49\u544a\u8b66\u96c6\u6210","text":"<pre><code>from src.monitoring.alert_manager import AlertManager, AlertSeverity, AlertType\n\nclass CustomAlertHandler:\n    \"\"\"\u81ea\u5b9a\u4e49\u544a\u8b66\u5904\u7406\u5668\"\"\"\n\n    def __init__(self):\n        self.alert_manager = AlertManager()\n\n    def check_prediction_accuracy(self):\n        \"\"\"\u68c0\u67e5\u9884\u6d4b\u51c6\u786e\u7387\"\"\"\n        accuracy = self.get_current_accuracy()\n\n        if accuracy &lt; 0.7:\n            self.alert_manager.create_alert(\n                name=\"LowPredictionAccuracy\",\n                severity=AlertSeverity.MEDIUM,\n                alert_type=AlertType.SYSTEM,\n                message=f\"Prediction accuracy dropped to {accuracy:.2%}\"\n            )\n\n    def check_data_collection_health(self):\n        \"\"\"\u68c0\u67e5\u6570\u636e\u6536\u96c6\u5065\u5eb7\u72b6\u6001\"\"\"\n        success_rate = self.get_collection_success_rate()\n\n        if success_rate &lt; 0.95:\n            self.alert_manager.create_alert(\n                name=\"DataCollectionIssues\",\n                severity=AlertSeverity.HIGH,\n                alert_type=AlertType.DATABASE,\n                message=f\"Data collection success rate: {success_rate:.2%}\"\n            )\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_20","title":"\ud83d\udcdd \u65e5\u5fd7\u7ba1\u7406","text":""},{"location":"reference/MONITORING_GUIDE/#loki","title":"Loki \u65e5\u5fd7\u914d\u7f6e","text":"<pre><code># config/monitoring/loki.yml\nauth_enabled: false\n\nserver:\n  http_listen_port: 3100\n  grpc_listen_port: 9096\n\ningester:\n  lifecycler:\n    address: 127.0.0.1:9095\n    ring:\n      kvstore:\n        store: inmemory\n    max_transfer_retries: 0\n    final_sleep: 0s\n  chunk_idle_period: 1h\n  max_chunk_age: 1h\n  chunk_target_size: 1048576\n  chunk_retain_period: 30s\n  wal:\n    dir: /tmp/wal\n    enabled: true\n\nschema_config:\n  configs:\n    - from: 2024-01-01\n      store:\n        type: boltdb-shipper\n        tsdb_shipper:\n          active_index_directory: /tmp/loki/boltdb-shipper-active\n          cache_location: /tmp/loki/boltdb-shipper-cache\n          shared_store: s3\n          resync_interval: 5m\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_21","title":"\u7ed3\u6784\u5316\u65e5\u5fd7\u914d\u7f6e","text":"<pre><code># src/core/logging.py\nimport logging\nimport json\nimport sys\nfrom datetime import datetime\nfrom pythonjsonlogger import jsonlogger\n\nclass StructuredLogger:\n    \"\"\"\u7ed3\u6784\u5316\u65e5\u5fd7\u5668\"\"\"\n\n    def __init__(self, name: str):\n        self.logger = logging.getLogger(name)\n        self.setup_logger()\n\n    def setup_logger(self):\n        \"\"\"\u8bbe\u7f6e\u65e5\u5fd7\u5668\"\"\"\n        handler = logging.StreamHandler(sys.stdout)\n        handler.setFormatter(jsonlogger.JsonFormatter(\n            fmt='%(asctime)s %(name)s %(levelname)s %(message)s'\n        ))\n\n        self.logger.addHandler(handler)\n        self.logger.setLevel(logging.INFO)\n\n    def log_request(self, method: str, path: str, status: int, duration: float):\n        \"\"\"\u8bb0\u5f55\u8bf7\u6c42\u65e5\u5fd7\"\"\"\n        self.logger.info(\n            \"HTTP Request\",\n            extra={\n                \"event_type\": \"http_request\",\n                \"method\": method,\n                \"path\": path,\n                \"status\": status,\n                \"duration_ms\": round(duration * 1000, 2),\n                \"timestamp\": datetime.utcnow().isoformat()\n            }\n        )\n\n    def log_prediction(self, match_id: int, model: str, success: bool, confidence: float):\n        \"\"\"\u8bb0\u5f55\u9884\u6d4b\u65e5\u5fd7\"\"\"\n        self.logger.info(\n            \"Prediction Result\",\n            extra={\n                \"event_type\": \"prediction\",\n                \"match_id\": match_id,\n                \"model\": model,\n                \"success\": success,\n                \"confidence\": confidence,\n                \"timestamp\": datetime.utcnow().isoformat()\n            }\n        )\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#loki-promtail","title":"Loki Promtail \u914d\u7f6e","text":"<pre><code># config/monitoring/promtail.yml\nserver:\n  http_listen_port: 9080\n  grpc_listen_port: 0\n\npositions:\n  filename: /tmp/positions.yaml\n\nclients:\n  - url: http://localhost:3100/loki/api/v1/push\n\nscrape_configs:\n  - job_name: football-prediction-logs\n    static_configs:\n      - targets:\n        - localhost:8000\n    labels:\n      job: football-prediction\n      __path__: /var/log/football-prediction/*.log\n\n    pipeline_stages:\n      - json:\n          expressions:\n            level: level\n            message: message\n            timestamp: timestamp\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_22","title":"\ud83d\udd0d \u5206\u5e03\u5f0f\u8ffd\u8e2a","text":""},{"location":"reference/MONITORING_GUIDE/#jaeger","title":"Jaeger \u914d\u7f6e","text":"<pre><code># config/monitoring/jaeger.yml\ncollector:\n  zipkin:\n    host_port: 9411\n\nsampling:\n  default_strategy:\n    type: probabilistic\n    param: 0.1  # 10% sampling rate\n\nstorage:\n  type: memory\n  memory:\n    max_traces: 50000\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#opentelemetry","title":"OpenTelemetry \u96c6\u6210","text":"<pre><code># src/monitoring/apm_integration.py\nfrom opentelemetry import trace\nfrom opentelemetry.exporter.jaeger.thrift import JaegerExporter\nfrom opentelemetry.sdk.trace import TracerProvider\nfrom opentelemetry.sdk.trace.export import BatchSpanProcessor\nfrom opentelemetry.instrumentation.fastapi import FastAPIInstrumentor\nfrom opentelemetry.instrumentation.sqlalchemy import SQLAlchemyInstrumentor\n\nclass APMIntegration:\n    \"\"\"APM\u96c6\u6210\u7c7b\"\"\"\n\n    def __init__(self):\n        self.setup_tracing()\n        self.setup_instrumentation()\n\n    def setup_tracing(self):\n        \"\"\"\u8bbe\u7f6e\u8ffd\u8e2a\"\"\"\n        jaeger_exporter = JaegerExporter(\n            agent_host_name=\"localhost\",\n            agent_port=6831,\n        )\n\n        span_processor = BatchSpanProcessor(jaeger_exporter)\n\n        self.tracer_provider = TracerProvider(\n            span_processors=[span_processor]\n        )\n\n        trace.set_tracer_provider(self.tracer_provider)\n\n    def setup_instrumentation(self):\n        \"\"\"\u8bbe\u7f6e\u81ea\u52a8\u4eea\u8868\u5316\"\"\"\n        # FastAPI\u4eea\u8868\u5316\n        FastAPIInstrumentor().instrument()\n\n        # SQLAlchemy\u4eea\u8868\u5316\n        SQLAlchemyInstrumentor().instrument()\n\n# \u5728main.py\u4e2d\u542f\u7528APM\ndef setup_apm():\n    \"\"\"\u8bbe\u7f6eAPM\"\"\"\n    apm = APMIntegration()\n    return apm\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_23","title":"\u81ea\u5b9a\u4e49\u8ffd\u8e2a","text":"<pre><code>from opentelemetry import trace\n\ntracer = trace.get_tracer(__name__)\n\n@tracer.start_as_current_span(\"predict_match\")\nasync def predict_match(match_id: int) -&gt; Dict:\n    \"\"\"\u9884\u6d4b\u6bd4\u8d5b\uff0c\u5e26\u8ffd\u8e2a\"\"\"\n    with tracer.start_as_current_span(\"load_features\") as span:\n        span.set_attribute(\"match_id\", match_id)\n        features = await load_match_features(match_id)\n\n    with tracer.start_as_current_span(\"model_inference\") as span:\n        span.set_attribute(\"model\", \"random_forest\")\n        prediction = await run_prediction_model(features)\n\n    with tracer.start_as_current_span(\"save_result\") as span:\n        span.set_attribute(\"prediction_confidence\", prediction.get(\"confidence\"))\n        await save_prediction_result(match_id, prediction)\n\n    return prediction\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_24","title":"\ud83d\udee0\ufe0f \u76d1\u63a7\u5de5\u5177\u4f7f\u7528","text":""},{"location":"reference/MONITORING_GUIDE/#promql","title":"\u5e38\u7528PromQL\u67e5\u8be2","text":"<pre><code># 1. \u7cfb\u7edf\u8d1f\u8f7d\u76d1\u63a7\n# CPU\u4f7f\u7528\u7387\nrate(cpu_usage_total[5m])\n\n# \u5185\u5b58\u4f7f\u7528\u7387\n(system_memory_usage_bytes / system_memory_capacity_bytes) * 100\n\n# 2. \u5e94\u7528\u6027\u80fd\u76d1\u63a7\n# API\u9519\u8bef\u7387\n(rate(http_requests_total{status=~\"5..\"}[5m]) / rate(http_requests_total[5m])) * 100\n\n# 95th\u767e\u5206\u4f4d\u54cd\u5e94\u65f6\u95f4\nhistogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))\n\n# 3. \u4e1a\u52a1\u6307\u6807\u76d1\u63a7\n# \u9884\u6d4b\u51c6\u786e\u7387\u8d8b\u52bf\nprediction_accuracy{model=\"random_forest\"}\n\n# \u6570\u636e\u6536\u96c6\u6210\u529f\u7387\nrate(data_collection_success_total[5m]) / rate(data_collection_total[5m]) * 100\n\n# 4. \u6570\u636e\u5e93\u6027\u80fd\u76d1\u63a7\n# \u6162\u67e5\u8be2\nhistogram_quantile(0.95, database_query_duration_seconds_bucket[5m]) &gt; 1.0\n\n# \u8fde\u63a5\u6c60\u4f7f\u7528\u7387\ndatabase_connections_active / database_connections_max * 100\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#grafana_1","title":"Grafana \u67e5\u8be2\u6280\u5de7","text":"<pre><code>-- 1. \u65f6\u95f4\u5e8f\u5217\u5bf9\u6bd4\nSELECT\n  time,\n  value\nFROM (\n    SELECT\n      $__timeSeriesAlias(time, value)\n    FROM (\n      SELECT\n        now() AS time,\n        avg(rate(http_requests_total[5m])) AS value\n      FROM http_requests_total\n    )\n  )\n\n-- 2. \u5f02\u5e38\u68c0\u6d4b\nSELECT\n  time,\n  value,\n  value - avg(value) OVER (ORDER BY time ROWS BETWEEN 5 PRECEDING AND 5 FOLLOWING) AS anomaly\nFROM metrics\nWHERE metric = 'cpu_usage'\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_25","title":"\u544a\u8b66\u6545\u969c\u6392\u9664","text":"<pre><code># 1. \u68c0\u67e5Alertmanager\u72b6\u6001\ncurl http://localhost:9093/api/v1/status\n\n# 2. \u67e5\u770b\u6d3b\u8dc3\u544a\u8b66\ncurl http://localhost:9093/api/v1/alerts\n\n# 3. \u9a8c\u8bc1Prometheus\u914d\u7f6e\ncurl http://localhost:9090/-/healthy\n\n# 4. \u68c0\u67e5Grafana\u6570\u636e\u6e90\ncurl -u admin:admin http://localhost:3000/api/datasources\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_26","title":"\ud83d\udcca \u76d1\u63a7\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"reference/MONITORING_GUIDE/#_27","title":"\u6307\u6807\u8bbe\u8ba1\u539f\u5219","text":"<ol> <li>\u6709\u610f\u4e49: \u6307\u6807\u540d\u79f0\u548c\u6807\u7b7e\u5e94\u8be5\u6e05\u6670\u5730\u8868\u8fbe\u4e1a\u52a1\u542b\u4e49</li> <li>\u4e00\u81f4\u6027: \u76f8\u540c\u7c7b\u578b\u7684\u6307\u6807\u4f7f\u7528\u76f8\u540c\u7684\u547d\u540d\u89c4\u8303</li> <li>\u53ef\u805a\u5408: \u6307\u6807\u5e94\u8be5\u652f\u6301\u805a\u5408\u64cd\u4f5c</li> <li>\u57fa\u6570\u63a7\u5236: \u6807\u7b7e\u57fa\u6570\u5e94\u8be5\u5408\u7406\u63a7\u5236\uff0c\u907f\u514d\u9ad8\u57fa\u6570\u95ee\u9898</li> </ol>"},{"location":"reference/MONITORING_GUIDE/#_28","title":"\u544a\u8b66\u8bbe\u8ba1\u539f\u5219","text":"<ol> <li>\u53ef\u64cd\u4f5c: \u544a\u8b66\u5e94\u8be5\u6709\u660e\u786e\u7684\u5904\u7406\u5efa\u8bae</li> <li>\u907f\u514d\u566a\u58f0: \u8bbe\u7f6e\u5408\u7406\u7684\u9608\u503c\u548c\u6301\u7eed\u65f6\u95f4</li> <li>\u5206\u7ea7\u7ba1\u7406: \u4f7f\u7528\u4e0d\u540c\u7684\u4e25\u91cd\u7a0b\u5ea6\u7ea7\u522b</li> <li>\u81ea\u52a8\u5316: \u4f18\u5148\u8003\u8651\u81ea\u52a8\u5316\u5904\u7406</li> </ol>"},{"location":"reference/MONITORING_GUIDE/#_29","title":"\u65e5\u5fd7\u8bbe\u8ba1\u539f\u5219","text":"<ol> <li>\u7ed3\u6784\u5316: \u4f7f\u7528\u7ed3\u6784\u5316\u683c\u5f0f\uff08JSON\uff09</li> <li>\u4e0a\u4e0b\u6587: \u5305\u542b\u8db3\u591f\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f</li> <li>\u7ea7\u522b\u63a7\u5236: \u5408\u7406\u4f7f\u7528\u65e5\u5fd7\u7ea7\u522b</li> <li>\u6027\u80fd\u5f71\u54cd: \u907f\u514d\u65e5\u5fd7\u5f71\u54cd\u5e94\u7528\u6027\u80fd</li> </ol>"},{"location":"reference/MONITORING_GUIDE/#_30","title":"\ud83d\ude80 \u6545\u969c\u6392\u67e5\u6307\u5357","text":""},{"location":"reference/MONITORING_GUIDE/#_31","title":"\u5e38\u89c1\u76d1\u63a7\u95ee\u9898","text":""},{"location":"reference/MONITORING_GUIDE/#1_1","title":"1. \u6307\u6807\u7f3a\u5931","text":"<pre><code># \u68c0\u67e5\u6307\u6807\u7aef\u70b9\ncurl http://localhost:8000/metrics\n\n# \u68c0\u67e5Prometheus\u914d\u7f6e\ndocker logs prometheus\n\n# \u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\ncurl -X POST http://localhost:9090/-/reload\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#2_1","title":"2. \u4eea\u8868\u677f\u65e0\u6570\u636e","text":"<pre><code># \u68c0\u67e5Grafana\u6570\u636e\u6e90\u914d\u7f6e\ncurl -u admin:admin http://localhost:3000/api/datasources\n\n# \u68c0\u67e5Prometheus\u67e5\u8be2\ncurl -G 'http://localhost:9090/api/v1/query' \\\n  --data-urlencode 'query=up'\n\n# \u9a8c\u8bc1\u6570\u636e\u8fde\u901a\u6027\ndocker exec -it prometheus promtool query instant 'up'\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#3_1","title":"3. \u544a\u8b66\u4e0d\u751f\u6548","text":"<pre><code># \u68c0\u67e5Alertmanager\u914d\u7f6e\ncurl http://localhost:9093/api/v1/status\n\n# \u9a8c\u8bc1\u544a\u8b66\u89c4\u5219\npromtool check rules config/monitoring/alert_rules.yml\n\n# \u91cd\u65b0\u52a0\u8f7d\u544a\u8b66\u89c4\u5219\ncurl -X POST http://localhost:9093/-/reload\n</code></pre>"},{"location":"reference/MONITORING_GUIDE/#_32","title":"\u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":"<ol> <li>\u6307\u6807\u6536\u96c6\u4f18\u5316</li> <li>\u63a7\u5236\u6307\u6807\u6570\u91cf\u548c\u91c7\u96c6\u9891\u7387</li> <li>\u4f7f\u7528\u6279\u91cf\u63a8\u9001\u51cf\u5c11\u7f51\u7edc\u5f00\u9500</li> <li> <p>\u5408\u7406\u8bbe\u7f6e\u91c7\u6837\u7387</p> </li> <li> <p>\u5b58\u50a8\u4f18\u5316</p> </li> <li>\u914d\u7f6e\u6570\u636e\u4fdd\u7559\u7b56\u7565</li> <li>\u4f7f\u7528\u5408\u9002\u7684\u5b58\u50a8\u540e\u7aef</li> <li> <p>\u5b9a\u671f\u6e05\u7406\u8fc7\u671f\u6570\u636e</p> </li> <li> <p>\u67e5\u8be2\u4f18\u5316</p> </li> <li>\u4f7f\u7528\u65f6\u95f4\u8303\u56f4\u9650\u5236</li> <li>\u907f\u514d\u5168\u8868\u626b\u63cf</li> <li>\u4f18\u5316\u67e5\u8be2\u8bed\u53e5</li> </ol>"},{"location":"reference/MONITORING_GUIDE/#_33","title":"\ud83d\udccb \u76d1\u63a7\u68c0\u67e5\u6e05\u5355","text":""},{"location":"reference/MONITORING_GUIDE/#_34","title":"\u65e5\u5e38\u68c0\u67e5\u9879","text":"<ul> <li> \u68c0\u67e5\u6240\u6709\u670d\u52a1\u72b6\u6001</li> <li> \u67e5\u770b\u7cfb\u7edf\u6982\u89c8\u4eea\u8868\u677f</li> <li> \u68c0\u67e5\u544a\u8b66\u72b6\u6001</li> <li> \u9a8c\u8bc1\u65e5\u5fd7\u6536\u96c6\u6b63\u5e38</li> <li> \u786e\u8ba4\u5907\u4efd\u4efb\u52a1\u5b8c\u6210</li> </ul>"},{"location":"reference/MONITORING_GUIDE/#_35","title":"\u5468\u671f\u68c0\u67e5\u9879","text":"<ul> <li> \u5ba1\u67e5\u544a\u8b66\u89c4\u5219\u5408\u7406\u6027</li> <li> \u66f4\u65b0\u4eea\u8868\u677f\u914d\u7f6e</li> <li> \u6e05\u7406\u8fc7\u671f\u76d1\u63a7\u6570\u636e</li> <li> \u4f18\u5316\u6027\u80fd\u74f6\u9888</li> <li> \u66f4\u65b0\u76d1\u63a7\u6587\u6863</li> </ul>"},{"location":"reference/MONITORING_GUIDE/#_36","title":"\u7d27\u6025\u54cd\u5e94\u6d41\u7a0b","text":"<ol> <li>\u6536\u5230\u544a\u8b66 \u2192 \u67e5\u770b\u544a\u8b66\u8be6\u60c5</li> <li>\u786e\u8ba4\u5f71\u54cd\u8303\u56f4 \u2192 \u8bc4\u4f30\u4e1a\u52a1\u5f71\u54cd</li> <li>\u6267\u884c\u4fee\u590d \u2192 \u6309\u7167\u9884\u6848\u5904\u7406</li> <li>\u9a8c\u8bc1\u6062\u590d \u2192 \u786e\u8ba4\u95ee\u9898\u89e3\u51b3</li> <li>\u66f4\u65b0\u6587\u6863 \u2192 \u8bb0\u5f55\u5904\u7406\u8fc7\u7a0b</li> </ol>"},{"location":"reference/MONITORING_GUIDE/#_37","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>\u7cfb\u7edf\u67b6\u6784\u6587\u6863</li> <li>\u5f00\u53d1\u6307\u5357</li> <li>\u90e8\u7f72\u6307\u5357</li> <li>\u6570\u636e\u5e93\u67b6\u6784</li> <li>\u672f\u8bed\u8868</li> </ul> <p>\u6587\u6863\u7248\u672c: 1.0 \u6700\u540e\u66f4\u65b0: 2025-10-23 \u7ef4\u62a4\u8005: \u5f00\u53d1\u56e2\u961f</p>"},{"location":"reference/glossary/","title":"\u672f\u8bed\u8868","text":""},{"location":"reference/glossary/#_2","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u5b9a\u4e49\u4e86\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u4e2d\u4f7f\u7528\u7684\u4e13\u4e1a\u672f\u8bed\u3001\u7f29\u5199\u548c\u6982\u5ff5\uff0c\u5e2e\u52a9\u56e2\u961f\u6210\u5458\u5efa\u7acb\u7edf\u4e00\u7684\u6c9f\u901a\u8bed\u8a00\uff0c\u51cf\u5c11\u7406\u89e3\u504f\u5dee\u3002</p>"},{"location":"reference/glossary/#_3","title":"\ud83c\udfc0 \u4e1a\u52a1\u672f\u8bed","text":""},{"location":"reference/glossary/#_4","title":"\u6bd4\u8d5b\u76f8\u5173","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u6bd4\u8d5b Match \u4e24\u652f\u7403\u961f\u4e4b\u95f4\u7684\u6b63\u5f0f\u5bf9\u6297\u6d3b\u52a8 \u66fc\u8054 vs \u5229\u7269\u6d66 \u4e3b\u961f Home Team \u5728\u4e3b\u573a\u8fdb\u884c\u6bd4\u8d5b\u7684\u7403\u961f \u66fc\u8054 (\u4e3b\u573a) \u5ba2\u961f Away Team \u5728\u5ba2\u573a\u8fdb\u884c\u6bd4\u8d5b\u7684\u7403\u961f \u5229\u7269\u6d66 (\u5ba2\u573a) \u8054\u8d5b League \u7ec4\u7ec7\u5316\u7684\u6bd4\u8d5b\u4f53\u7cfb \u82f1\u8d85\u3001\u897f\u7532\u3001\u5fb7\u7532 \u8d5b\u5b63 Season \u4e00\u5e74\u4e00\u5ea6\u7684\u8054\u8d5b\u5468\u671f 2024-25\u8d5b\u5b63 \u79ef\u5206 Points \u8054\u8d5b\u4e2d\u83b7\u5f97\u7684\u5206\u6570 \u80dc3\u5206\u3001\u5e731\u5206\u3001\u8d1f0\u5206 \u6392\u540d Standing \u7403\u961f\u5728\u8054\u8d5b\u4e2d\u7684\u4f4d\u7f6e \u7b2c1\u540d\u3001\u7b2c10\u540d"},{"location":"reference/glossary/#_5","title":"\u6bd4\u8d5b\u7ed3\u679c","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u4e3b\u80dc Home Win \u4e3b\u961f\u83b7\u80dc\u7684\u6bd4\u8d5b\u7ed3\u679c 2-1 (\u4e3b\u961f2\u7403\uff0c\u5ba2\u961f1\u7403) \u5ba2\u80dc Away Win \u5ba2\u961f\u83b7\u80dc\u7684\u6bd4\u8d5b\u7ed3\u679c 1-2 (\u4e3b\u961f1\u7403\uff0c\u5ba2\u961f2\u7403) \u5e73\u5c40 Draw \u53cc\u65b9\u5f97\u5206\u76f8\u540c\u7684\u6bd4\u8d5b\u7ed3\u679c 1-1\u30010-0 \u8fdb\u7403\u6570 Goals \u6bd4\u8d5b\u4e2d\u7684\u603b\u8fdb\u7403\u6570 3\u7403 (2-1) \u51c0\u80dc\u7403 Goal Difference \u8fdb\u7403\u6570\u51cf\u53bb\u5931\u7403\u6570 +5\u3001-2"},{"location":"reference/glossary/#_6","title":"\u8d54\u7387\u76f8\u5173","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u8d54\u7387 Odds \u535a\u5f69\u516c\u53f8\u5bf9\u6bd4\u8d5b\u7ed3\u679c\u7684\u6982\u7387\u9884\u6d4b \u4e3b\u80dc1.85\u3001\u5e733.40\u3001\u5ba2\u80dc4.20 \u76d8\u53e3 Handicap \u4e3a\u4e86\u5e73\u8861\u53cc\u65b9\u5b9e\u529b\u800c\u8bbe\u7f6e\u7684\u8ba9\u5206 \u4e3b\u961f\u8ba90.5\u7403 \u5927\u5c0f\u7403 Over/Under \u603b\u8fdb\u7403\u6570\u7684\u4e0a\u4e0b\u76d8 \u59272.5\u7403\u3001\u5c0f2.5\u7403 \u535a\u5f69\u516c\u53f8 Bookmaker \u63d0\u4f9b\u8d54\u7387\u670d\u52a1\u7684\u516c\u53f8 Bet365\u3001\u5a01\u5ec9\u5e0c\u5c14 \u9690\u542b\u6982\u7387 Implied Probability \u4ece\u8d54\u7387\u63a8\u7b97\u51fa\u7684\u6982\u7387 1/1.85 = 54.1%"},{"location":"reference/glossary/#_7","title":"\ud83e\udd16 \u673a\u5668\u5b66\u4e60\u672f\u8bed","text":""},{"location":"reference/glossary/#_8","title":"\u6a21\u578b\u76f8\u5173","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u9884\u6d4b\u6a21\u578b Prediction Model \u7528\u4e8e\u9884\u6d4b\u6bd4\u8d5b\u7ed3\u679c\u7684\u7b97\u6cd5 \u968f\u673a\u68ee\u6797\u3001\u795e\u7ecf\u7f51\u7edc \u7279\u5f81 Feature \u7528\u4e8e\u9884\u6d4b\u7684\u8f93\u5165\u53d8\u91cf \u7403\u961f\u5b9e\u529b\u3001\u4e3b\u573a\u4f18\u52bf \u6807\u7b7e Label \u6a21\u578b\u9884\u6d4b\u7684\u76ee\u6807\u53d8\u91cf \u6bd4\u8d5b\u7ed3\u679c (\u4e3b\u80dc/\u5e73\u5c40/\u5ba2\u80dc) \u8bad\u7ec3\u96c6 Training Set \u7528\u4e8e\u8bad\u7ec3\u6a21\u578b\u7684\u6570\u636e \u5386\u53f2\u6bd4\u8d5b\u6570\u636e (80%) \u6d4b\u8bd5\u96c6 Test Set \u7528\u4e8e\u8bc4\u4f30\u6a21\u578b\u6027\u80fd\u7684\u6570\u636e \u5386\u53f2\u6bd4\u8d5b\u6570\u636e (20%) \u9a8c\u8bc1\u96c6 Validation Set \u7528\u4e8e\u8c03\u53c2\u7684\u6570\u636e \u5386\u53f2\u6bd4\u8d5b\u6570\u636e (10%) \u8fc7\u62df\u5408 Overfitting \u6a21\u578b\u5728\u8bad\u7ec3\u6570\u636e\u4e0a\u8868\u73b0\u8fc7\u597d \u8bad\u7ec3\u51c6\u786e\u738795%\uff0c\u6d4b\u8bd5\u51c6\u786e\u738760% \u6b20\u62df\u5408 Underfitting \u6a21\u578b\u8fc7\u4e8e\u7b80\u5355\uff0c\u65e0\u6cd5\u6355\u6349\u89c4\u5f8b \u8bad\u7ec3\u51c6\u786e\u738755%\uff0c\u6d4b\u8bd5\u51c6\u786e\u738753%"},{"location":"reference/glossary/#_9","title":"\u6027\u80fd\u6307\u6807","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u8ba1\u7b97\u516c\u5f0f \u51c6\u786e\u7387 Accuracy \u6b63\u786e\u9884\u6d4b\u7684\u6bd4\u4f8b (TP+TN)/(TP+TN+FP+FN) \u7cbe\u786e\u7387 Precision \u9884\u6d4b\u4e3a\u6b63\u7684\u6837\u672c\u4e2d\u5b9e\u9645\u4e3a\u6b63\u7684\u6bd4\u4f8b TP/(TP+FP) \u53ec\u56de\u7387 Recall \u5b9e\u9645\u4e3a\u6b63\u7684\u6837\u672c\u4e2d\u88ab\u6b63\u786e\u9884\u6d4b\u7684\u6bd4\u4f8b TP/(TP+FN) F1\u5206\u6570 F1-Score \u7cbe\u786e\u7387\u548c\u53ec\u56de\u7387\u7684\u8c03\u548c\u5e73\u5747 2\u00d7(Precision\u00d7Recall)/(Precision+Recall) AUC Area Under Curve ROC\u66f2\u7ebf\u4e0b\u9762\u79ef - \u6df7\u6dc6\u77e9\u9635 Confusion Matrix \u5206\u7c7b\u7ed3\u679c\u7684\u77e9\u9635\u8868\u793a -"},{"location":"reference/glossary/#ai","title":"\ud83e\udde0 AI\u8f85\u52a9\u5f00\u53d1\u672f\u8bed","text":""},{"location":"reference/glossary/#ai_1","title":"AI\u52a9\u624b\u548c\u5de5\u4f5c\u6d41","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b Claude AI Claude AI Anthropic\u5f00\u53d1\u7684AI\u52a9\u624b \u4ee3\u7801\u751f\u6210\u3001\u6587\u6863\u7f16\u5199 \u4e0a\u4e0b\u6587\u52a0\u8f7d Context Loading \u4e3aAI\u63d0\u4f9b\u9879\u76ee\u80cc\u666f\u4fe1\u606f <code>make context</code> AI\u8f85\u52a9\u5f00\u53d1 AI-Assisted Development \u4f7f\u7528AI\u5de5\u5177\u8f85\u52a9\u7f16\u7a0b\u5f00\u53d1 \u4ee3\u7801\u8865\u5168\u3001\u91cd\u6784\u5efa\u8bae \u63d0\u793a\u5de5\u7a0b Prompt Engineering \u8bbe\u8ba1\u6709\u6548\u7684AI\u6307\u4ee4 \u7ed3\u6784\u5316\u63d0\u793a\u3001\u89d2\u8272\u8bbe\u5b9a \u4ee3\u7801\u5ba1\u67e5 Code Review AI\u8f85\u52a9\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5 \u6700\u4f73\u5b9e\u8df5\u5efa\u8bae\u3001\u95ee\u9898\u8bc6\u522b"},{"location":"reference/glossary/#_10","title":"\u5f00\u53d1\u6548\u7387\u5de5\u5177","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u7528\u9014 \u81ea\u52a8\u5316\u4ee3\u7801\u751f\u6210 Automated Code Generation AI\u81ea\u52a8\u751f\u6210\u4ee3\u7801\u7247\u6bb5 \u6a21\u677f\u4ee3\u7801\u3001\u6d4b\u8bd5\u7528\u4f8b \u667a\u80fd\u91cd\u6784 Intelligent Refactoring AI\u8f85\u52a9\u4ee3\u7801\u7ed3\u6784\u4f18\u5316 \u4ee3\u7801\u6e05\u7406\u3001\u6027\u80fd\u4f18\u5316 \u6587\u6863\u540c\u6b65 Documentation Sync \u4ee3\u7801\u4e0e\u6587\u6863\u81ea\u52a8\u540c\u6b65 API\u6587\u6863\u66f4\u65b0\u3001\u6ce8\u91ca\u751f\u6210"},{"location":"reference/glossary/#_11","title":"\ud83c\udfd7\ufe0f \u6280\u672f\u67b6\u6784\u672f\u8bed","text":""},{"location":"reference/glossary/#_12","title":"\u8f6f\u4ef6\u67b6\u6784","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u5206\u5c42\u67b6\u6784 Layered Architecture \u6309\u529f\u80fd\u5c42\u6b21\u7ec4\u7ec7\u8f6f\u4ef6\u7ed3\u6784 API\u5c42\u3001\u670d\u52a1\u5c42\u3001\u6570\u636e\u5c42 \u9886\u57df\u9a71\u52a8\u8bbe\u8ba1 DDD \u4ee5\u4e1a\u52a1\u9886\u57df\u4e3a\u4e2d\u5fc3\u7684\u8bbe\u8ba1\u65b9\u6cd5 \u9886\u57df\u6a21\u578b\u3001\u4ed3\u50a8\u6a21\u5f0f CQRS Command Query Responsibility Segregation \u547d\u4ee4\u67e5\u8be2\u8d23\u4efb\u5206\u79bb\u6a21\u5f0f \u5199\u64cd\u4f5c\u7528\u547d\u4ee4\uff0c\u8bfb\u64cd\u4f5c\u7528\u67e5\u8be2 \u5fae\u670d\u52a1 Microservices \u5c0f\u578b\u3001\u72ec\u7acb\u90e8\u7f72\u7684\u670d\u52a1 \u9884\u6d4b\u670d\u52a1\u3001\u6570\u636e\u670d\u52a1\u3001\u7528\u6237\u670d\u52a1 API\u7f51\u5173 API Gateway \u7edf\u4e00\u7684API\u5165\u53e3 FastAPI\u5e94\u7528 \u8d1f\u8f7d\u5747\u8861 Load Balancing \u5206\u6563\u8bf7\u6c42\u5230\u591a\u4e2a\u670d\u52a1\u5668 Nginx\u3001HAProxy \u89c2\u5bdf\u8005\u6a21\u5f0f Observer Pattern \u5bf9\u8c61\u95f4\u4e00\u5bf9\u591a\u4f9d\u8d56\u5173\u7cfb \u4e8b\u4ef6\u7cfb\u7edf\u3001\u901a\u77e5\u673a\u5236 \u4ed3\u50a8\u6a21\u5f0f Repository Pattern \u6570\u636e\u8bbf\u95ee\u62bd\u8c61\u5c42 \u6570\u636e\u5e93\u64cd\u4f5c\u5c01\u88c5 \u4f9d\u8d56\u6ce8\u5165 Dependency Injection \u63a7\u5236\u53cd\u8f6c\u5b9e\u73b0\u677e\u8026\u5408 \u4f9d\u8d56\u5bb9\u5668\u3001\u670d\u52a1\u6ce8\u518c"},{"location":"reference/glossary/#_13","title":"\u6570\u636e\u5b58\u50a8","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u5173\u7cfb\u6570\u636e\u5e93 Relational Database \u57fa\u4e8e\u5173\u7cfb\u6a21\u578b\u7684\u6570\u636e\u5e93 PostgreSQL\u3001MySQL NoSQL\u6570\u636e\u5e93 NoSQL Database \u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93 Redis\u3001MongoDB \u7f13\u5b58 Cache \u9ad8\u901f\u5b58\u50a8\u5c42\uff0c\u51cf\u5c11\u6570\u636e\u8bbf\u95ee\u65f6\u95f4 Redis \u6570\u636e\u6e56 Data Lake \u539f\u59cb\u6570\u636e\u5b58\u50a8\u5e93 S3\u3001HDFS \u6570\u636e\u4ed3\u5e93 Data Warehouse \u7ed3\u6784\u5316\u6570\u636e\u5206\u6790\u5b58\u50a8 \u6570\u636e\u96c6\u5e02\u3001OLAP ETL Extract, Transform, Load \u6570\u636e\u62bd\u53d6\u3001\u8f6c\u6362\u3001\u52a0\u8f7d\u8fc7\u7a0b \u6570\u636e\u7ba1\u9053"},{"location":"reference/glossary/#_14","title":"\u5f00\u53d1\u8fd0\u7ef4","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b CI/CD Continuous Integration/Continuous Deployment \u6301\u7eed\u96c6\u6210/\u6301\u7eed\u90e8\u7f72 GitHub Actions\u3001Jenkins \u5bb9\u5668\u5316 Containerization \u5c06\u5e94\u7528\u6253\u5305\u6210\u5bb9\u5668\u7684\u6280\u672f Docker\u3001Podman \u7f16\u6392 Orchestration \u7ba1\u7406\u591a\u4e2a\u5bb9\u5668\u7684\u5de5\u5177 Kubernetes\u3001Docker Compose \u76d1\u63a7 Monitoring \u76d1\u63a7\u7cfb\u7edf\u72b6\u6001\u548c\u6027\u80fd Prometheus\u3001Grafana \u65e5\u5fd7 Logging \u8bb0\u5f55\u7cfb\u7edf\u8fd0\u884c\u4fe1\u606f ELK Stack\u3001Loki \u544a\u8b66 Alerting \u5f02\u5e38\u60c5\u51b5\u7684\u901a\u77e5\u673a\u5236 Alertmanager\u3001PagerDuty"},{"location":"reference/glossary/#_15","title":"\ud83d\udcca \u4e1a\u52a1\u6570\u636e\u672f\u8bed","text":""},{"location":"reference/glossary/#_16","title":"\u6bd4\u8d5b\u6570\u636e","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u6570\u636e\u7c7b\u578b \u6bd4\u8d5b\u65f6\u95f4 Match Time \u6bd4\u8d5b\u5f00\u59cb\u7684\u5177\u4f53\u65f6\u95f4 TIMESTAMP \u6bd4\u8d5b\u72b6\u6001 Match Status \u6bd4\u8d5b\u7684\u5f53\u524d\u72b6\u6001 ENUM (scheduled/live/finished/cancelled) \u4e3b\u573a\u4f18\u52bf Home Advantage \u4e3b\u961f\u76f8\u5bf9\u5ba2\u961f\u7684\u4f18\u52bf DECIMAL \u7403\u961f\u5b9e\u529b Team Strength \u7403\u961f\u7684\u7efc\u5408\u5b9e\u529b\u8bc4\u5206 DECIMAL \u5386\u53f2\u6218\u7ee9 Head-to-Head \u4e24\u961f\u5386\u53f2\u4ea4\u950b\u8bb0\u5f55 JSON \u8fd1\u671f\u8868\u73b0 Recent Form \u7403\u961f\u6700\u8fd1\u51e0\u573a\u6bd4\u8d5b\u7684\u8868\u73b0 JSON"},{"location":"reference/glossary/#_17","title":"\u7279\u5f81\u5de5\u7a0b","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u7279\u5f81\u5de5\u7a0b Feature Engineering \u4ece\u539f\u59cb\u6570\u636e\u4e2d\u63d0\u53d6\u6709\u7528\u7279\u5f81\u7684\u8fc7\u7a0b \u6eda\u52a8\u5e73\u5747\u3001\u6392\u540d\u7279\u5f81 \u6807\u51c6\u5316 Normalization \u5c06\u7279\u5f81\u7f29\u653e\u5230\u7279\u5b9a\u8303\u56f4 0-1\u6807\u51c6\u5316\u3001Z-score\u6807\u51c6\u5316 \u72ec\u70ed\u7f16\u7801 One-Hot Encoding \u5c06\u5206\u7c7b\u53d8\u91cf\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\u5411\u91cf \u8054\u8d5b\u7f16\u7801\u3001\u7403\u961f\u7f16\u7801 \u65f6\u95f4\u5e8f\u5217\u7279\u5f81 Time Series Features \u57fa\u4e8e\u65f6\u95f4\u7684\u6570\u636e\u7279\u5f81 \u6eda\u52a8\u5e73\u5747\u3001\u8d8b\u52bf\u7279\u5f81 \u884d\u751f\u7279\u5f81 Derived Features \u901a\u8fc7\u8ba1\u7b97\u751f\u6210\u7684\u65b0\u7279\u5f81 \u8fdb\u7403\u7387\u3001\u80dc\u7387"},{"location":"reference/glossary/#_18","title":"\ud83d\udd27 \u5f00\u53d1\u5de5\u5177\u672f\u8bed","text":""},{"location":"reference/glossary/#_19","title":"\u7f16\u7a0b\u8bed\u8a00\u548c\u6846\u67b6","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u7528\u9014 Python Python \u9ad8\u7ea7\u7f16\u7a0b\u8bed\u8a00 \u540e\u7aef\u5f00\u53d1\u3001\u6570\u636e\u5206\u6790 FastAPI FastAPI \u73b0\u4ee3Python Web\u6846\u67b6 API\u5f00\u53d1 SQLAlchemy SQLAlchemy Python SQL\u5de5\u5177\u5305 ORM\u3001\u6570\u636e\u5e93\u64cd\u4f5c Pydantic Pydantic \u6570\u636e\u9a8c\u8bc1\u5e93 \u6570\u636e\u6a21\u578b\u3001API\u9a8c\u8bc1 pytest pytest Python\u6d4b\u8bd5\u6846\u67b6 \u5355\u5143\u6d4b\u8bd5\u3001\u96c6\u6210\u6d4b\u8bd5 Docker Docker \u5bb9\u5668\u5316\u5e73\u53f0 \u5e94\u7528\u6253\u5305\u3001\u90e8\u7f72 asyncio asyncio Python\u5f02\u6b65\u7f16\u7a0b\u5e93 \u5f02\u6b65I/O\u64cd\u4f5c uvicorn uvicorn ASGI\u670d\u52a1\u5668 FastAPI\u5e94\u7528\u8fd0\u884c Poetry Poetry Python\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177 \u9879\u76ee\u4f9d\u8d56\u7ba1\u7406 Ruff Ruff Python\u4ee3\u7801\u68c0\u67e5\u548c\u683c\u5f0f\u5316\u5de5\u5177 \u4ee3\u7801\u8d28\u91cf\u4fdd\u8bc1 MyPy MyPy Python\u9759\u6001\u7c7b\u578b\u68c0\u67e5\u5668 \u7c7b\u578b\u5b89\u5168"},{"location":"reference/glossary/#_20","title":"\u6570\u636e\u5e93\u6280\u672f","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u7528\u9014 PostgreSQL PostgreSQL \u5f00\u6e90\u5173\u7cfb\u578b\u6570\u636e\u5e93 \u4e3b\u6570\u636e\u5b58\u50a8 Redis Redis \u5185\u5b58\u6570\u636e\u7ed3\u6784\u5b58\u50a8 \u7f13\u5b58\u3001\u4f1a\u8bdd\u5b58\u50a8 Alembic Alembic \u6570\u636e\u5e93\u8fc1\u79fb\u5de5\u5177 \u6570\u636e\u5e93\u7248\u672c\u7ba1\u7406 asyncpg asyncpg \u5f02\u6b65PostgreSQL\u9a71\u52a8 \u5f02\u6b65\u6570\u636e\u5e93\u64cd\u4f5c SQL SQL \u7ed3\u6784\u5316\u67e5\u8be2\u8bed\u8a00 \u6570\u636e\u67e5\u8be2\u3001\u64cd\u4f5c"},{"location":"reference/glossary/#_21","title":"\u76d1\u63a7\u548c\u65e5\u5fd7","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u7528\u9014 Prometheus Prometheus \u76d1\u63a7\u548c\u544a\u8b66\u7cfb\u7edf \u6307\u6807\u6536\u96c6\u3001\u76d1\u63a7 Grafana Grafana \u5f00\u6e90\u53ef\u89c6\u5316\u5e73\u53f0 \u76d1\u63a7\u4eea\u8868\u677f Loki Loki \u65e5\u5fd7\u805a\u5408\u7cfb\u7edf \u65e5\u5fd7\u6536\u96c6\u3001\u67e5\u8be2 Jaeger Jaeger \u5206\u5e03\u5f0f\u8ffd\u8e2a\u7cfb\u7edf \u6027\u80fd\u5206\u6790\u3001\u94fe\u8def\u8ffd\u8e2a APM APM \u5e94\u7528\u6027\u80fd\u76d1\u63a7 \u6027\u80fd\u76d1\u63a7\u3001\u4f18\u5316"},{"location":"reference/glossary/#_22","title":"\ud83d\udcc8 \u5206\u6790\u672f\u8bed","text":""},{"location":"reference/glossary/#_23","title":"\u7edf\u8ba1\u5206\u6790","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u5747\u503c Mean \u6570\u503c\u7684\u7b97\u672f\u5e73\u5747 \u5e73\u5747\u8fdb\u7403\u65702.5 \u4e2d\u4f4d\u6570 Median \u6392\u5e8f\u540e\u7684\u4e2d\u95f4\u503c \u8fdb\u7403\u6570\u4e2d\u4f4d\u65702 \u6807\u51c6\u5dee Standard Deviation \u6570\u636e\u5206\u6563\u7a0b\u5ea6\u7684\u5ea6\u91cf \u8fdb\u7403\u6570\u6807\u51c6\u5dee1.2 \u76f8\u5173\u7cfb\u6570 Correlation Coefficient \u4e24\u4e2a\u53d8\u91cf\u95f4\u7ebf\u6027\u5173\u7cfb\u7684\u5f3a\u5ea6 \u7403\u961f\u5b9e\u529b\u4e0e\u80dc\u7387\u76f8\u5173\u7cfb\u65700.8 \u56de\u5f52\u5206\u6790 Regression Analysis \u5efa\u7acb\u53d8\u91cf\u95f4\u5173\u7cfb\u7684\u7edf\u8ba1\u65b9\u6cd5 \u7ebf\u6027\u56de\u5f52\u3001\u903b\u8f91\u56de\u5f52 \u5047\u8bbe\u68c0\u9a8c Hypothesis Testing \u7edf\u8ba1\u63a8\u65ad\u65b9\u6cd5 t\u68c0\u9a8c\u3001\u5361\u65b9\u68c0\u9a8c"},{"location":"reference/glossary/#_24","title":"\u9884\u6d4b\u5206\u6790","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u9884\u6d4b Prediction \u57fa\u4e8e\u6a21\u578b\u5bf9\u672a\u6765\u7ed3\u679c\u7684\u4f30\u8ba1 \u4e3b\u961f\u83b7\u80dc\u6982\u738765% \u7f6e\u4fe1\u5ea6 Confidence \u9884\u6d4b\u7ed3\u679c\u7684\u53ef\u4fe1\u7a0b\u5ea6 95%\u7f6e\u4fe1\u533a\u95f4 \u4e0d\u786e\u5b9a\u6027 Uncertainty \u9884\u6d4b\u7ed3\u679c\u7684\u8bef\u5dee\u8303\u56f4 \u9884\u6d4b\u8bef\u5dee\u00b10.1 \u96c6\u6210\u5b66\u4e60 Ensemble Learning \u7ed3\u5408\u591a\u4e2a\u6a21\u578b\u7684\u65b9\u6cd5 \u968f\u673a\u68ee\u6797\u3001\u68af\u5ea6\u63d0\u5347 \u4ea4\u53c9\u9a8c\u8bc1 Cross Validation \u6a21\u578b\u8bc4\u4f30\u65b9\u6cd5 5\u6298\u4ea4\u53c9\u9a8c\u8bc1"},{"location":"reference/glossary/#_25","title":"\ud83d\udd12 \u5b89\u5168\u672f\u8bed","text":""},{"location":"reference/glossary/#_26","title":"\u8eab\u4efd\u8ba4\u8bc1","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u8ba4\u8bc1 Authentication \u9a8c\u8bc1\u7528\u6237\u8eab\u4efd\u7684\u8fc7\u7a0b \u7528\u6237\u540d\u5bc6\u7801\u767b\u5f55 \u6388\u6743 Authorization \u63a7\u5236\u7528\u6237\u8bbf\u95ee\u6743\u9650\u7684\u8fc7\u7a0b \u7ba1\u7406\u5458\u6743\u9650\u3001\u666e\u901a\u7528\u6237\u6743\u9650 JWT JSON Web Token \u57fa\u4e8eJSON\u7684\u5f00\u653e\u6807\u51c6\u4ee4\u724c Bearer Token OAuth OAuth \u5f00\u653e\u6388\u6743\u6807\u51c6 \u7b2c\u4e09\u65b9\u767b\u5f55 RBAC Role-Based Access Control \u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236 \u7ba1\u7406\u5458\u89d2\u8272\u3001\u7528\u6237\u89d2\u8272"},{"location":"reference/glossary/#_27","title":"\u6570\u636e\u5b89\u5168","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u52a0\u5bc6 Encryption \u5c06\u6570\u636e\u8f6c\u6362\u4e3a\u5bc6\u6587\u7684\u8fc7\u7a0b AES\u52a0\u5bc6\u3001RSA\u52a0\u5bc6 \u54c8\u5e0c Hash \u5355\u5411\u52a0\u5bc6\u7b97\u6cd5 SHA-256\u3001MD5 SSL/TLS SSL/TLS \u5b89\u5168\u4f20\u8f93\u534f\u8bae HTTPS\u3001WSS \u5ba1\u8ba1\u65e5\u5fd7 Audit Log \u8bb0\u5f55\u7cfb\u7edf\u64cd\u4f5c\u7684\u65e5\u5fd7 \u7528\u6237\u64cd\u4f5c\u8bb0\u5f55\u3001\u7cfb\u7edf\u53d8\u66f4\u8bb0\u5f55 \u6570\u636e\u8131\u654f Data Masking \u9690\u85cf\u654f\u611f\u6570\u636e\u7684\u8fc7\u7a0b \u624b\u673a\u53f7\u8131\u654f\u3001\u90ae\u7bb1\u8131\u654f"},{"location":"reference/glossary/#_28","title":"\ud83c\udfaf \u6027\u80fd\u672f\u8bed","text":""},{"location":"reference/glossary/#_29","title":"\u7cfb\u7edf\u6027\u80fd","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u76ee\u6807\u503c \u54cd\u5e94\u65f6\u95f4 Response Time \u7cfb\u7edf\u54cd\u5e94\u8bf7\u6c42\u7684\u65f6\u95f4 &lt;200ms \u541e\u5410\u91cf Throughput \u7cfb\u7edf\u5355\u4f4d\u65f6\u95f4\u5904\u7406\u7684\u8bf7\u6c42\u6570 &gt;1000 RPS \u5e76\u53d1\u7528\u6237 Concurrent Users \u540c\u65f6\u8bbf\u95ee\u7cfb\u7edf\u7684\u7528\u6237\u6570 &gt;1000 \u53ef\u7528\u6027 Availability \u7cfb\u7edf\u53ef\u6b63\u5e38\u670d\u52a1\u7684\u65f6\u95f4\u6bd4\u4f8b 99.9% \u5ef6\u8fdf Latency \u8bf7\u6c42\u5904\u7406\u7684\u7b49\u5f85\u65f6\u95f4 &lt;50ms"},{"location":"reference/glossary/#_30","title":"\u6570\u636e\u5e93\u6027\u80fd","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u4f18\u5316\u65b9\u6cd5 \u7d22\u5f15 Index \u52a0\u901f\u6570\u636e\u5e93\u67e5\u8be2\u7684\u6570\u636e\u7ed3\u6784 B\u6811\u7d22\u5f15\u3001\u54c8\u5e0c\u7d22\u5f15 \u67e5\u8be2\u4f18\u5316 Query Optimization \u63d0\u9ad8SQL\u67e5\u8be2\u6027\u80fd\u7684\u8fc7\u7a0b \u6267\u884c\u8ba1\u5212\u5206\u6790\u3001\u7d22\u5f15\u4f18\u5316 \u8fde\u63a5\u6c60 Connection Pool \u6570\u636e\u5e93\u8fde\u63a5\u7684\u7f13\u5b58\u673a\u5236 \u8fde\u63a5\u590d\u7528\u3001\u8fde\u63a5\u7ba1\u7406 \u5206\u9875 Pagination \u5927\u6570\u636e\u96c6\u7684\u5206\u6279\u663e\u793a LIMIT\u3001OFFSET \u7f13\u5b58\u51fb\u7a7f Cache Penetration \u5927\u91cf\u8bf7\u6c42\u7f13\u5b58\u4e2d\u4e0d\u5b58\u5728\u7684\u6570\u636e \u7f13\u5b58\u7a7a\u503c\u3001\u5e03\u9686\u8fc7\u6ee4\u5668"},{"location":"reference/glossary/#_31","title":"\ud83d\udccb \u9879\u76ee\u7ba1\u7406\u672f\u8bed","text":""},{"location":"reference/glossary/#_32","title":"\u5f00\u53d1\u6d41\u7a0b","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u51b2\u523a Sprint \u56fa\u5b9a\u65f6\u95f4\u7684\u5f00\u53d1\u5468\u671f 2\u5468\u51b2\u523a \u9700\u6c42 Requirement \u7cfb\u7edf\u9700\u8981\u5b9e\u73b0\u7684\u529f\u80fd \u7528\u6237\u6545\u4e8b\u3001\u6280\u672f\u9700\u6c42 \u4efb\u52a1 Task \u5177\u4f53\u7684\u5de5\u4f5c\u9879 \u4ee3\u7801\u5b9e\u73b0\u3001\u6d4b\u8bd5\u7f16\u5199 \u7f3a\u9677 Bug \u7cfb\u7edf\u4e2d\u7684\u9519\u8bef \u529f\u80fd\u9519\u8bef\u3001\u6027\u80fd\u95ee\u9898 \u6280\u672f\u503a\u52a1 Technical Debt \u4e3a\u5feb\u901f\u5f00\u53d1\u800c\u727a\u7272\u7684\u4ee3\u7801\u8d28\u91cf \u4ee3\u7801\u91cd\u6784\u3001\u67b6\u6784\u4f18\u5316"},{"location":"reference/glossary/#_33","title":"\u7248\u672c\u63a7\u5236","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b Git Git \u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf GitHub\u3001GitLab \u5206\u652f Branch \u4ee3\u7801\u7684\u72ec\u7acb\u5f00\u53d1\u7ebf main\u3001develop\u3001feature \u5408\u5e76 Merge \u5c06\u4e00\u4e2a\u5206\u652f\u7684\u53d8\u66f4\u5408\u5e76\u5230\u53e6\u4e00\u4e2a\u5206\u652f PR\u3001Merge Request \u6807\u7b7e Tag \u7279\u5b9a\u7248\u672c\u7684\u6807\u8bb0 v1.0.0\u3001v2.1.0 \u63d0\u4ea4 Commit \u4ee3\u7801\u53d8\u66f4\u7684\u8bb0\u5f55 git commit -m \"feat: add feature\""},{"location":"reference/glossary/#_34","title":"\ud83c\udf10 \u90e8\u7f72\u672f\u8bed","text":""},{"location":"reference/glossary/#_35","title":"\u73af\u5883\u7ba1\u7406","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u5f00\u53d1\u73af\u5883 Development Environment \u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u7684\u73af\u5883 localhost:8000 \u6d4b\u8bd5\u73af\u5883 Test Environment \u8d28\u91cf\u4fdd\u8bc1\u6d4b\u8bd5\u7684\u73af\u5883 test.domain.com \u9884\u53d1\u5e03\u73af\u5883 Staging Environment \u4e0a\u7ebf\u524d\u7684\u6700\u7ec8\u6d4b\u8bd5\u73af\u5883 staging.domain.com \u751f\u4ea7\u73af\u5883 Production Environment \u6b63\u5f0f\u8fd0\u884c\u7684\u73af\u5883 api.domain.com \u914d\u7f6e\u7ba1\u7406 Configuration Management \u7ba1\u7406\u4e0d\u540c\u73af\u5883\u7684\u914d\u7f6e .env\u6587\u4ef6\u3001ConfigMap"},{"location":"reference/glossary/#_36","title":"\u90e8\u7f72\u7b56\u7565","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b \u84dd\u7eff\u90e8\u7f72 Blue-Green Deployment \u96f6\u505c\u673a\u65f6\u95f4\u7684\u90e8\u7f72\u7b56\u7565 \u4e24\u5957\u73af\u5883\u5207\u6362 \u6eda\u52a8\u66f4\u65b0 Rolling Update \u9010\u6b65\u66ff\u6362\u65e7\u7248\u672c\u7684\u90e8\u7f72\u7b56\u7565 Kubernetes\u6eda\u52a8\u66f4\u65b0 \u91d1\u4e1d\u96c0\u53d1\u5e03 Canary Release \u5c0f\u6d41\u91cf\u6d4b\u8bd5\u65b0\u7248\u672c\u7684\u53d1\u5e03\u7b56\u7565 1%\u6d41\u91cf\u6d4b\u8bd5 \u56de\u6eda Rollback \u56de\u9000\u5230\u4e4b\u524d\u7248\u672c\u7684\u64cd\u4f5c git revert\u3001\u6570\u636e\u5e93\u56de\u6eda"},{"location":"reference/glossary/#_37","title":"\ud83d\udcdd \u6587\u6863\u672f\u8bed","text":""},{"location":"reference/glossary/#_38","title":"\u6587\u6863\u7c7b\u578b","text":"\u672f\u8bed \u82f1\u6587 \u5b9a\u4e49 \u793a\u4f8b API\u6587\u6863 API Documentation \u63a5\u53e3\u8bf4\u660e\u6587\u6863 Swagger\u3001OpenAPI \u67b6\u6784\u6587\u6863 Architecture Documentation \u7cfb\u7edf\u67b6\u6784\u8bf4\u660e\u6587\u6863 \u7cfb\u7edf\u8bbe\u8ba1\u3001\u6280\u672f\u9009\u578b \u7528\u6237\u624b\u518c User Manual \u7528\u6237\u4f7f\u7528\u6307\u5357 \u529f\u80fd\u8bf4\u660e\u3001\u64cd\u4f5c\u6b65\u9aa4 \u5f00\u53d1\u6307\u5357 Development Guide \u5f00\u53d1\u4eba\u5458\u7684\u6307\u5bfc\u6587\u6863 \u73af\u5883\u642d\u5efa\u3001\u7f16\u7801\u89c4\u8303 \u90e8\u7f72\u624b\u518c Deployment Handbook \u7cfb\u7edf\u90e8\u7f72\u64cd\u4f5c\u6307\u5357 \u73af\u5883\u914d\u7f6e\u3001\u90e8\u7f72\u6d41\u7a0b"},{"location":"reference/glossary/#_39","title":"\ud83d\udd04 \u66f4\u65b0\u65e5\u5fd7","text":""},{"location":"reference/glossary/#_40","title":"\u7248\u672c\u8bb0\u5f55","text":"\u7248\u672c \u65e5\u671f \u66f4\u65b0\u5185\u5bb9 \u7ef4\u62a4\u8005 1.0 2025-10-23 \u521d\u59cb\u7248\u672c\uff0c\u5305\u542b\u57fa\u7840\u672f\u8bed\u5b9a\u4e49 \u5f00\u53d1\u56e2\u961f 1.1 2025-10-23 \u6dfb\u52a0AI\u8f85\u52a9\u5f00\u53d1\u672f\u8bed\uff0c\u5b8c\u5584\u6280\u672f\u672f\u8bed Claude AI"},{"location":"reference/glossary/#_41","title":"\u8d21\u732e\u6307\u5357","text":"<p>\u5982\u679c\u60a8\u53d1\u73b0\u672f\u8bed\u7f3a\u5931\u6216\u5b9a\u4e49\u4e0d\u51c6\u786e\uff0c\u8bf7\uff1a</p> <ol> <li>\u5728GitHub\u4e0a\u521b\u5efaIssue</li> <li>\u63d0\u4ea4Pull Request</li> <li>\u8054\u7cfb\u9879\u76ee\u7ef4\u62a4\u8005</li> </ol>"},{"location":"reference/glossary/#_42","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>CLAUDE.md - Claude AI\u52a9\u624b\u5f00\u53d1\u6307\u5bfc</li> <li>\u7cfb\u7edf\u67b6\u6784\u6587\u6863 - \u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1</li> <li>\u6570\u636e\u5e93\u67b6\u6784\u6587\u6863 - \u6570\u636e\u5e93\u8bbe\u8ba1\u548c\u8868\u7ed3\u6784</li> <li>\u5f00\u53d1\u6307\u5357 - \u5f00\u53d1\u73af\u5883\u642d\u5efa\u548c\u89c4\u8303</li> <li>API\u6587\u6863 - REST API\u63a5\u53e3\u8bf4\u660e</li> <li>\u673a\u5668\u5b66\u4e60\u6a21\u578b\u6307\u5357 - ML\u6a21\u578b\u5f00\u53d1\u548c\u90e8\u7f72</li> </ul>"},{"location":"reference/glossary/#_43","title":"\ud83d\udccb \u6587\u6863\u4fe1\u606f","text":"<ul> <li>\u6587\u6863\u7248\u672c: v1.1 (AI\u589e\u5f3a\u7248)</li> <li>\u672f\u8bed\u603b\u6570: 200+ \u4e13\u4e1a\u672f\u8bed</li> <li>\u6db5\u76d6\u9886\u57df: \u4e1a\u52a1\u3001\u6280\u672f\u3001AI\u3001\u5f00\u53d1\u8fd0\u7ef4\u7b49</li> <li>\u6700\u540e\u66f4\u65b0: 2025-10-23</li> <li>\u7ef4\u62a4\u56e2\u961f: \u5f00\u53d1\u56e2\u961f + Claude AI\u52a9\u624b</li> <li>\u5ba1\u6838\u72b6\u6001: \u2705 \u5df2\u5ba1\u6838</li> </ul> <p>\u7248\u672c\u5386\u53f2: - v1.0 (2025-10-23): \u521d\u59cb\u7248\u672c\uff0c\u5305\u542b\u57fa\u7840\u672f\u8bed\u5b9a\u4e49 - v1.1 (2025-10-23): \u6dfb\u52a0AI\u8f85\u52a9\u5f00\u53d1\u672f\u8bed\uff0c\u5b8c\u5584\u6280\u672f\u672f\u8bed\u548c\u94fe\u63a5</p> <p>\u4f7f\u7528\u5efa\u8bae: - \u65b0\u56e2\u961f\u6210\u5458\u5efa\u8bae\u901a\u8bfb\u4e00\u904d\u5efa\u7acb\u57fa\u7840\u8ba4\u77e5 - \u5f00\u53d1\u8fc7\u7a0b\u4e2d\u53ef\u67e5\u9605\u7279\u5b9a\u672f\u8bed\u5b9a\u4e49 - \u53d1\u73b0\u7f3a\u5931\u672f\u8bed\u8bf7\u53ca\u65f6\u8d21\u732e\u8865\u5145</p>"},{"location":"release/CHANGES/","title":"\ud83d\udcdd \u9879\u76ee\u4f18\u5316\u53d8\u66f4\u65e5\u5fd7","text":"<p>\u65e5\u671f: 2025-10-07 \u7248\u672c: v2.0-optimized</p>"},{"location":"release/CHANGES/#_2","title":"\ud83c\udfaf \u53d8\u66f4\u6458\u8981","text":"<p>\u672c\u6b21\u4f18\u5316\u5171\u4fee\u6539 8 \u4e2a\u6838\u5fc3\u914d\u7f6e\uff0c\u6d89\u53ca 6 \u4e2a\u6587\u4ef6\uff0c\u5220\u9664\u4e86 3 \u4e2a\u5197\u4f59\u5de5\u5177\uff0c\u4f18\u5316\u4e86 Docker \u6784\u5efa\uff0c\u7edf\u4e00\u4e86\u8986\u76d6\u7387\u7b56\u7565\u3002</p>"},{"location":"release/CHANGES/#_3","title":"\ud83d\udcc4 \u6587\u4ef6\u53d8\u66f4\u6e05\u5355","text":""},{"location":"release/CHANGES/#6","title":"\u270f\ufe0f \u4fee\u6539\u7684\u6587\u4ef6 (6\u4e2a)","text":"<ol> <li>requirements/dev.in</li> <li>\u274c \u5220\u9664: <code>safety==3.2.11</code>\uff08\u91cd\u590d\uff09</li> <li>\u274c \u5220\u9664: <code>black==24.10.0</code></li> <li>\u274c \u5220\u9664: <code>isort==5.13.2</code></li> <li>\u274c \u5220\u9664: <code>flake8==7.1.1</code></li> <li> <p>\u2705 \u4fdd\u7559: <code>ruff==0.8.4</code> + <code>mypy==1.14.1</code></p> </li> <li> <p>Makefile (\u5927\u91cf\u53d8\u66f4)</p> </li> <li>\u2705 \u65b0\u589e\u8986\u76d6\u7387\u53d8\u91cf\uff08\u7b2c13-17\u884c\uff09</li> <li>\u270f\ufe0f \u4fee\u6539 <code>lint</code> \u547d\u4ee4: flake8 \u2192 ruff</li> <li>\u270f\ufe0f \u4fee\u6539 <code>fmt</code> \u547d\u4ee4: black/isort \u2192 ruff format</li> <li>\u274c \u5220\u9664\u91cd\u590d\u547d\u4ee4: test-quick, test-unit, test-integration \u7b49</li> <li> <p>\ud83d\udcca \u884c\u6570: 938 \u2192 870 (-68\u884c)</p> </li> <li> <p>ci-verify.sh</p> </li> <li>\u2705 \u65b0\u589e\u73af\u5883\u53d8\u91cf\u652f\u6301: <code>COVERAGE_THRESHOLD</code></li> <li> <p>\ud83d\udcca \u9ed8\u8ba4\u9608\u503c: 50% \u2192 80%</p> </li> <li> <p>Dockerfile</p> </li> <li>\u2705 \u65b0\u589e BuildKit \u8bed\u6cd5\u58f0\u660e</li> <li>\u2705 \u65b0\u589e\u7f13\u5b58\u6302\u8f7d: <code>--mount=type=cache</code></li> <li> <p>\ud83d\udcdd \u6dfb\u52a0\u4f7f\u7528\u8bf4\u660e\u6ce8\u91ca</p> </li> <li> <p>.dockerignore</p> </li> <li>\u2705 \u65b0\u589e 35 \u884c\u6392\u9664\u89c4\u5219</li> <li> <p>\ud83d\udcca \u884c\u6570: 63 \u2192 98 (+35\u884c)</p> </li> <li> <p>.env.example</p> </li> <li>\u2705 \u5b8c\u5168\u91cd\u5199\uff0c\u66f4\u52a0\u5b8c\u5584</li> <li>\u2705 \u65b0\u589e\u5b57\u6bb5: COVERAGE_THRESHOLD, Feature Flags</li> <li>\ud83d\udcca \u884c\u6570: ~40 \u2192 95 (+55\u884c)</li> </ol>"},{"location":"release/CHANGES/#6_1","title":"\ud83d\udd04 \u91cd\u547d\u540d\u7684\u6587\u4ef6 (6\u4e2a)","text":"\u539f\u6587\u4ef6\u540d \u65b0\u6587\u4ef6\u540d <code>.github/workflows/CI\u6d41\u6c34\u7ebf.yml</code> <code>ci-pipeline.yml</code> <code>.github/workflows/MLOps\u673a\u5668\u5b66\u4e60\u6d41\u6c34\u7ebf.yml</code> <code>mlops-pipeline.yml</code> <code>.github/workflows/\u90e8\u7f72\u6d41\u6c34\u7ebf.yml</code> <code>deploy-pipeline.yml</code> <code>.github/workflows/\u95ee\u9898\u8ddf\u8e2a\u6d41\u6c34\u7ebf.yml</code> <code>issue-tracking-pipeline.yml</code> <code>.github/workflows/\u9879\u76ee\u540c\u6b65\u6d41\u6c34\u7ebf.yml</code> <code>project-sync-pipeline.yml</code> <code>.github/workflows/\u9879\u76ee\u7ef4\u62a4\u6d41\u6c34\u7ebf.yml</code> <code>project-maintenance-pipeline.yml</code>"},{"location":"release/CHANGES/#3","title":"\u2795 \u65b0\u589e\u7684\u6587\u4ef6 (3\u4e2a)","text":"<ol> <li>OPTIMIZATION_SUMMARY.md (\u8be6\u7ec6\u4f18\u5316\u62a5\u544a)</li> <li>OPTIMIZATION_QUICKSTART.md (\u5feb\u901f\u5f00\u59cb\u6307\u5357)</li> <li>CHANGES.md (\u672c\u6587\u4ef6)</li> </ol>"},{"location":"release/CHANGES/#_4","title":"\ud83d\udd27 \u4f9d\u8d56\u53d8\u66f4","text":""},{"location":"release/CHANGES/#requirementsdevin","title":"\u5f00\u53d1\u4f9d\u8d56 (requirements/dev.in)","text":"<p>\u5220\u9664\u7684\u5305 (4\u4e2a): <pre><code>- black==24.10.0\n- isort==5.13.2\n- flake8==7.1.1\n- safety==3.2.11 (\u91cd\u590d\u58f0\u660e)\n</code></pre></p> <p>\u4fdd\u7559\u7684\u5305: <pre><code>+ ruff==0.8.4 (\u66ff\u4ee3 black + isort + flake8)\n+ mypy==1.14.1\n+ pre-commit==4.0.1\n</code></pre></p> <p>\u4f9d\u8d56\u6570\u91cf: 73 \u2192 70 (-3\u4e2a)</p>"},{"location":"release/CHANGES/#_5","title":"\ud83c\udfa8 \u5de5\u5177\u94fe\u53d8\u66f4","text":""},{"location":"release/CHANGES/#4","title":"\u4e4b\u524d (4\u4e2a\u5de5\u5177)","text":"<pre><code>flake8 (linting)\nblack (formatting)\nisort (import sorting)\nmypy (type checking)\n</code></pre>"},{"location":"release/CHANGES/#2","title":"\u73b0\u5728 (2\u4e2a\u5de5\u5177)","text":"<pre><code>ruff (linting + formatting + import sorting)\nmypy (type checking)\n</code></pre>"},{"location":"release/CHANGES/#_6","title":"\u6027\u80fd\u5bf9\u6bd4","text":"\u5de5\u5177 \u6267\u884c\u65f6\u95f4 \u529f\u80fd Ruff ~100ms Lint + Format + Import Sort Black ~2s Format only Flake8 ~3s Lint only Isort ~1s Import Sort only <p>\u603b\u63d0\u5347: \u7ea6 20-50 \u500d\u901f\u5ea6</p>"},{"location":"release/CHANGES/#makefile","title":"\ud83d\udcca Makefile \u547d\u4ee4\u53d8\u66f4","text":""},{"location":"release/CHANGES/#_7","title":"\u4fee\u6539\u7684\u547d\u4ee4","text":"<pre><code># lint \u547d\u4ee4\n- flake8 src/ tests/\n+ ruff check src/ tests/\n\n# fmt \u547d\u4ee4\n- black src/ tests/ &amp;&amp; isort src/ tests/\n+ ruff format src/ tests/ &amp;&amp; ruff check --fix src/ tests/\n</code></pre>"},{"location":"release/CHANGES/#9","title":"\u5220\u9664\u7684\u547d\u4ee4 (9\u4e2a)","text":"<pre><code>test-quick (\u65e7\u7248\u672c, \u7b2c225\u884c)\ntest-unit (\u4e2d\u6587\u7248\u672c)\ntest-integration (\u4e2d\u6587\u7248\u672c)\ntest-e2e (\u4e2d\u6587\u7248\u672c)\ntest-smoke (\u4e2d\u6587\u7248\u672c)\ntest-coverage (\u91cd\u590d)\ntest-watch (\u7b80\u5355\u547d\u4ee4)\ntest-parallel (\u7b80\u5355\u547d\u4ee4)\nclean-test (\u4e0e clean-cache \u91cd\u590d)\ntest-report (\u7b80\u5355\u547d\u4ee4)\ntest-failed (\u7b80\u5355\u547d\u4ee4)\ntest-debug (\u7b80\u5355\u547d\u4ee4)\ntest-performance (\u4e0e benchmark-full \u91cd\u590d)\ntest-security (\u4e0e security-check \u91cd\u590d)\n</code></pre>"},{"location":"release/CHANGES/#_8","title":"\u4fdd\u7559\u7684\u4e3b\u8981\u547d\u4ee4","text":"<p>\u2705 \u73af\u5883\u7ba1\u7406: <code>venv</code>, <code>install</code>, <code>env-check</code>, <code>clean-env</code> \u2705 \u4ee3\u7801\u8d28\u91cf: <code>lint</code>, <code>fmt</code>, <code>quality</code>, <code>prepush</code> \u2705 \u6d4b\u8bd5: <code>test</code>, <code>test-quick</code>, <code>test.unit</code>, <code>test.int</code>, <code>test.e2e</code> \u2705 \u8986\u76d6\u7387: <code>coverage</code>, <code>coverage-ci</code>, <code>coverage-local</code> \u2705 Docker: <code>up</code>, <code>down</code>, <code>logs</code>, <code>deploy</code></p>"},{"location":"release/CHANGES/#docker","title":"\ud83d\udc33 Docker \u4f18\u5316","text":""},{"location":"release/CHANGES/#dockerfile","title":"Dockerfile \u53d8\u66f4","text":"<p>Before: <pre><code>RUN pip install --no-cache-dir --user -r requirements/requirements.lock\n</code></pre></p> <p>After: <pre><code># syntax=docker/dockerfile:1.4\nRUN --mount=type=cache,target=/root/.cache/pip \\\n    pip install --user -r requirements/requirements.lock\n</code></pre></p>"},{"location":"release/CHANGES/#dockerignore","title":".dockerignore \u65b0\u589e\u6392\u9664\u9879","text":"<pre><code>+ htmlcov/\n+ htmlcov_*/\n+ .coverage\n+ coverage.xml\n+ .github/\n+ mlruns/\n+ docker-compose.*.yml\n+ .venv/\n+ scripts/test/\n+ scripts/archive/\n+ scripts/fixes/\n</code></pre>"},{"location":"release/CHANGES/#_9","title":"\u6027\u80fd\u63d0\u5347","text":"\u573a\u666f \u4f18\u5316\u524d \u4f18\u5316\u540e \u63d0\u5347 \u9996\u6b21\u6784\u5efa ~3\u5206\u949f ~3\u5206\u949f - \u91cd\u590d\u6784\u5efa ~2.5\u5206\u949f ~60\u79d2 \u2b06\ufe0f 60% \u955c\u50cf\u5927\u5c0f \u57fa\u51c6 -5% \u2b06\ufe0f \u5c0f\u5e45\u4f18\u5316"},{"location":"release/CHANGES/#_10","title":"\ud83d\udcc8 \u8986\u76d6\u7387\u7b56\u7565\u7edf\u4e00","text":""},{"location":"release/CHANGES/#_11","title":"\u4e4b\u524d\uff08\u6df7\u4e71\uff09","text":"<pre><code>coverage: --cov-fail-under=80\ncoverage-ci: --cov-fail-under=80\ncoverage-local: --cov-fail-under=60\nci-verify.sh: --cov-fail-under=50  # \u274c \u4e0d\u4e00\u81f4\n</code></pre>"},{"location":"release/CHANGES/#_12","title":"\u73b0\u5728\uff08\u7edf\u4e00\uff09","text":"<pre><code>COVERAGE_THRESHOLD_CI ?= 80      # CI \u73af\u5883\nCOVERAGE_THRESHOLD_DEV ?= 60     # \u5f00\u53d1\u73af\u5883\nCOVERAGE_THRESHOLD_MIN ?= 50     # \u6700\u4f4e\u8981\u6c42\nCOVERAGE_THRESHOLD ?= $(COVERAGE_THRESHOLD_CI)\n\ncoverage-ci: --cov-fail-under=$(COVERAGE_THRESHOLD_CI)\ncoverage-local: --cov-fail-under=$(COVERAGE_THRESHOLD_DEV)\nci-verify.sh: COVERAGE_THRESHOLD=${COVERAGE_THRESHOLD:-80}\n</code></pre>"},{"location":"release/CHANGES/#github-actions","title":"\ud83d\udd0d GitHub Actions \u5de5\u4f5c\u6d41","text":""},{"location":"release/CHANGES/#_13","title":"\u91cd\u547d\u540d\u539f\u56e0","text":"<ol> <li>\u2705 \u907f\u514d\u7f16\u7801\u95ee\u9898: \u4e2d\u6587\u6587\u4ef6\u540d\u53ef\u80fd\u5bfc\u81f4\u7f16\u7801\u9519\u8bef</li> <li>\u2705 \u56fd\u9645\u5316: \u82f1\u6587\u547d\u540d\u66f4\u7b26\u5408\u5f00\u6e90\u6807\u51c6</li> <li>\u2705 \u517c\u5bb9\u6027: \u907f\u514d\u8de8\u5e73\u53f0\u95ee\u9898</li> <li>\u2705 \u53ef\u8bfb\u6027: \u5728 GitHub UI \u4e2d\u663e\u793a\u66f4\u6e05\u6670</li> </ol>"},{"location":"release/CHANGES/#_14","title":"\u6587\u4ef6\u6620\u5c04","text":"<pre><code>CI\u6d41\u6c34\u7ebf.yml              \u2192 ci-pipeline.yml\nMLOps\u673a\u5668\u5b66\u4e60\u6d41\u6c34\u7ebf.yml    \u2192 mlops-pipeline.yml\n\u90e8\u7f72\u6d41\u6c34\u7ebf.yml            \u2192 deploy-pipeline.yml\n\u95ee\u9898\u8ddf\u8e2a\u6d41\u6c34\u7ebf.yml         \u2192 issue-tracking-pipeline.yml\n\u9879\u76ee\u540c\u6b65\u6d41\u6c34\u7ebf.yml         \u2192 project-sync-pipeline.yml\n\u9879\u76ee\u7ef4\u62a4\u6d41\u6c34\u7ebf.yml         \u2192 project-maintenance-pipeline.yml\n</code></pre>"},{"location":"release/CHANGES/#_15","title":"\ud83c\udfaf \u4f18\u5316\u6548\u679c\u603b\u7ed3","text":""},{"location":"release/CHANGES/#_16","title":"\u6307\u6807\u5bf9\u6bd4","text":"\u7c7b\u522b \u6307\u6807 \u4f18\u5316\u524d \u4f18\u5316\u540e \u63d0\u5347 \u4f9d\u8d56 \u5f00\u53d1\u5305\u6570\u91cf 73 70 \u2b07\ufe0f 4% \u5de5\u5177\u6570\u91cf 4 2 \u2b07\ufe0f 50% \u91cd\u590d\u58f0\u660e 2\u5904 0\u5904 \u2705 Makefile \u603b\u884c\u6570 938 870 \u2b07\ufe0f 7% \u91cd\u590d\u547d\u4ee4 8\u4e2a 0\u4e2a \u2705 Docker \u6784\u5efa\u65f6\u95f4 \u57fa\u51c6 -60% \u2b06\ufe0f \u955c\u50cf\u4f18\u5316 - \u2705 - \u914d\u7f6e \u9608\u503c\u7b56\u7565 \u6df7\u4e71 \u7edf\u4e00 \u2b50\u2b50\u2b50 \u73af\u5883\u6a21\u677f \u57fa\u7840 \u5b8c\u5584 \u2b50\u2b50\u2b50"},{"location":"release/CHANGES/#_17","title":"\u2705 \u9a8c\u8bc1\u6e05\u5355","text":""},{"location":"release/CHANGES/#_18","title":"\u5df2\u5b8c\u6210\u7684\u4f18\u5316\u4efb\u52a1","text":"<ul> <li> \u5220\u9664\u91cd\u590d\u7684 safety \u4f9d\u8d56</li> <li> \u7edf\u4e00\u4ee3\u7801\u68c0\u67e5\u5de5\u5177\u5230 ruff + mypy</li> <li> \u4fee\u590d Makefile \u91cd\u590d\u5b9a\u4e49</li> <li> \u7edf\u4e00\u8986\u76d6\u7387\u9608\u503c\u7b56\u7565</li> <li> \u91cd\u547d\u540d GitHub Actions \u5de5\u4f5c\u6d41</li> <li> \u521b\u5efa .env.example \u6a21\u677f</li> <li> \u79fb\u9664\u5197\u4f59\u683c\u5f0f\u5316\u5de5\u5177</li> <li> \u4f18\u5316 Dockerfile \u6784\u5efa\u7f13\u5b58</li> <li> \u66f4\u65b0 .dockerignore</li> <li> \u91cd\u65b0\u9501\u5b9a\u4f9d\u8d56</li> <li> \u521b\u5efa\u4f18\u5316\u6587\u6863</li> </ul>"},{"location":"release/CHANGES/#_19","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<pre><code># \u73af\u5883\u9a8c\u8bc1\n\u2705 make env-check\n\u2705 ruff --version\n\u2705 mypy --version\n\n# \u529f\u80fd\u9a8c\u8bc1\n\u2705 make lint\n\u2705 make fmt\n\u2705 make coverage-local\n\n# Docker \u9a8c\u8bc1\n\u2705 docker-compose build\n\u2705 docker-compose up -d\n</code></pre>"},{"location":"release/CHANGES/#_20","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>\ud83d\udcd6 OPTIMIZATION_SUMMARY.md - \u8be6\u7ec6\u4f18\u5316\u62a5\u544a</li> <li>\ud83d\udcd6 OPTIMIZATION_QUICKSTART.md - \u5feb\u901f\u5f00\u59cb\u6307\u5357</li> <li>\ud83d\udcd6 README.md - \u9879\u76ee\u8bf4\u660e</li> <li>\ud83d\udcd6 Makefile - \u6240\u6709\u53ef\u7528\u547d\u4ee4</li> </ul>"},{"location":"release/CHANGES/#_21","title":"\ud83d\ude80 \u540e\u7eed\u6b65\u9aa4","text":""},{"location":"release/CHANGES/#_22","title":"\u63a8\u8350\u64cd\u4f5c","text":"<ol> <li> <p>\u91cd\u65b0\u5b89\u88c5\u4f9d\u8d56:    <pre><code>make clean-env\nmake install\n</code></pre></p> </li> <li> <p>\u9a8c\u8bc1\u65b0\u5de5\u5177\u94fe:    <pre><code>make lint\nmake fmt\n</code></pre></p> </li> <li> <p>\u542f\u7528 Docker BuildKit:    <pre><code>echo 'export DOCKER_BUILDKIT=1' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre></p> </li> <li> <p>\u8fd0\u884c\u5b8c\u6574\u6d4b\u8bd5:    <pre><code>make prepush\n./ci-verify.sh\n</code></pre></p> </li> </ol> <p>\u53d8\u66f4\u5b8c\u6210\u65f6\u95f4: 2025-10-07 \u4f18\u5316\u72b6\u6001: \u2705 \u5168\u90e8\u5b8c\u6210 \u4e0b\u4e00\u7248\u672c: v2.1\uff08\u53ef\u9009\u589e\u5f3a\uff09</p>"},{"location":"release/RELEASE_PROCESS/","title":"\u53d1\u5e03\u6d41\u7a0b\u7ba1\u7406","text":""},{"location":"release/RELEASE_PROCESS/#_2","title":"\u7248\u672c\u63a7\u5236\u7b56\u7565","text":""},{"location":"release/RELEASE_PROCESS/#_3","title":"\u8bed\u4e49\u5316\u7248\u672c","text":"<ul> <li>\u4e3b\u7248\u672c\u53f7\uff1a\u4e0d\u517c\u5bb9\u7684API\u4fee\u6539</li> <li>\u6b21\u7248\u672c\u53f7\uff1a\u5411\u4e0b\u517c\u5bb9\u7684\u529f\u80fd\u6027\u65b0\u589e</li> <li>\u4fee\u8ba2\u53f7\uff1a\u5411\u4e0b\u517c\u5bb9\u7684\u95ee\u9898\u4fee\u6b63</li> </ul>"},{"location":"release/RELEASE_PROCESS/#_4","title":"\u7248\u672c\u683c\u5f0f","text":"<pre><code>v1.0.0 - \u521d\u59cb\u7248\u672c\nv1.1.0 - \u6dfb\u52a0\u65b0\u529f\u80fd\nv1.1.1 - \u4fee\u590dbug\n</code></pre>"},{"location":"release/RELEASE_PROCESS/#_5","title":"\u53d1\u5e03\u6d41\u7a0b","text":""},{"location":"release/RELEASE_PROCESS/#1","title":"1. \u5f00\u53d1\u9636\u6bb5","text":"<ul> <li>\u529f\u80fd\u5f00\u53d1\u5728 <code>develop</code> \u5206\u652f</li> <li>\u4ee3\u7801\u5ba1\u67e5\u548c\u6d4b\u8bd5</li> <li>\u6587\u6863\u66f4\u65b0</li> </ul>"},{"location":"release/RELEASE_PROCESS/#2","title":"2. \u6d4b\u8bd5\u9636\u6bb5","text":"<ul> <li>\u96c6\u6210\u6d4b\u8bd5</li> <li>\u6027\u80fd\u6d4b\u8bd5</li> <li>\u5b89\u5168\u6d4b\u8bd5</li> </ul>"},{"location":"release/RELEASE_PROCESS/#3-staging","title":"3. \u9884\u53d1\u5e03\uff08Staging\uff09","text":"<ul> <li>\u90e8\u7f72\u5230\u9884\u53d1\u5e03\u73af\u5883</li> <li>\u6700\u7ec8\u9a8c\u8bc1</li> <li>\u83b7\u53d6\u53d1\u5e03\u6279\u51c6</li> </ul>"},{"location":"release/RELEASE_PROCESS/#4","title":"4. \u751f\u4ea7\u53d1\u5e03","text":"<ul> <li>\u521b\u5efa\u53d1\u5e03\u6807\u7b7e</li> <li>\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883</li> <li>\u76d1\u63a7\u548c\u9a8c\u8bc1</li> </ul>"},{"location":"release/RELEASE_PROCESS/#_6","title":"\u53d1\u5e03\u68c0\u67e5\u6e05\u5355","text":""},{"location":"release/RELEASE_PROCESS/#_7","title":"\u4ee3\u7801\u8d28\u91cf","text":"<ul> <li> \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7\uff08\u8986\u76d6\u7387 \u2265 80%\uff09</li> <li> \u4ee3\u7801\u683c\u5f0f\u5316\u68c0\u67e5\u901a\u8fc7</li> <li> \u5b89\u5168\u626b\u63cf\u901a\u8fc7</li> <li> \u6027\u80fd\u6d4b\u8bd5\u901a\u8fc7</li> </ul>"},{"location":"release/RELEASE_PROCESS/#_8","title":"\u6587\u6863\u66f4\u65b0","text":"<ul> <li> API\u6587\u6863\u66f4\u65b0</li> <li> CHANGELOG.md\u66f4\u65b0</li> <li> \u53d1\u5e03\u8bf4\u660e\u51c6\u5907</li> <li> \u7528\u6237\u6307\u5357\u66f4\u65b0</li> </ul>"},{"location":"release/RELEASE_PROCESS/#_9","title":"\u90e8\u7f72\u51c6\u5907","text":"<ul> <li> \u6570\u636e\u5e93\u8fc1\u79fb\u811a\u672c\u51c6\u5907</li> <li> \u914d\u7f6e\u6587\u4ef6\u66f4\u65b0</li> <li> \u56de\u6eda\u65b9\u6848\u51c6\u5907</li> <li> \u76d1\u63a7\u544a\u8b66\u8bbe\u7f6e</li> </ul>"},{"location":"release/RELEASE_PROCESS/#_10","title":"\u56de\u6eda\u6d41\u7a0b","text":""},{"location":"release/RELEASE_PROCESS/#_11","title":"\u56de\u6eda\u89e6\u53d1\u6761\u4ef6","text":"<ul> <li>\u5173\u952e\u529f\u80fd\u4e0d\u53ef\u7528</li> <li>\u6027\u80fd\u4e25\u91cd\u4e0b\u964d</li> <li>\u6570\u636e\u5f02\u5e38</li> </ul>"},{"location":"release/RELEASE_PROCESS/#_12","title":"\u56de\u6eda\u6b65\u9aa4","text":"<ol> <li>\u7acb\u5373\u901a\u77e5\u76f8\u5173\u4eba\u5458</li> <li>\u6267\u884c\u56de\u6eda\u811a\u672c</li> <li>\u9a8c\u8bc1\u7cfb\u7edf\u6062\u590d</li> <li>\u5206\u6790\u95ee\u9898\u539f\u56e0</li> <li>\u5236\u5b9a\u4fee\u590d\u8ba1\u5212</li> </ol>"},{"location":"release/RELEASE_PROCESS/#_13","title":"\u53d1\u5e03\u65e5\u5386","text":""},{"location":"release/RELEASE_PROCESS/#_14","title":"\u5b9a\u671f\u53d1\u5e03","text":"<ul> <li>\u6bcf\u6708\u53d1\u5e03\uff1a\u529f\u80fd\u66f4\u65b0\u548cbug\u4fee\u590d</li> <li>\u7d27\u6025\u53d1\u5e03\uff1a\u5173\u952e\u5b89\u5168\u95ee\u9898\u4fee\u590d</li> </ul>"},{"location":"release/RELEASE_PROCESS/#_15","title":"\u53d1\u5e03\u7a97\u53e3","text":"<ul> <li>\u5de5\u4f5c\u65e5\uff1a\u5468\u4e8c\u81f3\u5468\u56db 10:00-16:00</li> <li>\u907f\u514d\u65f6\u95f4\uff1a\u5468\u4e94\u4e0b\u5348\u3001\u8282\u5047\u65e5\u524d\u540e</li> </ul>"},{"location":"release/RELEASE_PROCESS/#_16","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u90e8\u7f72\u6307\u5357</li> <li>\u8fd0\u7ef4\u624b\u518c</li> <li>API\u6587\u6863</li> </ul> <p>\u6700\u540e\u66f4\u65b0\uff1a2025-10-02</p>"},{"location":"security/SECURITY_FIXES_SUMMARY/","title":"\ud83d\udee1\ufe0f FootballPrediction \u9879\u76ee\u5b89\u5168\u6f0f\u6d1e\u4fee\u590d\u62a5\u544a","text":""},{"location":"security/SECURITY_FIXES_SUMMARY/#_1","title":"\ud83d\udccb \u4fee\u590d\u6982\u89c8","text":""},{"location":"security/SECURITY_FIXES_SUMMARY/#_2","title":"\u2705 \u5df2\u5b8c\u6210\u7684\u5b89\u5168\u4fee\u590d","text":""},{"location":"security/SECURITY_FIXES_SUMMARY/#1-minio","title":"\ud83d\udea8 \u4efb\u52a11: MinIO \u5b89\u5168\u914d\u7f6e\u4fee\u590d \u2705","text":"<ul> <li>\u2705 \u79fb\u9664\u9ed8\u8ba4\u51ed\u636e: \u5c06 <code>MINIO_ROOT_USER</code> \u548c <code>MINIO_ROOT_PASSWORD</code> \u6539\u4e3a\u73af\u5883\u53d8\u91cf</li> <li>\u2705 \u79fb\u9664\u516c\u5f00\u6876\u7b56\u7565: \u66f4\u65b0 <code>scripts/minio-init.sh</code> \u548c <code>docker-compose.yml</code></li> <li>\u79fb\u9664\u6240\u6709 <code>mc policy set public</code> \u547d\u4ee4</li> <li>\u8bbe\u7f6e\u6240\u6709\u6876\u4e3a\u79c1\u6709\u8bbf\u95ee (<code>mc policy set none</code>)</li> <li>\u2705 \u751f\u6210\u5f3a\u968f\u673a\u5bc6\u7801: 32\u5b57\u7b26\u5f3a\u5bc6\u7801\u66ff\u6362\u9ed8\u8ba4\u51ed\u636e</li> <li>\u2705 \u8bbe\u7f6e\u6700\u5c0f\u6743\u9650: \u6240\u6709\u5b58\u50a8\u6876\u9ed8\u8ba4\u79c1\u6709\uff0c\u4ec5\u8ba4\u8bc1\u7528\u6237\u53ef\u8bbf\u95ee</li> </ul>"},{"location":"security/SECURITY_FIXES_SUMMARY/#2","title":"\ud83d\udea8 \u4efb\u52a12: \u4fee\u590d\u6240\u6709\u9ed8\u8ba4\u5bc6\u7801 \u2705","text":"<ul> <li>\u2705 \u626b\u63cf\u5e76\u66ff\u6362\u5f31\u5bc6\u7801: \u79fb\u9664\u6240\u6709 <code>change_me</code> \u5360\u4f4d\u7b26</li> <li>\u2705 \u4fee\u590d\u6570\u636e\u5e93\u914d\u7f6e: \u66f4\u65b0 Marquez \u6570\u636e\u5e93\u786c\u7f16\u7801\u5bc6\u7801</li> <li>\u2705 \u73af\u5883\u53d8\u91cf\u5316: \u6240\u6709\u654f\u611f\u4fe1\u606f\u6539\u4e3a\u73af\u5883\u53d8\u91cf\u914d\u7f6e</li> <li>\u2705 \u5f3a\u968f\u673a\u5bc6\u7801\u751f\u6210: \u4e3a\u6240\u6709\u670d\u52a1\u751f\u621032\u5b57\u7b26\u5f3a\u5bc6\u7801</li> </ul>"},{"location":"security/SECURITY_FIXES_SUMMARY/#3-redis","title":"\ud83d\udea8 \u4efb\u52a13: Redis \u914d\u7f6e\u52a0\u56fa \u2705","text":"<ul> <li>\u2705 \u79fb\u9664\u5916\u90e8\u7aef\u53e3\u6620\u5c04: \u6ce8\u91ca\u6389 <code>\"6379:6379\"</code> \u7aef\u53e3\u6620\u5c04</li> <li>\u2705 \u542f\u7528\u5bc6\u7801\u8ba4\u8bc1: \u6dfb\u52a0 <code>--requirepass</code> \u53c2\u6570\u548c\u73af\u5883\u53d8\u91cf</li> <li>\u2705 \u66f4\u65b0\u8fde\u63a5\u5b57\u7b26\u4e32: \u6240\u6709 Redis \u8fde\u63a5\u4f7f\u7528\u5bc6\u7801\u8ba4\u8bc1\u683c\u5f0f</li> <li>\u2705 \u5065\u5eb7\u68c0\u67e5\u66f4\u65b0: \u4f7f\u7528\u5bc6\u7801\u8fdb\u884c\u5065\u5eb7\u72b6\u6001\u68c0\u67e5</li> </ul>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_3","title":"\ud83d\udd10 \u751f\u6210\u7684\u5f3a\u5bc6\u7801\u65b9\u6848","text":""},{"location":"security/SECURITY_FIXES_SUMMARY/#_4","title":"\u5bc6\u7801\u751f\u6210\u5668\u7279\u6027","text":"<ul> <li>\u5bc6\u7801\u957f\u5ea6: 32-64 \u5b57\u7b26</li> <li>\u5b57\u7b26\u96c6: \u5927\u5c0f\u5199\u5b57\u6bcd + \u6570\u5b57 + \u5b89\u5168\u7279\u6b8a\u5b57\u7b26</li> <li>\u6700\u5c0f\u8981\u6c42: \u81f3\u5c112\u4e2a\u5927\u5199\u30012\u4e2a\u5c0f\u5199\u30012\u4e2a\u6570\u5b57\u30012\u4e2a\u7279\u6b8a\u5b57\u7b26</li> <li>\u71b5\u503c: \u9ad8\u8fbe 200+ bits</li> </ul>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_5","title":"\u81ea\u52a8\u5316\u5de5\u5177","text":"<ul> <li><code>scripts/generate-passwords.py</code>: \u5f3a\u5bc6\u7801\u751f\u6210\u5668</li> <li>\u652f\u6301\u683c\u5f0f: JSON\u3001\u73af\u5883\u53d8\u91cf\u3001\u7eaf\u6587\u672c</li> <li>\u81ea\u52a8\u5316: \u53ef\u751f\u6210\u5b8c\u6574\u7684 <code>.env</code> \u914d\u7f6e\u6587\u4ef6</li> </ul>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_6","title":"\ud83d\udcc1 \u4fee\u6539\u7684\u6587\u4ef6\u6e05\u5355","text":""},{"location":"security/SECURITY_FIXES_SUMMARY/#_7","title":"\ud83d\udd27 \u6838\u5fc3\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>docker-compose.yml\n\u251c\u2500\u2500 Redis \u670d\u52a1\u914d\u7f6e\n\u2502   \u251c\u2500\u2500 \u79fb\u9664\u5916\u90e8\u7aef\u53e3\u6620\u5c04\n\u2502   \u251c\u2500\u2500 \u6dfb\u52a0\u5bc6\u7801\u8ba4\u8bc1\n\u2502   \u2514\u2500\u2500 \u66f4\u65b0\u5065\u5eb7\u68c0\u67e5\n\u251c\u2500\u2500 MinIO \u670d\u52a1\u914d\u7f6e\n\u2502   \u251c\u2500\u2500 \u73af\u5883\u53d8\u91cf\u5316\u51ed\u636e\n\u2502   \u2514\u2500\u2500 \u79c1\u6709\u6876\u7b56\u7565\n\u251c\u2500\u2500 \u6570\u636e\u5e93\u670d\u52a1\n\u2502   \u2514\u2500\u2500 Marquez DB \u5bc6\u7801\u73af\u5883\u53d8\u91cf\u5316\n\u2514\u2500\u2500 \u5176\u4ed6\u670d\u52a1\u8fde\u63a5\u5b57\u7b26\u4e32\u66f4\u65b0\n</code></pre>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_8","title":"\ud83d\udd28 \u811a\u672c\u6587\u4ef6","text":"<pre><code>scripts/\n\u251c\u2500\u2500 minio-init.sh (\u4fee\u6539)\n\u2502   \u2514\u2500\u2500 \u79fb\u9664\u516c\u5f00\u6876\u7b56\u7565\uff0c\u8bbe\u7f6e\u79c1\u6709\u8bbf\u95ee\n\u251c\u2500\u2500 generate-passwords.py (\u65b0\u589e)\n\u2502   \u2514\u2500\u2500 \u5f3a\u5bc6\u7801\u751f\u6210\u5668\n\u2514\u2500\u2500 security-verify.sh (\u65b0\u589e)\n    \u2514\u2500\u2500 \u5b89\u5168\u914d\u7f6e\u9a8c\u8bc1\u811a\u672c\n</code></pre>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_9","title":"\ud83d\udcdd \u914d\u7f6e\u6a21\u677f","text":"<pre><code>env.template (\u4fee\u6539)\n\u251c\u2500\u2500 \u79fb\u9664\u6240\u6709 'change_me' \u5360\u4f4d\u7b26\n\u251c\u2500\u2500 \u6dfb\u52a0 Redis \u5bc6\u7801\u914d\u7f6e\n\u2514\u2500\u2500 \u66f4\u65b0\u4e3a\u5b89\u5168\u5360\u4f4d\u7b26\n\nenv.secure.template (\u65b0\u589e)\n\u2514\u2500\u2500 \u5305\u542b\u5f3a\u5bc6\u7801\u7684\u5b8c\u6574\u914d\u7f6e\u793a\u4f8b\n\n.env.production.example (\u65b0\u589e)\n\u2514\u2500\u2500 \u751f\u4ea7\u73af\u5883\u5bc6\u7801\u793a\u4f8b\u6587\u4ef6\n</code></pre>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_10","title":"\ud83d\udcda \u6587\u6863","text":"<pre><code>docs/security-checklist.md (\u65b0\u589e)\n\u2514\u2500\u2500 \u5b8c\u6574\u7684\u5b89\u5168\u68c0\u67e5\u6e05\u5355\u548c\u6700\u4f73\u5b9e\u8df5\n\nSECURITY_FIXES_SUMMARY.md (\u65b0\u589e)\n\u2514\u2500\u2500 \u672c\u5b89\u5168\u4fee\u590d\u62a5\u544a\n</code></pre>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_11","title":"\ud83e\uddea \u5b89\u5168\u914d\u7f6e\u9a8c\u8bc1\u6b65\u9aa4","text":""},{"location":"security/SECURITY_FIXES_SUMMARY/#1","title":"1. \u73af\u5883\u914d\u7f6e\u9a8c\u8bc1","text":"<pre><code># \u590d\u5236\u5b89\u5168\u914d\u7f6e\u6a21\u677f\ncp env.secure.template .env\n\n# \u6216\u4f7f\u7528\u5bc6\u7801\u751f\u6210\u5668\u521b\u5efa\npython3 scripts/generate-passwords.py --format env --output .env\n\n# \u8bbe\u7f6e\u5b89\u5168\u6743\u9650\nchmod 600 .env\n</code></pre>"},{"location":"security/SECURITY_FIXES_SUMMARY/#2_1","title":"2. \u8fd0\u884c\u5b89\u5168\u9a8c\u8bc1","text":"<pre><code># \u6267\u884c\u5b89\u5168\u68c0\u67e5\u811a\u672c\nbash scripts/security-verify.sh\n\n# \u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u5b89\u5168\u6027\ngrep -r \"change_me\\|minioadmin\" docker-compose.yml scripts/\n</code></pre>"},{"location":"security/SECURITY_FIXES_SUMMARY/#3","title":"3. \u670d\u52a1\u8fde\u63a5\u6d4b\u8bd5","text":"<pre><code># \u542f\u52a8\u670d\u52a1\ndocker-compose up -d\n\n# \u6d4b\u8bd5\u6570\u636e\u5e93\u8fde\u63a5\ndocker-compose exec db psql -U football_user -d football_prediction_dev -c \"SELECT version();\"\n\n# \u6d4b\u8bd5 Redis \u8fde\u63a5\uff08\u9700\u8981\u5bc6\u7801\uff09\ndocker-compose exec redis redis-cli -a \"$REDIS_PASSWORD\" ping\n\n# \u6d4b\u8bd5 MinIO \u8fde\u63a5\ndocker-compose exec minio-init mc ls myminio/\n</code></pre>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_12","title":"\ud83d\udee1\ufe0f \u90e8\u7f72\u524d\u5b89\u5168\u68c0\u67e5\u6e05\u5355","text":""},{"location":"security/SECURITY_FIXES_SUMMARY/#_13","title":"\ud83d\udd10 \u5bc6\u7801\u548c\u51ed\u636e","text":"<ul> <li> \u79fb\u9664\u6240\u6709\u9ed8\u8ba4\u5bc6\u7801 (<code>change_me</code>, <code>minioadmin</code>)</li> <li> \u751f\u621032+\u5b57\u7b26\u5f3a\u968f\u673a\u5bc6\u7801</li> <li> \u6240\u6709\u654f\u611f\u4fe1\u606f\u4f7f\u7528\u73af\u5883\u53d8\u91cf</li> <li> <code>.env</code> \u6587\u4ef6\u6743\u9650\u8bbe\u7f6e\u4e3a 600</li> <li> <code>.env</code> \u6587\u4ef6\u6dfb\u52a0\u5230 <code>.gitignore</code></li> </ul>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_14","title":"\ud83d\udd12 \u6570\u636e\u5e93\u5b89\u5168","text":"<ul> <li> PostgreSQL \u4f7f\u7528\u5f3a\u5bc6\u7801</li> <li> \u6743\u9650\u5206\u79bb\u914d\u7f6e\uff08reader/writer/admin\uff09</li> <li> \u79fb\u9664\u786c\u7f16\u7801\u6570\u636e\u5e93\u51ed\u636e</li> <li> \u8fde\u63a5\u52a0\u5bc6\u914d\u7f6e</li> </ul>"},{"location":"security/SECURITY_FIXES_SUMMARY/#redis","title":"\ud83d\udd34 Redis \u5b89\u5168","text":"<ul> <li> \u542f\u7528\u5bc6\u7801\u8ba4\u8bc1</li> <li> \u79fb\u9664\u5916\u90e8\u7aef\u53e3\u6620\u5c04</li> <li> \u6240\u6709\u5ba2\u6237\u7aef\u4f7f\u7528\u5bc6\u7801\u8fde\u63a5</li> <li> \u5065\u5eb7\u68c0\u67e5\u4f7f\u7528\u5bc6\u7801</li> </ul>"},{"location":"security/SECURITY_FIXES_SUMMARY/#minio","title":"\ud83d\udce6 MinIO \u5b89\u5168","text":"<ul> <li> \u79fb\u9664\u9ed8\u8ba4\u51ed\u636e</li> <li> \u6240\u6709\u6876\u8bbe\u7f6e\u4e3a\u79c1\u6709\u8bbf\u95ee</li> <li> \u79fb\u9664\u516c\u5f00\u6876\u7b56\u7565</li> <li> \u4f7f\u7528\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u51ed\u636e</li> </ul>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_15","title":"\ud83c\udf10 \u7f51\u7edc\u5b89\u5168","text":"<ul> <li> Redis \u4e0d\u5bf9\u5916\u66b4\u9732\u7aef\u53e3</li> <li> \u4f7f\u7528\u72ec\u7acb Docker \u7f51\u7edc</li> <li> \u670d\u52a1\u95f4\u901a\u4fe1\u4ec5\u5728\u5185\u90e8\u7f51\u7edc</li> <li> \u79fb\u9664\u4e0d\u5fc5\u8981\u7684\u7aef\u53e3\u6620\u5c04</li> </ul>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_16","title":"\ud83d\udea8 \u5b89\u5168\u7ea7\u522b\u8bc4\u4f30","text":"\u5b89\u5168\u65b9\u9762 \u4fee\u590d\u524d \u4fee\u590d\u540e \u6539\u8fdb\u7a0b\u5ea6 \u5bc6\u7801\u5f3a\u5ea6 \u274c \u5f31\u5bc6\u7801 \u2705 \u5f3a\u968f\u673a\u5bc6\u7801 \ud83d\udfe2 \u663e\u8457\u6539\u8fdb \u7f51\u7edc\u66b4\u9732 \u26a0\ufe0f Redis \u5bf9\u5916\u66b4\u9732 \u2705 \u5185\u7f51\u8bbf\u95ee \ud83d\udfe2 \u663e\u8457\u6539\u8fdb \u5b58\u50a8\u5b89\u5168 \u274c \u516c\u5f00\u6876\u7b56\u7565 \u2705 \u79c1\u6709\u8bbf\u95ee \ud83d\udfe2 \u663e\u8457\u6539\u8fdb \u51ed\u636e\u7ba1\u7406 \u274c \u786c\u7f16\u7801\u5bc6\u7801 \u2705 \u73af\u5883\u53d8\u91cf \ud83d\udfe2 \u663e\u8457\u6539\u8fdb \u6743\u9650\u63a7\u5236 \u26a0\ufe0f \u8fc7\u5ea6\u6743\u9650 \u2705 \u6700\u5c0f\u6743\u9650 \ud83d\udfe2 \u663e\u8457\u6539\u8fdb"},{"location":"security/SECURITY_FIXES_SUMMARY/#_17","title":"\ud83d\udcde \u540e\u7eed\u5b89\u5168\u5efa\u8bae","text":""},{"location":"security/SECURITY_FIXES_SUMMARY/#_18","title":"\ud83d\udd04 \u5b9a\u671f\u7ef4\u62a4","text":"<ol> <li>\u5bc6\u7801\u8f6e\u6362: \u6bcf90\u5929\u66f4\u6362\u4e00\u6b21\u5bc6\u7801</li> <li>\u5b89\u5168\u5ba1\u8ba1: \u5b9a\u671f\u8fd0\u884c <code>security-verify.sh</code></li> <li>\u4f9d\u8d56\u66f4\u65b0: \u5b9a\u671f\u66f4\u65b0 Docker \u955c\u50cf\u548c\u4f9d\u8d56</li> <li>\u76d1\u63a7\u544a\u8b66: \u914d\u7f6e\u5f02\u5e38\u8bbf\u95ee\u544a\u8b66</li> </ol>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_19","title":"\ud83d\udee1\ufe0f \u751f\u4ea7\u73af\u5883\u589e\u5f3a","text":"<ol> <li>\u5bc6\u94a5\u7ba1\u7406\u670d\u52a1: \u4f7f\u7528 HashiCorp Vault \u6216 AWS Secrets Manager</li> <li>\u7f51\u7edc\u9694\u79bb: \u4f7f\u7528 VPC \u6216\u4e13\u7528\u7f51\u7edc</li> <li>\u8bbf\u95ee\u63a7\u5236: \u5b9e\u65bd RBAC \u548c MFA</li> <li>\u65e5\u5fd7\u5ba1\u8ba1: \u542f\u7528\u8be6\u7ec6\u5ba1\u8ba1\u65e5\u5fd7</li> </ol>"},{"location":"security/SECURITY_FIXES_SUMMARY/#_20","title":"\ud83d\udcca \u6301\u7eed\u6539\u8fdb","text":"<ol> <li>\u5b89\u5168\u626b\u63cf: \u96c6\u6210 SAST/DAST \u5de5\u5177</li> <li>\u6e17\u900f\u6d4b\u8bd5: \u5b9a\u671f\u8fdb\u884c\u6e17\u900f\u6d4b\u8bd5</li> <li>\u5b89\u5168\u57f9\u8bad: \u56e2\u961f\u5b89\u5168\u610f\u8bc6\u57f9\u8bad</li> <li>\u4e8b\u4ef6\u54cd\u5e94: \u5efa\u7acb\u5b89\u5168\u4e8b\u4ef6\u54cd\u5e94\u6d41\u7a0b</li> </ol> <p>\u2705 \u603b\u7ed3: \u6240\u6709\u4e25\u91cd\u5b89\u5168\u6f0f\u6d1e\u5df2\u4fee\u590d\uff0c\u7cfb\u7edf\u5b89\u5168\u7ea7\u522b\u4ece \u9ad8\u98ce\u9669 \u63d0\u5347\u81f3 \u751f\u4ea7\u5c31\u7eea\u3002</p> <p>\u26a0\ufe0f \u91cd\u8981: \u90e8\u7f72\u524d\u8bf7\u52a1\u5fc5\u6267\u884c <code>bash scripts/security-verify.sh</code> \u8fdb\u884c\u6700\u7ec8\u5b89\u5168\u9a8c\u8bc1\u3002</p>"},{"location":"security/SECURITY_RISK_ACCEPTED/","title":"Temporary Security Risk Acceptance","text":"<p>\u672c\u9636\u6bb5\u5728\u6700\u5c0f\u53ef\u8fd0\u884c\u76ee\u6807\u4e0b\u6682\u672a\u6e05\u9664\u4ee5\u4e0b\u4f9d\u8d56\u6f0f\u6d1e\uff0c\u5747\u8bb0\u5f55\u5728\u6848\u5e76\u5236\u5b9a\u540e\u7eed\u5904\u7406\u8ba1\u5212\u3002</p> Package Vulnerability ID Severity (vendor) \u4e34\u65f6\u7f13\u89e3\u63aa\u65bd \u8ba1\u5212\u5904\u7406\u65f6\u95f4 sqlalchemy-utils 0.42.0 42194 High (Safety) \u6682\u672a\u4f7f\u7528 <code>EncryptedType</code> \u529f\u80fd\uff1b\u9650\u5236\u6700\u5c0f\u5316 API \u4e0d\u89e6\u53d1\u76f8\u5173\u4ee3\u7801\u8def\u5f84 D3 \u9636\u6bb5\u5347\u7ea7\u6216\u79fb\u9664\u6a21\u5757 protobuf 5.29.2 77740 High \u5f53\u524d\u4ec5\u5728\u79bb\u7ebf\u811a\u672c\u4e2d\u4f7f\u7528\uff1b\u963b\u65ad\u5916\u90e8\u672a\u4fe1\u4efb\u8f93\u5165 D3 \u9636\u6bb5\u8ddf\u8fdb\u5b98\u65b9\u4fee\u590d\u7248 mlflow 2.18.0 71693 / 71692 / 77891 / 78831 / 76179 / 71579 / 71578 / 71577 / 71584 / 71587 / 71691 High MLflow \u529f\u80fd\u4f4d\u4e8e <code>tests/legacy/</code>\uff0c\u6700\u5c0f\u5316\u90e8\u7f72\u4e0d\u542f\u7528\uff1b\u963b\u65ad\u5916\u90e8\u8bbf\u95ee D3 \u9636\u6bb5\u8bc4\u4f30\u5347\u7ea7\u6216\u5b8c\u5168\u9694\u79bb knack 0.12.0 79023 / 79027 High CLI \u5de5\u5177\u6682\u672a\u66b4\u9732\u7ed9\u751f\u4ea7\uff1b\u9650\u5236\u4e3a\u5185\u90e8\u4f7f\u7528 D3 \u9636\u6bb5\u5347\u7ea7\u6216\u66ff\u6362\u5b9e\u73b0 feast 0.47.0 73884 High \u529f\u80fd\u4f4d\u4e8e\u9057\u7559\u76ee\u5f55\uff1b\u6700\u5c0f\u5316 API \u4e0d\u52a0\u8f7d\u76f8\u5173\u6a21\u5757 D3 \u9636\u6bb5\u8fc1\u79fb/\u5347\u7ea7 <p>\u6ce8\uff1a\u4e0a\u8ff0\u98ce\u9669\u5df2\u540c\u6b65\u5230\u7a33\u5b9a\u5316\u51b2\u523a\u8bb0\u5f55\uff0c\u540e\u7eed\u6062\u590d\u529f\u80fd\u65f6\u9700\u4f18\u5148\u5904\u7406\u3002</p>"},{"location":"testing/","title":"\u6d4b\u8bd5\u8986\u76d6\u7387\u63d0\u5347\u6307\u5357","text":""},{"location":"testing/#_2","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u672c\u6307\u5357\u63d0\u4f9b\u4e86\u7cfb\u7edf\u6027\u7684\u6d4b\u8bd5\u8986\u76d6\u7387\u63d0\u5347\u65b9\u6848\uff0c\u5e2e\u52a9\u56e2\u961f\u4ece\u5f53\u524d\u768416%\u8986\u76d6\u7387\u63d0\u5347\u523080%\u7684\u76ee\u6807\u3002</p>"},{"location":"testing/#_3","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":""},{"location":"testing/#1","title":"1. \u8fd0\u884c\u5feb\u901f\u542f\u52a8\u811a\u672c","text":"<pre><code># \u4e00\u952e\u5206\u6790\u548c\u751f\u6210\u6539\u8fdb\u8ba1\u5212\npython scripts/testing/quick_start.py\n</code></pre> <p>\u8be5\u811a\u672c\u4f1a\uff1a - \u68c0\u67e5\u73af\u5883\u51c6\u5907\u60c5\u51b5 - \u5206\u6790\u5f53\u524d\u8986\u76d6\u7387\u72b6\u51b5 - \u751f\u6210\u4f18\u5148\u6539\u8fdb\u8ba1\u5212 - \u521b\u5efa\u7b2c\u4e00\u5468\u4efb\u52a1\u5217\u8868</p>"},{"location":"testing/#2","title":"2. \u67e5\u770b\u6539\u8fdb\u8ba1\u5212","text":"<pre><code># \u67e5\u770b\u8be6\u7ec6\u6539\u8fdb\u8ba1\u5212\ncat test_improvement_plan.json\n\n# \u67e5\u770b\u672c\u5468\u4efb\u52a1\ncat test_week_1_tasks.md\n</code></pre>"},{"location":"testing/#3","title":"3. \u5f00\u59cb\u6267\u884c","text":"<pre><code># \u8fd0\u884c\u6d4b\u8bd5\nmake test.unit\n\n# \u67e5\u770b\u8986\u76d6\u7387\nmake coverage-local\n\n# \u6253\u5f00\u8be6\u7ec6\u62a5\u544a\nopen htmlcov/index.html\n</code></pre>"},{"location":"testing/#_4","title":"\ud83d\udcda \u6587\u6863\u7ed3\u6784","text":"<pre><code>docs/testing/\n\u251c\u2500\u2500 README.md                    # \u672c\u6587\u4ef6\n\u251c\u2500\u2500 EXECUTION_PLAN.md            # \u8be6\u7ec6\u6267\u884c\u8ba1\u5212\n\u251c\u2500\u2500 STRATEGY.md                  # \u6d4b\u8bd5\u7b56\u7565\uff08\u5f85\u521b\u5efa\uff09\n\u251c\u2500\u2500 GUIDE.md                     # \u6d4b\u8bd5\u7f16\u5199\u6307\u5357\uff08\u5f85\u521b\u5efa\uff09\n\u251c\u2500\u2500 MOCK_GUIDE.md                # Mock\u4f7f\u7528\u6307\u5357\uff08\u5f85\u521b\u5efa\uff09\n\u2514\u2500\u2500 examples/                    # \u793a\u4f8b\u4ee3\u7801\n    \u251c\u2500\u2500 test_examples.py\n    \u251c\u2500\u2500 mock_examples.py\n    \u2514\u2500\u2500 factory_examples.py\n</code></pre>"},{"location":"testing/#_5","title":"\ud83c\udfaf \u6539\u8fdb\u8def\u7ebf\u56fe","text":""},{"location":"testing/#20","title":"\u7b2c\u4e00\u9636\u6bb5\uff1a\u57fa\u7840\u8bbe\u65bd\uff08\u76ee\u6807\uff1a20%\uff09","text":"<ul> <li> Docker\u6d4b\u8bd5\u73af\u5883</li> <li> Mock\u5b9e\u73b0\uff08Kafka\u3001Feast\uff09</li> <li> TestContainers\u914d\u7f6e</li> <li> CI/CD\u6d41\u6c34\u7ebf</li> <li> \u4f9d\u8d56\u95ee\u9898\u4fee\u590d</li> </ul>"},{"location":"testing/#35","title":"\u7b2c\u4e8c\u9636\u6bb5\uff1a\u6838\u5fc3\u6a21\u5757\uff08\u76ee\u6807\uff1a35%\uff09","text":"<ul> <li> API\u5c42\u6d4b\u8bd5</li> <li> \u5de5\u5177\u7c7b\u6d4b\u8bd5</li> <li> \u914d\u7f6e\u6a21\u5757\u6d4b\u8bd5</li> <li> \u670d\u52a1\u57fa\u7c7b\u6d4b\u8bd5</li> </ul>"},{"location":"testing/#55","title":"\u7b2c\u4e09\u9636\u6bb5\uff1a\u670d\u52a1\u5c42\uff08\u76ee\u6807\uff1a55%\uff09","text":"<ul> <li> \u6570\u636e\u5904\u7406\u670d\u52a1</li> <li> \u7f13\u5b58\u670d\u52a1</li> <li> \u6570\u636e\u5e93\u5c42</li> <li> \u6d88\u606f\u961f\u5217</li> </ul>"},{"location":"testing/#80","title":"\u7b2c\u56db\u9636\u6bb5\uff1a\u7aef\u5230\u7aef\uff08\u76ee\u6807\uff1a80%\uff09","text":"<ul> <li> \u96c6\u6210\u6d4b\u8bd5</li> <li> E2E\u6d4b\u8bd5</li> <li> \u6027\u80fd\u6d4b\u8bd5</li> <li> \u76d1\u63a7\u4f53\u7cfb</li> </ul>"},{"location":"testing/#_6","title":"\ud83d\udee0\ufe0f \u5de5\u5177\u548c\u6846\u67b6","text":""},{"location":"testing/#_7","title":"\u6838\u5fc3\u5de5\u5177","text":"<ul> <li>pytest: \u6d4b\u8bd5\u6846\u67b6</li> <li>pytest-cov: \u8986\u76d6\u7387\u5de5\u5177</li> <li>pytest-mock: Mock\u5de5\u5177</li> <li>TestContainers: \u5bb9\u5668\u5316\u6d4b\u8bd5</li> <li>Factory Boy: \u6d4b\u8bd5\u6570\u636e\u5de5\u5382</li> </ul>"},{"location":"testing/#_8","title":"\u53ef\u9009\u5de5\u5177","text":"<ul> <li>pytest-benchmark: \u6027\u80fd\u6d4b\u8bd5</li> <li>pytest-asyncio: \u5f02\u6b65\u6d4b\u8bd5</li> <li>pytest-xdist: \u5e76\u884c\u6d4b\u8bd5</li> <li>Hypothesis: \u5c5e\u6027\u6d4b\u8bd5</li> </ul>"},{"location":"testing/#_9","title":"\ud83d\udcdd \u6d4b\u8bd5\u7f16\u5199\u89c4\u8303","text":""},{"location":"testing/#1_1","title":"1. \u6d4b\u8bd5\u547d\u540d","text":"<pre><code># \u826f\u597d\u7684\u6d4b\u8bd5\u547d\u540d\ndef test_user_registration_with_valid_data_returns_success():\n    \"\"\"\u6d4b\u8bd5\u4f7f\u7528\u6709\u6548\u6570\u636e\u6ce8\u518c\u7528\u6237\u8fd4\u56de\u6210\u529f\"\"\"\n    pass\n\ndef test_api_health_check_returns_200_when_all_services_healthy():\n    \"\"\"\u6d4b\u8bd5\u5065\u5eb7\u68c0\u67e5API\u5728\u6240\u6709\u670d\u52a1\u5065\u5eb7\u65f6\u8fd4\u56de200\"\"\"\n    pass\n</code></pre>"},{"location":"testing/#2-aaa","title":"2. \u6d4b\u8bd5\u7ed3\u6784\uff08AAA\u6a21\u5f0f\uff09","text":"<pre><code>def test_calculate_team_form():\n    # Arrange - \u51c6\u5907\u6d4b\u8bd5\u6570\u636e\n    team = Team(name=\"Test Team\")\n    matches = [\n        Match(result=\"win\"),\n        Match(result=\"draw\"),\n        Match(result=\"lose\")\n    ]\n\n    # Act - \u6267\u884c\u64cd\u4f5c\n    form = calculate_team_form(team, matches)\n\n    # Assert - \u9a8c\u8bc1\u7ed3\u679c\n    assert form == \"WDL\"\n    assert form.win_count == 1\n    assert form.draw_count == 1\n    assert form.loss_count == 1\n</code></pre>"},{"location":"testing/#3-fixtures","title":"3. \u4f7f\u7528Fixtures","text":"<pre><code>@pytest.fixture\ndef sample_team():\n    \"\"\"\u521b\u5efa\u793a\u4f8b\u7403\u961f\"\"\"\n    return TeamFactory(name=\"Sample Team\")\n\n@pytest.fixture\ndef sample_league(sample_team):\n    \"\"\"\u521b\u5efa\u5305\u542b\u7403\u961f\u7684\u8054\u8d5b\"\"\"\n    league = LeagueFactory()\n    league.teams.append(sample_team)\n    return league\n\ndef test_league_get_team(league, sample_team):\n    \"\"\"\u6d4b\u8bd5\u8054\u8d5b\u83b7\u53d6\u7403\u961f\"\"\"\n    team = league.get_team(sample_team.id)\n    assert team == sample_team\n</code></pre>"},{"location":"testing/#4-mock","title":"4. Mock\u4f7f\u7528\u539f\u5219","text":"<pre><code># \u2705 \u597d\u7684\u5b9e\u8df5\uff1aMock\u5916\u90e8\u4f9d\u8d56\ndef test_api_call_with_external_service():\n    with patch('services.external_api.Client') as mock_client:\n        mock_client.get.return_value = {\"status\": \"ok\"}\n\n        result = my_service.call_external_api()\n\n        assert result[\"status\"] == \"ok\"\n        mock_client.get.assert_called_once()\n\n# \u274c \u4e0d\u597d\u7684\u5b9e\u8df5\uff1aMock\u4e1a\u52a1\u903b\u8f91\ndef test_calculate_price_with_mock():\n    with patch('services.pricing.calculate_price') as mock_calc:\n        mock_calc.return_value = 100\n        # \u8fd9\u4e0d\u5e94\u8be5Mock\uff0c\u5e94\u8be5\u6d4b\u8bd5\u5b9e\u9645\u903b\u8f91\n</code></pre>"},{"location":"testing/#_10","title":"\ud83d\udd27 \u5e38\u89c1\u95ee\u9898\u89e3\u51b3","text":""},{"location":"testing/#1_2","title":"1. \u6d4b\u8bd5\u73af\u5883\u95ee\u9898","text":"<pre><code># \u6e05\u7406Python\u7f13\u5b58\nfind . -type d -name \"__pycache__\" -exec rm -rf {} +\nfind . -name \"*.pyc\" -delete\n\n# \u91cd\u65b0\u5b89\u88c5\u4f9d\u8d56\npip install -r requirements/dev.lock\n\n# \u68c0\u67e5\u6d4b\u8bd5\u914d\u7f6e\npython -m pytest --collect-only | head\n</code></pre>"},{"location":"testing/#2_1","title":"2. \u8986\u76d6\u7387\u4e0d\u63d0\u5347","text":"<pre><code># \u68c0\u67e5\u54ea\u4e9b\u884c\u672a\u88ab\u8986\u76d6\npytest --cov=src --cov-report=html\n\n# \u67e5\u770bHTML\u62a5\u544a\uff0c\u627e\u51fa\u7ea2\u8272\u884c\nopen htmlcov/index.html\n\n# \u4e13\u6ce8\u4e8e\u4f4e\u8986\u76d6\u7387\u6a21\u5757\npytest tests/unit/low_coverage_module.py --cov=src.low_coverage_module\n</code></pre>"},{"location":"testing/#3_1","title":"3. \u6d4b\u8bd5\u592a\u6162","text":"<pre><code># \u4f7f\u7528\u5e76\u884c\u6d4b\u8bd5\npytest -n auto\n\n# \u53ea\u8fd0\u884c\u53d8\u66f4\u76f8\u5173\u7684\u6d4b\u8bd5\npytest --diff-cover\n\n# \u4f7f\u7528\u5feb\u901f\u6d4b\u8bd5\u6a21\u5f0f\nmake test-quick\n</code></pre>"},{"location":"testing/#_11","title":"\ud83d\udcca \u8986\u76d6\u7387\u76d1\u63a7","text":""},{"location":"testing/#1_3","title":"1. \u672c\u5730\u76d1\u63a7","text":"<pre><code># \u751f\u6210\u8d8b\u52bf\u62a5\u544a\npython scripts/monitor_coverage.py\n\n# \u67e5\u770b\u8986\u76d6\u7387\u53d8\u5316\ngit diff --stat coverage.json\n</code></pre>"},{"location":"testing/#2-cicd","title":"2. CI/CD\u96c6\u6210","text":"<p>GitHub Actions\u4f1a\u81ea\u52a8\uff1a - \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5 - \u68c0\u67e5\u8986\u76d6\u7387\u9608\u503c - \u751f\u6210\u8986\u76d6\u7387\u62a5\u544a - \u53d1\u9001\u5230Codecov</p>"},{"location":"testing/#3_2","title":"3. \u8d28\u91cf\u95e8\u7981","text":"<ul> <li>PR\u5fc5\u987b\u901a\u8fc7\u6240\u6709\u6d4b\u8bd5</li> <li>\u8986\u76d6\u7387\u4e0d\u80fd\u4e0b\u964d</li> <li>\u5fc5\u987b\u901a\u8fc7\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5</li> </ul>"},{"location":"testing/#_12","title":"\ud83c\udfaf \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"testing/#1_4","title":"1. \u6d4b\u8bd5\u91d1\u5b57\u5854","text":"<pre><code>    E2E Tests (10%)\n   \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  Integration Tests (20%)\n \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nUnit Tests (70%)\n</code></pre>"},{"location":"testing/#2_2","title":"2. \u6d4b\u8bd5\u539f\u5219","text":"<ul> <li>FAST: \u6d4b\u8bd5\u5e94\u8be5\u5feb\u901f\u8fd0\u884c</li> <li>ISOLATED: \u6d4b\u8bd5\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb</li> <li>REPEATABLE: \u6d4b\u8bd5\u7ed3\u679c\u5e94\u8be5\u4e00\u81f4</li> <li>SELF-VALIDATING: \u6d4b\u8bd5\u5e94\u8be5\u6709\u660e\u786e\u7684\u901a\u8fc7/\u5931\u8d25\u7ed3\u679c</li> <li>TIMELY: \u6d4b\u8bd5\u5e94\u8be5\u53ca\u65f6\u7f16\u5199</li> </ul>"},{"location":"testing/#3_3","title":"3. \u4ee3\u7801\u5ba1\u67e5\u68c0\u67e5\u70b9","text":"<ul> <li> \u662f\u5426\u6709\u5bf9\u5e94\u7684\u6d4b\u8bd5\uff1f</li> <li> \u6d4b\u8bd5\u8986\u76d6\u4e86\u6240\u6709\u8fb9\u754c\u60c5\u51b5\uff1f</li> <li> Mock\u4f7f\u7528\u662f\u5426\u5408\u7406\uff1f</li> <li> \u6d4b\u8bd5\u6570\u636e\u662f\u5426\u72ec\u7acb\uff1f</li> <li> \u6d4b\u8bd5\u540d\u79f0\u662f\u5426\u6e05\u6670\uff1f</li> </ul>"},{"location":"testing/#_13","title":"\ud83c\udd98 \u83b7\u53d6\u5e2e\u52a9","text":""},{"location":"testing/#_14","title":"\u6587\u6863\u8d44\u6e90","text":"<ul> <li>pytest\u5b98\u65b9\u6587\u6863</li> <li>TestContainers\u6587\u6863</li> <li>Factory Boy\u6587\u6863</li> </ul>"},{"location":"testing/#_15","title":"\u56e2\u961f\u652f\u6301","text":"<ul> <li>\u6280\u672f\u652f\u6301: @tech-lead</li> <li>\u5de5\u5177\u95ee\u9898: @devops</li> <li>\u6d4b\u8bd5\u7b56\u7565: @qa-team</li> <li>Slack\u9891\u9053: #testing</li> </ul>"},{"location":"testing/#_16","title":"\u5e38\u7528\u547d\u4ee4","text":"<pre><code># \u67e5\u770b\u6240\u6709\u6d4b\u8bd5\u547d\u4ee4\nmake help\n\n# \u8fd0\u884c\u7279\u5b9a\u6d4b\u8bd5\npytest tests/unit/api/test_health.py -v\n\n# \u8fd0\u884c\u5e26\u6807\u8bb0\u7684\u6d4b\u8bd5\npytest -m \"unit and not slow\"\n\n# \u8c03\u8bd5\u6d4b\u8bd5\npytest tests/unit/api/test_health.py -v -s --tb=long\n\n# \u53ea\u8fd0\u884c\u5931\u8d25\u7684\u6d4b\u8bd5\npytest --lf\n\n# \u751f\u6210\u8986\u76d6\u7387\u57fa\u51c6\npytest --cov=src --cov-report=json --cov-fail-under=0\n</code></pre>"},{"location":"testing/#_17","title":"\ud83d\udcc8 \u6210\u529f\u6848\u4f8b","text":""},{"location":"testing/#1api","title":"\u6848\u4f8b1\uff1aAPI\u5065\u5eb7\u68c0\u67e5\u6d4b\u8bd5","text":"<ul> <li>\u4e4b\u524d: 15%\u8986\u76d6\u7387</li> <li>\u6539\u8fdb: \u6dfb\u52a0\u4e86\u5168\u9762\u7684\u5065\u5eb7\u68c0\u67e5\u6d4b\u8bd5</li> <li>\u4e4b\u540e: 75%\u8986\u76d6\u7387</li> <li>\u8017\u65f6: 2\u5c0f\u65f6</li> </ul>"},{"location":"testing/#2_3","title":"\u6848\u4f8b2\uff1a\u65f6\u95f4\u5de5\u5177\u6d4b\u8bd5","text":"<ul> <li>\u4e4b\u524d: 71%\u8986\u76d6\u7387</li> <li>\u6539\u8fdb: \u6dfb\u52a0\u4e86\u8fb9\u754c\u503c\u548c\u5f02\u5e38\u6d4b\u8bd5</li> <li>\u4e4b\u540e: 85%\u8986\u76d6\u7387</li> <li>\u8017\u65f6: 3\u5c0f\u65f6</li> </ul>"},{"location":"testing/#3_4","title":"\u6848\u4f8b3\uff1a\u914d\u7f6e\u6a21\u5757\u6d4b\u8bd5","text":"<ul> <li>\u4e4b\u524d: 68%\u8986\u76d6\u7387</li> <li>\u6539\u8fdb: \u6dfb\u52a0\u4e86\u914d\u7f6e\u9a8c\u8bc1\u548c\u73af\u5883\u6d4b\u8bd5</li> <li>\u4e4b\u540e: 90%\u8986\u76d6\u7387</li> <li>\u8017\u65f6: 4\u5c0f\u65f6</li> </ul> <p>\u8bb0\u4f4f\uff1a\u6301\u7eed\u6539\u8fdb\u6bd4\u4e00\u6b21\u6027\u5b8c\u7f8e\u66f4\u91cd\u8981\u3002\u6bcf\u5929\u8fdb\u6b65\u4e00\u70b9\u70b9\uff0c\u6700\u7ec8\u4f1a\u8fbe\u5230\u76ee\u6807\uff01</p>"},{"location":"testing/CI_GUARDIAN_GUIDE/","title":"\ud83d\udee1\ufe0f CI Guardian \u7cfb\u7edf\u4f7f\u7528\u6307\u5357","text":"<p>CI\u8d28\u91cf\u4fdd\u969c\u5b88\u62a4\u8005 - \u667a\u80fdCI\u95ee\u9898\u76d1\u63a7\u4e0e\u9632\u5fa1\u673a\u5236\u751f\u6210\u7cfb\u7edf \u751f\u6210\u65f6\u95f4: 2025-01-20 \u7248\u672c: v1.0.0</p>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_1","title":"\ud83d\udccb \u7cfb\u7edf\u6982\u8ff0","text":"<p>CI Guardian\u662f\u4e00\u4e2a\u667a\u80fd\u5316\u7684CI\u8d28\u91cf\u4fdd\u969c\u7cfb\u7edf\uff0c\u80fd\u591f\uff1a</p> <ol> <li>\ud83d\udd0d \u81ea\u52a8\u76d1\u63a7\uff1a\u5b9e\u65f6\u76d1\u542c\u672c\u5730\u548c\u8fdc\u7a0bCI\u8f93\u51fa\uff0c\u667a\u80fd\u8bc6\u522b\u95ee\u9898</li> <li>\ud83e\udde0 \u667a\u80fd\u5206\u6790\uff1a\u6df1\u5ea6\u5206\u6790CI\u5931\u8d25\u539f\u56e0\uff0c\u7cbe\u786e\u5206\u7c7b\u95ee\u9898\u7c7b\u578b</li> <li>\ud83d\udee1\ufe0f \u81ea\u52a8\u9632\u5fa1\uff1a\u6839\u636e\u95ee\u9898\u7c7b\u578b\u81ea\u52a8\u751f\u6210\u9632\u5fa1\u673a\u5236\uff08\u6d4b\u8bd5\u3001\u914d\u7f6e\u3001\u94a9\u5b50\uff09</li> <li>\ud83d\udd27 \u81ea\u52a8\u96c6\u6210\uff1a\u5c06\u9632\u5fa1\u63aa\u65bd\u65e0\u7f1d\u96c6\u6210\u5230\u9879\u76eeCI\u6d41\u7a0b\u4e2d</li> <li>\u2705 \u6548\u679c\u9a8c\u8bc1\uff1a\u9a8c\u8bc1\u9632\u5fa1\u673a\u5236\u7684\u6709\u6548\u6027\uff0c\u786e\u4fdd\u95ee\u9898\u4e0d\u518d\u53d1\u751f</li> </ol>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_2","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":""},{"location":"testing/CI_GUARDIAN_GUIDE/#1","title":"1. \u57fa\u7840\u4f7f\u7528","text":"<pre><code># \u76d1\u63a7\u7279\u5b9aCI\u547d\u4ee4\npython scripts/ci_guardian.py -c \"make quality\"\n\n# \u5206\u6790\u73b0\u6709\u65e5\u5fd7\u4e2d\u7684\u95ee\u9898\npython scripts/ci_guardian.py -l\n\n# \u751f\u6210\u5e76\u9a8c\u8bc1\u9632\u5fa1\u673a\u5236\npython scripts/ci_guardian.py -g -v\n\n# \u8fd0\u884c\u5b8c\u6574\u7684CI\u5b88\u62a4\u68c0\u67e5\uff08\u63a8\u8350\uff09\nmake ci-guardian\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#2-makefile","title":"2. \u96c6\u6210\u5230Makefile","text":"<p>\u7cfb\u7edf\u5df2\u81ea\u52a8\u66f4\u65b0\u60a8\u7684Makefile\uff0c\u6dfb\u52a0\u4e86\u4ee5\u4e0b\u76ee\u6807\uff1a</p> <pre><code>make validate-defenses     # \u9a8c\u8bc1\u6240\u6709\u9632\u5fa1\u673a\u5236\nmake run-validation-tests  # \u8fd0\u884c\u589e\u5f3a\u9a8c\u8bc1\u6d4b\u8bd5\nmake check-defense-coverage # \u68c0\u67e5\u9632\u5fa1\u8986\u76d6\u7387\nmake update-defenses       # \u66f4\u65b0\u9632\u5fa1\u673a\u5236\nmake ci-guardian          # \u8fd0\u884c\u5b8c\u6574CI\u5b88\u62a4\u68c0\u67e5\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#3-ci","title":"3. \u96c6\u6210\u5230CI\u6d41\u7a0b","text":"<p>\u7cfb\u7edf\u5df2\u81ea\u52a8\u66f4\u65b0GitHub Actions\u5de5\u4f5c\u6d41\uff0c\u6dfb\u52a0\u4e86\u9632\u5fa1\u9a8c\u8bc1\u6b65\u9aa4\uff1a</p> <ul> <li>\u81ea\u52a8\u8fd0\u884c\u9632\u5fa1\u9a8c\u8bc1\u6d4b\u8bd5</li> <li>\u68c0\u67e5\u9632\u5fa1\u673a\u5236\u8986\u76d6\u7387</li> <li>\u9a8c\u8bc1pre-commit\u94a9\u5b50\u914d\u7f6e</li> <li>\u8fd0\u884cCI Guardian\u5206\u6790</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_3","title":"\ud83d\udd27 \u6838\u5fc3\u7ec4\u4ef6\u8be6\u89e3","text":""},{"location":"testing/CI_GUARDIAN_GUIDE/#1-ci-guardian-ci_guardianpy","title":"1. CI Guardian \u4e3b\u63a7\u5236\u5668 (<code>ci_guardian.py</code>)","text":"<p>\u529f\u80fd\uff1aCI\u95ee\u9898\u76d1\u63a7\u548c\u9632\u5fa1\u673a\u5236\u751f\u6210\u7684\u6838\u5fc3\u63a7\u5236\u5668</p> <p>\u4e3b\u8981\u547d\u4ee4\uff1a</p> <pre><code># \u76d1\u63a7CI\u547d\u4ee4\u5e76\u751f\u6210\u9632\u5fa1\u673a\u5236\npython scripts/ci_guardian.py -c \"make test\" -s\n\n# \u5206\u6790\u73b0\u6709\u95ee\u9898\u65e5\u5fd7\npython scripts/ci_guardian.py --analyze-logs\n\n# \u4ec5\u751f\u6210\u9632\u5fa1\u673a\u5236\npython scripts/ci_guardian.py --generate-only\n\n# \u9a8c\u8bc1\u73b0\u6709\u9632\u5fa1\u673a\u5236\npython scripts/ci_guardian.py --validate\n\n# \u663e\u793a\u6267\u884c\u6458\u8981\npython scripts/ci_guardian.py -c \"make quality\" --summary\n</code></pre> <p>\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u65b0\u9879\u76ee\u521d\u59cb\u5316CI\u9632\u5fa1</li> <li>\u53d1\u73b0\u65b0\u7684CI\u95ee\u9898\u65f6</li> <li>\u5b9a\u671f\u68c0\u67e5CI\u8d28\u91cf\u72b6\u6001</li> <li>\u9a8c\u8bc1\u9632\u5fa1\u673a\u5236\u6709\u6548\u6027</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#2-ci-ci_issue_analyzerpy","title":"2. CI\u95ee\u9898\u5206\u6790\u5668 (<code>ci_issue_analyzer.py</code>)","text":"<p>\u529f\u80fd\uff1a\u6df1\u5ea6\u5206\u6790CI\u5de5\u5177\u8f93\u51fa\uff0c\u63d0\u4f9b\u7cbe\u786e\u7684\u95ee\u9898\u5206\u7c7b\u548c\u89e3\u51b3\u65b9\u6848</p> <p>\u4e3b\u8981\u547d\u4ee4\uff1a</p> <pre><code># \u5206\u6790\u8d28\u91cf\u68c0\u67e5\u65e5\u5fd7\npython scripts/ci_issue_analyzer.py -l logs/quality_check.json -s\n\n# \u5206\u6790\u7279\u5b9a\u5de5\u5177\u8f93\u51fa\npython scripts/ci_issue_analyzer.py -t ruff -i ruff_output.txt -r\n\n# \u751f\u6210\u95ee\u9898\u5206\u6790\u62a5\u544a\npython scripts/ci_issue_analyzer.py -s -r -o analysis_report.json\n</code></pre> <p>\u652f\u6301\u7684\u5de5\u5177\uff1a</p> <ul> <li>Ruff: \u4ee3\u7801\u98ce\u683c\u548c\u9519\u8bef\u68c0\u67e5</li> <li>MyPy: \u9759\u6001\u7c7b\u578b\u68c0\u67e5</li> <li>Pytest: \u5355\u5143\u6d4b\u8bd5\u6846\u67b6</li> <li>Bandit: \u5b89\u5168\u6f0f\u6d1e\u626b\u63cf</li> <li>Coverage: \u6d4b\u8bd5\u8986\u76d6\u7387\u5206\u6790</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#3-defense_generatorpy","title":"3. \u9632\u5fa1\u673a\u5236\u751f\u6210\u5668 (<code>defense_generator.py</code>)","text":"<p>\u529f\u80fd\uff1a\u6839\u636eCI\u95ee\u9898\u81ea\u52a8\u751f\u6210\u9488\u5bf9\u6027\u7684\u9632\u5fa1\u63aa\u65bd</p> <p>\u4e3b\u8981\u547d\u4ee4\uff1a</p> <pre><code># \u751f\u6210\u6240\u6709\u7c7b\u578b\u7684\u9632\u5fa1\u673a\u5236\npython scripts/defense_generator.py -i logs/ci_issues.json\n\n# \u4ec5\u751f\u6210\u6d4b\u8bd5\u6587\u4ef6\npython scripts/defense_generator.py -i logs/ci_issues.json -t\n\n# \u4ec5\u751f\u6210\u914d\u7f6e\u6587\u4ef6\npython scripts/defense_generator.py -i logs/ci_issues.json -c\n\n# \u751f\u6210pre-commit\u94a9\u5b50\npython scripts/defense_generator.py -i logs/ci_issues.json --generate-precommit\n</code></pre> <p>\u751f\u6210\u7684\u9632\u5fa1\u673a\u5236\uff1a</p> <ul> <li>\u9a8c\u8bc1\u6d4b\u8bd5: \u9632\u6b62\u7279\u5b9a\u95ee\u9898\u518d\u6b21\u53d1\u751f\u7684\u6d4b\u8bd5\u7528\u4f8b</li> <li>Lint\u914d\u7f6e: \u589e\u5f3a\u7684\u4ee3\u7801\u68c0\u67e5\u89c4\u5219</li> <li>Pre-commit\u94a9\u5b50: \u63d0\u4ea4\u524d\u81ea\u52a8\u68c0\u67e5</li> <li>CI\u5de5\u4f5c\u6d41: \u589e\u5f3a\u7684GitHub Actions\u914d\u7f6e</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#4-ci-auto_ci_updaterpy","title":"4. \u81ea\u52a8CI\u66f4\u65b0\u5668 (<code>auto_ci_updater.py</code>)","text":"<p>\u529f\u80fd\uff1a\u5c06\u9632\u5fa1\u673a\u5236\u81ea\u52a8\u96c6\u6210\u5230\u9879\u76ee\u914d\u7f6e\u4e2d</p> <p>\u4e3b\u8981\u547d\u4ee4\uff1a</p> <pre><code># \u5b8c\u6574\u96c6\u6210\u9632\u5fa1\u673a\u5236\npython scripts/auto_ci_updater.py -d logs/defenses_generated.json\n\n# \u4ec5\u66f4\u65b0Makefile\npython scripts/auto_ci_updater.py -d logs/defenses_generated.json -m\n\n# \u4ec5\u66f4\u65b0GitHub Actions\npython scripts/auto_ci_updater.py -d logs/defenses_generated.json -g\n\n# \u9a8c\u8bc1\u73b0\u6709\u96c6\u6210\npython scripts/auto_ci_updater.py -v\n</code></pre> <p>\u66f4\u65b0\u7684\u6587\u4ef6\uff1a</p> <ul> <li><code>Makefile</code>: \u6dfb\u52a0\u9632\u5fa1\u9a8c\u8bc1\u76ee\u6807</li> <li><code>.github/workflows/</code>: \u589e\u5f3aCI\u68c0\u67e5\u6b65\u9aa4</li> <li><code>requirements-dev.txt</code>: \u6dfb\u52a0\u5fc5\u8981\u4f9d\u8d56</li> <li><code>setup.cfg</code>: \u66f4\u65b0\u6d4b\u8bd5\u548c\u8986\u76d6\u7387\u914d\u7f6e</li> <li><code>.gitignore</code>: \u6dfb\u52a0\u5ffd\u7565\u89c4\u5219</li> <li><code>docs/</code>: \u521b\u5efa\u9632\u5fa1\u673a\u5236\u6587\u6863</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#5-defense_validatorpy","title":"5. \u9632\u5fa1\u9a8c\u8bc1\u5668 (<code>defense_validator.py</code>)","text":"<p>\u529f\u80fd\uff1a\u9a8c\u8bc1\u751f\u6210\u7684\u9632\u5fa1\u673a\u5236\u662f\u5426\u6709\u6548\u5de5\u4f5c</p> <p>\u4e3b\u8981\u547d\u4ee4\uff1a</p> <pre><code># \u5b8c\u6574\u9a8c\u8bc1\u6240\u6709\u9632\u5fa1\u673a\u5236\npython scripts/defense_validator.py -d logs/defenses_generated.json -s\n\n# \u9a8c\u8bc1\u6d4b\u8bd5\u6587\u4ef6\npython scripts/defense_validator.py -d logs/defenses_generated.json -t\n\n# \u9a8c\u8bc1\u9632\u5fa1\u6548\u679c\npython scripts/defense_validator.py -d logs/defenses_generated.json -i logs/ci_issues.json -e\n\n# \u663e\u793a\u8be6\u7ec6\u7ed3\u679c\npython scripts/defense_validator.py -d logs/defenses_generated.json -dt\n</code></pre> <p>\u9a8c\u8bc1\u5185\u5bb9\uff1a</p> <ul> <li>\u6d4b\u8bd5\u6587\u4ef6\u662f\u5426\u80fd\u6b63\u786e\u8fd0\u884c</li> <li>Lint\u914d\u7f6e\u662f\u5426\u6709\u6548</li> <li>Pre-commit\u94a9\u5b50\u662f\u5426\u5de5\u4f5c</li> <li>CI\u5de5\u4f5c\u6d41\u662f\u5426\u6b63\u786e</li> <li>\u9632\u5fa1\u673a\u5236\u7684\u5b9e\u9645\u6548\u679c</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_4","title":"\ud83d\udcca \u95ee\u9898\u7c7b\u578b\u4e0e\u9632\u5fa1\u7b56\u7565","text":""},{"location":"testing/CI_GUARDIAN_GUIDE/#1-code-style","title":"1. \u4ee3\u7801\u98ce\u683c\u95ee\u9898 (Code Style)","text":"<p>\u68c0\u6d4b\u5de5\u5177: Ruff, Black, Flake8 \u5e38\u89c1\u95ee\u9898: \u884c\u957f\u5ea6\u8d85\u9650\u3001import\u6392\u5e8f\u3001\u7a7a\u683c\u95ee\u9898 \u9632\u5fa1\u7b56\u7565:</p> <ul> <li>\u751f\u6210\u4ee3\u7801\u98ce\u683c\u9a8c\u8bc1\u6d4b\u8bd5</li> <li>\u66f4\u65b0Ruff\u914d\u7f6e\u589e\u52a0\u4e25\u683c\u89c4\u5219</li> <li>\u6dfb\u52a0pre-commit\u683c\u5f0f\u5316\u94a9\u5b50</li> </ul> <pre><code># \u624b\u52a8\u89e6\u53d1\u98ce\u683c\u68c0\u67e5\nmake test-style\nruff check --fix src/ tests/\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#2-type-check","title":"2. \u7c7b\u578b\u68c0\u67e5\u95ee\u9898 (Type Check)","text":"<p>\u68c0\u6d4b\u5de5\u5177: MyPy \u5e38\u89c1\u95ee\u9898: \u7f3a\u5c11\u7c7b\u578b\u6ce8\u89e3\u3001\u7c7b\u578b\u4e0d\u5339\u914d \u9632\u5fa1\u7b56\u7565:</p> <ul> <li>\u751f\u6210\u7c7b\u578b\u9a8c\u8bc1\u6d4b\u8bd5</li> <li>\u4e25\u683c\u5316MyPy\u914d\u7f6e</li> <li>\u6dfb\u52a0\u7c7b\u578b\u68c0\u67e5\u94a9\u5b50</li> </ul> <pre><code># \u624b\u52a8\u89e6\u53d1\u7c7b\u578b\u68c0\u67e5\nmake test-types\nmypy src/\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#3-test-failure","title":"3. \u6d4b\u8bd5\u5931\u8d25 (Test Failure)","text":"<p>\u68c0\u6d4b\u5de5\u5177: Pytest \u5e38\u89c1\u95ee\u9898: \u65ad\u8a00\u5931\u8d25\u3001\u5bfc\u5165\u9519\u8bef\u3001\u903b\u8f91\u9519\u8bef \u9632\u5fa1\u7b56\u7565:</p> <ul> <li>\u751f\u6210\u589e\u5f3a\u65ad\u8a00\u6d4b\u8bd5</li> <li>\u521b\u5efa\u8fb9\u754c\u6761\u4ef6\u6d4b\u8bd5</li> <li>\u6dfb\u52a0\u6d4b\u8bd5\u8986\u76d6\u7387\u5f3a\u5236\u68c0\u67e5</li> </ul> <pre><code># \u624b\u52a8\u89e6\u53d1\u6d4b\u8bd5\u9a8c\u8bc1\nmake test-assertions\npytest tests/test_*_validation.py -v\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#4-import-error","title":"4. \u5bfc\u5165\u9519\u8bef (Import Error)","text":"<p>\u68c0\u6d4b\u5de5\u5177: Python\u89e3\u91ca\u5668, Pytest \u5e38\u89c1\u95ee\u9898: \u6a21\u5757\u4e0d\u5b58\u5728\u3001\u5faa\u73af\u5bfc\u5165\u3001\u8def\u5f84\u9519\u8bef \u9632\u5fa1\u7b56\u7565:</p> <ul> <li>\u751f\u6210\u5bfc\u5165\u9a8c\u8bc1\u6d4b\u8bd5</li> <li>\u68c0\u67e5\u6a21\u5757\u4f9d\u8d56\u5173\u7cfb</li> <li>\u9a8c\u8bc1\u5305\u7ed3\u6784\u5b8c\u6574\u6027</li> </ul> <pre><code># \u624b\u52a8\u89e6\u53d1\u5bfc\u5165\u68c0\u67e5\nmake test-imports\npython scripts/ci_guardian.py -c \"python -c 'import src'\"\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#5-security-issue","title":"5. \u5b89\u5168\u95ee\u9898 (Security Issue)","text":"<p>\u68c0\u6d4b\u5de5\u5177: Bandit \u5e38\u89c1\u95ee\u9898: \u786c\u7f16\u7801\u5bc6\u7801\u3001\u4e0d\u5b89\u5168\u51fd\u6570\u4f7f\u7528 \u9632\u5fa1\u7b56\u7565:</p> <ul> <li>\u751f\u6210\u5b89\u5168\u9a8c\u8bc1\u6d4b\u8bd5</li> <li>\u4e25\u683c\u5316Bandit\u914d\u7f6e</li> <li>\u6dfb\u52a0\u5b89\u5168\u626b\u63cf\u94a9\u5b50</li> </ul> <pre><code># \u624b\u52a8\u89e6\u53d1\u5b89\u5168\u68c0\u67e5\nmake test-security\nbandit -r src/\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#6-coverage-low","title":"6. \u8986\u76d6\u7387\u4e0d\u8db3 (Coverage Low)","text":"<p>\u68c0\u6d4b\u5de5\u5177: Coverage.py \u5e38\u89c1\u95ee\u9898: \u6d4b\u8bd5\u8986\u76d6\u7387\u4f4e\u4e8e\u9608\u503c \u9632\u5fa1\u7b56\u7565:</p> <ul> <li>\u4e3a\u4f4e\u8986\u76d6\u7387\u6587\u4ef6\u751f\u6210\u6d4b\u8bd5</li> <li>\u5f3a\u5236\u8986\u76d6\u7387\u9608\u503c\u68c0\u67e5</li> <li>\u6dfb\u52a0\u8986\u76d6\u7387\u62a5\u544a</li> </ul> <pre><code># \u624b\u52a8\u89e6\u53d1\u8986\u76d6\u7387\u68c0\u67e5\nmake check-defense-coverage\npytest --cov=src --cov-fail-under=60 --maxfail=5 --disable-warnings\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_5","title":"\ud83d\udd04 \u5b8c\u6574\u5de5\u4f5c\u6d41\u793a\u4f8b","text":""},{"location":"testing/CI_GUARDIAN_GUIDE/#1_1","title":"\u573a\u666f1\uff1a\u65b0\u9879\u76ee\u521d\u59cb\u5316","text":"<pre><code># 1. \u521d\u59cb\u5316\u9879\u76ee\u73af\u5883\nmake init\n\n# 2. \u8fd0\u884c\u57fa\u7840\u8d28\u91cf\u68c0\u67e5\uff0c\u53d1\u73b0\u95ee\u9898\nmake quality\n\n# 3. \u542f\u52a8CI Guardian\u5206\u6790\u95ee\u9898\u5e76\u751f\u6210\u9632\u5fa1\u673a\u5236\npython scripts/ci_guardian.py -c \"make quality\" -s\n\n# 4. \u9a8c\u8bc1\u751f\u6210\u7684\u9632\u5fa1\u673a\u5236\npython scripts/defense_validator.py -d logs/defenses_generated.json -s\n\n# 5. \u96c6\u6210\u9632\u5fa1\u673a\u5236\u5230\u9879\u76ee\u914d\u7f6e\npython scripts/auto_ci_updater.py -d logs/defenses_generated.json\n\n# 6. \u9a8c\u8bc1\u96c6\u6210\u6548\u679c\nmake validate-defenses\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#2ci","title":"\u573a\u666f2\uff1a\u53d1\u73b0\u65b0\u7684CI\u95ee\u9898","text":"<pre><code># 1. CI\u5931\u8d25\u540e\uff0c\u5206\u6790\u5177\u4f53\u95ee\u9898\npython scripts/ci_issue_analyzer.py -l logs/quality_check.json -r\n\n# 2. \u751f\u6210\u9488\u5bf9\u6027\u9632\u5fa1\u673a\u5236\npython scripts/defense_generator.py -i logs/ci_issues.json -s\n\n# 3. \u9a8c\u8bc1\u9632\u5fa1\u673a\u5236\u6709\u6548\u6027\npython scripts/defense_validator.py -d logs/defenses_generated.json -i logs/ci_issues.json -e\n\n# 4. \u96c6\u6210\u5230\u9879\u76ee\u914d\u7f6e\npython scripts/auto_ci_updater.py -d logs/defenses_generated.json\n\n# 5. \u518d\u6b21\u8fd0\u884cCI\u786e\u8ba4\u95ee\u9898\u89e3\u51b3\nmake ci-guardian\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#3","title":"\u573a\u666f3\uff1a\u5b9a\u671f\u7ef4\u62a4\u68c0\u67e5","text":"<pre><code># 1. \u8fd0\u884c\u5b8c\u6574CI Guardian\u68c0\u67e5\nmake ci-guardian\n\n# 2. \u68c0\u67e5\u9632\u5fa1\u8986\u76d6\u7387\nmake check-defense-coverage\n\n# 3. \u8fd0\u884c\u6240\u6709\u9a8c\u8bc1\u6d4b\u8bd5\nmake run-validation-tests\n\n# 4. \u66f4\u65b0\u9632\u5fa1\u673a\u5236\uff08\u5982\u6709\u65b0\u95ee\u9898\uff09\nmake update-defenses\n\n# 5. \u63d0\u4ea4\u66f4\u65b0\u540e\u7684\u914d\u7f6e\ngit add .\ngit commit -m \"chore: update CI defense mechanisms\"\ngit push\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_6","title":"\ud83d\udcc1 \u751f\u6210\u7684\u6587\u4ef6\u7ed3\u6784","text":"<p>CI Guardian\u7cfb\u7edf\u4f1a\u5728\u9879\u76ee\u4e2d\u751f\u6210\u4ee5\u4e0b\u6587\u4ef6\uff1a</p> <pre><code>\u9879\u76ee\u6839\u76ee\u5f55/\n\u251c\u2500\u2500 tests/                          # \u9a8c\u8bc1\u6d4b\u8bd5\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 test_import_validation.py   # \u5bfc\u5165\u9a8c\u8bc1\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 test_type_validation.py     # \u7c7b\u578b\u9a8c\u8bc1\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 test_assertion_validation.py # \u65ad\u8a00\u9a8c\u8bc1\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 test_code_style_validation.py # \u4ee3\u7801\u98ce\u683c\u9a8c\u8bc1\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 test_security_validation.py  # \u5b89\u5168\u9a8c\u8bc1\u6d4b\u8bd5\n\u251c\u2500\u2500 .github/workflows/               # CI\u5de5\u4f5c\u6d41\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 ci.yml                      # \u4e3bCI\u5de5\u4f5c\u6d41\uff08\u5df2\u66f4\u65b0\uff09\n\u2502   \u251c\u2500\u2500 enhanced-quality-check.yml  # \u589e\u5f3a\u8d28\u91cf\u68c0\u67e5\u5de5\u4f5c\u6d41\n\u2502   \u2514\u2500\u2500 defense-validation.yml      # \u9632\u5fa1\u9a8c\u8bc1\u5de5\u4f5c\u6d41\n\u251c\u2500\u2500 logs/                           # \u65e5\u5fd7\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 ci_issues.json             # CI\u95ee\u9898\u8bb0\u5f55\n\u2502   \u251c\u2500\u2500 defenses_generated.json    # \u751f\u6210\u7684\u9632\u5fa1\u673a\u5236\u8bb0\u5f55\n\u2502   \u251c\u2500\u2500 validation_results.json    # \u9a8c\u8bc1\u7ed3\u679c\n\u2502   \u2514\u2500\u2500 integration_report.md      # \u96c6\u6210\u62a5\u544a\n\u251c\u2500\u2500 docs/                          # \u6587\u6863\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 ../legacy/ci_defense_mechanisms.md   # \u9632\u5fa1\u673a\u5236\u8bf4\u660e\n\u2502   \u2514\u2500\u2500 CI_GUARDIAN_GUIDE.md       # \u672c\u6307\u5357\n\u251c\u2500\u2500 pyproject.toml                 # Ruff\u914d\u7f6e\uff08\u5df2\u66f4\u65b0\uff09\n\u251c\u2500\u2500 mypy.ini                       # MyPy\u914d\u7f6e\uff08\u65b0\u589e\uff09\n\u251c\u2500\u2500 .bandit                        # Bandit\u914d\u7f6e\uff08\u65b0\u589e\uff09\n\u251c\u2500\u2500 .pre-commit-config.yaml        # Pre-commit\u914d\u7f6e\uff08\u65b0\u589e\uff09\n\u251c\u2500\u2500 requirements-dev.txt           # \u5f00\u53d1\u4f9d\u8d56\uff08\u5df2\u66f4\u65b0\uff09\n\u251c\u2500\u2500 setup.cfg                      # \u9879\u76ee\u914d\u7f6e\uff08\u5df2\u66f4\u65b0\uff09\n\u251c\u2500\u2500 .gitignore                     # Git\u5ffd\u7565\u89c4\u5219\uff08\u5df2\u66f4\u65b0\uff09\n\u2514\u2500\u2500 Makefile                       # \u6784\u5efa\u914d\u7f6e\uff08\u5df2\u66f4\u65b0\uff09\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_7","title":"\ud83d\udd0d \u65e5\u5fd7\u4e0e\u76d1\u63a7","text":""},{"location":"testing/CI_GUARDIAN_GUIDE/#_8","title":"\u65e5\u5fd7\u6587\u4ef6\u8bf4\u660e","text":"<ul> <li><code>logs/ci_issues.json</code>: \u8bb0\u5f55\u6240\u6709\u68c0\u6d4b\u5230\u7684CI\u95ee\u9898</li> <li><code>logs/defenses_generated.json</code>: \u8bb0\u5f55\u751f\u6210\u7684\u9632\u5fa1\u673a\u5236</li> <li><code>logs/validation_results.json</code>: \u8bb0\u5f55\u9632\u5fa1\u673a\u5236\u9a8c\u8bc1\u7ed3\u679c</li> <li><code>logs/integration_report.md</code>: \u96c6\u6210\u8fc7\u7a0b\u8be6\u7ec6\u62a5\u544a</li> <li><code>logs/quality_check.json</code>: \u8d28\u91cf\u68c0\u67e5\u8be6\u7ec6\u7ed3\u679c</li> <li><code>logs/iteration.log</code>: \u5f00\u53d1\u8fed\u4ee3\u5386\u53f2\u8bb0\u5f55</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_9","title":"\u76d1\u63a7\u547d\u4ee4","text":"<pre><code># \u67e5\u770b\u6700\u65b0\u7684\u95ee\u9898\u7edf\u8ba1\njq '.[] | {category: .category, severity: .severity}' logs/ci_issues.json | head -10\n\n# \u67e5\u770b\u9632\u5fa1\u673a\u5236\u751f\u6210\u7edf\u8ba1\njq '.defenses | to_entries[] | {type: .key, count: (.value | length)}' logs/defenses_generated.json\n\n# \u67e5\u770b\u9a8c\u8bc1\u7ed3\u679c\u6458\u8981\njq '.validation_summary' logs/validation_results.json\n\n# \u67e5\u770b\u6700\u8fd1\u7684\u8fed\u4ee3\u5386\u53f2\ntail -10 logs/iteration.log\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_10","title":"\u2699\ufe0f \u9ad8\u7ea7\u914d\u7f6e","text":""},{"location":"testing/CI_GUARDIAN_GUIDE/#1_2","title":"1. \u81ea\u5b9a\u4e49\u95ee\u9898\u68c0\u6d4b\u6a21\u5f0f","text":"<p>\u7f16\u8f91 <code>scripts/ci_guardian.py</code> \u4e2d\u7684\u68c0\u6d4b\u6a21\u5f0f\uff1a</p> <pre><code># \u6dfb\u52a0\u65b0\u7684\u95ee\u9898\u7c7b\u578b\nCIIssueType.CUSTOM_ISSUE = \"custom_issue\"\n\n# \u6dfb\u52a0\u68c0\u6d4b\u6a21\u5f0f\npatterns = {\n    CIIssueType.CUSTOM_ISSUE: [\n        r\"your_custom_pattern\",\n        r\"another_pattern\"\n    ]\n}\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#2","title":"2. \u81ea\u5b9a\u4e49\u9632\u5fa1\u7b56\u7565","text":"<p>\u7f16\u8f91 <code>scripts/defense_generator.py</code> \u4e2d\u7684\u751f\u6210\u7b56\u7565\uff1a</p> <pre><code>def _generate_custom_defenses(self, issues: List[Dict]) -&gt; Dict[str, List[str]]:\n    \"\"\"\u81ea\u5b9a\u4e49\u9632\u5fa1\u673a\u5236\u751f\u6210\"\"\"\n    # \u5b9e\u73b0\u81ea\u5b9a\u4e49\u9632\u5fa1\u903b\u8f91\n    pass\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#3_1","title":"3. \u81ea\u5b9a\u4e49\u9a8c\u8bc1\u89c4\u5219","text":"<p>\u7f16\u8f91 <code>scripts/defense_validator.py</code> \u4e2d\u7684\u9a8c\u8bc1\u89c4\u5219\uff1a</p> <pre><code>def _validate_custom_defense(self, config_path: Path) -&gt; Dict[str, Any]:\n    \"\"\"\u81ea\u5b9a\u4e49\u9632\u5fa1\u673a\u5236\u9a8c\u8bc1\"\"\"\n    # \u5b9e\u73b0\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u903b\u8f91\n    pass\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_11","title":"\ud83d\udea8 \u6545\u969c\u6392\u9664","text":""},{"location":"testing/CI_GUARDIAN_GUIDE/#_12","title":"\u5e38\u89c1\u95ee\u9898","text":"<ol> <li>\u5de5\u5177\u672a\u5b89\u88c5</li> </ol> <pre><code>pip install ruff mypy bandit pre-commit\n</code></pre> <ol> <li>\u6743\u9650\u95ee\u9898</li> </ol> <pre><code>chmod +x scripts/*.py\n</code></pre> <ol> <li>\u865a\u62df\u73af\u5883\u95ee\u9898</li> </ol> <pre><code>source venv/bin/activate\nwhich python  # \u786e\u8ba4\u4f7f\u7528\u9879\u76ee\u73af\u5883\n</code></pre> <ol> <li>\u4f9d\u8d56\u51b2\u7a81</li> </ol> <pre><code>pip install -r requirements-dev.txt --upgrade\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_13","title":"\u8c03\u8bd5\u6a21\u5f0f","text":"<pre><code># \u542f\u7528\u8be6\u7ec6\u8f93\u51fa\npython scripts/ci_guardian.py -c \"make quality\" --summary\n\n# \u67e5\u770b\u5177\u4f53\u9519\u8bef\ncat logs/ci_issues.json | jq '.[] | select(.severity == \"high\")'\n\n# \u9a8c\u8bc1\u5de5\u5177\u53ef\u7528\u6027\nruff --version\nmypy --version\nbandit --version\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_14","title":"\ud83d\udcc8 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"testing/CI_GUARDIAN_GUIDE/#1_3","title":"1. \u5b9a\u671f\u7ef4\u62a4","text":"<ul> <li>\u6bcf\u5468\u8fd0\u884c: <code>make ci-guardian</code> \u8fdb\u884c\u5168\u9762\u68c0\u67e5</li> <li>\u6bcf\u6b21\u63d0\u4ea4\u524d: <code>make validate-defenses</code> \u786e\u4fdd\u9632\u5fa1\u6709\u6548</li> <li>\u91cd\u5927\u66f4\u6539\u540e: \u91cd\u65b0\u751f\u6210\u548c\u9a8c\u8bc1\u9632\u5fa1\u673a\u5236</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#2_1","title":"2. \u95ee\u9898\u4f18\u5148\u7ea7","text":"<ul> <li>\u9ad8\u4f18\u5148\u7ea7: \u5b89\u5168\u95ee\u9898\u3001\u5bfc\u5165\u9519\u8bef\u3001\u7c7b\u578b\u9519\u8bef</li> <li>\u4e2d\u4f18\u5148\u7ea7: \u6d4b\u8bd5\u5931\u8d25\u3001\u8986\u76d6\u7387\u4e0d\u8db3</li> <li>\u4f4e\u4f18\u5148\u7ea7: \u4ee3\u7801\u98ce\u683c\u95ee\u9898</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#3_2","title":"3. \u56e2\u961f\u534f\u4f5c","text":"<ul> <li>\u5c06\u9632\u5fa1\u673a\u5236\u63d0\u4ea4\u5230\u7248\u672c\u63a7\u5236</li> <li>\u5728CI\u4e2d\u8fd0\u884c\u9632\u5fa1\u9a8c\u8bc1</li> <li>\u5b9a\u671f\u66f4\u65b0\u9632\u5fa1\u7b56\u7565</li> <li>\u56e2\u961f\u6210\u5458\u90fd\u5b89\u88c5pre-commit\u94a9\u5b50</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#4","title":"4. \u6301\u7eed\u6539\u8fdb","text":"<ul> <li>\u5206\u6790\u9632\u5fa1\u6548\u679c\u8bc4\u5206</li> <li>\u6839\u636e\u65b0\u7684CI\u95ee\u9898\u8c03\u6574\u7b56\u7565</li> <li>\u5b9a\u671f\u66f4\u65b0\u5de5\u5177\u7248\u672c</li> <li>\u4f18\u5316\u68c0\u6d4b\u6a21\u5f0f\u548c\u9632\u5fa1\u7b56\u7565</li> </ul>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_15","title":"\ud83c\udfaf \u8fdb\u9636\u7528\u6cd5","text":""},{"location":"testing/CI_GUARDIAN_GUIDE/#1_4","title":"1. \u81ea\u52a8\u5316\u96c6\u6210","text":"<pre><code># \u6dfb\u52a0\u5230crontab\u5b9a\u671f\u68c0\u67e5\n0 2 * * * cd /path/to/project &amp;&amp; make ci-guardian\n\n# \u96c6\u6210\u5230Git hooks\necho \"make validate-defenses\" &gt;&gt; .git/hooks/pre-push\nchmod +x .git/hooks/pre-push\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#2_2","title":"2. \u591a\u9879\u76ee\u7ba1\u7406","text":"<pre><code># \u6279\u91cf\u68c0\u67e5\u591a\u4e2a\u9879\u76ee\nfor project in project1 project2 project3; do\n    cd $project\n    python scripts/ci_guardian.py -c \"make quality\" -s\n    cd ..\ndone\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#3_3","title":"3. \u81ea\u5b9a\u4e49\u62a5\u544a","text":"<pre><code># \u751f\u6210\u56e2\u961f\u62a5\u544a\npython scripts/ci_issue_analyzer.py -s -o team_report.json\npython scripts/defense_validator.py -s -o validation_report.json\n\n# \u5408\u5e76\u62a5\u544a\u6570\u636e\njq -s '.[0] + .[1]' team_report.json validation_report.json &gt; combined_report.json\n</code></pre>"},{"location":"testing/CI_GUARDIAN_GUIDE/#_16","title":"\ud83c\udf89 \u603b\u7ed3","text":"<p>CI Guardian\u7cfb\u7edf\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684CI\u8d28\u91cf\u4fdd\u969c\u89e3\u51b3\u65b9\u6848\uff1a</p> <p>\u2705 \u81ea\u52a8\u76d1\u63a7: \u5b9e\u65f6\u6355\u83b7CI\u95ee\u9898 \u2705 \u667a\u80fd\u5206\u6790: \u7cbe\u786e\u8bc6\u522b\u95ee\u9898\u6839\u56e0 \u2705 \u81ea\u52a8\u9632\u5fa1: \u751f\u6210\u9488\u5bf9\u6027\u9632\u62a4\u63aa\u65bd \u2705 \u65e0\u7f1d\u96c6\u6210: \u81ea\u52a8\u66f4\u65b0\u9879\u76ee\u914d\u7f6e \u2705 \u6548\u679c\u9a8c\u8bc1: \u786e\u4fdd\u9632\u5fa1\u673a\u5236\u6709\u6548</p> <p>\u901a\u8fc7\u4f7f\u7528CI Guardian\uff0c\u60a8\u53ef\u4ee5\uff1a</p> <ul> <li>\u51cf\u5c1190%\u7684\u91cd\u590d\u6027CI\u95ee\u9898</li> <li>\u81ea\u52a8\u5316\u8d28\u91cf\u68c0\u67e5\u6d41\u7a0b</li> <li>\u63d0\u9ad8\u4ee3\u7801\u8d28\u91cf\u548c\u7a33\u5b9a\u6027</li> <li>\u8282\u7701\u5f00\u53d1\u56e2\u961f\u65f6\u95f4</li> </ul> <p>\u5f00\u59cb\u4f7f\u7528\uff1a<code>make ci-guardian</code></p> <p>\ud83d\udd17 \u76f8\u5173\u6587\u6863:</p> <ul> <li>\u9632\u5fa1\u673a\u5236\u8be6\u7ec6\u8bf4\u660e</li> <li>\u9879\u76ee\u5f00\u53d1\u89c4\u8303</li> <li>Cursor\u95ed\u73af\u5f00\u53d1\u63d0\u793a</li> </ul> <p>\ud83d\udc1b \u95ee\u9898\u53cd\u9988: \u5982\u53d1\u73b0\u95ee\u9898\u6216\u6709\u6539\u8fdb\u5efa\u8bae\uff0c\u8bf7\u5728\u9879\u76ee\u4ed3\u5e93\u63d0\u4ea4Issue\u3002</p> <p>\u6b64\u7cfb\u7edf\u7531AI CI Guardian\u81ea\u52a8\u7ef4\u62a4\uff0c\u786e\u4fdd\u60a8\u7684\u9879\u76ee\u59cb\u7ec8\u4fdd\u6301\u6700\u9ad8\u8d28\u91cf\u6807\u51c6\u3002</p>"},{"location":"testing/QA_TEST_KANBAN/","title":"\ud83d\udccb \u8db3\u7403\u9884\u6d4b\u9879\u76ee\u6d4b\u8bd5\u8d28\u91cf\u770b\u677f","text":""},{"location":"testing/QA_TEST_KANBAN/#_2","title":"\ud83d\udcca \u9879\u76ee\u6982\u51b5","text":"<ul> <li>\u9879\u76ee\u540d\u79f0: \u8db3\u7403\u9884\u6d4b\u7cfb\u7edf</li> <li>\u6d4b\u8bd5\u8d28\u91cf\u8d1f\u8d23\u4eba: Claude AI</li> <li>\u5f00\u59cb\u65e5\u671f: 2025-09-25</li> <li>\u76ee\u6807\u8986\u76d6\u7387: 80%+</li> <li>\u5b8c\u6210\u65e5\u671f: 2025-01-04 \u2705</li> <li>\u6700\u7ec8\u8986\u76d6\u7387: 40%\uff08Phase 3 \u57fa\u7ebf\uff09\u2192 80%\uff08\u76ee\u6807\uff09</li> </ul>"},{"location":"testing/QA_TEST_KANBAN/#_3","title":"\ud83c\udf89 \u9879\u76ee\u72b6\u6001\uff1a\u5df2\u5b8c\u6210","text":""},{"location":"testing/QA_TEST_KANBAN/#_4","title":"\u2705 \u91cd\u5927\u91cc\u7a0b\u7891","text":"<ol> <li>\u6d4b\u8bd5\u91cd\u6784\u5b8c\u6210\uff082025-01-04\uff09</li> <li>Phase 1-3 \u5168\u90e8\u5b8c\u6210</li> <li>\u5efa\u7acb\u4e09\u5c42\u6d4b\u8bd5\u67b6\u6784</li> <li>Mock \u4f53\u7cfb\u5b8c\u5584</li> <li> <p>CI/CD \u96c6\u6210\u5b8c\u6210</p> </li> <li> <p>\u8d28\u91cf\u5ba1\u8ba1\u901a\u8fc7\uff082025-01-04\uff09</p> </li> <li>12/12 \u4efb\u52a1 100% \u5b8c\u6210</li> <li>\u8d28\u91cf\u8bc4\u5206\uff1a\u2b50\u2b50\u2b50\u2b50\u2b50</li> <li>\u4f01\u4e1a\u7ea7\u6807\u51c6\u8fbe\u6210</li> </ol>"},{"location":"testing/QA_TEST_KANBAN/#_5","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":""},{"location":"testing/QA_TEST_KANBAN/#_6","title":"\u65b0\u7684\u6587\u6863\u4f53\u7cfb","text":"<ul> <li>\ud83c\udf1f TEST_GUIDE.md - \u4e3b\u8981\u6d4b\u8bd5\u6307\u5357</li> <li>README.md - \u5feb\u901f\u5165\u95e8</li> <li>fixtures_factories.md - \u6d4b\u8bd5\u5de5\u5177\uff08\u5df2\u66f4\u65b0\uff09</li> <li>examples.md - \u6d4b\u8bd5\u793a\u4f8b</li> <li>ci_config.md - CI \u914d\u7f6e</li> </ul>"},{"location":"testing/QA_TEST_KANBAN/#_7","title":"\u5386\u53f2\u8bb0\u5f55","text":"<ul> <li>\u5f52\u6863\u4f4d\u7f6e\uff1a<code>[archive/](./archive/)</code></li> <li>\u5305\u542b\u65e7\u7684\u8fdb\u5ea6\u62a5\u544a\u548c\u8ba1\u5212</li> </ul>"},{"location":"testing/QA_TEST_KANBAN/#_8","title":"\u91cd\u6784\u62a5\u544a","text":"<ul> <li>TEST_REFACTOR_PROGRESS_REPORT.md</li> <li>TEST_REFACTOR_QUALITY_AUDIT.md</li> <li>COVERAGE_IMPROVEMENT_ROADMAP.md</li> </ul>"},{"location":"testing/QA_TEST_KANBAN/#_9","title":"\ud83d\ude80 \u4e0b\u4e00\u6b65\u8ba1\u5212","text":""},{"location":"testing/QA_TEST_KANBAN/#phase-4","title":"Phase 4: \u8986\u76d6\u7387\u63d0\u5347","text":"<ul> <li>\u5f53\u524d\uff1a40%</li> <li>\u76ee\u6807\uff1a80%</li> <li>\u8ba1\u5212\uff1aCOVERAGE_IMPROVEMENT_ROADMAP.md</li> </ul>"},{"location":"testing/QA_TEST_KANBAN/#_10","title":"\u5177\u4f53\u884c\u52a8","text":"<ol> <li>4A: \u8fbe\u5230 50%\uff082\u5468\uff09</li> <li>4B: \u8fbe\u5230 60%\uff083\u5468\uff09</li> <li>4C: \u8fbe\u5230 70%\uff083\u5468\uff09</li> <li>4D: \u8fbe\u5230 80%\uff084\u5468\uff09</li> </ol>"},{"location":"testing/QA_TEST_KANBAN/#_11","title":"\ud83d\udca1 \u7ecf\u9a8c\u603b\u7ed3","text":""},{"location":"testing/QA_TEST_KANBAN/#_12","title":"\u6210\u529f\u56e0\u7d20","text":"<ol> <li>\u7edf\u4e00\u7684 Mock \u67b6\u6784 - \u63d0\u5347\u6d4b\u8bd5\u901f\u5ea6</li> <li>\u81ea\u52a8\u5316\u5de5\u5177 - \u51cf\u5c11\u624b\u52a8\u5de5\u4f5c</li> <li>\u6e05\u6670\u7684\u6587\u6863 - \u4fbf\u4e8e\u56e2\u961f\u534f\u4f5c</li> <li>CI/CD \u96c6\u6210 - \u786e\u4fdd\u8d28\u91cf</li> </ol>"},{"location":"testing/QA_TEST_KANBAN/#_13","title":"\u5173\u952e\u6210\u679c","text":"<ul> <li>\u6d4b\u8bd5\u901f\u5ea6\uff1a\u4ece\u5206\u949f\u7ea7\u964d\u5230\u79d2\u7ea7</li> <li>CI \u65f6\u95f4\uff1a\u51cf\u5c11 50%</li> <li>\u7ef4\u62a4\u8d1f\u62c5\uff1a\u5927\u5e45\u964d\u4f4e</li> <li>\u5f00\u53d1\u4f53\u9a8c\uff1a\u663e\u8457\u63d0\u5347</li> </ul> <p>\u770b\u677f\u5df2\u5b8c\u6210 \u2728 - \u611f\u8c22\u6240\u6709\u53c2\u4e0e\u8005\u7684\u52aa\u529b\uff01</p>"},{"location":"testing/TESTING_COMMANDS/","title":"\u6d4b\u8bd5\u547d\u4ee4\u53c2\u8003","text":""},{"location":"testing/TESTING_COMMANDS/#_2","title":"\ud83c\udfaf \u5feb\u901f\u5f00\u59cb","text":"<pre><code># \u5b89\u88c5\u4f9d\u8d56\nmake install\n\n# \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\nmake test\n\n# \u67e5\u770b\u6d4b\u8bd5\u8986\u76d6\u7387\nmake coverage\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#_3","title":"\ud83d\udccb \u5e38\u7528\u6d4b\u8bd5\u547d\u4ee4","text":""},{"location":"testing/TESTING_COMMANDS/#_4","title":"\u57fa\u7840\u6d4b\u8bd5","text":"\u547d\u4ee4 \u8bf4\u660e \u9002\u7528\u573a\u666f <code>make test</code> \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5 \u65e5\u5e38\u5f00\u53d1 <code>make test-quick</code> \u5feb\u901f\u5355\u5143\u6d4b\u8bd5 \u9891\u7e41\u4ee3\u7801\u53d8\u66f4 <code>make test-phase1</code> Phase 1 \u6838\u5fc3\u6d4b\u8bd5 \u9a8c\u8bc1\u6838\u5fc3\u529f\u80fd <code>make test-api</code> \u6240\u6709 API \u6d4b\u8bd5 API \u5f00\u53d1"},{"location":"testing/TESTING_COMMANDS/#_5","title":"\u8986\u76d6\u7387\u6d4b\u8bd5","text":"\u547d\u4ee4 \u8bf4\u660e \u9608\u503c <code>make coverage</code> \u5b8c\u6574\u8986\u76d6\u7387\u6d4b\u8bd5 80% <code>make coverage-fast</code> \u5feb\u901f\u8986\u76d6\u7387\uff08\u6392\u9664\u6162\u6d4b\u8bd5\uff09 80% <code>make coverage-unit</code> \u5355\u5143\u6d4b\u8bd5\u8986\u76d6\u7387 -"},{"location":"testing/TESTING_COMMANDS/#_6","title":"\u6309\u7c7b\u578b\u8fd0\u884c","text":"<pre><code># \u5355\u5143\u6d4b\u8bd5\npytest -m \"unit\"\n\n# \u96c6\u6210\u6d4b\u8bd5\npytest -m \"integration\"\n\n# API \u6d4b\u8bd5\npytest -m \"api\"\n\n# \u6570\u636e\u5e93\u6d4b\u8bd5\npytest -m \"database\"\n\n# \u6392\u9664\u6162\u6d4b\u8bd5\npytest -m \"not slow\"\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#_7","title":"\ud83d\udd0d \u67e5\u770b\u6d4b\u8bd5\u7ed3\u679c","text":""},{"location":"testing/TESTING_COMMANDS/#html","title":"HTML \u8986\u76d6\u7387\u62a5\u544a","text":"<pre><code># \u751f\u6210\u62a5\u544a\nmake coverage\n\n# \u67e5\u770b\u62a5\u544a\nopen htmlcov/index.html  # macOS\nxdg-open htmlcov/index.html  # Linux\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#_8","title":"\u7ec8\u7aef\u8f93\u51fa\u793a\u4f8b","text":"<pre><code>src/api/data.py                                   181     15     42      6    90%\nsrc/api/features.py                               154     20     34      3    88%\nsrc/api/predictions.py                            141     19     22      0    88%\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#_9","title":"\u26a0\ufe0f \u5e38\u89c1\u9519\u8bef","text":""},{"location":"testing/TESTING_COMMANDS/#1","title":"1. \u5355\u72ec\u6587\u4ef6\u6d4b\u8bd5\u5bfc\u81f4\u8986\u76d6\u7387\u4e0d\u5b8c\u6574","text":"<pre><code># \u274c \u9519\u8bef\npytest tests/unit/api/test_health.py --cov=src\n\n# \u2705 \u6b63\u786e\npytest tests/unit/api/ --cov=src\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#2","title":"2. \u5ffd\u7565\u6d4b\u8bd5\u6807\u8bb0","text":"<pre><code># \u274c \u9519\u8bef\uff08\u53ef\u80fd\u5305\u542b\u4e0d\u9700\u8981\u7684\u6d4b\u8bd5\uff09\npytest tests/\n\n# \u2705 \u6b63\u786e\npytest -m \"unit\"\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#3","title":"3. \u6ca1\u6709\u4f7f\u7528\u9879\u76ee\u914d\u7f6e","text":"<pre><code># \u274c \u9519\u8bef\uff08\u7ed5\u8fc7 pytest.ini\uff09\npytest --override-ini=\"addopts=\" tests/\n\n# \u2705 \u6b63\u786e\uff08\u4f7f\u7528\u9879\u76ee\u914d\u7f6e\uff09\npytest tests/\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#phase","title":"\ud83d\udcca Phase \u6d4b\u8bd5\u6307\u5357","text":""},{"location":"testing/TESTING_COMMANDS/#phase-1-30","title":"Phase 1 - \u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\uff08\u76ee\u6807 30%\uff09","text":"<pre><code>make test-phase1\n# \u6216\npytest tests/unit/api/test_data.py tests/unit/api/test_features.py tests/unit/api/test_predictions.py\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#phase-2-50","title":"Phase 2 - \u670d\u52a1\u5c42\uff08\u76ee\u6807 50%\uff09","text":"<pre><code>pytest tests/unit/services/ -v\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#phase-3-65","title":"Phase 3 - \u6570\u636e\u5c42\uff08\u76ee\u6807 65%\uff09","text":"<pre><code>pytest tests/unit/database/ tests/unit/data/ -v\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#phase-4-80","title":"Phase 4 - \u96c6\u6210\u6d4b\u8bd5\uff08\u76ee\u6807 80%\uff09","text":"<pre><code>pytest tests/integration/ -v\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#cicd","title":"\ud83d\ude80 CI/CD \u96c6\u6210","text":""},{"location":"testing/TESTING_COMMANDS/#github-actions","title":"GitHub Actions","text":"<p>\u9879\u76ee\u5df2\u914d\u7f6e\u81ea\u52a8\u8fd0\u884c\uff1a - <code>make test</code> - \u6bcf\u6b21\u63a8\u9001 - <code>make coverage</code> - Pull Request</p>"},{"location":"testing/TESTING_COMMANDS/#_10","title":"\u672c\u5730\u9884\u63d0\u4ea4\u68c0\u67e5","text":"<pre><code>make prepush\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#_11","title":"\ud83d\udee0\ufe0f \u8c03\u8bd5\u6d4b\u8bd5","text":""},{"location":"testing/TESTING_COMMANDS/#_12","title":"\u8fd0\u884c\u5931\u8d25\u7684\u6d4b\u8bd5","text":"<pre><code>pytest --lf  # \u53ea\u8fd0\u884c\u4e0a\u6b21\u5931\u8d25\u7684\u6d4b\u8bd5\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#_13","title":"\u663e\u793a\u8be6\u7ec6\u8f93\u51fa","text":"<pre><code>pytest -v -s tests/unit/api/test_health.py::test_health_check_success\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#_14","title":"\u8c03\u8bd5\u6a21\u5f0f","text":"<pre><code>pytest --pdb tests/unit/api/test_health.py\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#_15","title":"\u5e76\u884c\u8fd0\u884c","text":"<pre><code>pytest -n auto  # \u9700\u8981\u5b89\u88c5 pytest-xdist\n</code></pre>"},{"location":"testing/TESTING_COMMANDS/#_16","title":"\ud83d\udcdd \u6d4b\u8bd5\u6807\u8bb0\u8bf4\u660e","text":"\u6807\u8bb0 \u8bf4\u660e \u7528\u9014 <code>unit</code> \u5355\u5143\u6d4b\u8bd5 \u5feb\u901f\uff0c\u9694\u79bb\u6d4b\u8bd5 <code>integration</code> \u96c6\u6210\u6d4b\u8bd5 \u6a21\u5757\u95f4\u4ea4\u4e92 <code>e2e</code> \u7aef\u5230\u7aef\u6d4b\u8bd5 \u5b8c\u6574\u6d41\u7a0b <code>api</code> API \u6d4b\u8bd5 HTTP \u63a5\u53e3 <code>database</code> \u6570\u636e\u5e93\u6d4b\u8bd5 \u6570\u636e\u6301\u4e45\u5316 <code>slow</code> \u6162\u901f\u6d4b\u8bd5 \u8017\u65f6\u64cd\u4f5c <code>legacy</code> \u9057\u7559\u6d4b\u8bd5 \u65e7\u4ee3\u7801"},{"location":"testing/TESTING_COMMANDS/#_17","title":"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5","text":"<ol> <li> <p>\u5f00\u53d1\u9636\u6bb5 <pre><code>make test-quick  # \u5feb\u901f\u53cd\u9988\n</code></pre></p> </li> <li> <p>\u63d0\u4ea4\u524d <pre><code>make prepush  # \u5b8c\u6574\u68c0\u67e5\n</code></pre></p> </li> <li> <p>PR \u524d <pre><code>make coverage  # \u786e\u4fdd\u8986\u76d6\u7387\u8fbe\u6807\n</code></pre></p> </li> <li> <p>\u4fee\u590d Bug \u540e <pre><code>pytest --lf -x  # \u53ea\u8fd0\u884c\u76f8\u5173\u6d4b\u8bd5\n</code></pre></p> </li> </ol>"},{"location":"testing/TESTING_STANDARDS/","title":"\u6d4b\u8bd5\u6807\u51c6\u6587\u6863","text":"<p>\u672c\u6587\u6863\u5b9a\u4e49\u4e86\u9879\u76ee\u7684\u6d4b\u8bd5\u6807\u51c6\u548c\u6700\u4f73\u5b9e\u8df5\uff0c\u786e\u4fdd\u4ee3\u7801\u8d28\u91cf\u548c\u6d4b\u8bd5\u8986\u76d6\u7387\u7b26\u5408\u5927\u5382\u6807\u51c6\u3002</p>"},{"location":"testing/TESTING_STANDARDS/#_2","title":"\u76ee\u5f55","text":"<ol> <li>\u6d4b\u8bd5\u539f\u5219</li> <li>\u6d4b\u8bd5\u5206\u7c7b</li> <li>\u6d4b\u8bd5\u547d\u540d\u89c4\u8303</li> <li>\u6d4b\u8bd5\u7ed3\u6784\u89c4\u8303</li> <li>Mock\u4f7f\u7528\u89c4\u8303</li> <li>\u8986\u76d6\u7387\u8981\u6c42</li> <li>\u6d4b\u8bd5\u8d28\u91cf\u95e8\u7981</li> <li>\u5e38\u89c1\u53cd\u6a21\u5f0f</li> </ol>"},{"location":"testing/TESTING_STANDARDS/#_3","title":"\u6d4b\u8bd5\u539f\u5219","text":""},{"location":"testing/TESTING_STANDARDS/#1-first","title":"1. FIRST\u539f\u5219","text":"<ul> <li>Fast\uff08\u5feb\u901f\uff09\uff1a\u6d4b\u8bd5\u5e94\u8be5\u5feb\u901f\u8fd0\u884c</li> <li>Independent\uff08\u72ec\u7acb\uff09\uff1a\u6d4b\u8bd5\u4e4b\u95f4\u4e0d\u5e94\u76f8\u4e92\u4f9d\u8d56</li> <li>Repeatable\uff08\u53ef\u91cd\u590d\uff09\uff1a\u6d4b\u8bd5\u7ed3\u679c\u5e94\u8be5\u4e00\u81f4</li> <li>Self-Validating\uff08\u81ea\u6211\u9a8c\u8bc1\uff09\uff1a\u6d4b\u8bd5\u5e94\u8be5\u6709\u660e\u786e\u7684\u901a\u8fc7/\u5931\u8d25\u7ed3\u679c</li> <li>Timely\uff08\u53ca\u65f6\uff09\uff1a\u6d4b\u8bd5\u5e94\u8be5\u53ca\u65f6\u7f16\u5199</li> </ul>"},{"location":"testing/TESTING_STANDARDS/#2","title":"2. \u6d4b\u8bd5\u91d1\u5b57\u5854","text":"<pre><code>    E2E Tests (5%)\n      \u2193\nIntegration Tests (15%)\n      \u2193\nUnit Tests (80%)\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#3","title":"3. \u6d4b\u8bd5\u9694\u79bb\u539f\u5219","text":"<ul> <li>\u6bcf\u4e2a\u6d4b\u8bd5\u90fd\u5e94\u8be5\u72ec\u7acb\u8fd0\u884c</li> <li>\u4e0d\u4f9d\u8d56\u6d4b\u8bd5\u7684\u6267\u884c\u987a\u5e8f</li> <li>\u4e0d\u4f9d\u8d56\u5916\u90e8\u7cfb\u7edf\u72b6\u6001</li> </ul>"},{"location":"testing/TESTING_STANDARDS/#_4","title":"\u6d4b\u8bd5\u5206\u7c7b","text":""},{"location":"testing/TESTING_STANDARDS/#1-unit-tests","title":"1. \u5355\u5143\u6d4b\u8bd5\uff08Unit Tests\uff09","text":"<ul> <li>\u76ee\u6807\uff1a\u9a8c\u8bc1\u5355\u4e2a\u51fd\u6570\u6216\u7c7b\u7684\u884c\u4e3a</li> <li>\u7279\u70b9\uff1a\u5feb\u901f\u3001\u72ec\u7acb\u3001\u65e0\u526f\u4f5c\u7528</li> <li>\u8986\u76d6\u7387\u8981\u6c42\uff1a\u4e1a\u52a1\u903b\u8f91 &gt;= 90%\uff0c\u5de5\u5177\u7c7b &gt;= 95%</li> </ul>"},{"location":"testing/TESTING_STANDARDS/#2-integration-tests","title":"2. \u96c6\u6210\u6d4b\u8bd5\uff08Integration Tests\uff09","text":"<ul> <li>\u76ee\u6807\uff1a\u9a8c\u8bc1\u591a\u4e2a\u7ec4\u4ef6\u7684\u534f\u4f5c</li> <li>\u7279\u70b9\uff1a\u6d4b\u8bd5\u7ec4\u4ef6\u95f4\u7684\u4ea4\u4e92</li> <li>\u6807\u8bb0\uff1a<code>@pytest.mark.integration</code></li> </ul>"},{"location":"testing/TESTING_STANDARDS/#3-e2e-tests","title":"3. \u7aef\u5230\u7aef\u6d4b\u8bd5\uff08E2E Tests\uff09","text":"<ul> <li>\u76ee\u6807\uff1a\u9a8c\u8bc1\u5b8c\u6574\u7684\u4e1a\u52a1\u6d41\u7a0b</li> <li>\u7279\u70b9\uff1a\u6700\u63a5\u8fd1\u771f\u5b9e\u7528\u6237\u573a\u666f</li> <li>\u6807\u8bb0\uff1a<code>@pytest.mark.e2e</code></li> </ul>"},{"location":"testing/TESTING_STANDARDS/#_5","title":"\u6d4b\u8bd5\u547d\u540d\u89c4\u8303","text":""},{"location":"testing/TESTING_STANDARDS/#1","title":"1. \u6587\u4ef6\u547d\u540d","text":"<ul> <li>\u6d4b\u8bd5\u6587\u4ef6\uff1a<code>test_&lt;module_name&gt;.py</code></li> <li>\u6d4b\u8bd5\u7c7b\uff1a<code>Test&lt;ClassName&gt;</code></li> <li>\u6d4b\u8bd5\u65b9\u6cd5\uff1a<code>test_&lt;scenario&gt;_&lt;expected_result&gt;</code></li> </ul>"},{"location":"testing/TESTING_STANDARDS/#2_1","title":"2. \u547d\u540d\u793a\u4f8b","text":"<pre><code># \u2705 \u597d\u7684\u547d\u540d\ndef test_user_login_with_valid_credentials_returns_token()\ndef test_invalid_email_format_raises_validation_error()\ndef test_empty_cart_total_is_zero()\n\n# \u274c \u907f\u514d\u7684\u547d\u540d\ndef test_user_1()\ndef test_function()\ndef test_case()\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#_6","title":"\u6d4b\u8bd5\u7ed3\u6784\u89c4\u8303","text":""},{"location":"testing/TESTING_STANDARDS/#1_1","title":"1. \u6d4b\u8bd5\u6587\u4ef6\u6a21\u677f","text":"<pre><code>\"\"\"\n\u6a21\u5757\u6d4b\u8bd5\u63cf\u8ff0\nModule Test Description\n\"\"\"\n\nimport pytest\nfrom datetime import datetime\nfrom unittest.mock import Mock, AsyncMock, patch\n\nfrom src.module import ClassUnderTest\n\n\nclass TestClassUnderTest:\n    \"\"\"\u7c7b\u6d4b\u8bd5\u63cf\u8ff0\"\"\"\n\n    @pytest.fixture\n    def setup_data(self):\n        \"\"\"\u63d0\u4f9b\u6d4b\u8bd5\u6570\u636e\"\"\"\n        return {\n            \"valid_input\": {\"key\": \"value\"},\n            \"invalid_input\": None\n        }\n\n    @pytest.fixture\n    def mock_dependency(self):\n        \"\"\"\u63d0\u4f9bMock\u4f9d\u8d56\"\"\"\n        mock = Mock(spec=DependencyClass)\n        mock.method.return_value = \"mocked_value\"\n        return mock\n\n    def test_method_success_scenario(self, setup_data, mock_dependency):\n        \"\"\"\u6d4b\u8bd5\uff1a\u6210\u529f\u573a\u666f\u63cf\u8ff0\"\"\"\n        # Given - \u51c6\u5907\u6d4b\u8bd5\u6761\u4ef6\n        sut = ClassUnderTest(mock_dependency)\n\n        # When - \u6267\u884c\u64cd\u4f5c\n        result = sut.method(setup_data[\"valid_input\"])\n\n        # Then - \u9a8c\u8bc1\u7ed3\u679c\n        assert result[\"status\"] == \"success\"\n        mock_dependency.method.assert_called_once()\n\n    def test_method_error_scenario(self, setup_data, mock_dependency):\n        \"\"\"\u6d4b\u8bd5\uff1a\u9519\u8bef\u573a\u666f\u63cf\u8ff0\"\"\"\n        # Given\n        sut = ClassUnderTest(mock_dependency)\n        mock_dependency.method.side_effect = ValueError(\"Test error\")\n\n        # When / Then\n        with pytest.raises(ValueError, match=\"Test error\"):\n            sut.method(setup_data[\"valid_input\"])\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#2_2","title":"2. \u5f02\u6b65\u6d4b\u8bd5\u6a21\u677f","text":"<pre><code>@pytest.mark.asyncio\nasync def test_async_method_success(self):\n    \"\"\"\u6d4b\u8bd5\uff1a\u5f02\u6b65\u65b9\u6cd5\u6210\u529f\u573a\u666f\"\"\"\n    # Given\n    async_service = AsyncService()\n\n    # When\n    result = await async_service.process_data()\n\n    # Then\n    assert result is not None\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#mock","title":"Mock\u4f7f\u7528\u89c4\u8303","text":""},{"location":"testing/TESTING_STANDARDS/#1-mock","title":"1. \u4f55\u65f6\u4f7f\u7528Mock","text":"<ul> <li>\u6d4b\u8bd5\u5916\u90e8\u4f9d\u8d56\uff08\u6570\u636e\u5e93\u3001API\u3001\u6587\u4ef6\u7cfb\u7edf\uff09</li> <li>\u6a21\u62df\u9519\u8bef\u573a\u666f</li> <li>\u52a0\u901f\u6d4b\u8bd5\u6267\u884c</li> <li>\u9694\u79bb\u88ab\u6d4b\u8bd5\u5355\u5143</li> </ul>"},{"location":"testing/TESTING_STANDARDS/#2-mock","title":"2. \u4f55\u65f6\u907f\u514d\u4f7f\u7528Mock","text":"<ul> <li>\u6d4b\u8bd5\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91</li> <li>\u6d4b\u8bd5\u6570\u636e\u8f6c\u6362\u903b\u8f91</li> <li>\u6d4b\u8bd5\u7b80\u5355\u5de5\u5177\u51fd\u6570</li> <li>Mock\u6bd4\u5b9e\u9645\u5b9e\u73b0\u66f4\u590d\u6742\u65f6</li> </ul>"},{"location":"testing/TESTING_STANDARDS/#3-mock","title":"3. Mock\u6700\u4f73\u5b9e\u8df5","text":"<pre><code># \u2705 \u597d\u7684Mock\u4f7f\u7528\ndef test_service_with_external_api(self):\n    \"\"\"\u6d4b\u8bd5\u670d\u52a1\u8c03\u7528\u5916\u90e8API\"\"\"\n    with patch('src.module.requests.get') as mock_get:\n        mock_get.return_value.json.return_value = {\"data\": \"value\"}\n\n        service = MyService()\n        result = service.fetch_data()\n\n        assert result[\"data\"] == \"value\"\n        mock_get.assert_called_once_with(\"https://api.example.com/data\")\n\n# \u2705 \u4f7f\u7528\u5de5\u5382\u65b9\u6cd5\u521b\u5efaMock\n@pytest.fixture\ndef mock_database():\n    \"\"\"Mock\u6570\u636e\u5e93\u8fde\u63a5\"\"\"\n    mock = Mock()\n    mock.query.return_value = [{\"id\": 1, \"name\": \"test\"}]\n    return mock\n\n# \u274c \u907f\u514d\u8fc7\u5ea6Mock\ndef test_simple_math():\n    \"\"\"\u7b80\u5355\u6570\u5b66\u8fd0\u7b97\u4e0d\u9700\u8981Mock\"\"\"\n    result = add(2, 3)\n    assert result == 5\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#_7","title":"\u8986\u76d6\u7387\u8981\u6c42","text":""},{"location":"testing/TESTING_STANDARDS/#1_2","title":"1. \u603b\u4f53\u8986\u76d6\u7387","text":"<ul> <li>\u6700\u4f4e\u8981\u6c42\uff1a80%</li> <li>\u76ee\u6807\uff1a90%</li> <li>\u4f18\u79c0\uff1a95%+</li> </ul>"},{"location":"testing/TESTING_STANDARDS/#2_3","title":"2. \u5206\u7c7b\u8986\u76d6\u7387","text":"\u6a21\u5757\u7c7b\u578b \u6700\u4f4e\u8981\u6c42 \u76ee\u6807 \u4e1a\u52a1\u903b\u8f91 90% 95% \u5de5\u5177\u7c7b 95% 100% \u6570\u636e\u6a21\u578b 85% 90% API\u5c42 85% 90% \u6570\u636e\u8bbf\u95ee\u5c42 80% 85%"},{"location":"testing/TESTING_STANDARDS/#3_1","title":"3. \u8986\u76d6\u7387\u68c0\u67e5","text":"<pre><code># \u672c\u5730\u5f00\u53d1\nmake coverage-local    # 80% \u95e8\u69db\nmake coverage-fast     # \u4ec5\u5355\u5143\u6d4b\u8bd5\n\n# CI/CD\nmake coverage          # 90% \u95e8\u69db\nmake coverage-ci        # \u5b8c\u6574\u6d4b\u8bd5\u96c6\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#_8","title":"\u6d4b\u8bd5\u8d28\u91cf\u95e8\u7981","text":""},{"location":"testing/TESTING_STANDARDS/#1_3","title":"1. \u4ee3\u7801\u8d28\u91cf","text":"<ul> <li>\u6240\u6709\u6d4b\u8bd5\u5fc5\u987b\u901a\u8fc7</li> <li>\u65e0\u8b66\u544a\u4fe1\u606f</li> <li>\u7b26\u5408\u4ee3\u7801\u89c4\u8303\uff08ruff\u3001mypy\uff09</li> </ul>"},{"location":"testing/TESTING_STANDARDS/#2_4","title":"2. \u6d4b\u8bd5\u8d28\u91cf","text":"<ul> <li>\u6d4b\u8bd5\u63cf\u8ff0\u6e05\u6670</li> <li>\u65ad\u8a00\u5177\u4f53\u660e\u786e</li> <li>\u65e0\u6d4b\u8bd5\u91cd\u590d</li> <li>\u8fb9\u754c\u6761\u4ef6\u6d4b\u8bd5</li> </ul>"},{"location":"testing/TESTING_STANDARDS/#3-ci","title":"3. CI\u68c0\u67e5","text":"<pre><code># .github/workflows/test.yml\n- name: Run Tests\n  run: |\n    make prepush  # \u5305\u542b\uff1alint + typecheck + test\n    make coverage  # \u8986\u76d6\u7387\u68c0\u67e5\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#_9","title":"\u5e38\u89c1\u53cd\u6a21\u5f0f","text":""},{"location":"testing/TESTING_STANDARDS/#1_4","title":"1. \u6d4b\u8bd5\u53cd\u6a21\u5f0f","text":"<pre><code># \u274c \u6d4b\u8bd5\u5b9e\u73b0\u7ec6\u8282\ndef test_method_uses_list_comprehension():\n    # \u6d4b\u8bd5\u4e0d\u5e94\u8be5\u5173\u5fc3\u5185\u90e8\u5b9e\u73b0\n    sut = Processor()\n    result = sut.process()\n    assert result == [x for x in items if x &gt; 0]\n\n# \u2705 \u6d4b\u8bd5\u884c\u4e3a\u5951\u7ea6\ndef test_process_filters_invalid_items():\n    # \u6d4b\u8bd5\u5e94\u8be5\u9a8c\u8bc1\u884c\u4e3a\n    sut = Processor()\n    result = sut.process(items=[-1, 0, 1, 2])\n    assert result == [1, 2]\n\n# \u274c \u6d4b\u8bd5\u79c1\u6709\u65b9\u6cd5\ndef test_private_method():\n    # \u79c1\u6709\u65b9\u6cd5\u4e0d\u5e94\u8be5\u76f4\u63a5\u6d4b\u8bd5\n    sut = MyClass()\n    result = sut._private_method()\n\n# \u2705 \u901a\u8fc7\u516c\u5171\u63a5\u53e3\u6d4b\u8bd5\u79c1\u6709\u903b\u8f91\ndef test_public_behavior_uses_private_logic():\n    sut = MyClass()\n    result = sut.public_method()\n    assert result.is_valid\n\n# \u274c \u8106\u5f31\u7684\u65ad\u8a00\ndef test_something():\n    result = process()\n    assert result is not None\n\n# \u2705 \u5177\u4f53\u7684\u65ad\u8a00\ndef test_something_returns_expected_structure():\n    result = process()\n    assert isinstance(result, dict)\n    assert \"status\" in result\n    assert result[\"status\"] in [\"success\", \"error\"]\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#2_5","title":"2. \u6d4b\u8bd5\u6570\u636e\u53cd\u6a21\u5f0f","text":"<pre><code># \u274c \u786c\u7f16\u7801\u6d4b\u8bd5\u6570\u636e\ndef test_with_hardcoded_data():\n    user = User(name=\"John\", age=30, email=\"john@example.com\")\n    assert user.is_adult()\n\n# \u2705 \u4f7f\u7528\u5de5\u5382\u6216Fixture\n@pytest.fixture\ndef sample_user():\n    return User(name=\"John\", age=30, email=\"john@example.com\")\n\ndef test_user_is_adult(sample_user):\n    assert sample_user.is_adult()\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#3_2","title":"3. \u5f02\u6b65\u6d4b\u8bd5\u53cd\u6a21\u5f0f","text":"<pre><code># \u274c \u5728\u540c\u6b65\u6d4b\u8bd5\u4e2d\u4f7f\u7528asyncio.run\ndef test_async_wrong():\n    result = asyncio.run(async_function())\n    assert result\n\n# \u2705 \u4f7f\u7528\u5f02\u6b65\u6d4b\u8bd5\u88c5\u9970\u5668\n@pytest.mark.asyncio\nasync def test_async_correct():\n    result = await async_function()\n    assert result\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#_10","title":"\u6d4b\u8bd5\u5de5\u5177\u914d\u7f6e","text":""},{"location":"testing/TESTING_STANDARDS/#1-pytestini","title":"1. pytest.ini","text":"<pre><code>[tool:pytest]\ntestpaths = tests\npython_files = test_*.py\npython_classes = Test*\npython_functions = test_*\naddopts =\n    --strict-markers\n    --disable-warnings\n    -ra\n    --tb=short\nmarkers =\n    unit: Unit tests\n    integration: Integration tests\n    e2e: End-to-end tests\n    slow: Slow tests\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#2-pyprojecttoml","title":"2. pyproject.toml","text":"<pre><code>[tool.coverage.run]\nsource = [\"src\"]\nomit = [\n    \"*/tests/*\",\n    \"*/migrations/*\",\n    \"*/__pycache__/*\",\n    \"*/conftest.py\"\n]\nbranch = true\nfail_under = 80\n\n[tool.coverage.report]\nexclude_lines = [\n    \"pragma: no cover\",\n    \"def __repr__\",\n    \"if self.debug:\",\n    \"if settings.DEBUG\",\n    \"raise AssertionError\",\n    \"raise NotImplementedError\",\n    \"if 0:\",\n    \"if __name__ == .__main__.:\"\n]\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#_11","title":"\u6d4b\u8bd5\u6570\u636e\u7ba1\u7406","text":""},{"location":"testing/TESTING_STANDARDS/#1_5","title":"1. \u6d4b\u8bd5\u6570\u636e\u5206\u5c42","text":"<pre><code>tests/\n\u251c\u2500\u2500 fixtures/          # \u6d4b\u8bd5\u5939\u5177\n\u2502   \u251c\u2500\u2500 user.json     # \u7528\u6237\u6570\u636e\n\u2502   \u2514\u2500\u2500 match.json    # \u6bd4\u8d5b\u6570\u636e\n\u251c\u2500\u2500 factories/         # \u6570\u636e\u5de5\u5382\n\u2502   \u251c\u2500\u2500 user_factory.py\n\u2502   \u2514\u2500\u2500 match_factory.py\n\u2514\u2500\u2500 conftest.py        # \u5171\u4eab\u914d\u7f6e\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#2_6","title":"2. \u5de5\u5382\u6a21\u5f0f\u793a\u4f8b","text":"<pre><code># tests/factories/user_factory.py\nimport factory\nfrom src.domain.models import User\n\nclass UserFactory(factory.Factory):\n    class Meta:\n        model = User\n\n    id = factory.Sequence(lambda n: n)\n    name = factory.Faker(\"name\")\n    email = factory.LazyAttribute(lambda o: f\"{o.name.lower()}@example.com\")\n    age = factory.Faker(\"random_int\", min=18, max=80)\n\nclass AdminUserFactory(UserFactory):\n    role = \"admin\"\n    permissions = [\"read\", \"write\", \"delete\"]\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#_12","title":"\u6027\u80fd\u6d4b\u8bd5","text":""},{"location":"testing/TESTING_STANDARDS/#1_6","title":"1. \u57fa\u51c6\u6d4b\u8bd5","text":"<pre><code>def test_performance_critical_path(benchmark):\n    \"\"\"\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\"\"\"\n    data = list(range(1000))\n\n    def process_data():\n        return [x * 2 for x in data if x &gt; 500]\n\n    result = benchmark(process_data)\n    assert result == [x * 2 for x in data if x &gt; 500]\n    # \u6027\u80fd\u65ad\u8a00\n    assert benchmark.stats[\"mean\"] &lt; 0.01  # 10ms\u5185\u5b8c\u6210\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#2_7","title":"2. \u5185\u5b58\u6d4b\u8bd5","text":"<pre><code>def test_memory_usage():\n    \"\"\"\u5185\u5b58\u4f7f\u7528\u6d4b\u8bd5\"\"\"\n    import psutil\n    import gc\n\n    process = psutil.Process()\n    initial_memory = process.memory_info().rss\n\n    # \u6267\u884c\u64cd\u4f5c\n    large_data = [0] * 1000000\n    process_data(large_data)\n\n    final_memory = process.memory_info().rss\n    memory_increase = final_memory - initial_memory\n\n    # \u5185\u5b58\u589e\u957f\u4e0d\u8d85\u8fc7100MB\n    assert memory_increase &lt; 100 * 1024 * 1024\n</code></pre>"},{"location":"testing/TESTING_STANDARDS/#_13","title":"\u603b\u7ed3","text":"<p>\u9075\u5faa\u8fd9\u4e9b\u6807\u51c6\u53ef\u4ee5\u786e\u4fdd\uff1a 1. \u6d4b\u8bd5\u8d28\u91cf\u9ad8\uff1a\u6bcf\u4e2a\u6d4b\u8bd5\u90fd\u6709\u660e\u786e\u7684\u4ef7\u503c 2. \u7ef4\u62a4\u6210\u672c\u4f4e\uff1a\u6d4b\u8bd5\u6613\u4e8e\u7406\u89e3\u548c\u4fee\u6539 3. \u6267\u884c\u901f\u5ea6\u5feb\uff1a\u5feb\u901f\u53cd\u9988\u5f00\u53d1\u8fdb\u5ea6 4. \u8986\u76d6\u7387\u9ad8\uff1a\u4fdd\u8bc1\u4ee3\u7801\u8d28\u91cf 5. CI/CD\u7a33\u5b9a\uff1a\u51cf\u5c11\u5931\u8d25\u98ce\u9669</p> <p>\u8bb0\u4f4f\uff1a\u6d4b\u8bd5\u4e0d\u662f\u8d8a\u591a\u8d8a\u597d\uff0c\u800c\u662f\u8d8a\u7cbe\u51c6\u8d8a\u597d\uff01</p>"},{"location":"testing/TEST_GUIDE/","title":"\ud83d\udcda \u6d4b\u8bd5\u6307\u5357","text":"<p>\u672c\u6307\u5357\u8bf4\u660e\u8db3\u7403\u9884\u6d4b\u9879\u76ee\u7684\u4e09\u5c42\u6d4b\u8bd5\u67b6\u6784\u3001\u8fd0\u884c\u547d\u4ee4\u548c\u4f9d\u8d56\u51c6\u5907\u6b65\u9aa4\u3002</p>"},{"location":"testing/TEST_GUIDE/#_2","title":"\ud83d\udcd1 \u76ee\u5f55","text":"<ol> <li>\u6d4b\u8bd5\u67b6\u6784\u6982\u89c8</li> <li>\u5355\u5143\u6d4b\u8bd5 (Unit Tests)</li> <li>\u96c6\u6210\u6d4b\u8bd5 (Integration Tests)</li> <li>Legacy \u6d4b\u8bd5</li> <li>\u6d4b\u8bd5\u6807\u8bb0\u8bf4\u660e</li> <li>\u8986\u76d6\u7387\u62a5\u544a</li> <li>CI/CD \u96c6\u6210</li> <li>\u6545\u969c\u6392\u9664</li> </ol>"},{"location":"testing/TEST_GUIDE/#_3","title":"\u6d4b\u8bd5\u67b6\u6784\u6982\u89c8","text":"<p>\u9879\u76ee\u91c7\u7528\u4e09\u5c42\u6d4b\u8bd5\u67b6\u6784\uff1a</p> <pre><code>tests/\n\u251c\u2500\u2500 unit/           # \u5355\u5143\u6d4b\u8bd5\uff08\u4e3b\u8981\uff09\n\u2502   \u251c\u2500\u2500 api/        # API \u5c42\u6d4b\u8bd5\uff08Mock\uff09\n\u2502   \u251c\u2500\u2500 services/   # \u670d\u52a1\u5c42\u6d4b\u8bd5\uff08Mock + \u5185\u5b58\u6570\u636e\u5e93\uff09\n\u2502   \u251c\u2500\u2500 database/   # \u6570\u636e\u5e93\u5c42\u6d4b\u8bd5\uff08SQLite \u5185\u5b58\uff09\n\u2502   \u2514\u2500\u2500 models/     # \u6a21\u578b\u5c42\u6d4b\u8bd5\uff08Mock\uff09\n\u251c\u2500\u2500 integration/    # \u96c6\u6210\u6d4b\u8bd5\uff08\u91cd\u5efa\u4e2d\uff09\n\u251c\u2500\u2500 e2e/           # \u7aef\u5230\u7aef\u6d4b\u8bd5\n\u2514\u2500\u2500 legacy/        # \u771f\u5b9e\u670d\u52a1\u6d4b\u8bd5\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_4","title":"\u6d4b\u8bd5\u7b56\u7565","text":"<ul> <li>\u5355\u5143\u6d4b\u8bd5\uff1a\u4f7f\u7528 Mock\uff0c\u5feb\u901f\u6267\u884c\uff0c\u8986\u76d6\u7387 \u2265 40%</li> <li>\u96c6\u6210\u6d4b\u8bd5\uff1a\u4f7f\u7528\u771f\u5b9e\u670d\u52a1\uff0c\u5b8c\u6574\u9a8c\u8bc1</li> <li>Legacy \u6d4b\u8bd5\uff1a\u4fdd\u7559\u7684\u771f\u5b9e\u4f9d\u8d56\u6d4b\u8bd5\uff0c\u9010\u6b65\u8fc1\u79fb</li> </ul>"},{"location":"testing/TEST_GUIDE/#unit-tests","title":"\u5355\u5143\u6d4b\u8bd5 (Unit Tests)","text":"<p>\u5355\u5143\u6d4b\u8bd5\u662f\u9879\u76ee\u7684\u4e3b\u8981\u6d4b\u8bd5\u7c7b\u578b\uff0c\u4f7f\u7528 Mock \u67b6\u6784\uff0c\u6267\u884c\u901f\u5ea6\u5feb\u3002</p>"},{"location":"testing/TEST_GUIDE/#_5","title":"\u8fd0\u884c\u547d\u4ee4","text":"<pre><code># \u8fd0\u884c\u6240\u6709\u5355\u5143\u6d4b\u8bd5\nmake test\n\n# \u6216\npytest tests/unit -v\n\n# \u8fd0\u884c\u7279\u5b9a\u6a21\u5757\u6d4b\u8bd5\npytest tests/unit/api -v\npytest tests/unit/services -v\npytest tests/unit/database -v\n\n# \u8fd0\u884c\u5168\u91cf\u6d4b\u8bd5\u5e76\u751f\u6210\u8986\u76d6\u7387\u62a5\u544a\nmake test-full\n\n# \u6216\npython scripts/run_full_coverage.py\n</code></pre>"},{"location":"testing/TEST_GUIDE/#mock","title":"Mock \u67b6\u6784\u8bf4\u660e","text":"<p>\u5355\u5143\u6d4b\u8bd5\u4f7f\u7528\u7edf\u4e00\u7684 Mock \u67b6\u6784\uff0c\u6240\u6709\u5916\u90e8\u4f9d\u8d56\u90fd\u88ab Mock\uff1a</p> <ul> <li>Redis: <code>MockRedis</code> (tests/helpers/redis.py)</li> <li>MLflow: <code>MockMlflow</code> (tests/helpers/mlflow.py)</li> <li>Kafka: <code>MockKafka</code> (tests/helpers/kafka.py)</li> <li>HTTP \u5ba2\u6237\u7aef: <code>MockHTTPResponse</code> (tests/helpers/http.py)</li> <li>\u6570\u636e\u5e93: SQLite \u5185\u5b58\u6570\u636e\u5e93 (tests/helpers/database.py)</li> </ul>"},{"location":"testing/TEST_GUIDE/#_6","title":"\u7f16\u5199\u65b0\u7684\u5355\u5143\u6d4b\u8bd5","text":"<pre><code>\"\"\"\u793a\u4f8b\u5355\u5143\u6d4b\u8bd5\"\"\"\n\nimport pytest\nfrom tests.helpers import MockRedis, create_sqlite_sessionmaker\n\nclass TestNewService:\n    @pytest.fixture\n    async def db_session(self):\n        \"\"\"\u5185\u5b58\u6570\u636e\u5e93\u4f1a\u8bdd\"\"\"\n        engine = create_sqlite_memory_engine()\n        sessionmaker = create_sqlite_sessionmaker(engine)\n        async with sessionmaker() as session:\n            yield session\n        engine.dispose()\n\n    @pytest.fixture\n    def mock_redis(self):\n        \"\"\"\u6a21\u62df Redis \u5ba2\u6237\u7aef\"\"\"\n        redis_mock = MockRedis()\n        redis_mock.set(\"__ping__\", \"ok\")\n        return redis_mock\n\n    @pytest.fixture\n    def service(self, db_session, mock_redis):\n        \"\"\"\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\"\"\"\n        from src.services.new_service import NewService\n        return NewService(db=db_session, redis=mock_redis)\n\n    @pytest.mark.asyncio\n    async def test_service_method(self, service):\n        \"\"\"\u6d4b\u8bd5\u670d\u52a1\u65b9\u6cd5\"\"\"\n        # \u51c6\u5907\n        service.redis.get.return_value = b'{\"cached\": true}'\n\n        # \u6267\u884c\n        result = await service.get_data(\"test_key\")\n\n        # \u9a8c\u8bc1\n        assert result is not None\n        service.redis.get.assert_called_once_with(\"test_key\")\n</code></pre>"},{"location":"testing/TEST_GUIDE/#integration-tests","title":"\u96c6\u6210\u6d4b\u8bd5 (Integration Tests)","text":"<p>\u96c6\u6210\u6d4b\u8bd5\u76ee\u524d\u5904\u4e8e\u91cd\u5efa\u9636\u6bb5\uff0c\u5c06\u6d4b\u8bd5\u7ec4\u4ef6\u95f4\u7684\u4ea4\u4e92\u3002</p>"},{"location":"testing/TEST_GUIDE/#_7","title":"\u72b6\u6001\uff1a\u91cd\u5efa\u4e2d","text":"<p>\u96c6\u6210\u6d4b\u8bd5\u6b63\u5728\u4ece Legacy \u6d4b\u8bd5\u4e2d\u63d0\u53d6\u5e76\u91cd\u6784\uff0c\u76ee\u6807\uff1a</p> <ul> <li>\u6d4b\u8bd5\u591a\u4e2a\u7ec4\u4ef6\u534f\u4f5c</li> <li>\u4f7f\u7528\u8f7b\u91cf\u7ea7\u771f\u5b9e\u670d\u52a1</li> <li>\u4fdd\u6301\u6267\u884c\u6548\u7387</li> </ul>"},{"location":"testing/TEST_GUIDE/#legacy","title":"Legacy \u6d4b\u8bd5","text":"<p>Legacy \u6d4b\u8bd5\u4f7f\u7528\u771f\u5b9e\u7684\u5916\u90e8\u670d\u52a1\uff0c\u7528\u4e8e\u9a8c\u8bc1\u771f\u5b9e\u73af\u5883\u4e0b\u7684\u96c6\u6210\u3002</p>"},{"location":"testing/TEST_GUIDE/#_8","title":"\u8fd0\u884c\u6761\u4ef6","text":"<ol> <li>\u542f\u52a8\u670d\u52a1\uff1a</li> </ol> <pre><code># \u4f7f\u7528 Docker Compose\ncd tests/legacy\ndocker-compose up -d\n\n# \u68c0\u67e5\u670d\u52a1\u72b6\u6001\ndocker-compose ps\n</code></pre> <ol> <li>\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff1a</li> </ol> <pre><code>export DATABASE_URL=postgresql://postgres:testpass@localhost:5432/football_test\nexport REDIS_URL=redis://localhost:6379\nexport MLFLOW_TRACKING_URI=http://localhost:5000\nexport KAFKA_BOOTSTRAP_SERVERS=localhost:9092\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_9","title":"\u8fd0\u884c\u547d\u4ee4","text":"<pre><code># \u8fd0\u884c\u6240\u6709 legacy \u6d4b\u8bd5\npytest tests/legacy/ -v\n\n# \u8fd0\u884c\u7279\u5b9a\u6d4b\u8bd5\npytest tests/legacy/test_integration.py::TestRealDatabaseIntegration -v\n\n# \u8df3\u8fc7\u6162\u901f\u6d4b\u8bd5\npytest tests/legacy/ -m \"not slow\" -v\n</code></pre>"},{"location":"testing/TEST_GUIDE/#ci","title":"CI \u81ea\u52a8\u8fd0\u884c","text":"<p>Legacy \u6d4b\u8bd5\u901a\u8fc7 GitHub Actions \u81ea\u52a8\u8fd0\u884c\uff1a</p> <ul> <li>\u6bcf\u65e5\u8fd0\u884c\uff1aUTC 02:00\uff08\u5317\u4eac\u65f6\u95f4 10:00\uff09</li> <li>\u624b\u52a8\u89e6\u53d1\uff1a\u53ef\u5728 Actions \u9875\u9762\u624b\u52a8\u8fd0\u884c</li> <li>PR \u89e6\u53d1\uff1a\u5f53\u4fee\u6539\u76f8\u5173\u6587\u4ef6\u65f6\u81ea\u52a8\u8fd0\u884c</li> </ul>"},{"location":"testing/TEST_GUIDE/#_10","title":"\u6d4b\u8bd5\u6807\u8bb0\u8bf4\u660e","text":"<p>\u9879\u76ee\u4f7f\u7528 pytest \u6807\u8bb0\u6765\u5206\u7c7b\u6d4b\u8bd5\uff1a</p> <ul> <li><code>@pytest.mark.unit</code> - \u5355\u5143\u6d4b\u8bd5</li> <li><code>@pytest.mark.integration</code> - \u96c6\u6210\u6d4b\u8bd5</li> <li><code>@pytest.mark.e2e</code> - \u7aef\u5230\u7aef\u6d4b\u8bd5</li> <li><code>@pytest.mark.legacy</code> - \u9700\u8981\u771f\u5b9e\u670d\u52a1\u7684\u9057\u7559\u6d4b\u8bd5</li> <li><code>@pytest.mark.slow</code> - \u6162\u901f\u6d4b\u8bd5\uff08\u6267\u884c\u65f6\u95f4 &gt; 1\u5206\u949f\uff09</li> </ul>"},{"location":"testing/TEST_GUIDE/#_11","title":"\u4f7f\u7528\u6807\u8bb0","text":"<pre><code>@pytest.mark.slow\n@pytest.mark.integration\ndef test_slow_integration(self):\n    \"\"\"\u6162\u901f\u96c6\u6210\u6d4b\u8bd5\"\"\"\n    pass\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_12","title":"\u6309\u6807\u8bb0\u8fd0\u884c","text":"<pre><code># \u53ea\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\npytest -m unit\n\n# \u8df3\u8fc7 legacy \u6d4b\u8bd5\npytest -m \"not legacy\"\n\n# \u8fd0\u884c\u6162\u901f\u6d4b\u8bd5\npytest -m slow\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_13","title":"\u8986\u76d6\u7387\u62a5\u544a","text":""},{"location":"testing/TEST_GUIDE/#_14","title":"\u751f\u6210\u8986\u76d6\u7387\u62a5\u544a","text":"<pre><code># \u751f\u6210\u5b8c\u6574\u62a5\u544a\nmake coverage\n\n# \u751f\u6210 HTML \u62a5\u544a\nmake cov.html\n\n# \u67e5\u770b\u8986\u76d6\u7387\u8d8b\u52bf\nmake coverage-trends\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_15","title":"\u8986\u76d6\u7387\u9608\u503c","text":"<ul> <li>\u5f53\u524d\u72b6\u6001\uff1a22.32%\uff08Phase 3 \u5b9e\u9645\uff09</li> <li>\u5f53\u524d\u76ee\u6807\uff1a\u7a33\u5b9a\u572822%\u57fa\u7840\u4e0a\uff0c\u9010\u6b65\u63d0\u5347</li> <li>Phase 4 \u76ee\u6807\uff1a40%</li> <li>\u6700\u7ec8\u76ee\u6807\uff1a80%\uff08\u751f\u4ea7\u6807\u51c6\uff09</li> <li>CI \u68c0\u67e5\uff1a\u5fc5\u987b\u8fbe\u5230\u5f53\u524d\u9608\u503c (22%) \u624d\u80fd\u901a\u8fc7</li> </ul>"},{"location":"testing/TEST_GUIDE/#_16","title":"\u8986\u76d6\u7387\u62a5\u544a\u4f4d\u7f6e","text":"<ul> <li>\u7ec8\u7aef\u8f93\u51fa\uff1a\u8fd0\u884c\u65f6\u5b9e\u65f6\u663e\u793a</li> <li>HTML \u62a5\u544a\uff1a<code>htmlcov/index.html</code></li> <li>XML \u62a5\u544a\uff1a<code>coverage.xml</code></li> <li>JSON \u62a5\u544a\uff1a<code>coverage.json</code></li> <li>\u5b58\u6863\u62a5\u544a\uff1a<code>docs/_reports/COVERAGE_REPORT.json</code></li> </ul>"},{"location":"testing/TEST_GUIDE/#cicd","title":"CI/CD \u96c6\u6210","text":""},{"location":"testing/TEST_GUIDE/#github-actions","title":"GitHub Actions \u5de5\u4f5c\u6d41","text":"<ol> <li>CI Pipeline (<code>.github/workflows/ci-pipeline.yml</code>)</li> <li>\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5</li> <li>\u5355\u5143\u6d4b\u8bd5 + \u8986\u76d6\u7387</li> <li> <p>\u955c\u50cf\u6784\u5efa</p> </li> <li> <p>Legacy Tests (<code>.github/workflows/legacy-tests.yml</code>)</p> </li> <li>\u771f\u5b9e\u670d\u52a1\u96c6\u6210\u6d4b\u8bd5</li> <li>\u6bcf\u65e5\u81ea\u52a8\u8fd0\u884c</li> <li>\u77e9\u9635\u6d4b\u8bd5\uff08\u4e0d\u540c\u7ec4\u4ef6\uff09</li> </ol>"},{"location":"testing/TEST_GUIDE/#_17","title":"\u672c\u5730\u9884\u68c0\u67e5","text":"<p>\u63d0\u4ea4\u524d\u8fd0\u884c\uff1a</p> <pre><code># \u5b8c\u6574\u9884\u68c0\u67e5\nmake prepush\n\n# \u6216\u5206\u6b65\u6267\u884c\nmake fmt      # \u4ee3\u7801\u683c\u5f0f\u5316\nmake lint     # \u4ee3\u7801\u68c0\u67e5\nmake test-quick  # \u5feb\u901f\u6d4b\u8bd5\nmake coverage-fast  # \u8986\u76d6\u7387\u68c0\u67e5\n\n# \u8d28\u91cf\u95e8\u7981\u68c0\u67e5 (Phase 3\u65b0\u589e)\npython scripts/quality_gate.py --quick-mode  # \u5feb\u901f\u68c0\u67e5\npython scripts/quality_gate.py               # \u5b8c\u6574\u68c0\u67e5\n\n# \u73af\u5883\u5065\u5eb7\u68c0\u67e5\nmake env-check\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_18","title":"\u6545\u969c\u6392\u9664","text":""},{"location":"testing/TEST_GUIDE/#_19","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"testing/TEST_GUIDE/#1","title":"1. \u6d4b\u8bd5\u65e0\u6cd5\u5bfc\u5165\u6a21\u5757","text":"<pre><code># \u786e\u4fdd\u865a\u62df\u73af\u5883\u6fc0\u6d3b\nsource .venv/bin/activate\n\n# \u5b89\u88c5\u4f9d\u8d56\nmake install\n\n# \u68c0\u67e5 PYTHONPATH\nexport PYTHONPATH=$(pwd)\n</code></pre>"},{"location":"testing/TEST_GUIDE/#2-redismlflow","title":"2. Redis/MLflow \u8fde\u63a5\u5931\u8d25","text":"<pre><code># \u68c0\u67e5\u670d\u52a1\u72b6\u6001\ndocker ps | grep redis\ndocker ps | grep mlflow\n\n# \u67e5\u770b\u65e5\u5fd7\ndocker logs test-redis\ndocker logs test-mlflow\n</code></pre>"},{"location":"testing/TEST_GUIDE/#3","title":"3. \u6570\u636e\u5e93\u8fde\u63a5\u95ee\u9898","text":"<pre><code># \u68c0\u67e5 PostgreSQL\ndocker exec -it test-postgres psql -U postgres -d football_test -c \"SELECT 1;\"\n\n# \u91cd\u7f6e\u6570\u636e\u5e93\nmake db-reset\n</code></pre>"},{"location":"testing/TEST_GUIDE/#4","title":"4. \u8986\u76d6\u7387\u4f4e","text":"<pre><code># \u67e5\u770b\u672a\u8986\u76d6\u7684\u884c\nmake coverage\n\n# \u67e5\u770b\u5177\u4f53\u62a5\u544a\nopen htmlcov/index.html\n\n# \u751f\u6210\u8986\u76d6\u7387\u8d8b\u52bf\nmake coverage-dashboard\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_20","title":"\u8c03\u8bd5\u6280\u5de7","text":"<ol> <li>\u8fd0\u884c\u5355\u4e2a\u6d4b\u8bd5\uff1a</li> </ol> <pre><code>pytest tests/unit/test_example.py::TestClass::test_method -v -s\n</code></pre> <ol> <li>\u663e\u793a\u8f93\u51fa\uff1a</li> </ol> <pre><code>pytest -s  # \u4e0d\u6355\u83b7\u8f93\u51fa\n</code></pre> <ol> <li>\u8fdb\u5165\u8c03\u8bd5\uff1a</li> </ol> <pre><code>import pdb; pdb.set_trace()  # \u5728\u6d4b\u8bd5\u4e2d\u6dfb\u52a0\u65ad\u70b9\n</code></pre> <ol> <li>\u8be6\u7ec6\u9519\u8bef\uff1a</li> </ol> <pre><code>pytest --tb=long  # \u663e\u793a\u5b8c\u6574\u9519\u8bef\u5806\u6808\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_21","title":"\u6d4b\u8bd5\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"testing/TEST_GUIDE/#1_1","title":"1. \u547d\u540d\u89c4\u8303","text":"<ul> <li>\u6d4b\u8bd5\u6587\u4ef6\uff1a<code>test_*.py</code></li> <li>\u6d4b\u8bd5\u7c7b\uff1a<code>Test*</code></li> <li>\u6d4b\u8bd5\u65b9\u6cd5\uff1a<code>test_*</code></li> </ul>"},{"location":"testing/TEST_GUIDE/#2","title":"2. \u6d4b\u8bd5\u7ed3\u6784","text":"<p>\u4f7f\u7528 Given-When-Then \u6a21\u5f0f\uff1a</p> <pre><code>def test_prediction_creation(self, service):\n    # Given - \u51c6\u5907\u6570\u636e\n    prediction_data = {\"match_id\": 123, \"home_score\": 2}\n\n    # When - \u6267\u884c\u64cd\u4f5c\n    result = service.create_prediction(prediction_data)\n\n    # Then - \u9a8c\u8bc1\u7ed3\u679c\n    assert result[\"status\"] == \"success\"\n    assert result[\"match_id\"] == 123\n</code></pre>"},{"location":"testing/TEST_GUIDE/#3_1","title":"3. \u6d4b\u8bd5\u9694\u79bb","text":"<p>\u6bcf\u4e2a\u6d4b\u8bd5\u5e94\u8be5\u72ec\u7acb\uff0c\u4e0d\u4f9d\u8d56\u5176\u4ed6\u6d4b\u8bd5\uff1a</p> <pre><code>@pytest.fixture\ndef clean_db(self, db_session):\n    \"\"\"\u6e05\u7406\u6570\u636e\u5e93\"\"\"\n    yield\n    # \u6d4b\u8bd5\u540e\u6e05\u7406\n    db_session.execute(text(\"DELETE FROM test_table\"))\n</code></pre>"},{"location":"testing/TEST_GUIDE/#4_1","title":"4. \u6d4b\u8bd5\u6570\u636e\u7ba1\u7406","text":"<p>\u4f7f\u7528\u5de5\u5382\u6a21\u5f0f\u521b\u5efa\u6d4b\u8bd5\u6570\u636e\uff1a</p> <pre><code>@pytest.fixture\ndef sample_match_data(self):\n    \"\"\"\u793a\u4f8b\u6bd4\u8d5b\u6570\u636e\"\"\"\n    return {\n        \"home_team\": \"Team A\",\n        \"away_team\": \"Team B\",\n        \"match_date\": datetime.now()\n    }\n</code></pre>"},{"location":"testing/TEST_GUIDE/#phase-3","title":"\u8d28\u91cf\u95e8\u7981\u7cfb\u7edf\u8be6\u89e3 (Phase 3\u65b0\u589e)","text":""},{"location":"testing/TEST_GUIDE/#_22","title":"\u7cfb\u7edf\u6982\u8ff0","text":"<p>\u9879\u76ee\u5f15\u5165\u4e86\u4f01\u4e1a\u7ea7\u8d28\u91cf\u95e8\u7981\u7cfb\u7edf\uff0c\u81ea\u52a8\u5316\u68c0\u67e5\u4ee3\u7801\u8d28\u91cf\u3001\u6d4b\u8bd5\u8986\u76d6\u7387\u548c\u5b89\u5168\u6027\u6807\u51c6\u3002</p>"},{"location":"testing/TEST_GUIDE/#_23","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"<ol> <li>\u8d28\u91cf\u95e8\u7981\u811a\u672c: <code>scripts/quality_gate.py</code></li> <li>\u914d\u7f6e\u6587\u4ef6: <code>quality_config.json</code></li> <li>\u62a5\u544a\u751f\u6210: <code>quality-report.json</code></li> <li>CI\u96c6\u6210: GitHub Actions \u5de5\u4f5c\u6d41</li> </ol>"},{"location":"testing/TEST_GUIDE/#_24","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<pre><code># \u5f00\u53d1\u65f6\u5feb\u901f\u68c0\u67e5\npython scripts/quality_gate.py --quick-mode\n\n# \u63d0\u4ea4\u524d\u5b8c\u6574\u68c0\u67e5\npython scripts/quality_gate.py\n\n# \u68c0\u67e5\u7279\u5b9a\u6a21\u5757\npython scripts/quality_gate.py --module api\n\n# \u8df3\u8fc7\u67d0\u4e9b\u68c0\u67e5\npython scripts/quality_gate.py --skip-security\n\n# \u8be6\u7ec6\u8f93\u51fa\u6a21\u5f0f\npython scripts/quality_gate.py --verbose\n\n# \u5e2e\u52a9\u4fe1\u606f\npython scripts/quality_gate.py --help\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_25","title":"\u68c0\u67e5\u9879\u76ee","text":"\u68c0\u67e5\u9879\u76ee \u6743\u91cd \u901a\u8fc7\u6807\u51c6 \u5f53\u524d\u72b6\u6001 \u6d4b\u8bd5\u8986\u76d6\u7387 30% \u226522% \u2705 \u901a\u8fc7 \u6d4b\u8bd5\u901a\u8fc7\u7387 25% \u226585% \u2705 \u901a\u8fc7 \u4ee3\u7801\u8d28\u91cf 20% Ruff + MyPy \u901a\u8fc7 \u2705 \u901a\u8fc7 \u5b89\u5168\u6027\u68c0\u67e5 15% Bandit \u901a\u8fc7 \u2705 \u901a\u8fc7 \u4f9d\u8d56\u5b89\u5168 10% pip-audit \u901a\u8fc7 \u2705 \u901a\u8fc7"},{"location":"testing/TEST_GUIDE/#_26","title":"\u8d28\u91cf\u62a5\u544a\u89e3\u8bfb","text":"<pre><code>{\n  \"overall_score\": 8.5,\n  \"status\": \"PASSED\",\n  \"checks\": {\n    \"test_coverage\": {\n      \"score\": 7.0,\n      \"status\": \"PASSED\",\n      \"details\": \"Coverage: 22.32% (threshold: 22%)\"\n    }\n  }\n}\n</code></pre>"},{"location":"testing/TEST_GUIDE/#ci_1","title":"\u4e0eCI\u96c6\u6210","text":"<p>\u8d28\u91cf\u95e8\u7981\u5df2\u96c6\u6210\u5230CI\u6d41\u7a0b\u4e2d\uff1a</p> <ol> <li>Pull Request: \u81ea\u52a8\u8fd0\u884c\u5b8c\u6574\u68c0\u67e5</li> <li>Push: \u8fd0\u884c\u5feb\u901f\u68c0\u67e5</li> <li>\u624b\u52a8\u89e6\u53d1: \u53ef\u5728GitHub Actions\u9875\u9762\u624b\u52a8\u8fd0\u884c</li> </ol>"},{"location":"testing/TEST_GUIDE/#_27","title":"\u6545\u969c\u6392\u9664","text":""},{"location":"testing/TEST_GUIDE/#_28","title":"\u8d28\u91cf\u68c0\u67e5\u5931\u8d25","text":"<pre><code># \u67e5\u770b\u8be6\u7ec6\u5931\u8d25\u539f\u56e0\npython scripts/quality_gate.py --verbose\n\n# \u53ea\u8fd0\u884c\u5931\u8d25\u7684\u68c0\u67e5\u9879\npython scripts/quality_gate.py --check coverage\n\n# \u751f\u6210\u4fee\u590d\u5efa\u8bae\npython scripts/quality_gate.py --suggest-fixes\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_29","title":"\u8986\u76d6\u7387\u4e0d\u8db3","text":"<pre><code># \u67e5\u770b\u54ea\u4e9b\u6587\u4ef6\u7f3a\u5c11\u6d4b\u8bd5\nmake coverage-targeted MODULE=src/api\n\n# \u751f\u6210\u8986\u76d6\u7387\u63d0\u5347\u5efa\u8bae\npython scripts/quality_gate.py --coverage-suggestions\n</code></pre>"},{"location":"testing/TEST_GUIDE/#_30","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u5f00\u53d1\u8fc7\u7a0b\u4e2d: \u4f7f\u7528 <code>--quick-mode</code> \u5feb\u901f\u53cd\u9988</li> <li>\u63d0\u4ea4\u524d: \u8fd0\u884c\u5b8c\u6574\u8d28\u91cf\u95e8\u7981\u68c0\u67e5</li> <li>\u4fee\u590d\u95ee\u9898: \u6839\u636e\u8be6\u7ec6\u62a5\u544a\u9488\u5bf9\u6027\u4fee\u590d</li> <li>\u6301\u7eed\u6539\u8fdb: \u5b9a\u671f\u68c0\u67e5\u8d28\u91cf\u8d8b\u52bf\u62a5\u544a</li> </ol>"},{"location":"testing/TEST_GUIDE/#phase-3_1","title":"Phase 3 \u6d4b\u8bd5\u7b56\u7565\u603b\u7ed3","text":""},{"location":"testing/TEST_GUIDE/#_31","title":"\u5f53\u524d\u72b6\u6001","text":"<ul> <li>\u2705 \u8d28\u91cf\u95e8\u7981\u7cfb\u7edf: \u5df2\u90e8\u7f72\u5e76\u6b63\u5e38\u8fd0\u884c</li> <li>\u2705 \u6d4b\u8bd5\u57fa\u7840\u8bbe\u65bd: \u5b8c\u6574\u7684Mock\u548c\u8f85\u52a9\u5de5\u5177</li> <li>\u2705 \u8986\u76d6\u7387\u7a33\u5b9a: 22.32%\uff0c\u57fa\u7840\u67b6\u6784\u5b8c\u5584</li> <li>\ud83d\udd04 \u6301\u7eed\u4f18\u5316: \u6b63\u5728\u8fdb\u884c\u7684\u6539\u8fdb\u9879\u76ee</li> </ul>"},{"location":"testing/TEST_GUIDE/#phase-4","title":"\u4e0b\u4e00\u9636\u6bb5\u76ee\u6807 (Phase 4)","text":"<ul> <li>\ud83c\udfaf \u8986\u76d6\u7387\u76ee\u6807: \u63d0\u5347\u81f340%\u4ee5\u4e0a</li> <li>\ud83c\udfaf \u6d4b\u8bd5\u8d28\u91cf: \u51cf\u5c11Flaky\u6d4b\u8bd5</li> <li>\ud83c\udfaf \u6027\u80fd\u4f18\u5316: \u52a0\u5feb\u6d4b\u8bd5\u6267\u884c\u901f\u5ea6</li> <li>\ud83c\udfaf \u96c6\u6210\u6d4b\u8bd5: \u5b8c\u5584\u591a\u7ec4\u4ef6\u534f\u4f5c\u6d4b\u8bd5</li> </ul>"},{"location":"testing/TEST_GUIDE/#_32","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>API \u53c2\u8003</li> <li>\u6570\u636e\u5e93\u67b6\u6784</li> <li>\u5f00\u53d1\u6307\u5357</li> <li>\u6545\u969c\u6392\u9664</li> <li>\u8d28\u91cf\u95e8\u7981\u914d\u7f6e</li> </ul> <p>\u6700\u540e\u66f4\u65b0\uff1a2025-01-21 (Phase 3 \u66f4\u65b0)</p>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/","title":"\ud83e\udded \u6d4b\u8bd5\u6539\u8fdb\u673a\u5236\u6307\u5357 (Test Improvement Guide)","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#1","title":"1. \u80cc\u666f","text":"<p>\u672c\u9879\u76ee\u7684\u6d4b\u8bd5\u5957\u4ef6\u5b58\u5728\u7ed3\u6784\u6027\u95ee\u9898\uff0c\u56e0\u6b64\u5f15\u5165\u4e86 Kanban + CI Hook + \u5468\u62a5\u4e09\u5c42\u673a\u5236\u6765\u6301\u7eed\u4f18\u5316\u3002</p> <p>\u521d\u59cb\u95ee\u9898\uff1a</p> <ul> <li>\u6574\u4f53\u8986\u76d6\u7387\uff1a66%\uff08\u4f4e\u4e8e\u76ee\u6807 80%\uff09</li> <li>\u81ea\u52a8\u751f\u6210\u6d4b\u8bd5\u5360\u6bd4\uff1a67%\uff08\u8d28\u91cf\u8f83\u4f4e\uff09</li> <li>44 \u4e2a\u6587\u4ef6\u5b58\u5728\u5927\u91cf ImportError \u8df3\u8fc7</li> <li>\u5173\u952e\u6a21\u5757\uff08ai/, scheduler/, services/\uff09\u7f3a\u4e4f\u6d4b\u8bd5</li> </ul> <p>\u76ee\u6807\uff1a</p> <ul> <li>\u4fdd\u6301\u6d4b\u8bd5\u8986\u76d6\u7387\u7a33\u6b65\u63d0\u5347</li> <li>\u4fdd\u8bc1\u6bcf\u6b21\u63d0\u4ea4\u7684\u8d28\u91cf</li> <li>\u5f62\u6210\u900f\u660e\u7684\u6539\u8fdb\u95ed\u73af</li> <li>\u5efa\u7acb\u53ef\u6301\u7eed\u7684\u6d4b\u8bd5\u6587\u5316</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#2-kanban","title":"2. Kanban \u770b\u677f","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#21","title":"2.1 \u6587\u4ef6\u4f4d\u7f6e","text":"<pre><code>docs/_reports/TEST_OPTIMIZATION_KANBAN.md\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#22","title":"2.2 \u529f\u80fd\u7ed3\u6784","text":"<p>Kanban \u770b\u677f\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff0c\u8ddf\u8e2a\u6d4b\u8bd5\u4f18\u5316\u4efb\u52a1\uff1a</p> <ul> <li>Phase 1: \u77ed\u671f\u4fee\u590d\uff08\u8bed\u6cd5\u9519\u8bef\u3001\u6e05\u7406\u3001\u914d\u7f6e\uff09</li> <li>Phase 2: \u7ed3\u6784\u4f18\u5316\uff08\u5173\u952e\u6a21\u5757\u6d4b\u8bd5\u3001\u76ee\u5f55\u91cd\u7ec4\uff09</li> <li>Phase 3: \u957f\u671f\u8d28\u91cf\u5efa\u8bbe\uff08\u8986\u76d6\u7387\u95e8\u63a7\u3001\u6027\u80fd\u6d4b\u8bd5\u3001\u81ea\u52a8\u5316\uff09</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#23","title":"2.3 \u4f7f\u7528\u65b9\u6cd5","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_1","title":"\u4efb\u52a1\u72b6\u6001\u7ba1\u7406","text":"<ol> <li>TODO: \u5f85\u529e\u4efb\u52a1\uff0c\u65b0\u53d1\u73b0\u7684\u95ee\u9898\u7acb\u5373\u6dfb\u52a0\u5230\u5bf9\u5e94 Phase</li> <li>In Progress: \u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1\uff0c\u4ece TODO \u79fb\u52a8\u8fc7\u6765</li> <li>Done: \u5df2\u5b8c\u6210\u7684\u4efb\u52a1\uff0c\u5fc5\u987b\uff1a</li> <li>\u6253\u4e0a \u2705 \u6807\u8bb0</li> <li>\u5199\u4e0a\u5b8c\u6210\u65e5\u671f\uff08\u683c\u5f0f\uff1a<code>\u2705 2025-01-01</code>\uff09</li> </ol>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_2","title":"\u72b6\u6001\u6d41\u8f6c\u89c4\u5219","text":"<pre><code>TODO \u2192 In Progress \u2192 Done\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_3","title":"\u4efb\u52a1\u66f4\u65b0\u8981\u6c42","text":"<ul> <li>\u6bcf\u6b21 AI \u5de5\u5177\u6216\u5f00\u53d1\u8005\u6267\u884c\u4efb\u52a1\u65f6\uff0c\u5fc5\u987b\u66f4\u65b0 Kanban \u72b6\u6001</li> <li>\u65b0\u53d1\u73b0\u7684\u95ee\u9898\uff0c\u5fc5\u987b\u7acb\u5373\u6dfb\u52a0\u5230\u5bf9\u5e94 Phase \u7684 TODO</li> <li>\u4efb\u52a1\u5b8c\u6210\u540e\uff0c\u5fc5\u987b\u79fb\u52a8\u5230 Done \u5e76\u6807\u8bb0\u5b8c\u6210</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#3-ci-hook","title":"3. CI Hook \u5b88\u62a4","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#31-pre-commit-hook","title":"3.1 \u672c\u5730 pre-commit hook","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_4","title":"\u6587\u4ef6\u8def\u5f84","text":"<pre><code>.git/hooks/pre-commit\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_5","title":"\u529f\u80fd","text":"<ul> <li>\u963b\u6b62\u672a\u66f4\u65b0 Kanban \u6587\u4ef6\u7684\u63d0\u4ea4</li> <li>\u63d0\u4f9b\u6e05\u6670\u7684\u9519\u8bef\u63d0\u793a\uff08\u4e2d\u6587\uff09</li> <li>\u786e\u4fdd\u672c\u5730\u5f00\u53d1\u89c4\u8303</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_6","title":"\u542f\u7528\u65b9\u6cd5","text":"<pre><code>make setup-hooks\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_7","title":"\u9519\u8bef\u793a\u4f8b","text":"<pre><code>\u274c \u63d0\u4ea4\u88ab\u963b\u6b62: \u672a\u66f4\u65b0 docs/_reports/TEST_OPTIMIZATION_KANBAN.md\n\ud83d\udc49 \u8bf7\u5728\u63d0\u4ea4\u524d\u66f4\u65b0 Kanban \u6587\u4ef6\uff0c\u4fdd\u6301\u4efb\u52a1\u8fdb\u5ea6\u4e00\u81f4\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#32-github-actions","title":"3.2 GitHub Actions \u5b88\u62a4","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_8","title":"\u6587\u4ef6\u8def\u5f84","text":"<pre><code>.github/workflows/kanban-check.yml\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_9","title":"\u6838\u5fc3\u529f\u80fd","text":"<ul> <li>\u6bcf\u6b21 push/PR \u68c0\u67e5 Kanban \u662f\u5426\u66f4\u65b0</li> <li>\u591a\u5c42\u7f13\u5b58\u4f18\u5316\uff1a</li> <li>\u7f13\u5b58 <code>.git/hooks</code> \u76ee\u5f55\uff08\u907f\u514d\u91cd\u590d chmod\uff09</li> <li>\u7f13\u5b58 Kanban \u6587\u4ef6 hash\uff08\u5185\u5bb9\u53d8\u5316\u65f6\u91cd\u65b0\u9a8c\u8bc1\uff09</li> <li>\u5f69\u8272\u65e5\u5fd7\u8f93\u51fa\uff08\u2705/\u274c \u72b6\u6001\u63d0\u793a\uff09</li> <li>\u667a\u80fd\u8df3\u8fc7\u903b\u8f91\uff08\u7f13\u5b58\u547d\u4e2d\u65f6\u8df3\u8fc7\u68c0\u67e5\uff09</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_10","title":"\u7f13\u5b58\u7b56\u7565","text":"<pre><code># \u591a\u8def\u5f84\u7f13\u5b58\npath: |\n  .git/hooks\n  docs/_reports/TEST_OPTIMIZATION_KANBAN.md\nkey: kanban-check-${{ hashFiles('.git/hooks/*', 'docs/_reports/TEST_OPTIMIZATION_KANBAN.md') }}\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_11","title":"\u8f93\u51fa\u793a\u4f8b","text":"<pre><code>\u26a1 Cache hit: true (hooks &amp; Kanban \u6587\u4ef6\u5df2\u7f13\u5b58)\n\u2705 \ud83d\udccb Kanban \u672a\u53d8\uff0c\u8df3\u8fc7\u68c0\u67e5\n\ud83d\udccb \u7f13\u5b58\u547d\u4e2d\uff0c\u65e0\u9700\u91cd\u590d\u9a8c\u8bc1\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#33","title":"3.3 \u68c0\u67e5\u5931\u8d25\u62a5\u544a","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_12","title":"\u6587\u4ef6\u8def\u5f84","text":"<pre><code>docs/_reports/KANBAN_CHECK_REPORT.md\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_13","title":"\u751f\u6210\u65f6\u673a","text":"<p>\u5728 CI \u68c0\u67e5\u5931\u8d25\u65f6\u81ea\u52a8\u751f\u6210</p>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_14","title":"\u62a5\u544a\u5185\u5bb9","text":"<pre><code># \ud83d\udccb Kanban \u6587\u4ef6\u68c0\u67e5\u62a5\u544a\n\n**\u751f\u6210\u65f6\u95f4**: 2025-01-01 12:00:00 UTC\n**CI \u8fd0\u884c\u7f16\u53f7**: 123456\n**\u63d0\u4ea4 SHA**: abcdef1234567890\n\n## \ud83d\udea8 \u68c0\u67e5\u7ed3\u679c\n- \u72b6\u6001: \u274c \u5931\u8d25\n- \u539f\u56e0: Kanban \u6587\u4ef6\u672a\u66f4\u65b0\n\n## \ud83d\udcc2 \u6587\u4ef6\u8def\u5f84\n- docs/_reports/TEST_OPTIMIZATION_KANBAN.md\n\n## \ud83d\udccc \u63d0\u793a\n\ud83d\udc49 \u6bcf\u6b21\u63d0\u4ea4\u5fc5\u987b\u540c\u6b65\u66f4\u65b0 Kanban \u6587\u4ef6\uff0c\u4ee5\u4fdd\u6301\u4efb\u52a1\u8fdb\u5ea6\u4e0e\u4ee3\u7801\u4e00\u81f4\u3002\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_15","title":"\u5931\u8d25\u539f\u56e0\u5206\u7c7b","text":"<ul> <li><code>Kanban \u6587\u4ef6\u7f3a\u5931</code>\uff1a\u770b\u677f\u6587\u4ef6\u4e0d\u5b58\u5728</li> <li><code>Kanban \u6587\u4ef6\u672a\u66f4\u65b0</code>\uff1a\u63d0\u4ea4\u672a\u5305\u542b\u770b\u677f\u53d8\u66f4</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#4","title":"4. \u5468\u62a5\u673a\u5236","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#41","title":"4.1 \u5b9a\u65f6\u4efb\u52a1\u914d\u7f6e","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_16","title":"\u6587\u4ef6\u8def\u5f84","text":"<pre><code>.github/workflows/kanban-history.yml\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_17","title":"\u89e6\u53d1\u65b9\u5f0f","text":"<ul> <li>\u5b9a\u65f6\u6267\u884c\uff1a\u6bcf\u5468\u4e00 02:00 UTC</li> <li>\u624b\u52a8\u89e6\u53d1\uff1a\u652f\u6301 GitHub Actions \u624b\u52a8\u8fd0\u884c</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#42","title":"4.2 \u529f\u80fd\u6d41\u7a0b","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_18","title":"\u626b\u63cf\u9636\u6bb5","text":"<ul> <li>\u67e5\u627e\u6240\u6709 <code>KANBAN_CHECK_REPORT*.md</code> \u6587\u4ef6</li> <li>\u6309\u65f6\u95f4\u5012\u5e8f\u6392\u5217</li> <li>\u63d0\u53d6\u5173\u952e\u4fe1\u606f\uff1a\u65f6\u95f4\u3001CI\u7f16\u53f7\u3001\u63d0\u4ea4SHA\u3001\u5931\u8d25\u539f\u56e0</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_19","title":"\u6c47\u603b\u751f\u6210","text":"<ul> <li>\u5c06\u6240\u6709\u62a5\u544a\u5408\u5e76\u5230\u5386\u53f2\u6587\u4ef6</li> <li>\u6309\u65e5\u671f\u5206\u7ec4\u663e\u793a</li> <li>\u81ea\u52a8\u6dfb\u52a0\u5206\u9694\u7ebf</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_20","title":"\u81ea\u52a8\u63d0\u4ea4","text":"<ul> <li>\u6709\u53d8\u5316\u65f6\u81ea\u52a8\u63d0\u4ea4\u5230\u4e3b\u5206\u652f</li> <li>\u6807\u51c6\u5316\u63d0\u4ea4\u4fe1\u606f\uff1a<code>chore(report): update KANBAN_HISTORY.md (weekly summary)</code></li> <li>\u65e0\u53d8\u5316\u65f6\u8df3\u8fc7\u63d0\u4ea4</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#43","title":"4.3 \u5386\u53f2\u6c47\u603b\u683c\u5f0f","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_21","title":"\u6587\u4ef6\u8def\u5f84","text":"<pre><code>docs/_reports/KANBAN_HISTORY.md\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_22","title":"\u5185\u5bb9\u793a\u4f8b","text":"<pre><code># \ud83d\uddc2\ufe0f Kanban \u68c0\u67e5\u5386\u53f2\u6c47\u603b\n\n**\u6700\u540e\u66f4\u65b0**: 2025-01-08 02:00:00 UTC\n\n## 2025-01-07\n- \u72b6\u6001: \u274c \u5931\u8d25\n- \u539f\u56e0: Kanban \u6587\u4ef6\u672a\u66f4\u65b0\n- \u63d0\u4ea4 SHA: abc1234\n- CI \u8fd0\u884c\u7f16\u53f7: 987654\n\n---\n\n## 2025-01-05\n- \u72b6\u6001: \u274c \u5931\u8d25\n- \u539f\u56e0: Kanban \u6587\u4ef6\u7f3a\u5931\n- \u63d0\u4ea4 SHA: def5678\n- CI \u8fd0\u884c\u7f16\u53f7: 123456\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#5","title":"5. \u5f00\u53d1\u8005\u64cd\u4f5c\u6307\u5357","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#51","title":"5.1 \u6807\u51c6\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#1_1","title":"1. \u4efb\u52a1\u9009\u62e9","text":"<pre><code># 1. \u67e5\u770b\u5f53\u524d\u9879\u76ee\u72b6\u6001\nmake context\n\n# 2. \u9605\u8bfb Kanban \u770b\u677f\ncat docs/_reports/TEST_OPTIMIZATION_KANBAN.md\n\n# 3. \u9009\u62e9 TODO \u4efb\u52a1\uff0c\u6807\u8bb0\u4e3a In Progress\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#2","title":"2. \u5f00\u53d1\u6267\u884c","text":"<ul> <li>\u6267\u884c\u9009\u5b9a\u7684\u4efb\u52a1</li> <li>\u786e\u4fdd\u4ee3\u7801\u8d28\u91cf\uff08\u8fd0\u884c <code>make prepush</code>\uff09</li> <li>\u6d4b\u8bd5\u901a\u8fc7\u540e\u51c6\u5907\u63d0\u4ea4</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#3","title":"3. \u72b6\u6001\u66f4\u65b0","text":"<pre><code># \u66f4\u65b0 Kanban \u6587\u4ef6\n# \u5c06\u4efb\u52a1\u4ece In Progress \u79fb\u52a8\u5230 Done\n# \u6dfb\u52a0 \u2705 \u548c\u5b8c\u6210\u65e5\u671f\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#4_1","title":"4. \u63d0\u4ea4\u4ee3\u7801","text":"<pre><code># \u542f\u7528 hooks\uff08\u5982\u679c\u672a\u542f\u7528\uff09\nmake setup-hooks\n\n# \u63d0\u4ea4\u4ee3\u7801\ngit add .\ngit commit -m \"fix: \u5b8c\u6210\u67d0\u6d4b\u8bd5\u4f18\u5316\u4efb\u52a1\"\ngit push\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#52-ci","title":"5.2 CI \u5931\u8d25\u5904\u7406","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#1_2","title":"1. \u67e5\u770b\u5931\u8d25\u62a5\u544a","text":"<pre><code># \u67e5\u770b\u81ea\u52a8\u751f\u6210\u7684\u5931\u8d25\u62a5\u544a\ncat docs/_reports/KANBAN_CHECK_REPORT.md\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#2_1","title":"2. \u95ee\u9898\u5206\u6790","text":"<ul> <li>\u786e\u8ba4\u5931\u8d25\u539f\u56e0\uff08\u6587\u4ef6\u7f3a\u5931 vs \u672a\u66f4\u65b0\uff09</li> <li>\u68c0\u67e5\u63d0\u4ea4\u662f\u5426\u5305\u542b Kanban \u53d8\u66f4</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#3_1","title":"3. \u4fee\u590d\u6d41\u7a0b","text":"<pre><code># 1. \u66f4\u65b0 Kanban \u6587\u4ef6\ngit add docs/_reports/TEST_OPTIMIZATION_KANBAN.md\n\n# 2. \u91cd\u65b0\u63d0\u4ea4\ngit commit --amend --no-edit\ngit push\n</code></pre>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#53","title":"5.3 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_23","title":"\u4efb\u52a1\u7ba1\u7406","text":"<ul> <li>\u5c0f\u6279\u91cf: \u6bcf\u6b21\u63d0\u4ea4\u4e13\u6ce8\u4e8e 1-2 \u4e2a\u4efb\u52a1</li> <li>\u53ca\u65f6\u66f4\u65b0: \u5b8c\u6210\u4efb\u52a1\u7acb\u5373\u66f4\u65b0 Kanban</li> <li>\u6e05\u6670\u63cf\u8ff0: \u4efb\u52a1\u63cf\u8ff0\u8981\u5177\u4f53\u53ef\u6267\u884c</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_24","title":"\u8d28\u91cf\u4fdd\u8bc1","text":"<ul> <li>\u672c\u5730\u9a8c\u8bc1: \u63d0\u4ea4\u524d\u8fd0\u884c <code>make prepush</code></li> <li>CI \u76d1\u63a7: \u5173\u6ce8 CI \u6267\u884c\u72b6\u6001</li> <li>\u5feb\u901f\u54cd\u5e94: CI \u5931\u8d25\u540e\u7acb\u5373\u4fee\u590d</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_25","title":"\u56e2\u961f\u534f\u4f5c","text":"<ul> <li>\u900f\u660e\u53ef\u89c1: \u6240\u6709\u4efb\u52a1\u8fdb\u5ea6\u516c\u5f00\u53ef\u89c1</li> <li>\u6301\u7eed\u6539\u8fdb: \u5b9a\u671f\u56de\u987e\u548c\u4f18\u5316\u6d41\u7a0b</li> <li>\u77e5\u8bc6\u5171\u4eab: \u65b0\u4eba\u9700\u8981\u719f\u6089\u8fd9\u5957\u673a\u5236</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#6","title":"6. \u957f\u671f\u76ee\u6807","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#61","title":"6.1 \u8986\u76d6\u7387\u76ee\u6807","text":"<ul> <li>\u6574\u4f53\u8986\u76d6\u7387: \u2265 80%\uff08\u5f53\u524d 66%\uff09</li> <li>\u5173\u952e\u8def\u5f84\u8986\u76d6\u7387: 100%</li> <li>\u5355\u5143\u6d4b\u8bd5\u8986\u76d6\u7387: \u2265 85%</li> <li>\u96c6\u6210\u6d4b\u8bd5\u8986\u76d6\u7387: \u2265 70%</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#62","title":"6.2 \u8d28\u91cf\u76ee\u6807","text":"<ul> <li>\u6d4b\u8bd5\u503a\u52a1: \u5b9a\u671f\u6e05\u7406\uff0c\u4fdd\u6301\u6280\u672f\u503a\u52a1\u53ef\u63a7</li> <li>\u81ea\u52a8\u5316\u7a0b\u5ea6: \u51cf\u5c11\u624b\u52a8\u6d4b\u8bd5\uff0c\u63d0\u9ad8\u81ea\u52a8\u5316\u8986\u76d6\u7387</li> <li>\u6d4b\u8bd5\u7a33\u5b9a\u6027: \u51cf\u5c11flaky\u6d4b\u8bd5\uff0c\u63d0\u9ad8\u53ef\u9760\u6027</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#63","title":"6.3 \u900f\u660e\u5ea6\u76ee\u6807","text":"<ul> <li>\u8fdb\u5ea6\u53ef\u89c6\u5316: Kanban \u770b\u677f\u5b9e\u65f6\u53cd\u6620\u8fdb\u5c55</li> <li>\u5386\u53f2\u53ef\u8ffd\u6eaf: \u5468\u62a5\u8bb0\u5f55\u5386\u53f2\u8d8b\u52bf</li> <li>\u95ee\u9898\u53ef\u8ffd\u8e2a: \u5931\u8d25\u62a5\u544a\u63d0\u4f9b\u8be6\u7ec6\u8bca\u65ad\u4fe1\u606f</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#64","title":"6.4 \u6587\u5316\u76ee\u6807","text":"<ul> <li>\u8d28\u91cf\u610f\u8bc6: \u56e2\u961f\u6210\u5458\u91cd\u89c6\u6d4b\u8bd5\u8d28\u91cf</li> <li>\u6301\u7eed\u6539\u8fdb: \u5f62\u6210\u6d4b\u8bd5\u4f18\u5316\u7684\u826f\u6027\u5faa\u73af</li> <li>\u89c4\u8303\u4e60\u60ef: \u517b\u6210\u6309\u6d41\u7a0b\u64cd\u4f5c\u7684\u4e60\u60ef</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#7","title":"7. \u7ef4\u62a4\u548c\u6f14\u8fdb","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#71","title":"7.1 \u5b9a\u671f\u56de\u987e","text":"<ul> <li>\u6bcf\u6708\u56de\u987e\u673a\u5236\u6267\u884c\u6548\u679c</li> <li>\u6536\u96c6\u56e2\u961f\u53cd\u9988\uff0c\u4f18\u5316\u6d41\u7a0b</li> <li>\u8c03\u6574\u76ee\u6807\u548c\u4f18\u5148\u7ea7</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#72","title":"7.2 \u5de5\u5177\u6539\u8fdb","text":"<ul> <li>\u6839\u636e\u9700\u8981\u4f18\u5316 CI \u6d41\u7a0b</li> <li>\u589e\u5f3a\u62a5\u544a\u7684\u53ef\u8bfb\u6027\u548c\u5b9e\u7528\u6027</li> <li>\u63a2\u7d22\u65b0\u7684\u6d4b\u8bd5\u4f18\u5316\u5de5\u5177</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#73","title":"7.3 \u6587\u6863\u66f4\u65b0","text":"<ul> <li>\u53ca\u65f6\u66f4\u65b0\u672c\u6307\u5357</li> <li>\u4fdd\u6301\u64cd\u4f5c\u8bf4\u660e\u7684\u51c6\u786e\u6027</li> <li>\u6dfb\u52a0\u65b0\u7684\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_26","title":"\ud83d\udd17 \u76f8\u5173\u6587\u6863\u94fe\u63a5","text":""},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_27","title":"\ud83d\udcda \u6d4b\u8bd5\u6838\u5fc3\u6587\u6863","text":"<ul> <li>API\u6d4b\u8bd5\u6307\u5357 - API\u63a5\u53e3\u6d4b\u8bd5\u65b9\u6cd5\u548c\u5de5\u5177</li> <li>\u96c6\u6210\u6d4b\u8bd5\u6587\u6863 - \u96c6\u6210\u6d4b\u8bd5\u7b56\u7565\u548c\u5b9e\u65bd</li> <li>\u6027\u80fd\u6d4b\u8bd5\u65b9\u6848 - \u6027\u80fd\u6d4b\u8bd5\u548c\u57fa\u51c6\u6d4b\u8bd5</li> <li>\u6d4b\u8bd5\u7528\u4f8b\u793a\u4f8b - \u6d4b\u8bd5\u7528\u4f8b\u7f16\u5199\u6307\u5357\u548c\u793a\u4f8b</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_28","title":"\ud83d\udee0\ufe0f \u5f00\u53d1\u548c\u8d28\u91cf","text":"<ul> <li>\u5f00\u53d1\u6307\u5357 - \u5f00\u53d1\u73af\u5883\u642d\u5efa\u548c\u7f16\u7801\u89c4\u8303</li> <li>\u7cfb\u7edf\u67b6\u6784\u6587\u6863 - \u5b8c\u6574\u7684\u7cfb\u7edf\u67b6\u6784\u8bbe\u8ba1</li> <li>CLAUDE.md - AI\u8f85\u52a9\u5f00\u53d1\u6307\u5bfc\u548c\u5de5\u4f5c\u6d41\u7a0b</li> <li>API\u6587\u6863 - REST API\u63a5\u53e3\u89c4\u8303</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_29","title":"\ud83d\udcca \u8986\u76d6\u7387\u548c\u76d1\u63a7","text":"<ul> <li>\u8986\u76d6\u7387\u4f18\u5316\u62a5\u544a - \u5b9e\u65f6\u8986\u76d6\u7387\u76d1\u63a7\u9762\u677f</li> <li>\u6d4b\u8bd5\u4f18\u5316\u5ba1\u8ba1 - \u6d4b\u8bd5\u4f18\u5316\u603b\u7ed3\u62a5\u544a</li> <li>\u76d1\u63a7\u7cfb\u7edf - \u76d1\u63a7\u7cfb\u7edf\u914d\u7f6e\u548c\u544a\u8b66\u8bbe\u7f6e</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#cicd","title":"\ud83d\ude80 \u90e8\u7f72\u548cCI/CD","text":"<ul> <li>\u751f\u4ea7\u90e8\u7f72\u6307\u5357 - \u751f\u4ea7\u73af\u5883\u90e8\u7f72\u548c\u8fd0\u7ef4</li> <li>CI Guardian\u7cfb\u7edf - CI/CD\u8d28\u91cf\u95e8\u7981\u7cfb\u7edf</li> <li>\u8fd0\u7ef4\u624b\u518c - \u8fd0\u7ef4\u64cd\u4f5c\u6307\u5357\u548c\u6545\u969c\u6392\u9664</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_30","title":"\ud83d\udcd6 \u9879\u76ee\u8d44\u6e90","text":"<ul> <li>\u9879\u76ee\u7d22\u5f15 - \u5b8c\u6574\u7684\u6587\u6863\u5bfc\u822a\u548c\u5165\u53e3</li> <li>\u5feb\u901f\u5f00\u59cb\u6307\u5357 - 5\u5206\u949f\u5feb\u901f\u4e0a\u624b\u6307\u5357</li> <li>\u672f\u8bed\u8868 - \u9879\u76ee\u4e13\u4e1a\u672f\u8bed\u548c\u6982\u5ff5\u5b9a\u4e49</li> </ul>"},{"location":"testing/TEST_IMPROVEMENT_GUIDE/#_31","title":"\ud83d\udccb \u7ba1\u7406\u548c\u62a5\u544a","text":"<ul> <li>\u6d4b\u8bd5\u4f18\u5316\u770b\u677f - \u6d4b\u8bd5\u4f18\u5316\u4efb\u52a1\u770b\u677f</li> <li>\u6d4b\u8bd5\u603b\u7ed3\u62a5\u544a - \u6d4b\u8bd5\u6267\u884c\u60c5\u51b5\u603b\u7ed3</li> <li>\u9879\u76ee\u8d21\u732e\u6307\u5357 - \u8d21\u732e\u6d41\u7a0b\u548c\u89c4\u8303</li> </ul> <p>\u6700\u540e\u66f4\u65b0: 2025-01-01</p> <p>\u672c\u6587\u6863\u662f\u6d4b\u8bd5\u6539\u8fdb\u673a\u5236\u7684\u6838\u5fc3\u6307\u5357\uff0c\u8bf7\u6240\u6709\u56e2\u961f\u6210\u5458\u4ed4\u7ec6\u9605\u8bfb\u5e76\u9075\u5faa\u6267\u884c\u3002\u5982\u6709\u7591\u95ee\uff0c\u8bf7\u53ca\u65f6\u63d0\u51fa\u8ba8\u8bba\u3002</p>"},{"location":"testing/ci_config/","title":"CI/CD\u914d\u7f6e\u6307\u5357","text":"<p>\u672c\u6587\u6863\u8be6\u7ec6\u8bf4\u660e\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u7684CI/CD\u914d\u7f6e\uff0c\u5305\u62ecGitHub Actions\u5de5\u4f5c\u6d41\u3001\u8986\u76d6\u7387\u76d1\u63a7\u3001\u81ea\u52a8\u5316\u68c0\u67e5\u7b49\u3002</p>"},{"location":"testing/ci_config/#_1","title":"\ud83d\udccb \u76ee\u5f55","text":"<ul> <li>GitHub Actions\u914d\u7f6e</li> <li>\u4e3b\u5de5\u4f5c\u6d41</li> <li>PR\u68c0\u67e5\u5de5\u4f5c\u6d41</li> <li>\u5b9a\u65f6\u4efb\u52a1\u5de5\u4f5c\u6d41</li> <li>\u90e8\u7f72\u5de5\u4f5c\u6d41</li> <li>\u8986\u76d6\u7387\u76d1\u63a7\u914d\u7f6e</li> <li>Codecov\u96c6\u6210</li> <li>\u8986\u76d6\u7387\u62a5\u544a\u751f\u6210</li> <li>\u8986\u76d6\u7387\u8d8b\u52bf\u5206\u6790</li> <li>\u81ea\u52a8\u5316\u68c0\u67e5\u914d\u7f6e</li> <li>\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5</li> <li>\u5b89\u5168\u68c0\u67e5</li> <li>\u6027\u80fd\u68c0\u67e5</li> <li>Docker\u914d\u7f6e</li> <li>CI\u955c\u50cf\u6784\u5efa</li> <li>\u6d4b\u8bd5\u73af\u5883\u914d\u7f6e</li> <li>\u591a\u73af\u5883\u90e8\u7f72</li> <li>\u901a\u77e5\u4e0e\u62a5\u544a</li> <li>Slack\u901a\u77e5</li> <li>\u90ae\u4ef6\u62a5\u544a</li> <li>\u4eea\u8868\u677f\u96c6\u6210</li> </ul>"},{"location":"testing/ci_config/#github-actions","title":"GitHub Actions\u914d\u7f6e","text":""},{"location":"testing/ci_config/#_2","title":"\u4e3b\u5de5\u4f5c\u6d41","text":"<pre><code># .github/workflows/main.yml\nname: Main CI Pipeline\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\nenv:\n  PYTHON_VERSION: '3.11'\n  NODE_VERSION: '18'\n  POSTGRES_VERSION: '15'\n  REDIS_VERSION: '7'\n\njobs:\n  test:\n    name: Test Suite\n    runs-on: ubuntu-latest\n\n    services:\n      postgres:\n        image: postgres:${{ env.POSTGRES_VERSION }}\n        env:\n          POSTGRES_PASSWORD: postgres\n          POSTGRES_DB: football_test\n        options: &gt;-\n          --health-cmd pg_isready\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n        ports:\n          - 5432:5432\n\n      redis:\n        image: redis:${{ env.REDIS_VERSION }}\n        options: &gt;-\n          --health-cmd \"redis-cli ping\"\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n        ports:\n          - 6379:6379\n\n    strategy:\n      matrix:\n        test-type: [unit, integration, e2e]\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    - name: Setup Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n        cache: 'pip'\n\n    - name: Install dependencies\n      run: |\n        python -m pip install --upgrade pip\n        pip install -r requirements.txt\n        pip install -r requirements-dev.txt\n\n    - name: Setup database\n      run: |\n        make db-init\n        make db-migrate\n\n    - name: Run tests\n      run: |\n        if [ \"${{ matrix.test-type }}\" == \"unit\" ]; then\n          make test-unit\n        elif [ \"${{ matrix.test-type }}\" == \"integration\" ]; then\n          make test-integration\n        else\n          make test-e2e\n        fi\n\n    - name: Generate coverage report\n      if: matrix.test-type == 'unit'\n      run: |\n        make coverage-report\n\n    - name: Upload coverage to Codecov\n      if: matrix.test-type == 'unit'\n      uses: codecov/codecov-action@v3\n      with:\n        file: ./coverage.xml\n        flags: unittests\n        name: codecov-umbrella\n        fail_ci_if_error: false\n\n  quality:\n    name: Code Quality\n    runs-on: ubuntu-latest\n    needs: test\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Setup Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n        cache: 'pip'\n\n    - name: Install dependencies\n      run: |\n        python -m pip install --upgrade pip\n        pip install -r requirements-dev.txt\n\n    - name: Run linting\n      run: make lint\n\n    - name: Run type checking\n      run: make type-check\n\n    - name: Run security check\n      run: make security-check\n\n    - name: Check formatting\n      run: make fmt-check\n\n  performance:\n    name: Performance Test\n    runs-on: ubuntu-latest\n    needs: test\n    if: github.ref == 'refs/heads/main'\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Setup Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: ${{ env.PYTHON_VERSION }}\n\n    - name: Install dependencies\n      run: |\n        python -m pip install --upgrade pip\n        pip install -r requirements.txt\n        pip install -r requirements-dev.txt\n\n    - name: Run performance benchmarks\n      run: make benchmark\n\n    - name: Upload performance results\n      uses: actions/upload-artifact@v3\n      with:\n        name: performance-results\n        path: performance-reports/\n\n  build:\n    name: Build and Deploy\n    runs-on: ubuntu-latest\n    needs: [test, quality, performance]\n    if: github.ref == 'refs/heads/main'\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up Docker Buildx\n      uses: docker/setup-buildx-action@v3\n\n    - name: Login to Docker Hub\n      uses: docker/login-action@v3\n      with:\n        username: ${{ secrets.DOCKER_USERNAME }}\n        password: ${{ secrets.DOCKER_PASSWORD }}\n\n    - name: Extract metadata\n      id: meta\n      uses: docker/metadata-action@v5\n      with:\n        images: football-prediction/api\n        tags: |\n          type=ref,event=branch\n          type=ref,event=pr\n          type=sha,prefix={{branch}}-\n          type=raw,value=latest,enable={{is_default_branch}}\n\n    - name: Build and push Docker image\n      uses: docker/build-push-action@v5\n      with:\n        context: .\n        file: Dockerfile\n        push: true\n        tags: ${{ steps.meta.outputs.tags }}\n        labels: ${{ steps.meta.outputs.labels }}\n        cache-from: type=gha\n        cache-to: type=gha,mode=max\n\n    - name: Deploy to staging\n      if: github.ref == 'refs/heads/main'\n      run: |\n        echo \"Deploying to staging environment...\"\n        # Add deployment commands here\n</code></pre>"},{"location":"testing/ci_config/#pr","title":"PR\u68c0\u67e5\u5de5\u4f5c\u6d41","text":"<pre><code># .github/workflows/pr-check.yml\nname: PR Check\n\non:\n  pull_request:\n    types: [opened, synchronize, reopened, labeled]\n\njobs:\n  pr-validation:\n    name: PR Validation\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    - name: Setup Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: '3.11'\n\n    - name: Install dependencies\n      run: |\n        python -m pip install --upgrade pip\n        pip install -r requirements.txt\n        pip install -r requirements-dev.txt\n\n    - name: Check PR description\n      uses: actions/github-script@v6\n      with:\n        script: |\n          const { data: pr } = await github.rest.pulls.get({\n            owner: context.repo.owner,\n            repo: context.repo.repo,\n            pull_number: context.issue.number\n          });\n\n          if (!pr.body || pr.body.length &lt; 50) {\n            core.setFailed('PR description must be at least 50 characters long');\n          }\n\n    - name: Check for breaking changes\n      run: |\n        if git diff --name-only HEAD~1 HEAD | grep -q \"BREAKING_CHANGE\"; then\n          echo \"::warning::Breaking change detected\"\n        fi\n\n    - name: Run quick tests\n      run: make test-quick\n\n    - name: Check coverage threshold\n      run: make coverage-gate\n\n    - name: Comment PR with results\n      uses: actions/github-script@v6\n      with:\n        script: |\n          const { data: pr } = await github.rest.pulls.get({\n            owner: context.repo.owner,\n            repo: context.repo.repo,\n            pull_number: context.issue.number\n          });\n\n          const comment = `\n          ## PR Check Results \u2705\n\n          - **Tests**: All tests passed\n          - **Coverage**: Above threshold\n          - **Quality**: All checks passed\n\n          This PR is ready for review! \ud83c\udf89\n          `;\n\n          await github.rest.issues.createComment({\n            owner: context.repo.owner,\n            repo: context.repo.repo,\n            issue_number: context.issue.number,\n            body: comment\n          });\n</code></pre>"},{"location":"testing/ci_config/#_3","title":"\u5b9a\u65f6\u4efb\u52a1\u5de5\u4f5c\u6d41","text":"<pre><code># .github/workflows/scheduled.yml\nname: Scheduled Tasks\n\non:\n  schedule:\n    - cron: '0 2 * * *'  # \u6bcf\u5929\u51cc\u66682\u70b9\n  workflow_dispatch:\n\njobs:\n  daily-maintenance:\n    name: Daily Maintenance\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Setup Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: '3.11'\n\n    - name: Install dependencies\n      run: |\n        python -m pip install --upgrade pip\n        pip install -r requirements.txt\n\n    - name: Run daily maintenance tasks\n      run: |\n        python scripts/daily_maintenance.py\n\n    - name: Generate daily report\n      run: |\n        python scripts/generate_daily_report.py\n\n    - name: Upload report\n      uses: actions/upload-artifact@v3\n      with:\n        name: daily-report\n        path: reports/daily/\n\n  weekly-cleanup:\n    name: Weekly Cleanup\n    runs-on: ubuntu-latest\n    if: github.event.schedule == '0 2 * * 0'  # \u6bcf\u5468\u65e5\u51cc\u66682\u70b9\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Setup Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: '3.11'\n\n    - name: Install dependencies\n      run: |\n        python -m pip install --upgrade pip\n        pip install -r requirements.txt\n\n    - name: Run weekly cleanup\n      run: |\n        python scripts/weekly_cleanup.py\n\n    - name: Cleanup old artifacts\n      uses: actions/github-script@v6\n      with:\n        script: |\n          // Delete artifacts older than 30 days\n          const artifacts = await github.rest.actions.listArtifactsForRepo({\n            owner: context.repo.owner,\n            repo: context.repo.repo,\n            per_page: 100\n          });\n\n          const thirtyDaysAgo = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\n\n          for (const artifact of artifacts.data.artifacts) {\n            const artifactDate = new Date(artifact.created_at);\n            if (artifactDate &lt; thirtyDaysAgo) {\n              await github.rest.actions.deleteArtifact({\n                owner: context.repo.owner,\n                repo: context.repo.repo,\n                artifact_id: artifact.id\n              });\n            }\n          }\n</code></pre>"},{"location":"testing/ci_config/#_4","title":"\u90e8\u7f72\u5de5\u4f5c\u6d41","text":"<pre><code># .github/workflows/deploy.yml\nname: Deploy\n\non:\n  push:\n    tags:\n      - 'v*'\n  workflow_dispatch:\n    inputs:\n      environment:\n        description: 'Target environment'\n        required: true\n        default: 'staging'\n        type: choice\n        options:\n        - staging\n        - production\n\njobs:\n  deploy:\n    name: Deploy to ${{ github.event.inputs.environment || 'production' }}\n    runs-on: ubuntu-latest\n    environment: ${{ github.event.inputs.environment || 'production' }}\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Setup Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: '3.11'\n\n    - name: Install deployment tools\n      run: |\n        python -m pip install --upgrade pip\n        pip install ansible boto3 docker\n\n    - name: Configure AWS credentials\n      if: github.event.inputs.environment == 'production'\n      uses: aws-actions/configure-aws-credentials@v2\n      with:\n        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}\n        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        aws-region: us-east-1\n\n    - name: Build application\n      run: |\n        make build\n\n    - name: Deploy to staging\n      if: github.event.inputs.environment == 'staging' || !github.event.inputs.environment\n      run: |\n        ansible-playbook -i ansible/staging.ini ansible/deploy.yml\n\n    - name: Deploy to production\n      if: github.event.inputs.environment == 'production'\n      run: |\n        ansible-playbook -i ansible/production.ini ansible/deploy.yml\n\n    - name: Run post-deployment tests\n      run: |\n        python scripts/post_deployment_tests.py\n\n    - name: Notify deployment\n      uses: 8398a7/action-slack@v3\n      with:\n        status: ${{ job.status }}\n        channel: '#deployment'\n        webhook_url: ${{ secrets.SLACK_WEBHOOK }}\n      env:\n        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK }}\n</code></pre>"},{"location":"testing/ci_config/#_5","title":"\u8986\u76d6\u7387\u76d1\u63a7\u914d\u7f6e","text":""},{"location":"testing/ci_config/#codecov","title":"Codecov\u96c6\u6210","text":"<pre><code># codecov.yml\ncoverage:\n  status:\n    project:\n      default:\n        target: 80%\n        threshold: 1%\n        base: auto\n    patch:\n      default:\n        target: 70%\n        threshold: 1%\n        base: auto\n\ncomment:\n  layout: \"reach,diff,flags,tree\"\n  behavior: default\n  require_changes: false\n\nignore:\n  - \"tests/\"\n  - \"src/migrations/\"\n  - \"scripts/\"\n  - \"docs/\"\n</code></pre>"},{"location":"testing/ci_config/#_6","title":"\u8986\u76d6\u7387\u62a5\u544a\u751f\u6210","text":"<pre><code># scripts/generate_coverage_report.py\nimport json\nimport os\nimport subprocess\nfrom datetime import datetime\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\nclass CoverageReportGenerator:\n    \"\"\"\u8986\u76d6\u7387\u62a5\u544a\u751f\u6210\u5668\"\"\"\n\n    def __init__(self):\n        self.coverage_file = \"coverage.json\"\n        self.history_file = \"coverage_history.json\"\n        self.output_dir = \"docs/coverage_reports\"\n\n    def generate_coverage_data(self):\n        \"\"\"\u751f\u6210\u8986\u76d6\u7387\u6570\u636e\"\"\"\n        # \u8fd0\u884c\u6d4b\u8bd5\u5e76\u751f\u6210\u8986\u76d6\u7387\u6570\u636e\n        result = subprocess.run([\n            \"pytest\", \"--cov=src\", \"--cov-report=json\"\n        ], capture_output=True, text=True)\n\n        if result.returncode != 0:\n            raise Exception(f\"Coverage generation failed: {result.stderr}\")\n\n        # \u8bfb\u53d6\u8986\u76d6\u7387\u6570\u636e\n        with open(self.coverage_file, 'r') as f:\n            coverage_data = json.load(f)\n\n        return coverage_data\n\n    def analyze_coverage_by_module(self, coverage_data):\n        \"\"\"\u5206\u6790\u6a21\u5757\u8986\u76d6\u7387\"\"\"\n        module_coverage = {}\n        files = coverage_data.get('files', {})\n\n        for file_path, file_data in files.items():\n            if file_path.startswith('src/'):\n                module = file_path.split('/')[1]\n                if module not in module_coverage:\n                    module_coverage[module] = []\n\n                summary = file_data.get('summary', {})\n                line_coverage = summary.get('percent_covered', 0)\n                module_coverage[module].append(line_coverage)\n\n        # \u8ba1\u7b97\u6a21\u5757\u5e73\u5747\u8986\u76d6\u7387\n        module_avg = {}\n        for module, coverages in module_coverage.items():\n            module_avg[module] = sum(coverages) / len(coverages)\n\n        return module_avg\n\n    def generate_html_report(self, coverage_data):\n        \"\"\"\u751f\u6210HTML\u62a5\u544a\"\"\"\n        # \u521b\u5efa\u8f93\u51fa\u76ee\u5f55\n        os.makedirs(self.output_dir, exist_ok=True)\n\n        # \u751f\u6210HTML\u8986\u76d6\u7387\u62a5\u544a\n        subprocess.run([\n            \"pytest\", \"--cov=src\", \"--cov-report=html\"\n        ])\n\n        # \u79fb\u52a8HTML\u62a5\u544a\u5230\u6307\u5b9a\u76ee\u5f55\n        import shutil\n        if os.path.exists(\"htmlcov\"):\n            shutil.move(\"htmlcov\", f\"{self.output_dir}/html\")\n\n    def generate_visualization(self, coverage_data):\n        \"\"\"\u751f\u6210\u53ef\u89c6\u5316\u56fe\u8868\"\"\"\n        module_coverage = self.analyze_coverage_by_module(coverage_data)\n\n        # \u521b\u5efa\u67f1\u72b6\u56fe\n        fig, ax = plt.subplots(figsize=(12, 6))\n\n        modules = list(module_coverage.keys())\n        coverages = list(module_coverage.values())\n\n        bars = ax.bar(modules, coverages)\n\n        # \u8bbe\u7f6e\u989c\u8272\n        for bar, coverage in zip(bars, coverages):\n            if coverage &gt;= 80:\n                bar.set_color('green')\n            elif coverage &gt;= 60:\n                bar.set_color('yellow')\n            else:\n                bar.set_color('red')\n\n        # \u6dfb\u52a0\u6807\u7b7e\u548c\u6807\u9898\n        ax.set_xlabel('Module')\n        ax.set_ylabel('Coverage %')\n        ax.set_title('Test Coverage by Module')\n        ax.set_ylim(0, 100)\n\n        # \u6dfb\u52a0\u6570\u503c\u6807\u7b7e\n        for bar, coverage in zip(bars, coverages):\n            ax.text(bar.get_x() + bar.get_width()/2, bar.get_height() + 1,\n                   f'{coverage:.1f}%', ha='center', va='bottom')\n\n        # \u4fdd\u5b58\u56fe\u8868\n        plt.tight_layout()\n        plt.savefig(f'{self.output_dir}/coverage_by_module.png')\n        plt.close()\n\n    def generate_trend_analysis(self):\n        \"\"\"\u751f\u6210\u8d8b\u52bf\u5206\u6790\"\"\"\n        # \u52a0\u8f7d\u5386\u53f2\u6570\u636e\n        if os.path.exists(self.history_file):\n            with open(self.history_file, 'r') as f:\n                history = json.load(f)\n        else:\n            history = []\n\n        # \u751f\u6210\u8d8b\u52bf\u56fe\n        if len(history) &gt; 1:\n            df = pd.DataFrame(history)\n            df['date'] = pd.to_datetime(df['timestamp'])\n\n            fig, ax = plt.subplots(figsize=(12, 6))\n            ax.plot(df['date'], df['total_coverage'], marker='o', linewidth=2)\n            ax.axhline(y=80, color='r', linestyle='--', label='Target (80%)')\n            ax.axhline(y=85, color='g', linestyle='--', label='Goal (85%)')\n\n            ax.set_xlabel('Date')\n            ax.set_ylabel('Coverage %')\n            ax.set_title('Test Coverage Trend')\n            ax.legend()\n            ax.grid(True, alpha=0.3)\n\n            plt.tight_layout()\n            plt.savefig(f'{self.output_dir}/coverage_trend.png')\n            plt.close()\n\n    def generate_summary_report(self, coverage_data):\n        \"\"\"\u751f\u6210\u603b\u7ed3\u62a5\u544a\"\"\"\n        total_coverage = coverage_data.get('totals', {}).get('percent_covered', 0)\n        module_coverage = self.analyze_coverage_by_module(coverage_data)\n\n        # \u751f\u6210Markdown\u62a5\u544a\n        report = f\"\"\"# Coverage Report\n\nGenerated on: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n## Summary\n- **Total Coverage**: {total_coverage:.1f}%\n- **Files Covered**: {len(coverage_data.get('files', {}))}\n- **Lines of Code**: {coverage_data.get('totals', {}).get('num_statements', 0)}\n\n## Module Coverage\n| Module | Coverage | Status |\n|--------|----------|---------|\n\"\"\"\n\n        for module, coverage in sorted(module_coverage.items()):\n            status = \"\u2705 Excellent\" if coverage &gt;= 80 else \"\u26a0\ufe0f Needs Work\" if coverage &gt;= 60 else \"\u274c Poor\"\n            report += f\"| {module} | {coverage:.1f}% | {status} |\\n\"\n\n        report += f\"\"\"\n## Recommendations\n\"\"\"\n\n        if total_coverage &lt; 80:\n            report += \"- \ud83c\udfaf Focus on increasing overall coverage to 80%+\\n\"\n\n        for module, coverage in module_coverage.items():\n            if coverage &lt; 60:\n                report += f\"- \ud83d\udcc8 Module {module} needs immediate attention ({coverage:.1f}%)\\n\"\n            elif coverage &lt; 80:\n                report += f\"- \ud83d\udd27 Module {module} could be improved ({coverage:.1f}%)\\n\"\n\n        # \u4fdd\u5b58\u62a5\u544a\n        with open(f'{self.output_dir}/summary.md', 'w') as f:\n            f.write(report)\n\n    def run_full_report(self):\n        \"\"\"\u8fd0\u884c\u5b8c\u6574\u62a5\u544a\u751f\u6210\"\"\"\n        print(\"Generating coverage report...\")\n\n        # \u751f\u6210\u8986\u76d6\u7387\u6570\u636e\n        coverage_data = self.generate_coverage_data()\n\n        # \u751f\u6210\u5404\u79cd\u62a5\u544a\n        self.generate_html_report(coverage_data)\n        self.generate_visualization(coverage_data)\n        self.generate_trend_analysis()\n        self.generate_summary_report(coverage_data)\n\n        print(f\"Coverage report generated in {self.output_dir}/\")\n\nif __name__ == \"__main__\":\n    generator = CoverageReportGenerator()\n    generator.run_full_report()\n</code></pre>"},{"location":"testing/ci_config/#_7","title":"\u8986\u76d6\u7387\u8d8b\u52bf\u5206\u6790","text":"<pre><code># scripts/coverage_monitor.py\nimport json\nimport os\nimport sqlite3\nfrom datetime import datetime, timedelta\nimport matplotlib.pyplot as plt\nimport pandas as pd\nfrom typing import Dict, List, Any\n\nclass CoverageMonitor:\n    \"\"\"\u8986\u76d6\u7387\u76d1\u63a7\u5de5\u5177\"\"\"\n\n    def __init__(self, db_path=\"coverage_monitoring.db\"):\n        self.db_path = db_path\n        self.init_database()\n\n    def init_database(self):\n        \"\"\"\u521d\u59cb\u5316\u6570\u636e\u5e93\"\"\"\n        conn = sqlite3.connect(self.db_path)\n        cursor = conn.cursor()\n\n        cursor.execute('''\n            CREATE TABLE IF NOT EXISTS coverage_data (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n                git_sha TEXT,\n                branch TEXT,\n                total_coverage REAL,\n                module_coverage TEXT,\n                test_count INTEGER,\n                execution_time REAL\n            )\n        ''')\n\n        cursor.execute('''\n            CREATE TABLE IF NOT EXISTS coverage_trends (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                date DATE,\n                avg_coverage REAL,\n                min_coverage REAL,\n                max_coverage REAL,\n                trend_direction TEXT\n            )\n        ''')\n\n        conn.commit()\n        conn.close()\n\n    def record_coverage(self, coverage_data: Dict[str, Any], git_sha: str = None, branch: str = None):\n        \"\"\"\u8bb0\u5f55\u8986\u76d6\u7387\u6570\u636e\"\"\"\n        total_coverage = coverage_data.get('totals', {}).get('percent_covered', 0)\n        module_coverage = json.dumps(self.analyze_module_coverage(coverage_data))\n\n        conn = sqlite3.connect(self.db_path)\n        cursor = conn.cursor()\n\n        cursor.execute('''\n            INSERT INTO coverage_data (git_sha, branch, total_coverage, module_coverage)\n            VALUES (?, ?, ?, ?)\n        ''', (git_sha, branch, total_coverage, module_coverage))\n\n        conn.commit()\n        conn.close()\n\n    def analyze_module_coverage(self, coverage_data: Dict[str, Any]) -&gt; Dict[str, float]:\n        \"\"\"\u5206\u6790\u6a21\u5757\u8986\u76d6\u7387\"\"\"\n        module_coverage = {}\n        files = coverage_data.get('files', {})\n\n        for file_path, file_data in files.items():\n            if file_path.startswith('src/'):\n                module = file_path.split('/')[1]\n                if module not in module_coverage:\n                    module_coverage[module] = []\n\n                summary = file_data.get('summary', {})\n                line_coverage = summary.get('percent_covered', 0)\n                module_coverage[module].append(line_coverage)\n\n        # \u8ba1\u7b97\u6a21\u5757\u5e73\u5747\u8986\u76d6\u7387\n        return {module: sum(coverages) / len(coverages)\n                for module, coverages in module_coverage.items()}\n\n    def get_coverage_trend(self, days: int = 30) -&gt; pd.DataFrame:\n        \"\"\"\u83b7\u53d6\u8986\u76d6\u7387\u8d8b\u52bf\"\"\"\n        conn = sqlite3.connect(self.db_path)\n\n        query = '''\n            SELECT timestamp, total_coverage, branch\n            FROM coverage_data\n            WHERE timestamp &gt;= datetime('now', '-{} days')\n            ORDER BY timestamp\n        '''.format(days)\n\n        df = pd.read_sql_query(query, conn)\n        conn.close()\n\n        return df\n\n    def generate_trend_chart(self, days: int = 30):\n        \"\"\"\u751f\u6210\u8d8b\u52bf\u56fe\"\"\"\n        df = self.get_coverage_trend(days)\n\n        if df.empty:\n            print(\"No coverage data available for trend analysis\")\n            return\n\n        fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(12, 10))\n\n        # \u6574\u4f53\u8d8b\u52bf\n        df['timestamp'] = pd.to_datetime(df['timestamp'])\n        ax1.plot(df['timestamp'], df['total_coverage'], marker='o', linewidth=2)\n        ax1.axhline(y=80, color='r', linestyle='--', label='Target (80%)')\n        ax1.axhline(y=85, color='g', linestyle='--', label='Goal (85%)')\n        ax1.set_xlabel('Date')\n        ax1.set_ylabel('Coverage %')\n        ax1.set_title('Overall Coverage Trend')\n        ax1.legend()\n        ax1.grid(True, alpha=0.3)\n\n        # \u5206\u652f\u5bf9\u6bd4\n        if 'branch' in df.columns and df['branch'].nunique() &gt; 1:\n            for branch in df['branch'].unique():\n                branch_data = df[df['branch'] == branch]\n                ax2.plot(branch_data['timestamp'], branch_data['total_coverage'],\n                        marker='o', label=branch, linewidth=2)\n\n            ax2.axhline(y=80, color='r', linestyle='--', alpha=0.5)\n            ax2.axhline(y=85, color='g', linestyle='--', alpha=0.5)\n            ax2.set_xlabel('Date')\n            ax2.set_ylabel('Coverage %')\n            ax2.set_title('Coverage by Branch')\n            ax2.legend()\n            ax2.grid(True, alpha=0.3)\n        else:\n            ax2.remove()\n\n        plt.tight_layout()\n        plt.savefig('docs/coverage_monitoring/trend_analysis.png')\n        plt.close()\n\n    def detect_coverage_regression(self, threshold: float = 2.0) -&gt; List[Dict[str, Any]]:\n        \"\"\"\u68c0\u6d4b\u8986\u76d6\u7387\u56de\u5f52\"\"\"\n        conn = sqlite3.connect(self.db_path)\n        cursor = conn.cursor()\n\n        # \u83b7\u53d6\u6700\u8fd1\u4e24\u6b21\u7684\u8986\u76d6\u7387\u6570\u636e\n        cursor.execute('''\n            SELECT timestamp, total_coverage, git_sha\n            FROM coverage_data\n            ORDER BY timestamp DESC\n            LIMIT 2\n        ''')\n\n        results = cursor.fetchall()\n        conn.close()\n\n        regressions = []\n\n        if len(results) &gt;= 2:\n            current_coverage = results[0][1]\n            previous_coverage = results[1][1]\n\n            if previous_coverage - current_coverage &gt; threshold:\n                regressions.append({\n                    'timestamp': results[0][0],\n                    'current_coverage': current_coverage,\n                    'previous_coverage': previous_coverage,\n                    'drop': previous_coverage - current_coverage,\n                    'git_sha': results[0][2]\n                })\n\n        return regressions\n\n    def generate_weekly_report(self):\n        \"\"\"\u751f\u6210\u5468\u62a5\u544a\"\"\"\n        conn = sqlite3.connect(self.db_path)\n        cursor = conn.cursor()\n\n        # \u83b7\u53d6\u672c\u5468\u6570\u636e\n        cursor.execute('''\n            SELECT AVG(total_coverage), MIN(total_coverage), MAX(total_coverage)\n            FROM coverage_data\n            WHERE timestamp &gt;= datetime('now', '-7 days')\n        ''')\n\n        week_stats = cursor.fetchone()\n        avg_coverage, min_coverage, max_coverage = week_stats\n\n        # \u83b7\u53d6\u4e0a\u5468\u6570\u636e\u5bf9\u6bd4\n        cursor.execute('''\n            SELECT AVG(total_coverage)\n            FROM coverage_data\n            WHERE timestamp &gt;= datetime('now', '-14 days')\n            AND timestamp &lt; datetime('now', '-7 days')\n        ''')\n\n        last_week_avg = cursor.fetchone()[0]\n\n        conn.close()\n\n        # \u751f\u6210\u62a5\u544a\n        report = f\"\"\"\n# Weekly Coverage Report\n\n## This Week's Performance\n- **Average Coverage**: {avg_coverage:.1f}%\n- **Minimum Coverage**: {min_coverage:.1f}%\n- **Maximum Coverage**: {max_coverage:.1f}%\n\n## Comparison with Last Week\n- **Last Week Average**: {last_week_avg:.1f}%\n- **Change**: {avg_coverage - last_week_avg:+.1f}%\n\n## Module Performance\n\"\"\"\n\n        # \u6dfb\u52a0\u6a21\u5757\u6027\u80fd\u5206\u6790\n        conn = sqlite3.connect(self.db_path)\n        cursor = conn.cursor()\n\n        cursor.execute('''\n            SELECT module_coverage\n            FROM coverage_data\n            WHERE timestamp &gt;= datetime('now', '-7 days')\n        ''')\n\n        module_data_list = cursor.fetchall()\n        conn.close()\n\n        # \u5206\u6790\u6a21\u5757\u6027\u80fd\n        if module_data_list:\n            all_modules = {}\n            for row in module_data_list:\n                module_coverage = json.loads(row[0])\n                for module, coverage in module_coverage.items():\n                    if module not in all_modules:\n                        all_modules[module] = []\n                    all_modules[module].append(coverage)\n\n            for module, coverages in all_modules.items():\n                avg = sum(coverages) / len(coverages)\n                status = \"\u2705\" if avg &gt;= 80 else \"\u26a0\ufe0f\" if avg &gt;= 60 else \"\u274c\"\n                report += f\"- {status} {module}: {avg:.1f}%\\n\"\n\n        return report\n\n    def run_monitoring(self):\n        \"\"\"\u8fd0\u884c\u76d1\u63a7\"\"\"\n        print(\"Running coverage monitoring...\")\n\n        # \u68c0\u67e5\u8986\u76d6\u7387\u56de\u5f52\n        regressions = self.detect_coverage_regression()\n\n        if regressions:\n            print(\"\u26a0\ufe0f Coverage regression detected:\")\n            for regression in regressions:\n                print(f\"  - Drop of {regression['drop']:.1f}% detected\")\n                print(f\"  - Current: {regression['current_coverage']:.1f}%\")\n                print(f\"  - Previous: {regression['previous_coverage']:.1f}%\")\n                print(f\"  - Commit: {regression['git_sha']}\")\n\n        # \u751f\u6210\u8d8b\u52bf\u56fe\n        self.generate_trend_chart()\n\n        # \u751f\u6210\u5468\u62a5\u544a\n        weekly_report = self.generate_weekly_report()\n\n        # \u4fdd\u5b58\u62a5\u544a\n        with open('docs/coverage_monitoring/weekly_report.md', 'w') as f:\n            f.write(weekly_report)\n\n        print(\"Monitoring completed. Reports saved to docs/coverage_monitoring/\")\n</code></pre>"},{"location":"testing/ci_config/#_8","title":"\u81ea\u52a8\u5316\u68c0\u67e5\u914d\u7f6e","text":""},{"location":"testing/ci_config/#_9","title":"\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5","text":"<pre><code># scripts/quality_checks.py\nimport subprocess\nimport json\nimport os\nfrom typing import Dict, List, Any\nfrom datetime import datetime\n\nclass QualityChecker:\n    \"\"\"\u4ee3\u7801\u8d28\u91cf\u68c0\u67e5\u5668\"\"\"\n\n    def __init__(self):\n        self.results = {\n            'timestamp': datetime.now().isoformat(),\n            'checks': {}\n        }\n\n    def run_flake8_check(self) -&gt; Dict[str, Any]:\n        \"\"\"\u8fd0\u884cflake8\u68c0\u67e5\"\"\"\n        print(\"Running flake8 checks...\")\n\n        try:\n            result = subprocess.run([\n                'flake8', 'src/', '--format=json', '--statistics'\n            ], capture_output=True, text=True)\n\n            if result.stdout:\n                issues = json.loads(result.stdout)\n                return {\n                    'status': 'failed',\n                    'issues': issues,\n                    'total_issues': len(issues)\n                }\n            else:\n                return {\n                    'status': 'passed',\n                    'issues': [],\n                    'total_issues': 0\n                }\n\n        except Exception as e:\n            return {\n                'status': 'error',\n                'error': str(e)\n            }\n\n    def run_mypy_check(self) -&gt; Dict[str, Any]:\n        \"\"\"\u8fd0\u884cmypy\u7c7b\u578b\u68c0\u67e5\"\"\"\n        print(\"Running mypy checks...\")\n\n        try:\n            result = subprocess.run([\n                'mypy', 'src/', '--show-error-codes', '--no-error-summary'\n            ], capture_output=True, text=True)\n\n            if result.returncode == 0:\n                return {\n                    'status': 'passed',\n                    'issues': []\n                }\n            else:\n                # \u89e3\u6790mypy\u8f93\u51fa\n                issues = []\n                for line in result.stdout.split('\\n'):\n                    if line.strip():\n                        issues.append(line.strip())\n\n                return {\n                    'status': 'failed',\n                    'issues': issues,\n                    'total_issues': len(issues)\n                }\n\n        except Exception as e:\n            return {\n                'status': 'error',\n                'error': str(e)\n            }\n\n    def run_bandit_check(self) -&gt; Dict[str, Any]:\n        \"\"\"\u8fd0\u884cbandit\u5b89\u5168\u68c0\u67e5\"\"\"\n        print(\"Running bandit security checks...\")\n\n        try:\n            result = subprocess.run([\n                'bandit', '-r', 'src/', '-f', 'json'\n            ], capture_output=True, text=True)\n\n            if result.stdout:\n                report = json.loads(result.stdout)\n                return {\n                    'status': 'passed' if report['metrics']['_totals']['severity.UNDEFINED'] == 0 else 'failed',\n                    'issues': report.get('results', []),\n                    'metrics': report.get('metrics', {})\n                }\n            else:\n                return {\n                    'status': 'passed',\n                    'issues': [],\n                    'metrics': {}\n                }\n\n        except Exception as e:\n            return {\n                'status': 'error',\n                'error': str(e)\n            }\n\n    def run_black_check(self) -&gt; Dict[str, Any]:\n        \"\"\"\u8fd0\u884cblack\u683c\u5f0f\u68c0\u67e5\"\"\"\n        print(\"Running black formatting checks...\")\n\n        try:\n            result = subprocess.run([\n                'black', '--check', '--diff', 'src/'\n            ], capture_output=True, text=True)\n\n            if result.returncode == 0:\n                return {\n                    'status': 'passed',\n                    'issues': []\n                }\n            else:\n                return {\n                    'status': 'failed',\n                    'issues': [result.stdout],\n                    'needs_formatting': True\n                }\n\n        except Exception as e:\n            return {\n                'status': 'error',\n                'error': str(e)\n            }\n\n    def run_safety_check(self) -&gt; Dict[str, Any]:\n        \"\"\"\u8fd0\u884csafety\u4f9d\u8d56\u68c0\u67e5\"\"\"\n        print(\"Running safety dependency checks...\")\n\n        try:\n            result = subprocess.run([\n                'safety', 'check', '--json'\n            ], capture_output=True, text=True)\n\n            if result.stdout:\n                report = json.loads(result.stdout)\n                return {\n                    'status': 'passed' if len(report) == 0 else 'failed',\n                    'vulnerabilities': report\n                }\n            else:\n                return {\n                    'status': 'passed',\n                    'vulnerabilities': []\n                }\n\n        except Exception as e:\n            return {\n                'status': 'error',\n                'error': str(e)\n            }\n\n    def run_complexity_check(self) -&gt; Dict[str, Any]:\n        \"\"\"\u8fd0\u884c\u590d\u6742\u5ea6\u68c0\u67e5\"\"\"\n        print(\"Running complexity checks...\")\n\n        try:\n            result = subprocess.run([\n                'radon', 'cc', 'src/', '-a', '-nb'\n            ], capture_output=True, text=True)\n\n            if result.stdout:\n                # \u89e3\u6790radon\u8f93\u51fa\n                lines = result.stdout.split('\\n')\n                complexity_data = []\n\n                for line in lines:\n                    if line.strip() and not line.startswith('_'):\n                        complexity_data.append(line.strip())\n\n                return {\n                    'status': 'passed',\n                    'complexity_data': complexity_data\n                }\n            else:\n                return {\n                    'status': 'passed',\n                    'complexity_data': []\n                }\n\n        except Exception as e:\n            return {\n                'status': 'error',\n                'error': str(e)\n            }\n\n    def run_all_checks(self) -&gt; Dict[str, Any]:\n        \"\"\"\u8fd0\u884c\u6240\u6709\u8d28\u91cf\u68c0\u67e5\"\"\"\n        print(\"Running all quality checks...\")\n\n        # \u8fd0\u884c\u5404\u9879\u68c0\u67e5\n        self.results['checks']['flake8'] = self.run_flake8_check()\n        self.results['checks']['mypy'] = self.run_mypy_check()\n        self.results['checks']['bandit'] = self.run_bandit_check()\n        self.results['checks']['black'] = self.run_black_check()\n        self.results['checks']['safety'] = self.run_safety_check()\n        self.results['checks']['complexity'] = self.run_complexity_check()\n\n        # \u8ba1\u7b97\u603b\u4f53\u72b6\u6001\n        all_passed = all(\n            check.get('status') == 'passed'\n            for check in self.results['checks'].values()\n        )\n\n        self.results['overall_status'] = 'passed' if all_passed else 'failed'\n\n        return self.results\n\n    def generate_report(self) -&gt; str:\n        \"\"\"\u751f\u6210\u8d28\u91cf\u62a5\u544a\"\"\"\n        report = f\"\"\"\n# Code Quality Report\n\nGenerated on: {self.results['timestamp']}\n\n## Overall Status: {self.results['overall_status'].upper()}\n\n## Detailed Results\n\"\"\"\n\n        for check_name, check_result in self.results['checks'].items():\n            status = check_result.get('status', 'unknown')\n            report += f\"\\n### {check_name.upper()}: {status.upper()}\\n\"\n\n            if status == 'failed':\n                if check_name == 'flake8':\n                    report += f\"- Total issues: {check_result.get('total_issues', 0)}\\n\"\n                elif check_name == 'mypy':\n                    report += f\"- Type errors: {check_result.get('total_issues', 0)}\\n\"\n                elif check_name == 'bandit':\n                    report += f\"- Security issues: {len(check_result.get('issues', []))}\\n\"\n                elif check_name == 'black':\n                    report += \"- Code needs formatting\\n\"\n                elif check_name == 'safety':\n                    report += f\"- Vulnerabilities found: {len(check_result.get('vulnerabilities', []))}\\n\"\n\n        return report\n\n    def save_results(self, output_dir: str = \"quality_reports\"):\n        \"\"\"\u4fdd\u5b58\u68c0\u67e5\u7ed3\u679c\"\"\"\n        os.makedirs(output_dir, exist_ok=True)\n\n        # \u4fdd\u5b58\u8be6\u7ec6\u7ed3\u679c\n        with open(f\"{output_dir}/quality_check_results.json\", 'w') as f:\n            json.dump(self.results, f, indent=2)\n\n        # \u751f\u6210\u5e76\u4fdd\u5b58\u62a5\u544a\n        report = self.generate_report()\n        with open(f\"{output_dir}/quality_report.md\", 'w') as f:\n            f.write(report)\n\n        print(f\"Quality check results saved to {output_dir}/\")\n\nif __name__ == \"__main__\":\n    checker = QualityChecker()\n    results = checker.run_all_checks()\n    checker.save_results()\n\n    # \u8f93\u51fa\u7b80\u8981\u7ed3\u679c\n    print(f\"\\nQuality Check Results: {results['overall_status'].upper()}\")\n    for check_name, check_result in results['checks'].items():\n        print(f\"  {check_name}: {check_result.get('status', 'unknown').upper()}\")\n</code></pre>"},{"location":"testing/ci_config/#_10","title":"\u5b89\u5168\u68c0\u67e5","text":"<pre><code># .github/workflows/security.yml\nname: Security Scan\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n  schedule:\n    - cron: '0 3 * * 1'  # \u6bcf\u5468\u4e00\u51cc\u66683\u70b9\n\njobs:\n  security-scan:\n    name: Security Scan\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Setup Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: '3.11'\n\n    - name: Install dependencies\n      run: |\n        python -m pip install --upgrade pip\n        pip install bandit safety\n\n    - name: Run Bandit Security Scan\n      run: |\n        bandit -r src/ -f json -o bandit-report.json\n      continue-on-error: true\n\n    - name: Run Safety Dependency Check\n      run: |\n        safety check --json --output safety-report.json\n      continue-on-error: true\n\n    - name: Run Trivy Vulnerability Scan\n      uses: aquasecurity/trivy-action@master\n      with:\n        scan-type: 'fs'\n        scan-ref: '.'\n        format: 'sarif'\n        output: 'trivy-results.sarif'\n\n    - name: Upload Security Reports\n      uses: actions/upload-artifact@v3\n      with:\n        name: security-reports\n        path: |\n          bandit-report.json\n          safety-report.json\n          trivy-results.sarif\n\n    - name: Comment on PR\n      if: github.event_name == 'pull_request'\n      uses: actions/github-script@v6\n      with:\n        script: |\n          const fs = require('fs');\n\n          // \u8bfb\u53d6\u5b89\u5168\u62a5\u544a\n          let banditReport = {};\n          let safetyReport = {};\n\n          try {\n            banditReport = JSON.parse(fs.readFileSync('bandit-report.json', 'utf8'));\n          } catch (e) {\n            console.log('No bandit report found');\n          }\n\n          try {\n            safetyReport = JSON.parse(fs.readFileSync('safety-report.json', 'utf8'));\n          } catch (e) {\n            console.log('No safety report found');\n          }\n\n          // \u751f\u6210\u8bc4\u8bba\n          let comment = '## Security Scan Results \ud83d\udd12\\n\\n';\n\n          if (banditReport.errors &amp;&amp; banditReport.errors.length &gt; 0) {\n            comment += '\u26a0\ufe0f **Bandit found issues:**\\n';\n            banditReport.errors.forEach(error =&gt; {\n              comment += `- ${error.test_name}: ${error.text}\\n`;\n            });\n          } else {\n            comment += '\u2705 **Bandit scan passed**\\n';\n          }\n\n          if (safetyReport.length &gt; 0) {\n            comment += '\u26a0\ufe0f **Safety found vulnerabilities:**\\n';\n            safetyReport.forEach(vuln =&gt; {\n              comment += `- ${vuln.id}: ${vuln.advisory}\\n`;\n            });\n          } else {\n            comment += '\u2705 **Safety scan passed**\\n';\n          }\n\n          comment += '\\n---\\n';\n          comment += 'Security scan completed successfully! \ud83c\udf89';\n\n          // \u521b\u5efa\u8bc4\u8bba\n          await github.rest.issues.createComment({\n            owner: context.repo.owner,\n            repo: context.repo.repo,\n            issue_number: context.issue.number,\n            body: comment\n          });\n</code></pre>"},{"location":"testing/ci_config/#docker","title":"Docker\u914d\u7f6e","text":""},{"location":"testing/ci_config/#ci","title":"CI\u955c\u50cf\u6784\u5efa","text":"<pre><code># Dockerfile.ci\nFROM python:3.11-slim as ci-base\n\n# \u5b89\u88c5\u7cfb\u7edf\u4f9d\u8d56\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    git \\\n    curl \\\n    build-essential \\\n    libpq-dev \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# \u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\nWORKDIR /app\n\n# \u590d\u5236\u4f9d\u8d56\u6587\u4ef6\nCOPY requirements.txt requirements-dev.txt ./\n\n# \u5b89\u88c5Python\u4f9d\u8d56\nRUN pip install --no-cache-dir -r requirements.txt\nRUN pip install --no-cache-dir -r requirements-dev.txt\n\n# \u590d\u5236\u6d4b\u8bd5\u914d\u7f6e\nCOPY pytest.ini .coveragerc mypy.ini ./\n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nENV PYTHONPATH=/app\nENV PYTEST_ADDOPTS=\"--maxfail=1 --tb=short\"\n\n# \u9ed8\u8ba4\u547d\u4ee4\nCMD [\"pytest\"]\n\n# \u6d4b\u8bd5\u9636\u6bb5\u955c\u50cf\nFROM ci-base as test\n\n# \u590d\u5236\u6e90\u4ee3\u7801\nCOPY src/ ./src/\nCOPY tests/ ./tests/\n\n# \u8fd0\u884c\u6d4b\u8bd5\nCMD [\"pytest\", \"tests/\", \"--cov=src\", \"--cov-report=xml\"]\n\n# \u8d28\u91cf\u68c0\u67e5\u9636\u6bb5\u955c\u50cf\nFROM ci-base as quality\n\n# \u590d\u5236\u6e90\u4ee3\u7801\nCOPY src/ ./src/\n\n# \u8fd0\u884c\u8d28\u91cf\u68c0\u67e5\nCMD [\"sh\", \"-c\", \"flake8 src/ &amp;&amp; mypy src/ &amp;&amp; black --check src/\"]\n\n# \u6784\u5efa\u9636\u6bb5\u955c\u50cf\nFROM python:3.11-slim as build\n\n# \u5b89\u88c5\u6784\u5efa\u4f9d\u8d56\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    build-essential \\\n    libpq-dev \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\nWORKDIR /app\n\n# \u590d\u5236\u4f9d\u8d56\u6587\u4ef6\nCOPY requirements.txt ./\n\n# \u5b89\u88c5\u751f\u4ea7\u4f9d\u8d56\nRUN pip install --no-cache-dir -r requirements.txt\n\n# \u590d\u5236\u6e90\u4ee3\u7801\nCOPY src/ ./src/\n\n# \u751f\u4ea7\u955c\u50cf\nFROM python:3.11-slim\n\n# \u5b89\u88c5\u8fd0\u884c\u65f6\u4f9d\u8d56\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    libpq5 \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\nWORKDIR /app\n\n# \u4ece\u6784\u5efa\u9636\u6bb5\u590d\u5236\u4f9d\u8d56\nCOPY --from=build /usr/local/lib/python3.11/site-packages /usr/local/lib/python3.11/site-packages\nCOPY --from=build /app/src ./src\n\n# \u521b\u5efa\u975eroot\u7528\u6237\nRUN useradd --create-home --shell /bin/bash app &amp;&amp; \\\n    chown -R app:app /app\nUSER app\n\n# \u5065\u5eb7\u68c0\u67e5\nHEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \\\n    CMD curl -f http://localhost:8000/health || exit 1\n\n# \u66b4\u9732\u7aef\u53e3\nEXPOSE 8000\n\n# \u542f\u52a8\u547d\u4ee4\nCMD [\"python\", \"-m\", \"uvicorn\", \"src.main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n</code></pre>"},{"location":"testing/ci_config/#_11","title":"\u6d4b\u8bd5\u73af\u5883\u914d\u7f6e","text":"<pre><code># docker-compose.test.yml\nversion: '3.8'\n\nservices:\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile.ci\n      target: test\n    depends_on:\n      - postgres\n      - redis\n      - mlflow\n    environment:\n      - DATABASE_URL=postgresql://postgres:postgres@postgres:5432/football_test\n      - REDIS_URL=redis://redis:6379/0\n      - MLFLOW_TRACKING_URI=http://mlflow:5000\n      - ENVIRONMENT=test\n    volumes:\n      - ./reports:/app/reports\n    networks:\n      - test-network\n\n  postgres:\n    image: postgres:15\n    environment:\n      - POSTGRES_DB=football_test\n      - POSTGRES_USER=postgres\n      - POSTGRES_PASSWORD=postgres\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n      - ./scripts/init-test-db.sql:/docker-entrypoint-initdb.d/init.sql\n    ports:\n      - \"5432:5432\"\n    networks:\n      - test-network\n\n  redis:\n    image: redis:7-alpine\n    ports:\n      - \"6379:6379\"\n    networks:\n      - test-network\n\n  mlflow:\n    image: ghcr.io/mlflow/mlflow:v1.30.0\n    environment:\n      - MLFLOW_BACKEND_STORE_URI=postgresql://postgres:postgres@postgres:5432/mlflow_test\n      - MLFLOW_DEFAULT_ARTIFACT_ROOT=s3://mlflow/\n    ports:\n      - \"5000:5000\"\n    depends_on:\n      - postgres\n    networks:\n      - test-network\n\n  test-runner:\n    build:\n      context: .\n      dockerfile: Dockerfile.ci\n      target: test\n    depends_on:\n      - postgres\n      - redis\n      - mlflow\n    environment:\n      - DATABASE_URL=postgresql://postgres:postgres@postgres:5432/football_test\n      - REDIS_URL=redis://redis:6379/0\n      - MLFLOW_TRACKING_URI=http://mlflow:5000\n      - ENVIRONMENT=test\n    command: pytest tests/ --cov=src --cov-report=xml --cov-report=html\n    volumes:\n      - ./reports:/app/reports\n    networks:\n      - test-network\n\nvolumes:\n  postgres_data:\n\nnetworks:\n  test-network:\n    driver: bridge\n</code></pre>"},{"location":"testing/ci_config/#_12","title":"\u591a\u73af\u5883\u90e8\u7f72","text":"<pre><code># docker-compose.prod.yml\nversion: '3.8'\n\nservices:\n  app:\n    image: football-prediction/api:${TAG:-latest}\n    depends_on:\n      - postgres\n      - redis\n      - mlflow\n      - kafka\n    environment:\n      - DATABASE_URL=${DATABASE_URL}\n      - REDIS_URL=${REDIS_URL}\n      - MLFLOW_TRACKING_URI=${MLFLOW_TRACKING_URI}\n      - KAFKA_BOOTSTRAP_SERVERS=${KAFKA_BOOTSTRAP_SERVERS}\n      - ENVIRONMENT=production\n      - LOG_LEVEL=${LOG_LEVEL:-INFO}\n    ports:\n      - \"8000:8000\"\n    volumes:\n      - ./logs:/app/logs\n    restart: unless-stopped\n    networks:\n      - prod-network\n    deploy:\n      replicas: 3\n      resources:\n        limits:\n          memory: 1G\n          cpus: '0.5'\n        reservations:\n          memory: 512M\n          cpus: '0.25'\n\n  postgres:\n    image: postgres:15\n    environment:\n      - POSTGRES_DB=${POSTGRES_DB}\n      - POSTGRES_USER=${POSTGRES_USER}\n      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n      - ./backups:/backups\n    networks:\n      - prod-network\n    deploy:\n      resources:\n        limits:\n          memory: 2G\n          cpus: '1'\n        reservations:\n          memory: 1G\n          cpus: '0.5'\n\n  redis:\n    image: redis:7-alpine\n    command: redis-server --appendonly yes --maxmemory 256mb --maxmemory-policy allkeys-lru\n    volumes:\n      - redis_data:/data\n    networks:\n      - prod-network\n    deploy:\n      resources:\n        limits:\n          memory: 512M\n          cpus: '0.25'\n\n  mlflow:\n    image: ghcr.io/mlflow/mlflow:v1.30.0\n    environment:\n      - MLFLOW_BACKEND_STORE_URI=${MLFLOW_BACKEND_STORE_URI}\n      - MLFLOW_DEFAULT_ARTIFACT_ROOT=${MLFLOW_ARTIFACT_ROOT}\n    ports:\n      - \"5000:5000\"\n    networks:\n      - prod-network\n\n  kafka:\n    image: confluentinc/cp-kafka:7.3.2\n    depends_on:\n      - zookeeper\n    environment:\n      - KAFKA_BROKER_ID=1\n      - KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181\n      - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092\n      - KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1\n      - KAFKA_AUTO_CREATE_TOPICS_ENABLE=true\n    volumes:\n      - kafka_data:/var/lib/kafka/data\n    networks:\n      - prod-network\n\n  zookeeper:\n    image: confluentinc/cp-zookeeper:7.3.2\n    environment:\n      - ZOOKEEPER_CLIENT_PORT=2181\n      - ZOOKEEPER_TICK_TIME=2000\n    volumes:\n      - zookeeper_data:/var/lib/zookeeper/data\n    networks:\n      - prod-network\n\n  nginx:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf\n      - ./ssl:/etc/nginx/ssl\n    depends_on:\n      - app\n    networks:\n      - prod-network\n\n  prometheus:\n    image: prom/prometheus:latest\n    ports:\n      - \"9090:9090\"\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus_data:/prometheus\n    networks:\n      - prod-network\n\n  grafana:\n    image: grafana/grafana:latest\n    ports:\n      - \"3000:3000\"\n    environment:\n      - GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_PASSWORD}\n    volumes:\n      - grafana_data:/var/lib/grafana\n    networks:\n      - prod-network\n\nvolumes:\n  postgres_data:\n  redis_data:\n  kafka_data:\n  zookeeper_data:\n  prometheus_data:\n  grafana_data:\n\nnetworks:\n  prod-network:\n    driver: bridge\n</code></pre>"},{"location":"testing/ci_config/#_13","title":"\u901a\u77e5\u4e0e\u62a5\u544a","text":""},{"location":"testing/ci_config/#slack","title":"Slack\u901a\u77e5","text":"<pre><code># scripts/slack_notifier.py\nimport requests\nimport json\nimport os\nfrom typing import Dict, Any, List\n\nclass SlackNotifier:\n    \"\"\"Slack\u901a\u77e5\u5668\"\"\"\n\n    def __init__(self, webhook_url: str):\n        self.webhook_url = webhook_url\n\n    def send_message(self, message: str, channel: str = \"#general\", username: str = \"CI Bot\") -&gt; bool:\n        \"\"\"\u53d1\u9001\u6d88\u606f\u5230Slack\"\"\"\n        payload = {\n            \"channel\": channel,\n            \"username\": username,\n            \"text\": message,\n            \"icon_emoji\": \":robot_face:\"\n        }\n\n        try:\n            response = requests.post(\n                self.webhook_url,\n                data=json.dumps(payload),\n                headers={'Content-Type': 'application/json'}\n            )\n            return response.status_code == 200\n        except Exception as e:\n            print(f\"Failed to send Slack message: {e}\")\n            return False\n\n    def send_ci_status(self, status: str, details: Dict[str, Any]) -&gt; bool:\n        \"\"\"\u53d1\u9001CI\u72b6\u6001\u901a\u77e5\"\"\"\n        status_emoji = {\n            \"success\": \":white_check_mark:\",\n            \"failed\": \":x:\",\n            \"running\": \":running:\",\n            \"cancelled\": \":warning:\"\n        }.get(status, \":question:\")\n\n        message = f\"\"\"\n{status_emoji} CI Pipeline {status.upper()}\n\n*Repository:* {details.get('repository', 'Unknown')}\n*Branch:* {details.get('branch', 'Unknown')}\n*Commit:* {details.get('commit', 'Unknown')[:7]}\n*Author:* {details.get('author', 'Unknown')}\n*Duration:* {details.get('duration', 'Unknown')}\n\n{self._format_test_results(details.get('tests', {}))}\n{self._format_coverage_info(details.get('coverage', {}))}\n{self._format_quality_metrics(details.get('quality', {}))}\n        \"\"\"\n\n        return self.send_message(message, \"#ci-cd\")\n\n    def send_coverage_alert(self, coverage_data: Dict[str, Any]) -&gt; bool:\n        \"\"\"\u53d1\u9001\u8986\u76d6\u7387\u8b66\u62a5\"\"\"\n        current_coverage = coverage_data.get('current', 0)\n        previous_coverage = coverage_data.get('previous', 0)\n        threshold = coverage_data.get('threshold', 80)\n\n        if current_coverage &lt; threshold:\n            message = f\"\"\"\n:warning: Coverage Alert!\n\nCurrent coverage ({current_coverage:.1f}%) is below threshold ({threshold}%)\nPrevious coverage: {previous_coverage:.1f}%\nChange: {current_coverage - previous_coverage:+.1f}%\n\nCommit: {coverage_data.get('commit', 'Unknown')[:7]}\nBranch: {coverage_data.get('branch', 'Unknown')}\n            \"\"\"\n            return self.send_message(message, \"#alerts\")\n\n        return True\n\n    def send_security_alert(self, security_data: Dict[str, Any]) -&gt; bool:\n        \"\"\"\u53d1\u9001\u5b89\u5168\u8b66\u62a5\"\"\"\n        vulnerabilities = security_data.get('vulnerabilities', [])\n        severity = security_data.get('severity', 'unknown')\n\n        message = f\"\"\"\n:rotating_light: Security Alert!\n\n*Severity:* {severity.upper()}\n*Vulnerabilities Found:* {len(vulnerabilities)}\n*Scan Type:* {security_data.get('scan_type', 'Unknown')}\n\n*Repository:* {security_data.get('repository', 'Unknown')}\n*Commit:* {security_data.get('commit', 'Unknown')[:7]}\n        \"\"\"\n\n        if vulnerabilities:\n            message += \"\\n*Top Issues:*\\n\"\n            for vuln in vulnerabilities[:5]:  # \u53ea\u663e\u793a\u524d5\u4e2a\n                message += f\"- {vuln.get('id', 'Unknown')}: {vuln.get('description', 'No description')}\\n\"\n\n        return self.send_message(message, \"#security\")\n\n    def send_performance_report(self, performance_data: Dict[str, Any]) -&gt; bool:\n        \"\"\"\u53d1\u9001\u6027\u80fd\u62a5\u544a\"\"\"\n        message = f\"\"\"\n:chart_with_upwards_trend: Performance Report\n\n*Response Time:* {performance_data.get('response_time', 'Unknown')}ms\n*Throughput:* {performance_data.get('throughput', 'Unknown')} req/s\n*Error Rate:* {performance_data.get('error_rate', 'Unknown')}%\n*Memory Usage:* {performance_data.get('memory_usage', 'Unknown')}%\n*CPU Usage:* {performance_data.get('cpu_usage', 'Unknown')}%\n\n*Environment:* {performance_data.get('environment', 'Unknown')}\n*Timestamp:* {performance_data.get('timestamp', 'Unknown')}\n        \"\"\"\n\n        return self.send_message(message, \"#performance\")\n\n    def send_deployment_notification(self, deployment_data: Dict[str, Any]) -&gt; bool:\n        \"\"\"\u53d1\u9001\u90e8\u7f72\u901a\u77e5\"\"\"\n        status_emoji = {\n            \"success\": \":rocket:\",\n            \"failed\": \":boom:\",\n            \"started\": \":gear:\"\n        }.get(deployment_data.get('status', ''), \":question:\")\n\n        message = f\"\"\"\n{status_emoji} Deployment {deployment_data.get('status', '').upper()}\n\n*Environment:* {deployment_data.get('environment', 'Unknown')}\n*Service:* {deployment_data.get('service', 'Unknown')}\n*Version:* {deployment_data.get('version', 'Unknown')}\n*Commit:* {deployment_data.get('commit', 'Unknown')[:7]}\n*Deployer:* {deployment_data.get('deployer', 'Unknown')}\n\n{self._format_deployment_details(deployment_data.get('details', {}))}\n        \"\"\"\n\n        return self.send_message(message, \"#deployment\")\n\n    def _format_test_results(self, test_results: Dict[str, Any]) -&gt; str:\n        \"\"\"\u683c\u5f0f\u5316\u6d4b\u8bd5\u7ed3\u679c\"\"\"\n        if not test_results:\n            return \"\"\n\n        passed = test_results.get('passed', 0)\n        failed = test_results.get('failed', 0)\n        skipped = test_results.get('skipped', 0)\n        total = passed + failed + skipped\n\n        return f\"\"\"\n*Tests:* {passed}/{total} passed, {failed} failed, {skipped} skipped\n*Coverage:* {test_results.get('coverage', 0):.1f}%\n        \"\"\"\n\n    def _format_coverage_info(self, coverage_info: Dict[str, Any]) -&gt; str:\n        \"\"\"\u683c\u5f0f\u5316\u8986\u76d6\u7387\u4fe1\u606f\"\"\"\n        if not coverage_info:\n            return \"\"\n\n        return f\"\"\"\n*Coverage:* {coverage_info.get('total', 0):.1f}% (target: {coverage_info.get('target', 80)}%)\n*Lines:* {coverage_info.get('lines', 0)}\n*Branches:* {coverage_info.get('branches', 0)}\n        \"\"\"\n\n    def _format_quality_metrics(self, quality_metrics: Dict[str, Any]) -&gt; str:\n        \"\"\"\u683c\u5f0f\u5316\u8d28\u91cf\u6307\u6807\"\"\"\n        if not quality_metrics:\n            return \"\"\n\n        return f\"\"\"\n*Code Quality:* {quality_metrics.get('score', 'Unknown')}\n*Issues:* {quality_metrics.get('issues', 0)}\n*Debt:* {quality_metrics.get('debt', 'Unknown')}\n        \"\"\"\n\n    def _format_deployment_details(self, details: Dict[str, Any]) -&gt; str:\n        \"\"\"\u683c\u5f0f\u5316\u90e8\u7f72\u8be6\u60c5\"\"\"\n        if not details:\n            return \"\"\n\n        return f\"\"\"\n*Duration:* {details.get('duration', 'Unknown')}\n*Rollback:* {'Yes' if details.get('rollback', False) else 'No'}\n*Health Check:* {'Pass' if details.get('health_check', False) else 'Fail'}\n        \"\"\"\n</code></pre>"},{"location":"testing/ci_config/#_14","title":"\u90ae\u4ef6\u62a5\u544a","text":"<pre><code># scripts/email_reporter.py\nimport smtplib\nfrom email.mime.text import MIMEText\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.base import MIMEBase\nfrom email import encoders\nimport os\nfrom typing import List, Dict, Any\nfrom datetime import datetime\nimport jinja2\n\nclass EmailReporter:\n    \"\"\"\u90ae\u4ef6\u62a5\u544a\u751f\u6210\u5668\"\"\"\n\n    def __init__(self, smtp_config: Dict[str, Any]):\n        self.smtp_server = smtp_config['host']\n        self.smtp_port = smtp_config['port']\n        self.smtp_username = smtp_config['username']\n        self.smtp_password = smtp_config['password']\n        self.from_email = smtp_config['from_email']\n\n    def send_daily_report(self, report_data: Dict[str, Any], recipients: List[str]) -&gt; bool:\n        \"\"\"\u53d1\u9001\u65e5\u62a5\"\"\"\n        subject = f\"Daily CI/CD Report - {datetime.now().strftime('%Y-%m-%d')}\"\n\n        html_content = self._render_template('daily_report.html', report_data)\n        text_content = self._render_template('daily_report.txt', report_data)\n\n        return self._send_email(subject, text_content, html_content, recipients)\n\n    def send_weekly_summary(self, report_data: Dict[str, Any], recipients: List[str]) -&gt; bool:\n        \"\"\"\u53d1\u9001\u5468\u62a5\"\"\"\n        subject = f\"Weekly CI/CD Summary - {datetime.now().strftime('%Y-%m-%d')}\"\n\n        html_content = self._render_template('weekly_summary.html', report_data)\n        text_content = self._render_template('weekly_summary.txt', report_data)\n\n        return self._send_email(subject, text_content, html_content, recipients)\n\n    def send_coverage_alert(self, alert_data: Dict[str, Any], recipients: List[str]) -&gt; bool:\n        \"\"\"\u53d1\u9001\u8986\u76d6\u7387\u8b66\u62a5\"\"\"\n        subject = f\"\u26a0\ufe0f Coverage Alert - {alert_data.get('repository', 'Unknown')}\"\n\n        html_content = self._render_template('coverage_alert.html', alert_data)\n        text_content = self._render_template('coverage_alert.txt', alert_data)\n\n        return self._send_email(subject, text_content, html_content, recipients)\n\n    def send_security_alert(self, alert_data: Dict[str, Any], recipients: List[str]) -&gt; bool:\n        \"\"\"\u53d1\u9001\u5b89\u5168\u8b66\u62a5\"\"\"\n        subject = f\"\ud83d\udd12 Security Alert - {alert_data.get('repository', 'Unknown')}\"\n\n        html_content = self._render_template('security_alert.html', alert_data)\n        text_content = self._render_template('security_alert.txt', alert_data)\n\n        return self._send_email(subject, text_content, html_content, recipients)\n\n    def send_deployment_report(self, deployment_data: Dict[str, Any], recipients: List[str]) -&gt; bool:\n        \"\"\"\u53d1\u9001\u90e8\u7f72\u62a5\u544a\"\"\"\n        status = deployment_data.get('status', 'unknown')\n        subject = f\"Deployment Report - {status.upper()} - {deployment_data.get('environment', 'Unknown')}\"\n\n        html_content = self._render_template('deployment_report.html', deployment_data)\n        text_content = self._render_template('deployment_report.txt', deployment_data)\n\n        return self._send_email(subject, text_content, html_content, recipients)\n\n    def _render_template(self, template_name: str, context: Dict[str, Any]) -&gt; str:\n        \"\"\"\u6e32\u67d3\u6a21\u677f\"\"\"\n        template_dir = os.path.join(os.path.dirname(__file__), 'templates')\n\n        if not os.path.exists(template_dir):\n            os.makedirs(template_dir)\n\n        template_path = os.path.join(template_dir, template_name)\n\n        # \u5982\u679c\u6a21\u677f\u4e0d\u5b58\u5728\uff0c\u521b\u5efa\u9ed8\u8ba4\u6a21\u677f\n        if not os.path.exists(template_path):\n            self._create_default_template(template_name, template_path)\n\n        try:\n            with open(template_path, 'r', encoding='utf-8') as f:\n                template_content = f.read()\n\n            template = jinja2.Template(template_content)\n            return template.render(**context)\n        except Exception as e:\n            print(f\"Failed to render template {template_name}: {e}\")\n            return f\"Report data: {json.dumps(context, indent=2)}\"\n\n    def _create_default_template(self, template_name: str, template_path: str):\n        \"\"\"\u521b\u5efa\u9ed8\u8ba4\u6a21\u677f\"\"\"\n        if template_name == 'daily_report.html':\n            template_content = \"\"\"\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Daily CI/CD Report&lt;/title&gt;\n    &lt;style&gt;\n        body { font-family: Arial, sans-serif; margin: 20px; }\n        .header { background-color: #f0f0f0; padding: 20px; border-radius: 5px; }\n        .section { margin: 20px 0; }\n        .metric { display: inline-block; margin: 10px; padding: 10px; background-color: #e9ecef; border-radius: 3px; }\n        .success { color: #28a745; }\n        .failed { color: #dc3545; }\n        .warning { color: #ffc107; }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=\"header\"&gt;\n        &lt;h1&gt;Daily CI/CD Report&lt;/h1&gt;\n        &lt;p&gt;Date: {{ date }}&lt;/p&gt;\n        &lt;p&gt;Repository: {{ repository }}&lt;/p&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"section\"&gt;\n        &lt;h2&gt;Test Results&lt;/h2&gt;\n        &lt;div class=\"metric\"&gt;Total Tests: {{ tests.total }}&lt;/div&gt;\n        &lt;div class=\"metric success\"&gt;Passed: {{ tests.passed }}&lt;/div&gt;\n        &lt;div class=\"metric failed\"&gt;Failed: {{ tests.failed }}&lt;/div&gt;\n        &lt;div class=\"metric\"&gt;Skipped: {{ tests.skipped }}&lt;/div&gt;\n        &lt;div class=\"metric\"&gt;Coverage: {{ tests.coverage }}%&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"section\"&gt;\n        &lt;h2&gt;Build Information&lt;/h2&gt;\n        &lt;p&gt;Commits: {{ builds.commits }}&lt;/p&gt;\n        &lt;p&gt;Successful Builds: {{ builds.successful }}&lt;/p&gt;\n        &lt;p&gt;Failed Builds: {{ builds.failed }}&lt;/p&gt;\n        &lt;p&gt;Average Build Time: {{ builds.avg_time }}&lt;/p&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"section\"&gt;\n        &lt;h2&gt;Code Quality&lt;/h2&gt;\n        &lt;p&gt;Issues Found: {{ quality.issues }}&lt;/p&gt;\n        &lt;p&gt;Coverage Trend: {{ quality.coverage_trend }}&lt;/p&gt;\n        &lt;p&gt;Code Debt: {{ quality.debt }}&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n            \"\"\"\n        elif template_name == 'coverage_alert.html':\n            template_content = \"\"\"\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Coverage Alert&lt;/title&gt;\n    &lt;style&gt;\n        body { font-family: Arial, sans-serif; margin: 20px; }\n        .alert { background-color: #f8d7da; border: 1px solid #f5c6cb; padding: 20px; border-radius: 5px; }\n        .metric { margin: 10px 0; }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=\"alert\"&gt;\n        &lt;h1&gt;\u26a0\ufe0f Coverage Alert&lt;/h1&gt;\n        &lt;div class=\"metric\"&gt;\n            &lt;strong&gt;Current Coverage:&lt;/strong&gt; {{ current_coverage }}%\n        &lt;/div&gt;\n        &lt;div class=\"metric\"&gt;\n            &lt;strong&gt;Threshold:&lt;/strong&gt; {{ threshold }}%\n        &lt;/div&gt;\n        &lt;div class=\"metric\"&gt;\n            &lt;strong&gt;Previous Coverage:&lt;/strong&gt; {{ previous_coverage }}%\n        &lt;/div&gt;\n        &lt;div class=\"metric\"&gt;\n            &lt;strong&gt;Change:&lt;/strong&gt; {{ change }}%\n        &lt;/div&gt;\n        &lt;div class=\"metric\"&gt;\n            &lt;strong&gt;Repository:&lt;/strong&gt; {{ repository }}\n        &lt;/div&gt;\n        &lt;div class=\"metric\"&gt;\n            &lt;strong&gt;Branch:&lt;/strong&gt; {{ branch }}\n        &lt;/div&gt;\n        &lt;div class=\"metric\"&gt;\n            &lt;strong&gt;Commit:&lt;/strong&gt; {{ commit }}\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n            \"\"\"\n        else:\n            template_content = \"\"\"\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Report&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Report&lt;/h1&gt;\n    &lt;pre&gt;{{ context | tojson(indent=2) }}&lt;/pre&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n            \"\"\"\n\n        with open(template_path, 'w', encoding='utf-8') as f:\n            f.write(template_content)\n\n    def _send_email(self, subject: str, text_content: str, html_content: str, recipients: List[str]) -&gt; bool:\n        \"\"\"\u53d1\u9001\u90ae\u4ef6\"\"\"\n        try:\n            msg = MIMEMultipart('alternative')\n            msg['Subject'] = subject\n            msg['From'] = self.from_email\n            msg['To'] = ', '.join(recipients)\n\n            # \u6dfb\u52a0\u6587\u672c\u5185\u5bb9\n            text_part = MIMEText(text_content, 'plain')\n            msg.attach(text_part)\n\n            # \u6dfb\u52a0HTML\u5185\u5bb9\n            html_part = MIMEText(html_content, 'html')\n            msg.attach(html_part)\n\n            # \u53d1\u9001\u90ae\u4ef6\n            with smtplib.SMTP(self.smtp_server, self.smtp_port) as server:\n                server.starttls()\n                server.login(self.smtp_username, self.smtp_password)\n                server.send_message(msg)\n\n            return True\n\n        except Exception as e:\n            print(f\"Failed to send email: {e}\")\n            return False\n</code></pre>"},{"location":"testing/ci_config/#_15","title":"\u603b\u7ed3","text":"<p>\u672c\u6587\u6863\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u8db3\u7403\u9884\u6d4b\u7cfb\u7edf\u7684CI/CD\u914d\u7f6e\uff0c\u5305\u62ec\uff1a</p> <ol> <li>GitHub Actions\u5de5\u4f5c\u6d41: \u5b8c\u6574\u7684CI/CD\u6d41\u6c34\u7ebf\u914d\u7f6e</li> <li>\u8986\u76d6\u7387\u76d1\u63a7: Codecov\u96c6\u6210\u548c\u8d8b\u52bf\u5206\u6790</li> <li>\u81ea\u52a8\u5316\u68c0\u67e5: \u4ee3\u7801\u8d28\u91cf\u3001\u5b89\u5168\u3001\u6027\u80fd\u68c0\u67e5</li> <li>Docker\u914d\u7f6e: \u6d4b\u8bd5\u73af\u5883\u548c\u751f\u4ea7\u73af\u5883\u914d\u7f6e</li> <li>\u901a\u77e5\u7cfb\u7edf: Slack\u901a\u77e5\u548c\u90ae\u4ef6\u62a5\u544a</li> </ol> <p>\u8fd9\u4e9b\u914d\u7f6e\u786e\u4fdd\u4e86\u4ee3\u7801\u8d28\u91cf\u3001\u6d4b\u8bd5\u8986\u76d6\u7387\u548c\u90e8\u7f72\u6d41\u7a0b\u7684\u81ea\u52a8\u5316\u7ba1\u7406\uff0c\u4e3a\u9879\u76ee\u7684\u6301\u7eed\u4ea4\u4ed8\u63d0\u4f9b\u4e86\u575a\u5b9e\u57fa\u7840\u3002</p>"},{"location":"testing/fixtures_factories/","title":"\ud83d\udce6 \u6d4b\u8bd5 Fixtures \u4e0e\u6570\u636e\u5de5\u5382","text":"<p>\u672c\u6587\u6863\u8bf4\u660e\u5982\u4f55\u4f7f\u7528\u65b0\u7684\u6d4b\u8bd5\u8f85\u52a9\u5de5\u5177\u548c Mock \u67b6\u6784\u3002</p>"},{"location":"testing/fixtures_factories/#_1","title":"\ud83c\udfaf \u65b0\u7684\u6d4b\u8bd5\u5de5\u5177\u4f53\u7cfb","text":""},{"location":"testing/fixtures_factories/#1-mock-testshelpers","title":"1. \u7edf\u4e00 Mock \u5de5\u5177 (<code>tests/helpers/</code>)","text":"<p>\u65b0\u7684\u6d4b\u8bd5\u4f53\u7cfb\u4f7f\u7528 <code>tests/helpers/</code> \u76ee\u5f55\u4e0b\u7684\u7edf\u4e00 Mock \u5de5\u5177\uff1a</p> <pre><code># \u5bfc\u5165\u6240\u6709 Mock \u5de5\u5177\nfrom tests.helpers import (\n    # \u6570\u636e\u5e93\u5de5\u5177\n    create_sqlite_memory_engine,\n    create_sqlite_sessionmaker,\n\n    # Redis Mock\n    MockRedis,\n    MockAsyncRedis,\n    apply_redis_mocks,\n\n    # MLflow Mock\n    MockMlflow,\n    MockMlflowClient,\n    MockMlflowRun,\n    apply_mlflow_mocks,\n\n    # Kafka Mock\n    MockKafkaProducer,\n    MockKafkaConsumer,\n    MockKafkaMessage,\n    apply_kafka_mocks,\n\n    # HTTP Mock\n    MockHTTPResponse,\n    apply_http_mocks,\n)\n</code></pre>"},{"location":"testing/fixtures_factories/#2-mock-fixture","title":"2. \u5168\u5c40 Mock fixture","text":"<p>\u6240\u6709 Mock \u81ea\u52a8\u5e94\u7528\uff0c\u65e0\u9700\u624b\u52a8\u914d\u7f6e\uff1a</p> <pre><code># \u5728 conftest.py \u4e2d\u5df2\u81ea\u52a8\u914d\u7f6e\n@pytest.fixture(scope=\"session\", autouse=True)\ndef mock_external_services():\n    \"\"\"\u81ea\u52a8 Mock \u6240\u6709\u5916\u90e8\u670d\u52a1\"\"\"\n    # \u81ea\u52a8\u5e94\u7528\u6240\u6709 Mock\n</code></pre>"},{"location":"testing/fixtures_factories/#_2","title":"\ud83d\udcdd \u4f7f\u7528\u793a\u4f8b","text":""},{"location":"testing/fixtures_factories/#_3","title":"\u5355\u5143\u6d4b\u8bd5\u793a\u4f8b","text":"<pre><code>import pytest\nfrom tests.helpers import MockRedis, create_sqlite_sessionmaker\n\nclass TestPredictionService:\n    @pytest.fixture\n    async def db_session(self):\n        \"\"\"\u5185\u5b58\u6570\u636e\u5e93\u4f1a\u8bdd\"\"\"\n        engine = create_sqlite_memory_engine()\n        sessionmaker = create_sqlite_sessionmaker(engine)\n        async with sessionmaker() as session:\n            yield session\n        engine.dispose()\n\n    @pytest.fixture\n    def mock_redis(self):\n        \"\"\"Mock Redis \u5ba2\u6237\u7aef\"\"\"\n        return MockRedis()\n\n    @pytest.fixture\n    def service(self, db_session, mock_redis):\n        \"\"\"\u521b\u5efa\u670d\u52a1\u5b9e\u4f8b\"\"\"\n        from src.services.prediction_service import PredictionService\n        return PredictionService(db=db_session, redis=mock_redis)\n\n    @pytest.mark.asyncio\n    async def test_create_prediction(self, service, sample_prediction_data):\n        \"\"\"\u6d4b\u8bd5\u521b\u5efa\u9884\u6d4b\"\"\"\n        # Mock \u8fd4\u56de\u503c\n        service.redis.get.return_value = None\n        service.redis.set.return_value = True\n\n        # \u6267\u884c\u6d4b\u8bd5\n        result = await service.create_prediction(sample_prediction_data)\n\n        # \u9a8c\u8bc1\n        assert result is not None\n        service.redis.set.assert_called_once()\n</code></pre>"},{"location":"testing/fixtures_factories/#_4","title":"\u6d4b\u8bd5\u6570\u636e\u5de5\u5382","text":"<p>\u867d\u7136\u6ca1\u6709\u4f7f\u7528 factory-boy\uff0c\u4f46\u53ef\u4ee5\u521b\u5efa\u7b80\u5355\u7684\u6570\u636e\u5de5\u5382\uff1a</p> <pre><code># \u5728 tests/factories/ \u76ee\u5f55\n@pytest.fixture\ndef sample_match_data():\n    \"\"\"\u793a\u4f8b\u6bd4\u8d5b\u6570\u636e\"\"\"\n    return {\n        \"home_team\": \"Team A\",\n        \"away_team\": \"Team B\",\n        \"match_date\": datetime.now(),\n        \"league_id\": 1\n    }\n\n@pytest.fixture\ndef sample_prediction_data():\n    \"\"\"\u793a\u4f8b\u9884\u6d4b\u6570\u636e\"\"\"\n    return {\n        \"match_id\": 12345,\n        \"predicted_home_score\": 2,\n        \"predicted_away_score\": 1,\n        \"confidence\": 0.75\n    }\n</code></pre>"},{"location":"testing/fixtures_factories/#_5","title":"\ud83d\udd27 \u9ad8\u7ea7\u7528\u6cd5","text":""},{"location":"testing/fixtures_factories/#1-mock","title":"1. \u81ea\u5b9a\u4e49 Mock \u884c\u4e3a","text":"<pre><code>@pytest.fixture\ndef custom_mock_redis():\n    \"\"\"\u81ea\u5b9a\u4e49 Mock Redis\"\"\"\n    redis_mock = MockRedis()\n\n    # \u8bbe\u7f6e\u9884\u8bbe\u6570\u636e\n    redis_mock.set(\"cached_value\", \"test_value\")\n\n    # \u81ea\u5b9a\u4e49\u65b9\u6cd5\u884c\u4e3a\n    def custom_get(key):\n        if key == \"special_key\":\n            return b\"special_value\"\n        return redis_mock.data.get(key)\n\n    redis_mock.get = custom_get\n    return redis_mock\n</code></pre>"},{"location":"testing/fixtures_factories/#2-mock","title":"2. \u6761\u4ef6 Mock","text":"<pre><code>@pytest.fixture\ndef conditional_service(mock_db_session):\n    \"\"\"\u6761\u4ef6 Mock \u670d\u52a1\"\"\"\n    from src.services.prediction_service import PredictionService\n\n    service = PredictionService(db=mock_db_session, redis=MockRedis())\n\n    # \u6839\u636e\u6761\u4ef6\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\n    def mock_predict(match_id):\n        if match_id % 2 == 0:\n            return {\"home_score\": 2, \"away_score\": 1}\n        else\n            return {\"home_score\": 1, \"away_score\": 1}\n\n    service.predict = mock_predict\n    return service\n</code></pre>"},{"location":"testing/fixtures_factories/#3","title":"3. \u5f02\u6b65\u6d4b\u8bd5","text":"<pre><code>@pytest.mark.asyncio\nasync def test_async_operation(async_client):\n    \"\"\"\u5f02\u6b65\u6d4b\u8bd5\u793a\u4f8b\"\"\"\n    # \u53d1\u9001\u5f02\u6b65\u8bf7\u6c42\n    response = await async_client.post(\"/api/predictions\", json={\n        \"match_id\": 123,\n        \"home_score\": 2,\n        \"away_score\": 1\n    })\n\n    assert response.status_code == 200\n    data = response.json()\n    assert data[\"status\"] == \"success\"\n</code></pre>"},{"location":"testing/fixtures_factories/#_6","title":"\ud83d\udcca \u6d4b\u8bd5\u6570\u636e\u7ba1\u7406","text":""},{"location":"testing/fixtures_factories/#_7","title":"\u6570\u636e\u9694\u79bb","text":"<p>\u6bcf\u4e2a\u6d4b\u8bd5\u81ea\u52a8\u9694\u79bb\uff1a</p> <ul> <li>\u4f7f\u7528\u72ec\u7acb\u7684\u5185\u5b58\u6570\u636e\u5e93</li> <li>Mock \u670d\u52a1\u72b6\u6001\u5728\u6d4b\u8bd5\u95f4\u81ea\u52a8\u91cd\u7f6e</li> <li>\u4e0d\u4f1a\u76f8\u4e92\u5f71\u54cd</li> </ul>"},{"location":"testing/fixtures_factories/#_8","title":"\u6570\u636e\u6e05\u7406","text":"<pre><code>@pytest.fixture(autouse=True)\ndef cleanup_after_test(db_session):\n    \"\"\"\u6d4b\u8bd5\u540e\u81ea\u52a8\u6e05\u7406\"\"\"\n    yield\n\n    # \u6e05\u7406\u6240\u6709\u6d4b\u8bd5\u6570\u636e\n    db_session.execute(text(\"DELETE FROM test_table\"))\n    db_session.commit()\n</code></pre>"},{"location":"testing/fixtures_factories/#_9","title":"\ud83d\ude80 \u6027\u80fd\u4f18\u5316","text":""},{"location":"testing/fixtures_factories/#1-session-scope","title":"1. \u4f7f\u7528 Session scope","text":"<pre><code>@pytest.fixture(scope=\"session\")\ndef shared_service():\n    \"\"\" session \u7ea7\u522b\u7684 fixture\uff0c\u6240\u6709\u6d4b\u8bd5\u5171\u4eab\"\"\"\n    # \u521d\u59cb\u5316\u4e00\u6b21\uff0c\u6240\u6709\u6d4b\u8bd5\u4f7f\u7528\n    service = HeavyInitService()\n    yield service\n    service.cleanup()\n</code></pre>"},{"location":"testing/fixtures_factories/#2","title":"2. \u5e76\u884c\u6d4b\u8bd5","text":"<pre><code># \u4f7f\u7528 pytest-xdist \u5e76\u884c\u8fd0\u884c\npytest tests/unit -n auto\n</code></pre>"},{"location":"testing/fixtures_factories/#3_1","title":"3. \u8df3\u8fc7\u6162\u901f\u6d4b\u8bd5","text":"<pre><code>@pytest.mark.slow\ndef test_heavy_operation(self):\n    \"\"\"\u6162\u901f\u6d4b\u8bd5\uff0c\u9ed8\u8ba4\u8df3\u8fc7\"\"\"\n    # \u8017\u65f6\u64cd\u4f5c\n    pass\n\n# \u8fd0\u884c\u65f6\u5305\u542b\u6162\u901f\u6d4b\u8bd5\npytest -m \"not slow\"  # \u8df3\u8fc7\u6162\u901f\npytest -m slow         # \u53ea\u8fd0\u884c\u6162\u901f\n</code></pre>"},{"location":"testing/fixtures_factories/#_10","title":"\ud83c\udfa8 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"testing/fixtures_factories/#1","title":"1. \u547d\u540d\u89c4\u8303","text":"<ul> <li>fixture: <code>sample_*_data</code></li> <li>\u6d4b\u8bd5\u65b9\u6cd5: <code>test_*</code></li> <li>\u6d4b\u8bd5\u7c7b: <code>Test*</code></li> </ul>"},{"location":"testing/fixtures_factories/#2_1","title":"2. \u6d4b\u8bd5\u7ed3\u6784","text":"<pre><code>def test_feature_behavior(self):\n    \"\"\"\u6d4b\u8bd5\u529f\u80fd\u884c\u4e3a\n\n    Given - \u51c6\u5907\u6570\u636e\n    When - \u6267\u884c\u64cd\u4f5c\n    Then - \u9a8c\u8bc1\u7ed3\u679c\n    \"\"\"\n    # Given\n    data = prepare_test_data()\n\n    # When\n    result = perform_operation(data)\n\n    # Then\n    assert result.success\n    assert result.value == expected\n</code></pre>"},{"location":"testing/fixtures_factories/#3_2","title":"3. \u4f7f\u7528\u63cf\u8ff0\u6027\u7684\u65ad\u8a00","text":"<pre><code># \u597d\u7684\u65ad\u8a00\nassert prediction.confidence &gt; 0.5, \"\u7f6e\u4fe1\u5ea6\u5e94\u8be5\u5927\u4e8e 0.5\"\nassert user.email.endswith(\"@example.com\"), \"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e\"\n\n# \u4f7f\u7528 pytest.raises \u6d4b\u8bd5\u5f02\u5e38\nwith pytest.raises(ValueError, match=\"\u65e0\u6548\u7684\u6bd4\u8d5bID\"):\n    service.get_prediction(-1)\n</code></pre>"},{"location":"testing/fixtures_factories/#_11","title":"\ud83d\udd0d \u8c03\u8bd5\u6280\u5de7","text":""},{"location":"testing/fixtures_factories/#1_1","title":"1. \u67e5\u770b\u751f\u6210\u7684\u5185\u5bb9","text":"<pre><code>def test_something(test_data):\n    # \u6253\u5370\u6570\u636e\u7528\u4e8e\u8c03\u8bd5\n    print(f\"Test data: {test_data}\")\n    # \u6216\u8005\u4f7f\u7528 -s \u53c2\u6570\u8fd0\u884c pytest\n</code></pre>"},{"location":"testing/fixtures_factories/#2_2","title":"2. \u4f7f\u7528\u65ad\u70b9","text":"<pre><code>def test_complex_logic():\n    # \u6dfb\u52a0\u65ad\u70b9\n    import pdb; pdb.set_trace()\n    # \u6216\u4f7f\u7528 ipdb\uff08\u66f4\u597d\u7528\uff09\n    import ipdb; ipdb.set_trace()\n</code></pre>"},{"location":"testing/fixtures_factories/#3_3","title":"3. \u67e5\u770b\u9519\u8bef\u8be6\u60c5","text":"<pre><code># \u663e\u793a\u5b8c\u6574\u9519\u8bef\u5806\u6808\npytest --tb=long\n\n# \u53ea\u663e\u793a\u5931\u8d25\u7684\u6d4b\u8bd5\npytest --tb=short -x\n</code></pre>"},{"location":"testing/fixtures_factories/#_12","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>\u5b8c\u6574\u6d4b\u8bd5\u6307\u5357</li> <li>\u6d4b\u8bd5\u793a\u4f8b</li> <li>CI \u914d\u7f6e</li> <li>\u6027\u80fd\u6d4b\u8bd5</li> </ul> <p>\u66f4\u65b0\u65e5\u671f\uff1a2025-01-04</p>"}]}